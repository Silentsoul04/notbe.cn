<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>使用loadrunner进行压力测试之----post请求 « NotBeCN</title>
  <meta name="description" content="             1. 发送post请求时使用web_submit_data&nbsp;        如：            1 web_submit_data("create",//事务名  2           "Action=http://bizhi.sogou.com/diy/", //请...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2015/06/28/weixin_34402090_90127156.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">使用loadrunner进行压力测试之----post请求</h1>
    <p class="post-meta">Jun 28, 2015</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <p style="margin-left:30px;">1. 发送post请求时使用web_submit_data&nbsp;</p> 
   <div style="margin-left:30px;">
    如： 
    <div class="cnblogs_code"> 
     <pre><span style="color:#008080;"> 1</span> web_submit_data(<span style="color:#800000;">"</span><span style="color:#800000;">create</span><span style="color:#800000;">"</span>,<span style="color:#008000;">//</span><span style="color:#008000;">事务名 </span>
<span style="color:#008080;"> 2</span>           <span style="color:#800000;">"</span><span style="color:#800000;">Action=http://bizhi.sogou.com/diy/</span><span style="color:#800000;">"</span>, <span style="color:#008000;">//</span><span style="color:#008000;">请求域名</span>
<span style="color:#008080;"> 3</span>           <span style="color:#800000;">"</span><span style="color:#800000;">Method=POST</span><span style="color:#800000;">"</span>, <span style="color:#008000;">//</span><span style="color:#008000;">请求类型为post</span>
<span style="color:#008080;"> 4</span>           <span style="color:#800000;">"</span><span style="color:#800000;">RecContentType=application/json</span><span style="color:#800000;">"</span>, <span style="color:#008000;">//</span><span style="color:#008000;">返回格式为json</span>
<span style="color:#008080;"> 5</span>           <span style="color:#800000;">"</span><span style="color:#800000;">Referer=http://bizhi.sogou.com/diy?wp_id=8743</span><span style="color:#800000;">"</span><span style="color:#000000;">,
</span><span style="color:#008080;"> 6</span>           <span style="color:#800000;">"</span><span style="color:#800000;">Snapshot=t4.inf</span><span style="color:#800000;">"</span><span style="color:#000000;">,
</span><span style="color:#008080;"> 7</span>           <span style="color:#800000;">"</span><span style="color:#800000;">Mode=HTML</span><span style="color:#800000;">"</span><span style="color:#000000;">,
</span><span style="color:#008080;"> 8</span>           ITEMDATA, <span style="color:#008000;">//</span><span style="color:#008000;">下面编辑post请求的数据</span>
<span style="color:#008080;"> 9</span>           <span style="color:#800000;">"</span><span style="color:#800000;">Name=img</span><span style="color:#800000;">"</span>, <span style="color:#800000;">"</span><span style="color:#800000;">Value=http://dl.bizhi.sogou.com/images/2012/05/3/8743.jpg</span><span style="color:#800000;">"</span>, ENDITEM, <span style="color:#008000;">//</span><span style="color:#008000;">数据的name、value及结束符</span>
<span style="color:#008080;">10</span>           <span style="color:#800000;">"</span><span style="color:#800000;">Name=left</span><span style="color:#800000;">"</span>, <span style="color:#800000;">"</span><span style="color:#800000;">Value=60</span><span style="color:#800000;">"</span>, ENDITEM, <span style="color:#008000;">//</span><span style="color:#008000;">第二条数据的name、value及结束符</span>
<span style="color:#008080;">11</span>           <span style="color:#800000;">"</span><span style="color:#800000;">Name=top</span><span style="color:#800000;">"</span>, <span style="color:#800000;">"</span><span style="color:#800000;">Value=30</span><span style="color:#800000;">"</span><span style="color:#000000;">, ENDITEM,
</span><span style="color:#008080;">12</span>           <span style="color:#800000;">"</span><span style="color:#800000;">Name=width</span><span style="color:#800000;">"</span>, <span style="color:#800000;">"</span><span style="color:#800000;">Value=720</span><span style="color:#800000;">"</span><span style="color:#000000;">, ENDITEM,
</span><span style="color:#008080;">13</span>           <span style="color:#800000;">"</span><span style="color:#800000;">Name=height</span><span style="color:#800000;">"</span>, <span style="color:#800000;">"</span><span style="color:#800000;">Value=450</span><span style="color:#800000;">"</span><span style="color:#000000;">, ENDITEM,
</span><span style="color:#008080;">14</span>           <span style="color:#800000;">"</span><span style="color:#800000;">Name=model</span><span style="color:#800000;">"</span>, <span style="color:#800000;">"</span><span style="color:#800000;">Value=5/5s</span><span style="color:#800000;">"</span><span style="color:#000000;">, ENDITEM,
</span><span style="color:#008080;">15</span>           <span style="color:#800000;">"</span><span style="color:#800000;">Name=x</span><span style="color:#800000;">"</span>, <span style="color:#800000;">"</span><span style="color:#800000;">Value=1</span><span style="color:#800000;">"</span><span style="color:#000000;">, ENDITEM,
</span><span style="color:#008080;">16</span>           <span style="color:#800000;">"</span><span style="color:#800000;">Name=y</span><span style="color:#800000;">"</span>, <span style="color:#800000;">"</span><span style="color:#800000;">Value=1</span><span style="color:#800000;">"</span><span style="color:#000000;">, ENDITEM,
</span><span style="color:#008080;">17</span>           <span style="color:#800000;">"</span><span style="color:#800000;">Name=ofc</span><span style="color:#800000;">"</span>, <span style="color:#800000;">"</span><span style="color:#800000;">Value=1</span><span style="color:#800000;">"</span><span style="color:#000000;">, ENDITEM,
</span><span style="color:#008080;">18</span>           <span style="color:#800000;">"</span><span style="color:#800000;">Name=wp_id</span><span style="color:#800000;">"</span>, <span style="color:#800000;">"</span><span style="color:#800000;">Value=8743</span><span style="color:#800000;">"</span><span style="color:#000000;">, ENDITEM,
</span><span style="color:#008080;">19</span>           <span style="color:#800000;">"</span><span style="color:#800000;">Name=mat</span><span style="color:#800000;">"</span>, <span style="color:#800000;">"</span><span style="color:#800000;">Value=ms</span><span style="color:#800000;">"</span><span style="color:#000000;">, ENDITEM,
</span><span style="color:#008080;">20</span>           <span style="color:#800000;">"</span><span style="color:#800000;">Name=curMode</span><span style="color:#800000;">"</span>, <span style="color:#800000;">"</span><span style="color:#800000;">Value=normal</span><span style="color:#800000;">"</span><span style="color:#000000;">, ENDITEM,
</span><span style="color:#008080;">21</span>           LAST);</pre> 
    </div> 
    <div>
     2. 如果要发送的请求的数据值需要变化，那么需要将请求中的值参数化，，如果是根据上一条请求的返回值来确定请求中的数据值，那么需要对上一条请求的返回值进行解析
    </div> 
    <div>
     如：
    </div> 
    <div> 
     <div class="cnblogs_code"> 
      <pre><span style="color:#008080;"> 1</span> web_submit_data(<span style="color:#800000;">"</span><span style="color:#800000;">create</span><span style="color:#800000;">"</span><span style="color:#000000;">,
</span><span style="color:#008080;"> 2</span>           <span style="color:#800000;">"</span><span style="color:#800000;">Action=http://bizhi.sogou.com/diy/</span><span style="color:#800000;">"</span><span style="color:#000000;">,
</span><span style="color:#008080;"> 3</span>           <span style="color:#800000;">"</span><span style="color:#800000;">Method=POST</span><span style="color:#800000;">"</span><span style="color:#000000;">,
</span><span style="color:#008080;"> 4</span>           <span style="color:#800000;">"</span><span style="color:#800000;">RecContentType=application/json</span><span style="color:#800000;">"</span><span style="color:#000000;">,
</span><span style="color:#008080;"> 5</span>           <span style="color:#800000;">"</span><span style="color:#800000;">Referer=http://bizhi.sogou.com/diy?wp_id=8743</span><span style="color:#800000;">"</span><span style="color:#000000;">,
</span><span style="color:#008080;"> 6</span>           <span style="color:#800000;">"</span><span style="color:#800000;">Snapshot=t4.inf</span><span style="color:#800000;">"</span><span style="color:#000000;">,
</span><span style="color:#008080;"> 7</span>           <span style="color:#800000;">"</span><span style="color:#800000;">Mode=HTML</span><span style="color:#800000;">"</span><span style="color:#000000;">,
</span><span style="color:#008080;"> 8</span> <span style="color:#000000;">          ITEMDATA,
</span><span style="color:#008080;"> 9</span>           <span style="color:#800000;">"</span><span style="color:#800000;">Name=img</span><span style="color:#800000;">"</span>, <span style="color:#800000;">"</span><span style="color:#800000;">Value=http://dl.bizhi.sogou.com/images/2012/05/3/8743.jpg</span><span style="color:#800000;">"</span><span style="color:#000000;">, ENDITEM,
</span><span style="color:#008080;">10</span>           <span style="color:#800000;">"</span><span style="color:#800000;">Name=left</span><span style="color:#800000;">"</span>, <span style="color:#800000;">"</span><span style="color:#800000;">Value=60</span><span style="color:#800000;">"</span><span style="color:#000000;">, ENDITEM,
</span><span style="color:#008080;">11</span>           <span style="color:#800000;">"</span><span style="color:#800000;">Name=top</span><span style="color:#800000;">"</span>, <span style="color:#800000;">"</span><span style="color:#800000;">Value=30</span><span style="color:#800000;">"</span><span style="color:#000000;">, ENDITEM,
</span><span style="color:#008080;">12</span>           <span style="color:#800000;">"</span><span style="color:#800000;">Name=width</span><span style="color:#800000;">"</span>, <span style="color:#800000;">"</span><span style="color:#800000;">Value=720</span><span style="color:#800000;">"</span><span style="color:#000000;">, ENDITEM,
</span><span style="color:#008080;">13</span>           <span style="color:#800000;">"</span><span style="color:#800000;">Name=height</span><span style="color:#800000;">"</span>, <span style="color:#800000;">"</span><span style="color:#800000;">Value=450</span><span style="color:#800000;">"</span><span style="color:#000000;">, ENDITEM,
</span><span style="color:#008080;">14</span>           <span style="color:#800000;">"</span><span style="color:#800000;">Name=model</span><span style="color:#800000;">"</span>, <span style="color:#800000;">"</span><span style="color:#800000;">Value=5/5s</span><span style="color:#800000;">"</span><span style="color:#000000;">, ENDITEM,
</span><span style="color:#008080;">15</span>           <span style="color:#800000;">"</span><span style="color:#800000;">Name=x</span><span style="color:#800000;">"</span>, <span style="color:#800000;">"</span><span style="color:#800000;">Value=1</span><span style="color:#800000;">"</span><span style="color:#000000;">, ENDITEM,
</span><span style="color:#008080;">16</span>           <span style="color:#800000;">"</span><span style="color:#800000;">Name=y</span><span style="color:#800000;">"</span>, <span style="color:#800000;">"</span><span style="color:#800000;">Value=1</span><span style="color:#800000;">"</span><span style="color:#000000;">, ENDITEM,
</span><span style="color:#008080;">17</span>           <span style="color:#800000;">"</span><span style="color:#800000;">Name=ofc</span><span style="color:#800000;">"</span>, <span style="color:#800000;">"</span><span style="color:#800000;">Value=1</span><span style="color:#800000;">"</span><span style="color:#000000;">, ENDITEM,
</span><span style="color:#008080;">18</span>           <span style="color:#800000;">"</span><span style="color:#800000;">Name=wp_id</span><span style="color:#800000;">"</span>, <span style="color:#800000;">"</span><span style="color:#800000;">Value=8743</span><span style="color:#800000;">"</span><span style="color:#000000;">, ENDITEM,
</span><span style="color:#008080;">19</span>           <span style="color:#800000;">"</span><span style="color:#800000;">Name=mat</span><span style="color:#800000;">"</span>, <span style="color:#800000;">"</span><span style="color:#800000;">Value=ms</span><span style="color:#800000;">"</span><span style="color:#000000;">, ENDITEM,
</span><span style="color:#008080;">20</span>           <span style="color:#800000;">"</span><span style="color:#800000;">Name=curMode</span><span style="color:#800000;">"</span>, <span style="color:#800000;">"</span><span style="color:#800000;">Value=normal</span><span style="color:#800000;">"</span><span style="color:#000000;">, ENDITEM,
</span><span style="color:#008080;">21</span>           LAST);<span style="color:#008000;">//</span><span style="color:#008000;">请求1</span>
<span style="color:#008080;">22</span> 
<span style="color:#008080;">23</span>      lr_set_debug_message( <span style="color:#800080;">16</span> | <span style="color:#800080;">2</span>,<span style="color:#800080;">0</span><span style="color:#000000;"> );
</span><span style="color:#008080;">24</span>      lr_save_string((<span style="color:#0000ff;">char</span>*)strtok(lr_eval_string(<span style="color:#800000;">"</span><span style="color:#800000;">{Output}</span><span style="color:#800000;">"</span>),<span style="color:#800000;">"</span><span style="color:#800000;">,</span><span style="color:#800000;">"</span>),<span style="color:#800000;">"</span><span style="color:#800000;">temp</span><span style="color:#800000;">"</span>);<span style="color:#008000;">//</span><span style="color:#008000;">获得请求1的返回数据
</span><span style="color:#008080;">25</span>      <span style="color:#008000;">//</span><span style="color:#008000;">lr_output_message("bian:%s",lr_eval_string("{temp}"));</span>
<span style="color:#008080;">26</span>      lr_save_string((<span style="color:#0000ff;">char</span>*)strtok(NULL,<span style="color:#800000;">"</span><span style="color:#800000;">,</span><span style="color:#800000;">"</span>),<span style="color:#800000;">"</span><span style="color:#800000;">diyid_temp</span><span style="color:#800000;">"</span>);<span style="color:#008000;">//</span><span style="color:#008000;">解析返回数据
</span><span style="color:#008080;">27</span>      <span style="color:#008000;">//</span><span style="color:#008000;">lr_output_message("bian2:%s",lr_eval_string("{diyid_temp}"));</span>
<span style="color:#008080;">28</span>      lr_save_string((<span style="color:#0000ff;">char</span>*)strtok(lr_eval_string(<span style="color:#800000;">"</span><span style="color:#800000;">{diyid_temp}</span><span style="color:#800000;">"</span>),<span style="color:#800000;">"</span><span style="color:#800000;">:</span><span style="color:#800000;">"</span>),<span style="color:#800000;">"</span><span style="color:#800000;">temp</span><span style="color:#800000;">"</span>);<span style="color:#008000;">//</span><span style="color:#008000;">解析返回数据
</span><span style="color:#008080;">29</span>      <span style="color:#008000;">//</span><span style="color:#008000;">lr_output_message("bian:%s",lr_eval_string("{temp}"));</span>
<span style="color:#008080;">30</span>      lr_save_string((<span style="color:#0000ff;">char</span>*)strtok(NULL,<span style="color:#800000;">"</span><span style="color:#800000;">:</span><span style="color:#800000;">"</span>),<span style="color:#800000;">"</span><span style="color:#800000;">diyid_temp</span><span style="color:#800000;">"</span>);<span style="color:#008000;">//</span><span style="color:#008000;">解析返回数据
</span><span style="color:#008080;">31</span>      <span style="color:#008000;">//</span><span style="color:#008000;">lr_output_message("bian2:%s",lr_eval_string("{diyid_temp}"));</span>
<span style="color:#008080;">32</span>      diyid_str=(<span style="color:#0000ff;">char</span>*)strtok(lr_eval_string(<span style="color:#800000;">"</span><span style="color:#800000;">{diyid_temp}</span><span style="color:#800000;">"</span>),<span style="color:#800000;">"</span><span style="color:#800000;">}</span><span style="color:#800000;">"</span><span style="color:#000000;">);
</span><span style="color:#008080;">33</span>      lr_save_string((<span style="color:#0000ff;">char</span>*)strtok(lr_eval_string(<span style="color:#800000;">"</span><span style="color:#800000;">{diyid_temp}</span><span style="color:#800000;">"</span>),<span style="color:#800000;">"</span><span style="color:#800000;">}</span><span style="color:#800000;">"</span>),<span style="color:#800000;">"</span><span style="color:#800000;">diyid</span><span style="color:#800000;">"</span>);<span style="color:#008000;">//</span><span style="color:#008000;">解析返回数据
</span><span style="color:#008080;">34</span>      <span style="color:#008000;">//</span><span style="color:#008000;">lr_output_message("bian:%s",lr_eval_string("{diyid}"));</span>
<span style="color:#008080;">35</span> 
<span style="color:#008080;">36</span> <span style="color:#000000;">     strcat(test, diyid_str);
</span><span style="color:#008080;">37</span>      <span style="color:#008000;">//</span><span style="color:#008000;">lr_output_message("%s",test);</span>
<span style="color:#008080;">38</span>      lr_save_string(CMd5(test),<span style="color:#800000;">"</span><span style="color:#800000;">md5</span><span style="color:#800000;">"</span>);<span style="color:#008000;">//</span><span style="color:#008000;">计算md5
</span><span style="color:#008080;">39</span>      <span style="color:#008000;">//</span><span style="color:#008000;">lr_output_message("bianmd5:%s",lr_eval_string("{md5}"));</span>
<span style="color:#008080;">40</span> 
<span style="color:#008080;">41</span> 
<span style="color:#008080;">42</span>      web_submit_data(<span style="color:#800000;">"</span><span style="color:#800000;">postname</span><span style="color:#800000;">"</span><span style="color:#000000;">,
</span><span style="color:#008080;">43</span>                 <span style="color:#800000;">"</span><span style="color:#800000;">Action=http://bizhi.sogou.com/orderpay/</span><span style="color:#800000;">"</span><span style="color:#000000;">,
</span><span style="color:#008080;">44</span>                 <span style="color:#800000;">"</span><span style="color:#800000;">Method=POST</span><span style="color:#800000;">"</span><span style="color:#000000;">,
</span><span style="color:#008080;">45</span>                 <span style="color:#800000;">"</span><span style="color:#800000;">RecContentType=textml</span><span style="color:#800000;">"</span><span style="color:#000000;">,
</span><span style="color:#008080;">46</span>                 <span style="color:#800000;">"</span><span style="color:#800000;">Mode=HTML</span><span style="color:#800000;">"</span><span style="color:#000000;">,
</span><span style="color:#008080;">47</span> <span style="color:#000000;">                ITEMDATA,
</span><span style="color:#008080;">48</span>                 <span style="color:#800000;">"</span><span style="color:#800000;">Name=goods_action</span><span style="color:#800000;">"</span>,<span style="color:#800000;">"</span><span style="color:#800000;">Value=goods_detail</span><span style="color:#800000;">"</span><span style="color:#000000;">,ENDITEM,
</span><span style="color:#008080;">49</span>                     <span style="color:#800000;">"</span><span style="color:#800000;">Name=goods_addr</span><span style="color:#800000;">"</span>,<span style="color:#800000;">"</span><span style="color:#800000;">Value=656</span><span style="color:#800000;">"</span><span style="color:#000000;">,ENDITEM,
</span><span style="color:#008080;">50</span>                     <span style="color:#800000;">"</span><span style="color:#800000;">Name=md5str</span><span style="color:#800000;">"</span>,<span style="color:#800000;">"</span><span style="color:#800000;">Value={md5}</span><span style="color:#800000;">"</span>,ENDITEM,<span style="color:#008000;">//</span><span style="color:#008000;">根据参数构造请求</span>
<span style="color:#008080;">51</span>                     <span style="color:#800000;">"</span><span style="color:#800000;">Name=diy_id</span><span style="color:#800000;">"</span>,<span style="color:#800000;">"</span><span style="color:#800000;">Value={diyid}</span><span style="color:#800000;">"</span>,ENDITEM,<span style="color:#008000;">//</span><span style="color:#008000;">根据参数构造请求</span>
<span style="color:#008080;">52</span>                     <span style="color:#800000;">"</span><span style="color:#800000;">Name=goods_info</span><span style="color:#800000;">"</span>,<span style="color:#800000;">"</span><span style="color:#800000;">Value=448_1</span><span style="color:#800000;">"</span><span style="color:#000000;">,ENDITEM,
</span><span style="color:#008080;">53</span>                     <span style="color:#800000;">"</span><span style="color:#800000;">Name=from</span><span style="color:#800000;">"</span>,<span style="color:#800000;">"</span><span style="color:#800000;">Value=diy</span><span style="color:#800000;">"</span><span style="color:#000000;">,ENDITEM,
</span><span style="color:#008080;">54</span>                     <span style="color:#800000;">"</span><span style="color:#800000;">Name=Accept</span><span style="color:#800000;">"</span>,<span style="color:#800000;">"</span><span style="color:#800000;">Value=text/plain</span><span style="color:#800000;">"</span><span style="color:#000000;">,ENDITEM,
</span><span style="color:#008080;">55</span>                 LAST); </pre> 
     </div> 
     <p>3. &nbsp;另附，计算md5，需要添加md5的头文件，并别忘了在gloab.h中include md5.h</p> 
     <div class="cnblogs_code"> 
      <pre><span style="color:#008080;">  1</span> <span style="color:#000000;">#ifndef MD5_H
</span><span style="color:#008080;">  2</span> <span style="color:#0000ff;">#define</span> MD5_H
<span style="color:#008080;">  3</span> <span style="color:#000000;">#ifdef __alpha
</span><span style="color:#008080;">  4</span> typedef unsigned <span style="color:#0000ff;">int</span><span style="color:#000000;"> uint32;
</span><span style="color:#008080;">  5</span> <span style="color:#0000ff;">#else</span>
<span style="color:#008080;">  6</span> typedef unsigned <span style="color:#0000ff;">long</span><span style="color:#000000;"> uint32;
</span><span style="color:#008080;">  7</span> <span style="color:#0000ff;">#endif</span>
<span style="color:#008080;">  8</span> <span style="color:#0000ff;">struct</span><span style="color:#000000;"> MD5Context {
</span><span style="color:#008080;">  9</span>         uint32 buf[<span style="color:#800080;">4</span><span style="color:#000000;">];
</span><span style="color:#008080;"> 10</span>         uint32 bits[<span style="color:#800080;">2</span><span style="color:#000000;">];
</span><span style="color:#008080;"> 11</span>         unsigned <span style="color:#0000ff;">char</span> <span style="color:#0000ff;">in</span>[<span style="color:#800080;">64</span><span style="color:#000000;">];
</span><span style="color:#008080;"> 12</span> <span style="color:#000000;">};
</span><span style="color:#008080;"> 13</span> <span style="color:#0000ff;">extern</span> <span style="color:#0000ff;">void</span><span style="color:#000000;"> MD5Init();
</span><span style="color:#008080;"> 14</span> <span style="color:#0000ff;">extern</span> <span style="color:#0000ff;">void</span><span style="color:#000000;"> MD5Update();
</span><span style="color:#008080;"> 15</span> <span style="color:#0000ff;">extern</span> <span style="color:#0000ff;">void</span><span style="color:#000000;"> MD5Final();
</span><span style="color:#008080;"> 16</span> <span style="color:#0000ff;">extern</span> <span style="color:#0000ff;">void</span><span style="color:#000000;"> MD5Transform();
</span><span style="color:#008080;"> 17</span> typedef <span style="color:#0000ff;">struct</span><span style="color:#000000;"> MD5Context MD5_CTX;
</span><span style="color:#008080;"> 18</span> <span style="color:#0000ff;">#endif</span>
<span style="color:#008080;"> 19</span> <span style="color:#000000;">#ifdef sgi
</span><span style="color:#008080;"> 20</span> <span style="color:#0000ff;">#define</span> HIGHFIRST
<span style="color:#008080;"> 21</span> <span style="color:#0000ff;">#endif</span>
<span style="color:#008080;"> 22</span> <span style="color:#000000;">#ifdef sun
</span><span style="color:#008080;"> 23</span> <span style="color:#0000ff;">#define</span> HIGHFIRST
<span style="color:#008080;"> 24</span> <span style="color:#0000ff;">#endif</span>
<span style="color:#008080;"> 25</span> <span style="color:#000000;">#ifndef HIGHFIRST
</span><span style="color:#008080;"> 26</span> <span style="color:#0000ff;">#define</span> byteReverse(buf, len)    /* Nothing */
<span style="color:#008080;"> 27</span> <span style="color:#0000ff;">#else</span>
<span style="color:#008080;"> 28</span> <span style="color:#0000ff;">void</span> byteReverse(buf, longs)unsigned <span style="color:#0000ff;">char</span> *<span style="color:#000000;">buf; unsigned longs;
</span><span style="color:#008080;"> 29</span> <span style="color:#000000;">{
</span><span style="color:#008080;"> 30</span> <span style="color:#000000;">    uint32 t;
</span><span style="color:#008080;"> 31</span>     <span style="color:#0000ff;">do</span><span style="color:#000000;"> {
</span><span style="color:#008080;"> 32</span>     t = (uint32) ((unsigned) buf[<span style="color:#800080;">3</span>] &lt;&lt; <span style="color:#800080;">8</span> | buf[<span style="color:#800080;">2</span>]) &lt;&lt; <span style="color:#800080;">16</span> |((unsigned) buf[<span style="color:#800080;">1</span>] &lt;&lt; <span style="color:#800080;">8</span> | buf[<span style="color:#800080;">0</span><span style="color:#000000;">]);
</span><span style="color:#008080;"> 33</span>     *(uint32 *) buf =<span style="color:#000000;"> t;
</span><span style="color:#008080;"> 34</span>     buf += <span style="color:#800080;">4</span><span style="color:#000000;">;
</span><span style="color:#008080;"> 35</span>     } <span style="color:#0000ff;">while</span> (--<span style="color:#000000;">longs);
</span><span style="color:#008080;"> 36</span> <span style="color:#000000;">}
</span><span style="color:#008080;"> 37</span> <span style="color:#0000ff;">#endif</span>
<span style="color:#008080;"> 38</span> <span style="color:#0000ff;">void</span> MD5Init(ctx)<span style="color:#0000ff;">struct</span> MD5Context *<span style="color:#000000;">ctx;
</span><span style="color:#008080;"> 39</span> <span style="color:#000000;">{
</span><span style="color:#008080;"> 40</span>     ctx-&gt;buf[<span style="color:#800080;">0</span>] = <span style="color:#800080;">0x67452301</span><span style="color:#000000;">;
</span><span style="color:#008080;"> 41</span>     ctx-&gt;buf[<span style="color:#800080;">1</span>] = <span style="color:#800080;">0xefcdab89</span><span style="color:#000000;">;
</span><span style="color:#008080;"> 42</span>     ctx-&gt;buf[<span style="color:#800080;">2</span>] = <span style="color:#800080;">0x98badcfe</span><span style="color:#000000;">;
</span><span style="color:#008080;"> 43</span>     ctx-&gt;buf[<span style="color:#800080;">3</span>] = <span style="color:#800080;">0x10325476</span><span style="color:#000000;">;
</span><span style="color:#008080;"> 44</span>     ctx-&gt;bits[<span style="color:#800080;">0</span>] = <span style="color:#800080;">0</span><span style="color:#000000;">;
</span><span style="color:#008080;"> 45</span>     ctx-&gt;bits[<span style="color:#800080;">1</span>] = <span style="color:#800080;">0</span><span style="color:#000000;">;
</span><span style="color:#008080;"> 46</span> <span style="color:#000000;">}
</span><span style="color:#008080;"> 47</span> <span style="color:#0000ff;">void</span> MD5Update(ctx, buf, len) <span style="color:#0000ff;">struct</span> MD5Context *ctx; unsigned <span style="color:#0000ff;">char</span> *<span style="color:#000000;">buf; unsigned len;
</span><span style="color:#008080;"> 48</span> <span style="color:#000000;">{
</span><span style="color:#008080;"> 49</span> <span style="color:#000000;">    uint32 t;
</span><span style="color:#008080;"> 50</span>     t = ctx-&gt;bits[<span style="color:#800080;">0</span><span style="color:#000000;">];
</span><span style="color:#008080;"> 51</span>     <span style="color:#0000ff;">if</span> ((ctx-&gt;bits[<span style="color:#800080;">0</span>] = t + ((uint32) len &lt;&lt; <span style="color:#800080;">3</span>)) &lt;<span style="color:#000000;"> t)
</span><span style="color:#008080;"> 52</span>     ctx-&gt;bits[<span style="color:#800080;">1</span>]++<span style="color:#000000;">;
</span><span style="color:#008080;"> 53</span>     ctx-&gt;bits[<span style="color:#800080;">1</span>] += len &gt;&gt; <span style="color:#800080;">29</span><span style="color:#000000;">;
</span><span style="color:#008080;"> 54</span>     t = (t &gt;&gt; <span style="color:#800080;">3</span>) &amp; <span style="color:#800080;">0x3f</span><span style="color:#000000;">;
</span><span style="color:#008080;"> 55</span>     <span style="color:#0000ff;">if</span><span style="color:#000000;"> (t) {
</span><span style="color:#008080;"> 56</span>     unsigned <span style="color:#0000ff;">char</span> *p = (unsigned <span style="color:#0000ff;">char</span> *) ctx-&gt;<span style="color:#0000ff;">in</span> +<span style="color:#000000;"> t;
</span><span style="color:#008080;"> 57</span>     t = <span style="color:#800080;">64</span> -<span style="color:#000000;"> t;
</span><span style="color:#008080;"> 58</span>     <span style="color:#0000ff;">if</span> (len &lt;<span style="color:#000000;"> t) {
</span><span style="color:#008080;"> 59</span> <span style="color:#000000;">        memcpy(p, buf, len);
</span><span style="color:#008080;"> 60</span>         <span style="color:#0000ff;">return</span><span style="color:#000000;">;
</span><span style="color:#008080;"> 61</span> <span style="color:#000000;">    }
</span><span style="color:#008080;"> 62</span> <span style="color:#000000;">    memcpy(p, buf, t);
</span><span style="color:#008080;"> 63</span>     byteReverse(ctx-&gt;<span style="color:#0000ff;">in</span>, <span style="color:#800080;">16</span><span style="color:#000000;">);
</span><span style="color:#008080;"> 64</span>     MD5Transform(ctx-&gt;buf, (uint32 *) ctx-&gt;<span style="color:#0000ff;">in</span><span style="color:#000000;">);
</span><span style="color:#008080;"> 65</span>     buf +=<span style="color:#000000;"> t;
</span><span style="color:#008080;"> 66</span>     len -=<span style="color:#000000;"> t;
</span><span style="color:#008080;"> 67</span> <span style="color:#000000;">    }
</span><span style="color:#008080;"> 68</span>     <span style="color:#0000ff;">while</span> (len &gt;= <span style="color:#800080;">64</span><span style="color:#000000;">) {
</span><span style="color:#008080;"> 69</span>     memcpy(ctx-&gt;<span style="color:#0000ff;">in</span>, buf, <span style="color:#800080;">64</span><span style="color:#000000;">);
</span><span style="color:#008080;"> 70</span>     byteReverse(ctx-&gt;<span style="color:#0000ff;">in</span>, <span style="color:#800080;">16</span><span style="color:#000000;">);
</span><span style="color:#008080;"> 71</span>     MD5Transform(ctx-&gt;buf, (uint32 *) ctx-&gt;<span style="color:#0000ff;">in</span><span style="color:#000000;">);
</span><span style="color:#008080;"> 72</span>     buf += <span style="color:#800080;">64</span><span style="color:#000000;">;
</span><span style="color:#008080;"> 73</span>     len -= <span style="color:#800080;">64</span><span style="color:#000000;">;
</span><span style="color:#008080;"> 74</span> <span style="color:#000000;">    }
</span><span style="color:#008080;"> 75</span>     memcpy(ctx-&gt;<span style="color:#0000ff;">in</span><span style="color:#000000;">, buf, len);
</span><span style="color:#008080;"> 76</span> <span style="color:#000000;">}
</span><span style="color:#008080;"> 77</span> <span style="color:#0000ff;">void</span><span style="color:#000000;"> MD5Final(digest, ctx)
</span><span style="color:#008080;"> 78</span>     unsigned <span style="color:#0000ff;">char</span> digest[<span style="color:#800080;">16</span>]; <span style="color:#0000ff;">struct</span> MD5Context *<span style="color:#000000;">ctx;
</span><span style="color:#008080;"> 79</span> <span style="color:#000000;">{
</span><span style="color:#008080;"> 80</span> <span style="color:#000000;">    unsigned count;
</span><span style="color:#008080;"> 81</span>     unsigned <span style="color:#0000ff;">char</span> *<span style="color:#000000;">p;
</span><span style="color:#008080;"> 82</span>     count = (ctx-&gt;bits[<span style="color:#800080;">0</span>] &gt;&gt; <span style="color:#800080;">3</span>) &amp; <span style="color:#800080;">0x3F</span><span style="color:#000000;">;
</span><span style="color:#008080;"> 83</span>     p = ctx-&gt;<span style="color:#0000ff;">in</span> +<span style="color:#000000;"> count;
</span><span style="color:#008080;"> 84</span>     *p++ = <span style="color:#800080;">0x80</span><span style="color:#000000;">;
</span><span style="color:#008080;"> 85</span>     count = <span style="color:#800080;">64</span> - <span style="color:#800080;">1</span> -<span style="color:#000000;"> count;
</span><span style="color:#008080;"> 86</span>     <span style="color:#0000ff;">if</span> (count &lt; <span style="color:#800080;">8</span><span style="color:#000000;">) {
</span><span style="color:#008080;"> 87</span>     memset(p, <span style="color:#800080;">0</span><span style="color:#000000;">, count);
</span><span style="color:#008080;"> 88</span>     byteReverse(ctx-&gt;<span style="color:#0000ff;">in</span>, <span style="color:#800080;">16</span><span style="color:#000000;">);
</span><span style="color:#008080;"> 89</span>     MD5Transform(ctx-&gt;buf, (uint32 *) ctx-&gt;<span style="color:#0000ff;">in</span><span style="color:#000000;">);
</span><span style="color:#008080;"> 90</span>     memset(ctx-&gt;<span style="color:#0000ff;">in</span>, <span style="color:#800080;">0</span>, <span style="color:#800080;">56</span><span style="color:#000000;">);
</span><span style="color:#008080;"> 91</span>     } <span style="color:#0000ff;">else</span><span style="color:#000000;"> {
</span><span style="color:#008080;"> 92</span>     memset(p, <span style="color:#800080;">0</span>, count - <span style="color:#800080;">8</span><span style="color:#000000;">);
</span><span style="color:#008080;"> 93</span> <span style="color:#000000;">    }
</span><span style="color:#008080;"> 94</span>     byteReverse(ctx-&gt;<span style="color:#0000ff;">in</span>, <span style="color:#800080;">14</span><span style="color:#000000;">);
</span><span style="color:#008080;"> 95</span>     ((uint32 *) ctx-&gt;<span style="color:#0000ff;">in</span>)[<span style="color:#800080;">14</span>] = ctx-&gt;bits[<span style="color:#800080;">0</span><span style="color:#000000;">];
</span><span style="color:#008080;"> 96</span>     ((uint32 *) ctx-&gt;<span style="color:#0000ff;">in</span>)[<span style="color:#800080;">15</span>] = ctx-&gt;bits[<span style="color:#800080;">1</span><span style="color:#000000;">];
</span><span style="color:#008080;"> 97</span>     MD5Transform(ctx-&gt;buf, (uint32 *) ctx-&gt;<span style="color:#0000ff;">in</span><span style="color:#000000;">);
</span><span style="color:#008080;"> 98</span>     byteReverse((unsigned <span style="color:#0000ff;">char</span> *) ctx-&gt;buf, <span style="color:#800080;">4</span><span style="color:#000000;">);
</span><span style="color:#008080;"> 99</span>     memcpy(digest, ctx-&gt;buf, <span style="color:#800080;">16</span><span style="color:#000000;">);
</span><span style="color:#008080;">100</span>     memset(ctx, <span style="color:#800080;">0</span>, <span style="color:#0000ff;">sizeof</span><span style="color:#000000;">(ctx));
</span><span style="color:#008080;">101</span> <span style="color:#000000;">}
</span><span style="color:#008080;">102</span> <span style="color:#0000ff;">#define</span> F1(x, y, z) (z ^ (x &amp; (y ^ z)))
<span style="color:#008080;">103</span> <span style="color:#0000ff;">#define</span> F2(x, y, z) F1(z, x, y)
<span style="color:#008080;">104</span> <span style="color:#0000ff;">#define</span> F3(x, y, z) (x ^ y ^ z)
<span style="color:#008080;">105</span> <span style="color:#0000ff;">#define</span> F4(x, y, z) (y ^ (x | ~z))
<span style="color:#008080;">106</span> <span style="color:#0000ff;">#define</span> MD5STEP(f, w, x, y, z, data, s) ( w += f(x, y, z) + data,  w = w&lt;&lt;s | w&gt;&gt;(32-s),  w += x )
<span style="color:#008080;">107</span> <span style="color:#0000ff;">void</span> MD5Transform(buf, <span style="color:#0000ff;">in</span><span style="color:#000000;">)
</span><span style="color:#008080;">108</span>     uint32 buf[<span style="color:#800080;">4</span>]; uint32 <span style="color:#0000ff;">in</span>[<span style="color:#800080;">16</span><span style="color:#000000;">];
</span><span style="color:#008080;">109</span> <span style="color:#000000;">{
</span><span style="color:#008080;">110</span> <span style="color:#000000;">    register uint32 a, b, c, d;
</span><span style="color:#008080;">111</span>     a = buf[<span style="color:#800080;">0</span><span style="color:#000000;">];
</span><span style="color:#008080;">112</span>     b = buf[<span style="color:#800080;">1</span><span style="color:#000000;">];
</span><span style="color:#008080;">113</span>     c = buf[<span style="color:#800080;">2</span><span style="color:#000000;">];
</span><span style="color:#008080;">114</span>     d = buf[<span style="color:#800080;">3</span><span style="color:#000000;">];
</span><span style="color:#008080;">115</span>     MD5STEP(F1, a, b, c, d, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">0</span>] + <span style="color:#800080;">0xd76aa478</span>, <span style="color:#800080;">7</span><span style="color:#000000;">);
</span><span style="color:#008080;">116</span>     MD5STEP(F1, d, a, b, c, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">1</span>] + <span style="color:#800080;">0xe8c7b756</span>, <span style="color:#800080;">12</span><span style="color:#000000;">);
</span><span style="color:#008080;">117</span>     MD5STEP(F1, c, d, a, b, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">2</span>] + <span style="color:#800080;">0x242070db</span>, <span style="color:#800080;">17</span><span style="color:#000000;">);
</span><span style="color:#008080;">118</span>     MD5STEP(F1, b, c, d, a, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">3</span>] + <span style="color:#800080;">0xc1bdceee</span>, <span style="color:#800080;">22</span><span style="color:#000000;">);
</span><span style="color:#008080;">119</span>     MD5STEP(F1, a, b, c, d, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">4</span>] + <span style="color:#800080;">0xf57c0faf</span>, <span style="color:#800080;">7</span><span style="color:#000000;">);
</span><span style="color:#008080;">120</span>     MD5STEP(F1, d, a, b, c, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">5</span>] + <span style="color:#800080;">0x4787c62a</span>, <span style="color:#800080;">12</span><span style="color:#000000;">);
</span><span style="color:#008080;">121</span>     MD5STEP(F1, c, d, a, b, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">6</span>] + <span style="color:#800080;">0xa8304613</span>, <span style="color:#800080;">17</span><span style="color:#000000;">);
</span><span style="color:#008080;">122</span>     MD5STEP(F1, b, c, d, a, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">7</span>] + <span style="color:#800080;">0xfd469501</span>, <span style="color:#800080;">22</span><span style="color:#000000;">);
</span><span style="color:#008080;">123</span>     MD5STEP(F1, a, b, c, d, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">8</span>] + <span style="color:#800080;">0x698098d8</span>, <span style="color:#800080;">7</span><span style="color:#000000;">);
</span><span style="color:#008080;">124</span>     MD5STEP(F1, d, a, b, c, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">9</span>] + <span style="color:#800080;">0x8b44f7af</span>, <span style="color:#800080;">12</span><span style="color:#000000;">);
</span><span style="color:#008080;">125</span>     MD5STEP(F1, c, d, a, b, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">10</span>] + <span style="color:#800080;">0xffff5bb1</span>, <span style="color:#800080;">17</span><span style="color:#000000;">);
</span><span style="color:#008080;">126</span>     MD5STEP(F1, b, c, d, a, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">11</span>] + <span style="color:#800080;">0x895cd7be</span>, <span style="color:#800080;">22</span><span style="color:#000000;">);
</span><span style="color:#008080;">127</span>     MD5STEP(F1, a, b, c, d, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">12</span>] + <span style="color:#800080;">0x6b901122</span>, <span style="color:#800080;">7</span><span style="color:#000000;">);
</span><span style="color:#008080;">128</span>     MD5STEP(F1, d, a, b, c, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">13</span>] + <span style="color:#800080;">0xfd987193</span>, <span style="color:#800080;">12</span><span style="color:#000000;">);
</span><span style="color:#008080;">129</span>     MD5STEP(F1, c, d, a, b, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">14</span>] + <span style="color:#800080;">0xa679438e</span>, <span style="color:#800080;">17</span><span style="color:#000000;">);
</span><span style="color:#008080;">130</span>     MD5STEP(F1, b, c, d, a, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">15</span>] + <span style="color:#800080;">0x49b40821</span>, <span style="color:#800080;">22</span><span style="color:#000000;">);
</span><span style="color:#008080;">131</span>     MD5STEP(F2, a, b, c, d, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">1</span>] + <span style="color:#800080;">0xf61e2562</span>, <span style="color:#800080;">5</span><span style="color:#000000;">);
</span><span style="color:#008080;">132</span>     MD5STEP(F2, d, a, b, c, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">6</span>] + <span style="color:#800080;">0xc040b340</span>, <span style="color:#800080;">9</span><span style="color:#000000;">);
</span><span style="color:#008080;">133</span>     MD5STEP(F2, c, d, a, b, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">11</span>] + <span style="color:#800080;">0x265e5a51</span>, <span style="color:#800080;">14</span><span style="color:#000000;">);
</span><span style="color:#008080;">134</span>     MD5STEP(F2, b, c, d, a, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">0</span>] + <span style="color:#800080;">0xe9b6c7aa</span>, <span style="color:#800080;">20</span><span style="color:#000000;">);
</span><span style="color:#008080;">135</span>     MD5STEP(F2, a, b, c, d, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">5</span>] + <span style="color:#800080;">0xd62f105d</span>, <span style="color:#800080;">5</span><span style="color:#000000;">);
</span><span style="color:#008080;">136</span>     MD5STEP(F2, d, a, b, c, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">10</span>] + <span style="color:#800080;">0x02441453</span>, <span style="color:#800080;">9</span><span style="color:#000000;">);
</span><span style="color:#008080;">137</span>     MD5STEP(F2, c, d, a, b, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">15</span>] + <span style="color:#800080;">0xd8a1e681</span>, <span style="color:#800080;">14</span><span style="color:#000000;">);
</span><span style="color:#008080;">138</span>     MD5STEP(F2, b, c, d, a, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">4</span>] + <span style="color:#800080;">0xe7d3fbc8</span>, <span style="color:#800080;">20</span><span style="color:#000000;">);
</span><span style="color:#008080;">139</span>     MD5STEP(F2, a, b, c, d, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">9</span>] + <span style="color:#800080;">0x21e1cde6</span>, <span style="color:#800080;">5</span><span style="color:#000000;">);
</span><span style="color:#008080;">140</span>     MD5STEP(F2, d, a, b, c, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">14</span>] + <span style="color:#800080;">0xc33707d6</span>, <span style="color:#800080;">9</span><span style="color:#000000;">);
</span><span style="color:#008080;">141</span>     MD5STEP(F2, c, d, a, b, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">3</span>] + <span style="color:#800080;">0xf4d50d87</span>, <span style="color:#800080;">14</span><span style="color:#000000;">);
</span><span style="color:#008080;">142</span>     MD5STEP(F2, b, c, d, a, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">8</span>] + <span style="color:#800080;">0x455a14ed</span>, <span style="color:#800080;">20</span><span style="color:#000000;">);
</span><span style="color:#008080;">143</span>     MD5STEP(F2, a, b, c, d, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">13</span>] + <span style="color:#800080;">0xa9e3e905</span>, <span style="color:#800080;">5</span><span style="color:#000000;">);
</span><span style="color:#008080;">144</span>     MD5STEP(F2, d, a, b, c, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">2</span>] + <span style="color:#800080;">0xfcefa3f8</span>, <span style="color:#800080;">9</span><span style="color:#000000;">);
</span><span style="color:#008080;">145</span>     MD5STEP(F2, c, d, a, b, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">7</span>] + <span style="color:#800080;">0x676f02d9</span>, <span style="color:#800080;">14</span><span style="color:#000000;">);
</span><span style="color:#008080;">146</span>     MD5STEP(F2, b, c, d, a, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">12</span>] + <span style="color:#800080;">0x8d2a4c8a</span>, <span style="color:#800080;">20</span><span style="color:#000000;">);
</span><span style="color:#008080;">147</span>     MD5STEP(F3, a, b, c, d, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">5</span>] + <span style="color:#800080;">0xfffa3942</span>, <span style="color:#800080;">4</span><span style="color:#000000;">);
</span><span style="color:#008080;">148</span>     MD5STEP(F3, d, a, b, c, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">8</span>] + <span style="color:#800080;">0x8771f681</span>, <span style="color:#800080;">11</span><span style="color:#000000;">);
</span><span style="color:#008080;">149</span>     MD5STEP(F3, c, d, a, b, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">11</span>] + <span style="color:#800080;">0x6d9d6122</span>, <span style="color:#800080;">16</span><span style="color:#000000;">);
</span><span style="color:#008080;">150</span>     MD5STEP(F3, b, c, d, a, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">14</span>] + <span style="color:#800080;">0xfde5380c</span>, <span style="color:#800080;">23</span><span style="color:#000000;">);
</span><span style="color:#008080;">151</span>     MD5STEP(F3, a, b, c, d, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">1</span>] + <span style="color:#800080;">0xa4beea44</span>, <span style="color:#800080;">4</span><span style="color:#000000;">);
</span><span style="color:#008080;">152</span>     MD5STEP(F3, d, a, b, c, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">4</span>] + <span style="color:#800080;">0x4bdecfa9</span>, <span style="color:#800080;">11</span><span style="color:#000000;">);
</span><span style="color:#008080;">153</span>     MD5STEP(F3, c, d, a, b, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">7</span>] + <span style="color:#800080;">0xf6bb4b60</span>, <span style="color:#800080;">16</span><span style="color:#000000;">);
</span><span style="color:#008080;">154</span>     MD5STEP(F3, b, c, d, a, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">10</span>] + <span style="color:#800080;">0xbebfbc70</span>, <span style="color:#800080;">23</span><span style="color:#000000;">);
</span><span style="color:#008080;">155</span>     MD5STEP(F3, a, b, c, d, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">13</span>] + <span style="color:#800080;">0x289b7ec6</span>, <span style="color:#800080;">4</span><span style="color:#000000;">);
</span><span style="color:#008080;">156</span>     MD5STEP(F3, d, a, b, c, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">0</span>] + <span style="color:#800080;">0xeaa127fa</span>, <span style="color:#800080;">11</span><span style="color:#000000;">);
</span><span style="color:#008080;">157</span>     MD5STEP(F3, c, d, a, b, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">3</span>] + <span style="color:#800080;">0xd4ef3085</span>, <span style="color:#800080;">16</span><span style="color:#000000;">);
</span><span style="color:#008080;">158</span>     MD5STEP(F3, b, c, d, a, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">6</span>] + <span style="color:#800080;">0x04881d05</span>, <span style="color:#800080;">23</span><span style="color:#000000;">);
</span><span style="color:#008080;">159</span>     MD5STEP(F3, a, b, c, d, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">9</span>] + <span style="color:#800080;">0xd9d4d039</span>, <span style="color:#800080;">4</span><span style="color:#000000;">);
</span><span style="color:#008080;">160</span>     MD5STEP(F3, d, a, b, c, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">12</span>] + <span style="color:#800080;">0xe6db99e5</span>, <span style="color:#800080;">11</span><span style="color:#000000;">);
</span><span style="color:#008080;">161</span>     MD5STEP(F3, c, d, a, b, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">15</span>] + <span style="color:#800080;">0x1fa27cf8</span>, <span style="color:#800080;">16</span><span style="color:#000000;">);
</span><span style="color:#008080;">162</span>     MD5STEP(F3, b, c, d, a, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">2</span>] + <span style="color:#800080;">0xc4ac5665</span>, <span style="color:#800080;">23</span><span style="color:#000000;">);
</span><span style="color:#008080;">163</span>     MD5STEP(F4, a, b, c, d, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">0</span>] + <span style="color:#800080;">0xf4292244</span>, <span style="color:#800080;">6</span><span style="color:#000000;">);
</span><span style="color:#008080;">164</span>     MD5STEP(F4, d, a, b, c, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">7</span>] + <span style="color:#800080;">0x432aff97</span>, <span style="color:#800080;">10</span><span style="color:#000000;">);
</span><span style="color:#008080;">165</span>     MD5STEP(F4, c, d, a, b, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">14</span>] + <span style="color:#800080;">0xab9423a7</span>, <span style="color:#800080;">15</span><span style="color:#000000;">);
</span><span style="color:#008080;">166</span>     MD5STEP(F4, b, c, d, a, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">5</span>] + <span style="color:#800080;">0xfc93a039</span>, <span style="color:#800080;">21</span><span style="color:#000000;">);
</span><span style="color:#008080;">167</span>     MD5STEP(F4, a, b, c, d, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">12</span>] + <span style="color:#800080;">0x655b59c3</span>, <span style="color:#800080;">6</span><span style="color:#000000;">);
</span><span style="color:#008080;">168</span>     MD5STEP(F4, d, a, b, c, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">3</span>] + <span style="color:#800080;">0x8f0ccc92</span>, <span style="color:#800080;">10</span><span style="color:#000000;">);
</span><span style="color:#008080;">169</span>     MD5STEP(F4, c, d, a, b, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">10</span>] + <span style="color:#800080;">0xffeff47d</span>, <span style="color:#800080;">15</span><span style="color:#000000;">);
</span><span style="color:#008080;">170</span>     MD5STEP(F4, b, c, d, a, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">1</span>] + <span style="color:#800080;">0x85845dd1</span>, <span style="color:#800080;">21</span><span style="color:#000000;">);
</span><span style="color:#008080;">171</span>     MD5STEP(F4, a, b, c, d, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">8</span>] + <span style="color:#800080;">0x6fa87e4f</span>, <span style="color:#800080;">6</span><span style="color:#000000;">);
</span><span style="color:#008080;">172</span>     MD5STEP(F4, d, a, b, c, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">15</span>] + <span style="color:#800080;">0xfe2ce6e0</span>, <span style="color:#800080;">10</span><span style="color:#000000;">);
</span><span style="color:#008080;">173</span>     MD5STEP(F4, c, d, a, b, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">6</span>] + <span style="color:#800080;">0xa3014314</span>, <span style="color:#800080;">15</span><span style="color:#000000;">);
</span><span style="color:#008080;">174</span>     MD5STEP(F4, b, c, d, a, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">13</span>] + <span style="color:#800080;">0x4e0811a1</span>, <span style="color:#800080;">21</span><span style="color:#000000;">);
</span><span style="color:#008080;">175</span>     MD5STEP(F4, a, b, c, d, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">4</span>] + <span style="color:#800080;">0xf7537e82</span>, <span style="color:#800080;">6</span><span style="color:#000000;">);
</span><span style="color:#008080;">176</span>     MD5STEP(F4, d, a, b, c, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">11</span>] + <span style="color:#800080;">0xbd3af235</span>, <span style="color:#800080;">10</span><span style="color:#000000;">);
</span><span style="color:#008080;">177</span>     MD5STEP(F4, c, d, a, b, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">2</span>] + <span style="color:#800080;">0x2ad7d2bb</span>, <span style="color:#800080;">15</span><span style="color:#000000;">);
</span><span style="color:#008080;">178</span>     MD5STEP(F4, b, c, d, a, <span style="color:#0000ff;">in</span>[<span style="color:#800080;">9</span>] + <span style="color:#800080;">0xeb86d391</span>, <span style="color:#800080;">21</span><span style="color:#000000;">);
</span><span style="color:#008080;">179</span>     buf[<span style="color:#800080;">0</span>] +=<span style="color:#000000;"> a;
</span><span style="color:#008080;">180</span>     buf[<span style="color:#800080;">1</span>] +=<span style="color:#000000;"> b;
</span><span style="color:#008080;">181</span>     buf[<span style="color:#800080;">2</span>] +=<span style="color:#000000;"> c;
</span><span style="color:#008080;">182</span>     buf[<span style="color:#800080;">3</span>] +=<span style="color:#000000;"> d;
</span><span style="color:#008080;">183</span> <span style="color:#000000;">}
</span><span style="color:#008080;">184</span> <span style="color:#0000ff;">char</span>* CMd5(<span style="color:#0000ff;">const</span> <span style="color:#0000ff;">char</span>*<span style="color:#000000;"> s)
</span><span style="color:#008080;">185</span> <span style="color:#000000;">{
</span><span style="color:#008080;">186</span>      <span style="color:#0000ff;">struct</span><span style="color:#000000;"> MD5Context md5c;
</span><span style="color:#008080;">187</span>      unsigned <span style="color:#0000ff;">char</span> ss[<span style="color:#800080;">16</span><span style="color:#000000;">];
</span><span style="color:#008080;">188</span>      <span style="color:#0000ff;">char</span> subStr[<span style="color:#800080;">3</span>],resStr[<span style="color:#800080;">33</span><span style="color:#000000;">];
</span><span style="color:#008080;">189</span>      <span style="color:#0000ff;">int</span><span style="color:#000000;"> i;
</span><span style="color:#008080;">190</span>      MD5Init( &amp;<span style="color:#000000;">md5c );
</span><span style="color:#008080;">191</span>      MD5Update( &amp;<span style="color:#000000;">md5c, s, strlen(s) );
</span><span style="color:#008080;">192</span>      MD5Final( ss, &amp;<span style="color:#000000;">md5c );
</span><span style="color:#008080;">193</span>      strcpy(resStr,<span style="color:#800000;">""</span><span style="color:#000000;">);
</span><span style="color:#008080;">194</span>      <span style="color:#0000ff;">for</span>( i=<span style="color:#800080;">0</span>; i&lt;<span style="color:#800080;">16</span>; i++<span style="color:#000000;"> )
</span><span style="color:#008080;">195</span> <span style="color:#000000;">     {
</span><span style="color:#008080;">196</span>          sprintf(subStr, <span style="color:#800000;">"</span><span style="color:#800000;">%02x</span><span style="color:#800000;">"</span><span style="color:#000000;">, ss[i] );
</span><span style="color:#008080;">197</span>          itoa(ss[i],subStr,<span style="color:#800080;">16</span><span style="color:#000000;">);
</span><span style="color:#008080;">198</span>          <span style="color:#0000ff;">if</span> (strlen(subStr)==<span style="color:#800080;">1</span><span style="color:#000000;">) {
</span><span style="color:#008080;">199</span>              strcat(resStr,<span style="color:#800000;">"</span><span style="color:#800000;">0</span><span style="color:#800000;">"</span><span style="color:#000000;">);
</span><span style="color:#008080;">200</span> <span style="color:#000000;">         }
</span><span style="color:#008080;">201</span> <span style="color:#000000;">         strcat(resStr,subStr);
</span><span style="color:#008080;">202</span> <span style="color:#000000;">     }
</span><span style="color:#008080;">203</span>      strcat(resStr,<span style="color:#800000;">"</span><span style="color:#800000;">\0</span><span style="color:#800000;">"</span><span style="color:#000000;">);
</span><span style="color:#008080;">204</span>      <span style="color:#0000ff;">return</span><span style="color:#000000;"> resStr;
</span><span style="color:#008080;">205</span> }</pre> 
     </div> 
     <p>4. 如果一个action中有两个请求，那么压测是看到的响应时间曲线是两个请求综合的响应时间，如果要区分每个请求的响应时间，可加入请求开始/结束标记</p> 
     <div class="cnblogs_code"> 
      <pre><span style="color:#008080;">1</span> lr_start_transaction(“create”);<span style="color:#008000;">//</span><span style="color:#008000;">插入结束标记，从此结束计时</span>
<span style="color:#008080;">2</span> lr_end_transaction(“create”, LR_AUTO);<span style="color:#008000;">//</span><span style="color:#008000;">插入结束标记，从此结束计时</span></pre> 
     </div> 
     <p>转自：<a href="http://liu-ke.cnblogs.com" rel="nofollow">51testing论坛</a></p> 
    </div> 
   </div> 
   <br>
   <p align="center"><a href="https://images.cnblogs.com/cnblogs_com/liu-ke/763267/o_zsm.png" rel="nofollow"><img src="https://yqfile.alicdn.com/img_42a4adae4716d0e15c3eeaabfd040044.png" alt="img_42a4adae4716d0e15c3eeaabfd040044.png"></a> </p> 
   <p align="right"><font color="#FF0000">注：转载需注明出处及作者。</font></p> 
   <p align="right"><a href="http://liu-ke.cnblogs.com/" rel="nofollow"><font color="#FFA500">流柯</font></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
