<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Python界面编程之二----我的第一个PyQt5程序 « NotBeCN</title>
  <meta name="description" content="                  我的第一个PyQt5程序(转载于–学点编程吧)   今天我们就用PyQt5编写一个最基本的windows窗口。   先将代码展示如下，然后我们细细讲解。   import sysfrom PyQt5.QtWidgets import QApplication, QWidgeti...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2019/05/12/1557726284462.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">Python界面编程之二----我的第一个PyQt5程序</h1>
    <p class="post-meta">May 12, 2019</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div id="content_views" class="markdown_views prism-dracula"> 
  <!-- flowchart 箭头图标 勿删 --> 
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> 
  <h2><a id="PyQt5_0"></a>我的第一个PyQt5程序(转载于–学点编程吧)</h2> 
  <p>今天我们就用PyQt5编写一个最基本的windows窗口。</p> 
  <p>先将代码展示如下，然后我们细细讲解。</p> 
  <pre><code class="prism language-python"><span class="token keyword">import</span> sys
<span class="token keyword">from</span> PyQt5<span class="token punctuation">.</span>QtWidgets <span class="token keyword">import</span> QApplication<span class="token punctuation">,</span> QWidget

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>

    app <span class="token operator">=</span> QApplication<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">)</span>

    w <span class="token operator">=</span> QWidget<span class="token punctuation">(</span><span class="token punctuation">)</span>
    w<span class="token punctuation">.</span>resize<span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span>
    w<span class="token punctuation">.</span>move<span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span>
    w<span class="token punctuation">.</span>setWindowTitle<span class="token punctuation">(</span><span class="token string">'我的第一个PyQt5小程序'</span><span class="token punctuation">)</span>
    w<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

    sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span>app<span class="token punctuation">.</span>exec_<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
  <p>执行的结果如下图：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190512140548199.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hvbmdzb25nNjczMTUwMzQz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> 
  <pre><code>import sys
from PyQt5.QtWidgets import QApplication, QWidget
</code></pre> 
  <p>这段代码表明我们引入了python的相关模块，这就包括了sys模块，以及PyQt5中的QtWidgets模块。QtWidgets模块包含了一整套UI元素组件，用于建立符合系统风格的classic界面，非常方便。同时为了更方便的使用我们还明确了使用QtWidgets模块中的QApplication, QWidget。</p> 
  <pre><code>if __name__ == '__main__':
</code></pre> 
  <p>这个属于Python基础知识，如果写了这句话并将执行的语句放到这个判断语句的后面，那么只有在程序本身被执行的时候才能运行这个判断语句下面的语句。否则程序被作为模块导入的时候就会执行。</p> 
  <pre><code> app = QApplication(sys.argv)
</code></pre> 
  <p>每个PyQt5应用程序必须创建一个应用程序对象。 sys.argv参数是来自命令行的参数列表。 Python脚本可以从shell运行。 写了这句话就能让我们的程序从命令行启动。</p> 
  <pre><code> w = QWidget()
</code></pre> 
  <p>QWidget小部件是PyQt5中所有用户界面对象的基类。 我们提供了QWidget的默认构造函数。 默认构造函数没有父类。 没有父类口小部件称为窗口。、</p> 
  <pre><code> w.resize(500, 300)
</code></pre> 
  <p>resize（）方法调整窗口小部件的大小。这里我们设定窗口的大小：宽500像素，高300像素。</p> 
  <pre><code> w.move(300, 300)
</code></pre> 
  <p>move（）方法将小部件移动到屏幕上x = 300，y = 300坐标处的位置。这里我们来看一下屏幕坐标是怎么设定的，来看看下图。<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190512141129532.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hvbmdzb25nNjczMTUwMzQz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> 通过上图我们可以知晓，坐标原点是从哪里开始计算的，我们要是将程序中的（300,300）这个坐标改成（0，0），窗口就会跑到左上角去了，大家可以试试。</p> 
  <pre><code>w.setWindowTitle('我的第一个PyQt5小程序')
</code></pre> 
  <p>这个方法顾名思义，就是设置窗口的标题。</p> 
  <pre><code> w.show()
</code></pre> 
  <p>show（）方法在屏幕上显示窗口小部件。 一个小部件首先在内存中创建，然后在屏幕上显示。</p> 
  <pre><code>sys.exit(app.exec_())
</code></pre> 
  <p>最后，我们进入应用程序的主循环(main loop)。 事件处理从这一点开始。 主循环(main loop)从窗口系统接收事件并将它们分派到应用程序小部件。 如果我们调用exit（）方法或者主窗口小部件被破坏，那么主循环(main loop)就会结束。</p> 
  <p>sys.exit（）方法确保一个干净的退出。</p> 
  <p>exec_（）方法有一个下划线。 这是因为exec是一个Python关键字。 因此，使用exec_（）。</p> 
  <p>例如：</p> 
  <pre><code>&gt;&gt;&gt; exec('print(1+1)')
2
</code></pre> 
  <p>注意:为了便于初学者理解，我们把主循环(main loop)简单的谈一下。GUI应用程序都是事件驱动的。比如键盘事件、鼠标事件等等。还有一些事件来自于系统内部，比如定时事件、其它文件事件等等。在没有任何事件的情况下，应用程序处于睡眠状态。这种事件驱动机制，GUI应用程序都需要一个主循环(main loop)。主循环(main loop)控制应用程序什么时候进入睡眠状态，什么时候被唤醒。所以主循环(main loop)就是干这个的。</p> 
  <p>我们再举一个例子，结合命令行方式，自定义窗口标题。</p> 
  <pre><code>import sys
from PyQt5.QtWidgets import QApplication, QWidget

if __name__ == '__main__':

    app = QApplication(sys.argv)    
    try:
        if len(sys.argv) &lt; 2:
            raise ValueError
        else:
            title = " ".join(sys.argv[1:])
    except ValueError:
        title = "我的界面"

    w = QWidget()
    w.resize(250, 150)
    w.move(300, 300)
    w.setWindowTitle(title)
    w.show()

    sys.exit(app.exec_())
</code></pre> 
  <p>总体看没有什么变化，就是多了一个try…except…的语句，通过这个语句我们实现了：命令行中如果带入参数，窗口的标题就用这个参数代替，否则用默认的“我的界面”作为窗口的标题。当输入多个参数时，则合并这些参数为一个。</p> 
  <p>执行结果：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190512142039538.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hvbmdzb25nNjczMTUwMzQz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> 接下来呢，我们把这个窗口美化一下，增加一个图标。当然写法上调整一下，上面的代码基本上是按照面向过程来写的，下面开始我们采用面向对象的方式进行编码。</p> 
  <pre><code class="prism language-python"><span class="token keyword">import</span> sys
<span class="token keyword">from</span> PyQt5<span class="token punctuation">.</span>QtWidgets <span class="token keyword">import</span> QApplication<span class="token punctuation">,</span> QWidget
<span class="token keyword">from</span> PyQt5<span class="token punctuation">.</span>QtGui <span class="token keyword">import</span> QIcon


<span class="token keyword">class</span> <span class="token class-name">Icon</span><span class="token punctuation">(</span>QWidget<span class="token punctuation">)</span><span class="token punctuation">:</span>

     <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>init_ui<span class="token punctuation">(</span><span class="token punctuation">)</span>

     <span class="token keyword">def</span> <span class="token function">init_ui</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>setGeometry<span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>setWindowTitle<span class="token punctuation">(</span><span class="token string">'我的界面+草莓'</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>setWindowIcon<span class="token punctuation">(</span>QIcon<span class="token punctuation">(</span><span class="token string">'草莓.png'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    app <span class="token operator">=</span> QApplication<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">)</span>
    ex <span class="token operator">=</span> Icon<span class="token punctuation">(</span><span class="token punctuation">)</span>
    sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span>app<span class="token punctuation">.</span>exec_<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
  <p>执行结果：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190512143407949.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hvbmdzb25nNjczMTUwMzQz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> 我们可以看到窗口已经换成我们了一个草莓的图标。（矢量图标可以去阿里巴巴矢量图标库下载）</p> 
  <p>下面我们对新出现的代码进行相应的解析。</p> 
  <pre><code>from PyQt5.QtGui import QIcon
</code></pre> 
  <p>从PyQt5.QtGui中引入QIcon这个类，也是为了便于图标的设定。</p> 
  <pre><code>class Icon(QWidget):

    def __init__(self):
        super().__init__()

        self.init_ui()
</code></pre> 
  <p>很明显，我这里继承了QWidget这个基类，并自定义了一个名为Ico的新类。同时对这个Icon的新类进行了初始化。当子类继承父类的时候，我们继承了父类的方法。子类中含有__init__时，不会自动调用父类__init__，如需使用父类__init__中的变量，则需要在子类__init__中显式调用。</p> 
  <p>其实就是一点，我们要用QWidget中__init__的变量，就必须在子类Icon中显示调用：super().<strong>init</strong>()。__init __（）方法是Python语言的初始化方法（构造函数）</p> 
  <pre><code>self.init_ui()
</code></pre> 
  <p>程序的GUI界面用initUI()函数创建。</p> 
  <pre><code>self.setGeometry(300, 300, 400, 300)
self.setWindowTitle('我的界面+草莓')
self.setWindowIcon(QIcon('草莓.png'))
</code></pre> 
  <p>上面的三种方法都是从QWidget类中继承的。 setGeometry（）做了两件事情：它在屏幕上定位窗口并设置它的大小；前两个参数是窗口的x和y位置；第三个是宽度；第四个是窗口的高度。实际上，它在一个方法中组合了resize（）和move（）方法。 最后一个方法设置应用程序图标。 为此，我们创建了一个QIcon对象。 QIcon接收到我们要显示的图标的路径（和当前程序在同一个目录下）。</p> 
  <p>接下我们再这个窗口增加一个关闭按钮并实现关闭窗口的功能。</p> 
  <pre><code class="prism language-python"><span class="token keyword">import</span> sys
<span class="token keyword">from</span> PyQt5<span class="token punctuation">.</span>QtWidgets <span class="token keyword">import</span> QApplication<span class="token punctuation">,</span> QWidget<span class="token punctuation">,</span> QPushButton
<span class="token keyword">from</span> PyQt5<span class="token punctuation">.</span>QtGui <span class="token keyword">import</span> QIcon
<span class="token keyword">from</span> PyQt5<span class="token punctuation">.</span>QtCore <span class="token keyword">import</span> QCoreApplication

<span class="token keyword">class</span> <span class="token class-name">Icon</span><span class="token punctuation">(</span>QWidget<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>init_ui<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">init_ui</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>

        self<span class="token punctuation">.</span>setGeometry<span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>setWindowTitle<span class="token punctuation">(</span><span class="token string">'我的界面+草莓'</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>setWindowIcon<span class="token punctuation">(</span>QIcon<span class="token punctuation">(</span><span class="token string">'草莓.png'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

        btn <span class="token operator">=</span> QPushButton<span class="token punctuation">(</span><span class="token string">'退出'</span><span class="token punctuation">,</span> self<span class="token punctuation">)</span>
        btn<span class="token punctuation">.</span>clicked<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>QCoreApplication<span class="token punctuation">.</span>instance<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>quit<span class="token punctuation">)</span>
        btn<span class="token punctuation">.</span>resize<span class="token punctuation">(</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span>
        btn<span class="token punctuation">.</span>move<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>

    app <span class="token operator">=</span> QApplication<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">)</span>
    ex <span class="token operator">=</span> Icon<span class="token punctuation">(</span><span class="token punctuation">)</span>
    sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span>app<span class="token punctuation">.</span>exec_<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
  <p>执行结果如下：</p> 
  <p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190512144535442.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hvbmdzb25nNjczMTUwMzQz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> 我们来解析一下代码。</p> 
  <pre><code>from PyQt5.QtWidgets import QPushButton
from PyQt5.QtCore import QCoreApplication
</code></pre> 
  <p>因为需要增加按钮，所以我们引入了QPushButton类。同时我们还需要一个来自QtCore模块的对象。</p> 
  <pre><code>btn = QPushButton('Quit', self)
</code></pre> 
  <p>我们创建一个按钮。该按钮是QPushButton类的一个实例。构造函数的第一个参数是按钮的标签。第二个参数是父窗口小部件。父窗口小部件是示例窗口小部件，它是通过QWidget继承的。</p> 
  <pre><code>btn.clicked.connect(QCoreApplication.instance().quit)
</code></pre> 
  <p>PyQt5中的事件处理系统采用信号和槽机制构建。 如果我们点击按钮，点击的信号被发出。 槽可以是Qt槽函数或任何Python可调用的函数。 QCoreApplication包含主事件循环; 它处理和调度所有事件。 instance（）方法给我们当前的实例。<br> 请注意，QCoreApplication是通过QApplication创建的。 点击的信号连接到终止应用程序的quit（）方法。</p> 
  <p>通信在两个对象之间完成：发送方和接收方。 发送方是按钮，接收者是应用对象。</p> 
  <p>简单的来说就是按钮发出被单击的信号，连接到退出程序的方法。</p> 
 </div> 
 <link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-258a4616f7.css" rel="stylesheet"> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
