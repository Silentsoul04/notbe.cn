<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>【历史】 tomcat mysql server 端本地部署完美方案 « NotBeCN</title>
  <meta name="description" content="          1 介绍      HTTP Server: E.g., Apache HTTP Server, Apache Tomcat Server, Microsoft Internet Information Server (IIS), nginx, Google Web Server (GWS),...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2019/05/12/qfzhangwei_90137010.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">【历史】 tomcat mysql server 端本地部署完美方案</h1>
    <p class="post-meta">May 12, 2019</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">  
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <p><strong>1 介绍</strong></p> 
  <ol>
   <li>HTTP Server: E.g., Apache HTTP Server, <span style="color:#ffbb66;">Apache Tomcat Server</span>, Microsoft Internet Information Server (IIS), nginx, Google Web Server (GWS), and others.</li> 
   <li>HTTP Client (or Web Browser): E.g., Internet Explorer (MSIE), FireFox, Chrome, Safari, and others.</li> 
   <li>Database: E.g., <span style="color:#ffbb66;">Open-source MySQL</span>, PostgreSQL, Apache Derby, mSQL, SQLite, OpenOffice's Base; Commercial Oracle, IBM DB2, SAP SyBase, Microsoft SQL Server, Microsoft Access; and others.</li> 
   <li>Client-Side Programs: Could be written in <span style="color:#ffbb66;">HTML Form, JavaScript</span>, and others.</li> 
   <li>Server-Side Programs: Could be written in Java Servlet/JSP, ASP, PHP, Perl, Python, JavaScript, and others.</li> 
  </ol>
  <p><img alt="" class="has" height="302" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/2019051209081359.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Fmemhhbmd3ZWk=,size_16,color_FFFFFF,t_70" width="500"></p> 
  <p>&nbsp;</p> 
  <p>A typical&nbsp;<em>use case</em>&nbsp;is:</p> 
  <ol>
   <li>A user, via a web browser (HTTP client), issues a URL request to an HTTP server to start a webapp.</li> 
   <li>The HTTP server returns an HTML form (client-side program), which is loaded and renderred in the client's browser.</li> 
   <li>The user fills up the query criteria inside the form and submits the form.</li> 
   <li>The client-side program sends the query parameters to a server-side program.</li> 
   <li>The server-side program <span style="color:#ffbb66;">receives the query parameters</span>, <span style="color:#ffbb66;">queries the database </span>based on these parameters, and returns the query result to the client-side program.</li> 
   <li>The client-side program receives the query result and displays on the browser.</li> 
   <li>The process repeats for the next request-response.</li> 
  </ol>
  <p><strong>1.2&nbsp;&nbsp;Hypertext Transfer Protocol (HTTP)<a id="zz-1.2"></a></strong></p> 
  <ul>
   <li>HTTP is an&nbsp;<em>application layer</em>&nbsp;protocol runs over TCP/IP. The IP provides support for routing and addressing (via an unique IP address for machines connected to the Internet); while TCP supports multiplexing via 64K ports from port number 0 to 65535. The default port number assigned to HTTP is TCP port 80. (Notes: TCP Port numbers below 1024 are reserved for popular protocols such as HTTP, FTP, SMTP; Port numbers 1024 and above could be used for applications.)</li> 
   <li>HTTP is an&nbsp;<em>asynchronous request-response application-layer protocol</em>. A client sends a request message to the server. The server then returns a response message to the client. In other words, HTTP is a&nbsp;<em>pull</em>&nbsp;protocol, a client pulls a page from the server (instead of server pushes pages to the clients).</li> 
   <li>The syntax of the message is defined in the&nbsp;<a href="https://www.w3.org/standards/webarch/protocols" rel="nofollow">HTTP specification</a>.</li> 
  </ul>
  <p><img alt="HTTP_RequestResponseMessages.png" class="has" src="http://www.ntu.edu.sg/home/ehchua/programming/howto/images/HTTP_RequestResponseMessages.png"></p> 
  <p><strong>1.3&nbsp;&nbsp;Apache Tomcat HTTP Server<a id="zz-1.3"></a></strong></p> 
  <p>Apache Tomcat is a Java-capable HTTP server, which could execute special Java programs known as "Java Servlet" and "Java Server Pages (JSP)". Tomcat is an&nbsp;<em>open-source</em>&nbsp;project, under the "Apache Software Foundation" (which also provides the most use, open-source, industrial-strength Apache HTTP Server). The mother site for Tomcat is&nbsp;<a href="http://tomcat.apache.org/" rel="nofollow">http://tomcat.apache.org</a>. Alternatively, you can find tomcat via the Apache mother site @&nbsp;<a href="http://www.apache.org/" rel="nofollow">http://www.apache.org</a>.</p> 
  <p>Tomcat was originally written by James Duncan Davison (then working in Sun) in 1998, based on an earlier Sun's server called Java Web Server (JWS). It began at version 3.0 after JWS 2.1 it replaced. Sun subsequently made Tomcat open-source and gave it to Apache.</p> 
  <p>The various Tomcat releases are:</p> 
  <ol>
   <li>Tomcat 3.0 (1999): Reference Implementation (RI) for Servlet 2.2 and JSP 1.1.</li> 
   <li>Tomcat 4.1 (Sep 2002): RI for Servlet 2.3 and JSP 1.2.</li> 
   <li>Tomcat 5.0 (Dec 2003): RI for Servlet 2.4 and JSP 2.0.</li> 
   <li>Tomcat 6.0 (Feb 2007): RI for Servlet 2.5 and JSP 2.1.</li> 
   <li>Tomcat 7.0 (Jan 2011): RI for Servlet 3.0, JSP 2.2 and EL 2.2.</li> 
   <li>Tomcat 8.0 (Jun 2014): RI for Servlet 3.1, JSP 2.3, EL 3.0 and WebSocket 1.0. Tomcat 8.5 (June 2016) supports HTTP/2, OpenSSL, TLS virtual hosting and JASPIC 1.1.</li> 
   <li>Tomcat 9.0 (Jan 2018): RI for Servlet 4.0, JSP 2.3, EL 3.0, WebSocket 1.0, JASPIC 1.1.</li> 
   <li>Tomcat 10.0 (???):</li> 
  </ol>
  <h3 id="TomcatInstall">2.&nbsp;&nbsp;How to Install Tomcat and Get Started with Java Servlet Programming<a id="zz-2."></a></h3> 
  <p>2.1&nbsp;&nbsp;STEP 0: Create a Directory to Keep all your Works<a id="zz-2.1"></a></p> 
  <p>I shall assume that you have created a directory called "<code>c:\myWebProject</code>" (for Windows) or "<code>~\myWebProject</code>" (for Mac OS X) in your earlier exercises. Do it otherwise. This step is important; otherwise, you will be out-of-sync with this article and will not be able to find your files later.</p> 
  <p>2.2&nbsp;&nbsp;STEP 1: Download and Install Tomcat<a id="zz-2.2"></a></p> 
  <p>For Windows</p> 
  <ol>
   <li>Goto&nbsp;<a href="http://tomcat.apache.org/" rel="nofollow">http://tomcat.apache.org</a>&nbsp;⇒ Under "Tomcat 9.0.{xx}&nbsp;Released", where&nbsp;{xx}&nbsp;is the latest update number ⇒ Click "Download" ⇒ Under "9.0.{xx}" ⇒ Binary Distributions ⇒ Core ⇒ "<strong><code>zip</code></strong>" (e.g., "<code>apache-tomcat-9.0.{xx}.<strong>zip</strong></code>", about 11 MB).</li> 
   <li>UNZIP the downloaded file into your project directory "<code>c:\myWebProject</code>". Tomcat shall be unzipped into directory "<code>c:\myWebProject\apache-tomcat-9.0.{xx}</code>".</li> 
   <li>For&nbsp;<strong>EASE OF USE</strong>, we shall shorten and rename this directory to "<code>c:\myWebProject\tomcat</code>".</li> 
  </ol>
  <p><strong><strong>Take note of Your Tomcat Installed Directory</strong></strong>. Hereafter, I shall refer to the Tomcat installed directory as&nbsp;<code>&lt;TOMCAT_HOME&gt;</code>.</p> 
  <p>For Mac OS X</p> 
  <ol>
   <li>Goto&nbsp;<a href="http://tomcat.apache.org/" rel="nofollow">http://tomcat.apache.org</a>&nbsp;⇒ Under "Tomcat 9.0.{xx}&nbsp;Released", where&nbsp;{xx}&nbsp;is the latest update number ⇒ Click "Download" ⇒ Under "9.0.{xx}"⇒ Binary distribution ⇒ Core ⇒ "<strong><code>tar.gz</code></strong>" (e.g., "<code>apache-tomcat-9.0.{xx}.<strong>tar.gz</strong></code>", about 10.5 MB).</li> 
   <li>To install Tomcat: 
    <ol>
     <li>Double-click the downloaded tarball (e.g., "<code>apache-tomcat-9.0.{xx}.tar.gz</code>") to expand it into a folder (e.g., "<code>apache-tomcat-9.0.{xx}</code>").</li> 
     <li>Move the extracted folder (e.g., "<code>apache-tomcat-9.0.{xx}</code>") to your project directory "<code>~/myWebProject</code>".</li> 
     <li>For&nbsp;<strong>EASE OF USE</strong>, we shall shorten and rename this folder to "tomcat", i.e., "<code>~/myWebProject/tomcat</code>".</li> 
    </ol></li> 
  </ol>
  <p><strong><strong>Take note of Your Tomcat Installed Directory</strong></strong>. Hereafter, I shall refer to the Tomcat installed directory as&nbsp;<code>&lt;TOMCAT_HOME&gt;</code>.</p> 
  <p>For Ubuntu</p> 
  <p>Read "<a href="http://www.ntu.edu.sg/home/ehchua/programming/howto/Ubuntu_HowTo.html#tomcat" rel="nofollow">How to Install Tomcat on Ubuntu</a>". You need to switch between these two articles.</p> 
  <p>For academic learning, I recommend "<code>zip</code>" (or "<code>tar.gz</code>") package, as you could simply delete the entire directory when Tomcat is no longer needed (without running any un-installer). You are free to move or rename the Tomcat's installed directory. You can install (unzip) multiple copies of Tomcat in the same machine.</p> 
  <p>Tomcat's Sub-Directories</p> 
  <p>Take a quick look at the Tomcat installed directory. It contains the these sub-directories:</p> 
  <ul>
   <li>bin: contains the&nbsp;<em>binaries</em>&nbsp;and&nbsp;<em>scripts</em>&nbsp;(e.g.,&nbsp;<code>startup.bat</code>&nbsp;and&nbsp;<code>shutdown.bat</code>&nbsp;for Windows;&nbsp;<code>startup.sh</code>&nbsp;and&nbsp;<code>shutdown.sh</code>&nbsp;for Unixes and Mac OS X).</li> 
   <li>conf: contains the system-wide&nbsp;<em>configuration</em>&nbsp;files, such as&nbsp;<code>server.xml</code>,&nbsp;<code>web.xml</code>, and&nbsp;<code>context.xml</code>.</li> 
   <li>webapps: contains the&nbsp;<em>webapps</em>&nbsp;to be deployed. You can also place the WAR (Webapp Archive) file for deployment here.</li> 
   <li>lib: contains the Tomcat's system-wide library JAR files, accessible by all webapps. You could also place external JAR file (such as MySQL JDBC Driver) here.</li> 
   <li>logs: contains Tomcat's log files. You may need to check for error messages here.</li> 
   <li>work: Tomcat's working directory used by JSP, for JSP-to-Servlet conversion.</li> 
  </ul>
  <p>2.3&nbsp;&nbsp;STEP 2: Create an Environment Variable&nbsp;JAVA_HOME<a id="zz-2.3"></a></p> 
  <p>(For Windows)</p> 
  <p>You need to create an&nbsp;<em>environment variable</em>&nbsp;(system variable available to all applications) called "<code>JAVA_HOME</code>", and set it to your JDK installed directory.</p> 
  <p>Follow the steps&nbsp;<a href="http://www.ntu.edu.sg/home/ehchua/programming/howto/JDK_HowTo.html#Set-JAVA_HOME" rel="nofollow">HERE</a>!</p> 
  <p>(For Mac OS)</p> 
  <p>Skip this step. No need to do anything.</p> 
  <p>2.4&nbsp;&nbsp;STEP 3: Configure the Tomcat Server<a id="zz-2.4"></a></p> 
  <p>The Tomcat configuration files, in XML format, are located in the "<code>conf</code>" sub-directory of your Tomcat installed directory, e.g. "<code>c:\myWebProject\tomcat\conf</code>" (for Windows) or "<code>~/myWebProject/tomcat/conf</code>" (for Mac OS X). The important configuration files are:</p> 
  <ol>
   <li><code>server.xml</code></li> 
   <li><code>web.xml</code></li> 
   <li><code>context.xml</code></li> 
  </ol>
  <p>Make a BACKUP of the configuration files before you proceed!!!</p> 
  <p>Step 3(a) "conf\server.xml" -&nbsp;<strong>Set the TCP Port Number</strong></p> 
  <p>Use a programming text editor (e.g., Sublime Text, Atom) to open the configuration file "<code>server.xml</code>".</p> 
  <p>The default TCP port number configured in Tomcat is 8080, you may choose any number between 1024 and 65535, which is not used by existing applications. We shall choose 9999 in this article. (For production server, you should use port 80, which is pre-assigned to HTTP server as the default port number.)</p> 
  <p>Locate the following lines (around Line 69) that define the HTTP connector, and change&nbsp;<code>port="8080"</code>&nbsp;to&nbsp;<code>port="9999"</code>.</p> 
  <pre>
&lt;!-- A "Connector" represents an endpoint by which requests are received
      and responses are returned. Documentation at :
      Java HTTP Connector: /docs/config/http.html
      Java AJP  Connector: /docs/config/ajp.html
      APR (HTTP/AJP) Connector: /docs/apr.html
      <strong>Define a non-SSL HTTP/1.1 Connector on port 8080</strong>
--&gt;
&lt;Connector port="9999" protocol="HTTP/1.1"
           connectionTimeout="20000"
           redirectPort="8443" /&gt;</pre> 
  <p>Step 3(b) "conf\web.xml" -&nbsp;<strong>Enable Directory Listing</strong></p> 
  <p>Again, use a programming text editor to open the configuration file "<code>web.xml</code>".</p> 
  <p>We shall enable directory listing by changing "<code>listings</code>" from "<code>false</code>" to "<code>true</code>" for the "<code>default</code>" servlet. This is handy for test system, but not for production system for security.</p> 
  <p>Locate the following lines (around Line 108) that define the "<code>default</code>" servlet; and change the "<code>listings</code>" from "<code>false</code>" to "<code>true</code>".</p> 
  <pre>
&lt;servlet&gt;
  &lt;servlet-name&gt;<strong>default</strong>&lt;/servlet-name&gt;
  &lt;servlet-class&gt;org.apache.catalina.servlets.DefaultServlet&lt;/servlet-class&gt;
  &lt;init-param&gt;
    &lt;param-name&gt;debug&lt;/param-name&gt;
    &lt;param-value&gt;0&lt;/param-value&gt;
  &lt;/init-param&gt;
  &lt;init-param&gt;
    &lt;param-name&gt;<strong>listings</strong>&lt;/param-name&gt;
    &lt;param-value&gt;<strong>true</strong>&lt;/param-value&gt;
  &lt;/init-param&gt;
  &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
&lt;/servlet&gt;</pre> 
  <p>Step 3(c) "conf\context.xml" -&nbsp;<strong>Enabling Automatic Reload</strong></p> 
  <p>We shall add the attribute&nbsp;<code>reloadable="true"</code>&nbsp;to the&nbsp;<code>&lt;Context&gt;</code>&nbsp;element to enable automatic reload after code changes. Again, this is handy for test system but not recommended for production, due to the overhead of detecting changes.</p> 
  <p>Locate the&nbsp;<code>&lt;Context&gt;</code>&nbsp;start element (around Line 19), and change it to&nbsp;<code>&lt;Context reloadable="true"&gt;</code>.</p> 
  <pre>
&lt;Context <strong>reloadable="true"</strong>&gt;
   ......
   ......
&lt;/Context&gt;</pre> 
  <p>2.5&nbsp;&nbsp;STEP 4: Start Tomcat Server<a id="zz-2.5"></a></p> 
  <p>The Tomcat's executable programs and scripts are kept in the "<code>bin</code>" sub-directory of the Tomcat installed directory.</p> 
  <p>Step 4(a) Start Server</p> 
  <p>For Windows</p> 
  <p>I shall assume that Tomcat is installed in "<code>c:\myWebProject\tomcat</code>". Launch a CMD shell and issue:</p> 
  <pre>
<strong>c:</strong>                           // Change drive
<strong>cd \myWebProject\tomcat\bin</strong>  // Change directory to your Tomcat's binary directory
<strong>startup</strong>                      // Run startup.bat to start tomcat server</pre> 
  <p>For Mac OS</p> 
  <p>I assume that Tomcat is installed in "<code>~/myWebProject/tomcat</code>". To start the Tomcat server, open a new "Terminal" and issue:</p> 
  <pre>
<strong>cd ~/myWebProject/tomcat/bin</strong>  // Change directory to your Tomcat's binary directory
<strong>./catalina.sh run</strong>             // Run catalina.sh to start tomcat server</pre> 
  <p>A&nbsp;<em>new</em>&nbsp;Tomcat console window appears (with Java's coffee-cup logo as icon). Study the messages on the console. Look out for the Tomcat's port number. Double check that Tomcat is running on port 9999 as configured.</p> 
  <p>Error messages will be sent to this console.&nbsp;<code>System.out.println()</code>&nbsp;issued by your Java servlets will also be sent to this console.</p> 
  <pre>
............
............
xxxxx INFO [main] org.apache.coyote.AbstractProtocol.start Starting ProtocolHandler ["http-nio-9999"]
xxxxx INFO [main] org.apache.coyote.AbstractProtocol.start Starting ProtocolHandler ["ajp-nio-8009"]
xxxxx INFO [main] org.apache.catalina.startup.Catalina.start Server startup in [1325] ms</pre> 
  <p>(Skip Unless ...) Cannot Start Tomcat:&nbsp;Read "<a href="http://www.ntu.edu.sg/home/ehchua/programming/howto/Tomcat_HowTo.html#TomcatDebug" rel="nofollow">How to Debug</a>".</p> 
  <p>Step 4(b) Start a Client to Access the Server</p> 
  <p>Start a browser (Firefox, Chrome) as an HTTP client. Issue URL "<code>http://localhost:9999</code>" to access the Tomcat server's welcome page. The hostname "<code>localhost</code>" (with IP address of&nbsp;<code>127.0.0.1</code>) is meant for local loop-back testing within the same machine. For users on the other machines over the net, they have to use the server's IP address or DNS domain name in the form of "<code>http://<em>serverHostnameOrIPAddress</em>:9999</code>".</p> 
  <p><img alt="TomcatHomePage.png" class="has" src="http://www.ntu.edu.sg/home/ehchua/programming/howto/images/TomcatHomePage.png"></p> 
  <p>(Optional) Try issuing URL&nbsp;<code>http://localhost:9999/examples</code>&nbsp;to view the servlet and JSP examples. Try running some of the servlet examples.</p> 
  <p>Step 4(c) Shutdown Server</p> 
  <p>For Windows</p> 
  <p>You can shutdown the tomcat server by either:</p> 
  <ol>
   <li>Press Ctrl-C on the Tomcat console; OR</li> 
   <li>Run "<code>&lt;TOMCAT_HOME&gt;\bin\<strong>shutdown.bat</strong></code>" script. Open a new "cmd" and issue: <pre>
<strong>c:</strong>                           // Change the current drive
<strong>cd \myWebProject\tomcat\bin</strong>  // Change directory to your Tomcat's binary directory
<strong>shutdown</strong>                     // Run shutdown.bat to shutdown the server</pre> </li> 
  </ol>
  <p>For Mac OS</p> 
  <p>To shutdown the Tomcat server:</p> 
  <ol>
   <li>Press Control-C (NOT Command-C) on the Tomcat console; OR</li> 
   <li>Run the "<code>&lt;TOMCAT_HOME&gt;/bin/shutdown.sh</code>" script. Open a new "Terminal" and issue: <pre>
<strong>cd ~/myWebProject/tomcat/bin</strong>  // Change current directory to Tomcat's bin directory
<strong>./shutdown.sh</strong>                 // Run shutdown.sh to shutdown the server</pre> </li> 
  </ol>
  <p>WARNING: You MUST properly shutdown the Tomcat. DO NOT kill the CAT by pushing the window's "CLOSE" button.</p> 
  <p>2.6&nbsp;&nbsp;STEP 5: Develop and Deploy a WebApp<a id="zz-2.6"></a></p> 
  <p>Step 5(a) Create the Directory Structure for your WebApp</p> 
  <p><img alt="TomcatWebappHello.png" class="has" src="http://www.ntu.edu.sg/home/ehchua/programming/howto/images/TomcatWebappHello.png"></p> 
  <p>Let's call our first webapp "<code>hello</code>". Goto Tomcat's "<code>webapps</code>" sub-directory and create the following directory structure for your webapp "<code>hello</code>" (as illustrated):</p> 
  <ol>
   <li>Under Tomcat's "<code>webapps</code>", create your webapp's&nbsp;<em>root</em>&nbsp;directory "<code>hello</code>" (i.e., "<code>&lt;TOMCAT_HOME&gt;\webapps\hello</code>").</li> 
   <li>Under "<code>hello</code>", create a sub-directory "<code>WEB-INF</code>" (case sensitive, a "dash" not an underscore) (i.e., "<code>&lt;TOMCAT_HOME&gt;\webapps\hello\WEB-INF</code>").</li> 
   <li>Under "<code>WEB-INF</code>", create a sub-sub-directory "<code>classes</code>" (case sensitive, plural) (i.e., "<code>&lt;TOMCAT_HOME&gt;\webapps\hello\WEB-INF\classes</code>").</li> 
  </ol>
  <p>You need to keep your web resources (e.g., HTMLs, CSSs, images, scripts, servlets, JSPs) in the proper directories:</p> 
  <ul>
   <li>"<code>hello</code>": The is called the&nbsp;<em>context root</em>&nbsp;(or&nbsp;<em>document base directory</em>) of your webapp. You should keep all your HTML files and resources visible to the web users (e.g., HTMLs, CSSs, images, scripts, JSPs) under this&nbsp;<em>context root</em>.</li> 
   <li>"<code>hello/WEB-INF</code>": This directory, although under the context root, is&nbsp;<em>not visible</em>&nbsp;to the web users. This is where you keep your application's web descriptor file "<code>web.xml</code>".</li> 
   <li>"<code>hello/WEB-INF/classes</code>": This is where you keep all the Java classes such as servlet class-files.</li> 
  </ul>
  <p>You should&nbsp;RE-START&nbsp;your Tomcat server to pick up the&nbsp;<code>hello</code>&nbsp;webapp. Check the Tomcat's console to confirm that "<code>hello</code>" application has been properly deployed:</p> 
  <pre>
......
xxxxx INFO [main] org.apache.catalina.startup.HostConfig.deployDirectory
Deploying web application directory [xxx\webapps\hello]
xxxxx INFO [main] org.apache.catalina.startup.HostConfig.deployDirectory
Deployment of web application directory [xxx\webapps\hello] has finished in [38] ms
......</pre> 
  <p>You can issue the following URL to access the web application "<code>hello</code>":</p> 
  <pre>
http://localhost:9999<strong>/hello</strong></pre> 
  <p>You should see the directory listing of the directory "<code>&lt;TOMCAT_HOME&gt;\webapps\hello</code>", which shall be empty at this point of time. Take note that we have earlier enabled directory listing in "<code>web.xml</code>". Otherwise, you will get an error "404 Not Found".</p> 
  <p>Step 5(b) Write a Welcome Page</p> 
  <p>Create the following HTML page and save as "<code>HelloHome.html</code>" in your webapp's root directory "<code>hello</code>".</p> 
  <table>
   <tbody>
    <tr>
     <td> <pre>
1
2
3
4
5
6</pre> </td> 
     <td> <pre>
&lt;html&gt;
  &lt;head&gt;&lt;title&gt;My Home Page&lt;/title&gt;&lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;My Name is so and so. This is my HOME.&lt;/h1&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre> </td> 
    </tr>
   </tbody>
  </table>
  <p>You can browse this page by issuing this URL:</p> 
  <pre>
http://localhost:9999/hello/<strong>HelloHome.html</strong></pre> 
  <p><img alt="TomcatWebappHelloHome.png" class="has" src="http://www.ntu.edu.sg/home/ehchua/programming/howto/images/TomcatWebappHelloHome.png"></p> 
  <p>Alternatively, you can issue an URL to your webapp's root "<code>hello</code>":</p> 
  <pre>
http://localhost:9999/hello</pre> 
  <p>The server will return the directory listing of your base directory. You can then click on "<code>HelloHome.html</code>".</p> 
  <p>Rename "<code>HelloHome.html</code>" to "<code>index.html</code>", and issue a directory request again:</p> 
  <pre>
http://localhost:9999/hello</pre> 
  <p>Now, the server will redirect the directory request to "<code>index.html</code>", if the root directory contains an "<code>index.html</code>", instead of serving the directory listing.</p> 
  <p>You can check out the home page of your peers by issuing:</p> 
  <pre>
http://<em>YourPeerHostnameOrIPAddr</em>:9999/hello
http://<em>YourPeerHostnameOrIPAddr</em>:9999/hello/HelloHome.html
</pre> 
  <p>with a valid "<code><em>YourPeerHostnameOrIPAddr</em></code>", provided that your peer has started his tomcat server and his firewall does not block your access. You can use command such as "<code>ipconfig</code>" (Windows), "<code>ifconfig</code>" (Mac OS X and Unix) to find your IP address.</p> 
  <p>&nbsp;</p> 
  <p>(Skip Unless...)&nbsp;The likely errors are "Unable to Connect", "Internet Explorer cannot display the web page", and "404 File Not Found". Read "<a href="http://www.ntu.edu.sg/home/ehchua/programming/howto/Tomcat_HowTo.html#TomcatDebug" rel="nofollow">How to Debug</a>" section.</p> 
  <p>2.7&nbsp;&nbsp;STEP 6: Write a "Hello-world" Java Servlet<a id="zz-2.7"></a></p> 
  <p>A&nbsp;<em>servlet</em>&nbsp;is Java program that runs inside a Java-capable HTTP Server, such as Apache Tomcat. A web user invokes a servlet by issuing an appropriate URL from a web browser (HTTP client).</p> 
  <p>Before you proceed, I shall assume that you are familiar with Java Programming and have installed the followings:</p> 
  <ol>
   <li>JDK (Read "<a href="http://www.ntu.edu.sg/home/ehchua/programming/howto/JDK_HowTo.html" rel="nofollow">How to install JDK and Get Started</a>").</li> 
   <li>A programming text editor, such as Sublime Text or Atom.</li> 
  </ol>
  <p>Step 6(a) Write a "Hello-world" Java Servlet</p> 
  <p>A Java servlet is a Java program that runs inside a HTTP server. A web user invokes a servlet by issuing a URL from a browser (or HTTP client).</p> 
  <p>In this example, we are going to write a Java servlet called&nbsp;<code>HelloServlet</code>, which says "Hello, world!". We will configure such that web users can invoke this servlet by issuing URL&nbsp;<code>http://<em>ip_addr</em>:<em>port</em>/hello/sayhello</code>&nbsp;from their browser, as illustrated:</p> 
  <p><img alt="TomcatWebappHelloServlet.png" class="has" src="http://www.ntu.edu.sg/home/ehchua/programming/howto/images/TomcatWebappHelloServlet.png"></p> 
  <p>Write the following source codes called "<code>HelloServlet.java</code>" and save it under your application "<code>classes</code>" directory (i.e., "<code>&lt;TOMCAT_HOME&gt;\webapps\hello\<strong>WEB-INF\classes</strong>\HelloServlet.java</code>"). This servlet says "Hello", echoes some request information, and prints a random number upon each request.</p> 
  <table>
   <tbody>
    <tr>
     <td> <pre>
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</pre> </td> 
     <td> <pre>
// To save as "&lt;TOMCAT_HOME&gt;\webapps\hello\WEB-INF\classes\HelloServlet.java"
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.annotation.*;
 
@WebServlet("/sayhello")   // Configure the request URL for this servlet (Tomcat 7/Servlet 3.0 upwards)
public class <strong>HelloServlet</strong> extends HttpServlet {

   // The doGet() runs once per HTTP GET request to this servlet.
   @Override
   public void <strong>doGet</strong>(HttpServletRequest <strong>request</strong>, HttpServletResponse <strong>response</strong>)
         throws IOException, ServletException {
 
      // Set the response MIME type of the response message
      <strong>response.setContentType("text/html");</strong>
      // Allocate a output writer to write the response message into the network socket
      <strong>PrintWriter out = response.getWriter();</strong>
 
      // Write the response message, in an HTML page
      out.println("&lt;html&gt;");
      out.println("&lt;head&gt;&lt;title&gt;Hello, World&lt;/title&gt;&lt;/head&gt;");
      out.println("&lt;body&gt;");
      out.println("&lt;h1&gt;Hello, world!&lt;/h1&gt;");  // says Hello
      // Echo client's request information
      out.println("&lt;p&gt;Request URI: " + <strong>request.getRequestURI()</strong> + "&lt;/p&gt;");
      out.println("&lt;p&gt;Protocol: " + <strong>request.getProtocol()</strong> + "&lt;/p&gt;");
      out.println("&lt;p&gt;PathInfo: " + <strong>request.getPathInfo()</strong> + "&lt;/p&gt;");
      out.println("&lt;p&gt;Remote Address: " + <strong>request.getRemoteAddr()</strong> + "&lt;/p&gt;");
      // Generate a random number upon each request
      out.println("&lt;p&gt;A Random Number: &lt;strong&gt;" + <strong>Math.random()</strong> + "&lt;/strong&gt;&lt;/p&gt;");
      out.println("&lt;/body&gt;&lt;/html&gt;");
      out.close();  // Always close the output writer
   }
}</pre> </td> 
    </tr>
   </tbody>
  </table>
  <p>Take note that in Line 7, we configure this&nbsp;<code>HelloServlet</code>&nbsp;to URL "<code>/sayhello</code>" via annotation&nbsp;<code>@WebServlet("/sayhello")</code>, which is applicable to Tomcat 7 onwards. In other words, the full URL shall be&nbsp;<code>http://<em>ip_addr</em>:<em>port</em>/hello/sayhello</code>&nbsp;to trigger this&nbsp;<code>HelloServlet</code>.</p> 
  <p>Step 6(b) Compiling the Servlet&nbsp;(DIFFICULT)</p> 
  <p>We need the Java Servlet API to compile the servlet. Servlet API is NOT part of JDK. Tomcat provides a copy in&nbsp;<code>&lt;TOMCAT_HOME&gt;/lib/servlet-api.jar</code>. We need to include this JAR file in the compilation via the&nbsp;<code>-cp</code>(classpath) option as follows:</p> 
  <p>(For Windows)</p> 
  <pre>
// Assume that Tomcat is installed in c:\myWebProject\tomcat
// Change directory to the Java source directory
<strong>c:</strong>
<strong>cd \myWebProject\tomcat\webapps\hello\WEB-INF\classes</strong>

// Compile
<strong>javac -cp .;c:\myWebProject\tomcat\lib\servlet-api.jar HelloServlet.java</strong></pre> 
  <p>(For Mac OS)</p> 
  <pre>
// Assume that Tomcat is installed in ~/myWebProject/tomcat
// Change directory to the Java source directory
<strong>cd ~/myWebProject/tomcat/webapps/hello/WEB-INF/classes</strong>

// Compile - Need to use $HOME instead of ~ in the "javac" command
<strong>javac -cp .:$HOME/myWebProject/tomcat/lib/servlet-api.jar HelloServlet.java</strong></pre> 
  <p>The output of the compilation is "<code>HelloServlet.class</code>".</p> 
  <p><strong>Use your "File Explorer" to check the "<code>webapps/hello/WEB-INF/classes</code>" folder to make sure that "<code>HelloServlet.class</code>" has been created in the right place.</strong></p> 
  <p>Step 6(c) Invoke the Servlet</p> 
  <p>Restart your Tomcat Server (just in case ...).</p> 
  <p>To invoke this servlet, start a browser, and issue the request URL configured as follows:</p> 
  <pre>
http://localhost:9999/<strong>hello/sayhello</strong></pre> 
  <p>You shall see the output of the servlet displayed in your web browser.</p> 
  <p>Refresh the browser, you shall see a new random number upon each refresh. In other word, the&nbsp;<code>doGet()</code>&nbsp;method of the servlet runs once per request.</p> 
  <p>View Page Source</p> 
  <p>(For Firefox and Chrome) Right-click the page ⇒ "View Page Source" to look at the output received by the web browser (which is returned by the server). Take note that the web browser receives only the output of the servlet (generated via the&nbsp;<code>out.println()</code>&nbsp;statements). The client has no access to the servlet source codes (which may contain confidential information).</p> 
  <p>(For Mac OS's Safari browser) You need to enable "Developer Menu" under the "Preferences" to enable the "View Source" menu.</p> 
  <pre>
&lt;html&gt;
&lt;head&gt;&lt;title&gt;Hello, World&lt;/title&gt;&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Hello, world!&lt;/h1&gt;
&lt;p&gt;Request URI: /hello/sayhello&lt;/p&gt;
&lt;p&gt;Protocol: HTTP/1.1&lt;/p&gt;
&lt;p&gt;PathInfo: null&lt;/p&gt;
&lt;p&gt;Remote Address: 127.0.0.1&lt;/p&gt;
&lt;p&gt;A Random Number: &lt;strong&gt;0.3523682325749493&lt;/strong&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</pre> 
  <p>&nbsp;</p> 
  <p>(Skip Unless...)&nbsp;The likely errors are "404 File Not Found" and "500 Internal Server Error". Read "<a href="http://www.ntu.edu.sg/home/ehchua/programming/howto/Tomcat_HowTo.html#TomcatDebug" rel="nofollow">How to debug</a>" Section.</p> 
  <p>(Optional) Inspecting HTTP Request and Response Messages</p> 
  <p>When you enter a URL (e.g.,&nbsp;<code>http://localhost:9999/hello/sayhello</code>) on a web browser, an HTTP GET&nbsp;<em>request message</em>&nbsp;is sent to the server; and the server returns a&nbsp;<em>response message</em>&nbsp;for display on the web browser. You can inspect the request and response messages via Web browser's Developer Tool.</p> 
  <p>For&nbsp;<strong>Firefox/Chrome</strong>, press F12 (called F12 debugger) to enable "Web Console" or "Developer Tool". Choose "Console" or "Network" pane. Enter URL&nbsp;<code>http://localhost:9999/hello/sayhello</code>&nbsp;(or refresh). Enable "Net" (not in Gray). Expand the link&nbsp;<code>http://localhost:9999/hello/sayhello</code>. A HTTP message consists of a header and a body. Inspect the request header and body; as well as the response header and body.</p> 
  <p>The request message&nbsp;<em>header</em>&nbsp;is as follows:</p> 
  <pre>
GET http://localhost:9999/hello/sayhello HTTP/1.1
Host: localhost:9999
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding: gzip, deflate
Accept-Language: en-US,en;q=0.5
Cache-Control:max-age=0
Connection: keep-alive
Upgrade-Insecure-Requests: 1
User-Agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:52.0) Gecko/20100101 Firefox/52.0</pre> 
  <p>For this request, there is no request message body.</p> 
  <p>The response message&nbsp;<em>header&nbsp;</em>is as follows:</p> 
  <pre>
HTTP/1.1 200 OK
Date: xxx, xx xxx xxxx xx:xx:xx xxx
Content-Length: 286
Content-Type: text/html;charset=ISO-8859-1</pre> 
  <p>The response message&nbsp;<em>body</em>&nbsp;is as follows:</p> 
  <pre>
&lt;html&gt;
&lt;head&gt;&lt;title&gt;Hello, World&lt;/title&gt;&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Hello, world!&lt;/h1&gt;
&lt;p&gt;Request URI: /hello/sayhello&lt;/p&gt;
&lt;p&gt;Protocol: HTTP/1.1&lt;/p&gt;
&lt;p&gt;PathInfo: null&lt;/p&gt;
&lt;p&gt;Remote Address: 0:0:0:0:0:0:0:1&lt;/p&gt;
&lt;p&gt;A Random Number: &lt;strong&gt;0.4480280769255568&lt;/strong&gt;&lt;/p&gt;
&lt;/body&gt;&lt;/html&gt;</pre> 
  <p>2.8&nbsp;&nbsp;STEP 7: Write a Database Servlet<a id="zz-2.8"></a></p> 
  <p>This section assumes that you are familiar with "Java database programming" and "MySQL database server". Otherwise, read "<a href="http://www.ntu.edu.sg/home/ehchua/programming/java/JDBC_Basic.html" rel="nofollow">Java Database Program</a>" and "<a href="http://www.ntu.edu.sg/home/ehchua/programming/sql/MySQL_HowTo.html" rel="nofollow">How to Install MySQL and Get Started</a>", respectively.</p> 
  <p>Step 7(a) Setup a Database on MySQL (Already done in the MySQL exercises)</p> 
  <p>Start your MySQL server. Take note of the server's port number. I shall assume that the MySQL server is running on port&nbsp;<code>3306</code>, whereas the Tomcat is running on port&nbsp;<code>9999</code>.</p> 
  <pre>
// For Windows: I shall assume that MySQL is installed in "c:\myWebProject\mysql"
<strong>c:
cd \myWebProject\mysql\bin
mysqld --console</strong>
 
// For Mac OS
// Use graphical control at "System Preferences" -&gt; MySQL</pre> 
  <p>Start a MySQL client. I shall assume that there is a user called "<code>myuser</code>" with password "<code>xxxx</code>".</p> 
  <pre>
// For Windows: I shall assume that MySQL is installed in "c:\myWebProject\mysql"
<strong>c:
cd \myWebProject\mysql\bin
mysql -u myuser -p</strong>
 
// For Mac OS: I shall assume that MySQL is installed in "/usr/local/mysql"
<strong>cd /usr/local/mysql/bin</strong>
<strong>./mysql -u myuser -p</strong></pre> 
  <p>Run the following SQL statements to create a database called "<code>ebookshop</code>", with a table called "<code>books</code>" with 5 columns:&nbsp;<code>id</code>,&nbsp;<code>title</code>,&nbsp;<code>author</code>,&nbsp;<code>price</code>,&nbsp;<code>qty</code>.</p> 
  <pre>
create database if not exists <strong>ebookshop</strong>;

use ebookshop;

drop table if exists books;
create table <strong>books</strong> (
   <strong>id</strong>     int,
   <strong>title</strong>  varchar(50),
   <strong>author</strong> varchar(50),
   <strong>price</strong>  float,
   <strong>qty</strong>    int,
   primary key (id));

insert into books values (1001, 'Java for dummies', 'Tan Ah Teck', 11.11, 11);
insert into books values (1002, 'More Java for dummies', 'Tan Ah Teck', 22.22, 22);
insert into books values (1003, 'More Java for more dummies', 'Mohammad Ali', 33.33, 33);
insert into books values (1004, 'A Cup of Java', 'Kumar', 55.55, 55);
insert into books values (1005, 'A Teaspoon of Java', 'Kevin Jones', 66.66, 66);

select * from books;</pre> 
  <p>Step 7(b) Install MySQL JDBC Driver (Already done in the previous JDBC exercises)</p> 
  <p>You need to download MySQL JDBC driver if you have not done so. Read "<a href="http://www.ntu.edu.sg/home/ehchua/programming/java/JDBC_Basic.html#MySQLJDBCDriverInstall" rel="nofollow">Installing the MySQL JDBC Driver</a>".</p> 
  <p>Step 7(c) Copy the MySQL JDBC Drive to Tomcat's "lib"&nbsp;(IMPORTANT!!!)</p> 
  <p>Copy the MySQL JDBC Driver&nbsp;<strong><code>JAR</code></strong>&nbsp;file "<code>mysql-connector-java-8.0.{xx}.jar</code>" into Tomcat's&nbsp;<code><strong>lib</strong></code>&nbsp;directory, i.e., "<code>c:\myWebProject\tomcat\lib</code>" (for Windows) or "<code>~\myWebProject\tomcat\lib</code>" (Mac OS).</p> 
  <p>Step 7(d) Write a Client-side HTML Form</p> 
  <p>Let's write an HTML script to create a&nbsp;<em>query form</em>&nbsp;with 3 checkboxes and a submit button, as illustrated below.&nbsp; Save the HTML file as “<code>querybook.html</code>” in your application root directory “<code>&lt;TOMCAT_HOME&gt;\webapps\hello</code>”.</p> 
  <p><img alt="HtmlFormBookQuery.png" class="has" src="http://www.ntu.edu.sg/home/ehchua/programming/howto/images/HtmlFormBookQuery.png"></p> 
  <table>
   <tbody>
    <tr>
     <td> <pre>
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15</pre> </td> 
     <td> <pre>
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;Yet Another Bookshop&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;h2&gt;Yet Another Bookshop&lt;/h2&gt;
  &lt;form method="get" <strong>action="http://localhost:9999/hello/query"</strong>&gt;
    &lt;b&gt;Choose an author:&lt;/b&gt;
    &lt;input type="checkbox" <strong>name="author" value="Tan Ah Teck"</strong>&gt;Ah Teck
    &lt;input type="checkbox" <strong>name="author" value="Mohammad Ali"</strong>&gt;Ali
    &lt;input type="checkbox" <strong>name="author" value="Kumar"</strong>&gt;Kumar
    &lt;input type="submit" value="Search"&gt;
  &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</pre> </td> 
    </tr>
   </tbody>
  </table>
  <p>You can browse the HTML page by issuing the following URL:</p> 
  <pre>
http://localhost:9999/<strong>hello/querybook.html</strong></pre> 
  <p>Check a box (e.g., "Tan Ah Teck") and click the "Search" button. You are expected to get an error "404 File Not Found", as you have yet to write the server-side program.</p> 
  <p>But observe the URL in the browser's navigation bar, reproduced as follows:</p> 
  <pre>
http://localhost:9999/hello/query<strong>?author=Tan+Ah+Teck</strong></pre> 
  <p>The URL request consists of two part: a URL corresponding to the "<code>action</code>" attribute of the&nbsp;<code>&lt;form&gt;</code>&nbsp;tag, and the "name=value" pair extracted from the&nbsp;<code>&lt;input&gt;</code>&nbsp;tag, separated by a&nbsp;<code>'?'</code>. Take note that blanks are replaced by&nbsp;<code>'+'</code>&nbsp;(or&nbsp;<code>%20</code>), because blanks are not allowed in the URL.</p> 
  <p>If you check two boxes (e.g., "Tan Ah Teck" and "Mohammad Ali"), you will get this URL, which has two "name=value" pairs separated by an&nbsp;<code>'&amp;'</code>.</p> 
  <pre>
http://localhost:9999/hello/query<strong>?author=Tan+Ah+Teck&amp;author=Mohammad+Ali</strong></pre> 
  <p>Step 7(e) Write the Server-side Database Query Servlet</p> 
  <p>The next step is to write a Java servlet, which responses to the client’s request by querying the database and returns the query results.</p> 
  <table>
   <tbody>
    <tr>
     <td> <pre>
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63</pre> </td> 
     <td> <pre>
// To save as "&lt;TOMCAT_HOME&gt;\<strong>webapps\hello\WEB-INF\classes\QueryServlet.java</strong>".
import java.io.*;
import java.sql.*;
import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.annotation.*;

@WebServlet("<strong>/query</strong>")   // Configure the request URL for this servlet (Tomcat 7/Servlet 3.0 upwards)
public class <strong>QueryServlet</strong> extends HttpServlet {

   // The doGet() runs once per HTTP GET request to this servlet.
   @Override
   public void <strong>doGet</strong>(HttpServletRequest request, HttpServletResponse response)
               throws ServletException, IOException {
      // Set the MIME type for the response message
      response.setContentType("text/html");
      // Get a output writer to write the response message into the network socket
      PrintWriter out = response.getWriter();

      // Print an HTML page as the output of the query
      out.println("&lt;html&gt;");
      out.println("&lt;head&gt;&lt;title&gt;Query Response&lt;/title&gt;&lt;/head&gt;");
      out.println("&lt;body&gt;");

      try (
         // Step 1: Allocate a database 'Connection' object
         <strong>Connection conn = DriverManager.getConnection(
               "jdbc:mysql://localhost:3306/ebookshop?allowPublicKeyRetrieval=true&amp;useSSL=false&amp;serverTimezone=UTC",
               "myuser", "xxxx");</strong>   // For MySQL
               // The format is: "jdbc:mysql://hostname:port/databaseName", "username", "password"

         // Step 2: Allocate a 'Statement' object in the Connection
         <strong>Statement stmt = conn.createStatement();</strong>
      ) {
         // Step 3: Execute a SQL SELECT query
         <strong>String sqlStr = "select * from books where author = "
               + "'" + request.getParameter("author") + "'" </strong>  // Single-quote SQL string
               <strong>+ " and qty &gt; 0 order by price desc";</strong>

         out.println("&lt;h3&gt;Thank you for your query.&lt;/h3&gt;");
         out.println("&lt;p&gt;Your SQL statement is: " + sqlStr + "&lt;/p&gt;"); // Echo for debugging
         <strong>ResultSet rset = stmt.executeQuery(sqlStr);</strong>  // Send the query to the server

         // Step 4: Process the query result set
         int count = 0;
         while(<strong>rset.next()</strong>) {
            // Print a paragraph &lt;p&gt;...&lt;/p&gt; for each record
            out.println("&lt;p&gt;" + <strong>rset.getString("author")</strong>
                  + ", " + <strong>rset.getString("title")</strong>
                  + ", $" + <strong>rset.getDouble("price")</strong> + "&lt;/p&gt;");
            count++;
         }
         out.println("&lt;p&gt;==== " + count + " records found =====&lt;/p&gt;");
      } catch(Exception ex) {
         out.println("&lt;p&gt;Error: " + ex.getMessage() + "&lt;/p&gt;");
         out.println("&lt;p&gt;Check Tomcat console for details.&lt;/p&gt;");
         ex.printStackTrace();
      }  // Step 5: Close conn and stmt - Done automatically by try-with-resources (JDK 7)
 
      out.println("&lt;/body&gt;&lt;/html&gt;");
      out.close();
   }
}</pre> </td> 
    </tr>
   </tbody>
  </table>
  <p>Take note that in Line 8, we configure this&nbsp;<code>QueryServlet</code>&nbsp;to URL "<code>/query</code>" via annotation&nbsp;<code>@WebServlet("/query")</code>. In other words, the full URL to trigger this&nbsp;<code>QueryServlet</code>&nbsp;is&nbsp;<code>http://<em>ip_addr</em>:<em>port</em>/hello/query</code>, which corresponds to the "<code>action</code>" attribute of the&nbsp;<code>&lt;form&gt;</code>&nbsp;tag of the "<code>querybook.html</code>" written earlier.</p> 
  <p><img alt="TomcatWebappQueryServlet.png" class="has" src="http://www.ntu.edu.sg/home/ehchua/programming/howto/images/TomcatWebappQueryServlet.png"></p> 
  <p>Compile "<code>QueryServlet.java</code>" as follows:</p> 
  <pre>
// Windows
<strong>c:</strong>                                                     // Change drive
<strong>cd \myWebProject\tomcat\webapps\hello\WEB-INF\classes</strong>  // Change directory to Java Source directory
<strong>javac -cp .;c:\myWebProject\tomcat\lib\servlet-api.jar QueryServlet.java</strong>   // Compile

// Mac OS X
<strong>cd ~/myWebProject/tomcat/webapps/hello/WEB-INF/classes</strong>  // Change directory to Java Source directory
<strong>javac -cp .:$HOME/myWebProject/tomcat/lib/servlet-api.jar QueryServlet.java</strong>    // Compile
</pre> 
  <p>Use a "File Explorer", verify that "<code>QueryServlet.class</code>" was generated in the "<code>classes</code>" directory.</p> 
  <p>Step 7(f) Invoke the Servlet from the Client-Side Form</p> 
  <p>Issue the following URL to browse the HMTL form "<code>querybook.html</code>" that you have created earlier:</p> 
  <pre>
http://localhost:9999/hello/<strong>querybook.html</strong></pre> 
  <p>Select an author (e.g., "Tan Ah Teck") and click the submit button, which activates the following URL coded in the&nbsp;<code>&lt;form&gt;</code>'s "<code>action</code>" attribute, together with the name=value pair:</p> 
  <pre>
http://localhost:9999/hello/<strong>query?author=Tan+Ah+Teck</strong></pre> 
  <p>This URL "/<code>query</code>" triggers&nbsp;<code>QueryServlet</code>. The&nbsp;<code>QueryServlet</code>&nbsp;retrieves the name=value pair of "<code>author=Tan+Ah+Teck</code>". Inside the&nbsp;<code>QueryServlet</code>, the method&nbsp;<code>request.getParameter("author")</code>&nbsp;returns "<code>Tan Ah Teck</code>", which is inserted into the SQL&nbsp;<code>SELECT</code>&nbsp;command to query the database. The processed query result is then written to the client as an HTML document.</p> 
  <p><strong>(Skip Unless...)&nbsp;If you see a blank screen or incorrect output, look for error messages from the Tomcat console!!!</strong>&nbsp;Check "<a href="http://www.ntu.edu.sg/home/ehchua/programming/howto/Tomcat_HowTo.html#TomcatDebug" rel="nofollow">How to debug</a>" Database Servlet Errors.</p> 
  <p>2.9&nbsp;&nbsp;(Archive)(Prior to Tomcat 7) Deploying Servlets using&nbsp;web.xml<a id="zz-2.9"></a></p> 
  <p>Please skip this section. I keep it here just in case...</p> 
  <p>The annotation&nbsp;<code>@WebServlet("<em>url</em>")</code>&nbsp;for deploying servlet is supported from Tomcat 7/Servlet 3.0. Prior to Tomcat 7, you need to deploy servlets via&nbsp;<em>deployment descriptors</em>&nbsp;in the&nbsp;<code>web.xml</code>&nbsp;configuration file.</p> 
  <p>Create the following configuration file called "<code><strong>web.xml</strong></code>", and save it under "<strong><code>webapps\hello\WEB-INF</code></strong>" (i.e., "<code>&lt;TOMCAT_HOME&gt;\webapps\hello\WEB-INF\web.xml</code>").</p> 
  <table>
   <tbody>
    <tr>
     <td> <pre>
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21</pre> </td> 
     <td> <pre>
&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;web-app version="3.0"
  xmlns="http://java.sun.com/xml/ns/javaee"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"&gt;
 
   <strong>&lt;!-- To save as "hello\WEB-INF\web.xml" --&gt;</strong>
 
   &lt;servlet&gt;
      &lt;servlet-name&gt;<strong>HelloWorld</strong>&lt;/servlet-name&gt;
      &lt;servlet-class&gt;<strong>HelloServlet</strong>&lt;/servlet-class&gt;
   &lt;/servlet&gt;
 
   <strong>&lt;!-- Note: All &lt;servlet&gt; elements MUST be grouped together and
     placed IN FRONT of the &lt;servlet-mapping&gt; elements --&gt;</strong>
 
   &lt;servlet-mapping&gt;
      &lt;servlet-name&gt;<strong>HelloWorld</strong>&lt;/servlet-name&gt;
      &lt;url-pattern&gt;<strong>/sayhello</strong>&lt;/url-pattern&gt;
   &lt;/servlet-mapping&gt;
&lt;/web-app&gt;</pre> </td> 
    </tr>
   </tbody>
  </table>
  <p>In the above configuration, a servlet having a class file "<code>HelloServlet.class</code>" is mapped to request URL "<code>/sayhello</code>" (via an&nbsp;<em>arbitrary</em>&nbsp;<code>servlet-name</code>&nbsp;"<code>HelloWorld</code>"), under this web application "<code>hello</code>". In other words, the complete request URL for this servlet is "<code>http://<em>hostname</em>:<em>port</em><strong>/hello/sayhello</strong></code>".</p> 
  <p>This configuration file, saved under your webapp "<code>hello</code>", is applicable only to this particular webapp "<code>hello</code>".</p> 
  <p>Restart your Tomcat server to refresh the "<code>web.xml</code>" file.</p> 
  <p>Note:&nbsp;For EACH servlet, you need to write a pair of&nbsp;<code>&lt;servlet&gt;</code>&nbsp;and&nbsp;<code>&lt;servlet-mapping&gt;</code>&nbsp;elements with a common but arbitrary&nbsp;<code>&lt;servlet-name&gt;</code>. Take note that all the&nbsp;<code>&lt;servlet&gt;</code>&nbsp;elements MUST be grouped together and placed IN FRONT of the&nbsp;<code>&lt;servlet-mapping&gt;</code>&nbsp;elements.</p> 
  <p>&nbsp;</p> 
  <p>source：&nbsp;<a href="http://www.ntu.edu.sg/home/ehchua/programming/howto/Tomcat_HowTo.html" rel="nofollow">http://www.ntu.edu.sg/home/ehchua/programming/howto/Tomcat_HowTo.html</a></p> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
