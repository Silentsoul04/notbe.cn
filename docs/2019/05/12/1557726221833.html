<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>带权并查集经典习题：POJ-2492 A Bug's Life; POJ-1182 食物链；hihoCoder1515 分数调查 « NotBeCN</title>
  <meta name="description" content="          带权并查集讲解：https://blog.csdn.net/Floraqiu/article/details/79226320     POJ - 2492 A Bug's Life   POJ - 1182 食物链   hihoCoder1515 分数调查   拙见：带权并查集 就是为每个节...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2019/05/12/1557726221833.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">带权并查集经典习题：POJ-2492 A Bug's Life; POJ-1182 食物链；hihoCoder1515 分数调查</h1>
    <p class="post-meta">May 12, 2019</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">  
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <p>带权并查集讲解：<a href="https://blog.csdn.net/Floraqiu/article/details/79226320" rel="nofollow">https://blog.csdn.net/Floraqiu/article/details/79226320</a></p> 
  <hr>
  <p><a href="http://poj.org/problem?id=2492" rel="nofollow">POJ - 2492 A Bug's Life</a></p> 
  <p><a href="https://cn.vjudge.net/problem/14789/origin" rel="nofollow">POJ - 1182 食物链</a></p> 
  <p><a href="http://hihocoder.com/problemset/problem/1515" rel="nofollow">hihoCoder1515 分数调查</a></p> 
  <p>拙见：带权并查集 就是为每个节点增加一个value，表示这个点与根节点的某种关系，然后可以通过两个节点和根节点的关系来判断这两个节点的关系，核心就是维护这个value。</p> 
  <table>
   <tbody>
    <tr>
     <td> <h3 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%C2%A0A%20Bug's%20Life"><strong><span style="color:#0000ff;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<a href="https://cn.vjudge.net/problem/14789/origin" rel="nofollow">A Bug's Life</a></span></strong></h3> 
      <table align="center">
       <tbody>
        <tr>
         <td><strong>Time Limit:</strong>&nbsp;10000MS</td> 
         <td>&nbsp;</td> 
         <td><strong>Memory Limit:</strong>&nbsp;65536K</td> 
        </tr>
       </tbody>
      </table><p><strong><span style="color:#0000ff;">Description</span></strong></p> <p><strong>Background</strong>&nbsp;<br> Professor Hopper is researching the sexual behavior of a rare species of bugs. He assumes that they feature two different genders and that they only interact with bugs of the opposite gender. In his experiment, individual bugs and their interactions were easy to identify, because numbers were printed on their backs.&nbsp;<br><strong>Problem</strong>&nbsp;<br> Given a list of bug interactions, decide whether the experiment supports his assumption of two genders with no homosexual bugs or if it contains some bug interactions that falsify it.</p> <p><strong><span style="color:#0000ff;">Input</span></strong></p> <p>The first line of the input contains the number of scenarios. Each scenario starts with one line giving the number of bugs (at least one, and up to 2000) and the number of interactions (up to 1000000) separated by a single space. In the following lines, each interaction is given in the form of two distinct bug numbers separated by a single space. Bugs are numbered consecutively starting from one.</p> <p><strong><span style="color:#0000ff;">Output</span></strong></p> <p>The output for every scenario is a line containing "Scenario #i:", where i is the number of the scenario starting at 1, followed by one line saying either "No suspicious bugs found!" if the experiment is consistent with his assumption about the bugs' sexual behavior, or "Suspicious bugs found!" if Professor Hopper's assumption is definitely wrong.</p> <p><strong><span style="color:#0000ff;">Sample Input</span></strong></p> 
      <blockquote> 
       <pre class="has">
<code class="language-html">2
3 3
1 2
2 3
1 3
4 2
1 2
3 4</code></pre> 
      </blockquote> <p><strong><span style="color:#0000ff;">Sample Output</span></strong></p> 
      <blockquote> 
       <p>Scenario #1:<br> Suspicious bugs found!</p> 
       <p>&nbsp;</p> 
       <p>Scenario #2:<br> No suspicious bugs found!</p> 
      </blockquote> </td> 
    </tr>
   </tbody>
  </table>
  <p><strong><span style="color:#3399ea;">题意：</span></strong></p> 
  <p>n组输入，每组输入第一行给出n,m表示有n只昆虫依此编号1~n,后面m行输入。 后面m行，每行两个数x y，表示x和y有一腿，昆虫分雌雄，问有无同性恋</p> 
  <p><strong><span style="color:#3399ea;">思路:</span></strong></p> 
  <p>带权并查集，为每个节点（代表一只昆虫）增加一个value值表示此节点（昆虫）与根节点（还是个昆虫）的性别关系，0表示为同性，1表示异性。如果输入x y时（它俩有一腿）发现它俩在同一个集合内且所处节点value值相同，说明这俩时同性恋。</p> 
  <p><span style="color:#3399ea;"><strong>ACCode：</strong></span></p> 
  <pre class="has">
<code>#include &lt;iostream&gt;

using namespace std;

const int maxn = 1e6+5;
int f[maxn],sex[maxn];
void init(int n) 
{
	for(int i=1;i&lt;=n;i++) {
		f[i] = i;
		sex[i] = 0;
	}
}
int getf(int x)
{
	if(f[x] == x)	return x;
	int t = f[x];
	f[x] = getf(f[x]);
	sex[x] = (sex[x]+sex[t])%2; 
	return f[x];
}
void Merge(int x,int y)
{
	int fx = getf(x);
	int fy = getf(y);
	if(fx != fy) {
		f[fy] = fx;
		sex[fy] = (sex[x]+sex[y]+1)%2;
	}
}

bool check(int x,int y)	// 判断是否可以确定为同性 
{
	int fx = getf(x);
	int fy = getf(y);
	if(fx == fy) {
		if(sex[x] == sex[y])
			return true;
	}
	return false;
}
int main()
{
	int T,n,m,Case=1;
	scanf("%d",&amp;T);
	while(T--) {
		scanf("%d%d",&amp;n,&amp;m);
		init(n);
		bool flag = false;
		int x,y;
		for(int i=1;i&lt;=m;i++) {
			scanf("%d%d",&amp;x,&amp;y);
			if(check(x,y)) {
				flag = true;
			}
			else
				Merge(x,y);
		}
		if(flag)
			printf("Scenario #%d:\nSuspicious bugs found!\n",Case++);
		else 
			printf("Scenario #%d:\nNo suspicious bugs found!\n",Case++);	
		if(T!=0)
			printf("\n"); 
	}
	return 0;
}</code></pre> 
  <table>
   <tbody>
    <tr>
     <td> <h3><strong><span style="color:#0000ff;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="https://cn.vjudge.net/problem/14789/origin" rel="nofollow">食物链</a></span></strong></h3> 
      <table align="center">
       <tbody>
        <tr>
         <td><strong>Time Limit:</strong>&nbsp;1000MS</td> 
         <td>&nbsp;</td> 
         <td><strong>Memory Limit:</strong>&nbsp;10000K</td> 
        </tr>
       </tbody>
      </table><p><strong><span style="color:#0000ff;">Description</span></strong></p> <p>动物王国中有三类动物A,B,C，这三类动物的食物链构成了有趣的环形。A吃B， B吃C，C吃A。&nbsp;<br> 现有N个动物，以1－N编号。每个动物都是A,B,C中的一种，但是我们并不知道它到底是哪一种。&nbsp;<br> 有人用两种说法对这N个动物所构成的食物链关系进行描述：&nbsp;<br> 第一种说法是"1 X Y"，表示X和Y是同类。&nbsp;<br> 第二种说法是"2 X Y"，表示X吃Y。&nbsp;<br> 此人对N个动物，用上述两种说法，一句接一句地说出K句话，这K句话有的是真的，有的是假的。当一句话满足下列三条之一时，这句话就是假话，否则就是真话。&nbsp;<br> 1） 当前的话与前面的某些真的话冲突，就是假话；&nbsp;<br> 2） 当前的话中X或Y比N大，就是假话；&nbsp;<br> 3） 当前的话表示X吃X，就是假话。&nbsp;<br> 你的任务是根据给定的N（1 &lt;= N &lt;= 50,000）和K句话（0 &lt;= K &lt;= 100,000），输出假话的总数。&nbsp;</p> <p><strong><span style="color:#0000ff;">Input</span></strong></p> <p>第一行是两个整数N和K，以一个空格分隔。&nbsp;<br> 以下K行每行是三个正整数 D，X，Y，两数之间用一个空格隔开，其中D表示说法的种类。&nbsp;<br> 若D=1，则表示X和Y是同类。&nbsp;<br> 若D=2，则表示X吃Y。</p> <p><strong><span style="color:#0000ff;">Output</span></strong></p> <p>只有一个整数，表示假话的数目。</p> <p><strong><span style="color:#0000ff;">Sample Input</span></strong></p> 
      <blockquote> 
       <p>100 7<br> 1 101 1&nbsp;<br> 2 1 2<br> 2 2 3&nbsp;<br> 2 3 3&nbsp;<br> 1 1 3&nbsp;<br> 2 3 1&nbsp;<br> 1 5 5</p> 
      </blockquote> <p><strong><span style="color:#0000ff;">Sample Output</span></strong></p> <pre class="has">
<code class="language-sio">3</code></pre> <p>&nbsp;</p> </td> 
    </tr>
   </tbody>
  </table>
  <p>&nbsp;</p> 
  <p><strong><span style="color:#3399ea;">解题思路：</span></strong></p> 
  <p>为每个节点（表示一种动物）增加一个value，表示其与其根节点的关系。0表示与根节点同类，1表示被根节点吃，2表示吃根节点（好像是这个顺序，或者换一下~）。每次输入一句话1/2 x y 的时候，判断x y是否在同一个集合，如果不是，就把它俩加到同一集合并更新value；如果在同一集合，则可以根据他俩和共同根节点的关系判断他俩的关系，如果得出的关系和输入给出的相同，则为真话，不同，则为假话。</p> 
  <p><span style="color:#3399ea;"><strong>ACCode：</strong></span></p> 
  <pre class="has">
<code class="language-cpp">#include &lt;iostream&gt;

using namespace std;
const int maxn = 5e4+5;
int f[maxn],rel[maxn],ans,n;
void init()
{
	for(int i=1;i&lt;=n;i++) {
		f[i] = i;
		rel[i] = 0;
	}	
	ans = 0;
}
int getf(int x)
{
	if(f[x] == x)	return x;
	// 路径压缩
	int t = f[x];
	f[x] =  getf(f[x]);
	rel[x] = (rel[x]+rel[t])%3;
	return f[x];
}
void Merge(int r,int x,int y)
{
	int fx = getf(x);
	int fy = getf(y);
	if(fx != fy) {
		f[fx] = fy;
		rel[fx] = (rel[y]-rel[x]+r+3)%3; 
	}
}
bool check(int r,int x,int y)
{
	if(x &gt; n || y &gt; n)
		return false;
	if(r == 1 &amp;&amp; x == y)
		return false;
	if(getf(x) == getf(y)) 
		return r ==  ((rel[x]-rel[y])%3+3)%3;
	return true;
}
// 只要出现了关于x和y的实话，就把x和y加到一个集合中，存储他们各自和根节点的关系
// 下次判断的时候通过他俩和根节点的关系从而推出他俩的关系 ps:else二维数组你开的开？ 
int main()
{

	int k;
	scanf("%d%d",&amp;n,&amp;k);
	init();
	for(int i=1;i&lt;=k;i++) {
		int t1,t2,t3;
		scanf("%d%d%d",&amp;t1,&amp;t2,&amp;t3);
		t1--;	//关系表示变为自定义的关系表示 
		if(check(t1,t2,t3))
			Merge(t1,t2,t3);
		else 
			ans++;
	}
	printf("%d\n",ans);
	return 0;
}</code></pre> 
  <h3>#1515 : 分数调查</h3> 
  <p>时间限制:10000ms</p> 
  <p>单点时限:1000ms</p> 
  <p>内存限制:256MB</p> 
  <h3>描述</h3> 
  <p>小Hi的学校总共有N名学生，编号1-N。学校刚刚进行了一场全校的古诗文水平测验。 &nbsp;</p> 
  <p>学校没有公布测验的成绩，所以小Hi只能得到一些小道消息，例如X号同学的分数比Y号同学的分数高S分。 &nbsp;</p> 
  <p>小Hi想知道利用这些消息，能不能判断出某两位同学之间的分数高低？</p> 
  <h3>输入</h3> 
  <p>第一行包含三个整数N, M和Q。N表示学生总数，M表示小Hi知道消息的总数，Q表示小Hi想询问的数量。 &nbsp;</p> 
  <p>以下M行每行三个整数，X, Y和S。表示X号同学的分数比Y号同学的分数高S分。 &nbsp;</p> 
  <p>以下Q行每行两个整数，X和Y。表示小Hi想知道X号同学的分数比Y号同学的分数高几分。 &nbsp;</p> 
  <p>对于50%的数据，1 &lt;= N, M, Q &lt;= 1000 &nbsp;</p> 
  <p>对于100%的数据，1 &lt;= N, M, Q&lt;= 100000 1 &lt;= X, Y &lt;= N -1000 &lt;= S &lt;= 1000</p> 
  <p>数据保证没有矛盾。</p> 
  <h3>输出</h3> 
  <p>对于每个询问，如果不能判断出X比Y高几分输出-1。否则输出X比Y高的分数。</p> 
  <p>样例输入</p> 
  <pre class="has">
<code class="language-html">10 5 3  
1 2 10  
2 3 10  
4 5 -10  
5 6 -10  
2 5 10  
1 10  
1 5  
3 5</code></pre> 
  <p>样例输出</p> 
  <pre class="has">
<code class="language-html">-1  
20  
0</code></pre> 
  <p><span style="color:#3399ea;"><strong>思路：</strong></span></p> 
  <p>value表示与根节点的分数差，</p> 
  <p><span style="color:#3399ea;"><strong>ACCode：</strong></span></p> 
  <pre class="has">
<code class="language-cpp">#include &lt;iostream&gt;

using namespace std;
const int maxn = 1e5+5;

int f[maxn],dis[maxn];	//与根节点的分数差
void init(int n)
{
	for(int i=1;i&lt;=n;i++) {
		f[i] = i;
		dis[i] = 0;
	}
}
int getf(int x)
{
	if(f[x] == x)	return x;
	int t = f[x];
	f[x] = getf(f[x]);
	dis[x] = dis[x]+dis[t];
	return f[x];
}
void Merge(int x,int y,int d)
{
	int fx = getf(x);
	int fy = getf(y);
	if(fx != fy) {
		f[fy] = fx;
		dis[fy] = d+dis[x]-dis[y];
	}
}
int main()
{
	int n,m,q;
	scanf("%d%d%d",&amp;n,&amp;m,&amp;q);
	init(n);	
	int x,y,d;
	for(int i=1;i&lt;=m;i++) {
		scanf("%d%d%d",&amp;x,&amp;y,&amp;d);
		Merge(x,y,d);
	}
	for(int i=1;i&lt;=q;i++){
		scanf("%d%d",&amp;x,&amp;y);
		if(getf(x) == getf(y))
			printf("%d\n",dis[y]-dis[x]);
		else
			printf("-1\n");
	}
	return 0; 
} </code></pre> 
  <p>&nbsp;</p> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
