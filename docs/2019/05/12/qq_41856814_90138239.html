<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>shell脚本执行方式，更方便更快捷。 « NotBeCN</title>
  <meta name="description" content="         在进行linux测试时编写脚本是必不可少的。最近经常使用Linux，感觉太频繁地敲击键盘有些累了，于是想到了Shell脚本。可以把太多的命令写成一个脚本，这样每次执行一遍&nbsp; shell文件，就可以省去了敲击键盘的时间。于是在网上搜了一些有关Linux下脚本编程的内容。   图为运行参考...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2019/05/12/qq_41856814_90138239.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">shell脚本执行方式，更方便更快捷。</h1>
    <p class="post-meta">May 12, 2019</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <h2>在进行linux测试时编写脚本是必不可少的。最近经常使用Linux，感觉太频繁地敲击键盘有些累了，于是想到了Shell脚本。可以把太多的命令写成一个脚本，这样每次执行一遍&nbsp; shell文件，就可以省去了敲击键盘的时间。于是在网上搜了一些有关Linux下脚本编程的内容。</h2> 
  <h3>图为运行参考示例：</h3> 
  <p><img alt="" class="has" height="183" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190512110638677.png" width="1118"></p> 
  <p><img alt="" class="has" height="206" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190512110742996.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxODU2ODE0,size_16,color_FFFFFF,t_70" width="862"></p> 
  <p>可以将运行代码一行行写在配置文件脚本中</p> 
  <p><img alt="" class="has" height="434" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190512110417759.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxODU2ODE0,size_16,color_FFFFFF,t_70" width="1095"></p> 
  <p>更改其属性&nbsp;</p> 
  <p><img alt="" class="has" height="146" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/2019051211054935.png" width="1064"></p> 
  <p>&nbsp;</p> 
  <p>运行shell脚本程序</p> 
  <p>&nbsp;</p> 
  <p>&nbsp;</p> 
  <h1><strong>Shell命令和流程控制</strong></h1> 
  <p>在shell脚本中可以使用三类命令：</p> 
  <p><strong>1)Unix 命令:</strong></p> 
  <p>虽然在shell脚本中可以使用任意的unix命令，但是还是由一些相对更常用的命令。这些命令通常是用来进行文件和文字操作的。</p> 
  <p>常用命令语法及功能</p> 
  <ul>
   <li>echo "some text": 将文字内容打印在屏幕上</li> 
   <li>ls: 文件列表</li> 
   <li>wc –l filewc -w filewc -c file:</li> 
   <li>计算文件行数计算文件中的单词数计算文件中的字符数</li> 
   <li>cp sourcefile destfile: 文件拷贝</li> 
   <li>mv oldname newname : 重命名文件或移动文件</li> 
   <li>rm file: 删除文件</li> 
   <li>grep ''pattern'' file: 在文件内搜索字符串比如：grep</li> 
   <li>''searchstring'' file.txt</li> 
   <li>cut -b colnum file:指定欲显示的文件内容范围，并将它们输出到标准输出设备比如：输出每行第5个到第9个字符cut -b5-9 file.txt千万不要和cat命令混淆，这是两个完全不同的命令</li> 
   <li>cat file.txt: 输出文件内容到标准输出设备（屏幕）上</li> 
   <li>file somefile: 得到文件类型</li> 
   <li>read var: 提示用户输入，并将输入赋值给变量</li> 
   <li>sort file.txt: 对file.txt文件中的行进行排序</li> 
   <li>uniq: 删除文本文件中出现的行列比如： sort file.txt | uniq</li> 
   <li>expr: 进行数学运算Example: add 2 and 3expr 2 "+" 3</li> 
   <li>find: 搜索文件比如：根据文件名搜索find . -name filename -print</li> 
   <li>tee: 将数据输出到标准输出设备(屏幕) 和文件比如：somecommand | tee&nbsp; outfile</li> 
   <li>basename file: 返回不包含路径的文件名比如： basename /bin/tux将返回 tux</li> 
   <li>dirname file: 返回文件所在路径比如：dirname /bin/tux将返回/bin</li> 
   <li>head file: 打印文本文件开头几行</li> 
   <li>tail file : 打印文本文件末尾几行</li> 
  </ul>
  <p>sed: Sed是一个基本的查找替换程序。可以从标准输入（比如命令管道）读入文本，并将结果输出到标准输出（屏幕）。该命令采用正则表达式（见参考）进行搜索。不要和shell中的通配符相混淆。比如：将linuxfocus 替换为 LinuxFocus ：cat text.file | sed ''s/linuxfocus/LinuxFocus/'' &gt; newtext.fileawk: awk</p> 
  <p>用来从文本文件中提取字段。缺省地，字段分割符是空格，可以使用-F指定其他分割符。cat&nbsp;&nbsp; file.txt | awk -F, ''{print $1 "," $3&nbsp; }''这里我们使用，作为字段分割符，同时打印第一个和第三个字段。如果该文件内容如下： AdamBor, 34, IndiaKerry Miller, 22, USA命令输出结果为：AdamBor, IndiaKerry Miller, USA</p> 
  <p><strong>2) 概念: 管道, 重定向和 backtick</strong></p> 
  <p>这些不是系统命令，但是他们真的很重要。管道 (|) 将一个命令的输出作为另外一个命令的输入。</p> 
  <p><code>grep "hello" file.txt | wc -l</code></p> 
  <p>在file.txt中搜索包含有”hello”的行并计算其行数。</p> 
  <p>在这里grep命令的输出作为wc命令的输入。当然您可以使用多个命令。</p> 
  <p>重定向：将命令的结果输出到文件，而不是标准输出（屏幕）。</p> 
  <p>&gt;&nbsp; 写入文件并覆盖旧文件</p> 
  <p>&gt;&gt; 加到文件的尾部，保留旧文件内容。</p> 
  <p>反短斜线</p> 
  <p>使用反短斜线可以将一个命令的输出作为另外一个命令的一个命令行参数。</p> 
  <p>命令： find . -mtime -1 -type f -print 用来查找过去24小时（-mtime –2则表示过去48小时）内修改过的文件。如果您想将所有查找到的文件打一个包，则可以使用以下脚本：</p> 
  <pre>
#!/bin/sh
# The ticks are backticks (`) not normal quotes (''):
tar -zcvf lastmod.tar.gz `find . -mtime -1 -type f 
-print`</pre> 
  <p><strong>3) 流程控制</strong></p> 
  <p>"if" 表达式 如果条件为真则执行then后面的部分：</p> 
  <blockquote> 
   <p>&nbsp;if ....; then<br> ....<br> elif ....; then<br> ....<br> &nbsp;else<br> &nbsp;....<br> &nbsp;fi</p> 
  </blockquote> 
  <p>大多数情况下，可以使用测试命令来对条件进行测试。比如可以比较字符串、判断文件是否存在及是否可读等等…通常用" [ ] "来表示条件测试。注意这里的空格很重要。要确保方括号的空格。</p> 
  <ul>
   <li>&nbsp;[ -f "somefile" ] ：判断是否是一个文件</li> 
   <li>&nbsp;[ -x "/bin/ls" ] ：判断/bin/ls是否存在并有可执行权限</li> 
   <li>&nbsp;[ -n "$var" ] ：判断$var变量是否有值</li> 
   <li>&nbsp;[ "$a" = "$b" ] ：判断$a和$b是否相等</li> 
  </ul>
  <p>5. 执行脚本 Linux下的sh文件默认是有执行权限的。我们可以用命令：<code>ls -l file_name</code>来查看用户对文件的权限。如果没有执行权限，可以执行以下命令添加：<code>chmod +x file_name&nbsp;</code>。然后可以通过运行：sh XX.sh这样的命令来运行脚本。当然不同的系统可能不完全相同，需要根据实际情况来。例如有的Linux下是./XX.sh就可以运行。</p> 
  <p>概括地来说，shell对shell脚本的调用可以采用3种方式：</p> 
  <p>（1）一种是将文件名作为shell命令的参数，其调用格式为：</p> 
  <pre>
$ Bash script_file</pre> 
  <p>当要被执行的脚本文件没有可执行权限时，只能使用这种调用方式。</p> 
  <p>（2）另一种调用的方法是先将脚本文件的访问权限更改为可执行，以便该文件可以作为执行文件调用。</p> 
  <p>具体的方法是：<code>$chmod +x&nbsp; script_file</code></p> 
  <pre>
$PATH=$PATH:$PWD
$script_file</pre> 
  <p>（3）当执行一个脚本文件时，Shell就产生了一个Shell(即一个子进程)去执行文件中的命令。因此，脚本文件的变量值不能传递到当期Shell(即父进程)。为了使脚本文件中的变量值传递到当前Shell，必须在命令文件名前面加“.”。即：</p> 
  <pre>
$./script_file</pre> 
  <p>“.”命令的功能是在当前shell中执行脚本文件中的命令，而不是产生一个子shell执行命令文件中的命令。</p> 
  <p>&nbsp;</p> 
  <p>更多参考：</p> 
  <p><a href="https://www.jb51.net/article/156952.htm" rel="nofollow">https://www.jb51.net/article/156952.htm</a></p> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
