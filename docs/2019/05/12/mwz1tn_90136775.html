<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>EDA数字密码锁 « NotBeCN</title>
  <meta name="description" content="         摘要：随着数字技术飞速发展，具有防盗报警功能的数字密码锁代替安全性差的机械锁已成为必然的趋势。数字密码锁不但可以用来保管物品，还可以防止越权操作，例如银行自动柜员机、自动售货机、门卡系统等。基于EDA技术设计的电子密码锁，以其价格便宜、安全可靠、使用方便，受到了人们的普遍关注。而以现场可编程逻辑...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2019/05/12/mwz1tn_90136775.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">EDA数字密码锁</h1>
    <p class="post-meta">May 12, 2019</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <p style="margin-left:0cm;"><strong>摘要</strong>：随着数字技术飞速发展，具有防盗报警功能的数字密码锁代替安全性差的机械锁已成为必然的趋势。数字密码锁不但可以用来保管物品，还可以防止越权操作，例如银行自动柜员机、自动售货机、门卡系统等。基于EDA技术设计的电子密码锁，以其价格便宜、安全可靠、使用方便，受到了人们的普遍关注。而以现场可编程逻辑器件(FPGA)为设计载体，以硬件描述语言(VHDE)为主要表达方式，以QuartusⅡ开发软件和KHF-3型CPLD/FPGA实验开发系统为设计工具设计的电子密码锁，由于其能够实现数码输入、数码清除、密码解除、密码更改、密码上锁和密码解除等功能，因此，能够满足社会对安全防盗的要求。</p> 
  <p style="margin-left:0cm;">&nbsp; ◆<strong>关键词</strong><strong>：</strong>FPGA；VHDL；数字密码锁；原理图；VHDL源程序</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <ol>
   <li>设计题目：</li> 
  </ol>
  <p style="margin-left:0cm;">数字密码锁</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <ol>
   <li>设计要求：</li> 
  </ol>
  <p style="margin-left:0cm;">设计一个数字密码锁，用户可输入4位的二进制数，连续3次不正确则报警。开锁密码可手动预置，并可进行修改密码，取消报警。</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <ol>
   <li>设计系统的功能要求与分析</li> 
  </ol>
  <p style="margin-left:0cm;">3.1系统的功能要求</p> 
  <p style="margin-left:0cm;">本次的设计主要是采用先进的EDA技术，利用Quartus II工作平台和VHDL设计语言的设计。为了更好地满足实际的需要，将4位二进制改为3位十进制。根据系统设计的要求，可以用自顶向下的设计思路设计一个简易的数字密码锁，该锁应在收到3位与规定码相符的十进制数码时打开，使相应的指示灯点亮；若收到的代码与规定的不符或者开锁程序有误，表示错误的指示灯点亮。由于设计的这个密码锁密码位数较少，所以必须给操作的人严格的次数限制。若连续三次没有输对，则表示操作的人不是该锁的使用者。此时报警铃长响，这时只有锁的使用者才能关取消报警。由于开锁密码可手动预置，故可在输入端加多一个按键，在开锁状态下按下此按键后可以进行密码设置和修改密码。</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <p style="margin-left:0cm;">3.2系统的功能分析</p> 
  <ol>
   <li>系统接通电源后处于开锁状态，此时可以通过手动预置三位十进制数密码，再按上锁键将密码锁上锁，通过指示灯显示出上锁状态。</li> 
   <li>开锁密码是3位十进制数，可以通过系统预先设定。开锁时输入密码不足三位或超过三位，又或者密码错误均不能开锁。</li> 
  </ol>
  <p style="margin-left:0cm;">(3)开锁程序由设计者确定，用户必须严格执行所规定的程序，方可开锁。</p> 
  <p style="margin-left:0cm;">(4)开锁密码和程序正确，表示密码锁上锁的指示灯熄灭，此时处于开锁状态。</p> 
  <p style="margin-left:0cm;">(5)系统允许用户在开锁过程中有3次错误，连续输入密码错误或三次以后，报警灯亮而上锁灯也依然在亮，此时必须通过取消报警键解除报警才能进行其他操作。</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <ol>
   <li>设计思路分析与方案选择</li> 
  </ol>
  <p style="margin-left:0cm;">4.1方案选择：</p> 
  <p style="margin-left:0cm;">要设计一个数字密码锁，可以有多种实现方法，下面列出其中的两种：</p> 
  <p style="margin-left:0cm;">方案一：采用键盘扫描的方法扫描键盘输入信号，扫描信号变化的顺序依次为1110—1101—1011—0111—1110……，周而复始。键盘一个数字输入键，每次扫描产生新的按键数据，即采取串行左移输入数据。设计系统由密码锁输入模块、密码锁控制模块和错误报警模块三个部分组成。</p> 
  <p style="margin-left:0cm;">方案二：直接采用并行输入数据，每一个按键代表一个十进制数。此系统则由密码锁控制模块、计数器I模块、计数器II模块、寄存器模块、比较器模块以及编码器模块六个部分组成。其中，控制模块是核心。</p> 
  <p style="margin-left:0cm;">经过比较，虽然方案一结构模块少，但程序过于复杂，难于理解和编译，而方案二虽然结构模块多了点，但易于读懂，而且操作过程简单，不易出现错误，故采用方案二设计本系统。</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <p style="margin-left:0cm;">4.2设计方案分析</p> 
  <p style="margin-left:0cm;">根据系统设计要求，系统设计采用自顶向下的设计方法。顶层设计采用原理图设计方式，系统整体组装设计结构图如图（1）所示，它由密码锁控制模块、计数器I模块、计数器II模块、寄存器模块、比较器模块以及编码器模块六个部分组成。</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <table>
   <tbody>
    <tr>
     <td><br> eda 数字密码锁 <p><strong>摘要</strong>：随着数字技术飞速发展，具有防盗报警功能的数字密码锁代替安全性差的机械锁已成为必然的趋势。数字密码锁不但可以用来保管物品，还可以防止越权操作，例如银行自动柜员机、自动售货机、门卡系统等。基于 EDA 技术设计的电子密码锁，以其价格便宜、安全可靠、使用方便，受到了人们的普遍关注。而以现场可编程逻辑器件 (FPGA) 为设计载体，以硬件描述语言 (VHDE) 为主要表达方式，以 QuartusⅡ 开发软件和 KHF-3 型 CPLD/FPGA 实验开发系统为设计工具设计的电子密码锁，由于其能够实现数码输入、数码清除、密码解除、密码更改、密码上锁和密码解除等功能，因此，能够满足社会对安全防盗的要求。</p> <p>◆<strong>关键词</strong><strong>：</strong>FPGA；VHDL；数字密码锁；原理图；VHDL 源程序</p> 
      <ol>
       <li>设计题目：</li> 
      </ol><p>数字密码锁</p> 
      <ol>
       <li>设计要求：</li> 
      </ol><p>设计一个数字密码锁，用户可输入 4 位的二进制数，连续 3 次不正确则报警。开锁密码可手动预置，并可进行修改密码，取消报警。</p> 
      <ol>
       <li>设计系统的功能要求与分析</li> 
      </ol><p>3.1 系统的功能要求</p> <p>本次的设计主要是采用先进的 EDA 技术，利用 Quartus II 工作平台和 VHDL 设计语言的设计。为了更好地满足实际的需要，将 4 位二进制改为 3 位十进制。根据系统设计的要求，可以用自顶向下的设计思路设计一个简易的数字密码锁，该锁应在收到 3 位与规定码相符的十进制数码时打开，使相应的指示灯点亮；若收到的代码与规定的不符或者开锁程序有误，表示错误的指示灯点亮。由于设计的这个密码锁密码位数较少，所以必须给操作的人严格的次数限制。若连续三次没有输对，则表示操作的人不是该锁的使用者。此时报警铃长响，这时只有锁的使用者才能关取消报警。由于开锁密码可手动预置，故可在输入端加多一个按键，在开锁状态下按下此按键后可以进行密码设置和修改密码。</p> <p>3.2 系统的功能分析</p> 
      <ol>
       <li>系统接通电源后处于开锁状态，此时可以通过手动预置三位十进制数密码，再按上锁键将密码锁上锁，通过指示灯显示出上锁状态。</li> 
      </ol>
      <ol>
       <li>开锁密码是 3 位十进制数，可以通过系统预先设定。开锁时输入密码不足三位或超过三位，又或者密码错误均不能开锁。</li> 
      </ol><p>(3) 开锁程序由设计者确定，用户必须严格执行所规定的程序，方可开锁。</p> <p>(4) 开锁密码和程序正确，表示密码锁上锁的指示灯熄灭，此时处于开锁状态。</p> <p>(5) 系统允许用户在开锁过程中有 3 次错误，连续输入密码错误或三次以后，报警灯亮而上锁灯也依然在亮，此时必须通过取消报警键解除报警才能进行其他操作。</p> 
      <ol>
       <li>设计思路分析与方案选择</li> 
      </ol><p>4.1 方案选择：</p> <p>要设计一个数字密码锁，可以有多种实现方法，下面列出其中的两种：</p> <p>方案一：采用键盘扫描的方法扫描键盘输入信号，扫描信号变化的顺序依次为 1110—1101—1011—0111—1110……，周而复始。键盘一个数字输入键，每次扫描产生新的按键数据，即采取串行左移输入数据。设计系统由密码锁输入模块、密码锁控制模块和错误报警模块三个部分组成。</p> <p>方案二：直接采用并行输入数据，每一个按键代表一个十进制数。此系统则由密码锁控制模块、计数器 I 模块、计数器 II 模块、寄存器模块、比较器模块以及编码器模块六个部分组成。其中，控制模块是核心。</p> <p>经过比较，虽然方案一结构模块少，但程序过于复杂，难于理解和编译，而方案二虽然结构模块多了点，但易于读懂，而且操作过程简单，不易出现错误，故采用方案二设计本系统。</p> <p>4.2 设计方案分析</p> <p>根据系统设计要求，系统设计采用自顶向下的设计方法。顶层设计采用原理图设计方式，系统整体组装设计结构图如图（1）所示，它由密码锁控制模块、计数器 I 模块、计数器 II 模块、寄存器模块、比较器模块以及编码器模块六个部分组成。</p> <p>图（1）系统整体组装设计结构图</p> <p>4.2.1 编码器部分</p> <p>其共有三个输入和两个输出端口，如图（2）</p> <p>&nbsp;</p> <p><img alt="" class="has" src="https://uploader.shimo.im/f/EzGte4RQX8gIQIyr!thumbnail"></p> <p>图（2）编码器部分</p> <p>在时钟脉冲信号的作用下，当 “en=1” 时，表示此时可以输入三个十进制数码，分别对应关系如下： "0000000001"=&gt;"0000";</p> <p>"0000000010"=&gt;"0001";</p> <p>"0000000100"=&gt;"0010";</p> <p>"0000001000"=&gt;"0011";</p> <p>"0000010000"=&gt;"0100";</p> <p>"0000100000"=&gt;"0101";</p> <p>"0001000000"=&gt;"0110";</p> <p>"0010000000"=&gt;"0111";</p> <p>"0100000000"=&gt;"1000";</p> <p>"1000000000"=&gt;c"1001"。</p> <p>即当 “key_in = 左边数” 时，“code_out = 右边数”。而当输入的数码等于系统设置密码时，“ps_i=1”，否则“ps_i=0”。</p> <p>4.2.2 计数器 I 部分</p> <p>其部分有两个输入端和两个输出端，如图（3）</p> <p>&nbsp;</p> <p><img alt="" class="has" src="https://uploader.shimo.im/f/ItuID6KMecIaI8yW!thumbnail"></p> <p>图（3）计数器 I 部分</p> <p>其脉冲信号为编码器的 “code_out” 的输出数值，|“clr”是清零端，当 “clr=1” 时“cout=0”；当 “clr=0” 时，“cnt=cnt+'1'”，若 “cnt=10” 时，再遇到下一个脉冲信号后则变成 “11”，并使“cout=1”，最后将“cnt” 的值赋给 “addr” 输出。</p> <p>4.2.3 寄存器部分</p> <p>此部分有 5 个输入端和一个输出端，如图（4）</p> <p>&nbsp;</p> <p><img alt="" class="has" src="https://uploader.shimo.im/f/eeVNoklHSNk8J726!thumbnail"></p> <p>图（4）寄存器部分</p> <p>寄存器主要用来储存输入的三位十进制数码，即密码。在时钟脉冲下降沿时若 “en=1”，则可以输入数据。此时，如果“addr” 为 when"01"=&gt;if reg_wr='1' then m0&lt;=data_in;else data_out&lt;=m0;when "10"=&gt;if reg_wr='1' then m1&lt;=data_in;else data_out&lt;=m1;when "11"=&gt;if reg_wr='1' then m2&lt;=data_in;else data_out&lt;=m2;when OTHERS=&gt;NULL。</p> <p>4.2.4 比较器部分</p> <p>此部分较为简单，其只有两个输入端和一个输出端，如图（5）</p> <p>&nbsp;</p> <p><img alt="" class="has" src="https://uploader.shimo.im/f/kU2Sdqeyo4wd2GWS!thumbnail"></p> <p>图（5）比较器部分</p> <p>当从编码器 “code_out” 端输出的数 a 与储存在寄存器中的数 b 相等时，c 端输出“1”，否则为“0”。</p> <p>4.2.5 计数器 II 部分</p> <p>此部分也只有两个输入端和一个输出端，如图（6）</p> <p>&nbsp;</p> <p><img alt="" class="has" src="https://uploader.shimo.im/f/HNK5ct3wUnEiYW7m!thumbnail"></p> <p>图（6）计数器&nbsp;II 部分</p> <p>其主要是用来计算连续输入错误的次数。当清零端 “clr=1” 时计数器&nbsp;II&nbsp;清零，“wro_count”自然也为零；当 “clr=0” 时，控制器的 “cnt_clk2” 端的输出信号作为此部分的脉冲信号，遇到上升沿时计数器加 1，计到 3 次时 “wro_count” 端输出“1”，否则为“0”。</p> <p>4.2.6 中心控制部分</p> <p>此部分是整个系统的核心部分，其管脚也甚多，共有 10 个输入端和 7 个输出端。如图（7）</p> <p>&nbsp;</p> <p><img alt="" class="has" src="https://uploader.shimo.im/f/zPlu36AAAZEYOTnC!thumbnail"></p> <p>图（7）中心控制部分</p> <p>在 “OUTLOCK” 即开锁状态下，“key=0”，上锁指示灯熄灭；在 “INLOCK” 即安锁状态下，“key=1”，上锁指示灯亮，并且有“code_en=0;cnt_clr=1;reg_wr=0;warn=0”。按下 “start” 键后，系统可以输入三位十进制密码，再按 “enter” 键确认，如果密码正确，则开锁，否则 “wro_count=1”，连续输错三次，则“warn=1”，系统报警，按下“off_al=1” 键则取消报警，而此过程中 “key” 始终为“1”。</p> 
      <ol>
       <li>VHDL 源程序</li> 
      </ol><p>5.1 底层文件 VHDL 源程序</p> <p>5.1.1 编码器部分</p> <p>library ieee;</p> <p>use ieee.std_logic_1164.all;</p> <p>use ieee.std_logic_unsigned.all;</p> <p>use ieee.std_logic_arith.all;</p> <p>entity dl_coder is</p> <p>port( clk:in std_logic;</p> <p>en:in std_logic;</p> <p>key_in:in std_logic_vector(9 downto 0);</p> <p>ps_i:out std_logic;</p> <p>code_out: out std_logic_vector(3 downto 0));</p> <p>end dl_coder;</p> <p>architecture behave of dl_coder is</p> <p>signal key_in_1:std_logic_vector(9 downto 0);</p> <p>signal key_in_2:std_logic_vector(9 downto 0);</p> <p>begin</p> <p>U1:process(clk)</p> <p>begin</p> <p>if rising_edge(clk) then</p> <p>if en='1' then</p> <p>if key_in="0000000000" then</p> <p>key_in_1&lt;=key_in;</p> <p>key_in_2&lt;=key_in;</p> <p>else</p> <p>key_in_2&lt;=key_in_1;</p> <p>key_in_1&lt;=key_in;</p> <p>end if;</p> <p>end if;</p> <p>end if;</p> <p>end process;</p> <p>ps_i&lt;='1' when key_in_2/=key_in_1 else '0';</p> <p>U2:process(clk)</p> <p>begin</p> <p>if rising_edge(clk) then</p> <p>if en='1' and key_in/="000000000" then</p> <p>case key_in is</p> <p>when "0000000001"=&gt;code_out&lt;="0000";</p> <p>when "0000000010"=&gt;code_out&lt;="0001";</p> <p>when "0000000100"=&gt;code_out&lt;="0010";</p> <p>when "0000001000"=&gt;code_out&lt;="0011";</p> <p>when "0000010000"=&gt;code_out&lt;="0100";</p> <p>when "0000100000"=&gt;code_out&lt;="0101";</p> <p>when "0001000000"=&gt;code_out&lt;="0110";</p> <p>when "0010000000"=&gt;code_out&lt;="0111";</p> <p>when "0100000000"=&gt;code_out&lt;="1000";</p> <p>when "1000000000"=&gt;code_out&lt;="1001";</p> <p>when OTHERS=&gt;code_out&lt;="0000";</p> <p>end case;</p> <p>end if;</p> <p>end if;</p> <p>end process;</p> <p>end behave;</p> <p>5.1.3 寄存器部分</p> <p>library ieee;</p> <p>use ieee.std_logic_1164.all;</p> <p>use ieee.std_logic_unsigned.all;</p> <p>use ieee.std_logic_arith.all;</p> <p>entity dl_reg is</p> <p>port(</p> <p>clk:in std_logic;</p> <p>reg_wr:in std_logic;</p> <p>en:in std_logic;</p> <p>addr:in std_logic_vector(1 downto 0);</p> <p>data_in:in std_logic_vector(3 downto 0);</p> <p>data_out:out std_logic_vector(3 downto 0)</p> <p>);</p> <p>end entity;</p> <p>architecture behave of dl_reg is</p> <p>signal m0:std_logic_vector(3 downto 0);</p> <p>signal m1:std_logic_vector(3 downto 0);</p> <p>signal m2:std_logic_vector(3 downto 0);</p> <p>begin</p> <p>process(clk)</p> <p>begin</p> <p>if falling_edge(clk) then</p> <p>if en='1' then</p> <p>case addr is</p> <p>when "01"=&gt;</p> <p>if reg_wr='1' then</p> <p>m0&lt;=data_in;</p> <p>else</p> <p>data_out&lt;=m0;</p> <p>end if;</p> <p>when "10"=&gt;</p> <p>if reg_wr='1' then</p> <p>m1&lt;=data_in;</p> <p>else</p> <p>data_out&lt;=m1;</p> <p>end if;</p> <p>when "11"=&gt;</p> <p>if reg_wr='1' then</p> <p>m2&lt;=data_in;</p> <p>else</p> <p>data_out&lt;=m2;</p> <p>end if;</p> <p>when OTHERS=&gt;</p> <p>NULL;</p> <p>end case;</p> <p>end if;</p> <p>end if;</p> <p>end process;</p> <p>end behave;</p> <p>5.1.4 比较器部分</p> <p>library ieee;</p> <p>use ieee.std_logic_1164.all;</p> <p>use ieee.std_logic_unsigned.all;</p> <p>use ieee.std_logic_arith.all;</p> <p>entity dl_cmp is</p> <p>port(</p> <p>a:in std_logic_vector(3 downto 0);</p> <p>b:in std_logic_vector(3 downto 0);</p> <p>c:out std_logic</p> <p>);</p> <p>end dl_cmp;</p> <p>architecture behave of dl_cmp is</p> <p>begin</p> <p>c&lt;='1' when a=b else</p> <p>'0';</p> <p>end behave;</p> <p>5.1.5 计数器 II 部分</p> <p>library ieee;</p> <p>use ieee.std_logic_1164.all;</p> <p>use ieee.std_logic_unsigned.all;</p> <p>entity dl_counter2 is</p> <p>port(</p> <p>clk:in std_logic;</p> <p>clr:in std_logic;</p> <p>wro_count:out std_logic</p> <p>);</p> <p>end entity;</p> <p>architecture behave of dl_counter2 is</p> <p>signal cnt:std_logic_vector(1 downto 0);</p> <p>begin</p> <p>process(clk,clr)</p> <p>begin</p> <p>if clr='1' then</p> <p>cnt&lt;="00";</p> <p>wro_count&lt;='0';</p> <p>elsif rising_edge(clk) then</p> <p>if cnt="10" then</p> <p>cnt&lt;="11";</p> <p>wro_count&lt;='1';</p> <p>else</p> <p>cnt&lt;=cnt+'1';</p> <p>end if;</p> <p>end if;</p> <p>end process;</p> <p>end behave;</p> <p>5.1.6 中心控制部分</p> <p>library ieee;</p> <p>use ieee.std_logic_1164.all;</p> <p>use ieee.std_logic_unsigned.all;</p> <p>use ieee.std_logic_arith.all;</p> <p>entity dl_control is</p> <p>port(</p> <p>clk:in std_logic;</p> <p>lock:in std_logic;</p> <p>start:in std_logic;</p> <p>off_al:in std_logic;</p> <p>ps_ch:in std_logic;</p> <p>enter:in std_logic;</p> <p>wro_count:in std_logic;</p> <p>ps_i:in std_logic;</p> <p>cmp_r:in std_logic;</p> <p>cin:in std_logic;</p> <p>code_en:out std_logic;</p> <p>cnt_clr:out std_logic;</p> <p>cnt_clr2:out std_logic;</p> <p>cnt_clk2:out std_logic;</p> <p>reg_wr:out std_logic;</p> <p>key:out std_logic;</p> <p>warn:out std_logic</p> <p>);</p> <p>end dl_control;</p> <p>architecture behave of dl_control is</p> <p>CONSTANT KEY_ACTIVE:STD_LOGIC:='1';</p> <p>type state_type is (OUTLOCK,INLOCK,PS_INPUT,PS_RIGHT,PS_WRONG,ALARM,PS_CHANGE);</p> <p>signal state:state_type;</p> <p>begin</p> <p>process(clk)</p> <p>begin</p> <p>if rising_edge(clk) then</p> <p>case state is</p> <p>when OUTLOCK=&gt;</p> <p>key&lt;='0';</p> <p>if lock=KEY_ACTIVE then</p> <p>state&lt;=INLOCK;</p> <p>ELSIF ps_ch=KEY_ACTIVE then</p> <p>state&lt;=PS_CHANGE;</p> <p>ELSE</p> <p>state&lt;=OUTLOCK;</p> <p>end if;</p> <p>when INLOCK=&gt;</p> <p>key&lt;='1';</p> <p>code_en&lt;='0';</p> <p>cnt_clr&lt;='1';</p> <p>reg_wr&lt;='0';</p> <p>warn&lt;='0';</p> <p>if start=KEY_ACTIVE then</p> <p>state&lt;=PS_INPUT;</p> <p>else</p> <p>state&lt;=INLOCK;</p> <p>end if;</p> <p>when PS_INPUT=&gt;</p> <p>code_en&lt;='1';</p> <p>cnt_clr&lt;='0';</p> <p>reg_wr&lt;='0';</p> <p>if cin='1' and ps_i='1' and cmp_r='1' then</p> <p>code_en&lt;='0';</p> <p>cnt_clr&lt;='1';</p> <p>cnt_clr2&lt;='1';</p> <p>state&lt;=PS_RIGHT;</p> <p>elsif ps_i='1' and cmp_r='0' then</p> <p>code_en&lt;='0';</p> <p>cnt_clr&lt;='1';</p> <p>cnt_clr2&lt;='0';</p> <p>cnt_clk2&lt;='1';</p> <p>state&lt;=PS_WRONG;</p> <p>elsif enter=KEY_ACTIVE and cin='0' then</p> <p>code_en&lt;='0';</p> <p>cnt_clr&lt;='1';</p> <p>cnt_clr2&lt;='0';</p> <p>cnt_clk2&lt;='1';</p> <p>state&lt;=ALARM;</p> <p>else</p> <p>state&lt;=PS_INPUT;</p> <p>end if;</p> <p>when PS_RIGHT=&gt;</p> <p>if enter=KEY_ACTIVE then</p> <p>state&lt;=OUTLOCK;</p> <p>else</p> <p>state&lt;=PS_RIGHT;</p> <p>end if;</p> <p>when PS_WRONG=&gt;</p> <p>if enter=KEY_ACTIVE and wro_count='1' then</p> <p>cnt_clk2&lt;='0';</p> <p>state&lt;=ALARM;</p> <p>elsif enter=KEY_ACTIVE then</p> <p>cnt_clk2&lt;='0';</p> <p>state&lt;=INLOCK;</p> <p>else</p> <p>state&lt;=PS_WRONG;</p> <p>end if;</p> <p>when ALARM=&gt;</p> <p>if off_al=KEY_ACTIVE then</p> <p>warn&lt;='0';</p> <p>state&lt;=INLOCK;</p> <p>else</p> <p>cnt_clk2&lt;='0';</p> <p>warn&lt;='1';</p> <p>state&lt;=ALARM;</p> <p>end if;</p> <p>when PS_CHANGE=&gt;</p> <p>code_en&lt;='1';</p> <p>cnt_clr&lt;='0';</p> <p>reg_wr&lt;='1';</p> <p>if cin='1' then</p> <p>code_en&lt;='0';</p> <p>cnt_clr&lt;='1';</p> <p>state&lt;=OUTLOCK;</p> <p>end if;</p> <p>WHEN OTHERS=&gt;</p> <p>state&lt;=INLOCK;</p> <p>end case;</p> <p>end if;</p> <p>end process;</p> <p>end behave;</p> 
      <ol>
       <li>系统仿真与分析</li> 
      </ol><p>6.1 系统整体组装设计原理图</p> <p>&nbsp;</p> <p><img alt="" class="has" src="https://uploader.shimo.im/f/kYH8NMnLfks9vXRl!thumbnail"></p> <p>图（8）系统整体组装设计原理图</p> <p>6.2 系统仿真波形图</p> <p>&nbsp;</p> <p><img alt="" class="has" src="https://uploader.shimo.im/f/QYMIhe4e68M991fN!thumbnail"></p> <p>图（9）系统仿真波形图</p> <p>6.3 波形图分析</p> <p>当系统刚开始工作时，处于开锁状态。输入 “ps_ch” 信号后，系统进入手动设置或修改密码状态；输入三位十进制数后按下 “lock” 键，进入安锁状态，锁闭合，上锁指示灯亮；在安锁状态下，若输入 “start” 信号，进入密码输入状态；在状态下，由 “ps_i” 密码脉冲作为计数时钟，计数值输出作为寄存器地址，当计数器计到 3 时，返回计数满信号 “cin”，如果密码内容和长度均正确，进入密码初验正确状态，如果密码错误，进入密码初验错误状态；在密码初验错误状态，输入确认信号“enter” 时，进入开锁状态；在密码初验错误状态，输入确认信号 “enter” 时，如果错误次数没有达到 3 次，则进入安锁状态并输出错误信号（“wro_count”加 1），如果错误次数达到 3 次，进入报警状态；在报警状态，“ warn”信号等于‘1’，此时报警指示灯亮，如果输入清除警报信号 “off_al” 则取消报警，继续保持安锁状态。</p> 
      <ol>
       <li>硬件验证</li> 
      </ol><p>将上述系统工程文件用 CPLDDN2005 下载到 KHF-3 型 CPLD/FPGA 实验开发系统中去进行硬件验证。其对应的绑定管脚如下：clk-p195,enter-p46,lock-p47,off_al-p53,ps_sh-p54,start-p55,key-p190,warn-p195,key_in0-p28,key_in1-p29,key_in2-p30,key_in3-p31,key_in4-p38,key_in5-p39，key_in6-p40，key_in7-p41，key_in8-p44，key_in9-p45。经过验证，证明所设计的系统是可行的。数字 0-9 分别绑定于 10 不同的管脚方便于密码的输入。系统的工作方式和顺序同上面仿真出来的结果基本一致。</p> 
      <ol>
       <li>设计问题与解决方法</li> 
      </ol><p>说真的，这次的课程设计真的很不容易，在过程中遇到了不少的问题。如：</p> <p>问题 1: 编写源程序时，经常不能通过。就如在写顶层文件的程序时，遇到了不少的问题，各元件之间的连接、顶层文件程序与底层文件程序之间的连接以及信号的定义，总是有错误。</p> <p>解决方法：编译出错时，我并不灰心，我一个错误一个错误地找，有些语句不懂的就翻阅书本或请教老师和同学，在我细心的检查预计老师同学的帮助下，终于找出了全部的错误，改正过后，程序编译总算通过了。</p> <p>问题 2：对控制模块仿真时，虽然语法正确, 但连最基本的输入输出都进不去，我弄了很多遍都不行。</p> <p>解决方法：还是通过查找资料和请教老师同学我才解决了这个问题。原来我原来的时钟周期太小的，只有 20ns，这样按键按下后系统都还未反应过来就已经进入下一个输入了，这当然仿真不出数据了，后来我改大时钟周期后终于成功仿真出来。</p> <p>问题 3：在进行硬件验证时失败，所有按键没反应。</p> <p>解决方法：按按键没反应原来是因为我犯了一个很低级的错误，没有绑定引脚，经过我一一验证绑定后还是不行，后来才知道原来是因为在创建工程时用错了芯片，本来应该用 ACEX1K 系列的 EP1K30QC208-3 的，但我却用了 ACEX1K 系列的 EP1K10TC100-3 了，这样根本上连下载都下载不了。经过改正后终于成功了。</p> 
      <ol>
       <li>设计总结</li> 
      </ol><p>通过这次的课程设计，使我对 EDA 这门课程产生了浓厚的兴趣，并且对 EDA 这门课程、对 QuartusⅡ 开发软件和 KHF-3 型 CPLD/FPGA 实验开发系统有了一个更加深刻的认识。我深深地被 EDA 的强大所震撼，QuartusⅡ 开发软件虽然使用起来有些麻烦，但它的功能真的很强大，而且设计很自由，设计方式很多，能极大地满足当今社会高速发展的需要。通过这次课程设计，我还懂得了理论与实际相结合的重要性。我明白到只有理论知识是远远不够的，我们还需要大量的实践，我们只有把所学的理论知识与实践相结合起来，从实践中检验理论，才能真正为社会服务，并且我们也可以在实践中提高自己的实际动手能力和独立思考的能力，使自己更加适合当今社会的需要。</p> <p>这次关于密码锁的课程设计，总的来说，还是比较成功的。虽然过程中遇到了许多问题，但在老师的指导下，再加上自己不懈的努力，最终还是算比较顺利地做了出来。经过这次的课程设计，使我以后的学习和生活受益匪浅，让我在以后的学习中更加注重理论与实践的结合，我应该感谢这次的设计。</p> 
      <ol>
       <li>参考文献</li> 
      </ol><p>（1）陈先朝，硬件描述语言与 EDA 技术实践指导书，2010 年 11 月</p> <p>（2）曹昕燕等编著，EDA 技术实验与课程设计，清华大学出版社，2006 年 5 月</p> <p>（3）刘欲晓等编著，EDA 技术与 VHDL 电路开发应用实践，电子工业出版社，2009 年 4 月</p> <p>（4）刘昌华等编著，数字逻辑 EDA 设计与实践：MAX+plusⅡ 与 QuartusⅡ 双剑合璧，国防工业出版社，2009 年</p> <p>（5）刘江海主编，EDA 技术课程设计，华中科技大学出版社，2009 年 1 月</p> 全文完 <p>本文由&nbsp;<a href="http://ksria.com/simpread" rel="nofollow">简悦 SimpRead</a>&nbsp;优化，用以提升阅读体验</p> <p>使用了&nbsp;全新的简悦词法分析引擎&nbsp;beta，<a href="http://ksria.com/simpread/docs/#/%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90%E5%BC%95%E6%93%8E" rel="nofollow">点击查看</a>详细说明</p> <p>&nbsp;</p> </td> 
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <td> <p>计数器I</p> <p>&nbsp;</p> </td> 
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <td> <p>寄存器</p> </td> 
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <td> <p>比较器</p> </td> 
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <td> <p>控制模块</p> </td> 
    </tr>
   </tbody>
  </table>
  <table>
   <tbody>
    <tr>
     <td> <p>计数器II</p> </td> 
    </tr>
   </tbody>
  </table>
  <p>&nbsp;</p> 
  <table align="left">
   <tbody>
    <tr>
     <td>&nbsp;</td> 
    </tr>
    <tr>
     <td>&nbsp;</td> 
     <td>&nbsp;</td> 
    </tr>
   </tbody>
  </table>
  <p style="margin-left:0cm;">&nbsp;</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <p>&nbsp;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;图（1）系统整体组装设计结构图</p> 
  <p style="margin-left:0cm;">4.2.1编码器部分</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp; 其共有三个输入和两个输出端口，如图（2）</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 图（2）编码器部分</p> 
  <p style="margin-left:0cm;">在时钟脉冲信号的作用下，当“en=1”时，表示此时可以输入三个十进制数码，分别对应关系如下： "0000000001"=&gt;"0000";</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "0000000010"=&gt;"0001";</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "0000000100"=&gt;"0010";</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "0000001000"=&gt;"0011";</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "0000010000"=&gt;"0100";</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "0000100000"=&gt;"0101";</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "0001000000"=&gt;"0110";</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "0010000000"=&gt;"0111";</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "0100000000"=&gt;"1000";</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "1000000000"=&gt;c"1001"。</p> 
  <p style="margin-left:0cm;">即当“key_in=左边数”时，“code_out=右边数”。而当输入的数码等于系统设置密码时，“ps_i=1”，否则“ps_i=0”。</p> 
  <p style="margin-left:0cm;">4.2.2计数器I部分</p> 
  <p style="margin-left:0cm;">其部分有两个输入端和两个输出端，如图（3）</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 图（3）计数器I部分</p> 
  <p style="margin-left:0cm;">其脉冲信号为编码器的“code_out”的输出数值，|“clr”是清零端，当“clr=1”时“cout=0”；当“clr=0”时，“cnt=cnt+'1'”，若“cnt=10”时，再遇到下一个脉冲信号后则变成“11”，并使“cout=1”，最后将“cnt”的值赋给“addr”输出。&nbsp;</p> 
  <p style="margin-left:0cm;">4.2.3寄存器部分</p> 
  <p style="margin-left:0cm;">此部分有5个输入端和一个输出端，如图（4）</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 图（4）寄存器部分</p> 
  <p style="margin-left:0cm;">寄存器主要用来储存输入的三位十进制数码，即密码。在时钟脉冲下降沿时若“en=1”，则可以输入数据。此时，如果“addr”为when"01"=&gt;if reg_wr='1' then m0&lt;=data_in;else data_out&lt;=m0;when "10"=&gt;if reg_wr='1' then m1&lt;=data_in;else data_out&lt;=m1;when "11"=&gt;if reg_wr='1' then m2&lt;=data_in;else data_out&lt;=m2;when OTHERS=&gt;NULL。</p> 
  <p style="margin-left:0cm;">4.2.4比较器部分</p> 
  <p style="margin-left:0cm;">此部分较为简单，其只有两个输入端和一个输出端，如图（5）</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 图（5）比较器部分</p> 
  <p style="margin-left:0cm;">当从编码器“code_out”端输出的数a与储存在寄存器中的数b相等时，c端输出“1”，否则为“0”。</p> 
  <p style="margin-left:0cm;">4.2.5计数器II部分</p> 
  <p style="margin-left:0cm;">此部分也只有两个输入端和一个输出端，如图（6）</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 图（6）计数器II部分</p> 
  <p style="margin-left:0cm;">其主要是用来计算连续输入错误的次数。当清零端“clr=1”时计数器II清零，“wro_count”自然也为零；当“clr=0”时，控制器的“cnt_clk2”端的输出信号作为此部分的脉冲信号，遇到上升沿时计数器加1，计到3次时“wro_count”端输出“1”，否则为“0”。</p> 
  <p style="margin-left:0cm;">4.2.6中心控制部分</p> 
  <p style="margin-left:0cm;">此部分是整个系统的核心部分，其管脚也甚多，共有10个输入端和7个输出端。如图（7）</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;图（7）中心控制部分<br> 在“OUTLOCK”即开锁状态下，“key=0”，上锁指示灯熄灭；在“INLOCK”即安锁状态下，“key=1”，上锁指示灯亮，并且有“code_en=0;cnt_clr=1;reg_wr=0;warn=0”。按下“start”键后，系统可以输入三位十进制密码，再按“enter”键确认，如果密码正确，则开锁，否则“wro_count=1”，连续输错三次，则“warn=1”，系统报警，按下“off_al=1”键则取消报警，而此过程中“key”始终为“1”。</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <ol>
   <li>VHDL源程序</li> 
  </ol>
  <p style="margin-left:0cm;">5.1底层文件VHDL源程序</p> 
  <p style="margin-left:0cm;">5.1.1编码器部分</p> 
  <p style="margin-left:0cm;">library ieee;</p> 
  <p style="margin-left:0cm;">use ieee.std_logic_1164.all;</p> 
  <p style="margin-left:0cm;">use ieee.std_logic_unsigned.all;</p> 
  <p style="margin-left:0cm;">use ieee.std_logic_arith.all;</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <p style="margin-left:0cm;">entity dl_coder is</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; port( clk:in std_logic;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; en:in std_logic;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; key_in:in std_logic_vector(9 downto 0);</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ps_i:out std_logic;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; code_out: out std_logic_vector(3 downto 0));</p> 
  <p style="margin-left:0cm;">end dl_coder;</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <p style="margin-left:0cm;">architecture behave of dl_coder is</p> 
  <p style="margin-left:0cm;">signal key_in_1:std_logic_vector(9 downto 0);</p> 
  <p style="margin-left:0cm;">signal key_in_2:std_logic_vector(9 downto 0);</p> 
  <p style="margin-left:0cm;">begin</p> 
  <p style="margin-left:0cm;">U1:process(clk)</p> 
  <p style="margin-left:0cm;">&nbsp; begin</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if rising_edge(clk) then</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if en='1' then</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if key_in="0000000000" then</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; key_in_1&lt;=key_in;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; key_in_2&lt;=key_in;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; key_in_2&lt;=key_in_1;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; key_in_1&lt;=key_in;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; end if;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; end if;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; end if;</p> 
  <p style="margin-left:0cm;">end process;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p> 
  <p style="margin-left:0cm;">ps_i&lt;='1' when key_in_2/=key_in_1 else '0';</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p> 
  <p style="margin-left:0cm;">U2:process(clk)</p> 
  <p style="margin-left:0cm;">begin</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp; if rising_edge(clk) then</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if en='1' and key_in/="000000000" then</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case key_in is</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; when "0000000001"=&gt;code_out&lt;="0000";</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; when "0000000010"=&gt;code_out&lt;="0001";</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;when "0000000100"=&gt;code_out&lt;="0010";</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; when "0000001000"=&gt;code_out&lt;="0011";</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; when "0000010000"=&gt;code_out&lt;="0100";</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; when "0000100000"=&gt;code_out&lt;="0101";</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; when "0001000000"=&gt;code_out&lt;="0110";</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;when "0010000000"=&gt;code_out&lt;="0111";</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; when "0100000000"=&gt;code_out&lt;="1000";</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; when "1000000000"=&gt;code_out&lt;="1001";</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; when OTHERS=&gt;code_out&lt;="0000";</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; end case;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; end if;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp; end if;</p> 
  <p style="margin-left:0cm;">end process;</p> 
  <p style="margin-left:0cm;">end behave;</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <p style="margin-left:0cm;">5.1.3寄存器部分</p> 
  <p style="margin-left:0cm;">library ieee;</p> 
  <p style="margin-left:0cm;">use ieee.std_logic_1164.all;</p> 
  <p style="margin-left:0cm;">use ieee.std_logic_unsigned.all;</p> 
  <p style="margin-left:0cm;">use ieee.std_logic_arith.all;</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <p style="margin-left:0cm;">entity dl_reg is</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; port(</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; clk:in std_logic;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; reg_wr:in std_logic;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; en:in std_logic;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; addr:in std_logic_vector(1 downto 0);</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; data_in:in std_logic_vector(3 downto 0);</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; data_out:out std_logic_vector(3 downto 0)</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; );</p> 
  <p style="margin-left:0cm;">end entity;</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <p style="margin-left:0cm;">architecture behave of dl_reg is</p> 
  <p style="margin-left:0cm;">signal m0:std_logic_vector(3 downto 0);</p> 
  <p style="margin-left:0cm;">signal m1:std_logic_vector(3 downto 0);</p> 
  <p style="margin-left:0cm;">signal m2:std_logic_vector(3 downto 0);</p> 
  <p style="margin-left:0cm;">begin</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; process(clk)</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; begin</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; if falling_edge(clk) then</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; if en='1' then</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; case addr is</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; when "01"=&gt;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; if reg_wr='1' then</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; m0&lt;=data_in;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; else</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; data_out&lt;=m0;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; end if;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; when "10"=&gt;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; if reg_wr='1' then</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; m1&lt;=data_in;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; else</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; data_out&lt;=m1;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; end if;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; when "11"=&gt;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; if reg_wr='1' then</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; m2&lt;=data_in;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; else</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; data_out&lt;=m2;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; end if;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; when OTHERS=&gt;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; NULL;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; end case;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; end if;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; end if;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; end process;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; end behave;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p> 
  <p style="margin-left:0cm;">5.1.4比较器部分</p> 
  <p style="margin-left:0cm;">library ieee;</p> 
  <p style="margin-left:0cm;">use ieee.std_logic_1164.all;</p> 
  <p style="margin-left:0cm;">use ieee.std_logic_unsigned.all;</p> 
  <p style="margin-left:0cm;">use ieee.std_logic_arith.all;</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <p style="margin-left:0cm;">entity dl_cmp is</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; port(</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; a:in std_logic_vector(3 downto 0);</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; b:in std_logic_vector(3 downto 0);</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; c:out std_logic</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; );</p> 
  <p style="margin-left:0cm;">end dl_cmp;</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <p style="margin-left:0cm;">architecture behave of dl_cmp is</p> 
  <p style="margin-left:0cm;">begin</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; c&lt;='1' when a=b else</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; '0';</p> 
  <p style="margin-left:0cm;">end behave;</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <p style="margin-left:0cm;">5.1.5计数器II部分</p> 
  <p style="margin-left:0cm;">library ieee;</p> 
  <p style="margin-left:0cm;">use ieee.std_logic_1164.all;</p> 
  <p style="margin-left:0cm;">use ieee.std_logic_unsigned.all;</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <p style="margin-left:0cm;">entity dl_counter2 is</p> 
  <p style="margin-left:0cm;">port(</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; clk:in std_logic;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; clr:in std_logic;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; wro_count:out std_logic</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; );</p> 
  <p style="margin-left:0cm;">end entity;</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <p style="margin-left:0cm;">architecture behave of dl_counter2 is</p> 
  <p style="margin-left:0cm;">signal cnt:std_logic_vector(1 downto 0);</p> 
  <p style="margin-left:0cm;">begin</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; process(clk,clr)</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; begin</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; if clr='1' then</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; cnt&lt;="00";</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; wro_count&lt;='0';</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; elsif rising_edge(clk) then</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; if cnt="10" then</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; cnt&lt;="11";</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; wro_count&lt;='1';</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; else</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; cnt&lt;=cnt+'1';</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; end if;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; end if;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; end process;</p> 
  <p style="margin-left:0cm;">end behave;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p> 
  <p style="margin-left:0cm;">5.1.6中心控制部分</p> 
  <p style="margin-left:0cm;">library ieee;</p> 
  <p style="margin-left:0cm;">use ieee.std_logic_1164.all;</p> 
  <p style="margin-left:0cm;">use ieee.std_logic_unsigned.all;</p> 
  <p style="margin-left:0cm;">use ieee.std_logic_arith.all;</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <p style="margin-left:0cm;">entity dl_control is</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; port(</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; clk:in std_logic;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; lock:in std_logic;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; start:in std_logic;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; off_al:in std_logic;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; ps_ch:in std_logic;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; enter:in std_logic;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; wro_count:in std_logic;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; ps_i:in std_logic;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; cmp_r:in std_logic;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; cin:in std_logic;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; code_en:out std_logic;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; cnt_clr:out std_logic;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; cnt_clr2:out std_logic;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; cnt_clk2:out std_logic;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; reg_wr:out std_logic;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; key:out std_logic;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; warn:out std_logic</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; );</p> 
  <p style="margin-left:0cm;">end dl_control;</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <p style="margin-left:0cm;">architecture behave of dl_control is</p> 
  <p style="margin-left:0cm;">CONSTANT KEY_ACTIVE:STD_LOGIC:='1';</p> 
  <p style="margin-left:0cm;">type state_type is (OUTLOCK,INLOCK,PS_INPUT,PS_RIGHT,PS_WRONG,ALARM,PS_CHANGE);</p> 
  <p style="margin-left:0cm;">signal state:state_type;</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <p style="margin-left:0cm;">begin</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; process(clk)</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; begin</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; if rising_edge(clk) then</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; case state is</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; when OUTLOCK=&gt;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; key&lt;='0';</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; if lock=KEY_ACTIVE then</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; state&lt;=INLOCK;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; ELSIF ps_ch=KEY_ACTIVE then</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; state&lt;=PS_CHANGE;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; ELSE</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; state&lt;=OUTLOCK;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; end if;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; when INLOCK=&gt;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; key&lt;='1';</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; code_en&lt;='0';</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; cnt_clr&lt;='1';</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; reg_wr&lt;='0';</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; warn&lt;='0';</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; if start=KEY_ACTIVE then</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; state&lt;=PS_INPUT;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; else</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; state&lt;=INLOCK;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; end if;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; when PS_INPUT=&gt;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; code_en&lt;='1';</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; cnt_clr&lt;='0';</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; reg_wr&lt;='0';</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; if cin='1' and ps_i='1' and cmp_r='1' then</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; code_en&lt;='0';</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; cnt_clr&lt;='1';</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; cnt_clr2&lt;='1';</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; state&lt;=PS_RIGHT;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; elsif ps_i='1' and cmp_r='0' then</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; code_en&lt;='0';</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; cnt_clr&lt;='1';</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; cnt_clr2&lt;='0';</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; cnt_clk2&lt;='1';</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; state&lt;=PS_WRONG;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; elsif enter=KEY_ACTIVE and cin='0' then</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; code_en&lt;='0';</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; cnt_clr&lt;='1';</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; cnt_clr2&lt;='0';</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; cnt_clk2&lt;='1';</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; state&lt;=ALARM;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; else</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; state&lt;=PS_INPUT;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; end if;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; when PS_RIGHT=&gt;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; if enter=KEY_ACTIVE then</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; state&lt;=OUTLOCK;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; else</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; state&lt;=PS_RIGHT;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; end if;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; when PS_WRONG=&gt;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; if enter=KEY_ACTIVE and wro_count='1' then</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; cnt_clk2&lt;='0';</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; state&lt;=ALARM;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; elsif enter=KEY_ACTIVE then</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; cnt_clk2&lt;='0';</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; state&lt;=INLOCK;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; else</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; state&lt;=PS_WRONG;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; end if;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; when ALARM=&gt;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; if off_al=KEY_ACTIVE then</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; warn&lt;='0';</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; state&lt;=INLOCK;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; else</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; cnt_clk2&lt;='0';</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; warn&lt;='1';</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; state&lt;=ALARM;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; end if;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; when PS_CHANGE=&gt;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; code_en&lt;='1';</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; cnt_clr&lt;='0';</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; reg_wr&lt;='1';</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; if cin='1' then</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; code_en&lt;='0';</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; cnt_clr&lt;='1';</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; state&lt;=OUTLOCK;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; end if;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; WHEN OTHERS=&gt;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; state&lt;=INLOCK;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; end case;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; end if;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; end process;</p> 
  <p style="margin-left:0cm;">end behave;</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <ol>
   <li>系统仿真与分析</li> 
  </ol>
  <p style="margin-left:0cm;">6.1系统整体组装设计原理图</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 图（8）系统整体组装设计原理图</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <p style="margin-left:0cm;">6.2系统仿真波形图</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 图（9）系统仿真波形图</p> 
  <p style="margin-left:0cm;">6.3波形图分析</p> 
  <p style="margin-left:0cm;">当系统刚开始工作时，处于开锁状态。输入“ps_ch”信号后，系统进入手动设置或修改密码状态；输入三位十进制数后按下“lock”键，进入安锁状态，锁闭合，上锁指示灯亮；在安锁状态下，若输入“start”信号，进入密码输入状态；在状态下，由“ps_i”密码脉冲作为计数时钟，计数值输出作为寄存器地址，当计数器计到3时，返回计数满信号“cin”，如果密码内容和长度均正确，进入密码初验正确状态，如果密码错误，进入密码初验错误状态；在密码初验错误状态，输入确认信号“enter”时，进入开锁状态；在密码初验错误状态，输入确认信号“enter”时，如果错误次数没有达到3次，则进入安锁状态并输出错误信号（“wro_count”加1），如果错误次数达到3次，进入报警状态；在报警状态，“ warn”信号等于‘1’，此时报警指示灯亮，如果输入清除警报信号“off_al”则取消报警，继续保持安锁状态。</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <ol>
   <li>硬件验证</li> 
  </ol>
  <p style="margin-left:0cm;">将上述系统工程文件用CPLDDN2005下载到KHF-3型CPLD/FPGA实验开发系统中去进行硬件验证。其对应的绑定管脚如下：clk-p195,enter-p46,lock-p47,off_al-p53,ps_sh-p54,start-p55,key-p190,warn-p195,key_in0-p28,key_in1-p29,key_in2-p30,key_in3-p31,key_in4-p38,key_in5-p39，key_in6-p40，key_in7-p41，key_in8-p44，key_in9-p45。经过验证，证明所设计的系统是可行的。数字0-9分别绑定于10不同的管脚方便于密码的输入。系统的工作方式和顺序同上面仿真出来的结果基本一致。</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <ol>
   <li>设计问题与解决方法</li> 
  </ol>
  <p style="margin-left:0cm;">说真的，这次的课程设计真的很不容易，在过程中遇到了不少的问题。如：</p> 
  <p style="margin-left:0cm;">问题1:编写源程序时，经常不能通过。就如在写顶层文件的程序时，遇到了不少的问题，各元件之间的连接、顶层文件程序与底层文件程序之间的连接以及信号的定义，总是有错误。</p> 
  <p style="margin-left:0cm;">解决方法：编译出错时，我并不灰心，我一个错误一个错误地找，有些语句不懂的就翻阅书本或请教老师和同学，在我细心的检查预计老师同学的帮助下，终于找出了全部的错误，改正过后，程序编译总算通过了。</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <p style="margin-left:0cm;">问题2：对控制模块仿真时，虽然语法正确,但连最基本的输入输出都进不去，我弄了很多遍都不行。</p> 
  <p style="margin-left:0cm;">解决方法：还是通过查找资料和请教老师同学我才解决了这个问题。原来我原来的时钟周期太小的，只有20ns，这样按键按下后系统都还未反应过来就已经进入下一个输入了，这当然仿真不出数据了，后来我改大时钟周期后终于成功仿真出来。</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <p style="margin-left:0cm;">问题3：在进行硬件验证时失败，所有按键没反应。</p> 
  <p style="margin-left:0cm;">解决方法：按按键没反应原来是因为我犯了一个很低级的错误，没有绑定引脚，经过我一一验证绑定后还是不行，后来才知道原来是因为在创建工程时用错了芯片，本来应该用ACEX1K系列的EP1K30QC208-3的，但我却用了ACEX1K系列的EP1K10TC100-3了，这样根本上连下载都下载不了。经过改正后终于成功了。</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <ol>
   <li>设计总结</li> 
  </ol>
  <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp; 通过这次的课程设计，使我对EDA这门课程产生了浓厚的兴趣，并且对EDA这门课程、对QuartusⅡ开发软件和KHF-3型CPLD/FPGA实验开发系统有了一个更加深刻的认识。我深深地被EDA的强大所震撼，QuartusⅡ开发软件虽然使用起来有些麻烦，但它的功能真的很强大，而且设计很自由，设计方式很多，能极大地满足当今社会高速发展的需要。通过这次课程设计，我还懂得了理论与实际相结合的重要性。我明白到只有理论知识是远远不够的，我们还需要大量的实践，我们只有把所学的理论知识与实践相结合起来，从实践中检验理论，才能真正为社会服务，并且我们也可以在实践中提高自己的实际动手能力和独立思考的能力，使自己更加适合当今社会的需要。</p> 
  <p style="margin-left:0cm;">这次关于密码锁的课程设计，总的来说，还是比较成功的。虽然过程中遇到了许多问题，但在老师的指导下，再加上自己不懈的努力，最终还是算比较顺利地做了出来。经过这次的课程设计，使我以后的学习和生活受益匪浅，让我在以后的学习中更加注重理论与实践的结合，我应该感谢这次的设计。</p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <ol>
   <li>参考文献</li> 
  </ol>
  <p style="margin-left:0cm;">（1）陈先朝，硬件描述语言与EDA技术实践指导书，2010年11月</p> 
  <p style="margin-left:0cm;"><span style="color:#000000;">（</span><span style="color:#000000;">2</span><span style="color:#000000;">）曹昕燕等编著，</span><span style="color:#000000;">EDA</span><span style="color:#000000;">技术实验与课程设计，清华大学<span style="color:#666666;"><span style="color:#000000;">出版社，</span></span></span><span style="color:#000000;">2006</span><span style="color:#000000;">年</span><span style="color:#000000;">5</span><span style="color:#000000;">月</span></p> 
  <p style="margin-left:0cm;"><span style="color:#000000;">（</span><span style="color:#000000;">3</span><span style="color:#000000;">）刘欲晓等编著，</span><span style="color:#000000;">EDA</span><span style="color:#000000;">技术与</span><span style="color:#000000;">VHDL</span><span style="color:#000000;">电路开发应用实践，电子工业出版社，</span><span style="color:#000000;">2009</span><span style="color:#000000;">年</span><span style="color:#000000;">4</span><span style="color:#000000;">月</span></p> 
  <p style="margin-left:0cm;"><span style="color:#000000;">（</span><span style="color:#000000;">4</span><span style="color:#000000;">）刘昌华等编著，数字逻辑</span><span style="color:#000000;">EDA</span><span style="color:#000000;">设计与实践：</span><span style="color:#000000;">MAX+plusⅡ</span><span style="color:#000000;">与</span><span style="color:#000000;">QuartusⅡ</span><span style="color:#000000;">双剑合璧，国防工业出版社，</span><span style="color:#000000;">2009</span><span style="color:#000000;">年</span></p> 
  <p style="margin-left:0cm;"><span style="color:#333333;">（</span><span style="color:#333333;">5</span><span style="color:#333333;">）刘江海主编，</span><span style="color:#333333;">EDA</span><span style="color:#333333;">技术课程设计，华中科技大学出版社，</span><span style="color:#333333;">2009</span><span style="color:#333333;">年</span><span style="color:#333333;">1</span><span style="color:#333333;">月</span></p> 
  <p style="margin-left:0cm;">&nbsp;</p> 
  <p style="margin-left:0cm;"><span style="color:#333333;">原文：</span><a href="https://wenku.baidu.com/view/0d3112fb65ce050876321391" rel="nofollow">https://wenku.baidu.com/view/0d3112fb65ce050876321391</a></p> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
