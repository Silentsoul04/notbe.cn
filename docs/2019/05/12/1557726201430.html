<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Maven « NotBeCN</title>
  <meta name="description" content="                       目录       项目构建过程    Maven安装          项目构建过程       清理：将以前编译的旧class字节码文件删除，为下一次编译做准备    编译：将java源程序编译成字节码文件    测试：自动测试，自动调用junit程序    报告：...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2019/05/12/1557726201430.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">Maven</h1>
    <p class="post-meta">May 12, 2019</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div id="content_views" class="markdown_views prism-atom-one-dark"> 
  <!-- flowchart 箭头图标 勿删 --> 
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> 
  <p></p>
  <div class="toc">
   <h3>目录</h3>
   <ul>
    <li><a href="#_1" rel="nofollow">项目构建过程</a></li>
    <li><a href="#Maven_9" rel="nofollow">Maven安装</a></li>
   </ul>
  </div>
  <p></p> 
  <h1><a id="_1"></a>项目构建过程</h1> 
  <ol> 
   <li>清理：将以前编译的旧class字节码文件删除，为下一次编译做准备</li> 
   <li>编译：将java源程序编译成字节码文件</li> 
   <li>测试：自动测试，自动调用junit程序</li> 
   <li>报告：测试程序执行的结果</li> 
   <li>打包：动态web工程打war包，java工程打jar包；</li> 
   <li>安装：Maven特定的概念–将打包得到的文件复制到仓库中指定位置</li> 
   <li>部署：将动态web工程生成的war包复制到servlet容器的值目录下</li> 
  </ol> 
  <h1><a id="Maven_9"></a>Maven安装</h1> 
  <ol> 
   <li>解压部署Maven核心包，将之放到一个特定目录下 
    <ol> 
     <li>检查JAVA_HOME环境变量</li> 
     <li>配置maven环境变量 MAVEN_HOME(M2_HOME)跟PATH变量</li> 
     <li>使用mvn -v检查是否安装成功</li> 
    </ol> </li> 
   <li>修改本地仓库</li> 
   <li>maven目录结构<br> hello<br> |--------src<br> |---------|--------main<br> |---------|-----------|-------java<br> |---------|-----------|-------resource<br> |---------|--------test<br> |---------|-----------|------java<br> |---------|-----------|-------resource<br> |--------pom.xml</li> 
   <li>常用的maven命令<br> a) mvn clean:清理<br> b) mvn compile:编译主程序<br> c) mvn test-compile：编译测试程序<br> d) mvn test ：执行测试<br> e) mvn package：打包<br> f) mvn install:安装<br> g) mvn site：生成站点文件</li> 
   <li>pom<br> a) Project Object Model :项目对象模型</li> 
   <li>坐标（gav）：使用下面三个向量可以在仓库中唯一定位一个Maven工程<br> a) groupid：公司或者组织域名倒序+项目名<br> b) artifactid：模块名<br> c) version：版本</li> 
   <li>maven管理jar包的方式groupId/artifactId/version/artifactId-version.jar<br> a) 比如说commons-lang的pom文件是这么定义三个坐标的：<br> b) 那么就是repository/commons-lang/commons-lang/2.1/commons-lang-2.1.jar<br> c) 其中如果groupId中有点号".“则替换成”/"<br> commons-lang<br> commons-lang<br> 2.1</li> 
   <li>仓库 
    <ol> 
     <li>仓库分类 
      <ol> 
       <li>本地仓库：当前电脑上repository</li> 
       <li>远程仓库： 
        <ol> 
         <li>私服：搭建在局域网上为当前局域网内所有Maven工程服务；</li> 
         <li>中央仓库：架设在internet上为全世界所有的Maven工程服务；</li> 
         <li>中央仓库镜像：架设在各个大洲为中央仓库分流，减轻中央仓库的压力同时更快的响应用户请求的仓库；</li> 
        </ol> </li> 
       <li>仓库中保存的内容：Maven工程<br> i. Maven自身所需要的插件<br> ii. 第三方框架或工具包（第一方：jdk，第二方：我们自己）<br> iii. 自己开发的Maven工程</li> 
      </ol> </li> 
    </ol> </li> 
   <li>依赖 
    <ol> 
     <li>Maven解析依赖信息时回去本地仓库中寻找被依赖的jar包 
      <ol> 
       <li>对用我们自己开发的Maven工程，使用install命令安装后可以进入仓库；</li> 
      </ol> </li> 
    </ol> </li> 
   <li>依赖的范围<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190512144438715.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMwMzI1ODMz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190512144511451.png" alt="在这里插入图片描述"> 
    <ol> 
     <li>compile 
      <ol> 
       <li>主程序编译是否需要：是</li> 
       <li>测试程序编译是否需要：是</li> 
       <li>是否参与打包：是</li> 
      </ol> </li> 
     <li>test 
      <ol> 
       <li>主程序编译是否需要：否</li> 
       <li>测试程序编译是否需要：是</li> 
       <li>是否参与打包：否</li> 
      </ol> </li> 
     <li>provide 
      <ol> 
       <li>主程序编译是否需要：是</li> 
       <li>测试程序编译是否需要：是</li> 
       <li>是否参与打包：否（像servlet-api由容器提供）</li> 
      </ol> </li> 
    </ol> </li> 
   <li>生命周期 
    <ol> 
     <li>各个构件执行的顺序：顺序不能打乱，必须按照既定的正确顺序执行</li> 
     <li>Maven的核心程序中定义了抽象的生命周期，生命周期中各个阶段的具体任务是由插件来执行的；</li> 
     <li>maven有三套独立的生命周期 
      <ol> 
       <li>clean lifecycle 
        <ol> 
         <li>pre-clean:执行一些需要在clean之前完成的工作</li> 
         <li>clean：移除上一次构建的所有文件</li> 
         <li>post-clean：执行一些在clean之后立刻完成的工作</li> 
        </ol> </li> 
       <li>default lifecycle 
        <ol> 
         <li>validate</li> 
         <li>generate-sources</li> 
         <li>process-sources</li> 
         <li>generate-resources</li> 
         <li>process-resources ：复制并处理资源文件至目标（target）目录，准备打包（main/resources）</li> 
         <li>compile：编译项目的源代码（main/java）</li> 
         <li>process-classed</li> 
         <li>generate-test-sources</li> 
         <li>process-test-sources</li> 
         <li>generate-test-resources</li> 
         <li>process-test-resources:复制并处理测试资源文件（test/resources）</li> 
         <li>test-compile：编译测试源代码（test/java）</li> 
         <li>process-test-classes</li> 
         <li>test：使用合适的单元测试框架运行测试，测试代码不会被打包</li> 
         <li>prepare-package</li> 
         <li>package：接受编译好的代码，打包成可发布的格式例如jar</li> 
         <li>pre-integration-test</li> 
         <li>integration-test</li> 
         <li>post-integration-test</li> 
         <li>verify</li> 
         <li>install：将安装包至本地仓库，以让其他项目依赖</li> 
        </ol> </li> 
       <li>site lifecycle 
        <ol> 
         <li>pre-site:执行一些在site之前的工作</li> 
         <li>site：生成项目的站点文档</li> 
         <li>post-site：执行一些在site之后需要完成的工作，并且为部署做准备；</li> 
         <li>site-deploy:将生成的站点文档部署到特定服务器上</li> 
        </ol> </li> 
      </ol> </li> 
     <li>maven核心程序为了更好的实现自动化，按照下面描述的特点执行生命周期各个阶段：不论现在要执行生命周期中的哪一个阶段，都是从这个生命周期的最初位置开始执行 
      <ol> 
       <li>例如执行mvn compile命令maven会执行default lifecycle的1-6个步骤</li> 
       <li>执行mvn test会执行1-14个步骤</li> 
       <li>执行mvn package会执行1-16个步骤</li> 
      </ol> </li> 
     <li>插件跟目标 
      <ol> 
       <li>生命周期的各个阶段仅仅定义了要执行的任务是什么</li> 
       <li>各个阶段由插件的命令来执行<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190512144556657.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMwMzI1ODMz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li> 
       <li>例如3中maven-compiler-plugin:3.1:compile表示使用maven-compiler-plugin:这个插件执行compile命令来执行生命周期的compile阶段</li> 
       <li>maven-compiler-plugin:3.1:testCompile表示使用maven-compiler-plugin这个插件的testCompile命令来执行生命周期的test-compile阶段；</li> 
      </ol> </li> 
    </ol> </li> 
   <li>eclipse使用maven 
    <ol> 
     <li>maven插件：eclipse内置</li> 
     <li>maven插件的设置： 
      <ol> 
       <li>installations：执行maven核心程序的位置，不建议使用自带maven程序，使用本地解压maven程序</li> 
       <li>user settings：指定conf/setting.xml的位置，进而指定本地仓库位置</li> 
      </ol> </li> 
     <li>基本操作 
      <ol> 
       <li>创建maven版的java工程</li> 
       <li>maven中jdk版本配置 
        <ol> 
         <li><a href="https://blog.csdn.net/acmer_ak/article/details/70475889" rel="nofollow">全局配置</a></li> 
        </ol> </li> 
       <li>创建maven版的web程序</li> 
       <li>如何执行maven命令</li> 
      </ol> </li> 
    </ol> </li> 
   <li>依赖【高级】 
    <ol> 
     <li>依赖的传递性<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190512144623989.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMwMzI1ODMz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"> 
      <ol> 
       <li>好处：可以传递的依赖不必每个工程中都重复引入，只需要在最底层的工程中依赖即可</li> 
       <li>非compile范围的依赖不能传递，因为不能传递，所以如果各个工程中都需要，需要重复引入；</li> 
      </ol> </li> 
     <li>依赖的排除 
      <ol> 
       <li>依赖排除的设置方式：在需要排除依赖的项目的pom文件中找到依赖项目，然后在依赖的项目工程中加入排除标识</li> 
       <li><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/2019051214464720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMwMzI1ODMz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li> 
       <li>如2中MakeFriends项目会依赖HelloFriend项目，但是HelloFriend项目依赖spring-core，spring-core又会依赖common-logging，这样在MakeFriends中就会依赖两个，可以像2中增加commons-logging的排除</li> 
      </ol> </li> 
     <li>依赖的原则 
      <ol> 
       <li>作用：解决模块工程之间的jar包冲突；</li> 
       <li>原则1：如果依赖中有相同文件的不同版本，maven以最近的版本作为依赖；</li> 
       <li>原则2：如果依赖中有相同文件不同版本并且路径一样，则先声明的版本优先；</li> 
      </ol> </li> 
     <li>统一管理依赖的版本 
      <ol> 
       <li>原来依赖每个jar包版本都是4.0.0，如果需要统一升级为4.1.1，手动升级不可靠</li> 
       <li>建议配置方式： 
        <ol> 
         <li>使用properties标签内使用自定义标签统一声明版本号</li> 
         <li>在需要统一版本的位置使用${自定义标签名}引用声明版本号<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190512144719640.png" alt="在这里插入图片描述"><br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190512144745801.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMwMzI1ODMz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li> 
         <li>自定义标签并不是只能做版本号声明，其他任意需要都可以使用，相当于一个全局变量，例如上图utf-8编码</li> 
        </ol> </li> 
      </ol> </li> 
    </ol> </li> 
   <li>继承 
    <ol> 
     <li>现状 
      <ol> 
       <li>Hello依赖的junit：4.0</li> 
       <li>HelloFriend依赖的junit：4.0</li> 
       <li>MakeFiend依赖的junit：4.9</li> 
      </ol> </li> 
     <li>需求：需要统一管理各个模块的junit版本，因为junit是test范围的依赖，由于不能传递，所以每个工程的版本都不一致；</li> 
     <li>解决思路：将junit依赖版本统一提取到父工程中，在子工程中声明junit依赖时不指定版本，以父工程中统一设定的为准，同时也便于修改；</li> 
     <li>操作步骤 
      <ol> 
       <li>创建一个Maven工程作为父工程，注意打包方式为pom<img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190512144807327.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMwMzI1ODMz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li> 
       <li>在子工程中声明对父工程的引用<img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190512144823749.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMwMzI1ODMz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li> 
       <li>将子工程的坐标中与父工程坐标中重复的内容删除<img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190512144843296.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMwMzI1ODMz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">，重复部分工具也会提示</li> 
       <li>在父工程中统一junit的依赖<img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/2019051214490567.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMwMzI1ODMz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li> 
       <li>在子工程中删除junit依赖的版本号部分<img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190512144922713.png" alt="在这里插入图片描述"></li> 
       <li>注意：配置继承之后，执行安装命令时，需要先安装父工程</li> 
      </ol> </li> 
    </ol> </li> 
   <li>聚合 
    <ol> 
     <li>作用：一键安装各个模块功能</li> 
     <li>配置方式：在一个“总的聚合工程”中配置各个参与聚合的模块<img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190512144937662.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMwMzI1ODMz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li> 
     <li>注意：这里配置的聚合跟配置的子工程路径顺序没关；例如一个Parent工程下有3个子工程a,b,c，但是b依赖a，c依赖b，这样安装的时候依旧会先安装Parent再a再b再c，并不会因为先配置c，在配置b而导致先安装c导致找不到b依赖报错；</li> 
    </ol> </li> 
   <li>依赖信息可以上http://mvnrepository.com/上面去搜索</li> 
  </ol> 
 </div> 
 <link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-258a4616f7.css" rel="stylesheet"> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
