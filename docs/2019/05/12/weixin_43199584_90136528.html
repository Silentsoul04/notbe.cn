<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Linux学习笔记5—Linux常用命令之用户、权限管理 « NotBeCN</title>
  <meta name="description" content="                               Linux学习笔记5—Linux常用命令之用户、权限管理                                  引言   用户是Unix/Linux系统工作中重要的一环，用户管理包括用户与组账号的管理。   在Unix/Linux系统中，不...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2019/05/12/weixin_43199584_90136528.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">Linux学习笔记5—Linux常用命令之用户、权限管理</h1>
    <p class="post-meta">May 12, 2019</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div id="content_views" class="markdown_views prism-tomorrow-night-eighties"> 
  <!-- flowchart 箭头图标 勿删 --> 
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> 
  <!--done--> 
  <div id="topics"> 
   <div class="post"> 
    <h1 class="postTitle"> <a id="cb_post_title_url" class="postTitle2" href="https://www.cnblogs.com/hezhiyao/p/8343788.html" rel="nofollow">Linux学习笔记5—Linux常用命令之用户、权限管理</a> </h1> 
    <div class="clear"></div> 
    <div class="postBody"> 
     <div id="cnblogs_post_body" class="blogpost-body"> 
     </div>
    </div>
   </div>
  </div>
  <h1><a id="_10"></a>引言</h1> 
  <p>用户是Unix/Linux系统工作中重要的一环，用户管理包括用户与组账号的管理。</p> 
  <p>在Unix/Linux系统中，不论是由本机或是远程登录系统，每个系统都必须拥有一个账号，并且对于不同的系统资源拥有不同的使用权限。</p> 
  <p>Unix/Linux系统中的root账号通常用于系统的维护和管理，它对Unix/Linux操作系统的所有部分具有不受限制的访问权限。</p> 
  <p>在Unix/Linux安装的过程中，系统会自动创建许多用户账号，而这些默认的用户就称为“标准用户”。</p> 
  <p>在大多数版本的Unix/Linux中，都不推荐直接使用root账号登录系统。</p> 
  <p>&nbsp;</p> 
  <h3 id="查看当前用户：whoami">&lt;1&gt;查看当前用户：whoami</h3> 
  <p>whoami该命令用户查看当前系统当前账号的用户名。可通过cat /etc/passwd查看系统用户信息。</p> 
  <p>由于系统管理员通常需要使用多种身份登录系统，例如通常使用普通用户登录系统，然后再以su命令切换到root身份对传统进行管理。这时候就可以使用whoami来查看当前用户的身份。</p> 
  <p>&nbsp;<img src="https://images2017.cnblogs.com/blog/937910/201801/937910-20180124212410615-578892904.png" alt=""></p> 
  <p>&nbsp;</p> 
  <h3 id="查看登录用户：who">&lt;2&gt;查看登录用户：who</h3> 
  <p>who命令用于查看当前所有登录系统的用户信息。</p> 
  <p>常用选项：</p> 
  <table> 
   <thead> 
    <tr>
     <th>选项</th>
     <th>含义</th>
    </tr> 
   </thead> 
   <tbody> 
    <tr> 
     <td><span>-m或am I</span></td> 
     <td><span>只显示运行who命令的用户名、登录终端和登录时间</span></td> 
    </tr> 
    <tr> 
     <td><span>-q或--count</span></td> 
     <td><span>只显示用户的登录账号和登录用户的数量</span></td> 
    </tr> 
    <tr> 
     <td><span>-u</span></td> 
     <td><span>在登录时间后显示该用户最后一次操作到当前的时间间隔</span></td> 
    </tr> 
    <tr> 
     <td><span>-u或--heading</span></td> 
     <td><span>显示列标题</span></td> 
    </tr> 
   </tbody> 
  </table> 
  <p><img src="https://images2017.cnblogs.com/blog/937910/201801/937910-20180124212541506-261713965.png" alt="" width="689" height="200"></p> 
  <p>&nbsp;</p> 
  <h3 id="退出登录账户：-exit">&lt;3&gt;退出登录账户： exit</h3> 
  <p>如果是图形界面，退出当前终端；</p> 
  <p>如果是使用ssh远程登录，退出登陆账户；&nbsp; &nbsp; 注释：<strong>远程登入命令：ssh　用户名＠ｉｐ地址　</strong></p> 
  <p>如果是切换后的登陆用户，退出则返回上一个登陆账号。</p> 
  <p>&nbsp;</p> 
  <p>&nbsp;</p> 
  <h3 id="添加用户账号：useradd">&lt;4&gt;添加用户账号：useradd</h3> 
  <p><strong>常用</strong>：<strong>useradd -m 新建用户账号</strong></p> 
  <p>&nbsp;</p> 
  <p>在Unix/Linux中添加用户账号可以使用adduser或useradd命令，因为adduser命令是指向useradd命令的一个链接，因此，这两个命令的使用格式完全一样。</p> 
  <p>useradd命令的使用格式如下： useradd [参数] 新建用户账号&nbsp; &nbsp;</p> 
  <p>&nbsp;</p> 
  <table> 
   <thead> 
    <tr>
     <th>参数</th>
     <th>含义</th>
    </tr> 
   </thead> 
   <tbody> 
    <tr> 
     <td><span>-d</span></td> 
     <td><span>指定用户登录系统时的主目录，如果不使用该参数，系统自动在/home目录下建立与用户名同名目录为主目录</span></td> 
    </tr> 
    <tr> 
     <td><strong><span>-m</span></strong></td> 
     <td><strong><span>自动建立目录</span></strong></td> 
    </tr> 
    <tr> 
     <td><span>-g</span></td> 
     <td><span>指定组名称</span></td> 
    </tr> 
   </tbody> 
  </table> 
  <p>相关说明：</p> 
  <ul> 
   <li>Linux每个用户都要有一个主目录，主目录就是第一次登陆系统，用户的默认当前目录(/home/用户)；</li> 
   <li>每一个用户必须有一个主目录，所以用useradd创建用户的时候，一定给用户指定一个主目录；</li> 
   <li>用户的主目录一般要放到根目录的home目录下，用户的主目录和用户名是相同的；</li> 
   <li>如果创建用户的时候，不指定组名，那么系统会自动创建一个和用户名一样的组名。</li> 
  </ul> 
  <p>&nbsp;</p> 
  <table> 
   <thead> 
    <tr>
     <th>命令</th>
     <th>含义</th>
    </tr> 
   </thead> 
   <tbody> 
    <tr> 
     <td><span>useradd -d /home/abc abc -m　或　useradd - abc -m</span></td> 
     <td><span>创建abc用户，如果/home/abc目录不存在，就自动创建这个目录，同时用户属于abc组</span></td> 
    </tr> 
    <tr> 
     <td><span>useradd -d /home/a a -g test -m　或　useradd&nbsp; a -g test -m</span></td> 
     <td><span>创建一个用户名字叫a，主目录在/home/a，如果主目录不存在，就自动创建主目录，同时用户属于test组</span></td> 
    </tr> 
    <tr> 
     <td><span>cat /etc/passwd</span></td> 
     <td><span>查看系统当前用户名</span></td> 
    </tr> 
   </tbody> 
  </table> 
  <p>&nbsp;注意：使用命令&nbsp;&nbsp;<strong>useradd -m 新建用户账号&nbsp; </strong>添加账户后，还不能用su命令切换账户，需要先为创建账户设置密码。</p> 
  <p>&nbsp;</p> 
  <p>&nbsp;</p> 
  <h3 id="设置用户密码：passwd">&lt;5&gt;设置用户密码：passwd　[用户名]</h3> 
  <p>在Unix/Linux中，超级用户可以使用passwd命令为普通用户设置或修改用户口令。用户也可以直接使用该命令来修改自己的口令，而无需在命令后面使用用户名。</p> 
  <p>&nbsp;<img src="https://images2017.cnblogs.com/blog/937910/201801/937910-20180124220428319-1923455749.png" alt=""></p> 
  <p>&nbsp;</p> 
  <h3 id="删除用户：userdel">&lt;6&gt;删除用户：userdel</h3> 
  <p><strong>常用：userdel -r abc(用户名)</strong></p> 
  <table> 
   <thead> 
    <tr>
     <th>命令</th>
     <th>含义</th>
    </tr> 
   </thead> 
   <tbody> 
    <tr> 
     <td><span>userdel abc(用户名)</span></td> 
     <td><span>删除abc用户，但不会自动删除用户的主目录</span></td> 
    </tr> 
    <tr> 
     <td><strong><span>userdel -r abc(用户名)</span></strong></td> 
     <td><span>删除用户，同时删除用户的主目录</span></td> 
    </tr>
   </tbody>
  </table> 
  <p>&nbsp;</p> 
  <h3 id="切换用户：su">&lt;7&gt;切换用户：su</h3> 
  <p><strong>常用：su - 普通用户</strong></p> 
  <p>&nbsp;</p> 
  <p>可以通过su命令切换用户，su后面可以加“-”。su和su –命令不同之处在于，su -切换到对应的用户时会将当前的工作目录自动转换到切换后的用户主目录：</p> 
  <p>&nbsp;<img src="https://images2017.cnblogs.com/blog/937910/201801/937910-20180124220646365-142609056.png" alt=""></p> 
  <p>注意：</p> 
  <p>如果是ubuntu平台，需要在命令前加“sudo”，如果在某些操作需要管理员才能操作，ubuntu无需切换到root用户即可操作，只需加“sudo”即可。sudo是ubuntu平台下允许系统管理员让普通用户执行一些或者全部的root命令的一个工具，减少了root 用户的登陆和管理时间，提高了安全性。</p> 
  <p>&nbsp;</p> 
  <table> 
   <thead> 
    <tr>
     <th>命令</th>
     <th>含义</th>
    </tr> 
   </thead> 
   <tbody> 
    <tr> 
     <td><span>su</span></td> 
     <td><span>切换到root用户</span></td> 
    </tr> 
    <tr> 
     <td><span>su root</span></td> 
     <td><span>切换到root用户</span></td> 
    </tr> 
    <tr> 
     <td><span>su -</span></td> 
     <td><span>切换到root用户，同时切换目录到/root</span></td> 
    </tr> 
    <tr> 
     <td><span>su - root</span></td> 
     <td><span>切换到root用户，同时切换目录到/root</span></td> 
    </tr> 
    <tr> 
     <td><span>su 普通用户</span></td> 
     <td><span>切换到普通用户</span></td> 
    </tr> 
    <tr> 
     <td><strong><span>su - 普通用户</span></strong></td> 
     <td><strong><span>切换到普通用户，同时切换普通用户所在的目录</span></strong><br><br></td> 
    </tr> 
   </tbody> 
  </table> 
  <p>补充：<strong>直接切换到到root</strong></p> 
  <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<strong> sudo -s</strong></p> 
  <p><img src="https://images2017.cnblogs.com/blog/937910/201801/937910-20180124222051631-1465238160.png" alt="" width="285" height="154"></p> 
  <p>&nbsp;</p> 
  <h3 id="添加、删除组账号：groupadd、groupdel">&lt;8&gt;添加、删除组账号：groupadd、groupdel</h3> 
  <p>使用用法：</p> 
  <p>groupadd 新建组账号 </p> 
  <p>groupdel删除 组账号 </p> 
  <p>cat /etc/group 查看用户组</p> 
  <p>&nbsp;</p> 
  <p>例子：</p> 
  <p><img src="https://images2017.cnblogs.com/blog/937910/201801/937910-20180124231152162-1600292296.png" alt=""></p> 
  <h3>&nbsp;</h3> 
  <h3 id="修改用户所在组：usermod">&lt;9&gt;修改用户所在组：usermod</h3> 
  <p>使用方法：usermod -g 目标用户组 当前用户名</p> 
  <p>例子：</p> 
  <p><img src="https://images2017.cnblogs.com/blog/937910/201801/937910-20180125013146756-452339100.png" alt=""></p> 
  <p>&nbsp;</p> 
  <h3 id="修改文件权限：chmod">&lt;10&gt;修改文件权限：chmod</h3> 
  <p>chmod 修改文件权限有两种使用格式：字母法与数字法。</p> 
  <p>（1）字母法：chmod u/g/o/a +/-/= rwx 文件</p> 
  <table> 
   <thead> 
    <tr>
     <th>[ u/g/o/a ]</th>
     <th>含义</th>
    </tr> 
   </thead> 
   <tbody> 
    <tr> 
     <td><span>u</span></td> 
     <td><span>user 表示该文件的所有者</span></td> 
    </tr> 
    <tr> 
     <td><span>g</span></td> 
     <td><span>group 表示与该文件的所有者属于同一组( group )者，即用户组</span></td> 
    </tr> 
    <tr> 
     <td><span>o</span></td> 
     <td><span>other 表示其他以外的人</span></td> 
    </tr> 
    <tr> 
     <td><span>a</span></td> 
     <td><span>all 表示这三者皆是</span></td> 
    </tr> 
   </tbody> 
  </table> 
  <p>&nbsp;</p> 
  <table> 
   <thead> 
    <tr>
     <th><span>[ +-= ]</span></th>
     <th><span>含义</span></th>
    </tr> 
   </thead> 
   <tbody> 
    <tr> 
     <td><span>+</span></td> 
     <td><span>增加权限</span></td> 
    </tr> 
    <tr> 
     <td><span>-</span></td> 
     <td><span>撤销权限</span></td> 
    </tr> 
    <tr> 
     <td><span>=</span></td> 
     <td><span>设定权限</span></td> 
    </tr> 
   </tbody> 
  </table> 
  <p>&nbsp;</p> 
  <p>&nbsp;</p> 
  <table> 
   <thead> 
    <tr>
     <th>rwx</th>
     <th>含义</th>
    </tr> 
   </thead> 
   <tbody> 
    <tr> 
     <td><span>r</span></td> 
     <td><span>read 表示可读取，对于一个目录，如果没有r权限，那么就意味着不能通过ls查看这个目录的内容。</span></td> 
    </tr> 
    <tr> 
     <td><span>w</span></td> 
     <td><span>write 表示可写入，对于一个目录，如果没有w权限，那么就意味着不能在目录下创建新的文件。</span></td> 
    </tr> 
    <tr> 
     <td><span>x</span></td> 
     <td><span>excute 表示可执行，对于一个目录，如果没有x权限，那么就意味着不能通过cd进入这个目录。</span></td> 
    </tr> 
   </tbody> 
  </table> 
  <p>&nbsp;</p> 
  <p>&nbsp;</p> 
  <p>chmod o+w file 给文件file的其它用户增加写权限：</p> 
  <p>&nbsp;<img src="https://images2017.cnblogs.com/blog/937910/201801/937910-20180125013644428-1145298424.png" alt=""></p> 
  <p>chmod u-r file 给文件file的拥有者减去读的权限：</p> 
  <p><img src="../Images/01-linux基础-55.png" alt=""></p> 
  <p><img src="https://images2017.cnblogs.com/blog/937910/201801/937910-20180125013703553-1607726087.png" alt=""></p> 
  <p>&nbsp;</p> 
  <p>chmod g=x file设置文件file的同组用户的权限为可执行，同时去除读、写权限：&nbsp;</p> 
  <p>&nbsp;<img src="https://images2017.cnblogs.com/blog/937910/201801/937910-20180125013719365-113257154.png" alt=""></p> 
  <p>&nbsp;</p> 
  <p>如果需要同时进行设定拥有者、同组者以及其他人的权限，参考如下：&nbsp;</p> 
  <p><img src="https://images2017.cnblogs.com/blog/937910/201801/937910-20180125013746303-2131214314.png" alt=""></p> 
  <p><img src="https://images2017.cnblogs.com/blog/937910/201801/937910-20180125013911350-1170655885.png" alt=""></p> 
  <p>（2）数字法：“rwx” 这些权限也可以用数字来代替</p> 
  <table> 
   <thead> 
    <tr>
     <th>字母</th>
     <th>说明</th>
    </tr> 
   </thead> 
   <tbody> 
    <tr> 
     <td><span>r</span></td> 
     <td><span>读取权限，数字代号为 "4"</span></td> 
    </tr> 
    <tr> 
     <td><span>w</span></td> 
     <td><span>写入权限，数字代号为 "2"</span></td> 
    </tr> 
    <tr> 
     <td><span>x</span></td> 
     <td><span>执行权限，数字代号为 "1"</span></td> 
    </tr> 
    <tr> 
     <td><span>-</span></td> 
     <td><span>不具任何权限，数字代号为 "0"</span></td> 
    </tr> 
   </tbody> 
  </table> 
  <p>如执行：chmod u=rwx,g=rx,o=r filename 就等同于：chmod u=7,g=5,o=4 filename</p> 
  <p>chmod 751 file：</p> 
  <ul> 
   <li>文件所有者：读、写、执行权限</li> 
   <li>同组用户：读、执行的权限</li> 
   <li>其它用户：执行的权限</li> 
  </ul> 
  <p>&nbsp;<img src="https://images2017.cnblogs.com/blog/937910/201801/937910-20180125014015662-423694366.png" alt=""></p> 
  <p><img src="https://images2017.cnblogs.com/blog/937910/201801/937910-20180125014024944-1586959776.png" alt=""></p> 
  <p>注意：如果想递归所有目录加上相同权限，需要加上参数“ -R ”。 如：chmod 777 test/ -R 递归 test 目录下所有文件加 777 权限</p> 
  <p>&nbsp;</p> 
  <p>&nbsp;</p> 
  <h3 id="修改文件所有者：chown">&lt;11&gt;修改文件所有者：chown</h3> 
  <p>&nbsp;<img src="https://images2017.cnblogs.com/blog/937910/201801/937910-20180125014156240-180836248.png" alt="" width="416" height="138"></p> 
  <h3 id="修改文件所属组：chgrp">&lt;12&gt;修改文件所属组：chgrp</h3> 
  <p><img src="https://images2017.cnblogs.com/blog/937910/201801/937910-20180125014606756-1251089641.png" alt="" width="469" height="150"></p> 
  <p>注意区别 usermod 与chgrp</p> 
  <ul> 
   <li>　　usermod&nbsp;修改用户所在组的命令</li> 
   <li>　　chgrp修改文件所属组</li> 
  </ul> 
  <p><strong>来源：整理自网络，如有侵权会立即删除</strong><br> [参考笔记来自 ] (<a href="https://www.cnblogs.com/hezhiyao/p/8343788.html" rel="nofollow">https://www.cnblogs.com/hezhiyao/p/8343788.html</a>)</p> 
 </div> 
 <link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-258a4616f7.css" rel="stylesheet"> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
