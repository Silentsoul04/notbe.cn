<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>SpringBoot(一)——注解配置 « NotBeCN</title>
  <meta name="description" content="                       文章目录                  一、简介             1、概述       2、特性       3、四大核心            二、搭建环境      三、入门小程序--HelloWorld      四、配置文件            ...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2019/05/12/weixin_44240370_90139387.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">SpringBoot(一)——注解配置</h1>
    <p class="post-meta">May 12, 2019</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div id="content_views" class="markdown_views prism-atom-one-light"> 
  <!-- flowchart 箭头图标 勿删 --> 
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> 
  <p></p>
  <div class="toc">
   <h3>文章目录</h3>
   <ul>
    <ul>
     <ul>
      <li><a href="#_1" rel="nofollow">一、简介</a></li>
      <ul>
       <li><a href="#1_2" rel="nofollow">1、概述</a></li>
       <li><a href="#2_6" rel="nofollow">2、特性</a></li>
       <li><a href="#3_13" rel="nofollow">3、四大核心</a></li>
      </ul>
      <li><a href="#_18" rel="nofollow">二、搭建环境</a></li>
      <li><a href="#HelloWorld_24" rel="nofollow">三、入门小程序--HelloWorld</a></li>
      <li><a href="#_82" rel="nofollow">四、配置文件</a></li>
      <ul>
       <li><a href="#1YML_83" rel="nofollow">1、YML文件</a></li>
       <li><a href="#2YML_90" rel="nofollow">2、YML语法</a></li>
       <ul>
        <li><a href="#1_91" rel="nofollow">&lt;1&gt;、基本语法</a></li>
        <li><a href="#2_94" rel="nofollow">&lt;2&gt;、值的写法</a></li>
        <ul>
         <li><a href="#1_95" rel="nofollow">(1)、字面量(数字、字符串、布尔)</a></li>
         <li><a href="#2Map_102" rel="nofollow">(2)、对象、Map</a></li>
         <li><a href="#3List_Set_114" rel="nofollow">(3)、数组(List, Set)</a></li>
         <li><a href="#4_126" rel="nofollow">(4)、简单实现、基于以上的语法</a></li>
        </ul>
       </ul>
       <li><a href="#3_276" rel="nofollow">3、配置文件注入</a></li>
       <ul>
        <li><a href="#1PropertySource_277" rel="nofollow">&lt;1&gt;、@PropertySource</a></li>
        <li><a href="#2ImportResource_295" rel="nofollow">&lt;2&gt;、@ImportResource</a></li>
       </ul>
       <li><a href="#4_359" rel="nofollow">4、配置文件占位符</a></li>
       <li><a href="#5Profile_377" rel="nofollow">5、Profile</a></li>
       <ul>
        <li><a href="#1Profile_379" rel="nofollow">&lt;1&gt;、多Profile文件</a></li>
        <li><a href="#2yml_382" rel="nofollow">&lt;2&gt;、yml支持多文档块方式</a></li>
        <li><a href="#3Profile_402" rel="nofollow">&lt;3&gt;、激活指定Profile</a></li>
       </ul>
       <li><a href="#6_409" rel="nofollow">6、配置文件的加载位置</a></li>
       <li><a href="#7_418" rel="nofollow">7、自动配置原理</a></li>
       <ul>
        <li><a href="#1SpringBoot_EnableAutoConfiguration_419" rel="nofollow">&lt;1&gt;、SpringBoot启动的时候加载主配置类，开启了自动配置功能 ==@EnableAutoConfiguration==</a></li>
        <li><a href="#2EnableAutoConfiguration__420" rel="nofollow">&lt;2&gt;、@EnableAutoConfiguration 作用</a></li>
        <li><a href="#3_425" rel="nofollow">&lt;3&gt;、每一个自动配置类进行自动配置功能</a></li>
        <li><a href="#4HttpEncodingAutoConfigurationHttp_426" rel="nofollow">&lt;4&gt;、以HttpEncodingAutoConfiguration（Http编码自动配置）为例解释自动配置原理</a></li>
        <li><a href="#5Properties_458" rel="nofollow">&lt;5&gt;、所有的配置类都是在不同的Properties类中进行封装的</a></li>
       </ul>
      </ul>
     </ul>
    </ul>
   </ul>
  </div>
  <p></p> 
  <h3><a id="_1"></a>一、简介</h3> 
  <h4><a id="1_2"></a>1、概述</h4> 
  <ul> 
   <li>SpringBoot是Spring一个全新的框架，用来简化Spring应用程序的创建和开发，简化了ssm框架开发的过程。</li> 
   <li>使用SpringBoot之后，可以说是抛弃了繁琐的xml文件配置过程，采用大量默认配置来简化开发过程。</li> 
   <li>采用了SpringBoot可以非常容易和快速的创建基于Spring框架的应用程序，让各方面的配置变得更加简单。</li> 
  </ul> 
  <h4><a id="2_6"></a>2、特性</h4> 
  <p>能够快速创建基于Spring的应用程序<br> 能够直接使用java main方法启动内嵌的Tomcat，Jetty服务器运行SpringBoot程序，不需要部署war包文件<br> 提供约定的starter POM简化了Maven的配置，使Maven的配置变得更简单<br> 根据项目的Maven依赖配置，SpringBoot自动配置Spring，SpringMVC<br> 提供了程序的健康检查等功能<br> 基本可以实现完全不使用xml来配置文件，采用注解配置</p> 
  <h4><a id="3_13"></a>3、四大核心</h4> 
  <ul> 
   <li>自动配置：针对很多应用程序和常见的应用功能，SpringBoot能自动提供相关配置</li> 
   <li>起步依赖：告知SpringBoot需要什么功能就可以自动引入所需要的依赖库</li> 
   <li>Actuator：可以深入运行SpringBoot，探查内部信息</li> 
   <li>命令行界面：可选择性</li> 
  </ul> 
  <h3><a id="_18"></a>二、搭建环境</h3> 
  <p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190512152431865.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDI0MDM3MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190512152443608.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDI0MDM3MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190512152454841.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDI0MDM3MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> 等待下载完成即可<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190512152517976.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDI0MDM3MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> 
  <h3><a id="HelloWorld_24"></a>三、入门小程序–HelloWorld</h3> 
  <p>创建一个springboot应用类，也就是像我们mvc的index.jsp一样的那个启动类，起名叫HelloWorldMainApplication<br> 用@SpringBootApplication标注、说明这是一个SpringBoot应用类，然后再创建一个Controller的class，和SpringBoot应用类连接上，即可完成。<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190512153316259.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDI0MDM3MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> 
  <pre><code>@SpringBootApplication
public class HelloWorldMainApplication {

    public static void main(String[] args) {

        //Spring应用启动
        SpringApplication.run(HelloWorldMainApplication.class, args);
    }
}
</code></pre> 
  <pre><code>@Controller
public class HelloController {

    @ResponseBody
    @RequestMapping("/hello")
    public String hello(){
        return "hello world!";
    }
}
</code></pre> 
  <p>@<strong>SpringBootApplication</strong>: SpringBoot应用标注在某个类上说明这个类是SpringBoot的主配置类，SpringBoot就应该运行这个类的main方法来启动SpringBoot应用；</p> 
  <pre><code>@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Inherited
@SpringBootConfiguration
@EnableAutoConfiguration
@ComponentScan(excludeFilters = {
      @Filter(type = FilterType.CUSTOM, classes = TypeExcludeFilter.class),
      @Filter(type = FilterType.CUSTOM, classes = AutoConfigurationExcludeFilter.class) })
public @interface SpringBootApplication {
</code></pre> 
  <p>@<strong>SpringBootConfiguration</strong>:Spring Boot的配置类；</p> 
  <p>标注在某个类上，表示这是一个Spring Boot的配置类；<br> @<strong>Configuration</strong>:配置类上来标注这个注解；<br> 配置类 ----- 配置文件；配置类也是容器中的一个组件；@Component<br> @<strong>EnableAutoConfiguration</strong>：开启自动配置功能；<br> 以前我们需要配置的东西，Spring Boot帮我们自动配置；@<strong>EnableAutoConfiguration</strong>告诉SpringBoot开启自动配置功能；这样自动配置才能生效；</p> 
  <pre><code>@AutoConfigurationPackage
@Import(EnableAutoConfigurationImportSelector.class)
public @interface EnableAutoConfiguration {
</code></pre> 
  <p>@<strong>AutoConfigurationPackage</strong>：自动配置包<br> @<strong>Import</strong>(AutoConfigurationPackages.Registrar.class)：<br> Spring的底层注解@Import，将主配置类（@SpringBootApplication标注的类）的所在包及下面所有子包里面的所有组件扫描到Spring容器<br> <strong>EnableAutoConfigurationImportSelector</strong>：导入哪些组件的选择器；<br> 将所有需要导入的组件以全类名的方式返回；这些组件就会被添加到容器中；<br> 会给容器中导入非常多的自动配置类（xxxAutoConfiguration）；就是给容器中导入这个场景需要的所有组件，并配置好这些组件；</p> 
  <h3><a id="_82"></a>四、配置文件</h3> 
  <h4><a id="1YML_83"></a>1、YML文件</h4> 
  <p>之前我们使用.properties文件来配置我们需要的功能，我们也可以使用.yml方式来配置<br> 在resources文件下创建一个application.yml，在里面编写即可。</p> 
  <pre><code>server:
  port: 8081
</code></pre> 
  <h4><a id="2YML_90"></a>2、YML语法</h4> 
  <h5><a id="1_91"></a>&lt;1&gt;、基本语法</h5> 
  <p>k:(空格)v：表示一对键值对（空格必须有）；<br> 以<strong>空格</strong>的缩进来控制层级关系；只要是左对齐的一列数据，都是同一个层级的，并且属性和值也是大小写敏感。</p> 
  <h5><a id="2_94"></a>&lt;2&gt;、值的写法</h5> 
  <h6><a id="1_95"></a>(1)、字面量(数字、字符串、布尔)</h6> 
  <p>k: v：字面直接来写；<br> 字符串默认不用加上单引号或者双引号；<br> “”：双引号；不会转义字符串里面的特殊字符；特殊字符会作为本身想表示的意思<br> name: “lisi \n wangwu”：输出；lisi 换行 wangwu<br> ‘’：单引号；会转义特殊字符，特殊字符最终只是一个普通的字符串数据<br> name: ‘lisi \n wangwu’：输出；lisi \n wangwu</p> 
  <h6><a id="2Map_102"></a>(2)、对象、Map</h6> 
  <p>k: v:在下一行来写对象的属性和值的关系；<font color="red">注意缩进</font><br> 对象还是k: v方式</p> 
  <pre><code>friends:
		lastName: wangwu
		age: 40
</code></pre> 
  <p>行内写法：</p> 
  <pre><code>friends: {lastName: wangwu,age: 40}
</code></pre> 
  <h6><a id="3List_Set_114"></a>(3)、数组(List, Set)</h6> 
  <p>用- 值来表示数组中的一个元素</p> 
  <pre><code>pets:
 - cat
 - dog
 - elephant
</code></pre> 
  <p>行内写法：</p> 
  <pre><code>pets: [cat,dog,pig]
</code></pre> 
  <h6><a id="4_126"></a>(4)、简单实现、基于以上的语法</h6> 
  <p>首先编写一个主类Person，写几个私有属性，并且补上get、set方法</p> 
  <pre><code>package com.example.bean;

import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.context.annotation.PropertySource;
import org.springframework.stereotype.Component;

import java.util.Date;
import java.util.List;
import java.util.Map;

/**
 * 将配置文件中配置的每一个属性的值，映射到这个组件中
 * @ConfigurationProperties：告诉SpringBoot将本类中的所有属性和配置文件中相关的配置进行绑定；
 *      prefix = "person"：配置文件中哪个下面的所有属性进行一一映射
 *
 * 只有这个组件是容器中的组件，才能容器提供的@ConfigurationProperties功能；
 *
 */
@Component
@ConfigurationProperties(prefix = "person")
public class Person {

    private String lastName;
    private Integer age;
    private boolean boss;
    private Date birth;
    private Map&lt;String, Object&gt; map;
    private List&lt;Object&gt; list;
    private Dog dog;

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    public Integer getAge() {
        return age;
    }

    public void setAge(Integer age) {
        this.age = age;
    }

    public boolean isBoss() {
        return boss;
    }

    public void setBoss(boolean boss) {
        this.boss = boss;
    }

    public Date getBirth() {
        return birth;
    }

    public void setBirth(Date birth) {
        this.birth = birth;
    }

    public Map&lt;String, Object&gt; getMap() {
        return map;
    }

    public void setMap(Map&lt;String, Object&gt; map) {
        this.map = map;
    }

    public List&lt;Object&gt; getList() {
        return list;
    }

    public void setList(List&lt;Object&gt; list) {
        this.list = list;
    }

    public Dog getDog() {
        return dog;
    }

    public void setDog(Dog dog) {
        this.dog = dog;
    }

    @Override
    public String toString() {
        return "person{" +
                "lastName='" + lastName + '\'' +
                ", age=" + age +
                ", boss=" + boss +
                ", birth=" + birth +
                ", map=" + map +
                ", list=" + list +
                ", dog=" + dog +
                '}';
    }
}
</code></pre> 
  <p>Dog类中声明了name和age，进行yml文件的配置</p> 
  <pre><code>person:
  lastName: zpw
  age: 19
  boss: true
  birth: 1998/01/01
  map: {k1: v1, k2: 11}
  list:
   - zz
   - pp
  dog:
   name: ww
   age: 2
</code></pre> 
  <p>编写测试方法：</p> 
  <pre><code>@RunWith(SpringRunner.class)
@SpringBootTest
public class Springboot02ConfigApplicationTests {

    @Autowired
    Person person;
    
    @Test
    public void contextLoads() {
        System.out.println(person);
    }
}
</code></pre> 
  <p>直接运行程序即可。<br> 这时我们思考如何使用properties文件来配置。<br> 在配置之前、我们需要在设置中修改一个配置、不然会出现乱码<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190512161009522.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDI0MDM3MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> 这时，我们可以在properties中配置达到和yml相同的效果</p> 
  <pre><code>person.last-name=zpw
person.age=10
person.birth=2019/09/9
person.boss=true
person.list=a,b
person.map.k1=1
person.map.k2=12
person.dog.name=dog
person.dog.age=2
</code></pre> 
  <h4><a id="3_276"></a>3、配置文件注入</h4> 
  <h5><a id="1PropertySource_277"></a>&lt;1&gt;、@PropertySource</h5> 
  <p>编写的类，默认加载配置都会从resources目录下加载application.properties和application.yml文件的配置，但是我们也可以按照自己的想法去读取自己所创建的配置文件。<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190512163031337.png" alt="在这里插入图片描述"></p> 
  <pre><code>person.last-name=zz
person.age=10
person.birth=2019/09/9
person.boss=true
person.list=a,b
person.map.k1=1
person.map.k2=12
person.dog.name=dog
person.dog.age=2
</code></pre> 
  <p>在Person类上加上一个注解即可。</p> 
  <pre><code>@PropertySource(value = {"classpath:person.properties"})
</code></pre> 
  <h5><a id="2ImportResource_295"></a>&lt;2&gt;、@ImportResource</h5> 
  <p>导入Spring的配置文件，让配置文件里面的内容生效；<br> Spring Boot里面没有Spring的配置文件，我们自己编写的配置文件，也不能自动识别；<br> 想让Spring的配置文件生效，加载进来；需要将@<strong>ImportResource</strong>标注在一个配置类上</p> 
  <pre><code>@ImportResource(locations = {"classpath:beans.xml"})
@SpringBootApplication
public class Springboot02ConfigApplication {

    public static void main(String[] args) {
        SpringApplication.run(Springboot02ConfigApplication.class, args);
    }
}
</code></pre> 
  <p>beans.xml配置文件如下：</p> 
  <pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"&gt;
    &lt;bean id="helloService" class="com.example.service.HelloService"&gt;&lt;/bean&gt;
    
&lt;/beans&gt;
</code></pre> 
  <p>测试方法：</p> 
  <pre><code>@RunWith(SpringRunner.class)
@SpringBootTest
public class Springboot02ConfigApplicationTests {
    @Autowired
    ApplicationContext ioc;

    @Test
    public void testHelloService(){
        boolean b = ioc.containsBean("helloService");
        System.out.println(b);
    }
}
</code></pre> 
  <p>以上俩种方法都是手动添加组件来完成配置；<br> SpringBoot推荐给容器中添加组件的方式：推荐使用全注解的方式<br> 1、配置类@Configuration------&gt;Spring配置文件<br> 2、使用@Bean给容器中添加组件</p> 
  <pre><code>/**
 * 指明当前类是一个配置类
 */
@Configuration
public class MyAppConfig {

    //将方法的返回值添加到容器中；容器中这个组件默认的id就是方法名
    @Bean
    public HelloService helloService(){

        System.out.println("配置类@Bean给容器中添加组件了");
        return new HelloService();
    }
}
</code></pre> 
  <p>将beans.xml配置注释，再进行测试，也是可以成功的。</p> 
  <h4><a id="4_359"></a>4、配置文件占位符</h4> 
  <p>可以使用随机数：</p> 
  <pre><code>${random.value}、${random.int}、${random.long}
${random.int(10)}、${random.int[1024,65536]}
</code></pre> 
  <p>占位符获取之前配置的值，如果没有可以是用：指定默认值</p> 
  <pre><code>person.last-name=zz${random.uuid}
person.age=${random.int}
person.birth=2019/09/9
person.boss=true
person.list=a,b
person.map.k1=1
person.map.k2=12
person.dog.name=${person_hello:hello}_dog
person.dog.age=2
</code></pre> 
  <h4><a id="5Profile_377"></a>5、Profile</h4> 
  <p>Profile是Spring对不同环境提供不同配置功能的支持，可以通过激活、指定参数等方式快速切换环境</p> 
  <h5><a id="1Profile_379"></a>&lt;1&gt;、多Profile文件</h5> 
  <p>我们在主配置文件编写的时候，文件名可以是 application-{profile}.properties/yml<br> 默认使用application.properties的配置；</p> 
  <h5><a id="2yml_382"></a>&lt;2&gt;、yml支持多文档块方式</h5> 
  <pre><code>server:
  port: 8888
spring:
  profiles:
    active: dev
# 默认使用8888，一旦为激活状态就会转换为dev就是8083
---
server:
  port: 8083
spring:
  profiles: dev

---
server:
  port: 8084
spring:
  profiles: prod
</code></pre> 
  <h5><a id="3Profile_402"></a>&lt;3&gt;、激活指定Profile</h5> 
  <p>1、在配置文件中指定 spring.profiles.active=dev，即可切换到开发模式<br> 2、命令行：<br> java -jar springboot-02-config-0.0.1-SNAPSHOT.jar --spring.profiles.active=dev；<br> 可以直接在测试的时候，配置传入命令行参数<br> 3、虚拟机参数；<br> -Dspring.profiles.active=dev</p> 
  <h4><a id="6_409"></a>6、配置文件的加载位置</h4> 
  <p>springboot 启动会扫描以下位置的application.properties或者application.yml文件作为Spring boot的默认配置文件<br> –file:./config/（根目录下的config目录下）<br> –file:./ （根目录下）<br> –classpath:/config/ （resources的config目录下）<br> –classpath:/ （resources目录下）<br> 优先级由高到底，高优先级的配置会覆盖低优先级的配置；<br> SpringBoot会从这四个位置全部加载主配置文件；<strong>互补配置</strong>；<br> <mark>我们还可以通过spring.config.location来改变默认的配置文件位置</mark>：前提是项目已经打好包，可以使用命令行参数来修改。</p> 
  <h4><a id="7_418"></a>7、自动配置原理</h4> 
  <h5><a id="1SpringBoot_EnableAutoConfiguration_419"></a>&lt;1&gt;、SpringBoot启动的时候加载主配置类，开启了自动配置功能 <mark>@EnableAutoConfiguration</mark></h5> 
  <h5><a id="2EnableAutoConfiguration__420"></a>&lt;2&gt;、@EnableAutoConfiguration 作用</h5> 
  <ul> 
   <li>利用EnableAutoConfigurationImportSelector给容器中导入一些组件</li> 
   <li>可以查看selectImports()方法的内容；</li> 
   <li>List configurations = getCandidateConfigurations(annotationMetadata, attributes);获取候选的配置<br> <strong><mark>将 类路径下 META-INF/spring.factories 里面配置的所有EnableAutoConfiguration的值加入到容器中；</mark></strong></li> 
  </ul> 
  <h5><a id="3_425"></a>&lt;3&gt;、每一个自动配置类进行自动配置功能</h5> 
  <h5><a id="4HttpEncodingAutoConfigurationHttp_426"></a>&lt;4&gt;、以HttpEncodingAutoConfiguration（Http编码自动配置）为例解释自动配置原理</h5> 
  <pre><code>@Configuration   //表示这是一个配置类，以前编写的配置文件一样，也可以给容器中添加组件
@EnableConfigurationProperties(HttpEncodingProperties.class)  //启动指定类的ConfigurationProperties功能；将配置文件中对应的值和HttpEncodingProperties绑定起来；并把HttpEncodingProperties加入到ioc容器中

@ConditionalOnWebApplication //Spring底层@Conditional注解（Spring注解版），根据不同的条件，如果满足指定的条件，整个配置类里面的配置就会生效；    判断当前应用是否是web应用，如果是，当前配置类生效

@ConditionalOnClass(CharacterEncodingFilter.class)  //判断当前项目有没有这个类CharacterEncodingFilter；SpringMVC中进行乱码解决的过滤器；

@ConditionalOnProperty(prefix = "spring.http.encoding", value = "enabled", matchIfMissing = true)  //判断配置文件中是否存在某个配置  spring.http.encoding.enabled；如果不存在，判断也是成立的
//即使我们配置文件中不配置pring.http.encoding.enabled=true，也是默认生效的；
public class HttpEncodingAutoConfiguration {
  
  	//他已经和SpringBoot的配置文件映射了
  	private final HttpEncodingProperties properties;
  
   //只有一个有参构造器的情况下，参数的值就会从容器中拿
  	public HttpEncodingAutoConfiguration(HttpEncodingProperties properties) {
		this.properties = properties;
	}
  
    @Bean   //给容器中添加一个组件，这个组件的某些值需要从properties中获取
	@ConditionalOnMissingBean(CharacterEncodingFilter.class) //判断容器没有这个组件？
	public CharacterEncodingFilter characterEncodingFilter() {
		CharacterEncodingFilter filter = new OrderedCharacterEncodingFilter();
		filter.setEncoding(this.properties.getCharset().name());
		filter.setForceRequestEncoding(this.properties.shouldForce(Type.REQUEST));
		filter.setForceResponseEncoding(this.properties.shouldForce(Type.RESPONSE));
		return filter;
	}
</code></pre> 
  <p>根据当前不同的条件判断，决定这个配置类是否生效。</p> 
  <h5><a id="5Properties_458"></a>&lt;5&gt;、所有的配置类都是在不同的Properties类中进行封装的</h5> 
  <pre><code>@ConfigurationProperties(prefix = "spring.http.encoding")  //从配置文件中获取指定的值和bean的属性进行绑定
public class HttpEncodingProperties {

   public static final Charset DEFAULT_CHARSET = Charset.forName("UTF-8");
</code></pre> 
  <p><strong>总结</strong><br> <strong>1）、SpringBoot启动会加载大量的自动配置类</strong><br> <strong>2）、查看我们需要的功能有没有SpringBoot默认写好的自动配置类；</strong><br> <strong>3）、我们再来看这个自动配置类中到底配置了哪些组件；（只要我们需要用的组件有，我们就不需要再来配置）</strong><br> <strong>4）、给容器中自动配置类添加组件的时候，会从properties类中获取某些属性。我们就可以在配置文件中指定这些属性的值；</strong></p> 
  <p>xxxxAutoConfigurartion：自动配置类；<br> 给容器中添加组件<br> xxxxProperties:封装配置文件中相关属性；</p> 
 </div> 
 <link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-258a4616f7.css" rel="stylesheet"> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
