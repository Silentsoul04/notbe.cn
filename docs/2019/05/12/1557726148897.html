<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>我用Python爬了4400条淘宝商品数据，竟发现了这些“潜规则 « NotBeCN</title>
  <meta name="description" content="         本文记录了笔者用 Python 爬取淘宝某商品的全过程，并对商品数据进行了挖掘与分析，最终得出结论。      项目内容          本案例选择商品类目：沙发。      数量：共 100 页 4400 个商品。      筛选条件：天猫、销量从高到低、价格 500 元以上。      项...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2019/05/12/1557726148897.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">我用Python爬了4400条淘宝商品数据，竟发现了这些“潜规则</h1>
    <p class="post-meta">May 12, 2019</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <p>本文记录了笔者用 Python 爬取淘宝某商品的全过程，并对商品数据进行了挖掘与分析，最终得出结论。</p> 
  <p><img alt="我用Python爬了4400条淘宝商品数据，竟发现了这些“潜规则”" class="has" src="http://p3.pstatp.com/large/6c360000d36199c13ff6"></p> 
  <p><strong>项目内容</strong></p> 
  <p><img alt="我用Python爬了4400条淘宝商品数据，竟发现了这些“潜规则”" class="has" src="http://p3.pstatp.com/large/6c32000116e7a5c69763"></p> 
  <ul>
   <li> <p>本案例选择商品类目：沙发。</p> </li> 
   <li> <p>数量：共 100 页 4400 个商品。</p> </li> 
   <li> <p>筛选条件：天猫、销量从高到低、价格 500 元以上。</p> </li> 
  </ul>
  <p><strong>项目目的</strong></p> 
  <ul>
   <li> <p><strong>对商品标题进行文本分析，词云可视化</strong></p> </li> 
   <li> <p><strong>不同关键词 word 对应的 sales 的统计分析</strong></p> </li> 
   <li> <p><strong>商品的价格分布情况分析</strong></p> </li> 
   <li> <p><strong>商品的销量分布情况分析</strong></p> </li> 
   <li> <p><strong>不同价格区间的商品的平均销量分布</strong></p> </li> 
   <li> <p><strong>商品价格对销量的影响分析</strong></p> </li> 
   <li> <p><strong>商品价格对销售额的影响分析</strong></p> </li> 
   <li> <p><strong>不同省份或城市的商品数量分布</strong></p> </li> 
   <li> <p><strong>不同省份的商品平均销量分布</strong></p> </li> 
  </ul>
  <p>注：本项目仅以以上几项分析为例。</p> 
  <p><strong>项目步骤</strong></p> 
  <ul>
   <li> <p><strong>数据采集：Python 爬取淘宝网商品数据</strong></p> </li> 
   <li> <p><strong>对数据进行清洗和处理</strong></p> </li> 
   <li> <p><strong>文本分析：jieba 分词、wordcloud 可视化</strong></p> </li> 
   <li> <p><strong>数据柱形图可视化：barh</strong></p> </li> 
   <li> <p><strong>数据直方图可视化：hist</strong></p> </li> 
   <li> <p><strong>数据散点图可视化：scatter</strong></p> </li> 
   <li> <p><strong>数据回归分析可视化：regplot</strong></p> </li> 
  </ul>
  <p><strong>工具&amp;模块</strong></p> 
  <ul>
   <li> <p>工具：本案例代码编辑工具 Anaconda 的 Spyder。</p> </li> 
   <li> <p>模块：requests、retrying、missingno、jieba、matplotlib、wordcloud、imread、seaborn 等。</p> </li> 
  </ul>
  <blockquote> 
   <p>如果有想学习python的程序员，可来我的python学习扣qun：835017344，免费送python的视频教程噢！我每晚上8点还会在群内直播讲解python知识，欢迎大家前来学习交流。&nbsp;</p> 
  </blockquote> 
  <p><img alt="" class="has" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190505140908949.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3cxNzY4ODk3NzQ4MQ==,size_16,color_FFFFFF,t_70">&nbsp;</p> 
  <p><strong>爬取数据</strong></p> 
  <p>因淘宝网是反爬虫的，虽然使用多线程、修改 headers 参数，但仍然不能保证每次 100% 爬取，所以我增加了循环爬取，每次循环爬取未爬取成功的页 ，直至所有页爬取成功停止。</p> 
  <p>说明：淘宝商品页为 JSON 格式，这里使用正则表达式进行解析。</p> 
  <p><strong>代码如下：</strong></p> 
  <p><img alt="我用Python爬了4400条淘宝商品数据，竟发现了这些“潜规则”" class="has" src="http://p1.pstatp.com/large/6c370000768a6b8dc15f"></p> 
  <p><strong>数据清洗、处理</strong></p> 
  <p>数据清洗、处理这个步骤也可以在 Excel 中完成，再读入数据。</p> 
  <p><strong>代码如下：</strong></p> 
  <p><img alt="我用Python爬了4400条淘宝商品数据，竟发现了这些“潜规则”" class="has" src="http://p9.pstatp.com/large/6c350000e86d29b43cc0"></p> 
  <p><img alt="我用Python爬了4400条淘宝商品数据，竟发现了这些“潜规则”" class="has" src="http://p3.pstatp.com/large/6c340001d07d2dbb5653"></p> 
  <p>说明：根据需求，本案例中只取了 item_loc，raw_title，view_price，view_sales 这 4 列数据，主要对区域、标题、价格、销量进行分析。</p> 
  <p><strong>代码如下：</strong></p> 
  <p><img alt="我用Python爬了4400条淘宝商品数据，竟发现了这些“潜规则”" class="has" src="http://p1.pstatp.com/large/6c360000d363d5b18b45"></p> 
  <p><strong>数据挖掘与分析</strong></p> 
  <p><strong>对 raw_title 列标题进行文本分析</strong></p> 
  <p>使用结巴分词器，安装模块 pip install jieba：</p> 
  <p><img alt="我用Python爬了4400条淘宝商品数据，竟发现了这些“潜规则”" class="has" src="http://p9.pstatp.com/large/6c340001d07e08058869"></p> 
  <p>对 title_s（list of list 格式）中的每个 list 的元素（str）进行过滤，剔除不需要的词语，即把停用词表 stopwords 中有的词语都剔除掉：</p> 
  <p><img alt="我用Python爬了4400条淘宝商品数据，竟发现了这些“潜规则”" class="has" src="http://p1.pstatp.com/large/6c370000768985ec069b"></p> 
  <p>因为下面要统计每个词语的个数，所以为了准确性，这里对过滤后的数据 title_clean 中的每个 list 的元素进行去重，即每个标题被分割后的词语唯一。</p> 
  <p><img alt="我用Python爬了4400条淘宝商品数据，竟发现了这些“潜规则”" class="has" src="http://p3.pstatp.com/large/6c310005cad07dbdecd1"></p> 
  <p>观察 word_count 表中的词语，发现 jieba 默认的词典无法满足需求。</p> 
  <p>有的词语（如可拆洗、不可拆洗等）却被 cut，这里根据需求对词典加入新词（也可以直接在词典 dict.txt 里面增删，然后载入修改过的 dict.txt）。</p> 
  <p><img alt="我用Python爬了4400条淘宝商品数据，竟发现了这些“潜规则”" class="has" src="http://p9.pstatp.com/large/6c32000116e981b9ab67"></p> 
  <p>词云可视化需要安装 wordcloud 模块。</p> 
  <p>安装模块有两种方法：</p> 
  <ul>
   <li> <p><strong>pip install wordcloud</strong></p> </li> 
   <li> <p><strong>下载 Packages 安装：pip install 软件包名称</strong></p> </li> 
  </ul>
  <p>软件包下载地址：https://www.lfd.uci.edu/~gohlke/pythonlibs/#wordcloud</p> 
  <p>注意：要把下载的软件包放在 Python 安装路径下。</p> 
  <p><strong>代码如下：</strong></p> 
  <p><img alt="我用Python爬了4400条淘宝商品数据，竟发现了这些“潜规则”" class="has" src="http://p1.pstatp.com/large/6c310005cacf93afe733"></p> 
  <p><img alt="我用Python爬了4400条淘宝商品数据，竟发现了这些“潜规则”" class="has" src="http://p1.pstatp.com/large/6c360000d36574b9dd70"></p> 
  <p>分析结论：</p> 
  <ul>
   <li> <p>组合、整装商品占比很高。</p> </li> 
   <li> <p>从沙发材质看：布艺沙发占比很高，比皮艺沙发多。</p> </li> 
   <li> <p>从沙发风格看：简约风格最多，北欧风次之，其他风格排名依次是美式、中式、日式、法式等。</p> </li> 
   <li> <p>从户型看：小户型占比最高、大小户型次之，大户型最少。</p> </li> 
  </ul>
  <p><strong>不同关键词 word 对应的 sales 之和的统计分析</strong></p> 
  <p>说明：例如词语“简约”，则统计商品标题中含有“简约”一词的商品的销量之和，即求出具有“简约”风格的商品销量之和。</p> 
  <p><strong>代码如下：</strong></p> 
  <p><img alt="我用Python爬了4400条淘宝商品数据，竟发现了这些“潜规则”" class="has" src="http://p1.pstatp.com/large/6c32000116ea2832423e"></p> 
  <p>对表 df_word_sum 中的 word 和 w_s_sum 两列数据进行可视化。（本例中取销量排名前 30 的词语进行绘图）</p> 
  <p><img alt="我用Python爬了4400条淘宝商品数据，竟发现了这些“潜规则”" class="has" src="http://p1.pstatp.com/large/6c360000d366873e58e7"></p> 
  <p><img alt="我用Python爬了4400条淘宝商品数据，竟发现了这些“潜规则”" class="has" src="http://p3.pstatp.com/large/6c330004cec2bd7e4063"></p> 
  <p>由图表可知：</p> 
  <p>组合商品销量最高。</p> 
  <p>从品类看：布艺沙发销量很高，远超过皮艺沙发。</p> 
  <p>从户型看：小户型沙发销量最高，大小户型次之，大户型销量最少。</p> 
  <p>从风格看：简约风销量最高，北欧风次之，其他依次是中式、美式、日式等。</p> 
  <p>可拆洗、转角类沙发销量可观，也是颇受消费者青睐的。</p> 
  <p><strong>商品的价格分布情况分析</strong></p> 
  <p>分析发现，有一些值太大，为了使可视化效果更加直观，这里我们结合自身产品情况，选择价格小于 20000 的商品。</p> 
  <p><strong>代码如下：</strong></p> 
  <p><img alt="我用Python爬了4400条淘宝商品数据，竟发现了这些“潜规则”" class="has" src="http://p1.pstatp.com/large/6c310005cad10dbbdc96"></p> 
  <p><img alt="我用Python爬了4400条淘宝商品数据，竟发现了这些“潜规则”" class="has" src="http://p1.pstatp.com/large/6c32000116ecbb8c669a"></p> 
  <p>由图表可知：</p> 
  <p>商品数量随着价格总体呈现下降阶梯形势，价格越高，在售的商品越少。</p> 
  <p>低价位商品居多，价格在 500-1500 之间的商品最多，1500-3000 之间的次之，价格 1 万以上的商品较少。</p> 
  <p>价格 1 万元以上的商品，在售商品数量差异不大。</p> 
  <p><strong>商品的销量分布情况分析</strong></p> 
  <p><img alt="我用Python爬了4400条淘宝商品数据，竟发现了这些“潜规则”" class="has" src="http://p9.pstatp.com/large/6c310005cad289809f89"></p> 
  <p><img alt="我用Python爬了4400条淘宝商品数据，竟发现了这些“潜规则”" class="has" src="http://p3.pstatp.com/large/6c32000116eb2fa21be2"></p> 
  <p>同样，为了使可视化效果更加直观，这里我们选择销量大于 100 的商品。</p> 
  <p><strong>代码如下：</strong></p> 
  <p>由图表及数据可知：</p> 
  <ul>
   <li> <p>销量 100 以上的商品仅占 3.4% ，其中销量 100-200 之间的商品最多，200-300 之间的次之。</p> </li> 
   <li> <p>销量 100-500 之间，商品的数量随着销量呈现下降趋势，且趋势陡峭，低销量商品居多。</p> </li> 
   <li> <p>销量 500 以上的商品很少。</p> </li> 
  </ul>
  <p><strong>不同价格区间的商品的平均销量分布</strong></p> 
  <p><strong>代码如下：</strong></p> 
  <p><img alt="我用Python爬了4400条淘宝商品数据，竟发现了这些“潜规则”" class="has" src="http://p1.pstatp.com/large/6c32000116edb9b9a3c8"></p> 
  <p><img alt="我用Python爬了4400条淘宝商品数据，竟发现了这些“潜规则”" class="has" src="http://p9.pstatp.com/large/6c340001d0801f35be10"></p> 
  <p>由图表可知：</p> 
  <ul>
   <li> <p>价格在 1331-1680 之间的商品平均销量最高，951-1331 之间的次之，9684 元以上的最低。</p> </li> 
   <li> <p>总体呈现先增后减的趋势，但最高峰处于相对低价位阶段。</p> </li> 
   <li> <p>说明广大消费者对购买沙发的需求更多处于低价位阶段，在 1680 元以上价位越高，平均销量基本是越少。</p> </li> 
  </ul>
  <p><strong>商品价格对销量的影响分析</strong></p> 
  <p>同上，为了使可视化效果更加直观，这里我们结合自身产品情况，选择价格小于 20000 的商品。</p> 
  <p><strong>代码如下：</strong></p> 
  <p><img alt="我用Python爬了4400条淘宝商品数据，竟发现了这些“潜规则”" class="has" src="http://p3.pstatp.com/large/6c32000116eeba501558"></p> 
  <p><img alt="我用Python爬了4400条淘宝商品数据，竟发现了这些“潜规则”" class="has" src="http://p3.pstatp.com/large/6c330004cec4325b3624"></p> 
  <p>由图表可知：</p> 
  <ul>
   <li> <p>总体趋势：随着商品价格增多，其销量减少，商品价格对其销量影响很大。</p> </li> 
   <li> <p>价格 500-2500 之间的少数商品销量冲的很高，价格 2500-5000 之间的商品多数销量偏低，少数相对较高，但价格 5000 以上的商品销量均很低，没有销量突出的商品。</p> </li> 
  </ul>
  <p><strong>商品价格对销售额的影响分析</strong></p> 
  <p><strong>代码如下：</strong></p> 
  <p><img alt="我用Python爬了4400条淘宝商品数据，竟发现了这些“潜规则”" class="has" src="http://p1.pstatp.com/large/6c330004cec3df2f0472"></p> 
  <p><img alt="我用Python爬了4400条淘宝商品数据，竟发现了这些“潜规则”" class="has" src="http://p9.pstatp.com/large/6c350000e870a21619d5"></p> 
  <p>由图表可知：</p> 
  <ul>
   <li> <p>总体趋势：由线性回归拟合线可以看出，商品销售额随着价格增长呈现上升趋势。</p> </li> 
   <li> <p>多数商品的价格偏低，销售额也偏低。</p> </li> 
   <li> <p>价格在 0-20000 的商品只有少数销售额较高，价格 2-6 万的商品只有 3 个销售额较高，价格 6-10 万的商品有 1 个销售额很高，而且是最大值。</p> </li> 
  </ul>
  <p><strong>不同省份的商品数量分布</strong></p> 
  <p><strong>代码如下：</strong></p> 
  <p><img alt="我用Python爬了4400条淘宝商品数据，竟发现了这些“潜规则”" class="has" src="http://p3.pstatp.com/large/6c350000e86f39fd8cbb"></p> 
  <p><img alt="我用Python爬了4400条淘宝商品数据，竟发现了这些“潜规则”" class="has" src="http://p1.pstatp.com/large/6c360000d3682797a5ba"></p> 
  <p>由图表可知：</p> 
  <ul>
   <li> <p>广东的最多，上海次之，江苏第三，尤其是广东的数量远超过江苏、浙江、上海等地，说明在沙发这个子类目，广东的店铺占主导地位。</p> </li> 
   <li> <p>江浙沪等地的数量差异不大，基本相当。</p> </li> 
  </ul>
  <p><strong>不同省份的商品平均销量分布</strong></p> 
  <p><strong>代码如下：</strong></p> 
  <p><img alt="我用Python爬了4400条淘宝商品数据，竟发现了这些“潜规则”" class="has" src="http://p3.pstatp.com/large/6c330004cec5787f1b5e"></p> 
  <p><img alt="我用Python爬了4400条淘宝商品数据，竟发现了这些“潜规则”" class="has" src="http://p1.pstatp.com/large/6c350000e87244545ced"></p> 
  <p><strong>热力型地图</strong></p> 
  <p><img alt="我用Python爬了4400条淘宝商品数据，竟发现了这些“潜规则”" class="has" src="http://p3.pstatp.com/large/6c360000d36920eb4b76"></p> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
