<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>MySQL常用内置函数 « NotBeCN</title>
  <meta name="description" content="                        文章目录       数学函数         ` abs(X)` 返回X的绝对值     `mod(N,M)` 或 `%` 返回 N 被 M 除的余数     `floor(X)` 返回不大于X的最大整数值。     `ceiling(X)` 返回不小于X的最小整...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2019/05/10/1557728819785.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">MySQL常用内置函数</h1>
    <p class="post-meta">May 10, 2019</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">  
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div id="content_views" class="markdown_views prism-atom-one-light"> 
  <!-- flowchart 箭头图标 勿删 --> 
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> 
  <p></p>
  <div class="toc">
   <h3>文章目录</h3>
   <ul>
    <li><a href="#_5" rel="nofollow">数学函数</a></li>
    <ul>
     <li><a href="#_absX_X_9" rel="nofollow">` abs(X)` 返回X的绝对值</a></li>
     <li><a href="#modNM_____N__M__16" rel="nofollow">`mod(N,M)` 或 `%` 返回 N 被 M 除的余数</a></li>
     <li><a href="#floorX_X_27" rel="nofollow">`floor(X)` 返回不大于X的最大整数值。</a></li>
     <li><a href="#ceilingX_X_34" rel="nofollow">`ceiling(X)` 返回不小于X的最小整数值。</a></li>
     <li><a href="#roundX__X_41" rel="nofollow">`round(X)` 返回参数X的四舍五入的一个整数。</a></li>
    </ul>
    <li><a href="#_48" rel="nofollow">字符串函数</a></li>
    <ul>
     <li><a href="#asciistr_strASCIIstr0strNULLNULL_50" rel="nofollow">`ascii(str)` 返回字符串str的最左面字符的ASCII代码值。如果str是空字符串，返回0。如果str是NULL，返回NULL。</a></li>
     <li><a href="#concatstr1str2_NULLNULL2_57" rel="nofollow">`concat(str1,str2,...)` 返回来自于参数连结的字符串。如果任何参数是NULL，返回NULL。可以有超过2个的参数。一个数字参数被变换为等价的字符串形式。</a></li>
     <li><a href="#lengthstr_str_64" rel="nofollow">`length(str)` 返回字符串str的长度</a></li>
     <li><a href="#locatesubstrstr_substrstrsubstrstr0_71" rel="nofollow">`locate(substr,str)` 返回子串substr在字符串str第一个出现的位置，如果substr不是在str里面，返回0.</a></li>
     <li><a href="#instrstrsubstr_substrstr_78" rel="nofollow">`instr(str,substr)` 返回子串substr在字符串str中的第一个出现的位置。</a></li>
     <li><a href="#leftstrlen_strlen_85" rel="nofollow">`left(str,len)` 返回字符串str的最左面len个字符。</a></li>
     <li><a href="#rightstrlen_strlen_91" rel="nofollow">`right(str,len)` 返回字符串str的最右面len个字符。</a></li>
     <li><a href="#substrstrpos_strpossubstr_97" rel="nofollow">`substr(str,pos)` 从字符串str的起始位置pos返回一个子串,和substr()一样</a></li>
     <li><a href="#trimstr_str_104" rel="nofollow">`trim(str)` 返回字符串str，所有前缀或后缀被删除了</a></li>
     <li><a href="#ltrimstr_str_110" rel="nofollow">`ltrim(str)` 返回删除了其前置空格字符的字符串str</a></li>
     <li><a href="#rtrimstrstr_118" rel="nofollow">`rtrim(str)`返回删除了其拖后空格字符的字符串str。</a></li>
     <li><a href="#replacestrfrom_strto_str_strfrom_strto_str_127" rel="nofollow">`replace(str,from_str,to_str)` 返回字符串str，其字符串from_str的所有出现由字符串to_str代替。</a></li>
     <li><a href="#repeatstrcount_countstrcount__0strcountNULLNULL_136" rel="nofollow">`repeat(str,count)` 返回由重复count次的字符串str组成的一个字符串。如果count &lt;= 0，返回一个空字符串。如果str或count是NULL，返回NULL。</a></li>
     <li><a href="#reversestr_str_145" rel="nofollow">`reverse(str)` 返回颠倒字符顺序的字符串str</a></li>
     <li><a href="#insertstrposlennewstr_strposlennewstr_154" rel="nofollow">`insert(str,pos,len,newstr)` 返回字符串str，在位置pos起始的子串且len个字符长的子串由字符串newstr代替。</a></li>
     <li><a href="#substring_indexstrdelimcount_strdelim_163" rel="nofollow">`substring_index(str,delim,count)` 从str中找到delim字符串按下标获取字符串</a></li>
    </ul>
    <li><a href="#_177" rel="nofollow">日期和时间函数</a></li>
    <li><a href="#_324" rel="nofollow">条件判断函数</a></li>
    <li><a href="#_369" rel="nofollow">系统信息函数</a></li>
    <ul>
     <li><a href="#version__372" rel="nofollow">`version()` 函数返回数据库的版本号</a></li>
     <li><a href="#connection_id_MySQL_379" rel="nofollow">`connection_id()` 函数返回服务器的连接数，也就是到现在为止MySQL服务的连接次数</a></li>
     <li><a href="#database__schema__386" rel="nofollow">`database()` 和 `schema()` 返回当前数据库名</a></li>
     <li><a href="#_392" rel="nofollow">获取用户名的函数</a></li>
     <li><a href="#_399" rel="nofollow">获取字符串的字符集和排序方式的函数</a></li>
     <li><a href="#ID_407" rel="nofollow">获取最后一个自动生成的ID值的函数</a></li>
    </ul>
    <li><a href="#_415" rel="nofollow">加密函数</a></li>
    <ul>
     <li><a href="#_md5str_417" rel="nofollow">加密函数 `md5(str)`</a></li>
     <li><a href="#_encodestrpswd_str_425" rel="nofollow">加密函数 `encode(str,pswd_str)`</a></li>
     <li><a href="#_decodecrypt_strpswd_str_432" rel="nofollow">解密函数 `decode(crypt_str,pswd_str)`</a></li>
    </ul>
    <li><a href="#_441" rel="nofollow">格式化函数</a></li>
    <li><a href="#_451" rel="nofollow">其他函数</a></li>
   </ul>
  </div>
  <p></p> 
  <p><strong>MySQL数据库中提供了很丰富的函数。MySQL函数包括数学函数、字符串函数、日期和时间函数、条件判断函数、系统信息函数、加密函数、格式化函数等。通过这些函数，可以简化用户的操作。例如，字符串连接函数可以很方便的将多个字符串连接在一起。</strong></p> 
  <h1><a id="_5"></a>数学函数</h1> 
  <p>数学函数是MySQL中常用的一类函数。主要用于处理数字，包括整型、浮点数等。数学函数包括绝对值函数、正弦函数、余弦函数、获取随机数的函数等</p> 
  <h2><a id="_absX_X_9"></a><code>abs(X)</code> 返回X的绝对值</h2> 
  <pre><code class="prism language-sql"><span class="token comment">-- abs(X):返回X的绝对值</span>
<span class="token keyword">select</span> abs<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">)</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4401/WEBRESOURCEad85d82d23b2a321c793c5208688d79b" alt="image.png"></p> 
  <h2><a id="modNM_____N__M__16"></a><code>mod(N,M)</code> 或 <code>%</code> 返回 N 被 M 除的余数</h2> 
  <pre><code class="prism language-sql"><span class="token comment">-- mod(N,M)或%:返回N被M除的余数</span>
<span class="token keyword">select</span> <span class="token function">mod</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token number">10</span> <span class="token operator">%</span> <span class="token number">3</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4407/WEBRESOURCE4d3f3bcec205413edc9fb50623562dec" alt="image.png"></p> 
  <p><img src="https://note.youdao.com/yws/res/4409/WEBRESOURCEdfdfc9d9a97edf1ec2494276e80f7cd2" alt="image.png"></p> 
  <h2><a id="floorX_X_27"></a><code>floor(X)</code> 返回不大于X的最大整数值。</h2> 
  <pre><code class="prism language-sql"><span class="token comment">-- floor(X):返回不大于X的最大整数值。 </span>
<span class="token keyword">select</span> floor<span class="token punctuation">(</span><span class="token number">1.23</span><span class="token punctuation">)</span><span class="token punctuation">,</span> floor<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1.23</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4415/WEBRESOURCE08f7a43afc25d06a69e7492eb475a700" alt="image.png"></p> 
  <h2><a id="ceilingX_X_34"></a><code>ceiling(X)</code> 返回不小于X的最小整数值。</h2> 
  <pre><code class="prism language-sql"><span class="token comment">-- ceiling(X):返回不小于X的最小整数值。</span>
<span class="token keyword">select</span> ceiling<span class="token punctuation">(</span><span class="token number">1.23</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ceiling<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1.23</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4419/WEBRESOURCE4fd86a719718f00b8beb08a71a4356e2" alt="image.png"></p> 
  <h2><a id="roundX__X_41"></a><code>round(X)</code> 返回参数X的四舍五入的一个整数。</h2> 
  <pre><code class="prism language-sql"><span class="token comment">-- round(X) :返回参数X的四舍五入的一个整数。 </span>
<span class="token keyword">select</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token number">1.23</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1.53</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4425/WEBRESOURCE41866b3633aa70d6f9f7a7968f19b60d" alt="image.png"></p> 
  <h1><a id="_48"></a>字符串函数</h1> 
  <h2><a id="asciistr_strASCIIstr0strNULLNULL_50"></a><code>ascii(str)</code> 返回字符串str的最左面字符的ASCII代码值。如果str是空字符串，返回0。如果str是NULL，返回NULL。</h2> 
  <pre><code class="prism language-sql"><span class="token comment">-- ascii(str):返回字符串str的最左面字符的ASCII代码值。如果str是空字符串，返回0。如果str是NULL，返回NULL。 </span>
<span class="token keyword">select</span> ascii<span class="token punctuation">(</span><span class="token string">'2'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>ascii<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>ascii<span class="token punctuation">(</span><span class="token string">'dx'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>ascii<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span>ascii<span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>ascii<span class="token punctuation">(</span><span class="token string">'null'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4436/WEBRESOURCEef1a22328b14ff835ef8779ca0f1a039" alt="image.png"></p> 
  <h2><a id="concatstr1str2_NULLNULL2_57"></a><code>concat(str1,str2,...)</code> 返回来自于参数连结的字符串。如果任何参数是NULL，返回NULL。可以有超过2个的参数。一个数字参数被变换为等价的字符串形式。</h2> 
  <pre><code class="prism language-sql"><span class="token comment">-- concat(str1,str2,...):返回来自于参数连结的字符串。如果任何参数是NULL，返回NULL。可以有超过2个的参数。一个数字参数被变换为等价的字符串形式。 </span>
<span class="token keyword">select</span> concat<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>concat<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>concat<span class="token punctuation">(</span><span class="token number">0.23</span><span class="token punctuation">)</span><span class="token punctuation">,</span> concat<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4446/WEBRESOURCE2c1bdd12f04282d7bd358f045f976145" alt="image.png"></p> 
  <h2><a id="lengthstr_str_64"></a><code>length(str)</code> 返回字符串str的长度</h2> 
  <pre><code class="prism language-sql"><span class="token comment">-- length(str):返回字符串str的长度</span>
<span class="token keyword">select</span> length<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> length<span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>length<span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>length<span class="token punctuation">(</span><span class="token number">0.001</span><span class="token punctuation">)</span><span class="token punctuation">,</span>length<span class="token punctuation">(</span><span class="token string">'null'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4452/WEBRESOURCEb082e336961d2a08b4759a0a37f19749" alt="image.png"></p> 
  <h2><a id="locatesubstrstr_substrstrsubstrstr0_71"></a><code>locate(substr,str)</code> 返回子串substr在字符串str第一个出现的位置，如果substr不是在str里面，返回0.</h2> 
  <pre><code class="prism language-sql"><span class="token comment">-- locate(substr,str):返回子串substr在字符串str第一个出现的位置(下标从1开始)，如果substr不是在str里面，返回0. </span>
<span class="token keyword">select</span> locate<span class="token punctuation">(</span><span class="token string">'acc'</span><span class="token punctuation">,</span> <span class="token string">'abc123acc'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4459/WEBRESOURCE3511d963f8efc52096d271249ec6e87c" alt="image.png"></p> 
  <h2><a id="instrstrsubstr_substrstr_78"></a><code>instr(str,substr)</code> 返回子串substr在字符串str中的第一个出现的位置。</h2> 
  <pre><code class="prism language-sql"><span class="token comment">-- instr(str,substr):返回子串substr在字符串str中的第一个出现的位置, 与select locate('acc', 'abc123acc');相反。</span>
<span class="token keyword">select</span> instr<span class="token punctuation">(</span><span class="token string">'abc123acc'</span><span class="token punctuation">,</span> <span class="token string">'acc'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4462/WEBRESOURCEf5f6fdd51730eff4238635d158a023d2" alt="image.png"></p> 
  <h2><a id="leftstrlen_strlen_85"></a><code>left(str,len)</code> 返回字符串str的最左面len个字符。</h2> 
  <pre><code class="prism language-sql"><span class="token comment">-- left(str,len):返回字符串str的最左面len个字符。</span>
<span class="token keyword">select</span> <span class="token keyword">left</span><span class="token punctuation">(</span><span class="token string">'abcdefg'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4481/WEBRESOURCEda19ea884109af8f86ed858bf8a06396" alt="image.png"></p> 
  <h2><a id="rightstrlen_strlen_91"></a><code>right(str,len)</code> 返回字符串str的最右面len个字符。</h2> 
  <pre><code class="prism language-sql"><span class="token comment">-- right(str,len):返回字符串str的最右面len个字符</span>
<span class="token keyword">select</span> <span class="token keyword">right</span><span class="token punctuation">(</span><span class="token string">'abcdefg'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4487/WEBRESOURCE6a9e271680032267db0b9e80874cfa6b" alt="image.png"></p> 
  <h2><a id="substrstrpos_strpossubstr_97"></a><code>substr(str,pos)</code> 从字符串str的起始位置pos返回一个子串,和substr()一样</h2> 
  <pre><code class="prism language-sql"><span class="token comment">-- substr(str,pos):从字符串str的起始位置pos返回一个子串,和substr()一样。</span>
<span class="token keyword">select</span> substr<span class="token punctuation">(</span><span class="token string">'abcdefg'</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> substring<span class="token punctuation">(</span><span class="token string">'abcdefg'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4475/WEBRESOURCE76989d5c525ec0b867a40632a4720c34" alt="image.png"></p> 
  <h2><a id="trimstr_str_104"></a><code>trim(str)</code> 返回字符串str，所有前缀或后缀被删除了</h2> 
  <pre><code class="prism language-sql"><span class="token comment">-- trim(str):返回字符串str，所有前缀或后缀被删除了</span>
<span class="token keyword">select</span> concat<span class="token punctuation">(</span>trim<span class="token punctuation">(</span><span class="token string">' ..123... '</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'aaa'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> a<span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4496/WEBRESOURCEb8104d1bf3988c4e44d15bb3b02501ce" alt="image.png"></p> 
  <h2><a id="ltrimstr_str_110"></a><code>ltrim(str)</code> 返回删除了其前置空格字符的字符串str</h2> 
  <pre><code class="prism language-sql"><span class="token comment">-- ltrim(str):返回删除了其前置空格字符的字符串str</span>
<span class="token keyword">select</span> concat<span class="token punctuation">(</span>ltrim<span class="token punctuation">(</span><span class="token string">' 123 '</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'aa'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4502/WEBRESOURCE6d05cdf304c7ec90bcb269fa680cb6dc" alt="image.png"></p> 
  <h2><a id="rtrimstrstr_118"></a><code>rtrim(str)</code>返回删除了其拖后空格字符的字符串str。</h2> 
  <pre><code class="prism language-sql"><span class="token comment">-- rtrim(str):返回删除了其拖后空格字符的字符串str。</span>
<span class="token keyword">select</span> concat<span class="token punctuation">(</span>rtrim<span class="token punctuation">(</span><span class="token string">' 123 '</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'aa'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4506/WEBRESOURCEa2135b1a986d773d57769ba2a8ee99d8" alt="image.png"></p> 
  <h2><a id="replacestrfrom_strto_str_strfrom_strto_str_127"></a><code>replace(str,from_str,to_str)</code> 返回字符串str，其字符串from_str的所有出现由字符串to_str代替。</h2> 
  <pre><code class="prism language-sql"><span class="token comment">-- replace(str,from_str,to_str):返回字符串str，其字符串from_str的所有出现由字符串to_str代替。</span>
<span class="token keyword">select</span> <span class="token keyword">replace</span><span class="token punctuation">(</span><span class="token string">'abc123'</span><span class="token punctuation">,</span> <span class="token string">'12'</span><span class="token punctuation">,</span> <span class="token string">'45'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4516/WEBRESOURCE54270a2fb54abaeb9d63c32150e2e13b" alt="image.png"></p> 
  <h2><a id="repeatstrcount_countstrcount__0strcountNULLNULL_136"></a><code>repeat(str,count)</code> 返回由重复count次的字符串str组成的一个字符串。如果count &lt;= 0，返回一个空字符串。如果str或count是NULL，返回NULL。</h2> 
  <pre><code class="prism language-sql"><span class="token comment">-- repeat(str,count):返回由重复count次的字符串str组成的一个字符串。如果count &lt;= 0，返回一个空字符串。如果str或count是NULL，返回NULL。 </span>
<span class="token keyword">select</span> <span class="token keyword">repeat</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4530/WEBRESOURCE6d430ac3ffa7b2c2a3d9109d9e10a2fc" alt="image.png"></p> 
  <h2><a id="reversestr_str_145"></a><code>reverse(str)</code> 返回颠倒字符顺序的字符串str</h2> 
  <pre><code class="prism language-sql"><span class="token comment">-- reverse(str):返回颠倒字符顺序的字符串str</span>
<span class="token keyword">select</span> reverse<span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4535/WEBRESOURCE6778c277dbb1628f11f1c48d6d58805f" alt="image.png"></p> 
  <h2><a id="insertstrposlennewstr_strposlennewstr_154"></a><code>insert(str,pos,len,newstr)</code> 返回字符串str，在位置pos起始的子串且len个字符长的子串由字符串newstr代替。</h2> 
  <pre><code class="prism language-sql"><span class="token comment">-- insert(str,pos,len,newstr):返回字符串str，在位置pos起始的子串且len个字符长的子串由字符串newstr代替</span>
<span class="token keyword">select</span> <span class="token keyword">insert</span><span class="token punctuation">(</span><span class="token string">'abcdefg'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'11'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4545/WEBRESOURCEed53ce70c170094c7b968e448c4dad6d" alt="image.png"></p> 
  <h2><a id="substring_indexstrdelimcount_strdelim_163"></a><code>substring_index(str,delim,count)</code> 从str中找到delim字符串按下标获取字符串</h2> 
  <p>select</p> 
  <pre><code class="prism language-sql"><span class="token comment">-- substring_index(str,delim,count),从str中找到delim字符串按下标获取字符串</span>
<span class="token keyword">select</span> 
  substring_index<span class="token punctuation">(</span><span class="token string">'abcdecfg'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  substring_index<span class="token punctuation">(</span><span class="token string">'abcdecfg'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  substring_index<span class="token punctuation">(</span><span class="token string">'abcdecfg'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  substring_index<span class="token punctuation">(</span><span class="token string">'abcdecfg'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4550/WEBRESOURCE6e97465636d8913146fc309c803287f1" alt="image.png"></p> 
  <h1><a id="_177"></a>日期和时间函数</h1> 
  <pre><code class="prism language-sql"><span class="token comment">-- WEEKDAY(date):返回date的星期索引(0=星期一，1=星期二, ……6= 星期天)。</span>
<span class="token keyword">select</span> weekday<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>

</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4573/WEBRESOURCE3281aa112e5869527042a161af08fd2c" alt="image.png"></p> 
  <pre><code class="prism language-sql"><span class="token comment">-- DAYOFMONTH(date):返回date的月份中的日期，在1到31范围内</span>
<span class="token keyword">select</span> dayofmonth<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4576/WEBRESOURCE89c96c827b28a7629f7ef2d89402e570" alt="image.png"></p> 
  <pre><code class="prism language-sql"><span class="token comment">-- DAYOFYEAR(date):返回date在一年中的日数, 在1到366范围内。</span>
<span class="token keyword">select</span> dayofyear<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4578/WEBRESOURCE868f51bc73590715b5d82e428a536035" alt="image.png"></p> 
  <pre><code class="prism language-sql"><span class="token comment">-- MONTH(date):返回date的月份，范围1到12</span>
<span class="token keyword">select</span> <span class="token keyword">month</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4580/WEBRESOURCEd4e69a081d6f4ff98381c672bf1310d0" alt="image.png"></p> 
  <pre><code class="prism language-sql"><span class="token comment">-- DAYNAME(date):返回date的星期名字</span>
<span class="token keyword">select</span> dayname<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4582/WEBRESOURCEf3481e22ee8d1e7e67186bb5ec5d60bb" alt="image.png"></p> 
  <pre><code class="prism language-sql"><span class="token comment">-- MONTHNAME(date) :返回date的月份名字。 </span>
<span class="token keyword">select</span> monthname<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4585/WEBRESOURCE322f01ed82a761eded59aab8fb39d411" alt="image.png"></p> 
  <pre><code class="prism language-sql"><span class="token comment">-- QUARTER(date):返回date一年中的季度，范围1到4。</span>
<span class="token keyword">select</span> quarter<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4587/WEBRESOURCE908cc92f63a84497ebf873e3c2e6593a" alt="image.png"></p> 
  <pre><code class="prism language-sql"><span class="token comment">-- WEEK(date,first):对于星期天是一周的第一天的地方，有一个单个参数，返回date的周数，范围在0到52。</span>
<span class="token comment">-- 2个参数形式WEEK()允许你指定星期是否开始于星期天或星期一。如果第二个参数是0，星期从星期天开始，如果第二个参数是1，从星期一开始。 </span>

<span class="token keyword">select</span> week<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> week<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> week<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4590/WEBRESOURCEc6cd8d8640da039287a7bbe43ae36ece" alt="image.png"><br> <img src="https://note.youdao.com/yws/res/4592/WEBRESOURCEdbb167525f18fe9d98b436ca4a5a6944" alt="image.png"><br> <img src="https://note.youdao.com/yws/res/4595/WEBRESOURCEce29d6cebe014a8ce9e4394db3633f1c" alt="image.png"></p> 
  <pre><code class="prism language-sql"><span class="token comment">-- YEAR(date):返回date的年份，范围在1000到9999。</span>
<span class="token keyword">select</span> <span class="token keyword">year</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4597/WEBRESOURCEab1a3d594fc1bef0a097ef7c43c24128" alt="image.png"></p> 
  <pre><code class="prism language-sql"><span class="token comment">-- HOUR(time):返回time的小时，范围是0到23。</span>
<span class="token keyword">select</span> <span class="token keyword">hour</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4600/WEBRESOURCE79b98ec4b2809d5d17ea3bae2bc2d547" alt="image.png"></p> 
  <pre><code class="prism language-sql"><span class="token comment">-- MINUTE(time):返回time的分钟，范围是0到59。 </span>
<span class="token keyword">select</span> <span class="token keyword">minute</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4602/WEBRESOURCE1862ab82238f2f7cff212fc567a9a4ec" alt="image.png"></p> 
  <pre><code class="prism language-sql"><span class="token comment">-- SECOND(time):回来time的秒数，范围是0到59。 </span>
<span class="token keyword">select</span> <span class="token keyword">second</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4604/WEBRESOURCEb65e88b913f73cbd5f6b37368e4d1b72" alt="image.png"></p> 
  <pre><code class="prism language-sql"><span class="token comment">-- DATE_ADD(date,INTERVAL expr type) ,进行日期增加的操作，可以精确到秒</span>
<span class="token keyword">select</span> date_add<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">interval</span> <span class="token number">1</span> <span class="token keyword">day</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> date_add<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">interval</span> <span class="token number">3</span> <span class="token keyword">hour</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> date_add<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">interval</span> <span class="token number">2</span> <span class="token keyword">minute</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> date_add<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">interval</span> <span class="token number">3</span> <span class="token keyword">second</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> date_add<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">interval</span> <span class="token string">'1:1'</span> minute_second<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 同时加分、秒</span>
<span class="token keyword">select</span> date_add<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">interval</span> <span class="token string">'1:1'</span> hour_minute<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 同时加时、分</span>
<span class="token keyword">select</span> date_add<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">interval</span> <span class="token string">'1:1'</span> day_hour<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 同时加天、时</span>
<span class="token keyword">select</span> date_add<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">interval</span> <span class="token string">'1'</span> <span class="token keyword">month</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> date_add<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">interval</span> <span class="token string">'1:1'</span> year_month<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">-- 同时加年、月</span>
<span class="token keyword">select</span> date_add<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">interval</span> <span class="token string">'1 0:0:3'</span> day_second<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">-- 同时加年、月</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4606/WEBRESOURCE86ea5145eb6bc12ee91c12567cd89b96" alt="image.png"><br> <img src="https://note.youdao.com/yws/res/4607/WEBRESOURCEe4e1a47efb540acdcccd98e8a324551e" alt="image.png"><br> <img src="https://note.youdao.com/yws/res/4609/WEBRESOURCE0a4e45da04e0e7312ef29ea101f0106b" alt="image.png"><br> <img src="https://note.youdao.com/yws/res/4611/WEBRESOURCE252a75504d31b15a218130d38616c14d" alt="image.png"><br> <img src="https://note.youdao.com/yws/res/4615/WEBRESOURCEbacc874640fd7d0fa14c4139e16a4584" alt="image.png"><br> <img src="https://note.youdao.com/yws/res/4617/WEBRESOURCEd063b08da6fb5f8ad27fa95bbe9db43a" alt="image.png"><br> <img src="https://note.youdao.com/yws/res/4619/WEBRESOURCEbf7997c5759dfe1638f3e595cc747fa3" alt="image.png"><br> <img src="https://note.youdao.com/yws/res/4621/WEBRESOURCE335eb12144eba2aca893e1292a9fe09c" alt="image.png"><br> <img src="https://note.youdao.com/yws/res/4623/WEBRESOURCEecfa4c8d6eb2c56f541846ad4f58a921" alt="image.png"></p> 
  <p><strong>DATE_SUB(date,INTERVAL expr type) ，进行日期减少的操作，可以精确到秒, 和上面相加用法一样</strong></p> 
  <pre><code class="prism language-sql"><span class="token comment">-- 获取当前时间：以‘YYYY-MM-DD HH:MM:SS’或YYYYMMDDHHMMSS格式返回当前的日期和时间 </span>
<span class="token keyword">select</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4627/WEBRESOURCE7388a9efad7d2832eb316e69a139b542" alt="image.png"></p> 
  <pre><code class="prism language-sql"><span class="token comment">-- current_date():以‘YYYY-MM-DD’或YYYYMMDD格式返回今天日期值，取决于函数在一个字符串还是数字上下文被使用。</span>
<span class="token keyword">select</span> <span class="token keyword">current_date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4629/WEBRESOURCE0212d75a8940eca8f2385dd7bfbf40e0" alt="image.png"></p> 
  <pre><code class="prism language-sql"><span class="token comment">-- CURRENT_TIME:以‘HH:MM:SS’或HHMMSS格式返回当前时间值</span>
<span class="token keyword">select</span> <span class="token keyword">current_time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4632/WEBRESOURCEd5b3d94b4af793863a125d17f90a2471" alt="image.png"></p> 
  <pre><code class="prism language-sql"><span class="token comment">-- 时间格式化date_format()</span>
<span class="token keyword">select</span> date_format<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'%Y-%m-%d %H:%i:%S'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> date_format<span class="token punctuation">(</span><span class="token string">'2017-09-20 08:30:45'</span><span class="token punctuation">,</span>   <span class="token string">'%Y-%m-%d %H:%i:%S'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4634/WEBRESOURCE32e6680a8085d40490ccff63fe4b3ede" alt="image.png"><br> <img src="https://note.youdao.com/yws/res/4637/WEBRESOURCE6318a5f6699de184ca3400276641a54a" alt="image.png"></p> 
  <pre><code class="prism language-sql"><span class="token comment">-- TO_DAYS函数 返回一个天数! 啊哈？什么天数? 从年份0开始的天数 </span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>trade$platform_user<span class="token punctuation">`</span> <span class="token keyword">as</span> u <span class="token keyword">where</span> to_days<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=</span> to_days<span class="token punctuation">(</span>u<span class="token punctuation">.</span><span class="token punctuation">`</span>addtime<span class="token punctuation">`</span><span class="token punctuation">)</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4639/WEBRESOURCE323d61adff51ca66c7dae2aabb72141f" alt="image.png"></p> 
  <h1><a id="_324"></a>条件判断函数</h1> 
  <pre><code class="prism language-sql"><span class="token comment">-- IF(expr1,expr2,expr3)如果 expr1 是TRUE (expr1 &lt;&gt; 0 and expr1 &lt;&gt; NULL)，则 IF()的返回值为expr2; </span>
<span class="token comment">-- 否则返回值则为 expr3。IF() 的返回值为数字值或字符串值，具体情况视其所在语境而定。</span>
<span class="token keyword">select</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">,</span> <span class="token string">'false'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">,</span> <span class="token string">'false'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4663/WEBRESOURCE6afe96c55b6e86730ba4e904f80890d8" alt="image.png"><br> <img src="https://note.youdao.com/yws/res/4664/WEBRESOURCE3e4a98e3273beb027a1e8c01f0eded29" alt="image.png"></p> 
  <pre><code class="prism language-sql"><span class="token comment">-- ifnull(expr1, expr2), 如果expr1为null, 则返回expr2</span>
<span class="token keyword">select</span> ifnull<span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> ifnull<span class="token punctuation">(</span><span class="token string">'null'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4666/WEBRESOURCEf993d9ebf100be1785a7504d71505da0" alt="image.png"><br> <img src="https://note.youdao.com/yws/res/4668/WEBRESOURCE5493cf6db608538cb58d24e571019ab4" alt="image.png"></p> 
  <pre><code class="prism language-sql"><span class="token comment">-- Strcmp(str1,str2):如果str1&gt;str2返回1,str1=str2反回0，str1&lt;str2返回-1)</span>
<span class="token keyword">select</span> strcmp<span class="token punctuation">(</span><span class="token string">'text'</span><span class="token punctuation">,</span> <span class="token string">'text2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">select</span> strcmp<span class="token punctuation">(</span><span class="token string">'text2'</span><span class="token punctuation">,</span> <span class="token string">'text'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">select</span> strcmp<span class="token punctuation">(</span><span class="token string">'text'</span><span class="token punctuation">,</span> <span class="token string">'text'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4671/WEBRESOURCE335d95e04568cdae13f8e8f4d5c6dade" alt="image.png"><br> <img src="https://note.youdao.com/yws/res/4672/WEBRESOURCEb64c95cb64a48f657c2208d576a7f93b" alt="image.png"><br> <img src="https://note.youdao.com/yws/res/4675/WEBRESOURCEd49c2a37d2c0772e42c8078543bb7c13" alt="image.png"></p> 
  <pre><code class="prism language-sql"><span class="token comment">-- case when then else end</span>
<span class="token keyword">select</span> 
  u<span class="token punctuation">.</span><span class="token keyword">type</span><span class="token punctuation">,</span>
  <span class="token keyword">case</span>
    <span class="token keyword">when</span> u<span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token operator">=</span> <span class="token number">0</span> 
    <span class="token keyword">then</span> <span class="token string">'用户'</span> 
    <span class="token keyword">when</span> u<span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token operator">=</span> <span class="token number">1</span> 
    <span class="token keyword">then</span> <span class="token string">'商户'</span> 
    <span class="token keyword">else</span> <span class="token string">'未知'</span> 
  <span class="token keyword">end</span> 
<span class="token keyword">from</span>
  <span class="token punctuation">`</span>trade$platform_user<span class="token punctuation">`</span> <span class="token keyword">as</span> u <span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4682/WEBRESOURCEcbda161d0c52582b4587fc4faa0803fc" alt="image.png"></p> 
  <h1><a id="_369"></a>系统信息函数</h1> 
  <p>系统信息函数用来查询MySQL数据库的系统信息。例如，查询数据库的版本，查询数据库的当前用户等。本小节将详细讲解系统信息函数的作用和使用方法。</p> 
  <h2><a id="version__372"></a><code>version()</code> 函数返回数据库的版本号</h2> 
  <pre><code class="prism language-sql"><span class="token comment">-- version()函数返回数据库的版本号；</span>
<span class="token keyword">select</span> version<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4689/WEBRESOURCEe99bf25fe6b7e04aaf60d3b47f272757" alt="image.png"></p> 
  <h2><a id="connection_id_MySQL_379"></a><code>connection_id()</code> 函数返回服务器的连接数，也就是到现在为止MySQL服务的连接次数</h2> 
  <pre><code class="prism language-sql"><span class="token comment">-- connection_id()函数返回服务器的连接数，也就是到现在为止MySQL服务的连接次数；</span>
<span class="token keyword">select</span> connection_id<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4691/WEBRESOURCE812b67317bf3e79d522534791265934f" alt="image.png"></p> 
  <h2><a id="database__schema__386"></a><code>database()</code> 和 <code>schema()</code> 返回当前数据库名</h2> 
  <pre><code class="prism language-sql"><span class="token comment">-- database()和schema()返回当前数据库名</span>
<span class="token keyword">select</span> <span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">schema</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4694/WEBRESOURCE98baeb4096b5a6e357968b34812398ed" alt="image.png"></p> 
  <h2><a id="_392"></a>获取用户名的函数</h2> 
  <pre><code class="prism language-sql"><span class="token comment">-- 获取用户名的函数</span>
<span class="token keyword">select</span> <span class="token keyword">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">system_user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">session_user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">current_user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4696/WEBRESOURCE9c8b83b60fef3d7a3f54ddb0856a946f" alt="image.png"></p> 
  <h2><a id="_399"></a>获取字符串的字符集和排序方式的函数</h2> 
  <pre><code class="prism language-sql"><span class="token comment">-- 获取字符串的字符集和排序方式的函数</span>
<span class="token comment">-- CHARSET(str)函数返回字符串str的字符集，一般情况这个字符集就是系统的默认字符集；COLLATION(str)函数返回字符串str的字符排列方式</span>
<span class="token keyword">select</span> <span class="token keyword">charset</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> collation<span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4699/WEBRESOURCEd1da8e6a50c52084b3f91c19b44d4890" alt="image.png"></p> 
  <h2><a id="ID_407"></a>获取最后一个自动生成的ID值的函数</h2> 
  <pre><code class="prism language-sql"><span class="token comment">-- 获取最后一个自动生成的ID值的函数</span>
<span class="token comment">-- LAST_INSERT_ID()函数返回最后生成的AUTO_INCREMENT值</span>
<span class="token keyword">select</span> last_insert_id<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4704/WEBRESOURCEecd238bb38e2cefe206e2ded005e00ed" alt="image.png"></p> 
  <h1><a id="_415"></a>加密函数</h1> 
  <h2><a id="_md5str_417"></a>加密函数 <code>md5(str)</code></h2> 
  <pre><code class="prism language-sql"><span class="token comment">-- 加密函数md5(str)</span>
<span class="token comment">-- md5(str)函数可以对字符串str进行加密。MD5(str)函数主要对普通的数据进行加密。下面使用MD5(str)函数为字符串“abcd”加密。</span>
<span class="token keyword">select</span> md5<span class="token punctuation">(</span><span class="token string">'111111'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4721/WEBRESOURCE79ae65ad3a8d00b6df0c2cd75099ec4e" alt="image.png"><img src="https://note.youdao.com/yws/res/4720/WEBRESOURCE478fa36cb6c6284c8f746ff35995cad5" alt="image.png"></p> 
  <h2><a id="_encodestrpswd_str_425"></a>加密函数 <code>encode(str,pswd_str)</code></h2> 
  <pre><code class="prism language-sql"><span class="token comment">-- 加密函数encode(str,pswd_str)</span>
<span class="token comment">-- encode(str,pswd_str)函数可以使用字符串pswd_str来加密字符串str。加密的结果是一个二进制数，必须使用BLOB类型的字段来保存它。</span>
<span class="token keyword">select</span> encode<span class="token punctuation">(</span><span class="token string">'aaa'</span><span class="token punctuation">,</span> <span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4717/WEBRESOURCEc59dfc636c685d4c858a5741665d4659" alt="image.png"></p> 
  <h2><a id="_decodecrypt_strpswd_str_432"></a>解密函数 <code>decode(crypt_str,pswd_str)</code></h2> 
  <pre><code class="prism language-sql"><span class="token comment">-- 解密函数decode(crypt_str,pswd_str)</span>
<span class="token comment">-- decode(crypt_str,pswd_str)函数可以使用字符串pswd_str来为crypt_str解密。crypt_str是通过ENCODE(str,pswd_str)加密后的二进制数据。字符串pswd_str应该与加密时的字符串pswd_str是相同的。</span>
<span class="token comment">-- 下面使用DECODE(crypt_str,pswd_str)为ENCODE(str,pswd_str)加密的数据解密。</span>
<span class="token keyword">select</span> decode<span class="token punctuation">(</span><span class="token string">'111111'</span><span class="token punctuation">,</span> <span class="token string">'adsadskdjkasjdksjdkas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4723/WEBRESOURCE0046f22159c7654ac169852817083b4d" alt="image.png"></p> 
  <h1><a id="_441"></a>格式化函数</h1> 
  <pre><code class="prism language-sql"><span class="token comment">-- FORMAT(x,n)函数可以将数字x进行格式化，将x保留到小数点后n位。这个过程需要进行四舍五入。</span>
<span class="token keyword">select</span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token number">1.23458</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token number">1.236545</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4733/WEBRESOURCEe40433a42b2be49a2cdde6e3982be11a" alt="image.png"></p> 
  <hr> 
  <h1><a id="_451"></a>其他函数</h1> 
  <pre><code class="prism language-sql"><span class="token comment">-- ASCII(s)返回字符串s的第一个字符的ASCII码；BIN(x)返回x的二进制编码；</span>
<span class="token comment">-- HEX(x)返回x的十六进制编码；OCT(x)返回x的八进制编码；CONV(x,f1,f2)将x从f1进制数变成f2进制数。</span>
<span class="token keyword">select</span> ascii<span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bin<span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> hex<span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> oct<span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> conv<span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4740/WEBRESOURCE605eb38401be1cd7173ed63ec0fb9018" alt="image.png"><br> <img src="https://note.youdao.com/yws/res/4743/WEBRESOURCE9d79cec060fece93b29bc7efe2244986" alt="image.png"></p> 
  <pre><code class="prism language-sql"><span class="token comment">-- IP地址与数字相互转换的函数</span>
<span class="token comment">-- INET_ATON(IP)函数可以将IP地址转换为数字表示；INET_NTOA(n)函数可以将数字n转换成IP的形式。</span>
<span class="token comment">-- 其中，INET_ATON(IP)函数中IP值需要加上引号。这两个函数互为反函数。</span>
<span class="token keyword">select</span> inet_aton<span class="token punctuation">(</span><span class="token string">'192.168.0.118'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> inet_ntoa<span class="token punctuation">(</span><span class="token string">'3232235638'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4749/WEBRESOURCE22b436e74f1a6e1c30ff44f88e2ef0d0" alt="image.png"><br> <img src="https://note.youdao.com/yws/res/4755/WEBRESOURCEedcd24e2d217a4e398f8a10f686a472c" alt="image.png"></p> 
  <pre><code class="prism language-sql"><span class="token comment">-- 加锁函数和解锁函数</span>
<span class="token comment">-- GET_LOCT(name,time)函数定义一个名称为nam、持续时间长度为time秒的锁。如果锁定成功，返回1；如果尝试超时，返回0；如果遇到错误，返回NULL。</span>
<span class="token comment">-- RELEASE_LOCK(name)函数解除名称为name的锁。如果解锁成功，返回1；如果尝试超时，返回0；如果解锁失败，返回NULL；</span>
<span class="token comment">-- IS_FREE_LOCK(name)函数判断是否使用名为name的锁。如果使用，返回0；否则，返回1。</span>
</code></pre> 
  <pre><code class="prism language-sql"><span class="token comment">-- BENCHMARK(count,expr)函数将表达式expr重复执行count次，然后返回执行时间。该函数可以用来判断MySQL处理表达式的速度。</span>
<span class="token keyword">select</span> benchmark<span class="token punctuation">(</span><span class="token number">1000000</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">*</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4767/WEBRESOURCE47cd1cdfc604314df7ecc04a304d54aa" alt="image.png"></p> 
  <pre><code class="prism language-sql"><span class="token comment">-- 改变字符集的函数</span>
<span class="token comment">-- CONVERT(s USING cs)函数将字符串s的字符集变成cs</span>
<span class="token keyword">select</span> <span class="token keyword">charset</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">charset</span><span class="token punctuation">(</span><span class="token keyword">convert</span><span class="token punctuation">(</span><span class="token string">'abc'</span> <span class="token keyword">using</span> <span class="token string">'gbk'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4791/WEBRESOURCE4d40eeafbfb93f7225d78817f278f85f" alt="image.png"></p> 
  <pre><code class="prism language-sql"><span class="token comment">-- CAST(x AS type)和CONVERT(x,type)这两个函数将x变成type类型。</span>
<span class="token comment">-- 这两个函数只对BINARY、CHAR、DATE、DATETIME、TIME、SIGNED INTEGER、UNSIGNED INTEGER这些类型起作用。</span>
<span class="token comment">-- 但两种方法只是改变了输出值的数据类型，并没有改变表中字段的类型。</span>
<span class="token keyword">select</span> cast<span class="token punctuation">(</span><span class="token number">111</span> <span class="token keyword">as</span> <span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
  <p><img src="https://note.youdao.com/yws/res/4781/WEBRESOURCE9bdbaf19fb9ab24224db2dbe2743a5e3" alt="image.png"></p> 
  <blockquote> 
   <p>原文地址：<a href="https://blog.csdn.net/sinat_38899493/article/details/78710482" rel="nofollow">https://blog.csdn.net/sinat_38899493/article/details/78710482</a></p> 
  </blockquote> 
 </div> 
 <link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-258a4616f7.css" rel="stylesheet"> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
