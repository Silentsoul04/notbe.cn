<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>linux top命令 « NotBeCN</title>
  <meta name="description" content="                       文章目录            系统平均负载     任务信息汇总     CPU 信息     内存信息     任务详情     显示多个 CPU 核心的详细信息     以某列对进程排序     显示进程执行的完整命令     隐藏 idle 闲置 的进程   ...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2019/05/11/uotail_90116329.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">linux top命令</h1>
    <p class="post-meta">May 11, 2019</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div id="content_views" class="markdown_views prism-github-gist"> 
  <!-- flowchart 箭头图标 勿删 --> 
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> 
  <p></p>
  <div class="toc">
   <h3>文章目录</h3>
   <ul>
    <ul>
     <li><a href="#_6" rel="nofollow">系统平均负载</a></li>
     <li><a href="#_16" rel="nofollow">任务信息汇总</a></li>
     <li><a href="#CPU__25" rel="nofollow">CPU 信息</a></li>
     <li><a href="#_48" rel="nofollow">内存信息</a></li>
     <li><a href="#_61" rel="nofollow">任务详情</a></li>
     <li><a href="#_CPU__94" rel="nofollow">显示多个 CPU 核心的详细信息</a></li>
     <li><a href="#_98" rel="nofollow">以某列对进程排序</a></li>
     <li><a href="#_106" rel="nofollow">显示进程执行的完整命令</a></li>
     <li><a href="#_idle___110" rel="nofollow">隐藏 idle 闲置 的进程</a></li>
     <li><a href="#_113" rel="nofollow">只显示某个用户的进程</a></li>
     <li><a href="#top__116" rel="nofollow">top 命令的配置文件</a></li>
     <li><a href="#_118" rel="nofollow">帮助文档</a></li>
    </ul>
   </ul>
  </div>
  <br> 
  <a href="https://www.jb51.net/article/135411.htm" rel="nofollow">https://www.jb51.net/article/135411.htm</a>
  <br> 
  <a href="https://www.lifewire.com/linux-top-command-2201163" rel="nofollow">https://www.lifewire.com/linux-top-command-2201163</a>
  <br> 
  <a href="http://man7.org/linux/man-pages/man1/top.1.html" rel="nofollow">http://man7.org/linux/man-pages/man1/top.1.html</a>
  <br> top 命令主要用于查看进程的相关信息，同时它也会提供系统平均负载，cpu 信息和内存信息。下面的截图展示了 top 命令默认提供的信息：
  <br> 
  <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190511222402521.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3VvdGFpbA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">
  <p></p> 
  <h2><a id="_6"></a>系统平均负载</h2> 
  <p>top 命令输出中的第一行是系统的平均负载，这和 uptime 命令的输出是一样的：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190511222452493.png" alt="在这里插入图片描述"><br> 07:24:36 表示系统当前时间。<br> up 1:42 表示系统最后一次启动后总的运行时间。<br> 1 user 表示当前系统中只有一个登录用户。<br> load average: 0.51, 0.29, 0.27 表示系统的平均负载，<br> 最后的三个数字分别表示最后一分钟的系统平均负载，最后五分钟的系统平均负载，最后十五分钟的系统平均负载。<br> 小写字母 i 可以控制是否显示系统平均负载信息。</p> 
  <h2><a id="_16"></a>任务信息汇总</h2> 
  <p>在 linux 系统中，一般把进程和线程统称为任务。第二行信息是对当前系统中所有任务的统计：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190511222650931.png" alt="在这里插入图片描述"><br> Tasks:328 total 表示当前系统的进程总数。<br> 2 running 表示当前系统中有 2 个正在运行的进程。<br> 250 sleeping 表示当前系统中有 250个休眠的进程。<br> 0 stopped 表示停止状态的进程数为 0。<br> 0 zombie 表示处于僵死状态的进程数为 0。</p> 
  <h2><a id="CPU__25"></a>CPU 信息</h2> 
  <p>第三行显示 CPU 的使用情况：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190511222756278.png" alt="在这里插入图片描述"><br> 这里一共有八个字段，是我们了解 CPU 负载的主要依据，下面我们逐一介绍。</p> 
  <p>us<br> 进程在用户地址空间中消耗 CPU 时间的百分比。像 shell程序、各种语言的编译器、数据库应用、web 服务器和各种桌面应用都算是运行在用户地址空间的进程。这些程序如果不是处于 idle 状态，那么绝大多数的 CPU 时间都是运行在用户态。<br> sy<br> 进程在内核地址空间中消耗 CPU 时间的百分比。所有进程要使用的系统资源都是由 Linux 内核处理的。当处于用户态(用户地址空间)的进程需要使用系统的资源时，比如需要分配一些内存、或是执行 IO 操作、再或者是去创建一个子进程，此时就会进入内核态(内核地址空间)运行。事实上，决定进程在下一时刻是否会被运行的进程调度程序就运行在内核态。对于操作系统的设计来说，消耗在内核态的时间应该是越少越好。在实践中有一类典型的情况会使 sy 变大，那就是大量的 IO 操作，因此在调查 IO 相关的问题时需要着重关注它。<br> ni<br> ni 是 nice 的缩写，可以通过 nice 值调整进程用户态的优先级。这里显示的 ni 表示调整过 nice 值的进程消耗掉的 CPU 时间。如果系统中没有进程被调整过 nice 值，那么 ni 就显示为 0。<br> id<br> CPU 处于 idle 状态的百分比。一般情况下， us + ni + id 应该接近 100%。<br> wa<br> CPU 等待磁盘 IO 操作的时间。和 CPU 的处理速度相比，磁盘 IO 操作是非常慢的。有很多这样的操作，比如：CPU 在启动一个磁盘读写操作后，需要等待磁盘读写操作的结果。在磁盘读写操作完成前，CPU 只能处于空闲状态。Linux 系统在计算系统平均负载时会把 CPU 等待 IO 操作的时间也计算进去，所以在我们看到系统平均负载过高时，可以通过 wa 来判断系统的性能瓶颈是不是过多的 IO 操作造成的。<br> hi &amp; si<br> 这两个值表示系统处理中断消耗的时间。中断分为硬中断和软中断，hi 表示处理硬中断消耗的时间，si 表示处理软中断消耗的时间。硬中断是硬盘、网卡等硬件设备发送给 CPU 的中断消息，当 CPU 收到中断消息后需要进行适当的处理(消耗 CPU 时间)。软中断是由程序发出的中断，最终也会执行相应的处理程序(消耗 CPU 时间)。<br> st<br> 只有 Linux 在作为虚拟机运行时 st 才是有意义的。它表示虚机等待 CPU 资源的时间(虚机分到的是虚拟 CPU，当需要真实的 CPU 时，可能真实的 CPU 正在运行其它虚机的任务，所以需要等待)。</p> 
  <p><strong>小写字母 t 可以控制是否显示任务信息汇总和 CPU 信息。没错，它能控制是否显示两行信息。</strong></p> 
  <h2><a id="_48"></a>内存信息</h2> 
  <p>内存信息包含两行内容，内存和交换空间：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190511222923154.png" alt="在这里插入图片描述"><br> top 命令中这部分的输出和 free 命令的输出基本相同</p> 
  <p>控制显示单位<br> top 命令默认以 K 为单位显示内存大小，这让人十分抓狂。好在我们可以通过大写字母 E 来切换内存信息区域的显示单位(注意，E 不能控制任务区域中的内存单位)，下图以 MB 显示内存大小：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190511223114357.png" alt="在这里插入图片描述"></p> 
  <p><strong>小写字母 m 可以控制是否显示内存信息</strong>。</p> 
  <h2><a id="_61"></a>任务详情</h2> 
  <p>内存信息下面是一个空行(其实是与用户交互的区域)，空行的下面就是任务详情区域：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190511223218839.png" alt="在这里插入图片描述"><br> 默认情况下这里会显示 12 列数据，都是我们比较关心的进行相关的信息，下面我们一个一个的介绍。<br> PID 表示进程 ID。<br> USER 表示进程所有者的有效用户名称。简单说就是以哪个用户权限启动的进程。比如上图中有两个进程是用户 nick 启动的，还有一个是用户 prometheus 启动的，其它都是 root 用户启动的。<br> PR 表示进程执行的优先级，PR 的值是以 Linux 内核的视角看到的进程执行的优先级。<br> NI 从用户视角看到的进程执行优先级。注意上图中 NI 值为 -20 的两个进程，它们的 PR 值都是 0。<br> VIRT 表示进程使用的虚拟内存大小。<br> RES 表示进程使用的物理内存大小。<br> SHR 表示进程使用的共享内存的大小。<br> S 表示进程当前的状态。S 值有下面几种：<br> D 不可中断的睡眠状态(uninterruptible sleep)<br> R 正在运行的状态(running)<br> S 睡眠状态(sleeping)<br> T 跟踪或停止状态(traced or stopped)<br> Z 僵尸状态(zombie)<br> %CPU 表示进程使用 CPU 的百分比。<br> %MEM 表示进程使用内存的百分比。<br> TIME+ 表示进程累计使用的 CPU 时间。<br> COMMAND 表示运行进程对应的程序。</p> 
  <p>一般情况下这些信息足够了，但是如果你还想要更多的信息，你可以尝试添加更多的列。<br> <strong>按下小写字母 f 可以进入任务信息的配置界面：</strong><br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190511223600199.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3VvdGFpbA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> 在这里你可以选择要显示的列，并且可以配置以哪一列进行排序。</p> 
  <p>显示内存大小的单位问题在任务详情区域也同样存在，默认的单位也是 KB。要改变它的单位需要使用小写字母 <strong>e</strong> 来进行切换，比如我可以把它切换为以 MB 为单位：<br> 这样看起来就直观多了！</p> 
  <p>top 是一个非常复杂的命令，上面介绍的内容仅仅是一些皮毛而已。即便如此，你也可以用它来干不少的事情了！如果你想了解更多详细的信息，请参考 top 的使用手册。我们接下来介绍一些常见的用例。</p> 
  <h2><a id="_CPU__94"></a>显示多个 CPU 核心的详细信息</h2> 
  <p>无论系统中有多少个 CPU 核心，默认的 CPU 信息总是输出一行，即所有核心加起来的综合数据。能不能查看各个 CPU 核心单独的数据呢？答案是，可以的。按键盘上的数字 1 就可以在不同的视图之间切换了：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190511224008966.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3VvdGFpbA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> 
  <h2><a id="_98"></a>以某列对进程排序</h2> 
  <p>按小写字母 f 进入排序设置界面，选择某一列，按小写 ‘s’ 指定排序，然后退出。</p> 
  <p>奇怪的是默认主界面上并看不出是以哪列排序的！可以使用小写字母 x 来粗体显示当前排序的列：</p> 
  <p>反转排序的结果是常见的需求，大写字母 R 可以将当期排序的结果反转。</p> 
  <h2><a id="_106"></a>显示进程执行的完整命令</h2> 
  <p>默认 COMMAND 列只显示程序的名字，并不包含程序的路径。有时能够看到程序的完整路径是很方便的。你可以通过小写字母 c 来切换 COMMAND 列的显示模式：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/2019051122432581.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3VvdGFpbA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> 
  <h2><a id="_idle___110"></a>隐藏 idle 闲置 的进程</h2> 
  <p>在我们调查问题时，总希望以最快的方式找到繁忙的进程。但是 top 命令会把所有的进程列出，这就需要我们通过昏花的老眼去扫描一行行的进程信息。还好，我们可以借助小写字母 i 来控制是否显示处于 idle 状态的进程！使用这个命令后你会发现世界好清爽啊！</p> 
  <h2><a id="_113"></a>只显示某个用户的进程</h2> 
  <p>如果你想查看以某个用户权限启动的进程，可以使用小写字母 u 。这会提示你输入用户的名称，在你输入用户名称后，按回车键：</p> 
  <h2><a id="top__116"></a>top 命令的配置文件</h2> 
  <p>top 命令是有配置文件的，也就是说你通过命令修改的配置都可以保存下来。保存配置的命令为大写字母 W。在你修改了 top 命令的配置后按下大写字母 W，然后退出 top 命令并再次执行 top 命令，此时你的修改仍然在起作用。</p> 
  <h2><a id="_118"></a>帮助文档</h2> 
  <p>帮助文档永远都是我们的好朋友，小写字母 h 或者是 ？ 可以打开 top 命令的帮助文档。不要太惊奇，文档有点长哟！</p> 
 </div> 
 <link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-258a4616f7.css" rel="stylesheet"> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
