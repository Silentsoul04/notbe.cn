<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>数据库-SQL语言（数据更新） « NotBeCN</title>
  <meta name="description" content="           目录   数据更新   1、插入数据   1）、插入元祖   2）、插入子查询结果   2、修改数据   3、删除数据     数据更新   数据更新有三种操作：向表中添加若干行数据、修改表中的数据和删除表中的若干行数据。   1、插入数据   SQL 的数据插入语句 insert 通常有两...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2019/05/11/qq_43305922_90116749.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">数据库-SQL语言（数据更新）</h1>
    <p class="post-meta">May 11, 2019</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <hr>
  <p id="main-toc"><strong>目录</strong></p> 
  <p id="%E6%95%B0%E6%8D%AE%E6%9B%B4%E6%96%B0-toc" style="margin-left:0px;"><a href="#%E6%95%B0%E6%8D%AE%E6%9B%B4%E6%96%B0" rel="nofollow">数据更新</a></p> 
  <p id="1%E3%80%81%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE" rel="nofollow">1、插入数据</a></p> 
  <p id="1%EF%BC%89%E3%80%81%E6%8F%92%E5%85%A5%E5%85%83%E7%A5%96-toc" style="margin-left:80px;"><a href="#1%EF%BC%89%E3%80%81%E6%8F%92%E5%85%A5%E5%85%83%E7%A5%96" rel="nofollow">1）、插入元祖</a></p> 
  <p id="2%EF%BC%89%E3%80%81%E6%8F%92%E5%85%A5%E5%AD%90%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C-toc" style="margin-left:80px;"><a href="#2%EF%BC%89%E3%80%81%E6%8F%92%E5%85%A5%E5%AD%90%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C" rel="nofollow">2）、插入子查询结果</a></p> 
  <p id="2%E3%80%81%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE-toc" style="margin-left:40px;"><a href="#2%E3%80%81%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE" rel="nofollow">2、修改数据</a></p> 
  <p id="3%E3%80%81%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE-toc" style="margin-left:40px;"><a href="#3%E3%80%81%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE" rel="nofollow">3、删除数据</a></p> 
  <hr>
  <h1 id="%E6%95%B0%E6%8D%AE%E6%9B%B4%E6%96%B0">数据更新</h1> 
  <p style="text-indent:50px;">数据更新有三种操作：向表中添加若干行数据、修改表中的数据和删除表中的若干行数据。</p> 
  <h2 id="1%E3%80%81%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE">1、插入数据</h2> 
  <p style="text-indent:50px;">SQL 的数据插入语句 insert 通常有两种形式，一种是插入一个元组，另一种是插入子查询结果。后者可以一次性插入多个元祖。</p> 
  <h3 id="1%EF%BC%89%E3%80%81%E6%8F%92%E5%85%A5%E5%85%83%E7%A5%96">1）、插入元祖</h3> 
  <p style="text-indent:50px;">将新元组插入指定表中，其一般格式为：</p> 
  <p style="text-indent:50px;">insert into &lt;表名&gt; ( 属性列 , 属性列 , ...... ) values ( 常量 , 常量&nbsp; , ...... )&nbsp;</p> 
  <p style="text-indent:50px;">into子句中没有出现的属性列（即可以指定部分属性列），新元组在这些列上将取空值。但如果表定义时说明了 not null 的属性列不能取空值，不然会报错。如果into子句中没有指定属性列，那么就按照默认的顺序，个数也和表中的相同。属性列的顺序可与表定义中的顺序不一致。values 提供的值的个数和类型必须与 into 子句相匹配。</p> 
  <p style="text-indent:50px;">我们将上面表中数据插入为例：</p> 
  <pre class="has">
<code class="language-sql">insert into Student(Sno,Sname,Ssex,Sage,Sdept)
	values('201215121' , '李勇' , '男' , 20 , 'CS');
insert into Student(Sno,Sname,Ssex,Sage,Sdept)
	values('201215122' , '刘晨' , '女' , 19 , 'CS');
insert into Student(Sno,Sname,Ssex,Sage,Sdept)
	values('201215123' , '王敏' , '女' , 18 , 'MA');
insert into Student(Sno,Sname,Ssex,Sage,Sdept)
	values('201215125' , '张立' , '男' , 19 , 'IS')


insert into Course(Cno,Cname,Cpno,Ccredit)
	values('1' , '数据库' , '5' , 4 );
insert into Course(Cno,Cname,Cpno,Ccredit)
	values('2' , '数学' , NULL , 2 );
insert into Course(Cno,Cname,Cpno,Ccredit)
	values('3' , '信息系统' , '1' , 4 );
insert into Course(Cno,Cname,Cpno,Ccredit)
	values('4' , '操作系统' , '6' , 3 );
insert into Course(Cno,Cname,Cpno,Ccredit)
	values('5' , '数据结构' , '7' , 4 );
insert into Course(Cno,Cname,Cpno,Ccredit)
	values('6' , '数据处理' , NULL , 2 );
insert into Course(Cno,Cname,Cpno,Ccredit)
	values('7' , 'PASCAL语言' , '6' , 4 );
	
	
insert into SC(Sno,Cno,Grade)
	values('201215121' , '1' , 92); 
insert into SC(Sno,Cno,Grade)
	values('201215121' , '2' , 85);
insert into SC(Sno,Cno,Grade)
	values('201215121' , '3' , 88);
insert into SC(Sno,Cno,Grade)
	values('201215122' , '2' , 90);
insert into SC(Sno,Cno,Grade)
	values('201215122' , '3' , 80);</code></pre> 
  <p style="text-indent:50px;">在上面的插入元组过程中，需要注意的一点是课程表插入元组时要参照先行课的顺序去插入，不然会报错。</p> 
  <p>关于指定部分属性插入：</p> 
  <pre class="has">
<code class="language-sql">insert into Course(Cno,Cname)
	values ( '8','Python');</code></pre> 
  <h3 id="2%EF%BC%89%E3%80%81%E6%8F%92%E5%85%A5%E5%AD%90%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C">2）、插入子查询结果</h3> 
  <p style="text-indent:50px;">将子查询结果插入到指定表中，其语句格式一般为：</p> 
  <p style="text-indent:50px;">insert into &lt;表名&gt; [ ( &lt;属性列1&gt; [ , &lt;属性列2&gt; ...&nbsp;&nbsp;) ]</p> 
  <p style="text-indent:50px;">子查询；</p> 
  <p style="text-indent:50px;">注意：into 子句与插入元组类似；子查询中的 select 语句目标列必须与 into 子句匹配 ( 值的个数，值的类型&nbsp;)</p> 
  <p>例：</p> 
  <pre class="has">
<code class="language-sql">--对每一个系，求学生的平均年龄，并把结果存入数据库的一个新表中：

--先创建一个新表，用来存放结果
create table Dept_age(
	Sdept char(10) ,
	Avg_age int
)

--向新表中插入需求的结果：
insert into Dept_age 
	select Sdept , avg(Sage)
	from Student
	group by Sdept</code></pre> 
  <p>&nbsp;</p> 
  <h2 id="2%E3%80%81%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE">2、修改数据</h2> 
  <p style="text-indent:50px;">修改数据又称为更新操作，其语句一般格式为：</p> 
  <p style="text-indent:50px;">update &lt;表名&gt;</p> 
  <p style="text-indent:50px;">set &lt;列名&gt; = &lt;表达式&gt; [ , &lt;列名&gt; = &lt;表达式&gt; ]</p> 
  <p style="text-indent:50px;">[ where &lt;条件&gt; ] ;</p> 
  <p style="text-indent:50px;">其功能是修改指定表中满足 where 子句条件的元组，其中 set 子句给出的 表达式的值用于取代相应地属性列值。<u><strong>如果省略 where 子句，则表示要修改表中的所有元组</strong></u>。在执行修改语句时，DBMS会检查修改操作是否破坏表上已定义的完整性规则：实体完整性：主码不允许修改 ； 参照完整性 ； 用户定义的完整性 ： not null 约束 、 unique 约束 、值域约束 等。</p> 
  <p>修改数据有三种修改方式：</p> 
  <p style="text-indent:0;">1)、修改一个元组的值。</p> 
  <p style="text-indent:50px;">例：将学号为 201215121 的学生年龄修改为 22岁 。</p> 
  <pre class="has">
<code class="language-sql">update Student
	set Sage=22
	where Sno='201215121'</code></pre> 
  <p style="text-indent:0;">2)、修改多个元组的值。</p> 
  <p style="text-indent:50px;">例：将所有学生年龄增加一岁 。</p> 
  <pre class="has">
<code class="language-sql">update Student
	set Sage = Sage+1</code></pre> 
  <p style="text-indent:0;">3)、带子查询的修改语句。</p> 
  <p style="text-indent:50px;">例：将 CS 系全体学生的成绩置零。</p> 
  <pre class="has">
<code class="language-sql">update SC
	set Grade=0
	where Sno in (
		select Sno
		from Student
		where Sdept='CS'
	)
</code></pre> 
  <h2>&nbsp;</h2> 
  <h2 id="3%E3%80%81%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE">3、删除数据</h2> 
  <p style="text-indent:50px;">删除语句的一般格式为：</p> 
  <p style="text-indent:50px;">delete&nbsp; from&nbsp; &lt;表名&gt;</p> 
  <p style="text-indent:50px;">where &lt;条件&gt; ;</p> 
  <p style="text-indent:50px;">该语句的功能是删除指定表中满足 where 子句条件的元组。如果省略 where子句则表示删除表中全部元组，但表的定义还在字典中。也就是说， <u><strong>delete 语句删除的是表中的数据，而不是关于表的定义</strong></u>，和前面的 drop 语句要分清 。对基本表中数据删除时仍要考虑是否会破坏参照完整性规则，如外键约束等。</p> 
  <p style="text-indent:0;">删除数据有三种删除方式：</p> 
  <p style="text-indent:0;">1)、删除一个元组的值。</p> 
  <p style="text-indent:50px;">例：删除学号为 201215128 的学生记录。</p> 
  <pre class="has">
<code class="language-sql">delete from Student
    where Sno='201215128'</code></pre> 
  <p style="text-indent:0;">2)、删除多个元组的值。</p> 
  <p style="text-indent:50px;">例：删除所有学生的选课记录。</p> 
  <pre class="has">
<code class="language-sql">delete from SC</code></pre> 
  <p style="text-indent:50px;">此时的SC表中没有任何数据，但表的定义还在，成了一个空表。</p> 
  <p style="text-indent:0;">3)、带子查询的删除语句。</p> 
  <p style="text-indent:50px;">例：删除 CS 系所有学生的选课记录。</p> 
  <pre class="has">
<code class="language-sql">delete from SC
    where Sno in (
        select Sno
        from Student
        where Sdept='CS'
)</code></pre> 
  <p style="text-indent:50px;">&nbsp;</p> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
