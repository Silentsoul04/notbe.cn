<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>开发中尽量避免犯错的方法总结 « NotBeCN</title>
  <meta name="description" content="         一、前言   开发过程中，由于对业务不熟，对技术掌握不深，粗心等等原因，可能会出现线上故障。   轻则出现小bug，重则罚款，绩效低，甚至走人。   如何养成良好的编程习惯，如果避免出现这些问题非常重要。   &nbsp;   二、要考虑的地方   下面目录大致分类，可能个别不够合理，仅供参考。...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2019/05/11/w605283073_90116351.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">开发中尽量避免犯错的方法总结</h1>
    <p class="post-meta">May 11, 2019</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <h2>一、前言</h2> 
  <p>开发过程中，由于对业务不熟，对技术掌握不深，粗心等等原因，可能会出现线上故障。</p> 
  <p>轻则出现小bug，重则罚款，绩效低，甚至走人。</p> 
  <p>如何养成良好的编程习惯，如果避免出现这些问题非常重要。</p> 
  <p>&nbsp;</p> 
  <h2>二、要考虑的地方</h2> 
  <p>下面目录大致分类，可能个别不够合理，仅供参考。</p> 
  <h3>2.0 需求！需求！需求</h3> 
  <p>需求要彻底搞明白，搞不明白多和产品确认。</p> 
  <p>想好可行的技术方案后再动手写代码，避免低效，避免返工。</p> 
  <p>多做任务分解，拆分后可以评估每一个任务的耗时，并尽量预留一定机动的时间。</p> 
  <p>&nbsp;</p> 
  <h3>2.1 仔细！仔细！仔细</h3> 
  <ol>
   <li>写代码的时候要仔细，多和master代码比较，有时间自己多review一下自己的代码。</li> 
   <li>merge代码之后要检查merge的对不对，分支名是不是对，代码是不是对</li> 
   <li>进行一些线上操作，尤其是修改数据的操作，要尽可能的慎重。</li> 
   <li>提db修改尽可能的本地先测试好，多检查几遍。</li> 
   <li>代码冲突解决要慎之又慎。</li> 
   <li>操作之前看清是测试环境还是预发环境还是线上环境。</li> 
   <li>为了自测硬编码到代码中的代码片段是否有线上不运行的机制？</li> 
  </ol>
  <p>等等</p> 
  <h3>2.2 多看最佳实践</h3> 
  <p>养成好的编程习惯和风格非常重要，好的编程习惯不仅更有逻辑，而且更易于修改，易于拓展，减少甚至预防不必要的BUG等。</p> 
  <p>推荐下面基本自己看过的并且认为非常有价值的几本书：</p> 
  <p>《阿里巴巴Java编程规范》、《重构-改善既有代码的设计》、《编写可读代码的艺术》、《代码整洁之道》、</p> 
  <p>《修改软件的艺术》、《修改代码的艺术》、《遗留系统重建实战》、《Effective Java》</p> 
  <p>可以参考我的这篇文章：<a href="https://blog.csdn.net/w605283073/article/details/89893440" rel="nofollow">https://blog.csdn.net/w605283073/article/details/89893440</a></p> 
  <p>&nbsp;</p> 
  <h3>2.3 Code Review</h3> 
  <p>如果有条件，团队成员之间尽量相互cr彼此的代码，一方面熟悉团队的业务，两外一方面避免对方没考虑到的一些潜在的风险。</p> 
  <p>高质量的CR可能避免风险，提高团队的代码质量。</p> 
  <p>另外自己没事多和master对比一下代码。</p> 
  <p>强烈推荐一本电子书：</p> 
  <p><a href="https://leanpub.com/whattolookforinacodereview" rel="nofollow">https://leanpub.com/whattolookforinacodereview</a></p> 
  <p>多读读upsource的博客</p> 
  <p><a href="https://blog.jetbrains.com/upsource/" rel="nofollow">https://blog.jetbrains.com/upsource/</a></p> 
  <p>&nbsp;</p> 
  <h3>2.4 善用IDE</h3> 
  <ol>
   <li>IDEA安装阿里巴巴的代码规范插件或者其他代码检查插件。这样写代码的时候，比如某个集合存入数据但是没有使用，某个变量没有用到等都会给出提示。</li> 
   <li>IDEA自带查看类继承体系，分析类之间关系的图形工具。</li> 
   <li>安装FindBugs等静态代码检查插件。</li> 
  </ol>
  <p>等等</p> 
  <p>IDEA好用的插件，可以参考我的这篇文章：<a href="https://blog.csdn.net/w605283073/article/details/89163627" rel="nofollow">https://blog.csdn.net/w605283073/article/details/89163627</a></p> 
  <h3>2.5 考虑各种风险</h3> 
  <ol>
   <li>数据量如果大了会怎样？性能会不会有问题？</li> 
   <li>网络不稳定会怎样？重试？如果一直失败怎么办？</li> 
   <li>接口调用失败会怎样？要不要重试？</li> 
   <li>消息会不会重复消费？有没有做好幂等？</li> 
   <li>会不会缓存穿透？如果会怎么办？</li> 
   <li>代码修改影响面多大？</li> 
   <li>高并发场景接口该考虑哪些问题？准备哪些方案？限流、熔断、降级</li> 
  </ol>
  <p>等等</p> 
  <p>&nbsp;</p> 
  <h3>2.6 数据方面的考虑</h3> 
  <ol>
   <li>数据库操作要不要开启事务？</li> 
   <li>大表DDL会不会导致主从延迟？</li> 
   <li>强实时性要求应该强制查主表。</li> 
   <li>线上操作update和delete之前先开启事务，并且先select查出数据看看对不对。</li> 
   <li>数据安全问题，是否需要加密？</li> 
   <li>数据量大性能会不会有问题？</li> 
  </ol>
  <p>&nbsp;</p> 
  <h3>2.7 修改代码时的考虑</h3> 
  <ol>
   <li>技术角度和经验总结</li> 
   <li>修改别人的代码之前一定要充分理解原有代码的逻辑</li> 
   <li>删除代码要慎重！！</li> 
   <li>能不修改api就不修改api</li> 
   <li>尽量写注释和文档</li> 
   <li>先评估好影响面，然后再确保改对</li> 
   <li>移动代码未知不要复制忘了删除</li> 
  </ol>
  <h3>2.8 提高意识</h3> 
  <ol>
   <li>重要操作两个人确认</li> 
   <li>没有监控的服务不能上线</li> 
   <li>先追求质量再追求速度</li> 
   <li>多看故障的原因</li> 
  </ol>
  <h3>2.9 积累技巧</h3> 
  <ol>
   <li>部分功能可以设置开关</li> 
   <li>针对用户的接口要异常处理</li> 
   <li>多验证，多自测</li> 
   <li>新增方法时，参数多尽量用类封装，减少参数尽量新增方法等</li> 
   <li>缓存是否需要设置有效期？多少合理？</li> 
   <li>任务加上开关，出现异常立马关闭</li> 
   <li>下线接口之前，原接口打日志多观察一段时间</li> 
   <li>超时重试要设置时间间隔</li> 
   <li>新任务上线要多观察标新</li> 
   <li>debug技巧，比如断点、修改变量值，切换调用栈，甚至回退等。</li> 
  </ol>
  <h3>2.10 加强监控</h3> 
  <ul>
   <li>线程池状态监控 
    <ul>
     <li>线程数量</li> 
     <li>队列size</li> 
     <li>定时任务</li> 
    </ul></li> 
   <li>重视error日志</li> 
  </ul>
  <h3>2.11 编码时</h3> 
  <ol>
   <li>db交互时不要用基本类型，避免默认值导致诡异问题</li> 
   <li>查询不到信息是否返回null??</li> 
   <li>参数严格校验</li> 
   <li>重要操作考虑幂等性问题</li> 
   <li>重要功能强制要确认交互</li> 
   <li>日志相关： 第三方调用要加日志，切面切到异常不要吞掉且打日志用error级别，线程池满了写日志发警告等</li> 
   <li>代码重构 
    <ul>
     <li>逻辑变更 
      <ul>
       <li>结对review 
        <ul>
         <li>简明描述修改功能</li> 
         <li>如果太复杂用新方法代替</li> 
        </ul></li> 
      </ul></li> 
     <li>逻辑不变 
      <ul>
       <li>单元测试保证，要覆盖所有路径</li> 
      </ul></li> 
    </ul></li> 
   <li>参数 
    <ul>
     <li>入参变更 
      <ul>
       <li>新增入参 
        <ul>
         <li>兼容性 null?</li> 
         <li>合法性？</li> 
         <li>日志打印新参数</li> 
        </ul></li> 
       <li>减少入参 
        <ul>
         <li>新增方法</li> 
        </ul></li> 
       <li>入参类型变更 
        <ul>
         <li>新增方法</li> 
        </ul></li> 
      </ul></li> 
    </ul></li> 
  </ol>
  <h3>2.12 测试！测试！测试！</h3> 
  <ul>
   <li>单元测试:&nbsp; &nbsp;覆盖率很重要、特殊逻辑要覆盖、正常和异常参数和case都要测试</li> 
   <li>功能测试： 正向校验、负向校验、新功能回归原需求、关联的功能测试、考虑没有覆盖的场景</li> 
   <li>其他：不符合预期的表现要彻查原因</li> 
  </ul>
  <p><span style="color:#f33b45;">&nbsp; &nbsp;强烈推荐用mokito进行单元测试，mock接口去测逻辑对不对，并且注重代码覆盖率，效果非常好！</span></p> 
  <p>&nbsp; 不要只依赖功能测试，因为功能测试是黑盒测试，未必覆盖到所有情况。</p> 
  <p>&nbsp;</p> 
  <blockquote> 
   <p>如果觉得本文对你有帮助，欢迎点赞，欢迎关注我，如果有补充欢迎评论交流，我将努力创作更多更好的文章。</p> 
  </blockquote> 
  <p>&nbsp;</p> 
  <p>&nbsp;</p> 
  <p>&nbsp;</p> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
