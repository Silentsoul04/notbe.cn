<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>linux学习开始第五天 « NotBeCN</title>
  <meta name="description" content="                        4.1 Vim文本编辑器   每当在讲课时遇到需要让学生记住的知识点时，为了能让他们打起精神来，我都会突然提高嗓门，因此有句话他们记得尤其深刻：“在Linux系统中一切都是文件，而配置一个服务就是在修改其配置文件的参数”。而且在日常工作中大家也肯定免不了要编写文档，...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2019/05/11/jelly0925_90115789.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">linux学习开始第五天</h1>
    <p class="post-meta">May 11, 2019</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div id="content_views" class="markdown_views prism-atom-one-dark"> 
  <!-- flowchart 箭头图标 勿删 --> 
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> 
  <p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/2019051121525722.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2plbGx5MDkyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190511215316553.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2plbGx5MDkyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/2019051121534485.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2plbGx5MDkyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190511215407552.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2plbGx5MDkyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190511215423886.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2plbGx5MDkyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/2019051121544572.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2plbGx5MDkyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190511215506964.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2plbGx5MDkyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">4.1 Vim文本编辑器</p> 
  <p>每当在讲课时遇到需要让学生记住的知识点时，为了能让他们打起精神来，我都会突然提高嗓门，因此有句话他们记得尤其深刻：“在Linux系统中一切都是文件，而配置一个服务就是在修改其配置文件的参数”。而且在日常工作中大家也肯定免不了要编写文档，这些工作都是通过文本编辑器来完成的。刘遄老师写作本书的目的是让读者切实掌握Linux系统的运维方法，而不是仅仅停留在“会用某个操作系统”的层面上，所以我们这里选择使用Vim文本编辑器，它默认会安装在当前所有的Linux操作系统上，是一款超棒的文本编辑器。</p> 
  <p>Vim之所以能得到广大厂商与用户的认可，原因在于Vim编辑器中设置了三种模式—命令模式、末行模式和编辑模式，每种模式分别又支持多种不同的命令快捷键，这大大提高了工作效率，而且用户在习惯之后也会觉得相当顺手。要想高效率地操作文本，就必须先搞清这三种模式的操作区别以及模式之间的切换方法。</p> 
  <pre><code>命令模式：控制光标移动，可对文本进行复制、粘贴、删除和查找等工作。

输入模式：正常的文本录入。

末行模式：保存或退出文档，以及设置编辑环境。
</code></pre> 
  <p>Vim中常用的命令<br> 命令 作用<br> dd 删除（剪切）光标所在整行<br> 5dd 删除（剪切）从光标处开始的5行<br> yy 复制光标所在整行<br> 5yy 复制从光标处开始的5行<br> n 显示搜索命令定位到的下一个字符串<br> N 显示搜索命令定位到的上一个字符串<br> u 撤销上一步的操作<br> p 将之前删除（dd）或复制（yy）过的数据粘贴到光标后面</p> 
  <p>末行模式主要用于保存或退出文件，以及设置Vim编辑器的工作环境，还可以让用户执行外部的Linux命令或跳转到所编写文档的特定行数。要想切换到末行模式，在命令模式中输入一个冒号就可以了。末行模式中可用的命令如表4-2所示。</p> 
  <p>表4-2 末行模式中可用的命令<br> 命令 作用<br> :w 保存<br> :q 退出<br> :q! 强制退出（放弃对文档的修改内容）<br> :wq! 强制保存退出<br> :set nu 显示行号<br> :set nonu 不显示行号<br> :命令 执行该命令<br> :整数 跳转到该行<br> 😒/one/two 将当前光标所在行的第一个one替换成two<br> 😒/one/two/g 将当前光标所在行的所有one替换成two<br> :%s/one/two/g 将全文中的所有one替换成two<br> ?字符串 在文本中从下至上搜索该字符串<br> /字符串 在文本中从上至下搜索该字符串<br> 4.2配置Yum仓库</p> 
  <p>本书前面讲到，Yum软件仓库的作用是为了进一步简化RPM管理软件的难度以及自动分析所需软件包及其依赖关系的技术。可以把Yum想象成是一个硕大的软件仓库，里面保存有几乎所有常用的工具，而且只需要说出所需的软件包名称，系统就会自动为您搞定一切。</p> 
  <p>既然要使用Yum软件仓库，就要先把它搭建起来，然后将其配置规则确定好才行。鉴于第6章才会讲解Linux的存储结构和设备挂载操作，所以我们当前还是将重心放到Vim编辑器的学习上。如果遇到看不懂的参数也不要紧，后面章节会单独讲解。搭建并配置Yum软件仓库的大致步骤如下所示。</p> 
  <p>第1步：进入到/etc/yum.repos.d/目录中（因为该目录存放着Yum软件仓库的配置文件）。</p> 
  <p>第2步：使用Vim编辑器创建一个名为rhel7.repo的新配置文件（文件名称可随意，但后缀必须为.repo），逐项写入下面加粗的配置参数并保存退出（不要写后面的中文注释）。</p> 
  <pre><code>[rhel-media] ：Yum软件仓库唯一标识符，避免与其他仓库冲突。

name=linuxprobe：Yum软件仓库的名称描述，易于识别仓库用处。

baseurl=file:///media/cdrom：提供的方式包括FTP（ftp://..）、HTTP（http://..）、本地（file:///..）。

enabled=1：设置此源是否可用；1为可用，0为禁用。

gpgcheck=1：设置此源是否校验文件；1为校验，0为不校验。

gpgkey=file:///media/cdrom/RPM-GPG-KEY-redhat-release：若上面参数开启校验，那么请指定公钥文件地址。
4.2 编写Shell脚本
</code></pre> 
  <p>可以将Shell终端解释器当作人与计算机硬件之间的“翻译官”，它作为用户与Linux系统内部的通信媒介，除了能够支持各种变量与参数外，还提供了诸如循环、分支等高级编程语言才有的控制结构特性。要想正确使用Shell中的这些功能特性，准确下达命令尤为重要。Shell脚本命令的工作方式有两种：交互式和批处理。</p> 
  <pre><code>交互式（Interactive）：用户每输入一条命令就立即执行。

批处理（Batch）：由用户事先编写好一个完整的Shell脚本，Shell会一次性执行脚本中诸多的命令。
</code></pre> 
  <p>在Shell脚本中不仅会用到前面学习过的很多Linux命令以及正则表达式、管道符、数据流重定向等语法规则，还需要把内部功能模块化后通过逻辑语句进行处理，最终形成日常所见的Shell脚本。</p> 
  <p>查看SHELL变量可以发现当前系统已经默认使用Bash作为命令行终端解释器了：</p> 
  <p>[root@linuxprobe ~]# echo $SHELL<br> /bin/bash</p> 
  <p>4.2.1 编写简单的脚本</p> 
  <p>估计读者在看完上文中有关Shell脚本的复杂描述后，会累觉不爱吧。但是，上文指的是一个高级Shell脚本的编写原则，其实使用Vim编辑器把Linux命令按照顺序依次写入到一个文件中，这就是一个简单的脚本了。</p> 
  <p>例如，如果想查看当前所在工作路径并列出当前目录下所有的文件及属性信息，实现这个功能的脚本应该类似于下面这样：</p> 
  <p>[root@linuxprobe ~]# vim <a href="http://example.sh" rel="nofollow">example.sh</a><br> #!/bin/bash<br> #For Example BY <a href="http://linuxprobe.com" rel="nofollow">linuxprobe.com</a><br> pwd<br> ls -al</p> 
  <p>Shell脚本文件的名称可以任意，但为了避免被误以为是普通文件，建议将.sh后缀加上，以表示是一个脚本文件。在上面的这个example.sh脚本中实际上出现了三种不同的元素：第一行的脚本声明（#!）用来告诉系统使用哪种Shell解释器来执行该脚本；第二行的注释信息（#）是对脚本功能和某些命令的介绍信息，使得自己或他人在日后看到这个脚本内容时，可以快速知道该脚本的作用或一些警告信息；第三、四行的可执行语句也就是我们平时执行的Linux命令了。什么？！你们不相信这么简单就编写出来了一个脚本程序，那我们来执行一下看看结果：</p> 
  <p>[root@linuxprobe ~]# bash <a href="http://example.sh" rel="nofollow">example.sh</a><br> /root/Desktop<br> total 8<br> drwxr-xr-x. 2 root root 23 Jul 23 17:31 .<br> dr-xr-x—. 14 root root 4096 Jul 23 17:31 …<br> -rwxr–r--. 1 root root 55 Jul 23 17:31 <a href="http://example.sh" rel="nofollow">example.sh</a></p> 
  <p>除了上面用bash解释器命令直接运行Shell脚本文件外，第二种运行脚本程序的方法是通过输入完整路径的方式来执行。但默认会因为权限不足而提示报错信息，此时只需要为脚本文件增加执行权限即可（详见第5章）。初次学习Linux系统的读者不用心急，等下一章学完用户身份和权限后再来做这个实验也不迟：</p> 
  <p>[root@linuxprobe ~]# ./example.sh<br> bash: ./Example.sh: Permission denied<br> [root@linuxprobe ~]# chmod u+x <a href="http://example.sh" rel="nofollow">example.sh</a><br> [root@linuxprobe ~]# ./example.sh<br> /root/Desktop<br> total 8<br> drwxr-xr-x. 2 root root 23 Jul 23 17:31 .<br> dr-xr-x—. 14 root root 4096 Jul 23 17:31 …<br> -rwxr–r--. 1 root root 55 Jul 23 17:31 <a href="http://example.sh" rel="nofollow">example.sh</a></p> 
  <p>4.2.2 接收用户的参数</p> 
  <p>但是，像上面这样的脚本程序只能执行一些预先定义好的功能，未免太过死板了。为了让Shell脚本程序更好地满足用户的一些实时需求，以便灵活完成工作，必须要让脚本程序能够像之前执行命令时那样，接收用户输入的参数。</p> 
  <p>其实，Linux系统中的Shell脚本语言早就考虑到了这些，已经内设了用于接收参数的变量，变量之间可以使用空格间隔。例如<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mn>
          0
         </mn>
         <mi mathvariant="normal">
          对
         </mi>
         <mi mathvariant="normal">
          应
         </mi>
         <mi mathvariant="normal">
          的
         </mi>
         <mi mathvariant="normal">
          是
         </mi>
         <mi mathvariant="normal">
          当
         </mi>
         <mi mathvariant="normal">
          前
         </mi>
         <mi>
          S
         </mi>
         <mi>
          h
         </mi>
         <mi>
          e
         </mi>
         <mi>
          l
         </mi>
         <mi>
          l
         </mi>
         <mi mathvariant="normal">
          脚
         </mi>
         <mi mathvariant="normal">
          本
         </mi>
         <mi mathvariant="normal">
          程
         </mi>
         <mi mathvariant="normal">
          序
         </mi>
         <mi mathvariant="normal">
          的
         </mi>
         <mi mathvariant="normal">
          名
         </mi>
         <mi mathvariant="normal">
          称
         </mi>
         <mi mathvariant="normal">
          ，
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         0对应的是当前Shell脚本程序的名称，
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord">0</span><span class="mord cjk_fallback">对</span><span class="mord cjk_fallback">应</span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">是</span><span class="mord cjk_fallback">当</span><span class="mord cjk_fallback">前</span><span style="margin-right: 0.05764em;" class="mord mathit">S</span><span class="mord mathit">h</span><span class="mord mathit">e</span><span style="margin-right: 0.01968em;" class="mord mathit">l</span><span style="margin-right: 0.01968em;" class="mord mathit">l</span><span class="mord cjk_fallback">脚</span><span class="mord cjk_fallback">本</span><span class="mord cjk_fallback">程</span><span class="mord cjk_fallback">序</span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">名</span><span class="mord cjk_fallback">称</span><span class="mord cjk_fallback">，</span></span></span></span></span>#对应的是总共有几个参数，<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mo>
          ∗
         </mo>
         <mi mathvariant="normal">
          对
         </mi>
         <mi mathvariant="normal">
          应
         </mi>
         <mi mathvariant="normal">
          的
         </mi>
         <mi mathvariant="normal">
          是
         </mi>
         <mi mathvariant="normal">
          所
         </mi>
         <mi mathvariant="normal">
          有
         </mi>
         <mi mathvariant="normal">
          位
         </mi>
         <mi mathvariant="normal">
          置
         </mi>
         <mi mathvariant="normal">
          的
         </mi>
         <mi mathvariant="normal">
          参
         </mi>
         <mi mathvariant="normal">
          数
         </mi>
         <mi mathvariant="normal">
          值
         </mi>
         <mi mathvariant="normal">
          ，
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         *对应的是所有位置的参数值，
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.46528em; vertical-align: 0em;"></span><span class="mord">∗</span><span class="mord cjk_fallback">对</span><span class="mord cjk_fallback">应</span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">是</span><span class="mord cjk_fallback">所</span><span class="mord cjk_fallback">有</span><span class="mord cjk_fallback">位</span><span class="mord cjk_fallback">置</span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">参</span><span class="mord cjk_fallback">数</span><span class="mord cjk_fallback">值</span><span class="mord cjk_fallback">，</span></span></span></span></span>?对应的是显示上一次命令的执行返回值，而$1、$2、$3……则分别对应着第N个位置的参数值，如图4-15所示。</p> 
  <p>第4章 Vim编辑器与Shell命令脚本。第4章 Vim编辑器与Shell命令脚本。</p> 
  <p>图4-15 Shell脚本程序中的参数位置变量</p> 
  <p>理论过后我们来练习一下。尝试编写一个脚本程序示例，通过引用上面的变量参数来看下真实效果：</p> 
  <p>[root@linuxprobe ~]# vim <a href="http://example.sh" rel="nofollow">example.sh</a><br> #!/bin/bash<br> echo “当前脚本名称为<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mn>
          0
         </mn>
         <mi mathvariant="normal">
          &amp;quot;
         </mi>
         <mi>
          e
         </mi>
         <mi>
          c
         </mi>
         <mi>
          h
         </mi>
         <mi>
          o
         </mi>
         <mi mathvariant="normal">
          &amp;quot;
         </mi>
         <mi mathvariant="normal">
          总
         </mi>
         <mi mathvariant="normal">
          共
         </mi>
         <mi mathvariant="normal">
          有
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         0&amp;quot; echo &amp;quot;总共有
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord">0</span><span class="mord">"</span><span class="mord mathit">e</span><span class="mord mathit">c</span><span class="mord mathit">h</span><span class="mord mathit">o</span><span class="mord">"</span><span class="mord cjk_fallback">总</span><span class="mord cjk_fallback">共</span><span class="mord cjk_fallback">有</span></span></span></span></span>#个参数，分别是$*。”<br> echo “第1个参数为$1，第5个为$5。”<br> [root@linuxprobe ~]# sh <a href="http://example.sh" rel="nofollow">example.sh</a> one two three four five six<br> <a href="http://xn--example-e73ky61a9pe862b3xtny9cs7u.sh" rel="nofollow">当前脚本名称为example.sh</a><br> 总共有6个参数，分别是one two three four five six。<br> 第1个参数为one，第5个为five。</p> 
 </div> 
 <link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-258a4616f7.css" rel="stylesheet"> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
