<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Makefile 使用总结【转】 « NotBeCN</title>
  <meta name="description" content="             &nbsp;    转自：http://www.cnblogs.com/wang_yb/p/3990952.html         1. Makefile 简介     Makefile 是和 make 命令一起配合使用的.     很多大型项目的编译都是通过 Makefile 来组织...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2016/08/31/weixin_34270606_90132351.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">Makefile 使用总结【转】</h1>
    <p class="post-meta">Aug 31, 2016</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <p>&nbsp;</p> 
   <p>转自：<a href="http://www.cnblogs.com/wang_yb/p/3990952.html" rel="nofollow">http://www.cnblogs.com/wang_yb/p/3990952.html</a></p> 
   <div style="font-family:verdana, 'ms song', '宋体', Arial, '微软雅黑', Helvetica, sans-serif;font-size:12px;line-height:24px;"> 
    <h2 style="font-size:21px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>1. Makefile 简介</strong></h2> 
    <p style="font-size:1.2em;line-height:2em;">Makefile 是和 make 命令一起配合使用的.</p> 
    <p style="font-size:1.2em;line-height:2em;">很多大型项目的编译都是通过 Makefile 来组织的, 如果没有 Makefile, 那很多项目中各种库和代码之间的依赖关系不知会多复杂.</p> 
    <p style="font-size:1.2em;line-height:2em;">Makefile的组织流程的能力如此之强, 不仅可以用来编译项目, 还可以用来组织我们平时的一些日常操作. 这个需要大家发挥自己的想象力.</p> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;">本篇博客是基于&nbsp;<a style="color:#f24c3e;text-decoration:none;" href="http://bbs.chinaunix.net/forum.php?mod=viewthread&amp;tid=408225" rel="nofollow">{精华} 跟我一起写 Makefile</a>&nbsp;而整理的, 有些删减, 追加了一些示例.</p> 
    <p style="font-size:1.2em;line-height:2em;">非常感谢 gunguymadman_cu 提供如此详尽的Makefile介绍, 这正是我一直寻找的Makefile中文文档.</p> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>1.1 Makefile 主要的 5个部分 (显示规则, 隐晦规则, 变量定义, 文件指示, 注释)</strong></h3> 
    <p style="font-size:1.2em;line-height:2em;">Makefile基本格式如下:</p> 
    <div class="cnblogs_code"> 
     <pre><span style="line-height:1.5;">target ... : prerequisites ...
    command
    ...
    ...</span></pre> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">其中,</p> 
    <ul>
     <li style="list-style:disc;">target&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - 目标文件, 可以是 Object File, 也可以是可执行文件</li> 
     <li style="list-style:disc;">prerequisites - 生成 target 所需要的文件或者目标</li> 
     <li style="list-style:disc;">command&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - make需要执行的命令 (任意的shell命令), Makefile中的命令必须以 [tab] 开头</li> 
    </ul>
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <ol>
     <li style="list-style:decimal;"><strong>显示规则 :: 说明如何生成一个或多个目标文件(包括 生成的文件, 文件的依赖文件, 生成的命令)</strong></li> 
     <li style="list-style:decimal;"><strong>隐晦规则 :: make的自动推导功能所执行的规则</strong></li> 
     <li style="list-style:decimal;"><strong>变量定义 :: Makefile中定义的变量</strong></li> 
     <li style="list-style:decimal;"><strong>文件指示 :: Makefile中引用其他Makefile; 指定Makefile中有效部分; 定义一个多行命令</strong></li> 
     <li style="list-style:decimal;"><strong>注释&nbsp;&nbsp;&nbsp;&nbsp; :: Makefile只有行注释 "#", 如果要使用或者输出"#"字符, 需要进行转义, "\#"</strong></li> 
    </ol>
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>1.2 GNU make 的工作方式</strong></h3> 
    <ol>
     <li style="list-style:decimal;">读入主Makefile (主Makefile中可以引用其他Makefile)</li> 
     <li style="list-style:decimal;">读入被include的其他Makefile</li> 
     <li style="list-style:decimal;">初始化文件中的变量</li> 
     <li style="list-style:decimal;">推导隐晦规则, 并分析所有规则</li> 
     <li style="list-style:decimal;">为所有的目标文件创建依赖关系链</li> 
     <li style="list-style:decimal;">根据依赖关系, 决定哪些目标要重新生成</li> 
     <li style="list-style:decimal;">执行生成命令</li> 
    </ol>
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h2 style="font-size:21px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>2. Makefile 初级语法</strong></h2> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>2.1 Makefile 规则</strong></h3> 
    <h4 style="font-size:14px;color:#333333;"><strong>2.1.1 规则语法</strong></h4> 
    <p style="font-size:1.2em;line-height:2em;">规则主要有2部分: 依赖关系 和 生成目标的方法.</p> 
    <p style="font-size:1.2em;line-height:2em;">语法有以下2种:</p> 
    <div class="cnblogs_code"> 
     <pre><span style="line-height:1.5;">target ... : prerequisites ...
    command
    ...</span></pre> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">或者</p> 
    <div class="cnblogs_code"> 
     <pre><span style="line-height:1.5;">target ... : prerequisites ; command
    command
    ...</span></pre> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;"><strong><span style="color:#ff0000;">*注*</span></strong>&nbsp;command太长, 可以用 "\" 作为换行符</p> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h4 style="font-size:14px;color:#333333;"><strong>2.1.2 规则中的通配符</strong></h4> 
    <ul>
     <li style="list-style:disc;">*&nbsp;&nbsp;&nbsp;&nbsp; :: 表示任意一个或多个字符</li> 
     <li style="list-style:disc;">?&nbsp;&nbsp;&nbsp;&nbsp; :: 表示任意一个字符</li> 
     <li style="list-style:disc;">[...] :: ex. [abcd] 表示a,b,c,d中任意一个字符, [^abcd]表示除a,b,c,d以外的字符, [0-9]表示 0~9中任意一个数字</li> 
     <li style="list-style:disc;">~&nbsp;&nbsp;&nbsp;&nbsp; :: 表示用户的home目录</li> 
    </ul>
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h4 style="font-size:14px;color:#333333;"><strong>2.1.3 路径搜索</strong></h4> 
    <p style="font-size:1.2em;line-height:2em;">当一个Makefile中涉及到大量源文件时(这些源文件和Makefile极有可能不在同一个目录中),</p> 
    <p style="font-size:1.2em;line-height:2em;">这时, 最好将源文件的路径明确在Makefile中, 便于编译时查找. Makefile中有个特殊的变量<strong><span style="color:#ff0000;">VPATH</span></strong>&nbsp;就是完成这个功能的.</p> 
    <p style="font-size:1.2em;line-height:2em;">指定了&nbsp;<strong><span style="color:#ff0000;">VPATH</span></strong>&nbsp;之后, 如果当前目录中没有找到相应文件或依赖的文件, Makefile 回到<strong><span style="color:#ff0000;">VPATH</span></strong>&nbsp;指定的路径中再去查找..</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong><span style="color:#ff0000;">VPATH</span></strong>&nbsp;使用方法:</p> 
    <ul>
     <li style="list-style:disc;">vpath &lt;directories&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :: 当前目录中找不到文件时, 就从&lt;directories&gt;中搜索</li> 
     <li style="list-style:disc;">vpath &lt;pattern&gt; &lt;directories&gt;&nbsp; :: 符合&lt;pattern&gt;格式的文件, 就从&lt;directories&gt;中搜索</li> 
     <li style="list-style:disc;">vpath &lt;pattern&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :: 清除符合&lt;pattern&gt;格式的文件搜索路径</li> 
     <li style="list-style:disc;">vpath&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :: 清除所有已经设置好的文件路径</li> 
    </ul>
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre># 示例1 - 当前目录中找不到文件时, 按顺序从 src目录 ../parent-<span style="line-height:1.5;">dir目录中查找文件
VPATH src:..</span>/parent-<span style="color:#0000ff;line-height:1.5;">dir</span><span style="line-height:1.5;">   

# 示例2 </span>- .h结尾的文件都从 ./<span style="line-height:1.5;">header 目录中查找
VPATH </span>%.h ./<span style="line-height:1.5;">header

# 示例3 </span>-<span style="line-height:1.5;"> 清除示例2中设置的规则
VPATH </span>%<span style="line-height:1.5;">.h

# 示例4 </span>-<span style="line-height:1.5;"> 清除所有VPATH的设置
VPATH</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>2.2 Makefile 中的变量</strong></h3> 
    <h4 style="font-size:14px;color:#333333;"><strong>2.2.1 变量定义 ( = or := )</strong></h4> 
    <div class="cnblogs_code"> 
     <pre>OBJS =<span style="line-height:1.5;"> programA.o programB.o
OBJS</span>-ADD =<span style="line-height:1.5;"> $(OBJS) programC.o
# 或者
OBJS :</span>=<span style="line-height:1.5;"> programA.o programB.o
OBJS</span>-ADD := $(OBJS) programC.o</pre> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">其中 = 和 := 的区别在于, := 只能使用前面定义好的变量, = 可以使用后面定义的变量</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>测试 =</strong></p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile内容
OBJS2 </span>=<span style="line-height:1.5;"> $(OBJS1) programC.o
OBJS1 </span>=<span style="line-height:1.5;"> programA.o programB.o

all:
    @echo $(OBJS2)

# bash中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">, 可以看出虽然 OBJS1 是在 OBJS2 之后定义的, 但在 OBJS2中可以提前使用
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
programA.o programB.o programC.o</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>测试 :=</strong></p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile内容
OBJS2 :</span>=<span style="line-height:1.5;"> $(OBJS1) programC.o
OBJS1 :</span>=<span style="line-height:1.5;"> programA.o programB.o

all:
    @echo $(OBJS2)

# bash中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">, 可以看出 OBJS2 中的 $(OBJS1) 为空
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
programC.o</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h4 style="font-size:14px;color:#333333;"><strong>2.2.2 变量替换</strong></h4> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile内容
SRCS :</span>=<span style="line-height:1.5;"> programA.c programB.c programC.c
OBJS :</span>= $(SRCS:%.c=%<span style="line-height:1.5;">.o)

all:
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">SRCS: </span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;"> $(SRCS)
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">OBJS: </span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;"> $(OBJS)

# bash中运行make
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
SRCS:  programA.c programB.c programC.c
OBJS:  programA.o programB.o programC.o</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h4 style="font-size:14px;color:#333333;"><strong>2.2.3 变量追加值 +=</strong></h4> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile内容
SRCS :</span>=<span style="line-height:1.5;"> programA.c programB.c programC.c
SRCS </span>+=<span style="line-height:1.5;"> programD.c

all:
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">SRCS: </span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;"> $(SRCS)

# bash中运行make
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
SRCS:  programA.c programB.c programC.c programD.c</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h4 style="font-size:14px;color:#333333;"><strong>2.2.4 变量覆盖 override</strong></h4> 
    <p style="font-size:1.2em;line-height:2em;">作用是使 Makefile中定义的变量能够覆盖 make 命令参数中指定的变量</p> 
    <p style="font-size:1.2em;line-height:2em;">语法:</p> 
    <ul>
     <li style="list-style:disc;">override &lt;variable&gt; = &lt;value&gt;</li> 
     <li style="list-style:disc;">override &lt;variable&gt; := &lt;value&gt;</li> 
     <li style="list-style:disc;">override &lt;variable&gt; += &lt;value&gt;</li> 
    </ul>
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;">下面通过一个例子体会 override 的作用：</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile内容 (没有用override)
SRCS :</span>=<span style="line-height:1.5;"> programA.c programB.c programC.c

all:
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">SRCS: </span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;"> $(SRCS)

# bash中运行make
$ </span><span style="color:#0000ff;line-height:1.5;">make</span> SRCS=<span style="line-height:1.5;">nothing
SRCS:  nothing

#################################################

# Makefile内容 (用override)
override SRCS :</span>=<span style="line-height:1.5;"> programA.c programB.c programC.c

all:
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">SRCS: </span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;"> $(SRCS)

# bash中运行make
$ </span><span style="color:#0000ff;line-height:1.5;">make</span> SRCS=<span style="line-height:1.5;">nothing
SRCS:  programA.c programB.c programC.c</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h4 style="font-size:14px;color:#333333;"><strong>2.2.5 目标变量</strong></h4> 
    <p style="font-size:1.2em;line-height:2em;">作用是使变量的作用域仅限于这个目标(target), 而不像之前例子中定义的变量, 对整个Makefile都有效.</p> 
    <p style="font-size:1.2em;line-height:2em;">语法:</p> 
    <ul>
     <li style="list-style:disc;">&lt;target ...&gt; :: &lt;variable-assignment&gt;</li> 
     <li style="list-style:disc;">&lt;target ...&gt; :: override &lt;variable-assignment&gt; (override作用参见 变量覆盖的介绍)</li> 
    </ul>
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;">示例:</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
SRCS :</span>=<span style="line-height:1.5;"> programA.c programB.c programC.c

target1: TARGET1</span>-SRCS :=<span style="line-height:1.5;"> programD.c
target1:
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">SRCS: </span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;"> $(SRCS)
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">SRCS: </span><span style="color:#800000;line-height:1.5;">"</span> $(TARGET1-<span style="line-height:1.5;">SRCS)

target2:
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">SRCS: </span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;"> $(SRCS)
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">SRCS: </span><span style="color:#800000;line-height:1.5;">"</span> $(TARGET1-<span style="line-height:1.5;">SRCS)

# bash中执行make
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;"> target1
SRCS:  programA.c programB.c programC.c
SRCS:  programD.c

$ </span><span style="color:#0000ff;line-height:1.5;">make</span> target2     &lt;-- target2中显示不了 $(TARGET1-<span style="line-height:1.5;">SRCS)
SRCS:  programA.c programB.c programC.c
SRCS:</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>2.3 Makefile 命令前缀</strong></h3> 
    <p style="font-size:1.2em;line-height:2em;">Makefile 中书写shell命令时可以加2种前缀 @ 和 -, 或者不用前缀.</p> 
    <p style="font-size:1.2em;line-height:2em;">3种格式的shell命令区别如下:</p> 
    <ul>
     <li style="list-style:disc;">不用前缀 :: 输出执行的命令以及命令执行的结果, 出错的话停止执行</li> 
     <li style="list-style:disc;">前缀 @&nbsp;&nbsp; :: 只输出命令执行的结果, 出错的话停止执行</li> 
     <li style="list-style:disc;">前缀 -&nbsp;&nbsp; :: 命令执行有错的话, 忽略错误, 继续执行</li> 
    </ul>
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;">示例:</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容 (不用前缀)
all:
    </span><span style="color:#0000ff;line-height:1.5;">echo</span> <span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">没有前缀</span><span style="color:#800000;line-height:1.5;">"</span>
    <span style="color:#0000ff;line-height:1.5;">cat</span><span style="line-height:1.5;"> this_file_not_exist
    </span><span style="color:#0000ff;line-height:1.5;">echo</span> <span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">错误之后的命令</span><span style="color:#800000;line-height:1.5;">"</span>       &lt;--<span style="line-height:1.5;"> 这条命令不会被执行

# bash中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span>
<span style="color:#0000ff;line-height:1.5;">echo</span> <span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">没有前缀</span><span style="color:#800000;line-height:1.5;">"</span>             &lt;--<span style="line-height:1.5;"> 命令本身显示出来
没有前缀                    </span>&lt;--<span style="line-height:1.5;"> 命令执行结果显示出来
</span><span style="color:#0000ff;line-height:1.5;">cat</span><span style="line-height:1.5;"> this_file_not_exist
</span><span style="color:#0000ff;line-height:1.5;">cat</span>: this_file_not_exist: No such <span style="color:#0000ff;line-height:1.5;">file</span><span style="line-height:1.5;"> or directory
</span><span style="color:#0000ff;line-height:1.5;">make</span>: *** [all] Error <span style="color:#800080;line-height:1.5;">1</span><span style="line-height:1.5;">

###########################################################

# Makefile 内容 (前缀 @)
all:
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">没有前缀</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">
    @cat this_file_not_exist
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">错误之后的命令</span><span style="color:#800000;line-height:1.5;">"</span>       &lt;--<span style="line-height:1.5;"> 这条命令不会被执行

# bash中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
没有前缀                         </span>&lt;--<span style="line-height:1.5;"> 只有命令执行的结果, 不显示命令本身
</span><span style="color:#0000ff;line-height:1.5;">cat</span>: this_file_not_exist: No such <span style="color:#0000ff;line-height:1.5;">file</span><span style="line-height:1.5;"> or directory
</span><span style="color:#0000ff;line-height:1.5;">make</span>: *** [all] Error <span style="color:#800080;line-height:1.5;">1</span><span style="line-height:1.5;">

###########################################################

# Makefile 内容 (前缀 </span>-<span style="line-height:1.5;">)
all:
    </span>-<span style="color:#0000ff;line-height:1.5;">echo</span> <span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">没有前缀</span><span style="color:#800000;line-height:1.5;">"</span>
    -<span style="color:#0000ff;line-height:1.5;">cat</span><span style="line-height:1.5;"> this_file_not_exist
    </span>-<span style="color:#0000ff;line-height:1.5;">echo</span> <span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">错误之后的命令</span><span style="color:#800000;line-height:1.5;">"</span>       &lt;--<span style="line-height:1.5;"> 这条命令会被执行

# bash中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span>
<span style="color:#0000ff;line-height:1.5;">echo</span> <span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">没有前缀</span><span style="color:#800000;line-height:1.5;">"</span>             &lt;--<span style="line-height:1.5;"> 命令本身显示出来
没有前缀                    </span>&lt;--<span style="line-height:1.5;"> 命令执行结果显示出来
</span><span style="color:#0000ff;line-height:1.5;">cat</span><span style="line-height:1.5;"> this_file_not_exist
</span><span style="color:#0000ff;line-height:1.5;">cat</span>: this_file_not_exist: No such <span style="color:#0000ff;line-height:1.5;">file</span><span style="line-height:1.5;"> or directory
</span><span style="color:#0000ff;line-height:1.5;">make</span>: [all] Error <span style="color:#800080;line-height:1.5;">1</span><span style="line-height:1.5;"> (ignored)
</span><span style="color:#0000ff;line-height:1.5;">echo</span> <span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">错误之后的命令</span><span style="color:#800000;line-height:1.5;">"</span>       &lt;--<span style="line-height:1.5;"> 出错之后的命令也会显示
错误之后的命令              </span>&lt;-- 出错之后的命令也会执行</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>2.4 伪目标</strong></h3> 
    <p style="font-size:1.2em;line-height:2em;">伪目标并不是一个"目标(target)", 不像真正的目标那样会生成一个目标文件.</p> 
    <p style="font-size:1.2em;line-height:2em;">典型的伪目标是 Makefile 中用来清理编译过程中中间文件的 clean 伪目标, 一般格式如下:</p> 
    <div class="cnblogs_code"> 
     <pre>.PHONY: clean   &lt;--<span style="line-height:1.5;"> 这句没有也行, 但是最好加上
clean:
    </span>-<span style="color:#0000ff;line-height:1.5;">rm</span> -f *.o</pre> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>2.5 引用其他的 Makefile</strong></h3> 
    <p style="font-size:1.2em;line-height:2em;">语法: include &lt;filename&gt;&nbsp; (filename 可以包含通配符和路径)</p> 
    <p style="font-size:1.2em;line-height:2em;">示例:</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">主 Makefile begin</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">
    @make other</span>-<span style="line-height:1.5;">all
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">主 Makefile end</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">

include .</span>/other/<span style="line-height:1.5;">Makefile

# .</span>/other/<span style="line-height:1.5;">Makefile 内容
other</span>-<span style="line-height:1.5;">all:
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">other makefile begin</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">other makefile end</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">

# bash中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ ll
total 20K
</span>-rw-r--r-- <span style="color:#800080;line-height:1.5;">1</span> wangyubin wangyubin  <span style="color:#800080;line-height:1.5;">125</span> Sep <span style="color:#800080;line-height:1.5;">23</span> <span style="color:#800080;line-height:1.5;">16</span>:<span style="color:#800080;line-height:1.5;">13</span><span style="line-height:1.5;"> Makefile
</span>-rw-r--r-- <span style="color:#800080;line-height:1.5;">1</span> wangyubin wangyubin  11K Sep <span style="color:#800080;line-height:1.5;">23</span> <span style="color:#800080;line-height:1.5;">16</span>:<span style="color:#800080;line-height:1.5;">15</span> makefile.org   &lt;--<span style="line-height:1.5;"> 这个文件不用管
drwxr</span>-xr-x <span style="color:#800080;line-height:1.5;">2</span> wangyubin wangyubin <span style="color:#800080;line-height:1.5;">4</span>.0K Sep <span style="color:#800080;line-height:1.5;">23</span> <span style="color:#800080;line-height:1.5;">16</span>:<span style="color:#800080;line-height:1.5;">11</span><span style="line-height:1.5;"> other
$ ll other</span>/<span style="line-height:1.5;">
total </span><span style="color:#800080;line-height:1.5;">4</span><span style="line-height:1.5;">.0K
</span>-rw-r--r-- <span style="color:#800080;line-height:1.5;">1</span> wangyubin wangyubin <span style="color:#800080;line-height:1.5;">71</span> Sep <span style="color:#800080;line-height:1.5;">23</span> <span style="color:#800080;line-height:1.5;">16</span>:<span style="color:#800080;line-height:1.5;">11</span><span style="line-height:1.5;"> Makefile

$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
主 Makefile begin
</span><span style="color:#0000ff;line-height:1.5;">make</span>[<span style="color:#800080;line-height:1.5;">1</span>]: Entering directory `/path/to/test/makefile<span style="color:#800000;line-height:1.5;">'
</span><span style="line-height:1.5;">other makefile begin
other makefile end
</span><span style="color:#0000ff;line-height:1.5;">make</span>[<span style="color:#800080;line-height:1.5;">1</span>]: Leaving directory `/path/to/test/makefile<span style="color:#800000;line-height:1.5;">'
</span>主 Makefile end</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>2.6 查看C文件的依赖关系</strong></h3> 
    <p style="font-size:1.2em;line-height:2em;">写 Makefile 的时候, 需要确定每个目标的依赖关系.</p> 
    <p style="font-size:1.2em;line-height:2em;">GNU提供一个机制可以查看C代码文件依赖那些文件, 这样我们在写 Makefile 目标的时候就不用打开C源码来看其依赖那些文件了.</p> 
    <p style="font-size:1.2em;line-height:2em;">比如, 下面命令显示内核源码中 virt/kvm/kvm_main.c 中的依赖关系</p> 
    <div class="cnblogs_code"> 
     <pre>$ cd virt/kvm/<span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">gcc</span> -<span style="line-height:1.5;">MM kvm_main.c 
kvm_main.o: kvm_main.c iodev.h coalesced_mmio.h async_pf.h   </span>&lt;-- 这句就可以加到 Makefile 中作为编译 kvm_main.o 的依赖关系</pre> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>2.7 make 退出码</strong></h3> 
    <p style="font-size:1.2em;line-height:2em;">Makefile的退出码有以下3种：</p> 
    <ul>
     <li style="list-style:disc;">0 :: 表示成功执行</li> 
     <li style="list-style:disc;">1 :: 表示make命令出现了错误</li> 
     <li style="list-style:disc;">2 :: 使用了 "-q" 选项, 并且make使得一些目标不需要更新</li> 
    </ul>
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>2.8 指定 Makefile， 指定特定目标</strong></h3> 
    <p style="font-size:1.2em;line-height:2em;">默认执行 make 命令时, GNU make在当前目录下依次搜索下面3个文件 "GNUmakefile", "makefile", "Makefile",</p> 
    <p style="font-size:1.2em;line-height:2em;">找到对应文件之后, 就开始执行此文件中的第一个目标(target). 如果找不到这3个文件就报错.</p> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;">非默认情况下, 可以在 make 命令中指定特定的 Makefile 和特定的 目标.</p> 
    <p style="font-size:1.2em;line-height:2em;">示例：</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile文件名改为 MyMake, 内容
target1:
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">target [1]  begin</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">target [1]  end</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">

target2:
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">target [2]  begin</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">target [2]  end</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">ls</span><span style="line-height:1.5;">
Makefile
$ </span><span style="color:#0000ff;line-height:1.5;">mv</span><span style="line-height:1.5;"> Makefile MyMake
$ </span><span style="color:#0000ff;line-height:1.5;">ls</span><span style="line-height:1.5;">
MyMake
$ </span><span style="color:#0000ff;line-height:1.5;">make</span>                     &lt;--<span style="line-height:1.5;"> 找不到默认的 Makefile
</span><span style="color:#0000ff;line-height:1.5;">make</span>: ***<span style="line-height:1.5;"> No targets specified and no makefile found.  Stop.
$ </span><span style="color:#0000ff;line-height:1.5;">make</span> -f MyMake           &lt;--<span style="line-height:1.5;"> 指定特定的Makefile
target [</span><span style="color:#800080;line-height:1.5;">1</span><span style="line-height:1.5;">]  begin
target [</span><span style="color:#800080;line-height:1.5;">1</span><span style="line-height:1.5;">]  end
$ </span><span style="color:#0000ff;line-height:1.5;">make</span> -f MyMake target2   &lt;--<span style="line-height:1.5;"> 指定特定的目标(target)
target [</span><span style="color:#800080;line-height:1.5;">2</span><span style="line-height:1.5;">]  begin
target [</span><span style="color:#800080;line-height:1.5;">2</span>]  end</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>2.9 make 参数介绍</strong></h3> 
    <p style="font-size:1.2em;line-height:2em;">make 的参数有很多, 可以通过 make -h 去查看, 下面只介绍几个我认为比较有用的.</p> 
    <table style="margin-left:0px;border-spacing:0px;border-color:#C0C0C0;width:550px;" border="1">
     <tbody>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top"> <p style="font-size:1.2em;line-height:2em;" align="center"><strong>参数</strong></p> </td> 
       <td style="border-color:#C0C0C0;" valign="top"> <p style="font-size:1.2em;line-height:2em;" align="center"><strong>含义</strong></p> </td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">--debug[=&lt;options&gt;]</td> 
       <td style="border-color:#C0C0C0;" valign="top">输出make的调试信息, options 可以是 a, b, v</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">-j --jobs</td> 
       <td style="border-color:#C0C0C0;" valign="top">同时运行的命令的个数, 也就是多线程执行 Makefile</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">-r --no-builtin-rules</td> 
       <td style="border-color:#C0C0C0;" valign="top">禁止使用任何隐含规则</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">-R --no-builtin-variabes</td> 
       <td style="border-color:#C0C0C0;" valign="top">禁止使用任何作用于变量上的隐含规则</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">-B --always-make</td> 
       <td style="border-color:#C0C0C0;" valign="top">假设所有目标都有更新, 即强制重编译</td> 
      </tr>
     </tbody>
    </table>
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>2.10 Makefile 隐含规则</strong></h3> 
    <p style="font-size:1.2em;line-height:2em;">这里只列一个和编译C相关的.</p> 
    <p style="font-size:1.2em;line-height:2em;">编译C时，&lt;n&gt;.o 的目标会自动推导为 &lt;n&gt;.c</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 中
main : main.o
    </span><span style="color:#0000ff;line-height:1.5;">gcc</span> -<span style="line-height:1.5;">o main main.o

#会自动变为:
main : main.o
    </span><span style="color:#0000ff;line-height:1.5;">gcc</span> -<span style="line-height:1.5;">o main main.o

main.o: main.c    </span>&lt;--<span style="line-height:1.5;"> main.o 这个目标是隐含生成的
    </span><span style="color:#0000ff;line-height:1.5;">gcc</span> -c main.c</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>2.11 隐含规则中的 命令变量 和 命令参数变量</strong></h3> 
    <h4 style="font-size:14px;color:#333333;"><strong>2.11.1 命令变量, 书写Makefile可以直接写 shell时用这些变量.</strong></h4> 
    <p style="font-size:1.2em;line-height:2em;">下面只列出一些C相关的</p> 
    <table style="margin-left:0px;border-spacing:0px;border-color:#C0C0C0;width:221px;" border="1">
     <tbody>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top"> <p style="font-size:1.2em;line-height:2em;" align="center"><strong>变量名</strong></p> </td> 
       <td style="border-color:#C0C0C0;" valign="top"> <p style="font-size:1.2em;line-height:2em;" align="center"><strong>含义</strong></p> </td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">RM</td> 
       <td style="border-color:#C0C0C0;" valign="top">rm -f</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">AR</td> 
       <td style="border-color:#C0C0C0;" valign="top">ar</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">CC</td> 
       <td style="border-color:#C0C0C0;" valign="top">cc</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">CXX</td> 
       <td style="border-color:#C0C0C0;" valign="top">g++</td> 
      </tr>
     </tbody>
    </table>
    <p style="font-size:1.2em;line-height:2em;">示例:</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo $(RM)
    @echo $(AR)
    @echo $(CC)
    @echo $(CXX)

# bash 中执行make, 显示各个变量的值
$ </span><span style="color:#0000ff;line-height:1.5;">make</span>
<span style="color:#0000ff;line-height:1.5;">rm</span> -<span style="line-height:1.5;">f
</span><span style="color:#0000ff;line-height:1.5;">ar</span>
<span style="color:#0000ff;line-height:1.5;">cc</span><span style="line-height:1.5;">
g</span>++</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h4 style="font-size:14px;color:#333333;"><strong>2.11.2 命令参数变量</strong></h4> 
    <table style="margin-left:0px;border-spacing:0px;border-color:#C0C0C0;width:296px;" border="1">
     <tbody>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top"> <p style="font-size:1.2em;line-height:2em;" align="center"><strong>变量名</strong></p> </td> 
       <td style="border-color:#C0C0C0;" valign="top"> <p style="font-size:1.2em;line-height:2em;" align="center"><strong>含义</strong></p> </td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">ARFLAGS</td> 
       <td style="border-color:#C0C0C0;" valign="top">AR命令的参数</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">CFLAGS</td> 
       <td style="border-color:#C0C0C0;" valign="top">C语言编译器的参数</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">CXXFLAGS</td> 
       <td style="border-color:#C0C0C0;" valign="top">C++语言编译器的参数</td> 
      </tr>
     </tbody>
    </table>
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;">示例: 下面以 CFLAGS 为例演示</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># test.c 内容
#include </span>&lt;stdio.h&gt;

<span style="color:#0000ff;line-height:1.5;">int</span> main(<span style="color:#0000ff;line-height:1.5;">int</span> argc, <span style="color:#0000ff;line-height:1.5;">char</span> *<span style="line-height:1.5;">argv[])
{
    printf (</span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">Hello Makefile\n</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">);
    return </span><span style="color:#800080;line-height:1.5;">0</span><span style="line-height:1.5;">;
}

# Makefile 内容
test: test.o
    $(CC) </span>-<span style="line-height:1.5;">o test test.o

# bash 中用 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;"> 来测试
$ ll
total 24K
</span>-rw-r--r-- <span style="color:#800080;line-height:1.5;">1</span> wangyubin wangyubin  <span style="color:#800080;line-height:1.5;">69</span> Sep <span style="color:#800080;line-height:1.5;">23</span> <span style="color:#800080;line-height:1.5;">17</span>:<span style="color:#800080;line-height:1.5;">31</span><span style="line-height:1.5;"> Makefile
</span>-rw-r--r-- <span style="color:#800080;line-height:1.5;">1</span> wangyubin wangyubin 14K Sep <span style="color:#800080;line-height:1.5;">23</span> <span style="color:#800080;line-height:1.5;">19</span>:<span style="color:#800080;line-height:1.5;">51</span> makefile.org   &lt;--<span style="line-height:1.5;"> 请忽略这个文件
</span>-rw-r--r-- <span style="color:#800080;line-height:1.5;">1</span> wangyubin wangyubin <span style="color:#800080;line-height:1.5;">392</span> Sep <span style="color:#800080;line-height:1.5;">23</span> <span style="color:#800080;line-height:1.5;">17</span>:<span style="color:#800080;line-height:1.5;">31</span><span style="line-height:1.5;"> test.c

$ </span><span style="color:#0000ff;line-height:1.5;">make</span>
<span style="color:#0000ff;line-height:1.5;">cc</span>    -c -<span style="line-height:1.5;">o test.o test.c
</span><span style="color:#0000ff;line-height:1.5;">cc</span> -o test test.o               &lt;--<span style="line-height:1.5;"> 这个是自动推导的

$ </span><span style="color:#0000ff;line-height:1.5;">rm</span> -<span style="line-height:1.5;">f test test.o

$ </span><span style="color:#0000ff;line-height:1.5;">make</span> CFLAGS=-Wall             &lt;--<span style="line-height:1.5;"> 命令中加的编译器参数自动追加入下面的编译中了
</span><span style="color:#0000ff;line-height:1.5;">cc</span> -Wall   -c -<span style="line-height:1.5;">o test.o test.c
</span><span style="color:#0000ff;line-height:1.5;">cc</span> -o test test.o</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>2.12 自动变量</strong></h3> 
    <p style="font-size:1.2em;line-height:2em;">Makefile 中很多时候通过自动变量来简化书写, 各个自动变量的含义如下:</p> 
    <table style="margin-left:0px;border-spacing:0px;border-color:#C0C0C0;width:472px;" border="1">
     <tbody>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top"> <p style="font-size:1.2em;line-height:2em;" align="center"><strong>自动变量</strong></p> </td> 
       <td style="border-color:#C0C0C0;" valign="top"> <p style="font-size:1.2em;line-height:2em;" align="center"><strong>含义</strong></p> </td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">$@</td> 
       <td style="border-color:#C0C0C0;" valign="top">目标集合</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">$%</td> 
       <td style="border-color:#C0C0C0;" valign="top">当目标是函数库文件时, 表示其中的目标文件名</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">$&lt;</td> 
       <td style="border-color:#C0C0C0;" valign="top">第一个依赖目标. 如果依赖目标是多个, 逐个表示依赖目标</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">$?</td> 
       <td style="border-color:#C0C0C0;" valign="top">比目标新的依赖目标的集合</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">$^</td> 
       <td style="border-color:#C0C0C0;" valign="top">所有依赖目标的集合, 会去除重复的依赖目标</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">$+</td> 
       <td style="border-color:#C0C0C0;" valign="top">所有依赖目标的集合, 不会去除重复的依赖目标</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">$*</td> 
       <td style="border-color:#C0C0C0;" valign="top">这个是GNU make特有的, 其它的make不一定支持</td> 
      </tr>
     </tbody>
    </table>
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h2 style="font-size:21px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>3. Makefile 高级语法</strong></h2> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>3.1 嵌套Makefile</strong></h3> 
    <p style="font-size:1.2em;line-height:2em;">在 Makefile 初级语法中已经提到过引用其它 Makefile的方法. 这里有另一种写法, 并且可以向引用的其它 Makefile 传递参数.</p> 
    <p style="font-size:1.2em;line-height:2em;">示例: (不传递参数, 只是调用子文件夹 other 中的Makefile)</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">主 Makefile begin</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">
    @cd .</span>/other &amp;&amp; <span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">主 Makefile end</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">


# .</span>/other/<span style="line-height:1.5;">Makefile 内容
other</span>-<span style="line-height:1.5;">all:
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">other makefile begin</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">other makefile end</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">

# bash中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ ll
total 28K
</span>-rw-r--r-- <span style="color:#800080;line-height:1.5;">1</span> wangyubin wangyubin  <span style="color:#800080;line-height:1.5;">104</span> Sep <span style="color:#800080;line-height:1.5;">23</span> <span style="color:#800080;line-height:1.5;">20</span>:<span style="color:#800080;line-height:1.5;">43</span><span style="line-height:1.5;"> Makefile
</span>-rw-r--r-- <span style="color:#800080;line-height:1.5;">1</span> wangyubin wangyubin  17K Sep <span style="color:#800080;line-height:1.5;">23</span> <span style="color:#800080;line-height:1.5;">20</span>:<span style="color:#800080;line-height:1.5;">44</span> makefile.org   &lt;--<span style="line-height:1.5;"> 这个文件不用管
drwxr</span>-xr-x <span style="color:#800080;line-height:1.5;">2</span> wangyubin wangyubin <span style="color:#800080;line-height:1.5;">4</span>.0K Sep <span style="color:#800080;line-height:1.5;">23</span> <span style="color:#800080;line-height:1.5;">20</span>:<span style="color:#800080;line-height:1.5;">42</span><span style="line-height:1.5;"> other
$ ll other</span>/<span style="line-height:1.5;">
total </span><span style="color:#800080;line-height:1.5;">4</span><span style="line-height:1.5;">.0K
</span>-rw-r--r-- <span style="color:#800080;line-height:1.5;">1</span> wangyubin wangyubin <span style="color:#800080;line-height:1.5;">71</span> Sep <span style="color:#800080;line-height:1.5;">23</span> <span style="color:#800080;line-height:1.5;">16</span>:<span style="color:#800080;line-height:1.5;">11</span><span style="line-height:1.5;"> Makefile

$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
主 Makefile begin
</span><span style="color:#0000ff;line-height:1.5;">make</span>[<span style="color:#800080;line-height:1.5;">1</span>]: Entering directory `/path/to/test/makefile/other<span style="color:#800000;line-height:1.5;">'
</span><span style="line-height:1.5;">other makefile begin
other makefile end
</span><span style="color:#0000ff;line-height:1.5;">make</span>[<span style="color:#800080;line-height:1.5;">1</span>]: Leaving directory `/path/to/test/makefile/other<span style="color:#800000;line-height:1.5;">'
</span>主 Makefile end</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;">示例: (用export传递参数)</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
export VALUE1 :</span>= export.c    &lt;-- 用了 export, 此变量能够传递到 ./other/<span style="line-height:1.5;">Makefile 中
VALUE2 :</span>= no-export.c        &lt;-- 此变量不能传递到 ./other/<span style="line-height:1.5;">Makefile 中

all:
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">主 Makefile begin</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">
    @cd .</span>/other &amp;&amp; <span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">主 Makefile end</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">


# .</span>/other/<span style="line-height:1.5;">Makefile 内容
other</span>-<span style="line-height:1.5;">all:
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">other makefile begin</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">VALUE1: </span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;"> $(VALUE1)
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">VALUE2: </span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;"> $(VALUE2)
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">other makefile end</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">

# bash中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
主 Makefile begin
</span><span style="color:#0000ff;line-height:1.5;">make</span>[<span style="color:#800080;line-height:1.5;">1</span>]: Entering directory `/path/to/test/makefile/other<span style="color:#800000;line-height:1.5;">'
</span><span style="line-height:1.5;">other makefile begin
VALUE1:  export.c        </span>&lt;--<span style="line-height:1.5;"> VALUE1 传递成功
VALUE2:                  </span>&lt;--<span style="line-height:1.5;"> VALUE2 传递失败
other makefile end
</span><span style="color:#0000ff;line-height:1.5;">make</span>[<span style="color:#800080;line-height:1.5;">1</span>]: Leaving directory `/path/to/test/makefile/other<span style="color:#800000;line-height:1.5;">'
</span>主 Makefile end</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong><span style="color:#ff0000;">*补充*</span></strong>&nbsp;export 语法格式如下:</p> 
    <ul>
     <li style="list-style:disc;">export variable = value</li> 
     <li style="list-style:disc;">export variable := value</li> 
     <li style="list-style:disc;">export variable += value</li> 
    </ul>
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>3.2 定义命令包</strong></h3> 
    <p style="font-size:1.2em;line-height:2em;">命令包有点像是个函数, 将连续的相同的命令合成一条, 减少 Makefile 中的代码量, 便于以后维护.</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>语法:</strong></p> 
    <div class="cnblogs_code"> 
     <pre>define &lt;command-name&gt;<span style="line-height:1.5;">
command
...
endef</span></pre> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>示例:</strong></p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
define run</span>-hello-<span style="line-height:1.5;">makefile
@echo </span>-n <span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">Hello</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">
@echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;"> Makefile!</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">
@echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">这里可以执行多条 Shell 命令!</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">
endef

all:
    $(run</span>-hello-<span style="line-height:1.5;">makefile)


# bash 中运行make
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
Hello Makefile</span>!<span style="line-height:1.5;">
这里可以执行多条 Shell 命令</span>!</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>3.3 条件判断</strong></h3> 
    <p style="font-size:1.2em;line-height:2em;">条件判断的关键字主要有&nbsp;<strong>ifeq ifneq ifdef ifndef</strong></p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>语法:</strong></p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre>&lt;conditional-directive&gt;
&lt;text-<span style="color:#0000ff;line-height:1.5;">if</span>-<span style="color:#0000ff;line-height:1.5;">true</span>&gt;<span style="line-height:1.5;">
endif

# 或者
</span>&lt;conditional-directive&gt;
&lt;text-<span style="color:#0000ff;line-height:1.5;">if</span>-<span style="color:#0000ff;line-height:1.5;">true</span>&gt;
<span style="color:#0000ff;line-height:1.5;">else</span>
&lt;text-<span style="color:#0000ff;line-height:1.5;">if</span>-<span style="color:#0000ff;line-height:1.5;">false</span>&gt;<span style="line-height:1.5;">
endif</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>示例:</strong>&nbsp;ifeq的例子, ifneq和ifeq的使用方法类似, 就是取反</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
ifeq (</span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">aa</span><span style="color:#800000;line-height:1.5;">"</span>, <span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">bb</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">)
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">equal</span><span style="color:#800000;line-height:1.5;">"</span>
<span style="color:#0000ff;line-height:1.5;">else</span><span style="line-height:1.5;">
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">not equal</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">
endif

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
not equal</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>示例:</strong>&nbsp;ifdef的例子, ifndef和ifdef的使用方法类似, 就是取反</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
SRCS :</span>=<span style="line-height:1.5;"> program.c

all:
ifdef SRCS
    @echo $(SRCS)
</span><span style="color:#0000ff;line-height:1.5;">else</span><span style="line-height:1.5;">
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">no SRCS</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">
endif

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
program.c</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>3.4 Makefile 中的函数</strong></h3> 
    <p style="font-size:1.2em;line-height:2em;">Makefile 中自带了一些函数, 利用这些函数可以简化 Makefile 的编写.</p> 
    <p style="font-size:1.2em;line-height:2em;">函数调用语法如下:</p> 
    <div class="cnblogs_code"> 
     <pre>$(&lt;<span style="color:#0000ff;line-height:1.5;">function</span>&gt; &lt;arguments&gt;<span style="line-height:1.5;">)
# 或者
${</span>&lt;<span style="color:#0000ff;line-height:1.5;">function</span>&gt; &lt;arguments&gt;}</pre> 
    </div> 
    <ul>
     <li style="list-style:disc;">&lt;function&gt; 是函数名</li> 
     <li style="list-style:disc;">&lt;arguments&gt; 是函数参数</li> 
    </ul>
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h4 style="font-size:14px;color:#333333;"><strong>3.4.1 字符串函数</strong></h4> 
    <p style="font-size:1.2em;line-height:2em;"><strong>字符串替换函数: $(subst &lt;from&gt;,&lt;to&gt;,&lt;text&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 把字符串&lt;text&gt; 中的 &lt;from&gt; 替换为 &lt;to&gt;</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: 替换过的字符串</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo $(subst t,e,maktfilt)  </span>&lt;--<span style="line-height:1.5;"> 将t替换为e

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
makefile</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>模式字符串替换函数: $(patsubst &lt;pattern&gt;,&lt;replacement&gt;,&lt;text&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 查找&lt;text&gt;中的单词(单词以"空格", "tab", "换行"来分割) 是否符合 &lt;pattern&gt;, 符合的话, 用 &lt;replacement&gt; 替代.</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: 替换过的字符串</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo $(patsubst </span>%.c,%<span style="line-height:1.5;">.o,programA.c programB.c)

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
programA.o programB.o</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>去空格函数: $(strip &lt;string&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 去掉 &lt;string&gt; 字符串中开头和结尾的空字符</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: 被去掉空格的字符串值</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
VAL :</span>= <span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">       aa  bb  cc </span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">

all:
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">去除空格前: </span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;"> $(VAL)
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">去除空格后: </span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;"> $(strip $(VAL))

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
去除空格前:         aa  bb  </span><span style="color:#0000ff;line-height:1.5;">cc</span><span style="line-height:1.5;"> 
去除空格后:   aa bb </span><span style="color:#0000ff;line-height:1.5;">cc</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>查找字符串函数: $(findstring &lt;find&gt;,&lt;in&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 在字符串 &lt;in&gt; 中查找 &lt;find&gt; 字符串</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: 如果找到, 返回 &lt;find&gt; 字符串,&nbsp; 否则返回空字符串</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
VAL :</span>= <span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">       aa  bb  cc </span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">

all:
    @echo $(findstring aa,$(VAL))
    @echo $(findstring ab,$(VAL))

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
aa</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>过滤函数: $(filter &lt;pattern...&gt;,&lt;text&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 以 &lt;pattern&gt; 模式过滤字符串 &lt;text&gt;, *保留* 符合模式 &lt;pattern&gt; 的单词, 可以有多个模式</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: 符合模式 &lt;pattern&gt; 的字符串</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo $(filter </span>%.o %<span style="line-height:1.5;">.a,program.c program.o program.a)


# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
program.o program.a</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>反过滤函数: $(filter-out &lt;pattern...&gt;,&lt;text&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 以 &lt;pattern&gt; 模式过滤字符串 &lt;text&gt;, *去除* 符合模式 &lt;pattern&gt; 的单词, 可以有多个模式</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: 不符合模式 &lt;pattern&gt; 的字符串</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo $(filter</span>-out %.o %<span style="line-height:1.5;">.a,program.c program.o program.a)

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
program.c</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>排序函数: $(sort &lt;list&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 给字符串 &lt;list&gt; 中的单词排序 (升序)</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: 排序后的字符串</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo $(</span><span style="color:#0000ff;line-height:1.5;">sort</span><span style="line-height:1.5;"> bac abc acb cab)

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
abc acb bac cab</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>取单词函数: $(word &lt;n&gt;,&lt;text&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 取字符串 &lt;text&gt; 中的 第&lt;n&gt;个单词 (n从1开始)</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: &lt;text&gt; 中的第&lt;n&gt;个单词, 如果&lt;n&gt; 比 &lt;text&gt; 中单词个数要大, 则返回空字符串</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo $(word </span><span style="color:#800080;line-height:1.5;">1</span>,aa bb <span style="color:#0000ff;line-height:1.5;">cc</span> <span style="color:#0000ff;line-height:1.5;">dd</span><span style="line-height:1.5;">)
    @echo $(word </span><span style="color:#800080;line-height:1.5;">5</span>,aa bb <span style="color:#0000ff;line-height:1.5;">cc</span> <span style="color:#0000ff;line-height:1.5;">dd</span><span style="line-height:1.5;">)
    @echo $(word </span><span style="color:#800080;line-height:1.5;">4</span>,aa bb <span style="color:#0000ff;line-height:1.5;">cc</span> <span style="color:#0000ff;line-height:1.5;">dd</span><span style="line-height:1.5;">)

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
aa

</span><span style="color:#0000ff;line-height:1.5;">dd</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>取单词串函数: $(wordlist &lt;s&gt;,&lt;e&gt;,&lt;text&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 从字符串&lt;text&gt;中取从&lt;s&gt;开始到&lt;e&gt;的单词串. &lt;s&gt;和&lt;e&gt;是一个数字.</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: 从&lt;s&gt;到&lt;e&gt;的字符串</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo $(wordlist </span><span style="color:#800080;line-height:1.5;">1</span>,<span style="color:#800080;line-height:1.5;">3</span>,aa bb <span style="color:#0000ff;line-height:1.5;">cc</span> <span style="color:#0000ff;line-height:1.5;">dd</span><span style="line-height:1.5;">)
    @echo $(word </span><span style="color:#800080;line-height:1.5;">5</span>,<span style="color:#800080;line-height:1.5;">6</span>,aa bb <span style="color:#0000ff;line-height:1.5;">cc</span> <span style="color:#0000ff;line-height:1.5;">dd</span><span style="line-height:1.5;">)
    @echo $(word </span><span style="color:#800080;line-height:1.5;">2</span>,<span style="color:#800080;line-height:1.5;">5</span>,aa bb <span style="color:#0000ff;line-height:1.5;">cc</span> <span style="color:#0000ff;line-height:1.5;">dd</span><span style="line-height:1.5;">)


# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
aa bb </span><span style="color:#0000ff;line-height:1.5;">cc</span><span style="line-height:1.5;">

bb</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>单词个数统计函数: $(words &lt;text&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 统计字符串 &lt;text&gt; 中单词的个数</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: 单词个数</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容

all:
    @echo $(words aa bb </span><span style="color:#0000ff;line-height:1.5;">cc</span> <span style="color:#0000ff;line-height:1.5;">dd</span><span style="line-height:1.5;">)
    @echo $(words aabbccdd)
    @echo $(words )

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span>
<span style="color:#800080;line-height:1.5;">4</span>
<span style="color:#800080;line-height:1.5;">1</span>
<span style="color:#800080;line-height:1.5;">0</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>首单词函数: $(firstword &lt;text&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 取字符串 &lt;text&gt; 中的第一个单词</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: 字符串 &lt;text&gt; 中的第一个单词</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo $(firstword aa bb </span><span style="color:#0000ff;line-height:1.5;">cc</span> <span style="color:#0000ff;line-height:1.5;">dd</span><span style="line-height:1.5;">)
    @echo $(firstword aabbccdd)
    @echo $(firstword )

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
aa
aabbccdd</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h4 style="font-size:14px;color:#333333;"><strong>3.4.2 文件名函数</strong></h4> 
    <p style="font-size:1.2em;line-height:2em;"><strong>取目录函数: $(dir &lt;names...&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 从文件名序列 &lt;names&gt; 中取出目录部分</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: 文件名序列 &lt;names&gt; 中的目录部分</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo $(</span><span style="color:#0000ff;line-height:1.5;">dir</span> /home/a.c ./bb.c ../<span style="line-height:1.5;">c.c d.c)


# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span>
/home/ ./ ../ ./</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>取文件函数: $(notdir &lt;names...&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 从文件名序列 &lt;names&gt; 中取出非目录部分</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: 文件名序列 &lt;names&gt; 中的非目录部分</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo $(notdir </span>/home/a.c ./bb.c ../<span style="line-height:1.5;">c.c d.c)

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
a.c bb.c c.c d.c</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>取后缀函数: $(suffix &lt;names...&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 从文件名序列 &lt;names&gt; 中取出各个文件名的后缀</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: 文件名序列 &lt;names&gt; 中各个文件名的后缀, 没有后缀则返回空字符串</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo $(suffix </span>/home/a.c ./b.o ../<span style="line-height:1.5;">c.a d)

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
.c .o .a</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>取前缀函数: $(basename &lt;names...&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 从文件名序列 &lt;names&gt; 中取出各个文件名的前缀</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: 文件名序列 &lt;names&gt; 中各个文件名的前缀, 没有前缀则返回空字符串</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo $(</span><span style="color:#0000ff;line-height:1.5;">basename</span> /home/a.c ./b.o ../c.a /home/<span style="line-height:1.5;">.d .e)


# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span>
/home/a ./b ../c /home/</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>加后缀函数: $(addsuffix &lt;suffix&gt;,&lt;names...&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 把后缀 &lt;suffix&gt; 加到 &lt;names&gt; 中的每个单词后面</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: 加过后缀的文件名序列</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo $(addsuffix .c,</span>/home/a b ./c.o ../<span style="line-height:1.5;">d.c)


# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span>
/home/a.c b.c ./c.o.c ../d.c.c</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>加前缀函数: $(addprefix &lt;prefix&gt;,&lt;names...&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 把前缀 &lt;prefix&gt; 加到 &lt;names&gt; 中的每个单词前面</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: 加过前缀的文件名序列</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo $(addprefix test_,</span>/home/a.c b.c ./<span style="line-height:1.5;">d.c)

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
test_</span>/home/a.c test_b.c test_./d.c</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>连接函数: $(join &lt;list1&gt;,&lt;list2&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: &lt;list2&gt; 中对应的单词加到 &lt;list1&gt; 后面</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: 连接后的字符串</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo $(</span><span style="color:#0000ff;line-height:1.5;">join</span> a b c d,<span style="color:#800080;line-height:1.5;">1</span> <span style="color:#800080;line-height:1.5;">2</span> <span style="color:#800080;line-height:1.5;">3</span> <span style="color:#800080;line-height:1.5;">4</span><span style="line-height:1.5;">)
    @echo $(</span><span style="color:#0000ff;line-height:1.5;">join</span> a b c d,<span style="color:#800080;line-height:1.5;">1</span> <span style="color:#800080;line-height:1.5;">2</span> <span style="color:#800080;line-height:1.5;">3</span> <span style="color:#800080;line-height:1.5;">4</span> <span style="color:#800080;line-height:1.5;">5</span><span style="line-height:1.5;">)
    @echo $(</span><span style="color:#0000ff;line-height:1.5;">join</span> a b c d e,<span style="color:#800080;line-height:1.5;">1</span> <span style="color:#800080;line-height:1.5;">2</span> <span style="color:#800080;line-height:1.5;">3</span> <span style="color:#800080;line-height:1.5;">4</span><span style="line-height:1.5;">)

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
a1 b2 c3 d4
a1 b2 c3 d4 </span><span style="color:#800080;line-height:1.5;">5</span><span style="line-height:1.5;">
a1 b2 c3 d4 e</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h4 style="font-size:14px;color:#333333;"><strong>3.4.3 foreach</strong></h4> 
    <p style="font-size:1.2em;line-height:2em;"><strong>语法:</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">$(foreach &lt;var&gt;,&lt;list&gt;,&lt;text&gt;)</p> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>示例:</strong></p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
targets :</span>=<span style="line-height:1.5;"> a b c d
objects :</span>=<span style="line-height:1.5;"> $(foreach i,$(targets),$(i).o)

all:
    @echo $(targets)
    @echo $(objects)

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
a b c d
a.o b.o c.o d.o</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h4 style="font-size:14px;color:#333333;"><strong>3.4.4 if</strong></h4> 
    <p style="font-size:1.2em;line-height:2em;">这里的if是个函数, 和前面的条件判断不一样, 前面的条件判断属于Makefile的关键字</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>语法:</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">$(if &lt;condition&gt;,&lt;then-part&gt;)</p> 
    <p style="font-size:1.2em;line-height:2em;">$(if &lt;condition&gt;,&lt;then-part&gt;,&lt;else-part&gt;)</p> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>示例:</strong></p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
val :</span>=<span style="line-height:1.5;"> a
objects :</span>= $(<span style="color:#0000ff;line-height:1.5;">if</span><span style="line-height:1.5;"> $(val),$(val).o,nothing)
no</span>-objects := $(<span style="color:#0000ff;line-height:1.5;">if</span> $(no-<span style="line-height:1.5;">val),$(val).o,nothing)

all:
    @echo $(objects)
    @echo $(no</span>-<span style="line-height:1.5;">objects)

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
a.o
nothing</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h4 style="font-size:14px;color:#333333;"><strong>3.4.5 call - 创建新的参数化函数</strong></h4> 
    <p style="font-size:1.2em;line-height:2em;"><strong>语法:</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">$(call &lt;expression&gt;,&lt;parm1&gt;,&lt;parm2&gt;,&lt;parm3&gt;...)</p> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>示例:</strong></p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
log </span>= <span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">====debug====</span><span style="color:#800000;line-height:1.5;">"</span> $(<span style="color:#800080;line-height:1.5;">1</span>) <span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">====end====</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">

all:
    @echo $(call log,</span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">正在 Make</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">)

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span>
====debug==== 正在 Make ====end====</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h4 style="font-size:14px;color:#333333;"><strong>3.4.6 origin - 判断变量的来源</strong></h4> 
    <p style="font-size:1.2em;line-height:2em;"><strong>语法:</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">$(origin &lt;variable&gt;)</p> 
    <p style="font-size:1.2em;line-height:2em;">返回值有如下类型:</p> 
    <table style="margin-left:0px;border-spacing:0px;border-color:#C0C0C0;width:546px;" border="1">
     <tbody>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top"> <p style="font-size:1.2em;line-height:2em;" align="center"><strong>类型</strong></p> </td> 
       <td style="border-color:#C0C0C0;" valign="top"> <p style="font-size:1.2em;line-height:2em;" align="center"><strong>含义</strong></p> </td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">undefined</td> 
       <td style="border-color:#C0C0C0;" valign="top">&lt;variable&gt; 没有定义过</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">default</td> 
       <td style="border-color:#C0C0C0;" valign="top">&lt;variable&gt; 是个默认的定义, 比如 CC 变量</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">environment</td> 
       <td style="border-color:#C0C0C0;" valign="top">&lt;variable&gt; 是个环境变量, 并且 make时没有使用 -e 参数</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">file</td> 
       <td style="border-color:#C0C0C0;" valign="top">&lt;variable&gt; 定义在Makefile中</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">command line</td> 
       <td style="border-color:#C0C0C0;" valign="top">&lt;variable&gt; 定义在命令行中</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">override</td> 
       <td style="border-color:#C0C0C0;" valign="top">&lt;variable&gt; 被 override 重新定义过</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">automatic</td> 
       <td style="border-color:#C0C0C0;" valign="top">&lt;variable&gt; 是自动化变量</td> 
      </tr>
     </tbody>
    </table>
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>示例:</strong></p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
val</span>-<span style="color:#0000ff;line-height:1.5;">in</span>-<span style="color:#0000ff;line-height:1.5;">file</span> := test-<span style="color:#0000ff;line-height:1.5;">file</span><span style="line-height:1.5;">
override val</span>-override := test-<span style="line-height:1.5;">override

all:
    @echo $(origin not</span>-define)    # not-<span style="line-height:1.5;">define 没有定义
    @echo $(origin CC)            # CC 是Makefile默认定义的变量
    @echo $(origin PATH)         # PATH 是 bash 环境变量
    @echo $(origin val</span>-<span style="color:#0000ff;line-height:1.5;">in</span>-<span style="color:#0000ff;line-height:1.5;">file</span><span style="line-height:1.5;">)    # 此Makefile中定义的变量
    @echo $(origin val</span>-<span style="color:#0000ff;line-height:1.5;">in</span>-cmd)    # 这个变量会加在 <span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;"> 的参数中
    @echo $(origin val</span>-<span style="line-height:1.5;">override) # 此Makefile中定义的override变量
    @echo $(origin @)             # 自动变量, 具体前面的介绍

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span> val-<span style="color:#0000ff;line-height:1.5;">in</span>-cmd=val-<span style="line-height:1.5;">cmd
undefined
default
environment
</span><span style="color:#0000ff;line-height:1.5;">file</span><span style="line-height:1.5;">
command line
override
automatic</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h4 style="font-size:14px;color:#333333;"><strong>3.4.7 shell</strong></h4> 
    <p style="font-size:1.2em;line-height:2em;"><strong>语法:</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">$(shell &lt;shell command&gt;)</p> 
    <p style="font-size:1.2em;line-height:2em;">它的作用就是执行一个shell命令, 并将shell命令的结果作为函数的返回.</p> 
    <p style="font-size:1.2em;line-height:2em;">作用和 `&lt;shell command&gt;` 一样,&nbsp;<strong>`&nbsp;</strong>是反引号</p> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h4 style="font-size:14px;color:#333333;"><strong>3.4.8 make 控制函数</strong></h4> 
    <p style="font-size:1.2em;line-height:2em;"><strong>产生一个致命错误: $(error &lt;text ...&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 输出错误信息, 停止Makefile的运行</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    $(error there is an error</span>!<span style="line-height:1.5;">)
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">这里不会执行!</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
Makefile:</span><span style="color:#800080;line-height:1.5;">2</span>: *** there is an error!.  Stop.</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>输出警告: $(warning &lt;text ...&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 输出警告信息, Makefile继续运行</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    $(warning there is an warning</span>!<span style="line-height:1.5;">)
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">这里会执行!</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
Makefile:</span><span style="color:#800080;line-height:1.5;">2</span>: there is an warning!<span style="line-height:1.5;">
这里会执行</span>!</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>3.5 Makefile中一些GNU约定俗成的伪目标</strong></h3> 
    <p style="font-size:1.2em;line-height:2em;">如果有过在Linux上, 从源码安装软件的经历的话, 就会对 make clean, make install 比较熟悉.</p> 
    <p style="font-size:1.2em;line-height:2em;">像 clean, install 这些伪目标, 广为人知, 不用解释就大家知道是什么意思了.</p> 
    <p style="font-size:1.2em;line-height:2em;">下面列举一些常用的伪目标, 如果在自己项目的Makefile合理使用这些伪目标的话, 可以让我们自己的Makefile看起来更专业, 呵呵 :)</p> 
    <table style="margin-left:0px;border-spacing:0px;border-color:#C0C0C0;width:659px;" border="1">
     <tbody>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top"> <p style="font-size:1.2em;line-height:2em;" align="center"><strong>伪目标</strong></p> </td> 
       <td style="border-color:#C0C0C0;" valign="top"> <p style="font-size:1.2em;line-height:2em;" align="center"><strong>含义</strong></p> </td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">all</td> 
       <td style="border-color:#C0C0C0;" valign="top">所有目标的目标，其功能一般是编译所有的目标</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">clean</td> 
       <td style="border-color:#C0C0C0;" valign="top">删除所有被make创建的文件</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">install</td> 
       <td style="border-color:#C0C0C0;" valign="top">安装已编译好的程序，其实就是把目标可执行文件拷贝到指定的目录中去</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">print</td> 
       <td style="border-color:#C0C0C0;" valign="top">列出改变过的源文件</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">tar</td> 
       <td style="border-color:#C0C0C0;" valign="top">把源程序打包备份. 也就是一个tar文件</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">dist</td> 
       <td style="border-color:#C0C0C0;" valign="top">创建一个压缩文件, 一般是把tar文件压成Z文件. 或是gz文件</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">TAGS</td> 
       <td style="border-color:#C0C0C0;" valign="top">更新所有的目标, 以备完整地重编译使用</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">check 或 test</td> 
       <td style="border-color:#C0C0C0;" valign="top">一般用来测试makefile的流程</td> 
      </tr>
     </tbody>
    </table>
   </div> 
   <div class="clear" style="clear:both;font-family:verdana, 'ms song', '宋体', Arial, '微软雅黑', Helvetica, sans-serif;font-size:12px;line-height:24px;">
    &nbsp;
   </div> 
   <div style="font-family:verdana, 'ms song', '宋体', Arial, '微软雅黑', Helvetica, sans-serif;font-size:12px;line-height:24px;"> 
    <div>
     &nbsp;
    </div> 
    <div style="font-size:9pt;color:#b0b4bf;border-top-width:8px;border-top-style:solid;border-top-color:#f33324;">
     标签:&nbsp;
     <a style="color:#b0b4bf;text-decoration:none;" href="http://www.cnblogs.com/wang_yb/tag/C%E5%AD%A6%E4%B9%A0/" rel="nofollow">C学习</a> 
    </div> 
   </div> 
   <div style="font-family:verdana, 'ms song', '宋体', Arial, '微软雅黑', Helvetica, sans-serif;font-size:12px;line-height:24px;"> 
    <h2 style="font-size:21px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>1. Makefile 简介</strong></h2> 
    <p style="font-size:1.2em;line-height:2em;">Makefile 是和 make 命令一起配合使用的.</p> 
    <p style="font-size:1.2em;line-height:2em;">很多大型项目的编译都是通过 Makefile 来组织的, 如果没有 Makefile, 那很多项目中各种库和代码之间的依赖关系不知会多复杂.</p> 
    <p style="font-size:1.2em;line-height:2em;">Makefile的组织流程的能力如此之强, 不仅可以用来编译项目, 还可以用来组织我们平时的一些日常操作. 这个需要大家发挥自己的想象力.</p> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;">本篇博客是基于&nbsp;<a style="color:#f24c3e;text-decoration:none;" href="http://bbs.chinaunix.net/forum.php?mod=viewthread&amp;tid=408225" rel="nofollow">{精华} 跟我一起写 Makefile</a>&nbsp;而整理的, 有些删减, 追加了一些示例.</p> 
    <p style="font-size:1.2em;line-height:2em;">非常感谢 gunguymadman_cu 提供如此详尽的Makefile介绍, 这正是我一直寻找的Makefile中文文档.</p> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>1.1 Makefile 主要的 5个部分 (显示规则, 隐晦规则, 变量定义, 文件指示, 注释)</strong></h3> 
    <p style="font-size:1.2em;line-height:2em;">Makefile基本格式如下:</p> 
    <div class="cnblogs_code"> 
     <pre><span style="line-height:1.5;">target ... : prerequisites ...
    command
    ...
    ...</span></pre> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">其中,</p> 
    <ul>
     <li style="list-style:disc;">target&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - 目标文件, 可以是 Object File, 也可以是可执行文件</li> 
     <li style="list-style:disc;">prerequisites - 生成 target 所需要的文件或者目标</li> 
     <li style="list-style:disc;">command&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - make需要执行的命令 (任意的shell命令), Makefile中的命令必须以 [tab] 开头</li> 
    </ul>
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <ol>
     <li style="list-style:decimal;"><strong>显示规则 :: 说明如何生成一个或多个目标文件(包括 生成的文件, 文件的依赖文件, 生成的命令)</strong></li> 
     <li style="list-style:decimal;"><strong>隐晦规则 :: make的自动推导功能所执行的规则</strong></li> 
     <li style="list-style:decimal;"><strong>变量定义 :: Makefile中定义的变量</strong></li> 
     <li style="list-style:decimal;"><strong>文件指示 :: Makefile中引用其他Makefile; 指定Makefile中有效部分; 定义一个多行命令</strong></li> 
     <li style="list-style:decimal;"><strong>注释&nbsp;&nbsp;&nbsp;&nbsp; :: Makefile只有行注释 "#", 如果要使用或者输出"#"字符, 需要进行转义, "\#"</strong></li> 
    </ol>
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>1.2 GNU make 的工作方式</strong></h3> 
    <ol>
     <li style="list-style:decimal;">读入主Makefile (主Makefile中可以引用其他Makefile)</li> 
     <li style="list-style:decimal;">读入被include的其他Makefile</li> 
     <li style="list-style:decimal;">初始化文件中的变量</li> 
     <li style="list-style:decimal;">推导隐晦规则, 并分析所有规则</li> 
     <li style="list-style:decimal;">为所有的目标文件创建依赖关系链</li> 
     <li style="list-style:decimal;">根据依赖关系, 决定哪些目标要重新生成</li> 
     <li style="list-style:decimal;">执行生成命令</li> 
    </ol>
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h2 style="font-size:21px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>2. Makefile 初级语法</strong></h2> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>2.1 Makefile 规则</strong></h3> 
    <h4 style="font-size:14px;color:#333333;"><strong>2.1.1 规则语法</strong></h4> 
    <p style="font-size:1.2em;line-height:2em;">规则主要有2部分: 依赖关系 和 生成目标的方法.</p> 
    <p style="font-size:1.2em;line-height:2em;">语法有以下2种:</p> 
    <div class="cnblogs_code"> 
     <pre><span style="line-height:1.5;">target ... : prerequisites ...
    command
    ...</span></pre> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">或者</p> 
    <div class="cnblogs_code"> 
     <pre><span style="line-height:1.5;">target ... : prerequisites ; command
    command
    ...</span></pre> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;"><strong><span style="color:#ff0000;">*注*</span></strong>&nbsp;command太长, 可以用 "\" 作为换行符</p> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h4 style="font-size:14px;color:#333333;"><strong>2.1.2 规则中的通配符</strong></h4> 
    <ul>
     <li style="list-style:disc;">*&nbsp;&nbsp;&nbsp;&nbsp; :: 表示任意一个或多个字符</li> 
     <li style="list-style:disc;">?&nbsp;&nbsp;&nbsp;&nbsp; :: 表示任意一个字符</li> 
     <li style="list-style:disc;">[...] :: ex. [abcd] 表示a,b,c,d中任意一个字符, [^abcd]表示除a,b,c,d以外的字符, [0-9]表示 0~9中任意一个数字</li> 
     <li style="list-style:disc;">~&nbsp;&nbsp;&nbsp;&nbsp; :: 表示用户的home目录</li> 
    </ul>
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h4 style="font-size:14px;color:#333333;"><strong>2.1.3 路径搜索</strong></h4> 
    <p style="font-size:1.2em;line-height:2em;">当一个Makefile中涉及到大量源文件时(这些源文件和Makefile极有可能不在同一个目录中),</p> 
    <p style="font-size:1.2em;line-height:2em;">这时, 最好将源文件的路径明确在Makefile中, 便于编译时查找. Makefile中有个特殊的变量<strong><span style="color:#ff0000;">VPATH</span></strong>&nbsp;就是完成这个功能的.</p> 
    <p style="font-size:1.2em;line-height:2em;">指定了&nbsp;<strong><span style="color:#ff0000;">VPATH</span></strong>&nbsp;之后, 如果当前目录中没有找到相应文件或依赖的文件, Makefile 回到<strong><span style="color:#ff0000;">VPATH</span></strong>&nbsp;指定的路径中再去查找..</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong><span style="color:#ff0000;">VPATH</span></strong>&nbsp;使用方法:</p> 
    <ul>
     <li style="list-style:disc;">vpath &lt;directories&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :: 当前目录中找不到文件时, 就从&lt;directories&gt;中搜索</li> 
     <li style="list-style:disc;">vpath &lt;pattern&gt; &lt;directories&gt;&nbsp; :: 符合&lt;pattern&gt;格式的文件, 就从&lt;directories&gt;中搜索</li> 
     <li style="list-style:disc;">vpath &lt;pattern&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :: 清除符合&lt;pattern&gt;格式的文件搜索路径</li> 
     <li style="list-style:disc;">vpath&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :: 清除所有已经设置好的文件路径</li> 
    </ul>
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre># 示例1 - 当前目录中找不到文件时, 按顺序从 src目录 ../parent-<span style="line-height:1.5;">dir目录中查找文件
VPATH src:..</span>/parent-<span style="color:#0000ff;line-height:1.5;">dir</span><span style="line-height:1.5;">   

# 示例2 </span>- .h结尾的文件都从 ./<span style="line-height:1.5;">header 目录中查找
VPATH </span>%.h ./<span style="line-height:1.5;">header

# 示例3 </span>-<span style="line-height:1.5;"> 清除示例2中设置的规则
VPATH </span>%<span style="line-height:1.5;">.h

# 示例4 </span>-<span style="line-height:1.5;"> 清除所有VPATH的设置
VPATH</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>2.2 Makefile 中的变量</strong></h3> 
    <h4 style="font-size:14px;color:#333333;"><strong>2.2.1 变量定义 ( = or := )</strong></h4> 
    <div class="cnblogs_code"> 
     <pre>OBJS =<span style="line-height:1.5;"> programA.o programB.o
OBJS</span>-ADD =<span style="line-height:1.5;"> $(OBJS) programC.o
# 或者
OBJS :</span>=<span style="line-height:1.5;"> programA.o programB.o
OBJS</span>-ADD := $(OBJS) programC.o</pre> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">其中 = 和 := 的区别在于, := 只能使用前面定义好的变量, = 可以使用后面定义的变量</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>测试 =</strong></p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile内容
OBJS2 </span>=<span style="line-height:1.5;"> $(OBJS1) programC.o
OBJS1 </span>=<span style="line-height:1.5;"> programA.o programB.o

all:
    @echo $(OBJS2)

# bash中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">, 可以看出虽然 OBJS1 是在 OBJS2 之后定义的, 但在 OBJS2中可以提前使用
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
programA.o programB.o programC.o</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>测试 :=</strong></p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile内容
OBJS2 :</span>=<span style="line-height:1.5;"> $(OBJS1) programC.o
OBJS1 :</span>=<span style="line-height:1.5;"> programA.o programB.o

all:
    @echo $(OBJS2)

# bash中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">, 可以看出 OBJS2 中的 $(OBJS1) 为空
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
programC.o</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h4 style="font-size:14px;color:#333333;"><strong>2.2.2 变量替换</strong></h4> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile内容
SRCS :</span>=<span style="line-height:1.5;"> programA.c programB.c programC.c
OBJS :</span>= $(SRCS:%.c=%<span style="line-height:1.5;">.o)

all:
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">SRCS: </span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;"> $(SRCS)
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">OBJS: </span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;"> $(OBJS)

# bash中运行make
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
SRCS:  programA.c programB.c programC.c
OBJS:  programA.o programB.o programC.o</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h4 style="font-size:14px;color:#333333;"><strong>2.2.3 变量追加值 +=</strong></h4> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile内容
SRCS :</span>=<span style="line-height:1.5;"> programA.c programB.c programC.c
SRCS </span>+=<span style="line-height:1.5;"> programD.c

all:
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">SRCS: </span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;"> $(SRCS)

# bash中运行make
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
SRCS:  programA.c programB.c programC.c programD.c</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h4 style="font-size:14px;color:#333333;"><strong>2.2.4 变量覆盖 override</strong></h4> 
    <p style="font-size:1.2em;line-height:2em;">作用是使 Makefile中定义的变量能够覆盖 make 命令参数中指定的变量</p> 
    <p style="font-size:1.2em;line-height:2em;">语法:</p> 
    <ul>
     <li style="list-style:disc;">override &lt;variable&gt; = &lt;value&gt;</li> 
     <li style="list-style:disc;">override &lt;variable&gt; := &lt;value&gt;</li> 
     <li style="list-style:disc;">override &lt;variable&gt; += &lt;value&gt;</li> 
    </ul>
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;">下面通过一个例子体会 override 的作用：</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile内容 (没有用override)
SRCS :</span>=<span style="line-height:1.5;"> programA.c programB.c programC.c

all:
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">SRCS: </span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;"> $(SRCS)

# bash中运行make
$ </span><span style="color:#0000ff;line-height:1.5;">make</span> SRCS=<span style="line-height:1.5;">nothing
SRCS:  nothing

#################################################

# Makefile内容 (用override)
override SRCS :</span>=<span style="line-height:1.5;"> programA.c programB.c programC.c

all:
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">SRCS: </span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;"> $(SRCS)

# bash中运行make
$ </span><span style="color:#0000ff;line-height:1.5;">make</span> SRCS=<span style="line-height:1.5;">nothing
SRCS:  programA.c programB.c programC.c</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h4 style="font-size:14px;color:#333333;"><strong>2.2.5 目标变量</strong></h4> 
    <p style="font-size:1.2em;line-height:2em;">作用是使变量的作用域仅限于这个目标(target), 而不像之前例子中定义的变量, 对整个Makefile都有效.</p> 
    <p style="font-size:1.2em;line-height:2em;">语法:</p> 
    <ul>
     <li style="list-style:disc;">&lt;target ...&gt; :: &lt;variable-assignment&gt;</li> 
     <li style="list-style:disc;">&lt;target ...&gt; :: override &lt;variable-assignment&gt; (override作用参见 变量覆盖的介绍)</li> 
    </ul>
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;">示例:</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
SRCS :</span>=<span style="line-height:1.5;"> programA.c programB.c programC.c

target1: TARGET1</span>-SRCS :=<span style="line-height:1.5;"> programD.c
target1:
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">SRCS: </span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;"> $(SRCS)
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">SRCS: </span><span style="color:#800000;line-height:1.5;">"</span> $(TARGET1-<span style="line-height:1.5;">SRCS)

target2:
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">SRCS: </span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;"> $(SRCS)
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">SRCS: </span><span style="color:#800000;line-height:1.5;">"</span> $(TARGET1-<span style="line-height:1.5;">SRCS)

# bash中执行make
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;"> target1
SRCS:  programA.c programB.c programC.c
SRCS:  programD.c

$ </span><span style="color:#0000ff;line-height:1.5;">make</span> target2     &lt;-- target2中显示不了 $(TARGET1-<span style="line-height:1.5;">SRCS)
SRCS:  programA.c programB.c programC.c
SRCS:</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>2.3 Makefile 命令前缀</strong></h3> 
    <p style="font-size:1.2em;line-height:2em;">Makefile 中书写shell命令时可以加2种前缀 @ 和 -, 或者不用前缀.</p> 
    <p style="font-size:1.2em;line-height:2em;">3种格式的shell命令区别如下:</p> 
    <ul>
     <li style="list-style:disc;">不用前缀 :: 输出执行的命令以及命令执行的结果, 出错的话停止执行</li> 
     <li style="list-style:disc;">前缀 @&nbsp;&nbsp; :: 只输出命令执行的结果, 出错的话停止执行</li> 
     <li style="list-style:disc;">前缀 -&nbsp;&nbsp; :: 命令执行有错的话, 忽略错误, 继续执行</li> 
    </ul>
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;">示例:</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容 (不用前缀)
all:
    </span><span style="color:#0000ff;line-height:1.5;">echo</span> <span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">没有前缀</span><span style="color:#800000;line-height:1.5;">"</span>
    <span style="color:#0000ff;line-height:1.5;">cat</span><span style="line-height:1.5;"> this_file_not_exist
    </span><span style="color:#0000ff;line-height:1.5;">echo</span> <span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">错误之后的命令</span><span style="color:#800000;line-height:1.5;">"</span>       &lt;--<span style="line-height:1.5;"> 这条命令不会被执行

# bash中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span>
<span style="color:#0000ff;line-height:1.5;">echo</span> <span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">没有前缀</span><span style="color:#800000;line-height:1.5;">"</span>             &lt;--<span style="line-height:1.5;"> 命令本身显示出来
没有前缀                    </span>&lt;--<span style="line-height:1.5;"> 命令执行结果显示出来
</span><span style="color:#0000ff;line-height:1.5;">cat</span><span style="line-height:1.5;"> this_file_not_exist
</span><span style="color:#0000ff;line-height:1.5;">cat</span>: this_file_not_exist: No such <span style="color:#0000ff;line-height:1.5;">file</span><span style="line-height:1.5;"> or directory
</span><span style="color:#0000ff;line-height:1.5;">make</span>: *** [all] Error <span style="color:#800080;line-height:1.5;">1</span><span style="line-height:1.5;">

###########################################################

# Makefile 内容 (前缀 @)
all:
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">没有前缀</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">
    @cat this_file_not_exist
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">错误之后的命令</span><span style="color:#800000;line-height:1.5;">"</span>       &lt;--<span style="line-height:1.5;"> 这条命令不会被执行

# bash中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
没有前缀                         </span>&lt;--<span style="line-height:1.5;"> 只有命令执行的结果, 不显示命令本身
</span><span style="color:#0000ff;line-height:1.5;">cat</span>: this_file_not_exist: No such <span style="color:#0000ff;line-height:1.5;">file</span><span style="line-height:1.5;"> or directory
</span><span style="color:#0000ff;line-height:1.5;">make</span>: *** [all] Error <span style="color:#800080;line-height:1.5;">1</span><span style="line-height:1.5;">

###########################################################

# Makefile 内容 (前缀 </span>-<span style="line-height:1.5;">)
all:
    </span>-<span style="color:#0000ff;line-height:1.5;">echo</span> <span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">没有前缀</span><span style="color:#800000;line-height:1.5;">"</span>
    -<span style="color:#0000ff;line-height:1.5;">cat</span><span style="line-height:1.5;"> this_file_not_exist
    </span>-<span style="color:#0000ff;line-height:1.5;">echo</span> <span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">错误之后的命令</span><span style="color:#800000;line-height:1.5;">"</span>       &lt;--<span style="line-height:1.5;"> 这条命令会被执行

# bash中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span>
<span style="color:#0000ff;line-height:1.5;">echo</span> <span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">没有前缀</span><span style="color:#800000;line-height:1.5;">"</span>             &lt;--<span style="line-height:1.5;"> 命令本身显示出来
没有前缀                    </span>&lt;--<span style="line-height:1.5;"> 命令执行结果显示出来
</span><span style="color:#0000ff;line-height:1.5;">cat</span><span style="line-height:1.5;"> this_file_not_exist
</span><span style="color:#0000ff;line-height:1.5;">cat</span>: this_file_not_exist: No such <span style="color:#0000ff;line-height:1.5;">file</span><span style="line-height:1.5;"> or directory
</span><span style="color:#0000ff;line-height:1.5;">make</span>: [all] Error <span style="color:#800080;line-height:1.5;">1</span><span style="line-height:1.5;"> (ignored)
</span><span style="color:#0000ff;line-height:1.5;">echo</span> <span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">错误之后的命令</span><span style="color:#800000;line-height:1.5;">"</span>       &lt;--<span style="line-height:1.5;"> 出错之后的命令也会显示
错误之后的命令              </span>&lt;-- 出错之后的命令也会执行</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>2.4 伪目标</strong></h3> 
    <p style="font-size:1.2em;line-height:2em;">伪目标并不是一个"目标(target)", 不像真正的目标那样会生成一个目标文件.</p> 
    <p style="font-size:1.2em;line-height:2em;">典型的伪目标是 Makefile 中用来清理编译过程中中间文件的 clean 伪目标, 一般格式如下:</p> 
    <div class="cnblogs_code"> 
     <pre>.PHONY: clean   &lt;--<span style="line-height:1.5;"> 这句没有也行, 但是最好加上
clean:
    </span>-<span style="color:#0000ff;line-height:1.5;">rm</span> -f *.o</pre> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>2.5 引用其他的 Makefile</strong></h3> 
    <p style="font-size:1.2em;line-height:2em;">语法: include &lt;filename&gt;&nbsp; (filename 可以包含通配符和路径)</p> 
    <p style="font-size:1.2em;line-height:2em;">示例:</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">主 Makefile begin</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">
    @make other</span>-<span style="line-height:1.5;">all
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">主 Makefile end</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">

include .</span>/other/<span style="line-height:1.5;">Makefile

# .</span>/other/<span style="line-height:1.5;">Makefile 内容
other</span>-<span style="line-height:1.5;">all:
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">other makefile begin</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">other makefile end</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">

# bash中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ ll
total 20K
</span>-rw-r--r-- <span style="color:#800080;line-height:1.5;">1</span> wangyubin wangyubin  <span style="color:#800080;line-height:1.5;">125</span> Sep <span style="color:#800080;line-height:1.5;">23</span> <span style="color:#800080;line-height:1.5;">16</span>:<span style="color:#800080;line-height:1.5;">13</span><span style="line-height:1.5;"> Makefile
</span>-rw-r--r-- <span style="color:#800080;line-height:1.5;">1</span> wangyubin wangyubin  11K Sep <span style="color:#800080;line-height:1.5;">23</span> <span style="color:#800080;line-height:1.5;">16</span>:<span style="color:#800080;line-height:1.5;">15</span> makefile.org   &lt;--<span style="line-height:1.5;"> 这个文件不用管
drwxr</span>-xr-x <span style="color:#800080;line-height:1.5;">2</span> wangyubin wangyubin <span style="color:#800080;line-height:1.5;">4</span>.0K Sep <span style="color:#800080;line-height:1.5;">23</span> <span style="color:#800080;line-height:1.5;">16</span>:<span style="color:#800080;line-height:1.5;">11</span><span style="line-height:1.5;"> other
$ ll other</span>/<span style="line-height:1.5;">
total </span><span style="color:#800080;line-height:1.5;">4</span><span style="line-height:1.5;">.0K
</span>-rw-r--r-- <span style="color:#800080;line-height:1.5;">1</span> wangyubin wangyubin <span style="color:#800080;line-height:1.5;">71</span> Sep <span style="color:#800080;line-height:1.5;">23</span> <span style="color:#800080;line-height:1.5;">16</span>:<span style="color:#800080;line-height:1.5;">11</span><span style="line-height:1.5;"> Makefile

$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
主 Makefile begin
</span><span style="color:#0000ff;line-height:1.5;">make</span>[<span style="color:#800080;line-height:1.5;">1</span>]: Entering directory `/path/to/test/makefile<span style="color:#800000;line-height:1.5;">'
</span><span style="line-height:1.5;">other makefile begin
other makefile end
</span><span style="color:#0000ff;line-height:1.5;">make</span>[<span style="color:#800080;line-height:1.5;">1</span>]: Leaving directory `/path/to/test/makefile<span style="color:#800000;line-height:1.5;">'
</span>主 Makefile end</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>2.6 查看C文件的依赖关系</strong></h3> 
    <p style="font-size:1.2em;line-height:2em;">写 Makefile 的时候, 需要确定每个目标的依赖关系.</p> 
    <p style="font-size:1.2em;line-height:2em;">GNU提供一个机制可以查看C代码文件依赖那些文件, 这样我们在写 Makefile 目标的时候就不用打开C源码来看其依赖那些文件了.</p> 
    <p style="font-size:1.2em;line-height:2em;">比如, 下面命令显示内核源码中 virt/kvm/kvm_main.c 中的依赖关系</p> 
    <div class="cnblogs_code"> 
     <pre>$ cd virt/kvm/<span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">gcc</span> -<span style="line-height:1.5;">MM kvm_main.c 
kvm_main.o: kvm_main.c iodev.h coalesced_mmio.h async_pf.h   </span>&lt;-- 这句就可以加到 Makefile 中作为编译 kvm_main.o 的依赖关系</pre> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>2.7 make 退出码</strong></h3> 
    <p style="font-size:1.2em;line-height:2em;">Makefile的退出码有以下3种：</p> 
    <ul>
     <li style="list-style:disc;">0 :: 表示成功执行</li> 
     <li style="list-style:disc;">1 :: 表示make命令出现了错误</li> 
     <li style="list-style:disc;">2 :: 使用了 "-q" 选项, 并且make使得一些目标不需要更新</li> 
    </ul>
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>2.8 指定 Makefile， 指定特定目标</strong></h3> 
    <p style="font-size:1.2em;line-height:2em;">默认执行 make 命令时, GNU make在当前目录下依次搜索下面3个文件 "GNUmakefile", "makefile", "Makefile",</p> 
    <p style="font-size:1.2em;line-height:2em;">找到对应文件之后, 就开始执行此文件中的第一个目标(target). 如果找不到这3个文件就报错.</p> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;">非默认情况下, 可以在 make 命令中指定特定的 Makefile 和特定的 目标.</p> 
    <p style="font-size:1.2em;line-height:2em;">示例：</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile文件名改为 MyMake, 内容
target1:
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">target [1]  begin</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">target [1]  end</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">

target2:
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">target [2]  begin</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">target [2]  end</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">ls</span><span style="line-height:1.5;">
Makefile
$ </span><span style="color:#0000ff;line-height:1.5;">mv</span><span style="line-height:1.5;"> Makefile MyMake
$ </span><span style="color:#0000ff;line-height:1.5;">ls</span><span style="line-height:1.5;">
MyMake
$ </span><span style="color:#0000ff;line-height:1.5;">make</span>                     &lt;--<span style="line-height:1.5;"> 找不到默认的 Makefile
</span><span style="color:#0000ff;line-height:1.5;">make</span>: ***<span style="line-height:1.5;"> No targets specified and no makefile found.  Stop.
$ </span><span style="color:#0000ff;line-height:1.5;">make</span> -f MyMake           &lt;--<span style="line-height:1.5;"> 指定特定的Makefile
target [</span><span style="color:#800080;line-height:1.5;">1</span><span style="line-height:1.5;">]  begin
target [</span><span style="color:#800080;line-height:1.5;">1</span><span style="line-height:1.5;">]  end
$ </span><span style="color:#0000ff;line-height:1.5;">make</span> -f MyMake target2   &lt;--<span style="line-height:1.5;"> 指定特定的目标(target)
target [</span><span style="color:#800080;line-height:1.5;">2</span><span style="line-height:1.5;">]  begin
target [</span><span style="color:#800080;line-height:1.5;">2</span>]  end</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>2.9 make 参数介绍</strong></h3> 
    <p style="font-size:1.2em;line-height:2em;">make 的参数有很多, 可以通过 make -h 去查看, 下面只介绍几个我认为比较有用的.</p> 
    <table style="margin-left:0px;border-spacing:0px;border-color:#C0C0C0;width:550px;" border="1">
     <tbody>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top"> <p style="font-size:1.2em;line-height:2em;" align="center"><strong>参数</strong></p> </td> 
       <td style="border-color:#C0C0C0;" valign="top"> <p style="font-size:1.2em;line-height:2em;" align="center"><strong>含义</strong></p> </td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">--debug[=&lt;options&gt;]</td> 
       <td style="border-color:#C0C0C0;" valign="top">输出make的调试信息, options 可以是 a, b, v</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">-j --jobs</td> 
       <td style="border-color:#C0C0C0;" valign="top">同时运行的命令的个数, 也就是多线程执行 Makefile</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">-r --no-builtin-rules</td> 
       <td style="border-color:#C0C0C0;" valign="top">禁止使用任何隐含规则</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">-R --no-builtin-variabes</td> 
       <td style="border-color:#C0C0C0;" valign="top">禁止使用任何作用于变量上的隐含规则</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">-B --always-make</td> 
       <td style="border-color:#C0C0C0;" valign="top">假设所有目标都有更新, 即强制重编译</td> 
      </tr>
     </tbody>
    </table>
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>2.10 Makefile 隐含规则</strong></h3> 
    <p style="font-size:1.2em;line-height:2em;">这里只列一个和编译C相关的.</p> 
    <p style="font-size:1.2em;line-height:2em;">编译C时，&lt;n&gt;.o 的目标会自动推导为 &lt;n&gt;.c</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 中
main : main.o
    </span><span style="color:#0000ff;line-height:1.5;">gcc</span> -<span style="line-height:1.5;">o main main.o

#会自动变为:
main : main.o
    </span><span style="color:#0000ff;line-height:1.5;">gcc</span> -<span style="line-height:1.5;">o main main.o

main.o: main.c    </span>&lt;--<span style="line-height:1.5;"> main.o 这个目标是隐含生成的
    </span><span style="color:#0000ff;line-height:1.5;">gcc</span> -c main.c</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>2.11 隐含规则中的 命令变量 和 命令参数变量</strong></h3> 
    <h4 style="font-size:14px;color:#333333;"><strong>2.11.1 命令变量, 书写Makefile可以直接写 shell时用这些变量.</strong></h4> 
    <p style="font-size:1.2em;line-height:2em;">下面只列出一些C相关的</p> 
    <table style="margin-left:0px;border-spacing:0px;border-color:#C0C0C0;width:221px;" border="1">
     <tbody>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top"> <p style="font-size:1.2em;line-height:2em;" align="center"><strong>变量名</strong></p> </td> 
       <td style="border-color:#C0C0C0;" valign="top"> <p style="font-size:1.2em;line-height:2em;" align="center"><strong>含义</strong></p> </td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">RM</td> 
       <td style="border-color:#C0C0C0;" valign="top">rm -f</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">AR</td> 
       <td style="border-color:#C0C0C0;" valign="top">ar</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">CC</td> 
       <td style="border-color:#C0C0C0;" valign="top">cc</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">CXX</td> 
       <td style="border-color:#C0C0C0;" valign="top">g++</td> 
      </tr>
     </tbody>
    </table>
    <p style="font-size:1.2em;line-height:2em;">示例:</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo $(RM)
    @echo $(AR)
    @echo $(CC)
    @echo $(CXX)

# bash 中执行make, 显示各个变量的值
$ </span><span style="color:#0000ff;line-height:1.5;">make</span>
<span style="color:#0000ff;line-height:1.5;">rm</span> -<span style="line-height:1.5;">f
</span><span style="color:#0000ff;line-height:1.5;">ar</span>
<span style="color:#0000ff;line-height:1.5;">cc</span><span style="line-height:1.5;">
g</span>++</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h4 style="font-size:14px;color:#333333;"><strong>2.11.2 命令参数变量</strong></h4> 
    <table style="margin-left:0px;border-spacing:0px;border-color:#C0C0C0;width:296px;" border="1">
     <tbody>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top"> <p style="font-size:1.2em;line-height:2em;" align="center"><strong>变量名</strong></p> </td> 
       <td style="border-color:#C0C0C0;" valign="top"> <p style="font-size:1.2em;line-height:2em;" align="center"><strong>含义</strong></p> </td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">ARFLAGS</td> 
       <td style="border-color:#C0C0C0;" valign="top">AR命令的参数</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">CFLAGS</td> 
       <td style="border-color:#C0C0C0;" valign="top">C语言编译器的参数</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">CXXFLAGS</td> 
       <td style="border-color:#C0C0C0;" valign="top">C++语言编译器的参数</td> 
      </tr>
     </tbody>
    </table>
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;">示例: 下面以 CFLAGS 为例演示</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># test.c 内容
#include </span>&lt;stdio.h&gt;

<span style="color:#0000ff;line-height:1.5;">int</span> main(<span style="color:#0000ff;line-height:1.5;">int</span> argc, <span style="color:#0000ff;line-height:1.5;">char</span> *<span style="line-height:1.5;">argv[])
{
    printf (</span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">Hello Makefile\n</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">);
    return </span><span style="color:#800080;line-height:1.5;">0</span><span style="line-height:1.5;">;
}

# Makefile 内容
test: test.o
    $(CC) </span>-<span style="line-height:1.5;">o test test.o

# bash 中用 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;"> 来测试
$ ll
total 24K
</span>-rw-r--r-- <span style="color:#800080;line-height:1.5;">1</span> wangyubin wangyubin  <span style="color:#800080;line-height:1.5;">69</span> Sep <span style="color:#800080;line-height:1.5;">23</span> <span style="color:#800080;line-height:1.5;">17</span>:<span style="color:#800080;line-height:1.5;">31</span><span style="line-height:1.5;"> Makefile
</span>-rw-r--r-- <span style="color:#800080;line-height:1.5;">1</span> wangyubin wangyubin 14K Sep <span style="color:#800080;line-height:1.5;">23</span> <span style="color:#800080;line-height:1.5;">19</span>:<span style="color:#800080;line-height:1.5;">51</span> makefile.org   &lt;--<span style="line-height:1.5;"> 请忽略这个文件
</span>-rw-r--r-- <span style="color:#800080;line-height:1.5;">1</span> wangyubin wangyubin <span style="color:#800080;line-height:1.5;">392</span> Sep <span style="color:#800080;line-height:1.5;">23</span> <span style="color:#800080;line-height:1.5;">17</span>:<span style="color:#800080;line-height:1.5;">31</span><span style="line-height:1.5;"> test.c

$ </span><span style="color:#0000ff;line-height:1.5;">make</span>
<span style="color:#0000ff;line-height:1.5;">cc</span>    -c -<span style="line-height:1.5;">o test.o test.c
</span><span style="color:#0000ff;line-height:1.5;">cc</span> -o test test.o               &lt;--<span style="line-height:1.5;"> 这个是自动推导的

$ </span><span style="color:#0000ff;line-height:1.5;">rm</span> -<span style="line-height:1.5;">f test test.o

$ </span><span style="color:#0000ff;line-height:1.5;">make</span> CFLAGS=-Wall             &lt;--<span style="line-height:1.5;"> 命令中加的编译器参数自动追加入下面的编译中了
</span><span style="color:#0000ff;line-height:1.5;">cc</span> -Wall   -c -<span style="line-height:1.5;">o test.o test.c
</span><span style="color:#0000ff;line-height:1.5;">cc</span> -o test test.o</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>2.12 自动变量</strong></h3> 
    <p style="font-size:1.2em;line-height:2em;">Makefile 中很多时候通过自动变量来简化书写, 各个自动变量的含义如下:</p> 
    <table style="margin-left:0px;border-spacing:0px;border-color:#C0C0C0;width:472px;" border="1">
     <tbody>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top"> <p style="font-size:1.2em;line-height:2em;" align="center"><strong>自动变量</strong></p> </td> 
       <td style="border-color:#C0C0C0;" valign="top"> <p style="font-size:1.2em;line-height:2em;" align="center"><strong>含义</strong></p> </td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">$@</td> 
       <td style="border-color:#C0C0C0;" valign="top">目标集合</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">$%</td> 
       <td style="border-color:#C0C0C0;" valign="top">当目标是函数库文件时, 表示其中的目标文件名</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">$&lt;</td> 
       <td style="border-color:#C0C0C0;" valign="top">第一个依赖目标. 如果依赖目标是多个, 逐个表示依赖目标</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">$?</td> 
       <td style="border-color:#C0C0C0;" valign="top">比目标新的依赖目标的集合</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">$^</td> 
       <td style="border-color:#C0C0C0;" valign="top">所有依赖目标的集合, 会去除重复的依赖目标</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">$+</td> 
       <td style="border-color:#C0C0C0;" valign="top">所有依赖目标的集合, 不会去除重复的依赖目标</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">$*</td> 
       <td style="border-color:#C0C0C0;" valign="top">这个是GNU make特有的, 其它的make不一定支持</td> 
      </tr>
     </tbody>
    </table>
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h2 style="font-size:21px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>3. Makefile 高级语法</strong></h2> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>3.1 嵌套Makefile</strong></h3> 
    <p style="font-size:1.2em;line-height:2em;">在 Makefile 初级语法中已经提到过引用其它 Makefile的方法. 这里有另一种写法, 并且可以向引用的其它 Makefile 传递参数.</p> 
    <p style="font-size:1.2em;line-height:2em;">示例: (不传递参数, 只是调用子文件夹 other 中的Makefile)</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">主 Makefile begin</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">
    @cd .</span>/other &amp;&amp; <span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">主 Makefile end</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">


# .</span>/other/<span style="line-height:1.5;">Makefile 内容
other</span>-<span style="line-height:1.5;">all:
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">other makefile begin</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">other makefile end</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">

# bash中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ ll
total 28K
</span>-rw-r--r-- <span style="color:#800080;line-height:1.5;">1</span> wangyubin wangyubin  <span style="color:#800080;line-height:1.5;">104</span> Sep <span style="color:#800080;line-height:1.5;">23</span> <span style="color:#800080;line-height:1.5;">20</span>:<span style="color:#800080;line-height:1.5;">43</span><span style="line-height:1.5;"> Makefile
</span>-rw-r--r-- <span style="color:#800080;line-height:1.5;">1</span> wangyubin wangyubin  17K Sep <span style="color:#800080;line-height:1.5;">23</span> <span style="color:#800080;line-height:1.5;">20</span>:<span style="color:#800080;line-height:1.5;">44</span> makefile.org   &lt;--<span style="line-height:1.5;"> 这个文件不用管
drwxr</span>-xr-x <span style="color:#800080;line-height:1.5;">2</span> wangyubin wangyubin <span style="color:#800080;line-height:1.5;">4</span>.0K Sep <span style="color:#800080;line-height:1.5;">23</span> <span style="color:#800080;line-height:1.5;">20</span>:<span style="color:#800080;line-height:1.5;">42</span><span style="line-height:1.5;"> other
$ ll other</span>/<span style="line-height:1.5;">
total </span><span style="color:#800080;line-height:1.5;">4</span><span style="line-height:1.5;">.0K
</span>-rw-r--r-- <span style="color:#800080;line-height:1.5;">1</span> wangyubin wangyubin <span style="color:#800080;line-height:1.5;">71</span> Sep <span style="color:#800080;line-height:1.5;">23</span> <span style="color:#800080;line-height:1.5;">16</span>:<span style="color:#800080;line-height:1.5;">11</span><span style="line-height:1.5;"> Makefile

$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
主 Makefile begin
</span><span style="color:#0000ff;line-height:1.5;">make</span>[<span style="color:#800080;line-height:1.5;">1</span>]: Entering directory `/path/to/test/makefile/other<span style="color:#800000;line-height:1.5;">'
</span><span style="line-height:1.5;">other makefile begin
other makefile end
</span><span style="color:#0000ff;line-height:1.5;">make</span>[<span style="color:#800080;line-height:1.5;">1</span>]: Leaving directory `/path/to/test/makefile/other<span style="color:#800000;line-height:1.5;">'
</span>主 Makefile end</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;">示例: (用export传递参数)</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
export VALUE1 :</span>= export.c    &lt;-- 用了 export, 此变量能够传递到 ./other/<span style="line-height:1.5;">Makefile 中
VALUE2 :</span>= no-export.c        &lt;-- 此变量不能传递到 ./other/<span style="line-height:1.5;">Makefile 中

all:
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">主 Makefile begin</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">
    @cd .</span>/other &amp;&amp; <span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">主 Makefile end</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">


# .</span>/other/<span style="line-height:1.5;">Makefile 内容
other</span>-<span style="line-height:1.5;">all:
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">other makefile begin</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">VALUE1: </span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;"> $(VALUE1)
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">VALUE2: </span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;"> $(VALUE2)
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">other makefile end</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">

# bash中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
主 Makefile begin
</span><span style="color:#0000ff;line-height:1.5;">make</span>[<span style="color:#800080;line-height:1.5;">1</span>]: Entering directory `/path/to/test/makefile/other<span style="color:#800000;line-height:1.5;">'
</span><span style="line-height:1.5;">other makefile begin
VALUE1:  export.c        </span>&lt;--<span style="line-height:1.5;"> VALUE1 传递成功
VALUE2:                  </span>&lt;--<span style="line-height:1.5;"> VALUE2 传递失败
other makefile end
</span><span style="color:#0000ff;line-height:1.5;">make</span>[<span style="color:#800080;line-height:1.5;">1</span>]: Leaving directory `/path/to/test/makefile/other<span style="color:#800000;line-height:1.5;">'
</span>主 Makefile end</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong><span style="color:#ff0000;">*补充*</span></strong>&nbsp;export 语法格式如下:</p> 
    <ul>
     <li style="list-style:disc;">export variable = value</li> 
     <li style="list-style:disc;">export variable := value</li> 
     <li style="list-style:disc;">export variable += value</li> 
    </ul>
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>3.2 定义命令包</strong></h3> 
    <p style="font-size:1.2em;line-height:2em;">命令包有点像是个函数, 将连续的相同的命令合成一条, 减少 Makefile 中的代码量, 便于以后维护.</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>语法:</strong></p> 
    <div class="cnblogs_code"> 
     <pre>define &lt;command-name&gt;<span style="line-height:1.5;">
command
...
endef</span></pre> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>示例:</strong></p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
define run</span>-hello-<span style="line-height:1.5;">makefile
@echo </span>-n <span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">Hello</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">
@echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;"> Makefile!</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">
@echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">这里可以执行多条 Shell 命令!</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">
endef

all:
    $(run</span>-hello-<span style="line-height:1.5;">makefile)


# bash 中运行make
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
Hello Makefile</span>!<span style="line-height:1.5;">
这里可以执行多条 Shell 命令</span>!</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>3.3 条件判断</strong></h3> 
    <p style="font-size:1.2em;line-height:2em;">条件判断的关键字主要有&nbsp;<strong>ifeq ifneq ifdef ifndef</strong></p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>语法:</strong></p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre>&lt;conditional-directive&gt;
&lt;text-<span style="color:#0000ff;line-height:1.5;">if</span>-<span style="color:#0000ff;line-height:1.5;">true</span>&gt;<span style="line-height:1.5;">
endif

# 或者
</span>&lt;conditional-directive&gt;
&lt;text-<span style="color:#0000ff;line-height:1.5;">if</span>-<span style="color:#0000ff;line-height:1.5;">true</span>&gt;
<span style="color:#0000ff;line-height:1.5;">else</span>
&lt;text-<span style="color:#0000ff;line-height:1.5;">if</span>-<span style="color:#0000ff;line-height:1.5;">false</span>&gt;<span style="line-height:1.5;">
endif</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>示例:</strong>&nbsp;ifeq的例子, ifneq和ifeq的使用方法类似, 就是取反</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
ifeq (</span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">aa</span><span style="color:#800000;line-height:1.5;">"</span>, <span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">bb</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">)
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">equal</span><span style="color:#800000;line-height:1.5;">"</span>
<span style="color:#0000ff;line-height:1.5;">else</span><span style="line-height:1.5;">
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">not equal</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">
endif

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
not equal</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>示例:</strong>&nbsp;ifdef的例子, ifndef和ifdef的使用方法类似, 就是取反</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
SRCS :</span>=<span style="line-height:1.5;"> program.c

all:
ifdef SRCS
    @echo $(SRCS)
</span><span style="color:#0000ff;line-height:1.5;">else</span><span style="line-height:1.5;">
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">no SRCS</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">
endif

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
program.c</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>3.4 Makefile 中的函数</strong></h3> 
    <p style="font-size:1.2em;line-height:2em;">Makefile 中自带了一些函数, 利用这些函数可以简化 Makefile 的编写.</p> 
    <p style="font-size:1.2em;line-height:2em;">函数调用语法如下:</p> 
    <div class="cnblogs_code"> 
     <pre>$(&lt;<span style="color:#0000ff;line-height:1.5;">function</span>&gt; &lt;arguments&gt;<span style="line-height:1.5;">)
# 或者
${</span>&lt;<span style="color:#0000ff;line-height:1.5;">function</span>&gt; &lt;arguments&gt;}</pre> 
    </div> 
    <ul>
     <li style="list-style:disc;">&lt;function&gt; 是函数名</li> 
     <li style="list-style:disc;">&lt;arguments&gt; 是函数参数</li> 
    </ul>
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h4 style="font-size:14px;color:#333333;"><strong>3.4.1 字符串函数</strong></h4> 
    <p style="font-size:1.2em;line-height:2em;"><strong>字符串替换函数: $(subst &lt;from&gt;,&lt;to&gt;,&lt;text&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 把字符串&lt;text&gt; 中的 &lt;from&gt; 替换为 &lt;to&gt;</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: 替换过的字符串</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo $(subst t,e,maktfilt)  </span>&lt;--<span style="line-height:1.5;"> 将t替换为e

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
makefile</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>模式字符串替换函数: $(patsubst &lt;pattern&gt;,&lt;replacement&gt;,&lt;text&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 查找&lt;text&gt;中的单词(单词以"空格", "tab", "换行"来分割) 是否符合 &lt;pattern&gt;, 符合的话, 用 &lt;replacement&gt; 替代.</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: 替换过的字符串</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo $(patsubst </span>%.c,%<span style="line-height:1.5;">.o,programA.c programB.c)

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
programA.o programB.o</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>去空格函数: $(strip &lt;string&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 去掉 &lt;string&gt; 字符串中开头和结尾的空字符</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: 被去掉空格的字符串值</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
VAL :</span>= <span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">       aa  bb  cc </span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">

all:
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">去除空格前: </span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;"> $(VAL)
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">去除空格后: </span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;"> $(strip $(VAL))

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
去除空格前:         aa  bb  </span><span style="color:#0000ff;line-height:1.5;">cc</span><span style="line-height:1.5;"> 
去除空格后:   aa bb </span><span style="color:#0000ff;line-height:1.5;">cc</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>查找字符串函数: $(findstring &lt;find&gt;,&lt;in&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 在字符串 &lt;in&gt; 中查找 &lt;find&gt; 字符串</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: 如果找到, 返回 &lt;find&gt; 字符串,&nbsp; 否则返回空字符串</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
VAL :</span>= <span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">       aa  bb  cc </span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">

all:
    @echo $(findstring aa,$(VAL))
    @echo $(findstring ab,$(VAL))

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
aa</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>过滤函数: $(filter &lt;pattern...&gt;,&lt;text&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 以 &lt;pattern&gt; 模式过滤字符串 &lt;text&gt;, *保留* 符合模式 &lt;pattern&gt; 的单词, 可以有多个模式</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: 符合模式 &lt;pattern&gt; 的字符串</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo $(filter </span>%.o %<span style="line-height:1.5;">.a,program.c program.o program.a)


# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
program.o program.a</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>反过滤函数: $(filter-out &lt;pattern...&gt;,&lt;text&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 以 &lt;pattern&gt; 模式过滤字符串 &lt;text&gt;, *去除* 符合模式 &lt;pattern&gt; 的单词, 可以有多个模式</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: 不符合模式 &lt;pattern&gt; 的字符串</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo $(filter</span>-out %.o %<span style="line-height:1.5;">.a,program.c program.o program.a)

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
program.c</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>排序函数: $(sort &lt;list&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 给字符串 &lt;list&gt; 中的单词排序 (升序)</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: 排序后的字符串</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo $(</span><span style="color:#0000ff;line-height:1.5;">sort</span><span style="line-height:1.5;"> bac abc acb cab)

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
abc acb bac cab</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>取单词函数: $(word &lt;n&gt;,&lt;text&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 取字符串 &lt;text&gt; 中的 第&lt;n&gt;个单词 (n从1开始)</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: &lt;text&gt; 中的第&lt;n&gt;个单词, 如果&lt;n&gt; 比 &lt;text&gt; 中单词个数要大, 则返回空字符串</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo $(word </span><span style="color:#800080;line-height:1.5;">1</span>,aa bb <span style="color:#0000ff;line-height:1.5;">cc</span> <span style="color:#0000ff;line-height:1.5;">dd</span><span style="line-height:1.5;">)
    @echo $(word </span><span style="color:#800080;line-height:1.5;">5</span>,aa bb <span style="color:#0000ff;line-height:1.5;">cc</span> <span style="color:#0000ff;line-height:1.5;">dd</span><span style="line-height:1.5;">)
    @echo $(word </span><span style="color:#800080;line-height:1.5;">4</span>,aa bb <span style="color:#0000ff;line-height:1.5;">cc</span> <span style="color:#0000ff;line-height:1.5;">dd</span><span style="line-height:1.5;">)

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
aa

</span><span style="color:#0000ff;line-height:1.5;">dd</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>取单词串函数: $(wordlist &lt;s&gt;,&lt;e&gt;,&lt;text&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 从字符串&lt;text&gt;中取从&lt;s&gt;开始到&lt;e&gt;的单词串. &lt;s&gt;和&lt;e&gt;是一个数字.</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: 从&lt;s&gt;到&lt;e&gt;的字符串</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo $(wordlist </span><span style="color:#800080;line-height:1.5;">1</span>,<span style="color:#800080;line-height:1.5;">3</span>,aa bb <span style="color:#0000ff;line-height:1.5;">cc</span> <span style="color:#0000ff;line-height:1.5;">dd</span><span style="line-height:1.5;">)
    @echo $(word </span><span style="color:#800080;line-height:1.5;">5</span>,<span style="color:#800080;line-height:1.5;">6</span>,aa bb <span style="color:#0000ff;line-height:1.5;">cc</span> <span style="color:#0000ff;line-height:1.5;">dd</span><span style="line-height:1.5;">)
    @echo $(word </span><span style="color:#800080;line-height:1.5;">2</span>,<span style="color:#800080;line-height:1.5;">5</span>,aa bb <span style="color:#0000ff;line-height:1.5;">cc</span> <span style="color:#0000ff;line-height:1.5;">dd</span><span style="line-height:1.5;">)


# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
aa bb </span><span style="color:#0000ff;line-height:1.5;">cc</span><span style="line-height:1.5;">

bb</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>单词个数统计函数: $(words &lt;text&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 统计字符串 &lt;text&gt; 中单词的个数</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: 单词个数</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容

all:
    @echo $(words aa bb </span><span style="color:#0000ff;line-height:1.5;">cc</span> <span style="color:#0000ff;line-height:1.5;">dd</span><span style="line-height:1.5;">)
    @echo $(words aabbccdd)
    @echo $(words )

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span>
<span style="color:#800080;line-height:1.5;">4</span>
<span style="color:#800080;line-height:1.5;">1</span>
<span style="color:#800080;line-height:1.5;">0</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>首单词函数: $(firstword &lt;text&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 取字符串 &lt;text&gt; 中的第一个单词</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: 字符串 &lt;text&gt; 中的第一个单词</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo $(firstword aa bb </span><span style="color:#0000ff;line-height:1.5;">cc</span> <span style="color:#0000ff;line-height:1.5;">dd</span><span style="line-height:1.5;">)
    @echo $(firstword aabbccdd)
    @echo $(firstword )

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
aa
aabbccdd</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h4 style="font-size:14px;color:#333333;"><strong>3.4.2 文件名函数</strong></h4> 
    <p style="font-size:1.2em;line-height:2em;"><strong>取目录函数: $(dir &lt;names...&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 从文件名序列 &lt;names&gt; 中取出目录部分</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: 文件名序列 &lt;names&gt; 中的目录部分</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo $(</span><span style="color:#0000ff;line-height:1.5;">dir</span> /home/a.c ./bb.c ../<span style="line-height:1.5;">c.c d.c)


# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span>
/home/ ./ ../ ./</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>取文件函数: $(notdir &lt;names...&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 从文件名序列 &lt;names&gt; 中取出非目录部分</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: 文件名序列 &lt;names&gt; 中的非目录部分</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo $(notdir </span>/home/a.c ./bb.c ../<span style="line-height:1.5;">c.c d.c)

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
a.c bb.c c.c d.c</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>取后缀函数: $(suffix &lt;names...&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 从文件名序列 &lt;names&gt; 中取出各个文件名的后缀</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: 文件名序列 &lt;names&gt; 中各个文件名的后缀, 没有后缀则返回空字符串</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo $(suffix </span>/home/a.c ./b.o ../<span style="line-height:1.5;">c.a d)

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
.c .o .a</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>取前缀函数: $(basename &lt;names...&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 从文件名序列 &lt;names&gt; 中取出各个文件名的前缀</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: 文件名序列 &lt;names&gt; 中各个文件名的前缀, 没有前缀则返回空字符串</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo $(</span><span style="color:#0000ff;line-height:1.5;">basename</span> /home/a.c ./b.o ../c.a /home/<span style="line-height:1.5;">.d .e)


# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span>
/home/a ./b ../c /home/</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>加后缀函数: $(addsuffix &lt;suffix&gt;,&lt;names...&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 把后缀 &lt;suffix&gt; 加到 &lt;names&gt; 中的每个单词后面</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: 加过后缀的文件名序列</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo $(addsuffix .c,</span>/home/a b ./c.o ../<span style="line-height:1.5;">d.c)


# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span>
/home/a.c b.c ./c.o.c ../d.c.c</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>加前缀函数: $(addprefix &lt;prefix&gt;,&lt;names...&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 把前缀 &lt;prefix&gt; 加到 &lt;names&gt; 中的每个单词前面</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: 加过前缀的文件名序列</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo $(addprefix test_,</span>/home/a.c b.c ./<span style="line-height:1.5;">d.c)

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
test_</span>/home/a.c test_b.c test_./d.c</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>连接函数: $(join &lt;list1&gt;,&lt;list2&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: &lt;list2&gt; 中对应的单词加到 &lt;list1&gt; 后面</p> 
    <p style="font-size:1.2em;line-height:2em;">返回: 连接后的字符串</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    @echo $(</span><span style="color:#0000ff;line-height:1.5;">join</span> a b c d,<span style="color:#800080;line-height:1.5;">1</span> <span style="color:#800080;line-height:1.5;">2</span> <span style="color:#800080;line-height:1.5;">3</span> <span style="color:#800080;line-height:1.5;">4</span><span style="line-height:1.5;">)
    @echo $(</span><span style="color:#0000ff;line-height:1.5;">join</span> a b c d,<span style="color:#800080;line-height:1.5;">1</span> <span style="color:#800080;line-height:1.5;">2</span> <span style="color:#800080;line-height:1.5;">3</span> <span style="color:#800080;line-height:1.5;">4</span> <span style="color:#800080;line-height:1.5;">5</span><span style="line-height:1.5;">)
    @echo $(</span><span style="color:#0000ff;line-height:1.5;">join</span> a b c d e,<span style="color:#800080;line-height:1.5;">1</span> <span style="color:#800080;line-height:1.5;">2</span> <span style="color:#800080;line-height:1.5;">3</span> <span style="color:#800080;line-height:1.5;">4</span><span style="line-height:1.5;">)

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
a1 b2 c3 d4
a1 b2 c3 d4 </span><span style="color:#800080;line-height:1.5;">5</span><span style="line-height:1.5;">
a1 b2 c3 d4 e</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h4 style="font-size:14px;color:#333333;"><strong>3.4.3 foreach</strong></h4> 
    <p style="font-size:1.2em;line-height:2em;"><strong>语法:</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">$(foreach &lt;var&gt;,&lt;list&gt;,&lt;text&gt;)</p> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>示例:</strong></p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
targets :</span>=<span style="line-height:1.5;"> a b c d
objects :</span>=<span style="line-height:1.5;"> $(foreach i,$(targets),$(i).o)

all:
    @echo $(targets)
    @echo $(objects)

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
a b c d
a.o b.o c.o d.o</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h4 style="font-size:14px;color:#333333;"><strong>3.4.4 if</strong></h4> 
    <p style="font-size:1.2em;line-height:2em;">这里的if是个函数, 和前面的条件判断不一样, 前面的条件判断属于Makefile的关键字</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>语法:</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">$(if &lt;condition&gt;,&lt;then-part&gt;)</p> 
    <p style="font-size:1.2em;line-height:2em;">$(if &lt;condition&gt;,&lt;then-part&gt;,&lt;else-part&gt;)</p> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>示例:</strong></p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
val :</span>=<span style="line-height:1.5;"> a
objects :</span>= $(<span style="color:#0000ff;line-height:1.5;">if</span><span style="line-height:1.5;"> $(val),$(val).o,nothing)
no</span>-objects := $(<span style="color:#0000ff;line-height:1.5;">if</span> $(no-<span style="line-height:1.5;">val),$(val).o,nothing)

all:
    @echo $(objects)
    @echo $(no</span>-<span style="line-height:1.5;">objects)

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
a.o
nothing</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h4 style="font-size:14px;color:#333333;"><strong>3.4.5 call - 创建新的参数化函数</strong></h4> 
    <p style="font-size:1.2em;line-height:2em;"><strong>语法:</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">$(call &lt;expression&gt;,&lt;parm1&gt;,&lt;parm2&gt;,&lt;parm3&gt;...)</p> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>示例:</strong></p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
log </span>= <span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">====debug====</span><span style="color:#800000;line-height:1.5;">"</span> $(<span style="color:#800080;line-height:1.5;">1</span>) <span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">====end====</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">

all:
    @echo $(call log,</span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">正在 Make</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">)

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span>
====debug==== 正在 Make ====end====</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h4 style="font-size:14px;color:#333333;"><strong>3.4.6 origin - 判断变量的来源</strong></h4> 
    <p style="font-size:1.2em;line-height:2em;"><strong>语法:</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">$(origin &lt;variable&gt;)</p> 
    <p style="font-size:1.2em;line-height:2em;">返回值有如下类型:</p> 
    <table style="margin-left:0px;border-spacing:0px;border-color:#C0C0C0;width:546px;" border="1">
     <tbody>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top"> <p style="font-size:1.2em;line-height:2em;" align="center"><strong>类型</strong></p> </td> 
       <td style="border-color:#C0C0C0;" valign="top"> <p style="font-size:1.2em;line-height:2em;" align="center"><strong>含义</strong></p> </td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">undefined</td> 
       <td style="border-color:#C0C0C0;" valign="top">&lt;variable&gt; 没有定义过</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">default</td> 
       <td style="border-color:#C0C0C0;" valign="top">&lt;variable&gt; 是个默认的定义, 比如 CC 变量</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">environment</td> 
       <td style="border-color:#C0C0C0;" valign="top">&lt;variable&gt; 是个环境变量, 并且 make时没有使用 -e 参数</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">file</td> 
       <td style="border-color:#C0C0C0;" valign="top">&lt;variable&gt; 定义在Makefile中</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">command line</td> 
       <td style="border-color:#C0C0C0;" valign="top">&lt;variable&gt; 定义在命令行中</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">override</td> 
       <td style="border-color:#C0C0C0;" valign="top">&lt;variable&gt; 被 override 重新定义过</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">automatic</td> 
       <td style="border-color:#C0C0C0;" valign="top">&lt;variable&gt; 是自动化变量</td> 
      </tr>
     </tbody>
    </table>
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>示例:</strong></p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
val</span>-<span style="color:#0000ff;line-height:1.5;">in</span>-<span style="color:#0000ff;line-height:1.5;">file</span> := test-<span style="color:#0000ff;line-height:1.5;">file</span><span style="line-height:1.5;">
override val</span>-override := test-<span style="line-height:1.5;">override

all:
    @echo $(origin not</span>-define)    # not-<span style="line-height:1.5;">define 没有定义
    @echo $(origin CC)            # CC 是Makefile默认定义的变量
    @echo $(origin PATH)         # PATH 是 bash 环境变量
    @echo $(origin val</span>-<span style="color:#0000ff;line-height:1.5;">in</span>-<span style="color:#0000ff;line-height:1.5;">file</span><span style="line-height:1.5;">)    # 此Makefile中定义的变量
    @echo $(origin val</span>-<span style="color:#0000ff;line-height:1.5;">in</span>-cmd)    # 这个变量会加在 <span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;"> 的参数中
    @echo $(origin val</span>-<span style="line-height:1.5;">override) # 此Makefile中定义的override变量
    @echo $(origin @)             # 自动变量, 具体前面的介绍

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span> val-<span style="color:#0000ff;line-height:1.5;">in</span>-cmd=val-<span style="line-height:1.5;">cmd
undefined
default
environment
</span><span style="color:#0000ff;line-height:1.5;">file</span><span style="line-height:1.5;">
command line
override
automatic</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h4 style="font-size:14px;color:#333333;"><strong>3.4.7 shell</strong></h4> 
    <p style="font-size:1.2em;line-height:2em;"><strong>语法:</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">$(shell &lt;shell command&gt;)</p> 
    <p style="font-size:1.2em;line-height:2em;">它的作用就是执行一个shell命令, 并将shell命令的结果作为函数的返回.</p> 
    <p style="font-size:1.2em;line-height:2em;">作用和 `&lt;shell command&gt;` 一样,&nbsp;<strong>`&nbsp;</strong>是反引号</p> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h4 style="font-size:14px;color:#333333;"><strong>3.4.8 make 控制函数</strong></h4> 
    <p style="font-size:1.2em;line-height:2em;"><strong>产生一个致命错误: $(error &lt;text ...&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 输出错误信息, 停止Makefile的运行</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    $(error there is an error</span>!<span style="line-height:1.5;">)
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">这里不会执行!</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
Makefile:</span><span style="color:#800080;line-height:1.5;">2</span>: *** there is an error!.  Stop.</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <p style="font-size:1.2em;line-height:2em;"><strong>输出警告: $(warning &lt;text ...&gt;)</strong></p> 
    <p style="font-size:1.2em;line-height:2em;">功能: 输出警告信息, Makefile继续运行</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
     <pre><span style="line-height:1.5;"># Makefile 内容
all:
    $(warning there is an warning</span>!<span style="line-height:1.5;">)
    @echo </span><span style="color:#800000;line-height:1.5;">"</span><span style="color:#800000;line-height:1.5;">这里会执行!</span><span style="color:#800000;line-height:1.5;">"</span><span style="line-height:1.5;">

# bash 中执行 </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
$ </span><span style="color:#0000ff;line-height:1.5;">make</span><span style="line-height:1.5;">
Makefile:</span><span style="color:#800080;line-height:1.5;">2</span>: there is an warning!<span style="line-height:1.5;">
这里会执行</span>!</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a style="color:#f24c3e;border:none;" title="复制代码"><img style="border-style:none;" src="https://yqfile.alicdn.com/img_51e409b11aa51c150090697429a953ed.gif" alt="复制代码"></a></span>
     </div> 
    </div> 
    <p style="font-size:1.2em;line-height:2em;">&nbsp;</p> 
    <h3 style="font-size:16px;color:#f33324;border-bottom-width:2px;border-bottom-style:solid;"><strong>3.5 Makefile中一些GNU约定俗成的伪目标</strong></h3> 
    <p style="font-size:1.2em;line-height:2em;">如果有过在Linux上, 从源码安装软件的经历的话, 就会对 make clean, make install 比较熟悉.</p> 
    <p style="font-size:1.2em;line-height:2em;">像 clean, install 这些伪目标, 广为人知, 不用解释就大家知道是什么意思了.</p> 
    <p style="font-size:1.2em;line-height:2em;">下面列举一些常用的伪目标, 如果在自己项目的Makefile合理使用这些伪目标的话, 可以让我们自己的Makefile看起来更专业, 呵呵 :)</p> 
    <table style="margin-left:0px;border-spacing:0px;border-color:#C0C0C0;width:659px;" border="1">
     <tbody>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top"> <p style="font-size:1.2em;line-height:2em;" align="center"><strong>伪目标</strong></p> </td> 
       <td style="border-color:#C0C0C0;" valign="top"> <p style="font-size:1.2em;line-height:2em;" align="center"><strong>含义</strong></p> </td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">all</td> 
       <td style="border-color:#C0C0C0;" valign="top">所有目标的目标，其功能一般是编译所有的目标</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">clean</td> 
       <td style="border-color:#C0C0C0;" valign="top">删除所有被make创建的文件</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">install</td> 
       <td style="border-color:#C0C0C0;" valign="top">安装已编译好的程序，其实就是把目标可执行文件拷贝到指定的目录中去</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">print</td> 
       <td style="border-color:#C0C0C0;" valign="top">列出改变过的源文件</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">tar</td> 
       <td style="border-color:#C0C0C0;" valign="top">把源程序打包备份. 也就是一个tar文件</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">dist</td> 
       <td style="border-color:#C0C0C0;" valign="top">创建一个压缩文件, 一般是把tar文件压成Z文件. 或是gz文件</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">TAGS</td> 
       <td style="border-color:#C0C0C0;" valign="top">更新所有的目标, 以备完整地重编译使用</td> 
      </tr>
      <tr>
       <td style="border-color:#C0C0C0;" valign="top">check 或 test</td> 
       <td style="border-color:#C0C0C0;" valign="top">一般用来测试makefile的流程</td> 
      </tr>
     </tbody>
    </table>
   </div> 
   <div class="clear" style="clear:both;font-family:verdana, 'ms song', '宋体', Arial, '微软雅黑', Helvetica, sans-serif;font-size:12px;line-height:24px;">
    &nbsp;
   </div> 
   <div style="font-family:verdana, 'ms song', '宋体', Arial, '微软雅黑', Helvetica, sans-serif;font-size:12px;line-height:24px;"> 
    <div>
     &nbsp;
    </div> 
    <div style="font-size:9pt;color:#b0b4bf;border-top-width:8px;border-top-style:solid;border-top-color:#f33324;">
     标签:&nbsp;
     <a style="color:#b0b4bf;text-decoration:none;" href="http://www.cnblogs.com/wang_yb/tag/C%E5%AD%A6%E4%B9%A0/" rel="nofollow">C学习</a> 
    </div> 
   </div> 
   <div> 
    <div>
     【作者】
     <a href="http://www.cnblogs.com/sky-heaven/" rel="nofollow">张昺华</a> 
    </div> 
    <div>
     【出处】
     <a href="http://www.cnblogs.com/sky-heaven/" rel="nofollow">http://www.cnblogs.com/sky-heaven/</a> 
    </div> 
    <div>
     【博客园】 
     <a href="http://www.cnblogs.com/sky-heaven/" rel="nofollow">http://www.cnblogs.com/sky-heaven/</a> 
    </div> 
    <div>
     【新浪博客】 
     <a href="http://blog.sina.com.cn/u/2049150530" rel="nofollow">http://blog.sina.com.cn/u/2049150530</a> 
    </div> 
    <div>
     【知乎】 
     <a href="http://www.zhihu.com/people/zhang-bing-hua" rel="nofollow">http://www.zhihu.com/people/zhang-bing-hua</a> 
    </div> 
    <div>
     【我的作品---旋转倒立摆】 
     <a href="http://v.youku.com/v_show/id_XODM5NDAzNjQw.html?spm=a2hzp.8253869.0.0&amp;from=y1.7-2" rel="nofollow">http://v.youku.com/v_show/id_XODM5NDAzNjQw.html?spm=a2hzp.8253869.0.0&amp;from=y1.7-2</a> 
    </div> 
    <div>
     【我的作品---自平衡自动循迹车】 
     <a href="http://v.youku.com/v_show/id_XODM5MzYyNTIw.html?spm=a2hzp.8253869.0.0&amp;from=y1.7-2" rel="nofollow">http://v.youku.com/v_show/id_XODM5MzYyNTIw.html?spm=a2hzp.8253869.0.0&amp;from=y1.7-2</a> 
    </div> 
    <div>
     【新浪微博】 张昺华--sky
    </div> 
    <div>
     【twitter】 @sky2030_
    </div> 
    <div>
     【facebook】 张昺华 zhangbinghua
    </div> 
    <div>
     本文版权归作者和博客园共有，欢迎转载，但未经作者同意必须保留此段声明，且在文章页面明显位置给出原文连接，否则保留追究法律责任的权利.
    </div> 
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
