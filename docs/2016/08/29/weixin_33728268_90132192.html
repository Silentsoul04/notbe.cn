<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>XMOVE3.0手持终端——软件介绍(三):在2KB内存的单片机上实现的的俄罗斯方块 （原创）... « NotBeCN</title>
  <meta name="description" content="                  一. 综述     　　     　　这也是我两年前完成的小项目，它基于我开发的XMOVE动作感应系统平台。     &nbsp;&nbsp; 与XMOVE手持终端相关的介绍文章列表如下:     　　硬件综述: 自制的彩屏手持动作感应终端     　　软件综述:手持终端功能介...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2016/08/29/weixin_33728268_90132192.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">XMOVE3.0手持终端——软件介绍(三):在2KB内存的单片机上实现的的俄罗斯方块 （原创）...</h1>
    <p class="post-meta">Aug 29, 2016</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <div class="blogpost-body"> 
    <h2>一. 综述</h2> 
    <p>　　</p> 
    <p>　　这也是我两年前完成的小项目，它基于我开发的<a href="http://www.cnblogs.com/buptzym/archive/2012/06/15/2417040.html" rel="nofollow">XMOVE动作感应系统平台</a>。</p> 
    <p>&nbsp;&nbsp; 与XMOVE手持终端相关的介绍文章列表如下:</p> 
    <p>　　<a href="http://www.cnblogs.com/buptzym/archive/2012/06/29/2570546.html" rel="nofollow">硬件综述: 自制的彩屏手持动作感应终端</a></p> 
    <p>　　<a href="http://www.cnblogs.com/buptzym/archive/2012/06/29/2570553.html" rel="nofollow">软件综述:手持终端功能介绍</a></p> 
    <p>　　<a href="http://www.cnblogs.com/buptzym/archive/2012/06/22/2557460.html" rel="nofollow">软件介绍(一):精简型嵌入式系统的菜单实现和任务切换</a>　　</p> 
    <p>　　<a href="http://www.cnblogs.com/buptzym/archive/2012/06/26/2564401.html" rel="nofollow">软件介绍(二):在2KB内存单片机上实现的彩屏GUI控件库</a></p> 
    <p>　　<a href="http://www.cnblogs.com/buptzym/archive/2012/06/20/2556918.html" rel="nofollow">软件介绍(三):在2KB内存单片机上实现的俄罗斯方块</a></p> 
    <p>　　<a href="http://www.cnblogs.com/buptzym/archive/2012/06/20/2556052.html" rel="nofollow">软件介绍(四):在2KB内存单片机上实现的超精简五子棋算法</a></p> 
    <p>　　<a href="http://www.cnblogs.com/buptzym/archive/2012/06/23/2559195.html" rel="nofollow">软件介绍(五):在2KB内存的单片机上实现的T9中文输入法</a></p> 
    <p>　　相对于五子棋，俄罗斯方块算法更是满天飞。我的代码还是相对好移植的，看起来也更清晰，方便学弟学妹们做编程小学期时移植。不过要做就要做的有特色：它运行在软硬件由我们独立开发的平台上。以下是截图：</p> 
    <p>　　</p> 
    <p><img alt="" src="https://pic002.cnblogs.com/images/2012/287060/2012062020042138.jpg"></p> 
    <p>　　</p> 
    <p><img alt="" src="https://pic002.cnblogs.com/images/2012/287060/2012062020044577.jpg"></p> 
    <p>　　有如下特点：</p> 
    <ul>
     <li>　　　　跑在独立开发的平台上，平台为MSP430F149，内存2KB,频率8MHz</li> 
     <li>支持体感：可以通过左右倾斜来左右移动方块，还可以上下抖动改变方块形状</li> 
     <li>代码精简，方便移植</li> 
     <li>内存占用率极低</li> 
     <li>支持横屏和竖屏操作</li> 
     <li>支持等级:用户在达到一定分数后，等级会上升，从而方块下落速度变得更快</li> 
    </ul>
    <h2>二. 系统设计</h2> 
    <p>　　我们将问题细化为以下几个方面：</p> 
    <p>　　1. 方块的形状如何存储</p> 
    <p>　　俄罗斯方块总共有19种形状，每种形状都由四个小方块组成。如何高效存储这些方块的形状是个值得思考的问题。</p> 
    <p>　　</p> 
    <p><img alt="" src="https://pic002.cnblogs.com/images/2012/287060/2012062020304663.jpg"></p> 
    <p>&nbsp; 上图介绍了存储方法：</p> 
    <p>　　我们用以下数组保存形状：</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy"><img alt="复制代码" src="http://common.cnblogs.com/images/copycode.gif"></span>
     </div> 
     <pre><span style="color:#0000ff;">const</span> unsigned <span style="color:#0000ff;">char</span>  BoxShape[<span style="color:#800080;">19</span>][<span style="color:#800080;">9</span>]=
{    
    
    { <span style="color:#800080;">1</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">2</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">1</span>  },   
    { <span style="color:#800080;">1</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">2</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">2</span>,<span style="color:#800080;">2</span>  },   
    { <span style="color:#800080;">0</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">2</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">3</span>  },   
    { <span style="color:#800080;">1</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">2</span>,<span style="color:#800080;">0</span>  },   
    
    { <span style="color:#800080;">1</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">2</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">2</span>,<span style="color:#800080;">5</span>  },   
    { <span style="color:#800080;">0</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">2</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">2</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">6</span>  },   
    { <span style="color:#800080;">2</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">2</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">2</span>,<span style="color:#800080;">2</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">2</span>,<span style="color:#800080;">7</span>  },   
    { <span style="color:#800080;">0</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">2</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">4</span>  },   
    
    { <span style="color:#800080;">1</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">2</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">2</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">2</span>,<span style="color:#800080;">2</span>,<span style="color:#800080;">9</span>  },   
    { <span style="color:#800080;">2</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">2</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">10</span> },   
    { <span style="color:#800080;">1</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">2</span>,<span style="color:#800080;">2</span>,<span style="color:#800080;">2</span>,<span style="color:#800080;">11</span> },   
    { <span style="color:#800080;">0</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">2</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">8</span>  },   
    
    { <span style="color:#800080;">0</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">2</span>,<span style="color:#800080;">13</span> },   
    { <span style="color:#800080;">1</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">2</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">12</span> },   
    
    { <span style="color:#800080;">2</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">2</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">2</span>,<span style="color:#800080;">15</span> },   
    { <span style="color:#800080;">0</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">2</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">14</span> },   
    
    { <span style="color:#800080;">1</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">2</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">3</span>,<span style="color:#800080;">17</span> },   
    { <span style="color:#800080;">0</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">2</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">3</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">16</span> },   
    
    { <span style="color:#800080;">1</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">2</span>,<span style="color:#800080;">0</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">2</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">18</span> } 
}; </pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy"><img alt="复制代码" src="http://common.cnblogs.com/images/copycode.gif"></span>
     </div> 
    </div> 
    <p>&nbsp;2. 如何解决各个方块的互相转换的顺序：</p> 
    <p>　　以上的数组已经解决了这一问题，多维数组的最后一位即该形状发生改变后的下一个形状。</p> 
    <p>&nbsp;3. 如何存储当前的画布信息</p> 
    <p>　　</p> 
    <p><img alt="" src="https://pic002.cnblogs.com/images/2012/287060/2012062020555042.jpg"></p> 
    <p>&nbsp;3. 如何解决碰撞问题：</p> 
    <p>　　这大概是算法当中最值得考虑的了，我们用以下四个函数解决：</p> 
    <p>　　所有的函数形参类似，它们的定义分别是：</p> 
    <p>　　XAxi,YAxi：存储当前形状的左上角的点在画布中的实际偏移量。</p> 
    <p>　　Data[][22]：存储的画布数据</p> 
    <p>　　Type:当前形状的ID(即BoxSharp的数组偏移量)</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy"><img alt="复制代码" src="http://common.cnblogs.com/images/copycode.gif"></span>
     </div> 
     <pre>u8 Bottom_Anti(u8 XAxi ,u8 YAxi,u8  Data[][<span style="color:#800080;">22</span>],u8 Type)
{
    u8 i;
    u8 Value=<span style="color:#800080;">1</span>;
    <span style="color:#0000ff;">for</span>(i=<span style="color:#800080;">0</span>;i&lt;<span style="color:#800080;">4</span>;i++)   
    {   
        <span style="color:#0000ff;">if</span>(Data[XAxi+BoxShape[Type][<span style="color:#800080;">2</span>*i]][YAxi+BoxShape[Type][<span style="color:#800080;">2</span>*i+<span style="color:#800080;">1</span>]+<span style="color:#800080;">1</span>]==<span style="color:#800080;">1</span>)   
            Value=<span style="color:#800080;">0</span>;
    }  
    <span style="color:#0000ff;">return</span> Value;     
}
u8 Right_Anti(u8 XAxi ,u8 YAxi,u8  Data[][<span style="color:#800080;">22</span>],u8 Type)
{
    u8 i;
    u8 Value=<span style="color:#800080;">1</span>; 
    
    <span style="color:#0000ff;">for</span>(i=<span style="color:#800080;">0</span>;i&lt;<span style="color:#800080;">4</span>;i++)   
    {   
        <span style="color:#0000ff;">if</span>(Data[XAxi+BoxShape[Type][<span style="color:#800080;">2</span>*i]+<span style="color:#800080;">1</span>][YAxi+BoxShape[Type][<span style="color:#800080;">2</span>*i+<span style="color:#800080;">1</span>]]==<span style="color:#800080;">1</span>)   
            Value=<span style="color:#800080;">0</span>;
    }                 
    <span style="color:#0000ff;">return</span> Value;     
    
}
u8 Lift_Anti(u8 XAxi ,u8 YAxi,u8  Data[][<span style="color:#800080;">22</span>],u8 Type)
{
    u8 i;
    u8 Value=<span style="color:#800080;">1</span>; 
    
    <span style="color:#0000ff;">for</span>(i=<span style="color:#800080;">0</span>;i&lt;<span style="color:#800080;">4</span>;i++)   
    {   
        <span style="color:#0000ff;">if</span>(Data[XAxi+BoxShape[Type][<span style="color:#800080;">2</span>*i]-<span style="color:#800080;">1</span>][YAxi+BoxShape[Type][<span style="color:#800080;">2</span>*i+<span style="color:#800080;">1</span>]]==<span style="color:#800080;">1</span>)   
            Value=<span style="color:#800080;">0</span>;
    }                 
    <span style="color:#0000ff;">return</span> Value;    
    
}
u8 Change_Anti(u8 XAxi ,u8 YAxi,u8  Data[][<span style="color:#800080;">22</span>],u8 *Type)
{
    u8 i;
    u8 Value=<span style="color:#800080;">1</span>; 
    <span style="color:#0000ff;">for</span>(i=<span style="color:#800080;">0</span>;i&lt;<span style="color:#800080;">4</span>;i++)   
    {   
        <span style="color:#0000ff;">if</span>(Data[XAxi+BoxShape[BoxShape[*Type][<span style="color:#800080;">8</span>]][<span style="color:#800080;">2</span>*i]][YAxi+BoxShape[BoxShape[*Type][<span style="color:#800080;">8</span>]][<span style="color:#800080;">2</span>*i+<span style="color:#800080;">1</span>]]==<span style="color:#800080;">1</span>)   
            Value=<span style="color:#800080;">0</span>; <span style="color:#008000;">//</span><span style="color:#008000;">???????????    </span>
    }   
    <span style="color:#0000ff;">return</span> Value;   
    
}</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy"><img alt="复制代码" src="http://common.cnblogs.com/images/copycode.gif"></span>
     </div> 
    </div> 
    <p>&nbsp; &nbsp;算法本身很清晰，分别检测四个方块在改变后的实际位置是否已经有墙壁或方块存在。这个属性用临时变量Value存储，默认为1，如发现碰撞，则赋值为0并返回。&nbsp;</p> 
    <p>4. 如何判断某一行已经被填充满并计分？</p> 
    <p>　　下面是代码，很简单，检测该行的10个方格是不是都填满了，若填满，则加分，并重新刷新LCD</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy"><img alt="复制代码" src="http://common.cnblogs.com/images/copycode.gif"></span>
     </div> 
     <pre><span style="color:#0000ff;">void</span> CheckMark(u8 *mark ,u8  Data[][<span style="color:#800080;">22</span>],u8 dir)
{
    u8 m,t,s;
    u8 tMark=<span style="color:#800080;">0</span>;
    
    <span style="color:#0000ff;">for</span>(m=<span style="color:#800080;">20</span>;m&gt;<span style="color:#800080;">2</span>;m--)  
    {
        tMark=<span style="color:#800080;">0</span>;
        <span style="color:#0000ff;">for</span>(t=<span style="color:#800080;">1</span>;t&lt;<span style="color:#800080;">11</span>;t++)
        {
            <span style="color:#0000ff;">if</span>(Data[t][m]==<span style="color:#800080;">1</span>)
                tMark++;
        }
        <span style="color:#0000ff;">if</span>(tMark==<span style="color:#800080;">10</span>)
        {
            <span style="color:#0000ff;">for</span>(t=m;t&gt;<span style="color:#800080;">2</span>;t--)
            {
                <span style="color:#0000ff;">for</span>(s=<span style="color:#800080;">1</span>;s&lt;<span style="color:#800080;">11</span>;s++)
                {
                    Data[s][t]= Data[s][t-<span style="color:#800080;">1</span>];
                }
            }
            m++;
            TotalRefreshLCD(Data,dir);
            delay_ms(<span style="color:#800080;">200</span>);
            (*mark)++;
        }          
    }
}</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy"><img alt="复制代码" src="http://common.cnblogs.com/images/copycode.gif"></span>
     </div> 
    </div> 
    <p>&nbsp;</p> 
    <p>&nbsp; 5. 如何产生方块？并检查方块已经顶到头？</p> 
    <p>　　代码如下：（值得讨论的是，在单片机中如何产生随机数？）</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy"><img alt="复制代码" src="http://common.cnblogs.com/images/copycode.gif"></span>
     </div> 
     <pre><span style="color:#0000ff;">void</span> GenerateBox(u8 *XAxi ,u8 *YAxi,u8 *Type,u8 Data[][<span style="color:#800080;">22</span>],u8 *FailFlag)
{
    u8 temp;
    *XAxi=<span style="color:#800080;">5</span>;
    *YAxi=<span style="color:#800080;">2</span>;
    *Type=random(<span style="color:#800080;">0</span>,<span style="color:#800080;">18</span>);  <span style="color:#008000;">//</span><span style="color:#008000;">产生随机数</span>
    
    <span style="color:#0000ff;">for</span>(temp=<span style="color:#800080;">2</span>;temp&lt;<span style="color:#800080;">10</span>;temp++)
    {
        <span style="color:#0000ff;">if</span>(Data[temp][<span style="color:#800080;">2</span>]==<span style="color:#800080;">1</span>)   <span style="color:#008000;">//</span><span style="color:#008000;">若在画布上的第3行出现方块，则失败</span>
        {
            *FailFlag=<span style="color:#800080;">2</span>;
            <span style="color:#0000ff;">return</span>;
        }
    }    
    
}</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy"><img alt="复制代码" src="http://common.cnblogs.com/images/copycode.gif"></span>
     </div> 
    </div> 
    <p>&nbsp; &nbsp;好了，这些核心问题我们都讨论完了，下面讨论核心流程。</p> 
    <h2>三 . 核心处理流程</h2> 
    <p>　　若加上全部处理，包括刷新界面，显示欢迎界面，显示失败和分数界面，那么还是很冗长的。这些对于实现核心算法无益，我们也不需要关心。</p> 
    <p>　　下面是流程图：</p> 
    <p>　　</p> 
    <p><img alt="" src="https://pic002.cnblogs.com/images/2012/287060/2012062021203868.jpg"></p> 
    <p>&nbsp; &nbsp;主要操作代码如下，使用了状态机，请注意看OS_func_state==1的流程，这是系统在运行时的主要流程。</p> 
    <p>　　</p> 
    <div class="cnblogs_code"> 
     <img class="code_img_closed" alt="" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif">
     <img class="code_img_opened" alt="" src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif">
     <span class="cnblogs_code_collapse">主要核心操作流程</span> 
     <div class="cnblogs_code_hide">
      <pre>u8 TerisBrick()
{
    u8 grade=<span style="color:#800080;">0</span>,mark=<span style="color:#800080;">0</span>;
    u8 GameGUIData[<span style="color:#800080;">12</span>][<span style="color:#800080;">22</span>];
    u8 KeyTemp;
    u8 XAxi,YAxi,Type,OriGrade=<span style="color:#800080;">0</span>;

        TickControlEN=<span style="color:#800080;">1</span>;
    u8* temp[<span style="color:#800080;">2</span>];
    u8 dir=<span style="color:#800080;">0</span>;
    
    temp[<span style="color:#800080;">0</span>]=<span style="color:#800000;">"</span><span style="color:#800000;">竖版游戏模式</span><span style="color:#800000;">"</span>;
    temp[<span style="color:#800080;">1</span>]=<span style="color:#800000;">"</span><span style="color:#800000;">横版游戏模式</span><span style="color:#800000;">"</span>;
         <span style="color:#0000ff;">if</span>(AccControlEN==<span style="color:#800080;">1</span>)
                        {
                          
                            ADXL345Init(<span style="color:#800080;">0</span>);
                        }
      
    
    
    <span style="color:#0000ff;">while</span>(OS_func_state&lt;<span style="color:#800080;">10</span>)
    {
        <span style="color:#0000ff;">switch</span>(OS_func_state)
        {
        <span style="color:#0000ff;">case</span> <span style="color:#800080;">0</span>:
            GUI_GameOpen(<span style="color:#800000;">"</span><span style="color:#800000;">俄罗斯方块</span><span style="color:#800000;">"</span>,&amp;grade);
            
            OriGrade=grade;
            dir=ListGUI(temp,<span style="color:#800000;">"</span><span style="color:#800000;">选择游戏方向</span><span style="color:#800000;">"</span>,<span style="color:#800080;">2</span>);  <span style="color:#008000;">//</span><span style="color:#008000;">dir 表征运动方向，0：横版，1竖版</span>
            dir--;
            Clear_Screen();
            OS_func_state=<span style="color:#800080;">1</span>;
            
            <span style="color:#0000ff;">break</span>;
        <span style="color:#0000ff;">case</span> <span style="color:#800080;">1</span>:
            
            TerisBrickInit(GameGUIData,<span style="color:#800080;">12</span>,<span style="color:#800080;">22</span>);
            _EINT();
            SetPaintMode(<span style="color:#800080;">1</span>,COLOR_Black);
            <span style="color:#0000ff;">if</span>(dir==<span style="color:#800080;">0</span>)
            {
                Rectangle(<span style="color:#800080;">30</span>,<span style="color:#800080;">22</span>,<span style="color:#800080;">110</span>,<span style="color:#800080;">190</span>,<span style="color:#800080;">1</span>);
                
            }
            <span style="color:#0000ff;">else</span>
                Rectangle(<span style="color:#800080;">22</span>,<span style="color:#800080;">32</span>,<span style="color:#800080;">232</span>,<span style="color:#800080;">132</span>,<span style="color:#800080;">1</span>);  
            PutString(<span style="color:#800080;">275</span>,<span style="color:#800080;">70</span>,<span style="color:#800000;">"</span><span style="color:#800000;">grade</span><span style="color:#800000;">"</span>);
            PutString(<span style="color:#800080;">275</span>,<span style="color:#800080;">110</span>,<span style="color:#800000;">"</span><span style="color:#800000;">mark</span><span style="color:#800000;">"</span>);
            Lcd_disp(<span style="color:#800080;">2</span>,<span style="color:#800080;">200</span>,<span style="color:#800000;">"</span><span style="color:#800000;">左右方向键移动，下键加速，上改变形状</span><span style="color:#800000;">"</span>);  
            <span style="color:#0000ff;">while</span>(OS_func_state==<span style="color:#800080;">1</span>)
            { 
                          back_light=back_light_set;
                          FontSetTotal(COLOR_Black);
            
            NumberDis(<span style="color:#800080;">275</span>,<span style="color:#800080;">90</span>,grade,<span style="color:#800080;">3</span>,<span style="color:#800080;">1</span>);
            NumberDis(<span style="color:#800080;">275</span>,<span style="color:#800080;">130</span>,mark,<span style="color:#800080;">3</span>,<span style="color:#800080;">1</span>);
            GenerateBox(&amp;XAxi,&amp;YAxi,&amp;Type,GameGUIData,&amp;OS_func_state);
            <span style="color:#0000ff;">while</span>(Bottom_Anti(XAxi,YAxi,GameGUIData,Type))
            {       key_data=KEYNULL;
            ShowBoxGUI(XAxi,YAxi,Type,<span style="color:#800080;">1</span>,dir);    
                        <span style="color:#0000ff;">if</span>(AccControlEN==<span style="color:#800080;">1</span>)
                        {
                          ADXL345ReadData();
                          ADXL345ShowData(<span style="color:#800080;">0</span>);
                          L3G4200DReadData();
                          L3G4200DShowData();
                        }
            <span style="color:#0000ff;">if</span>(KeyTemp==KEYDOWN_DOWN)
                delay_ms(<span style="color:#800080;">150</span>);
            <span style="color:#0000ff;">else</span> 
                delay_ms(<span style="color:#800080;">500</span>-<span style="color:#800080;">70</span>*grade);
            
            ShowBoxGUI(XAxi,YAxi,Type,<span style="color:#800080;">0</span>,dir);    
            YAxi++;
            <span style="color:#0000ff;">if</span>(AccControlEN==<span style="color:#800080;">1</span>)
                        {
                              <span style="color:#0000ff;">if</span>(dir==<span style="color:#800080;">0</span>)  <span style="color:#008000;">//</span><span style="color:#008000;">横版</span>
                          {
                            <span style="color:#0000ff;">if</span>(AccX&gt;<span style="color:#800080;">3</span>)
                              key_data=KEYLEFT_UP    ;
                             <span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span>(AccX&lt;-<span style="color:#800080;">3</span>)
                              key_data=KEYRIGHT_UP  ;
                             <span style="color:#0000ff;">if</span>(GyroY&gt;<span style="color:#800080;">400</span>||GyroY&lt;-<span style="color:#800080;">400</span>)
                             {
                               key_data=KEYUP_UP  ;
                                 delay_ms(<span style="color:#800080;">200</span>);
                             }
                               
                          }
                          <span style="color:#0000ff;">else</span>
                          {
                             <span style="color:#0000ff;">if</span>(AccY&gt;<span style="color:#800080;">3</span>)
                              key_data=KEYLEFT_UP    ;
                             <span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span>(AccY&lt;-<span style="color:#800080;">3</span>)
                              key_data=KEYRIGHT_UP  ;
                               <span style="color:#0000ff;">if</span>(GyroX&gt;<span style="color:#800080;">400</span>||GyroX&lt;-<span style="color:#800080;">400</span>)
                               {
                               key_data=KEYUP_UP  ;
                               delay_ms(<span style="color:#800080;">200</span>);
                               }
                            
                          }
                        }
            <span style="color:#0000ff;">switch</span>(key_data)
            {
            <span style="color:#0000ff;">case</span> KEYLEFT_UP    :
                <span style="color:#0000ff;">if</span>(Lift_Anti(XAxi,YAxi,GameGUIData,Type)!=<span style="color:#800080;">0</span>)
                    XAxi--;
                <span style="color:#0000ff;">break</span>;    
            <span style="color:#0000ff;">case</span> KEYRIGHT_UP  :
                
                <span style="color:#0000ff;">if</span>(Right_Anti(XAxi,YAxi,GameGUIData,Type)!=<span style="color:#800080;">0</span>)
                    XAxi++;
                
                <span style="color:#0000ff;">break</span>;
            <span style="color:#0000ff;">case</span> KEYUP_UP  :
                <span style="color:#0000ff;">if</span>(Change_Anti(XAxi,YAxi,GameGUIData,&amp;Type)!=<span style="color:#800080;">0</span>)
                    Type=BoxShape[Type][<span style="color:#800080;">8</span>];
                <span style="color:#0000ff;">break</span>;
            <span style="color:#0000ff;">case</span> KEYDOWN_UP  :
                
                <span style="color:#0000ff;">if</span>(Bottom_Anti(XAxi,YAxi,GameGUIData,Type))
                    YAxi++;
                <span style="color:#0000ff;">break</span>;
                
            <span style="color:#0000ff;">case</span> KEYCANCEL_UP    :
                <span style="color:#0000ff;">if</span>(MessageGui(<span style="color:#800000;">"</span><span style="color:#800000;">提示信息</span><span style="color:#800000;">"</span>,<span style="color:#800000;">"</span><span style="color:#800000;">是否跳出?</span><span style="color:#800000;">"</span>,<span style="color:#800080;">1</span>)==<span style="color:#800080;">1</span>)
                {
                                         TickControlEN=<span style="color:#800080;">1</span>;
                    OS_func_state=<span style="color:#800080;">2</span>;
                    <span style="color:#0000ff;">return</span> <span style="color:#800080;">1</span>;
                }
                <span style="color:#0000ff;">else</span>
                    TotalRefreshLCD(GameGUIData,dir);
                <span style="color:#0000ff;">break</span>;
                
            }
            KeyTemp=key_data;
                        key_data=KEYNULL;
            }
            
            <span style="color:#0000ff;">for</span>(u8 t=<span style="color:#800080;">0</span>;t&lt;<span style="color:#800080;">4</span>;t++)
            {
                GameGUIData[XAxi+BoxShape[Type][<span style="color:#800080;">2</span>*t]][YAxi+BoxShape[Type][<span style="color:#800080;">2</span>*t+<span style="color:#800080;">1</span>]]=<span style="color:#800080;">1</span>;
            }
            ShowBoxGUI(XAxi,YAxi,Type,<span style="color:#800080;">1</span>,dir);    
            CheckMark(&amp;mark,GameGUIData,dir);
            grade=OriGrade+mark/<span style="color:#800080;">10</span>;
            
            } 
            
            <span style="color:#0000ff;">break</span>;
        <span style="color:#0000ff;">case</span> <span style="color:#800080;">2</span>:
            <span style="color:#0000ff;">if</span>(mark==<span style="color:#800080;">0</span>)
                MessageGui(<span style="color:#800000;">"</span><span style="color:#800000;">超级菜鸟</span><span style="color:#800000;">"</span>,<span style="color:#800000;">"</span><span style="color:#800000;">学习下游戏规则</span><span style="color:#800000;">"</span>,<span style="color:#800080;">0</span>);
            <span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span>(mark&gt;<span style="color:#800080;">0</span>&amp;&amp;mark&lt;<span style="color:#800080;">10</span>)
                MessageGui(<span style="color:#800000;">"</span><span style="color:#800000;">初学者</span><span style="color:#800000;">"</span>,<span style="color:#800000;">"</span><span style="color:#800000;">你还要加油哦</span><span style="color:#800000;">"</span>,<span style="color:#800080;">0</span>);
            <span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span>(mark&gt;<span style="color:#800080;">9</span>&amp;&amp;mark&lt;<span style="color:#800080;">20</span>)
                MessageGui(<span style="color:#800000;">"</span><span style="color:#800000;">中级水平</span><span style="color:#800000;">"</span>,<span style="color:#800000;">"</span><span style="color:#800000;">哥们你很牛逼</span><span style="color:#800000;">"</span>,<span style="color:#800080;">0</span>);
            <span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span>(mark&gt;<span style="color:#800080;">19</span>&amp;&amp;mark&lt;<span style="color:#800080;">30</span>)
                MessageGui(<span style="color:#800000;">"</span><span style="color:#800000;">高级水平</span><span style="color:#800000;">"</span>,<span style="color:#800000;">"</span><span style="color:#800000;">无敌哥！膜拜</span><span style="color:#800000;">"</span>,<span style="color:#800080;">0</span>);
            <span style="color:#0000ff;">else</span>
                MessageGui(<span style="color:#800000;">"</span><span style="color:#800000;">超级无敌</span><span style="color:#800000;">"</span>,<span style="color:#800000;">"</span><span style="color:#800000;">不是一般人！！</span><span style="color:#800000;">"</span>,<span style="color:#800080;">0</span>);
            <span style="color:#0000ff;">if</span>( MessageGui(<span style="color:#800000;">"</span><span style="color:#800000;">提示信息</span><span style="color:#800000;">"</span>,<span style="color:#800000;">"</span><span style="color:#800000;">是否继续</span><span style="color:#800000;">"</span>,<span style="color:#800080;">1</span>)==<span style="color:#800080;">1</span>)
                OS_func_state=<span style="color:#800080;">0</span>;
            <span style="color:#0000ff;">else</span> 
            {
                          TickControlEN=<span style="color:#800080;">1</span>;
                OSTaskClose();
                
            }
            <span style="color:#0000ff;">break</span>;
            
        }
        }
        
        <span style="color:#0000ff;">return</span> <span style="color:#800080;">1</span>;
        
        
        
}</pre>
     </div> 
    </div> 
    <h2>四. 其他模块</h2> 
    <p>　　其他模块主要包括界面显示，分数显示，方块显示和键盘输入等。考虑到和平台相关，因此不具备移植性，贴在下面仅供参考。</p> 
    <p>　　1. 初始化界面绘图画布数组，主要是建立“围栏”</p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy"><img alt="复制代码" src="http://common.cnblogs.com/images/copycode.gif"></span>
     </div> 
     <pre><span style="color:#0000ff;">void</span> TerisBrickInit(u8  Data[][<span style="color:#800080;">22</span>],u8 i,u8 j)
{
    
    u8  a,b;
    <span style="color:#0000ff;">for</span>(b=<span style="color:#800080;">0</span>;b&lt;i;b++)
    {
        <span style="color:#0000ff;">for</span>(a=<span style="color:#800080;">0</span>;a&lt;j;a++)
            Data[b][a]=<span style="color:#800080;">0</span>;
    }
    <span style="color:#0000ff;">for</span>(b=<span style="color:#800080;">0</span>;b&lt;j;b++)
    {
        Data[<span style="color:#800080;">0</span>][b]=<span style="color:#800080;">1</span>;
        Data[<span style="color:#800080;">11</span>][b]=<span style="color:#800080;">1</span>;
    }
    <span style="color:#0000ff;">for</span>(a=<span style="color:#800080;">0</span>;a&lt;i;a++)
    {
        Data[a][<span style="color:#800080;">0</span>]=<span style="color:#800080;">1</span>;
        Data[a][<span style="color:#800080;">21</span>]=<span style="color:#800080;">1</span>;
    }
    
    
}</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy"><img alt="复制代码" src="http://common.cnblogs.com/images/copycode.gif"></span>
     </div> 
    </div> 
    <p>&nbsp; &nbsp;2. 绘制方块和刷新界面</p> 
    <div class="cnblogs_code"> 
     <img class="code_img_closed" alt="" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif">
     <img class="code_img_opened" alt="" src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif">
     <span class="cnblogs_code_collapse">绘制界面和方块</span> 
     <div class="cnblogs_code_hide">
      <pre><span style="color:#0000ff;">void</span>  ControlBox(u8 x,u8 y,u8 mood,u8 dir)
{
    <span style="color:#008000;">//</span><span style="color:#008000;">dir指出方向，0,为横版，1为竖版</span>
    <span style="color:#0000ff;">if</span>(mood==<span style="color:#800080;">1</span>)
    {       SetPaintMode(<span style="color:#800080;">0</span>,COLOR_Black);
    <span style="color:#0000ff;">if</span>(dir==<span style="color:#800080;">1</span>) 
        Rectangle(<span style="color:#800080;">22</span>+<span style="color:#800080;">10</span>*y,<span style="color:#800080;">22</span>+<span style="color:#800080;">10</span>*x,<span style="color:#800080;">32</span>+<span style="color:#800080;">10</span>*y,<span style="color:#800080;">32</span>+<span style="color:#800080;">10</span>*x,<span style="color:#800080;">1</span>);
    <span style="color:#0000ff;">else</span> 
        
        Rectangle(<span style="color:#800080;">22</span>+<span style="color:#800080;">8</span>*x,<span style="color:#800080;">22</span>+<span style="color:#800080;">8</span>*y,<span style="color:#800080;">30</span>+<span style="color:#800080;">8</span>*x,<span style="color:#800080;">30</span>+<span style="color:#800080;">8</span>*y,<span style="color:#800080;">1</span>);
    SetPaintMode(<span style="color:#800080;">0</span>,COLOR_Red);
    <span style="color:#0000ff;">if</span>(dir==<span style="color:#800080;">1</span>) 
        Rectangle(<span style="color:#800080;">23</span>+<span style="color:#800080;">10</span>*y,<span style="color:#800080;">23</span>+<span style="color:#800080;">10</span>*x,<span style="color:#800080;">31</span>+<span style="color:#800080;">10</span>*y,<span style="color:#800080;">31</span>+<span style="color:#800080;">10</span>*x,<span style="color:#800080;">1</span>);
    <span style="color:#0000ff;">else</span>
        Rectangle(<span style="color:#800080;">23</span>+<span style="color:#800080;">8</span>*x,<span style="color:#800080;">23</span>+<span style="color:#800080;">8</span>*y,<span style="color:#800080;">29</span>+<span style="color:#800080;">8</span>*x,<span style="color:#800080;">29</span>+<span style="color:#800080;">8</span>*y,<span style="color:#800080;">1</span>);
    }
    
    <span style="color:#0000ff;">else</span>
    {
        SetPaintMode(<span style="color:#800080;">1</span>,COLOR_Black);
        <span style="color:#0000ff;">if</span>(dir==<span style="color:#800080;">1</span>) 
            
            Rectangle(<span style="color:#800080;">22</span>+<span style="color:#800080;">10</span>*y,<span style="color:#800080;">22</span>+<span style="color:#800080;">10</span>*x,<span style="color:#800080;">32</span>+<span style="color:#800080;">10</span>*y,<span style="color:#800080;">32</span>+<span style="color:#800080;">10</span>*x,<span style="color:#800080;">1</span>);
        <span style="color:#0000ff;">else</span>
            Rectangle(<span style="color:#800080;">22</span>+<span style="color:#800080;">8</span>*x,<span style="color:#800080;">22</span>+<span style="color:#800080;">8</span>*y,<span style="color:#800080;">30</span>+<span style="color:#800080;">8</span>*x,<span style="color:#800080;">30</span>+<span style="color:#800080;">8</span>*y,<span style="color:#800080;">1</span>);
        
    }
    
}
<span style="color:#0000ff;">void</span> TotalRefreshLCD(u8  Data[][<span style="color:#800080;">22</span>],u8 dir)
{
    u8 t,s;
    SetPaintMode(<span style="color:#800080;">1</span>,COLOR_Black);
    <span style="color:#0000ff;">if</span>(dir==<span style="color:#800080;">0</span>)
        
        Rectangle(<span style="color:#800080;">30</span>,<span style="color:#800080;">22</span>,<span style="color:#800080;">110</span>,<span style="color:#800080;">190</span>,<span style="color:#800080;">1</span>);
    
    
    <span style="color:#0000ff;">else</span>
        Rectangle(<span style="color:#800080;">22</span>,<span style="color:#800080;">32</span>,<span style="color:#800080;">232</span>,<span style="color:#800080;">132</span>,<span style="color:#800080;">1</span>);  
    
    
    <span style="color:#0000ff;">for</span>(t=<span style="color:#800080;">1</span>;t&lt;<span style="color:#800080;">11</span>;t++)
    {
        <span style="color:#0000ff;">for</span>(s=<span style="color:#800080;">2</span>;s&lt;<span style="color:#800080;">21</span>;s++)
        {
            <span style="color:#0000ff;">if</span>(Data[t][s]==<span style="color:#800080;">1</span>)
                ControlBox(t,s,<span style="color:#800080;">1</span>,dir);
        }
    }
    
}</pre>
     </div> 
    </div> 
    <h2>五. 总结</h2> 
    <p>　　本科一年级时候写过一个俄罗斯方块，代码冗长可读性极差，各种判断和奇怪的变量，最后还有一堆BUG。 这套代码算是对当时愚蠢的我的补偿吧，其实写的也不怎么地。比如，画布大小必须是22*12么？为什么不可变？</p> 
    <p>　　蛮想把我开发的这套系统拿出来给大家分享的，可惜自制硬件就是这样：给自己带来了快乐，给别人带来了开发和移植的麻烦。</p> 
    <p>　　说多了，呵呵</p> 
    <p>　　有任何问题，欢迎随时交流。</p> 
   </div> 
   <div> 
    <div> 
     <p style="border-top:#e0e0e0 1px dashed;border-right:#e0e0e0 1px dashed;border-bottom:#e0e0e0 1px dashed;border-left:#e0e0e0 1px dashed;background:#e5f1f4 url(&quot;https://images.cnblogs.com/cnblogs_com/lloydsheng/239039/o_copyright.gif&quot;) no-repeat 1% 50%;font-family:'微软雅黑';font-size:11px;"><br> 作者：<a href="http://www.cnblogs.com/buptzym/" rel="nofollow">热情的沙漠</a> <br> 出处：<a href="http://www.cnblogs.com/buptzym/" rel="nofollow">http://www.cnblogs.com/buptzym/</a> <br> 本文版权归作者和博客园共有，欢迎转载，但未经作者同意必须保留此段声明，且在文章页面明显位置给出原文连接，否则保留追究法律责任的权利。 <br></p> 
    </div> 
   </div> 
   <div class="clear"></div> 
   <div> 
    <div></div> 
    <div>
     标签: 
     <a href="http://www.cnblogs.com/buptzym/tag/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%BC%80%E5%8F%91/" rel="nofollow">嵌入式开发</a>, 
     <a href="http://www.cnblogs.com/buptzym/tag/XMove/" rel="nofollow">XMove</a>, 
     <a href="http://www.cnblogs.com/buptzym/tag/%E4%BF%84%E7%BD%97%E6%96%AF%E6%96%B9%E5%9D%97/" rel="nofollow">俄罗斯方块</a> 
    </div> 
    <div>
     <br>
    </div> 
    <div>
     本文转自FerventDesert博客园博客，原文链接：http://www.cnblogs.com/buptzym/archive/2012/06/20/2556918.html，如需转载请自行联系原作者
     <br>
    </div> 
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
