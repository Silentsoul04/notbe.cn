<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>运行灵活网页布局的示例程序 « NotBeCN</title>
  <meta name="description" content="                      相信现在使用灵活网页布局的童鞋们越来越多了，也许你注意到了在安装光盘上提供了一下扩展fusion的示例代码，并且在wikihelp文档上提供了如何使用这些例子的方法。可惜这些示例和文档稍微有点过时，需要更新一下，我快速的对前两个例子试了一下，发现一些问题，下面是我的测试...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2016/09/13/weixin_33847182_90121788.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">运行灵活网页布局的示例程序</h1>
    <p class="post-meta">Sep 13, 2016</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <h1 style="font-size:14.7px;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;"><br></h1> 
   <div class="blogpost-body" style="color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13.3333px;"> 
    <p style="line-height:1.5;">相信现在使用灵活网页布局的童鞋们越来越多了，也许你注意到了在安装光盘上提供了一下扩展fusion的示例代码，并且在wikihelp文档上提供了如何使用这些例子的方法。可惜这些示例和文档稍微有点过时，需要更新一下，我快速的对前两个例子试了一下，发现一些问题，下面是我的测试过程，也许对你有帮助。现在在忙于devday，后面几个还没时间研究，如果你感兴趣，可以查看相关源代码。</p> 
    <p style="line-height:1.5;">&nbsp;</p> 
    <p style="line-height:1.5;">By&nbsp;<a href="http://adndevblog.typepad.com/infrastructure/daniel-du.html" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;">Daniel Du</a></p> 
    <p style="line-height:1.5;">I am following the “Flexible Web Layouts Examples” on MapServer 2013&nbsp;<a href="http://wikihelp.autodesk.com/Infr._Map_Server/enu/2013/Help/0005-Develope0/0105-Flexible105" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;">wikihelp</a>, and found that this wiki page is a little out-dated. I do not have time to fix them all, so I am just trying to blog how I make some of the examples running. In case you don’t know, the source code of these examples is available on the installation DVD in Samples\FlexibleWebLayoutsSamples.</p> 
    <p style="line-height:1.5;">&nbsp;</p> 
    <p style="line-height:1.5;">The zip file, FlexibleWebLayoutsExamples.zip, contains source files. Unzip this into the<em>installDir</em>\WebServerExtensions\www folder with “Use folder names” selected in WinZip. It installs the following files:</p> 
    <p style="line-height:1.5;"><a name="WS1A9193826455F5FF-6507591011913E8F4B8-470D"></a></p> 
    <ul style="list-style:none;font-size:12px;">
     <li style="list-style-type:disc;">fusion\templates\mapguide\examples\*</li> 
     <li style="list-style-type:disc;">fusion\widgets\Example*.js</li> 
     <li style="list-style-type:disc;">fusion\widgets\widgetinfo\example*.xml</li> 
     <li style="list-style-type:disc;">fusion\widgets\example*\*</li> 
    </ul>
    <p style="line-height:1.5;">&nbsp;</p> 
    <p style="line-height:1.5;">Run Example 1:</p> 
    <p style="line-height:1.5;">Example 1 demos how to create the simplest widget. After installing the code, you will find a new widget name “Example1” available in flexible web layout editor.</p> 
    <p style="line-height:1.5;">1. Create a new flexible web layout in Infrastructure Studio 2013 by c, select a template, I am using slate. Of cause, please make sure MapServer is running first.</p> 
    <p style="line-height:1.5;">2. Assign a map for the Map Tab, I am using the Sheboygan dataset.</p> 
    <p style="line-height:1.5;"><a href="http://images.cnblogs.com/cnblogs_com/junqilian/201211/201211210856311726.png" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;"><img title="image" alt="image" src="https://images.cnblogs.com/cnblogs_com/junqilian/201211/201211210856365220.png" width="415" height="158" style="border:0px;background-image:none;"></a></p> 
    <p style="line-height:1.5;">3. I would like to add my test widget into “Toobar(Main Menu)”, you can also put it into other menu if you’d like to, so I switch to “Toobar(Main Menu)” tab, and click “New” in components available in this layout section:</p> 
    <p style="line-height:1.5;"><a href="http://images.cnblogs.com/cnblogs_com/junqilian/201211/20121121085649510.png" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;"><img title="image" alt="image" src="https://images.cnblogs.com/cnblogs_com/junqilian/201211/201211210856592962.png" width="442" height="114" style="border:0px;background-image:none;"></a></p> 
    <p style="line-height:1.5;">4. You should see a mater type names as “Example1”, if not, try refresh. If it does not appear even after refreshing, then your probably made some mistakes at installation, a common problem is to install the JS/xml files into wrong folder, so please make sure you have same folder structure with the existing widgets. Select “Example1” as master type then click OK button.</p> 
    <p style="line-height:1.5;"><a href="http://images.cnblogs.com/cnblogs_com/junqilian/201211/201211210857094019.png" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;"><img title="image" alt="image" src="https://images.cnblogs.com/cnblogs_com/junqilian/201211/201211210857198206.png" width="433" height="315" style="border:0px;background-image:none;"></a></p> 
    <p style="line-height:1.5;">5. Now I have a new component in the flexible web layout, you can change the ID as you will, I am using the default ID “Example1”:</p> 
    <p style="line-height:1.5;"><a href="http://images.cnblogs.com/cnblogs_com/junqilian/201211/20121121085746457.png" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;"><img title="image" alt="image" src="https://images.cnblogs.com/cnblogs_com/junqilian/201211/201211210857527213.png" width="443" height="213" style="border:0px;background-image:none;"></a></p> 
    <p style="line-height:1.5;">6. Add this component into layout UI, dragging “Example1” into the window left side, a new button is created in main menu toolbar:</p> 
    <p style="line-height:1.5;"><a href="http://images.cnblogs.com/cnblogs_com/junqilian/201211/201211210858124659.png" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;"><img title="image" alt="image" src="https://images.cnblogs.com/cnblogs_com/junqilian/201211/201211210858218648.png" width="451" height="146" style="border:0px;background-image:none;"></a></p> 
    <p style="line-height:1.5;">7. view in browser, and click “Example1” button in main menu toolbar, the “hello word” message shows up:</p> 
    <p style="line-height:1.5;"><a href="http://images.cnblogs.com/cnblogs_com/junqilian/201211/201211210858403203.png" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;"><img title="image" alt="image" src="https://images.cnblogs.com/cnblogs_com/junqilian/201211/201211210858467701.png" width="460" height="205" style="border:0px;background-image:none;"></a></p> 
    <p style="line-height:1.5;">&nbsp;</p> 
    <p style="line-height:1.5;">Running Example2</p> 
    <p style="line-height:1.5;">Example 1 is pretty simple, I will move next to Example2. Example 2 is a widget that is designed to be called as a command from a menu, it output the information of selected feature. It requires Mozilla<sup>®</sup>&nbsp;Firefox<sup>®</sup>&nbsp;3.6 or higher and the Firebug extension because it writes to the&nbsp;<strong>Firebug console</strong>.</p> 
    <p style="line-height:1.5;">I am following the same process as example1 to add a new button into main menu toolbar, and browse it in Firefox this time. To run this example, I need to select some features first, then click&nbsp; the “Example2 ” button.</p> 
    <p style="line-height:1.5;">Oops! I got an error message:</p> 
    <p style="line-height:1.5;"><a href="http://images.cnblogs.com/cnblogs_com/junqilian/201211/201211210859417940.png" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;"><img title="image" alt="image" src="https://images.cnblogs.com/cnblogs_com/junqilian/201211/20121121085947270.png" width="473" height="158" style="border:0px;background-image:none;"></a></p> 
    <p style="line-height:1.5;"><font>Fusion Error:&nbsp;<br> WARNING: Exception occurred in AJAX callback.&nbsp;<br> Message:&nbsp;<font><strong>theMap.getMapName is not a function</strong></font>&nbsp;<br> Location:&nbsp;</font><a href="http://localhost/mapserver2013/fusion/widgets/Example2.js" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;"><font>http://localhost/mapserver2013/fusion/widgets/Example2.js</font></a><font>&nbsp;(47)&nbsp;<br> Response: {"layers":["Parcels"],"extents":{"minx":-87.739602320342,"miny":43.765720296224,"maxx":-87.737804056497,"maxy":43.766709329904},"Parcels":{"propertynames":["RLDESCR1","RTYPE","RACRE","RLOT","RNAME","RLDESCR2","RLDESCR3","RBILAD","RSQFT","RLDESCR4"],"propertyvalues":["Description1","Zone","Acreage","Lot Dimensions","Owner","Description2","Description3","Billing Address","Lot Size (SqFt)","Description4"],"propertytypes":[9,9,9,9,9,9,9,9,7,9],"metadatanames":["dimension","bbox","center","area","length"],"numelements":15,"values":[["BRAND SUBD","RES","0.17","60X124","THIEME, ELAINE M","LOT 11 BLK 3","","2008 N. 25TH ST.","7440",""],["BRAND SUBD","RES","0.25","80X135","RAFFEL, JAMES E","LOT 3 &amp;amp; THE N 20\\' OF LOT 4","BLK 2","2006 N. 24TH ST.","10800",""],["BRAND SUBD","RES","0.25","80X135","FUERST, ROBERT O","N 30\\' OF LOT 23 &amp;amp; S 50\\' OF","LOT 24 BLK 2","2005 N. 25TH ST.","10800",""],["BRAND SUBD","RES","0.17","60X124","TUPPER, ANSEL JR","LOT 12 BLK 3","","2002 N. 25TH ST.","7440",""],["BRAND SUBD","RES","0.22","70X135","YANG, SHOUA PAO","THE S 40\\' OF LOT 4 &amp;amp; THE N","30\\' OF LOT 5 BLK 2","2002 N. 24TH ST.","9450",""],["BRAND SUBD","RES","0.23","75X135","RAKOW, GLEN J.","N 45\\' OF LOT 22 &amp;amp; S 30\\' OF","LOT 23 BLK 2","1919 N. 25TH ST.","10125",""],["BRAND SUBD","RES","0.17","60X124","MATELKO, RICHARD A.","LOT 13 BLK 3","","1918 N. 25TH ST.","7440",""],["BRAND SUBD","RES","0.28","90X135","CASTELLAN, MARY","THE S 30\\' OF LOT 5 &amp;amp; ALL OF","LOT 6 BLK 2","1914 N. 24TH ST.","12150",""],["BRAND SUBD","RES","0.23","75X135","ROERDINK, JAMES P.","LOT 21 &amp;amp; S 15\\' OF LOT 22 BLK","2","1913 N. 25TH ST.","10125",""],["BRAND SUBD","RES","0.22","75X125","PIONTKOWSKI, JOHN A.","S 45\\' OF LOT 15 &amp;amp; N 30\\' OF","LOT 16 BLK 3","1904 N. 25TH ST.","9375",""],["BRAND SUBD","RES","0.19","60X135","HAMER, MARGARET J","LOT 19 BLK 2","","1849 N. 25TH ST.","8100",""],["BRAND SUBD","RES","0.19","60X135","BOPHA, DAVID &amp;amp; MANYP","LOT 8 BLK 2","","1850 N. 24TH ST.","8100",""],["BRAND SUBD","RES","0.22","75X125","HORWITZ, DONALD","LOT 14 &amp;amp; THE N 15\\' OF LOT 15","BLK 3","1912 N. 25TH ST.","9375",""],["BRAND SUBD","RES","0.19","60X135","ABRAHAM, ROBERT A.","LOT 20 BLK 2","","1905 N. 25TH ST.","8100",""],["BRAND SUBD","RES","0.19","60X135","LAMB, DANIEL F","LOT 7 BLK 2","","1906 N. 24TH ST.","8100",""]],"metadata":[["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""]]}}</font></p> 
    <p style="line-height:1.5;">&nbsp;</p> 
    <p style="line-height:1.5;">You may get scared with such a long error message at first glance, To be frankly, I got a high blood pressure as well when I saw this first time&nbsp;<img class="wlEmoticon wlEmoticon-smile" alt="Smile" src="https://images.cnblogs.com/cnblogs_com/junqilian/201211/201211210859515998.png" style="border:0px none;">. But let’s clam down and looked into the error again, I highlighted and marked it as bold. Message:&nbsp;<font><strong>theMap.getMapName is not a function</strong></font>&nbsp;, it seems that theMap object does not have a method “getMapName”. So I looked into the source code of map widget, which is C:\Program Files\Autodesk\Autodesk Infrastructure Web Server Extension 2013\www\fusion\lib\Map.js by default. Yes, that’s the reason, getMapName method is missing, so I went ahead to add this method as below, around line 1247:</p> 
    <p style="line-height:1.5;">&nbsp;</p> 
    <p style="line-height:1.5;">//Added by Daniel 2012/11/01&nbsp;<br> getMapName: function() {&nbsp;<br> &nbsp;&nbsp;&nbsp; return this.aMaps[0]._sMapname;&nbsp;<br> },</p> 
    <p style="line-height:1.5;">&nbsp;</p> 
    <p style="line-height:1.5;">It is pretty simple one.&nbsp;</p> 
    <p style="line-height:1.5;">As I said earlier, I am using Slate as my template when testing these examples, and the slate template is referring to a compressed single file of fusion library. To apply my changes, I need to edit the JavaScript reference in C:\Program Files\Autodesk\Autodesk Infrastructure Web Server Extension 2013\www\fusion\templates\mapguide\slate\index.html, please refer to&nbsp;<a href="http://adndevblog.typepad.com/infrastructure/2012/04/debugging-fusion-viewer-or-mobile-viewer-of-aims-in-firebug.html" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;">this blog post</a>&nbsp;for more information about this:</p> 
    <p style="line-height:1.5;">&lt;script type="text/javascript" src="../../../lib/<strong>fusion.js</strong>"&gt;&lt;/script&gt;</p> 
    <p style="line-height:1.5;">Now let’s refresh the page and test again, the information about the selection has been written to the firebug console:</p> 
    <p style="line-height:1.5;"><a href="http://images.cnblogs.com/cnblogs_com/junqilian/201211/201211210900064236.png" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;"><img title="image" alt="image" src="https://images.cnblogs.com/cnblogs_com/junqilian/201211/201211210900166688.png" width="475" height="220" style="border:0px;background-image:none;"></a></p> 
    <p style="line-height:1.5;">Look at it closer:</p> 
    <p style="line-height:1.5;"><a href="http://images.cnblogs.com/cnblogs_com/junqilian/201211/201211210900271191.png" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;"><img title="image" alt="image" src="https://images.cnblogs.com/cnblogs_com/junqilian/201211/201211210900374473.png" width="476" height="371" style="border:0px;background-image:none;"></a></p> 
    <p style="line-height:1.5;">&nbsp;</p> 
    <p style="line-height:1.5;">Okay, I would like to stop here, you may want to keep trying the following examples, and it may not work as expected, but since all source code of fusion is released with the product(C:\Program Files\Autodesk\Autodesk Infrastructure Web Server Extension 2013\www\fusion), you can debug it yourself with help of Firebug, as introduced&nbsp;<a href="http://adndevblog.typepad.com/infrastructure/2012/04/debugging-fusion-viewer-or-mobile-viewer-of-aims-in-firebug.html" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;">in this post</a>. Hopefully you can work them out yourself.</p> 
    <p style="line-height:1.5;">&nbsp;</p> 
    <p style="line-height:1.5;">Good luck!</p> 
   </div> 
   <div style="color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13.3333px;">
    作者：
    <a href="http://junqilian.cnblogs.com/" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;">峻祁连</a>
    <br> 邮箱：junqilian@163.com&nbsp;
    <br> 出处：
    <a href="http://junqilian.cnblogs.com/" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;">http://junqilian.cnblogs.com</a>&nbsp;
    <br> 转载请保留此信息。
   </div> 
   <div style="color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13.3333px;">
    <br>
   </div> 
   <div style="color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13.3333px;">
    <br>
   </div> 
   <div style="color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13.3333px;">
    <br>
   </div> 
   <div> 
    <font color="#4b4b4b">本文转自峻祁连. Moving to Cloud/Mobile博客园博客，原文链接：http://www.cnblogs.com/junqilian/archive/2012/11/21/2780108.html</font>
    <span style="color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;">，如需转载请自行联系原作者</span> 
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
