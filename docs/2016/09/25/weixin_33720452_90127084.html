<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Java刷题知识点之equals和hashcode() « NotBeCN</title>
  <meta name="description" content="             说简单点，就是，先对hashcode，然后对eauals。    &nbsp;    　　以下是HashMap的jdk1.6 &nbsp; :&nbsp;        &nbsp;    &nbsp;    &nbsp;    &nbsp;    　　以下是HashMap的jdk1.7...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2016/09/25/weixin_33720452_90127084.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">Java刷题知识点之equals和hashcode()</h1>
    <p class="post-meta">Sep 25, 2016</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong><span style="color:rgb(0,0,255);">说简单点，就是，先对hashcode，然后对eauals。</span></strong></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong><span style="color:rgb(0,0,255);">　　以下是HashMap的jdk1.6 &nbsp; :&nbsp;</span></strong></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="http://images2017.cnblogs.com/blog/855959/201710/855959-20171008180338106-603266338.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　<strong><span style="color:rgb(0,0,255);">　以下是HashMap的jdk1.7 &nbsp;:&nbsp;</span></strong></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="http://images2017.cnblogs.com/blog/855959/201710/855959-20171008201004512-384024326.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;&nbsp;<strong><span style="color:rgb(0,0,255);">以下是HashMap的jdk1.8 &nbsp;:&nbsp;</span></strong></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="http://images2017.cnblogs.com/blog/855959/201710/855959-20171008200942074-1459781817.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-size:14pt;"><strong>equal() 和hashCode()方法都是基类Object的方法</strong></span></p> 
   <h2 style="font-size:21px;line-height:1.5;font-family:Verdana, Arial, Helvetica, sans-serif;">&nbsp;</h2> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　其源码如下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span><span style="font-size:12px;line-height:1.5;"> boolean equals(Object obj) {
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> (<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">this</span> ==<span style="font-size:12px;line-height:1.5;"> obj);
    }

</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">hashCode method</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">
/*</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">Returns a hash code value for the object. This method is
  supported for the benefit of hash tables such as those provided by {@link java.util.HashMap}.</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">*/</span>

<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> native <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> hashCode();</pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　因此，equal()方法就是直接比较对象的地址，对于hashCode()，Java采用了哈希表的原理。 哈希算法也称为散列算法，是将数据依特定算法直接指定到一个地址上。初学者可以这样理解，hashCode方法实际上返回的就是对象存储的物理地址（实际可能并不是）。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-size:18pt;"><strong>那么问题来了？ 为什么重写equal()方法的时候通常需要重写hashCode()方法呢？</strong></span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　equal()方法是比较对象是否相等的，<strong><span style="color:rgb(0,0,255);">hashCode()方法是在当对象存入集合如HashSet对象，以及HashMap对象、HashTable等里面用的，这样一来，当集合要添加新的元素时，先调用这个元素的hashCode方法，就一下子能定位到它应该放置的物理位置上。 如果这个位置上没有元素，它就可以直接存储在这个位置上，不用再进行任何比较了；<span style="color:rgb(255,0,0);">如果这个位置上已经有元素了， 就调用它的equals方法与新元素进行比较</span>，相同的话就覆盖，不相同就散列其它的地址。 所以这里存在一个冲突解决的问题。这样一来实际调用equals方法的次数就大大降低了，几乎只需要一两次</span></strong>。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>　　比如String方法里重写了equal()方法：</strong></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">String重写的equal方法</span>
  <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span><span style="font-size:12px;line-height:1.5;"> boolean equals(Object anObject) {
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span> (<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">this</span> ==<span style="font-size:12px;line-height:1.5;"> anObject) {
            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">true</span><span style="font-size:12px;line-height:1.5;">;
        }
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span><span style="font-size:12px;line-height:1.5;"> (anObject instanceof String) {
            String anotherString </span>=<span style="font-size:12px;line-height:1.5;"> (String)anObject;
            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> n =<span style="font-size:12px;line-height:1.5;"> value.length;
            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span> (n ==<span style="font-size:12px;line-height:1.5;"> anotherString.value.length) {
                </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">char</span> v1[] =<span style="font-size:12px;line-height:1.5;"> value;
                </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">char</span> v2[] =<span style="font-size:12px;line-height:1.5;"> anotherString.value;
                </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> i = <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span><span style="font-size:12px;line-height:1.5;">;
                </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">while</span> (n-- != <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span><span style="font-size:12px;line-height:1.5;">) {
                    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span> (v1[i] !=<span style="font-size:12px;line-height:1.5;"> v2[i])
                        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">false</span><span style="font-size:12px;line-height:1.5;">;
                    i</span>++<span style="font-size:12px;line-height:1.5;">;
                }
                </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">true</span><span style="font-size:12px;line-height:1.5;">;
            }
        }
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">false</span><span style="font-size:12px;line-height:1.5;">;
    }<br><br></span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">hashCode()方法</span>
 <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> hashCode() {
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> h =<span style="font-size:12px;line-height:1.5;"> hash;
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span> (h == <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span> &amp;&amp; value.length &gt; <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span><span style="font-size:12px;line-height:1.5;">) {
            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">char</span> val[] =<span style="font-size:12px;line-height:1.5;"> value;

            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">for</span> (<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> i = <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span>; i &lt; value.length; i++<span style="font-size:12px;line-height:1.5;">) {
                h </span>= <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">31</span> * h +<span style="font-size:12px;line-height:1.5;"> val[i];
            }
            hash </span>=<span style="font-size:12px;line-height:1.5;"> h;
        }
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span><span style="font-size:12px;line-height:1.5;"> h;
    }</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>　　例子：</strong></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="font-size:12px;line-height:1.5;">package com.demo;

import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;

</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">class</span><span style="font-size:12px;line-height:1.5;"> Equal {

    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">static</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">void</span><span style="font-size:12px;line-height:1.5;"> main(String[] args) {
        Map</span>&lt;String,String&gt; maps = <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">new</span> HashMap&lt;String,String&gt;<span style="font-size:12px;line-height:1.5;">();
        maps.put(</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">1</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span>, <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">zhangsan</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">);
        maps.put(</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">1</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span>, <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">lisi</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">);
        maps.put(</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">2</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span>, <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">wangwu</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">);
        maps.put(</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">2</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span>, <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">zhaoliu</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">);
        maps.put(</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">3</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span>, <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">zhaoliu</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">);

        Iterator</span>&lt;Map.Entry&lt;String, String&gt;&gt; iterator =<span style="font-size:12px;line-height:1.5;"> maps.entrySet().iterator();
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">while</span><span style="font-size:12px;line-height:1.5;">(iterator.hasNext()){
            Map.Entry</span>&lt;String, String&gt; entry =<span style="font-size:12px;line-height:1.5;"> iterator.next();
            System.</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">out</span>.println(entry.getKey()+<span style="font-size:12px;line-height:1.5;">entry.getValue());
        }
    }
}
</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">输出结果：
</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;"> 1lisi
</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;"> 2zhaoliu
</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;"> 3zhaoliu</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-size:18pt;"><strong>　　总之</strong>&nbsp;</span><br> 1、equal()是判断两个对象是否相同的&nbsp;<br> 2、hashCode()是在HashSet、HashMap等中用的&nbsp;<br> 3. 通常equal() 和hashCode()要保证对象的一致性。。。。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>　　<span style="font-size:18px;">以下是关于HashCode的官方文档定义：</span></strong></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　hashcode方法返回该对象的哈希码值。支持该方法是为哈希表提供一些优点，例如，java.util.Hashtable 提供的哈希表。&nbsp;<br> 在 Java 应用程序执行期间，在同一对象上多次调用 hashCode 方法时，必须一致地返回相同的整数，前提是对象上 equals 比较中所用的信息没有被修改。从某一应用程序的一次执行到同一应用程序的另一次执行，该整数无需保持一致。&nbsp;<br> 如果根据 equals(Object) 方法，两个对象是相等的，那么在两个对象中的每个对象上调用 hashCode 方法都必须生成相同的整数结果。&nbsp;<br> 以下情况不 是必需的：如果根据 equals(java.lang.Object) 方法，两个对象不相等，那么在两个对象中的任一对象上调用 hashCode 方法必定会生成不同的整数结果。但是，程序员应该知道，为不相等的对象生成不同整数结果可以提高哈希表的性能。&nbsp;<br> 实际上，由 Object 类定义的 hashCode 方法确实会针对不同的对象返回不同的整数。（这一般是通过将该对象的内部地址转换成一个整数来实现的，但是 JavaTM 编程语言不需要这种实现技巧。）&nbsp;<br> 当equals方法被重写时，通常有必要重写 hashCode 方法，以维护 hashCode 方法的常规协定，该协定声明相等对象必须具有相等的哈希码。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <pre><br><br><br><br></pre> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;以上这段官方文档的定义，我们可以抽出成以下几个关键点：</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　1、hashCode的存在主要是用于查找的快捷性，如Hashtable，HashMap等，hashCode是用来在散列存储结构中确定对象的存储地址的；</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　2、如果两个对象相同，就是适用于equals(java.lang.Object) 方法，那么这两个对象的hashCode一定要相同；</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　3、如果对象的equals方法被重写，那么对象的hashCode也尽量重写，并且产生hashCode使用的对象，一定要和equals方法中使用的一致，否则就会违反上面提到的第2点；</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　4、两个对象的hashCode相同，并不一定表示两个对象就相同，也就是不一定适用于equals(java.lang.Object) 方法，只能够说明这两个对象在散列存储结构中，如Hashtable，他们<strong>“存放在同一个篮子里”</strong>。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong><span style="font-size:18pt;">再归纳一下</span></strong></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　就是<strong><span style="color:rgb(0,0,255);">hashCode是用于查找使用的，而equals是用于比较两个对象的是否相等的。</span></strong></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">1、hashcode是用来查找的，如果你学过数据结构就应该知道，在查找和排序这一章有&nbsp;<br> 例如内存中有这样的位置&nbsp;<br> 0 1 2 3 4 5 6 7&nbsp;<br> 而我有个类，这个类有个字段叫ID，我要把这个类存放在以上8个位置之一，如果不用hashcode而任意存放，那么当查找时就需要到这八个位置里挨个去找，或者用二分法一类的算法。<br> 但如果用hashcode那就会使效率提高很多。&nbsp;<br> 我们这个类中有个字段叫ID,那么我们就定义我们的hashcode为ID％8，然后把我们的类存放在取得得余数那个位置。比如我们的ID为9，9除8的余数为1，那么我们就把该类存在1这个位置，如果ID是13，求得的余数是5，那么我们就把该类放在5这个位置。这样，以后在查找该类时就可以通过ID除 8求余数直接找到存放的位置了。&nbsp;<br><br> 2、但是如果两个类有相同的hashcode怎么办那（我们假设上面的类的ID不是唯一的），例如9除以8和17除以8的余数都是1，那么这是不是合法的，回答是：可以这样。那么如何判断呢？在这个时候就需要定义 equals了。&nbsp;<br> 也就是说，我们先通过 hashcode来判断两个类是否存放某个桶里，但这个桶里可能有很多类，那么我们就需要再通过 equals 来在这个桶里找到我们要的类。&nbsp;<br> 那么。重写了equals()，为什么还要重写hashCode()呢？&nbsp;<br> 想想，你要在一个桶里找东西，你必须先要找到这个桶啊，你不通过重写hashcode()来找到桶，光重写equals()有什么用啊。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <div> 
    <div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      &nbsp;
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      &nbsp;
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      <span style="font-size:18pt;"><strong>从HashMap中通过key查找value时的过程？</strong></span>
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      　　首先调用的是key的hashcode()方法来获取到key对应的hash值h，这样就可以确定键为key的所有值存储的首地址。
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      　　如果h对应的key值有多个，那么程序接着会遍历所有的key，通过调用key的equals()方法来判断key的内容是否相等。只有当equals()方法的返回值为true时，对应的value才是正确的结果。
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      　　比如：如首先向HashMap中添加&lt;“aaa”,"bbb"&gt;，接着添加&lt;“aaa”,"ccc"&gt;的时候由于与前面添加的数据有相同的key:"aaa"，因此会用新的值"ccc"替换“bbb”。
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      &nbsp;
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      &nbsp;
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      &nbsp;
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      &nbsp;
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      &nbsp;
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      &nbsp;
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      &nbsp;
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      <span style="font-size:18pt;"><strong>对于不同的key值可能会得到相同的hash值，因此就需要对冲突进行处理</strong></span>
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      　　一般而言，对于不同的key值可能会得到相同的hash值，因此就需要对冲突进行处理。一般处理冲突的方法是：开放地址法、再hash法、链地址法等。
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      &nbsp;
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      &nbsp;
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      &nbsp;
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      &nbsp;
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      &nbsp;
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      &nbsp;
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      <span style="font-size:18pt;"><strong>HashMap添加元素的操作过程</strong></span>
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      　　
      <strong><span style="color:rgb(0,0,255);">在向HashMap中添加键值对&lt;key，value&gt;时，需要经过以下几个步骤：</span></strong> 
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      　　首先，调用key的hashcode()方法生成一个hash值h1，如果这个h1在HashMap中不存在，那么直接将&lt;key，value&gt;添加到HashMap中，如果这个h1已经存在，那么找出HashMap中所有hash值为h1的key。
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      　　然后，分别调用key的equals()方法判断当前添加的key值是否与已经存在的key值相同。如果equals()方法返回true，说明当前需要添加的key已经存在，那么HashMap会使用新的value值来覆盖旧的value值。如果equals()方法返回false，说明新增加的key在HashMap中不存在，因此会在HashMap中创建新的映射关系。当新增加的key的hash值已经在HashMap中存在时，就会产生冲突。
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      &nbsp;
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      &nbsp;
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      &nbsp;
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      &nbsp;
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      &nbsp;
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      &nbsp;
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      &nbsp;
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      &nbsp;
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"> 
      <p>　　最近去面试了几家公司，被问到hashCode的作用，虽然回答出来了，但是自己还是对hashCode和equals的作用一知半解的，所以决定把它们研究一下。</p> 
      <p>以前写程序一直没有注意hashCode的作用，一般都是覆盖了equals，却没有覆盖hashCode，现在发现这是埋下了很多潜在的Bug！今天就来说一说hashCode和equals的作用。</p> 
      <p>&nbsp; &nbsp; &nbsp; &nbsp;先来试想一个场景，如果你想查找一个集合中是否包含某个对象，那么程序应该怎么写呢？通常的做法是逐一取出每个元素与要查找的对象一一比较，当发现两者进行equals比较结果相等时，则停止查找并返回true，否则，返回false。但是这个做法的一个缺点是当集合中的元素很多时，譬如有一万个元素，那么逐一的比较效率势必下降很快。于是有人发明了一种哈希算法来提高从该集合中查找元素的效率，这种方式将集合分成若干个存储区域（可以看成一个个桶），每个对象可以计算出一个哈希码，可以根据哈希码分组，每组分别对应某个存储区域，这样一个对象根据它的哈希码就可以分到不同的存储区域（不同的桶中）。如下图所示：</p> 
      <p>&nbsp;<img src="http://images2017.cnblogs.com/blog/855959/201710/855959-20171007223823724-2146495652.png" alt="" style="border:0px;"></p> 
      <p>　　实际的使用中，一个对象一般有key和value，可以根据key来计算它的hashCode。<span style="color:rgb(0,0,255);">假设现在全部的对象都已经根据自己的hashCode值存储在不同的存储区域中了，那么现在查找某个对象（根据对象的key来查找），不需要遍历整个集合了，现在只需要计算要查找对象的key的hashCode，然后找到该hashCode对应的存储区域，在该存储区域中来查找就可以了，这样效率也就提升了很多</span>。说了这么多相信你对hashCode的作用有了一定的了解。</p> 
      <p>&nbsp;</p> 
      <p>&nbsp;</p> 
      <p>&nbsp;</p> 
      <p>&nbsp;</p> 
      <p><span style="font-size:18pt;"><strong>下面就来看看hashCode和equals的区别和联系。</strong></span></p> 
      <p>　　在研究这个问题之前，首先说明一下JDK对equals(Object obj)和hashCode()这两个方法的定义和规范：在Java中任何一个对象都具备equals(Object obj)和hashCode()这两个方法，因为他们是在Object类中定义的。&nbsp;equals(Object obj)方法用来判断两个对象是否“相同”，如果“相同”则返回true，否则返回false。&nbsp;hashCode()方法返回一个int数，在Object类中的默认实现是“将该对象的内部地址转换成一个整数返回”。</p> 
      <p>&nbsp;下面是我查阅了相关资料之后对以上的说明做的归纳总结：</p> 
      <p>1、若重写了equals(Object obj)方法，则有必要重写hashCode()方法。<br> 2、若两个对象equals(Object obj)返回true，则hashCode（）有必要也返回相同的int数。<br> 3、若两个对象equals(Object obj)返回false，则hashCode（）不一定返回不同的int数。<br> 4、若两个对象hashCode（）返回相同int数，则equals（Object obj）不一定返回true。<br> 5、若两个对象hashCode（）返回不同int数，则equals（Object obj）一定返回false。<br> 6、同一对象在执行期间若已经存储在集合中，则不能修改影响hashCode值的相关信息，否则会导致内存泄露问题。</p> 
      <p>&nbsp;</p> 
      <p>　　想要弄清楚以上六点，先要知道什么时候需要重写equals和hashCode。一般来说涉及到对象之间的比较大小就需要重写equals方法，但是为什么第一点说重写了equals就需要重写hashCode呢？实际上这只是一条规范，如果不这样做程序也可以执行，只不过会隐藏bug。一般一个类的对象如果会存储在HashTable，HashSet,HashMap等散列存储结构中，那么重写equals后最好也重写hashCode，否则会导致存储数据的不唯一性（存储了两个equals相等的数据）。而如果确定不会存储在这些散列结构中，则可以不重写hashCode。但是个人觉得还是重写比较好一点，谁能保证后期不会存储在这些结构中呢，况且重写了hashCode也不会降低性能，因为在线性结构（如ArrayList）中是不会调用hashCode，所以重写了也不要紧，也为后期的修改打了补丁。</p> 
      <p>&nbsp;</p> 
      <div>
       <span style="font-size:18px;"><strong>想要弄清楚以上六点，先要知道什么时候需要重写equals和hashCode。</strong></span>
      </div> 
      <div>
       　　一般来说涉及到对象之间的比较大小就需要重写equals方法，但是为什么第一点说重写了equals就需要重写hashCode呢？实际上这只是一条规范，如果不这样做程序也可以执行，只不过会隐藏bug。一般一个类的对象如果会存储在HashTable，HashSet,HashMap等散列存储结构中，那么重写equals后最好也重写hashCode，否则会导致存储数据的不唯一性（存储了两个equals相等的数据）。而如果确定不会存储在这些散列结构中，则可以不重写hashCode。但是个人觉得还是重写比较好一点，谁能保证后期不会存储在这些结构中呢，况且重写了hashCode也不会降低性能，因为在线性结构（如ArrayList）中是不会调用hashCode，所以重写了也不要紧，也为后期的修改打了补丁。
      </div> 
      <p>&nbsp;</p> 
      <p>&nbsp;</p> 
      <div>
       下面来看一张对象放入散列集合的流程图：
      </div> 
      <div> 
       <p>&nbsp;</p> 
       <p><img src="https://uzshare.com/_p?https://img-blog.csdn.net/20140428143548328?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGlqaWVjYW8wMjI2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="" style="border:0px;"></p> 
       <p>　　从上面的图中可以清晰地看到在存储一个对象时，先进行hashCode值的比较，然后进行equals的比较。可能现在你已经对上面的6点归纳有了一些认识。我们还可以通过JDK中得源码来认识一下具体hashCode和equals在代码中是如何调用的。</p> 
      </div> 
      <p>&nbsp;</p> 
      <p>HashSet.java&nbsp;</p> 
      <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
       <pre><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span><span style="font-size:12px;line-height:1.5;"> boolean add(E e) {  
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> map.put(e, PRESENT)==<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">null</span><span style="font-size:12px;line-height:1.5;">;  
    }</span></pre>
      </div> 
      <p>&nbsp;</p> 
      <p>&nbsp;</p> 
      <p>HashMap.java</p> 
      <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
       <div class="cnblogs_code_toolbar">
        <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
       </div> 
       <pre><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span><span style="font-size:12px;line-height:1.5;"> V put(K key, V value) {  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span> (key == <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">null</span><span style="font-size:12px;line-height:1.5;">)  
            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span><span style="font-size:12px;line-height:1.5;"> putForNullKey(value);  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> hash =<span style="font-size:12px;line-height:1.5;"> hash(key.hashCode());  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> i =<span style="font-size:12px;line-height:1.5;"> indexFor(hash, table.length);  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">for</span> (Entry&lt;K,V&gt; e = table[i]; e != <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">null</span>; e =<span style="font-size:12px;line-height:1.5;"> e.next) {  
            Object k;  
            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span> (e.hash == hash &amp;&amp; ((k = e.key) == key ||<span style="font-size:12px;line-height:1.5;"> key.equals(k))) {  
                V oldValue </span>=<span style="font-size:12px;line-height:1.5;"> e.value;  
                e.value </span>=<span style="font-size:12px;line-height:1.5;"> value;  
                e.recordAccess(</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">this</span><span style="font-size:12px;line-height:1.5;">);  
                </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span><span style="font-size:12px;line-height:1.5;"> oldValue;  
            }  
        }  
  
        modCount</span>++<span style="font-size:12px;line-height:1.5;">;  
        addEntry(hash, key, value, i);  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">null</span><span style="font-size:12px;line-height:1.5;">;  
    }</span></pre> 
       <div class="cnblogs_code_toolbar">
        <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
       </div> 
      </div> 
      <p>&nbsp;</p> 
      <div class="dp-highlighter bg_java" style="font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;">
       &nbsp;
      </div> 
      <div class="dp-highlighter bg_java" style="font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;">
       &nbsp;
      </div> 
      <div class="dp-highlighter bg_java" style="font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;">
       &nbsp;
      </div> 
      <div class="dp-highlighter bg_java" style="font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;">
       &nbsp;
      </div> 
      <div class="dp-highlighter bg_java" style="font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;">
       &nbsp;
      </div> 
      <p><strong><span style="font-size:18pt;">最后再来看几个测试的例子吧：</span></strong></p> 
      <p><strong>　<span style="color:rgb(0,0,255);">　测试一：</span><span style="color:rgb(0,0,255);">覆盖equals（Object obj）但不覆盖hashCode（）,导致数据不唯一性</span></strong></p> 
      <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
       <div class="cnblogs_code_toolbar">
        <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
       </div> 
       <pre><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">class</span><span style="font-size:12px;line-height:1.5;"> HashCodeTest {  
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">static</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">void</span><span style="font-size:12px;line-height:1.5;"> main(String[] args) {  
        Collection </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">set</span> = <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">new</span><span style="font-size:12px;line-height:1.5;"> HashSet();  
        Point p1 </span>= <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">new</span> Point(<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span>, <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span><span style="font-size:12px;line-height:1.5;">);  
        Point p2 </span>= <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">new</span> Point(<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span>, <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span><span style="font-size:12px;line-height:1.5;">);  
  
        System.</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">out</span><span style="font-size:12px;line-height:1.5;">.println(p1.equals(p2));  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">set</span>.add(p1);   <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">(1)  </span>
        <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">set</span>.add(p2);   <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">(2)  </span>
        <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">set</span>.add(p1);   <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">(3)  </span>
<span style="font-size:12px;line-height:1.5;">  
        Iterator iterator </span>= <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">set</span><span style="font-size:12px;line-height:1.5;">.iterator();  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">while</span><span style="font-size:12px;line-height:1.5;"> (iterator.hasNext()) {  
            Object </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">object</span> =<span style="font-size:12px;line-height:1.5;"> iterator.next();  
            System.</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">out</span>.println(<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">object</span><span style="font-size:12px;line-height:1.5;">);  
        }  
    }  
}  
  
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">class</span><span style="font-size:12px;line-height:1.5;"> Point {  
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">private</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> x;  
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">private</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> y;  
  
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> Point(<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> x, <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> y) {  
        super();  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">this</span>.x =<span style="font-size:12px;line-height:1.5;"> x;  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">this</span>.y =<span style="font-size:12px;line-height:1.5;"> y;  
    }  
  
    @Override  
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span><span style="font-size:12px;line-height:1.5;"> boolean equals(Object obj) {  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span> (<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">this</span> ==<span style="font-size:12px;line-height:1.5;"> obj)  
            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">true</span><span style="font-size:12px;line-height:1.5;">;  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span> (obj == <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">null</span><span style="font-size:12px;line-height:1.5;">)  
            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">false</span><span style="font-size:12px;line-height:1.5;">;  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span> (getClass() !=<span style="font-size:12px;line-height:1.5;"> obj.getClass())  
            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">false</span><span style="font-size:12px;line-height:1.5;">;  
        Point other </span>=<span style="font-size:12px;line-height:1.5;"> (Point) obj;  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span> (x !=<span style="font-size:12px;line-height:1.5;"> other.x)  
            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">false</span><span style="font-size:12px;line-height:1.5;">;  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span> (y !=<span style="font-size:12px;line-height:1.5;"> other.y)  
            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">false</span><span style="font-size:12px;line-height:1.5;">;  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">true</span><span style="font-size:12px;line-height:1.5;">;  
    }  
  
    @Override  
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span><span style="font-size:12px;line-height:1.5;"> String toString() {  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">x:</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span> + x + <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">,y:</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span> +<span style="font-size:12px;line-height:1.5;"> y;  
    }  
  
}  </span></pre> 
       <div class="cnblogs_code_toolbar">
        <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
       </div> 
      </div> 
      <p>&nbsp;</p> 
      <p>&nbsp;</p> 
      <div class="dp-highlighter bg_java" style="font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;">
       &nbsp; 
       <p>　　输出结果：</p> 
       <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
        <pre><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">true</span><span style="font-size:12px;line-height:1.5;">  
x:</span><span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span>,y:<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span><span style="font-size:12px;line-height:1.5;">  
x:</span><span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span>,y:<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span>  </pre>
       </div> 
       <p>&nbsp;</p> 
       <p>　　原因分析：</p> 
       <p>（1）当执行set.add(p1)时（1），集合为空，直接存入集合；</p> 
       <p>（2）当执行set.add(p2)时（2），首先判断该对象（p2）的hashCode值所在的存储区域是否有相同的hashCode，因为没有覆盖hashCode方法，所以jdk使用默认Object的hashCode方法，返回内存地址转换后的整数，因为不同对象的地址值不同，所以这里不存在与p2相同hashCode值的对象，因此jdk默认不同hashCode值，equals一定返回false，所以直接存入集合。</p> 
       <p>&nbsp;（3）当执行set.add(p1)时（3），时，因为p1已经存入集合，同一对象返回的hashCode值是一样的，继续判断equals是否返回true，因为是同一对象所以返回true。此时jdk认为该对象已经存在于集合中，所以舍弃。</p> 
       <div class="dp-highlighter bg_java" style="font-size:12px;">
        &nbsp;
       </div> 
       <div class="dp-highlighter bg_java" style="font-size:12px;">
        &nbsp;
       </div> 
       <div class="dp-highlighter bg_java" style="font-size:12px;">
        &nbsp;
       </div> 
       <div class="dp-highlighter bg_java" style="font-size:12px;"> 
        <p><strong>　<span style="color:rgb(0,0,255);">　测试二：</span><span style="color:rgb(0,0,255);">覆盖hashCode方法，但不覆盖equals方法，仍然会导致数据的不唯一性</span></strong></p> 
        <p>修改Point类：</p> 
       </div> 
      </div> 
      <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
       <div class="cnblogs_code_toolbar">
        <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
       </div> 
       <pre><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">class</span><span style="font-size:12px;line-height:1.5;"> Point {  
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">private</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> x;  
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">private</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> y;  
  
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> Point(<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> x, <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> y) {  
        super();  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">this</span>.x =<span style="font-size:12px;line-height:1.5;"> x;  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">this</span>.y =<span style="font-size:12px;line-height:1.5;"> y;  
    }  
  
    @Override  
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> hashCode() {  
        final </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> prime = <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">31</span><span style="font-size:12px;line-height:1.5;">;  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> result = <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span><span style="font-size:12px;line-height:1.5;">;  
        result </span>= prime * result +<span style="font-size:12px;line-height:1.5;"> x;  
        result </span>= prime * result +<span style="font-size:12px;line-height:1.5;"> y;  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span><span style="font-size:12px;line-height:1.5;"> result;  
    }  
  
    @Override  
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span><span style="font-size:12px;line-height:1.5;"> String toString() {  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">x:</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span> + x + <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">,y:</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span> +<span style="font-size:12px;line-height:1.5;"> y;  
    }  
  
}  </span></pre> 
       <div class="cnblogs_code_toolbar">
        <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
       </div> 
      </div> 
      <p>&nbsp;</p> 
      <p>&nbsp;</p> 
      <p>输出结果：</p> 
      <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
       <pre><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">false</span><span style="font-size:12px;line-height:1.5;">  
x:</span><span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span>,y:<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span><span style="font-size:12px;line-height:1.5;">  
x:</span><span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span>,y:<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span></pre>
      </div> 
      <p>&nbsp;</p> 
      <p>原因分析：</p> 
      <p>（1）当执行set.add(p1)时（1），集合为空，直接存入集合；</p> 
      <p>（2）当执行set.add(p2)时（2），首先判断该对象（p2）的hashCode值所在的存储区域是否有相同的hashCode，这里覆盖了hashCode方法，p1和p2的hashCode相等，所以继续判断equals是否相等，因为这里没有覆盖equals，默认使用'=='来判断，所以这里equals返回false，jdk认为是不同的对象，所以将p2存入集合。</p> 
      <p>&nbsp;（3）当执行set.add(p1)时（3），时，因为p1已经存入集合，同一对象返回的hashCode值是一样的，并且equals返回true。此时jdk认为该对象已经存在于集合中，所以舍弃。</p> 
      <p>&nbsp;</p> 
      <div>
       <strong>综合上述两个测试，要想保证元素的唯一性，必须同时覆盖hashCode和equals才行。</strong>
      </div> 
      <div>
       （注意：在HashSet中插入同一个元素（hashCode和equals均相等）时，会被舍弃，而在HashMap中插入同一个Key（Value 不同）时，原来的元素会被覆盖。）
      </div> 
      <div>
       &nbsp;
      </div> 
      <div>
       &nbsp;
      </div> 
      <div>
       &nbsp;
      </div> 
      <div>
       &nbsp;
      </div> 
      <div>
       &nbsp;
      </div> 
      <div>
       &nbsp;
      </div> 
      <div>
       <strong><span style="color:rgb(0,0,255);">&nbsp;</span></strong>
      </div> 
      <div> 
       <div>
        <strong><span style="color:rgb(0,0,255);">测试三：在内存泄露问题</span></strong>
       </div> 
       <div> 
        <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
         <div class="cnblogs_code_toolbar">
          <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
         </div> 
         <pre><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">class</span><span style="font-size:12px;line-height:1.5;"> HashCodeTest {  
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">static</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">void</span><span style="font-size:12px;line-height:1.5;"> main(String[] args) {  
        Collection </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">set</span> = <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">new</span><span style="font-size:12px;line-height:1.5;"> HashSet();  
        Point p1 </span>= <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">new</span> Point(<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span>, <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span><span style="font-size:12px;line-height:1.5;">);  
        Point p2 </span>= <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">new</span> Point(<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span>, <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">2</span><span style="font-size:12px;line-height:1.5;">);  
  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">set</span><span style="font-size:12px;line-height:1.5;">.add(p1);  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">set</span><span style="font-size:12px;line-height:1.5;">.add(p2);  
          
        p2.setX(</span><span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">10</span><span style="font-size:12px;line-height:1.5;">);  
        p2.setY(</span><span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">10</span><span style="font-size:12px;line-height:1.5;">);  
          
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">set</span><span style="font-size:12px;line-height:1.5;">.remove(p2);  
  
        Iterator iterator </span>= <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">set</span><span style="font-size:12px;line-height:1.5;">.iterator();  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">while</span><span style="font-size:12px;line-height:1.5;"> (iterator.hasNext()) {  
            Object </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">object</span> =<span style="font-size:12px;line-height:1.5;"> iterator.next();  
            System.</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">out</span>.println(<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">object</span><span style="font-size:12px;line-height:1.5;">);  
        }  
    }  
}  
  
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">class</span><span style="font-size:12px;line-height:1.5;"> Point {  
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">private</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> x;  
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">private</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> y;  
  
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> Point(<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> x, <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> y) {  
        super();  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">this</span>.x =<span style="font-size:12px;line-height:1.5;"> x;  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">this</span>.y =<span style="font-size:12px;line-height:1.5;"> y;  
    }  
  
  
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> getX() {  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span><span style="font-size:12px;line-height:1.5;"> x;  
    }  
  
  
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">void</span> setX(<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> x) {  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">this</span>.x =<span style="font-size:12px;line-height:1.5;"> x;  
    }  
  
  
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> getY() {  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span><span style="font-size:12px;line-height:1.5;"> y;  
    }  
  
  
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">void</span> setY(<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> y) {  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">this</span>.y =<span style="font-size:12px;line-height:1.5;"> y;  
    }  
  
  
    @Override  
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> hashCode() {  
        final </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> prime = <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">31</span><span style="font-size:12px;line-height:1.5;">;  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> result = <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span><span style="font-size:12px;line-height:1.5;">;  
        result </span>= prime * result +<span style="font-size:12px;line-height:1.5;"> x;  
        result </span>= prime * result +<span style="font-size:12px;line-height:1.5;"> y;  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span><span style="font-size:12px;line-height:1.5;"> result;  
    }  
  
  
    @Override  
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span><span style="font-size:12px;line-height:1.5;"> boolean equals(Object obj) {  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span> (<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">this</span> ==<span style="font-size:12px;line-height:1.5;"> obj)  
            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">true</span><span style="font-size:12px;line-height:1.5;">;  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span> (obj == <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">null</span><span style="font-size:12px;line-height:1.5;">)  
            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">false</span><span style="font-size:12px;line-height:1.5;">;  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span> (getClass() !=<span style="font-size:12px;line-height:1.5;"> obj.getClass())  
            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">false</span><span style="font-size:12px;line-height:1.5;">;  
        Point other </span>=<span style="font-size:12px;line-height:1.5;"> (Point) obj;  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span> (x !=<span style="font-size:12px;line-height:1.5;"> other.x)  
            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">false</span><span style="font-size:12px;line-height:1.5;">;  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span> (y !=<span style="font-size:12px;line-height:1.5;"> other.y)  
            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">false</span><span style="font-size:12px;line-height:1.5;">;  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">true</span><span style="font-size:12px;line-height:1.5;">;  
    }  
  
  
    @Override  
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span><span style="font-size:12px;line-height:1.5;"> String toString() {  
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">x:</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span> + x + <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">,y:</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span> +<span style="font-size:12px;line-height:1.5;"> y;  
    }  
  
}  </span></pre> 
         <div class="cnblogs_code_toolbar">
          <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
         </div> 
        </div> 
        <p>&nbsp;</p> 
       </div> 
      </div> 
      <div>
       &nbsp;
      </div> 
      <div>
       &nbsp;
      </div> 
      <p>运行结果：</p> 
      <div class="dp-highlighter bg_java" style="font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;"> 
       <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
        <pre>x:<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span>,y:<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span><span style="font-size:12px;line-height:1.5;">  
x:</span><span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">10</span>,y:<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">10</span></pre>
       </div> 
       <p>&nbsp;</p> 
      </div> 
      <div class="dp-highlighter bg_java" style="font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;">
       &nbsp;
      </div> 
      <div>
       原因分析：
      </div> 
      <div>
       &nbsp; &nbsp; 假设p1的hashCode为1，p2的hashCode为2，在存储时p1被分配在1号桶中，p2被分配在2号筒中。这时修改了p2中与计算hashCode有关的信息（x和y）,当调用remove(Object obj)时，首先会查找该hashCode值得对象是否在集合中。假设修改后的hashCode值为10（仍存在2号桶中）,这时查找结果空，jdk认为该对象不在集合中，所以不会进行删除操作。然而用户以为该对象已经被删除，导致该对象长时间不能被释放，造成内存泄露。解决该问题的办法是不要在执行期间修改与hashCode值有关的对象信息，如果非要修改，则必须先从集合中删除，更新信息后再加入集合中。
      </div> 
      <div>
       &nbsp;
      </div> 
      <div>
       &nbsp;
      </div> 
      <div> 
       <p>&nbsp;</p> 
       <p><strong><span style="font-size:18pt;">总结：</span></strong><br> 1.hashCode是为了提高在散列结构存储中查找的效率，在线性表中没有作用。<br> 2.equals和hashCode需要同时覆盖。<br> 3.若两个对象equals返回true，则hashCode有必要也返回相同的int数。<br> 4.若两个对象equals返回false，则hashCode不一定返回不同的int数,但为不相等的对象生成不同hashCode值可以提高 哈希表的性能。<br> 5.若两个对象hashCode返回相同int数，则equals不一定返回true。<br> 6.若两个对象hashCode返回不同int数，则equals一定返回false。<br> 7.同一对象在执行期间若已经存储在集合中，则不能修改影响hashCode值的相关信息，否则会导致内存泄露问题。</p> 
      </div> 
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      &nbsp;
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      &nbsp;
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      &nbsp;
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      &nbsp;
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      &nbsp;
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      &nbsp;
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      <strong><span style="font-size:18pt;">&nbsp;</span></strong>
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      <strong><span style="font-size:18pt;">　<span style="color:rgb(0,0,255);">扩展</span></span></strong>
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      　　因为，自己是大数据开发，
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      &nbsp;
     </div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"> 
      <img src="http://images2017.cnblogs.com/blog/855959/201710/855959-20171011150300152-660561143.png" alt="" style="border:0px;">
      <p>&nbsp;</p> 
     </div> 
     <div> 
      <font><span style="font-size:14px;">&nbsp;</span></font> 
      <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);"> 
       <div class="cnblogs_code_toolbar" style="font-family:'Courier New';font-size:12px;">
        <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
       </div> 
       <pre>importjava.io.*<span style="font-size:12px;line-height:1.5;">;
importorg.apache.hadoop.io.</span>*<span style="font-size:12px;line-height:1.5;">;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">class</span><span style="font-size:12px;line-height:1.5;"> TextPair implements WritableComparable {
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">private</span>    Text first;<span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">Text 类型的实例变量 first</span>
    <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">private</span>    Text second;<span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">Text 类型的实例变量 second</span>
    
    <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span><span style="font-size:12px;line-height:1.5;"> TextPair() {
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">set</span><span style="font-size:12px;line-height:1.5;">(newText(),newText());
    }
    
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span><span style="font-size:12px;line-height:1.5;"> TextPair(String first, String second) {
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">set</span>(<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">new</span> Text(first),<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">new</span><span style="font-size:12px;line-height:1.5;"> Text(second));
    }
    
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span><span style="font-size:12px;line-height:1.5;"> TextPair(Text first, Text second) {
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">set</span><span style="font-size:12px;line-height:1.5;">(first, second);
    }
    
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">void</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">set</span><span style="font-size:12px;line-height:1.5;">(Text first, Text second) {
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">this</span>.first =<span style="font-size:12px;line-height:1.5;"> first;
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">this</span>.second =<span style="font-size:12px;line-height:1.5;"> second;
    }
    
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span><span style="font-size:12px;line-height:1.5;"> Text getFirst() {
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span><span style="font-size:12px;line-height:1.5;"> first;
    }
    
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span><span style="font-size:12px;line-height:1.5;"> Text getSecond() {
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span><span style="font-size:12px;line-height:1.5;"> second;
    }
    
    </span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">将对象转换为字节流并写入到输出流out中</span>
<span style="font-size:12px;line-height:1.5;">    @Override
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">void</span> write(DataOutput <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">out</span><span style="font-size:12px;line-height:1.5;">)throwsIOException {
        first.write(</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">out</span><span style="font-size:12px;line-height:1.5;">);
        second.write(</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">out</span><span style="font-size:12px;line-height:1.5;">);
    }
    
    </span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">从输入流in中读取字节流反序列化为对象</span>
<span style="font-size:12px;line-height:1.5;">    @Override
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">void</span> readFields(DataInput <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">in</span><span style="font-size:12px;line-height:1.5;">)throwsIOException {
        first.readFields(</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">in</span><span style="font-size:12px;line-height:1.5;">);
        second.readFields(</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">in</span><span style="font-size:12px;line-height:1.5;">);
    }
    
    @Override
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> hashCode() {
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> first.hashCode() *<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">163</span>+<span style="font-size:12px;line-height:1.5;"> second.hashCode();
    }
    
    
    @Override
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span><span style="font-size:12px;line-height:1.5;"> boolean equals(Object o) {
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span><span style="font-size:12px;line-height:1.5;">(o instance of TextPair) {
            TextPair tp </span>=<span style="font-size:12px;line-height:1.5;"> (TextPair) o;
            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> first.equals(tp.first) &amp;&amp;<span style="font-size:12px;line-height:1.5;"> second.equals(tp.second);
        }
            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">false</span><span style="font-size:12px;line-height:1.5;">;
    }
    
    @Override
    publicString toString() {
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> first +<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">\t</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span>+<span style="font-size:12px;line-height:1.5;"> second;
    }
    
    </span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">排序</span>
<span style="font-size:12px;line-height:1.5;">    @Override
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> compareTo(TextPair tp) {
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> cmp =<span style="font-size:12px;line-height:1.5;"> first.compareTo(tp.first); 
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span>(cmp !=<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span><span style="font-size:12px;line-height:1.5;">) {
            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span><span style="font-size:12px;line-height:1.5;"> cmp;
        }
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span><span style="font-size:12px;line-height:1.5;"> second.compareTo(tp.second);
    }
}</span></pre> 
       <pre><span style="font-size:12px;line-height:1.5;"><br></span></pre> 
       <pre><span style="font-size:12px;line-height:1.5;"><br></span></pre> 
       <pre><span style="line-height:1.5;"></span></pre> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
