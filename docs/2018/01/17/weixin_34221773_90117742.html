<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Swift开发React Native组件 « NotBeCN</title>
  <meta name="description" content="             前面说过，React Native作为一个全新的跨平台开发框架，好多东西还不是很成熟，很多原生的控件还不是很完善，于是好多爱好者便自己封装相关的组件，可以使用oc来封装，也可以使用Swift来封装。关于封装的原理，大家可以访问我的书的《React Native移动开发实战》。    基础...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2018/01/17/weixin_34221773_90117742.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">Swift开发React Native组件</h1>
    <p class="post-meta">Jan 17, 2018</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <p>前面说过，React Native作为一个全新的跨平台开发框架，好多东西还不是很成熟，很多原生的控件还不是很完善，于是好多爱好者便自己封装相关的组件，可以使用oc来封装，也可以使用Swift来封装。关于封装的原理，大家可以访问我的书的<a href="https://search.jd.com/search?keyword=React%20Native%E7%A7%BB%E5%8A%A8%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98&amp;enc=utf-8&amp;qrst=1&amp;rt=1&amp;stop=1&amp;vt=2&amp;wq=React%20Native%E7%A7%BB%E5%8A%A8%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98&amp;ev=publishers_%E4%BA%BA%E6%B0%91%E9%82%AE%E7%94%B5%E5%87%BA%E7%89%88%E7%A4%BE%5E&amp;uc=0#J_searchWrap" rel="nofollow">《React Native移动开发实战》</a>。</p> 
   <h1>基础</h1> 
   <p>学习本章知识，需要读者具备一定的OC和Swift语言基础，读者可以从下面的链接中获取学习资料。</p> 
   <p><a href="https://developer.apple.com/library/content/referencelibrary/GettingStarted/DevelopiOSAppsSwift/" rel="nofollow">Apple 官方引导</a><br><a href="https://itisjoe.gitbooks.io/swiftgo/content/more/xcode_intro.html" rel="nofollow">Xcode入门</a><br><a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/index.html#//apple_ref/doc/uid/TP40014097-CH3-ID0" rel="nofollow">Swift英文文档</a></p> 
   <h2>UIKit</h2> 
   <p>UIKit框架是iPhone应用程序开发中最基本的框架，也是用得最多、最重要的框架，UIKit包含界面相关操作组件集合，读者可以从官方文档中去学习具体的内容：<a href="https://developer.apple.com/documentation/uikit" rel="nofollow">UIKit框架官网</a></p> 
   <h2>Playground</h2> 
   <p>测试JS代码我们要么用node执行测试文件，要么直接在console中直接测试，在Xcode也提供了这样的场所。<br>1，在项目中新建文件，选择Playground文件类型。<br><img src="https://uzshare.com/_p?https://img-blog.csdn.net/20180117145903396" alt="这里写图片描述" title="这里写图片描述"><br>左边编码后右侧及时反馈代码执行结果，非常适合我们进行算法测试。<br><img src="https://uzshare.com/_p?https://img-blog.csdn.net/20180117145939205" alt="这里写图片描述" title="这里写图片描述"></p> 
   <h2>Storyboard</h2> 
   <p>在iOS的发展历程中，IOS开发经历了三种主要流派：使用代码手写UI及布局；使用单个xib文件组织viewController或者view；使用StoryBoard来通过单个或很少的几个文件构建全部UI。而在最近几年的开发中，苹果对 Storyboard 的开发力度也不断增强，添加了更多功能和特性，大大方便了界面的开发、适配以及提升代码性能。关于Storyboard更多知识的介绍，可以查看之前文章的介绍：<a href="http://blog.csdn.net/xiangzhihong8/article/details/60884092" rel="nofollow">StoryBoard入门</a></p> 
   <h2>界面介绍</h2> 
   <p>首先，新建一个xcode项目，如下图所示：<br><img src="https://uzshare.com/_p?https://img-blog.csdn.net/20180117150254783" alt="这里写图片描述" title="这里写图片描述"><br>左侧为项目文件目录，中间就是Storyboard的工作台了，右下角则是UI列表。注意看上图中左边文件中有两个Storyboard类型的文件。LaunchScreen.storyboard是开启APP时的引导界面。Main.storyboard是应用的内容界面。这两个文件也可以在下图的地方进行个配置。<br><img src="https://uzshare.com/_p?https://img-blog.csdn.net/20180117150413640" alt="这里写图片描述" title="这里写图片描述"></p> 
   <p>选中Main.storyboard这个文件，然后在右侧找到Label标签，并将它拖动到界面中，拖动过程中触摸板会有震动给你反馈，如下图。<br><img src="https://uzshare.com/_p?https://img-blog.csdn.net/20180117150455341" alt="这里写图片描述" title="这里写图片描述"></p> 
   <h2>CocoaPods</h2> 
   <p>什么是CocoaPods？每种语言发展到一个阶段，就会出现相应的依赖管理工具。好比Java 语言的 Maven，nodejs 的 npm，Android的grandle。而对于ios平台来说，CocoaPods是ios开发平台一个非常流行的第三方库管理工具。在开发过程中，根据项目复杂程度，通常我们会需要外链很多的第三方库。而添加这些第三方库的过程有时候会变成一场灾难。因此使用CocoaPods来代替我们管理这些库，将可以大幅缩短我们的开发时间。</p> 
   <h3>安装</h3> 
   <p>在终端中依次执行下面的命令:</p> 
   <pre><code>gem sources --remove https://rubygems.org/
sudo gem install cocoapods</code></pre> 
   <p>第一条命令是改变文件源，第二个则是cocoapods，等待一段时间后看见如下字样说明安装成功。</p> 
   <pre><code>*** CURRENT SOURCES ***</code></pre> 
   <p>当然，也可以使用版本号命令来验证，如果出现版本号明细就说明我们已经安装成功了。</p> 
   <pre><code>pod --version</code></pre> 
   <h3>使用</h3> 
   <p>cocoapods的配置和我们npm稍有差异，不过也很简单，首先进入我们的项目执行命令。</p> 
   <pre><code>pod init</code></pre> 
   <p>cocoapods会在目录中创建Podfile文件，类似npm中的package.json。下面我们来看一下生成好的podfile文件。</p> 
   <pre><code> # Uncomment this line to define a global platform for your project
    # platform :ios, '9.0'
    
    target 'iwtest' do
      # Uncomment this line if you're using Swift or would like to use dynamic frameworks
      # use_frameworks!
    
      # Pods for iwtest
    
      target 'iwtestTests' do
        inherit! :search_paths
        # Pods for testing
      end
    
      target 'iwtestUITests' do
        inherit! :search_paths
        # Pods for testing
      end
    end</code></pre> 
   <p>现在我们要安装一个第三方的类库 SnapKit，这是它的github主页<a href="https://github.com/SnapKit/SnapKit" rel="nofollow">https://github.com/SnapKit/SnapKit</a>，这个类库是用来做布局的。编辑podfile然后加入我们的需要的类库。</p> 
   <pre><code># 定式部分
    source 'https://github.com/CocoaPods/Specs.git'
    platform :ios, '10.0'
    use_frameworks!
    
    target 'testTodo' do
    
      # 需要引入的类库写到这里

      pod 'SnapKit', '~&gt; 3.2.0'
    
      # Pods for testTodo
      target 'testTodoTests' do
        inherit! :search_paths
        # Pods for testing
      end
    
      target 'testTodoUITests' do
        inherit! :search_paths
        # Pods for testing
      end
    
    end</code></pre> 
   <p>退出编辑模式后执行命令进行安装，命令如下：</p> 
   <pre><code>pod install</code></pre> 
   <h1>OC Swift 混编</h1> 
   <p>众所周知RN是用OC编写的，那如何才能是用Swift来编写RN的组件呢，答案就是IOS原生就支持OC和Swift混编应用。无论是在Swift的项目中新建OC文件还是在OC的项目中新建Swift文件，Xcode都会有下面的一个提示。<br><img src="https://uzshare.com/_p?https://img-blog.csdn.net/20180117151103195" alt="这里写图片描述" title="这里写图片描述"><br>询问是否创建一个bridge文件，这个文件就是混编的关键，直接选择 Create之后会发现工程中多出了一个 project-iwtest-Bridging-Header.h的文件，project是你的工程名。<br><img src="https://uzshare.com/_p?https://img-blog.csdn.net/20180117151155101" alt="这里写图片描述" title="这里写图片描述"><br>如上图，我们在OC的项目中创建了一个test.swift文件，并创建了一个bridge文件，那这个文件是干什么的呢？这个文件主要的功能是将OC的文件接口放在一起然后供Swift文件调用，红圈标注出来的意思是如果你想自己手动创建一个bridge文件也是可以的，但是需要做相应的配置。可以查看<a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/BuildingCocoaApps/MixandMatch.html" rel="nofollow">bridge文件介绍</a>来了解详情。<br><img src="https://uzshare.com/_p?https://img-blog.csdn.net/20180117151352281" alt="这里写图片描述" title="这里写图片描述"></p> 
   <h2>在OC中调用Swift</h2> 
   <p>首先我们定义一个Swift类，定义一个sayHello函数，如果它被调用的话，控制台会打印出Hello, Swift日志。</p> 
   <pre><code>import Foundation

    @objc(MySwift)
    class MySwift:NSObject {
        
        func sayHello(){
            print("Hello, Swift")
        }
    }</code></pre> 
   <p>然后我们编辑ViewController.m 文件。</p> 
   <pre><code>    #import "ViewController.h"
    #import "iwtest-Swift.h"
    
    @interface ViewController ()
    
    @end
    
    @implementation ViewController
    
    - (void)viewDidLoad {
        [super viewDidLoad];
        
        MySwift *mySwift = [[MySwift alloc] init];  
        [swiftObject log];
        // Do any additional setup after loading the view, typically from a nib.
    }
    
    
    - (void)didReceiveMemoryWarning {
        [super didReceiveMemoryWarning];
        // Dispose of any resources that can be recreated.
    }
    @end</code></pre> 
   <p>执行cmd + b，发现没有报错，然后cmd + r，一段时间后控制台准确无误打印出Hello, Swift日志。如下图所示。<br><img src="https://uzshare.com/_p?https://img-blog.csdn.net/20180117151520426" alt="这里写图片描述" title="这里写图片描述"><br>在OC中调用Swift时，应注意两点：</p> 
   <ol>
    <li>Swift中的 @objc(MySwift)这个关键字是Xode定义的，它在编译的时候将Swift文件也转换成OC文件，所以它最后才能以OC的代码格式执行。</li> 
    <li>OC文件中的 #import "iwtest-Swift.h"这个头文件也是Xcode自动创建的，它里面引用了所有你的工程中Swift文件，所以OC文件才能找到并引用。</li> 
   </ol>
   <h2>在Swift中调用OC</h2> 
   <p>我们定义一个OC类，首先创建头文件 Myoc.h。</p> 
   <pre><code>#import &lt;foundation/Foundation.h&gt;
    @interface Myoc : NSObject {}
    + (void) sayHello;
    @end</code></pre> 
   <p>再创建实现文件 Myoc.m。</p> 
   <pre><code> #import &lt;Foundation/Foundation.h&gt;
    #import "Myoc.h"
    @implementation Myoc
    +(void) sayHello {
        NSLog(@"Hello, OC");
    }
    @end</code></pre> 
   <p>同样的，我们创建了一个sayHello函数，当这个函数执行的时候会打印一段日志 Hello, OC然后我们在刚才的Swift文件中调用这个函数。</p> 
   <pre><code> func sayHello(){
        print("Hello, Swift")
        Myoc.sayHello()
    }</code></pre> 
   <p>如果一切正常的话控制台会先后打印 Hello, Swift和Hello, OC，我们编译一下，结果报错了，根本找不到Myoc这个类。 这个时候我们最开始创建的那个bridge文件就派上用场了，先导入这个文件。</p> 
   <pre><code>#import "Myoc.h"</code></pre> 
   <p>这样就完成了混编调用，运行后结果如下：<br><img src="https://uzshare.com/_p?https://img-blog.csdn.net/20180117151902095" alt="这里写图片描述" title="这里写图片描述"></p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
