<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Mysql性能优化一 « NotBeCN</title>
  <meta name="description" content="                                下一篇：Mysql性能优化二      mysql的性能优化无法一蹴而就，必须一步一步慢慢来，从各个方面进行优化，最终性能就会有大的提升。      Mysql数据库的优化技术      对mysql优化是一个综合性的技术，主要包括         ...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/10/16/weixin_33836223_90128906.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">Mysql性能优化一</h1>
    <p class="post-meta">Oct 16, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <h1 style="border-bottom:1px solid rgb(221,221,221);font-size:14px;font-family:Verdana, Arial, Helvetica, sans-serif;"><br></h1> 
   <div class="clear" style="clear:both;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;"></div> 
   <div class="postBody" style="line-height:1.8;"> 
    <div class="blogpost-body"> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">下一篇：<a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/jiekzou/p/5380073.html" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom:1px dotted rgb(51,51,51);">Mysql性能优化二</a></p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">mysql的性能优化无法一蹴而就，必须一步一步慢慢来，从各个方面进行优化，最终性能就会有大的提升。</p> 
     <h2 style="color:#FFFFFF;font-family:'微软雅黑', '宋体', '黑体', Arial;font-size:17px;line-height:25px;background:none repeat scroll 0px 0px;">Mysql数据库的优化技术</h2> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">对mysql优化是一个综合性的技术，主要包括</p> 
     <ul style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      <li>表的设计合理化(符合3NF)</li> 
      <li>添加适当索引(index) [四种: 普通索引、主键索引、唯一索引unique、全文索引]</li> 
      <li>分表技术(水平分割、垂直分割)</li> 
      <li>读写[写: update/delete/add]分离</li> 
      <li>存储过程 [模块化编程，可以提高速度]</li> 
      <li>对mysql配置优化 [配置最大并发数my.ini, 调整缓存大小 ]</li> 
      <li>mysql服务器硬件升级</li> 
      <li>定时的去清除不需要的数据,定时进行碎片整理(MyISAM)</li> 
     </ul>
     <h2 style="color:#FFFFFF;font-family:'微软雅黑', '宋体', '黑体', Arial;font-size:17px;line-height:25px;background:none repeat scroll 0px 0px;">数据库优化工作</h2> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">对于一个以数据为中心的应用，数据库的好坏直接影响到程序的性能，因此数据库性能至关重要。一般来说，要保证数据库的效率，要做好以下四个方面的工作：</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">① 数据库设计</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">② sql语句优化</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">③ 数据库参数配置</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">④ 恰当的硬件资源和操作系统</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">此外，使用适当的存储过程，也能提升性能。</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">这个顺序也表现了这四个工作对性能影响的大小</p> 
     <h2 style="color:#FFFFFF;font-family:'微软雅黑', '宋体', '黑体', Arial;font-size:17px;line-height:25px;background:none repeat scroll 0px 0px;">数据库表设计&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h2> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">通俗地理解三个范式，对于数据库设计大有好处。在数据库设计中，为了更好地应用三个范式，就必须通俗地理解三个范式(通俗地理解是够用的理解，并不是最科学最准确的理解)：</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">第一范式：1NF是对属性的原子性约束，要求属性(列)具有原子性，不可再分解；(只要是关系型数据库都满足1NF)</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">第二范式：2NF是对记录的惟一性约束，要求记录有惟一标识，即实体的惟一性；</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">第三范式：3NF是对字段冗余性的约束，它要求字段没有冗余。 没有冗余的数据库设计可以做到。</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">但是，没有冗余的数据库未必是最好的数据库，有时为了提高运行效率，就必须降低范式标准，适当保留冗余数据。具体做法是： 在概念数据模型设计时遵守第三范式，降低范式标准的工作放到物理数据模型设计时考虑。降低范式就是增加字段，允许冗余。</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>&nbsp;</strong><strong>数据库的分类</strong></p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">关系型数据库: mysql/oracle/db2/informix/sysbase/sql server</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">非关系型数据库: (特点: 面向对象或者集合)</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">NoSql数据库: MongoDB(特点是面向文档)</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">举例说明什么是适度冗余，或者说有理由的冗余!</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;<img src="https://images2015.cnblogs.com/blog/413851/201604/413851-20160409103127859-1064042671.png" alt="" style="border:0px none;"></p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">上面这个就是不合适的冗余，原因是:</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">在这里，为了提高学生活动记录的检索效率，把单位名称冗余到学生活动记录表里。单位信息有500条记录，而学生活动记录在一年内大概有200万数据量。 如果学生活动记录表不冗余这个单位名称字段，只包含三个int字段和一个timestamp字段，只占用了16字节，是一个很小的表。而冗余了一个 varchar(32)的字段后则是原来的3倍，检索起来相应也多了这么多的I/O。而且记录数相差悬殊，500 VS 2000000 ，导致更新一个单位名称还要更新4000条冗余记录。由此可见，这个冗余根本就是适得其反。</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;<img src="https://images2015.cnblogs.com/blog/413851/201604/413851-20160409103251312-1716059760.png" alt="" style="border:0px none;"></p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">订单表里面的Price就是一个冗余字段，因为我们可以从订单明细表中统计出这个订单的价格，但是这个冗余是合理的，也能提升查询性能。</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">从上面两个例子中可以得出一个结论:</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">1---n 冗余应当发生在1这一方.</p> 
     <h2 style="color:#FFFFFF;font-family:'微软雅黑', '宋体', '黑体', Arial;font-size:17px;line-height:25px;background:none repeat scroll 0px 0px;">SQL语句优化&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h2> 
     <h3 style="color:rgb(0,0,0);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:16px;line-height:1.5;">SQL优化的一般步骤</h3> 
     <ol style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      <li style="list-style:decimal;">通过show status命令了解各种SQL的执行频率。</li> 
      <li style="list-style:decimal;">定位执行效率较低的SQL语句-（重点select）</li> 
      <li style="list-style:decimal;">通过explain分析低效率的SQL</li> 
      <li style="list-style:decimal;">确定问题并采取相应的优化措施</li> 
     </ol>
     <div class="cnblogs_code" style="color:rgb(0,0,0);font-family:'Courier New';font-size:12px;border:1px solid rgb(204,204,204);"> 
      <div class="cnblogs_code_toolbar">
       <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:medium none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:medium none;"></a></span>
      </div> 
      <pre><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">--</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> select语句分类</span>
<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">Select</span><span style="font-size:12px;line-height:1.5;">
Dml数据操作语言(</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">insert</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">update</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">delete</span><span style="font-size:12px;line-height:1.5;">)
dtl 数据事物语言(</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">commit</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">rollback</span><span style="font-size:12px;line-height:1.5;"> savepoint)
Ddl数据定义语言(</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">create</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">alter</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">drop</span><span style="font-size:12px;line-height:1.5;">..)
Dcl(数据控制语言) </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">grant</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">revoke</span><span style="color:rgb(51,153,102);font-size:12px;line-height:1.5;">

-- Show status 常用命令
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">--</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">查询本次会话</span><span style="font-size:12px;line-height:1.5;">
Show session status </span><span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">like</span> 'com_<span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">%</span>';     <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">//</span>show session status <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">like</span><span style="font-size:12px;line-height:1.5;"> 'Com_select'

</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">--</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">查询全局</span><span style="font-size:12px;line-height:1.5;">
Show global status </span><span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">like</span> 'com_<span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">%</span><span style="font-size:12px;line-height:1.5;">';

<span style="color:rgb(51,153,102);font-size:12px;line-height:1.5;">-- 给某个用户授权 </span></span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">grant</span> <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">all</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">privileges</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">on</span> <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">*</span>.<span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">*</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">to</span> <span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">abc</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">'</span>@<span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">%</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">--</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">为什么这样授权 'abc'表示用户名  '@' 表示host, 查看一下mysql-&gt;user表就知道了</span>

<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">--</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">回收权限</span>
<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">revoke</span> <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">all</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">on</span> <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">*</span>.<span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">*</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">from</span> <span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">abc</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">'</span>@<span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">%</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">;

</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">--</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">刷新权限[也可以不写]</span><span style="font-size:12px;line-height:1.5;">
flush </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">privileges</span>;</pre> 
      <div class="cnblogs_code_toolbar">
       <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:medium none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:medium none;"></a></span>
      </div> 
     </div> 
     <h2 style="color:#FFFFFF;font-family:'微软雅黑', '宋体', '黑体', Arial;font-size:17px;line-height:25px;background:none repeat scroll 0px 0px;">SQL语句优化-show参数&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h2> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">MySQL客户端连接成功后，通过使用show [session|global] status 命令可以提供服务器状态信息。其中的session来表示当前的连接的统计结果，global来表示自数据库上次启动至今的统计结果。默认是session级别的。<br> 下面的例子：<br> show status like 'Com_%';<br> 其中Com_XXX表示XXX语句所执行的次数。<br> 重点注意：Com_select,Com_insert,Com_update,Com_delete通过这几个参数，可以容易地了解到当前数据库的应用是以插入更新为主还是以查询操作为主，以及各类的SQL大致的执行比例是多少。</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">还有几个常用的参数便于用户了解数据库的基本情况。<br> Connections：试图连接MySQL服务器的次数<br> Uptime：服务器工作的时间（单位秒）<br> Slow_queries：慢查询的次数 (默认是慢查询时间10s)</p> 
     <div class="cnblogs_code" style="color:rgb(0,0,0);font-family:'Courier New';font-size:12px;border:1px solid rgb(204,204,204);">
      <pre>show status <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">like</span><span style="font-size:12px;line-height:1.5;"> 'Connections'
show status </span><span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">like</span><span style="font-size:12px;line-height:1.5;"> 'Uptime'
show status </span><span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">like</span> 'Slow_queries'</pre>
     </div> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">如何查询mysql的慢查询时间</p> 
     <div class="cnblogs_code" style="color:rgb(0,0,0);font-family:'Courier New';font-size:12px;border:1px solid rgb(204,204,204);">
      <pre>Show variables <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">like</span> <span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">long_query_time</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">'</span>;</pre>
     </div> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">修改mysql 慢查询时间</p> 
     <div class="cnblogs_code" style="color:rgb(0,0,0);font-family:'Courier New';font-size:12px;border:1px solid rgb(204,204,204);">
      <pre><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">set</span> long_query_time<span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">=</span><span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">2</span></pre>
     </div> 
     <h2 style="color:#FFFFFF;font-family:'微软雅黑', '宋体', '黑体', Arial;font-size:17px;line-height:25px;background:none repeat scroll 0px 0px;">SQL语句优化-定位慢查询&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h2> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">问题是： 如何从一个大项目中，迅速的定位执行速度慢的语句. (定位慢查询)</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">首先我们了解mysql数据库的一些运行状态如何查询(比如想知道当前mysql运行的时间/一共执行了多少次select/update/delete.. / 当前连接)</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">为了便于测试，我们构建一个大表(400 万)-&gt; 使用存储过程构建</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">默认情况下，mysql认为10秒才是一个慢查询.</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">修改mysql的慢查询.</p> 
     <div class="cnblogs_code" style="color:rgb(0,0,0);font-family:'Courier New';font-size:12px;border:1px solid rgb(204,204,204);">
      <pre>show variables <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">like</span> 'long_query_time' ; <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">//</span><span style="font-size:12px;line-height:1.5;">可以显示当前慢查询时间
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">set</span> long_query_time<span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">=</span><span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">1</span> ;<span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">//</span>可以修改慢查询时间</pre>
     </div> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">构建大表-&gt;大表中记录有要求, 记录是不同才有用，否则测试效果和真实的相差大.创建:</p> 
     <div class="cnblogs_code" style="color:rgb(0,0,0);font-family:'Courier New';font-size:12px;border:1px solid rgb(204,204,204);"> 
      <div class="cnblogs_code_toolbar">
       <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:medium none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:medium none;"></a></span>
      </div> 
      <pre><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">CREATE</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">TABLE</span> dept( <span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">/*</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">部门表</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">*/</span><span style="font-size:12px;line-height:1.5;">
deptno MEDIUMINT   UNSIGNED  </span><span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">NOT</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">NULL</span>  <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">DEFAULT</span> <span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">0</span>,  <span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">/*</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">编号</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">*/</span><span style="font-size:12px;line-height:1.5;">
dname </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">VARCHAR</span>(<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">20</span>)  <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">NOT</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">NULL</span>  <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">DEFAULT</span> "", <span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">/*</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">名称</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">*/</span><span style="font-size:12px;line-height:1.5;">
loc </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">VARCHAR</span>(<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">13</span>) <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">NOT</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">NULL</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">DEFAULT</span> "" <span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">/*</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">地点</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">*/</span><span style="font-size:12px;line-height:1.5;">
) ENGINE</span><span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">=</span>MyISAM <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">DEFAULT</span> CHARSET<span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">=</span><span style="font-size:12px;line-height:1.5;">utf8 ;


</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">CREATE</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">TABLE</span><span style="font-size:12px;line-height:1.5;"> emp
(empno  MEDIUMINT UNSIGNED  </span><span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">NOT</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">NULL</span>  <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">DEFAULT</span> <span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">0</span>, <span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">/*</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">编号</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">*/</span><span style="font-size:12px;line-height:1.5;">
ename </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">VARCHAR</span>(<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">20</span>) <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">NOT</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">NULL</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">DEFAULT</span> "", <span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">/*</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">名字</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">*/</span><span style="font-size:12px;line-height:1.5;">
job </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">VARCHAR</span>(<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">9</span>) <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">NOT</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">NULL</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">DEFAULT</span> "",<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">/*</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">工作</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">*/</span><span style="font-size:12px;line-height:1.5;">
mgr MEDIUMINT UNSIGNED </span><span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">NOT</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">NULL</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">DEFAULT</span> <span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">0</span>,<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">/*</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">上级编号</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">*/</span><span style="font-size:12px;line-height:1.5;">
hiredate DATE </span><span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">NOT</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">NULL</span>,<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">/*</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">入职时间</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">*/</span><span style="font-size:12px;line-height:1.5;">
sal </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">DECIMAL</span>(<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">7</span>,<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">2</span>)  <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">NOT</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">NULL</span>,<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">/*</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">薪水</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">*/</span><span style="font-size:12px;line-height:1.5;">
comm </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">DECIMAL</span>(<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">7</span>,<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">2</span>) <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">NOT</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">NULL</span>,<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">/*</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">红利</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">*/</span><span style="font-size:12px;line-height:1.5;">
deptno MEDIUMINT UNSIGNED </span><span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">NOT</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">NULL</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">DEFAULT</span> <span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">0</span> <span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">/*</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">部门编号</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">*/</span><span style="font-size:12px;line-height:1.5;">
)ENGINE</span><span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">=</span>MyISAM <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">DEFAULT</span> CHARSET<span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">=</span><span style="font-size:12px;line-height:1.5;">utf8 ;


</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">CREATE</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">TABLE</span><span style="font-size:12px;line-height:1.5;"> salgrade
(
grade MEDIUMINT UNSIGNED </span><span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">NOT</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">NULL</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">DEFAULT</span> <span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">0</span><span style="font-size:12px;line-height:1.5;">,
losal </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">DECIMAL</span>(<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">17</span>,<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">2</span>)  <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">NOT</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">NULL</span><span style="font-size:12px;line-height:1.5;">,
hisal </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">DECIMAL</span>(<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">17</span>,<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">2</span>)  <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">NOT</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">NULL</span><span style="font-size:12px;line-height:1.5;">
)ENGINE</span><span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">=</span>MyISAM <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">DEFAULT</span> CHARSET<span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">=</span>utf8;</pre> 
      <div class="cnblogs_code_toolbar">
       <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:medium none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:medium none;"></a></span>
      </div> 
     </div> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">测试数据</p> 
     <div class="cnblogs_code" style="color:rgb(0,0,0);font-family:'Courier New';font-size:12px;border:1px solid rgb(204,204,204);">
      <pre><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">INSERT</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">INTO</span> salgrade <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">VALUES</span> (<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">1</span>,<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">700</span>,<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">1200</span><span style="font-size:12px;line-height:1.5;">);
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">INSERT</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">INTO</span> salgrade <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">VALUES</span> (<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">2</span>,<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">1201</span>,<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">1400</span><span style="font-size:12px;line-height:1.5;">);
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">INSERT</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">INTO</span> salgrade <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">VALUES</span> (<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">3</span>,<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">1401</span>,<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">2000</span><span style="font-size:12px;line-height:1.5;">);
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">INSERT</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">INTO</span> salgrade <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">VALUES</span> (<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">4</span>,<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">2001</span>,<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">3000</span><span style="font-size:12px;line-height:1.5;">);
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">INSERT</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">INTO</span> salgrade <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">VALUES</span> (<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">5</span>,<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">3001</span>,<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">9999</span>);</pre>
     </div> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">为了存储过程能够正常执行，我们需要把命令执行结束符修改delimiter $$</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">创建函数，<span style="line-height:1.8;color:rgb(0,0,0);">该函数会返回一个指定长度的随机字符串</span></p> 
     <div class="cnblogs_code" style="color:rgb(0,0,0);font-family:'Courier New';font-size:12px;border:1px solid rgb(204,204,204);"> 
      <div class="cnblogs_code_toolbar">
       <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:medium none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:medium none;"></a></span>
      </div> 
      <pre>create <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">function</span> rand_string(n <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">INT</span><span style="font-size:12px;line-height:1.5;">) 
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">returns</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">varchar</span>(<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">255</span><span style="font-size:12px;line-height:1.5;">) #该函数会返回一个字符串
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">begin</span><span style="font-size:12px;line-height:1.5;"> 
#chars_str定义一个变量 chars_str,类型是 </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">varchar</span>(<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">100</span>),默认值<span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">abcdefghijklmnopqrstuvwxyzABCDEFJHIJKLMNOPQRSTUVWXYZ</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">;
 </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">declare</span> chars_str <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">varchar</span>(<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">100</span>) <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">default</span>
   <span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">abcdefghijklmnopqrstuvwxyzABCDEFJHIJKLMNOPQRSTUVWXYZ</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">;
 </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">declare</span> return_str <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">varchar</span>(<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">255</span>) <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">default</span> <span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">''</span><span style="font-size:12px;line-height:1.5;">;
 </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">declare</span> i <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">default</span> <span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">0</span><span style="font-size:12px;line-height:1.5;">;
 </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">while</span> i <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">&lt;</span><span style="font-size:12px;line-height:1.5;"> n do 
   </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">set</span> return_str <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">=</span>concat(return_str,<span style="color:rgb(255,0,255);font-size:12px;line-height:1.5;">substring</span>(chars_str,<span style="color:rgb(255,0,255);font-size:12px;line-height:1.5;">floor</span>(<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">1</span><span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">+</span><span style="color:rgb(255,0,255);font-size:12px;line-height:1.5;">rand</span>()<span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">*</span><span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">52</span>),<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">1</span><span style="font-size:12px;line-height:1.5;">));
   </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">set</span> i <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">=</span> i <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">+</span> <span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">1</span><span style="font-size:12px;line-height:1.5;">;
   </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">end</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">while</span><span style="font-size:12px;line-height:1.5;">;
  </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span><span style="font-size:12px;line-height:1.5;"> return_str;
  </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">end</span> </pre> 
      <div class="cnblogs_code_toolbar">
       <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:medium none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:medium none;"></a></span>
      </div> 
     </div> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">创建一个存储过程</p> 
     <div class="cnblogs_code" style="color:rgb(0,0,0);font-family:'Courier New';font-size:12px;border:1px solid rgb(204,204,204);"> 
      <div class="cnblogs_code_toolbar">
       <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:medium none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:medium none;"></a></span>
      </div> 
      <pre><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">create</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">procedure</span> insert_emp(<span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">in</span> start <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span>(<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">10</span>),<span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">in</span> max_num <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span>(<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">10</span><span style="font-size:12px;line-height:1.5;">))
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">begin</span>
<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">declare</span> i <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">default</span> <span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">0</span><span style="font-size:12px;line-height:1.5;">; 
#</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">set</span> autocommit <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">=</span><span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">0</span><span style="font-size:12px;line-height:1.5;"> 把autocommit设置成0
 </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">set</span> autocommit <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">=</span> <span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">0</span><span style="font-size:12px;line-height:1.5;">;  
 repeat
 </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">set</span> i <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">=</span> i <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">+</span> <span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">1</span><span style="font-size:12px;line-height:1.5;">;
 </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">insert</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">into</span> emp <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">values</span> ((start<span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">+</span>i) ,rand_string(<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">6</span>),<span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">SALESMAN</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">'</span>,<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">0001</span>,curdate(),<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">2000</span>,<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">400</span><span style="font-size:12px;line-height:1.5;">,rand());
  until i </span><span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">=</span><span style="font-size:12px;line-height:1.5;"> max_num
 </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">end</span><span style="font-size:12px;line-height:1.5;"> repeat;
   </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">commit</span><span style="font-size:12px;line-height:1.5;">;
 </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">end</span> </pre> 
      <div class="cnblogs_code_toolbar">
       <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:medium none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:medium none;"></a></span>
      </div> 
     </div> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">#调用刚刚写好的函数, 1800000条记录,从100001号开始</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">call insert_emp(100001,4000000);</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">这时我们如果出现一条语句执行时间超过1秒中，就会统计到.</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">如果把慢查询的sql记录到我们的一个日志中</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">在默认情况下，低版本的mysql不会记录慢查询，需要在启动mysql时候，指定记录慢查询才可以</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp; bin\mysqld.exe - -safe-mode&nbsp; - -slow-query-log [mysql5.5 可以在my.ini指定]</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp; &nbsp;&nbsp;bin\mysqld.exe –log-slow-queries=d:/abc.log [低版本mysql5.0可以在my.ini指定]</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">该慢查询日志会放在data目录下[在mysql5.0这个版本中时放在 mysql安装目录/data/下],在 mysql5.5.19下是需要查看</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">my.ini 的 datadir="C:/Documents and Settings/All Users/Application Data/MySQL/MySQL Server 5.5/Data/“来确定.</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">在mysql5.6中，默认是启动记录慢查询的，my.ini的所在目录为：C:\ProgramData\MySQL\MySQL Server 5.6，其中有一个配置项</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">slow-query-log=1</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">针对 mysql5.5启动慢查询有两种方法</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">bin\mysqld.exe - -safe-mode&nbsp; - -slow-query-log</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">也可以在my.ini 文件中配置:</p> 
     <div class="cnblogs_code" style="color:rgb(0,0,0);font-family:'Courier New';font-size:12px;border:1px solid rgb(204,204,204);">
      <pre><span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">[<span style="font-size:12px;line-height:1.5;">mysqld<span style="font-size:12px;line-height:1.5;">]<span style="color:rgb(0,0,0);font-size:12px;line-height:1.5;"> # The TCP/IP Port the MySQL Server will listen on port=3306<span style="font-size:12px;line-height:1.5;"> slow-query-log</span></span></span></span></span></pre>
     </div> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">通过慢查询日志定位执行效率较低的SQL语句。慢查询日志记录了所有执行时间超过long_query_time所设置的SQL语句。<br> show variables like 'long_query_time';<br> set long_query_time=2;</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">为dept表添加数据</p> 
     <div class="cnblogs_code" style="color:rgb(0,0,0);font-family:'Courier New';font-size:12px;border:1px solid rgb(204,204,204);"> 
      <div class="cnblogs_code_toolbar">
       <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:medium none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:medium none;"></a></span>
      </div> 
      <pre><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">desc</span><span style="font-size:12px;line-height:1.5;"> dept;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">ALTER</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">table</span>  dept <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">add</span> id <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">PRIMARY</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">key</span><span style="font-size:12px;line-height:1.5;"> auto_increment;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">CREATE</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">PRIMARY</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">KEY</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">on</span><span style="font-size:12px;line-height:1.5;"> dept(id);
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">create</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">INDEX</span> idx_dptno_dptname <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">on</span><span style="font-size:12px;line-height:1.5;"> dept(deptno,dname);
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">INSERT</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">into</span> dept(deptno,dname,loc) <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">values</span>(<span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">1</span>,<span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">研发部</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">'</span>,<span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">康和盛大厦5楼501</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">);
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">INSERT</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">into</span> dept(deptno,dname,loc) <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">values</span>(<span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">2</span>,<span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">产品部</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">'</span>,<span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">康和盛大厦5楼502</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">);
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">INSERT</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">into</span> dept(deptno,dname,loc) <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">values</span>(<span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">3</span>,<span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">财务部</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">'</span>,<span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">康和盛大厦5楼503</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">);<br>
UPDATE emp set deptno=1 where empno=100002;
</span></pre> 
      <div class="cnblogs_code_toolbar">
       <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:medium none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:medium none;"></a></span>
      </div> 
     </div> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">****测试语句***[对emp表的记录可以为3600000 ,效果很明显慢]</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">select * from emp where empno=(select empno from emp where ename='<span style="line-height:1.8;color:rgb(255,0,0);">研发部</span>')</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">如果带上order by e.empno 速度就会更慢，有时会到1min多.</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">测试语句</p> 
     <div class="cnblogs_code" style="color:rgb(0,0,0);font-family:'Courier New';font-size:12px;border:1px solid rgb(204,204,204);">
      <pre> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">select <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">* <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">from emp e,dept d <span style="font-size:12px;line-height:1.5;">where e.empno<span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">=<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">100002 <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">and e.deptno<span style="font-size:12px;line-height:1.5;">=d.deptno; </span></span></span></span></span></span></span></span></pre>
     </div> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">查看慢查询日志：默认为数据目录data中的host-name-slow.log。低版本的mysql需要通过在开启mysql时使用- -log-slow-queries[=file_name]来配置</p> 
     <h2 style="color:#FFFFFF;font-family:'微软雅黑', '宋体', '黑体', Arial;font-size:17px;line-height:25px;background:none repeat scroll 0px 0px;">SQL语句优化-explain分析问题&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h2> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">Explain select * from emp where ename=“wsrcla”<br> 会产生如下信息：<br> select_type:表示查询的类型。<br> table:输出结果集的表<br> type:表示表的连接类型<br> possible_keys:表示查询时，可能使用的索引<br> key:表示实际使用的索引<br> key_len:索引字段的长度<br> rows:扫描出的行数(估算的行数)<br> Extra:执行情况的描述和说明</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;<img src="https://images2015.cnblogs.com/blog/413851/201604/413851-20160409103348750-1052391625.png" alt="" style="border:0px none;"></p> 
     <div class="cnblogs_code" style="color:rgb(0,0,0);font-family:'Courier New';font-size:12px;border:1px solid rgb(204,204,204);">
      <pre>explain <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">select</span> <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">*</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">from</span> emp <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">where</span> ename<span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">=</span>'JKLOIP'</pre>
     </div> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">如果要测试Extra的filesort可以对上面的语句修改</p> 
     <div class="cnblogs_code" style="color:rgb(0,0,0);font-family:'Courier New';font-size:12px;border:1px solid rgb(204,204,204);">
      <pre>explain <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">select</span> <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">*</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">from</span> emp <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">order</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">by</span> ename</pre>
     </div> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>EXPLAIN</strong><strong>详解</strong></p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>id</strong></p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">SELECT识别符。这是SELECT的查询序列号</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">id 示例</p> 
     <div class="cnblogs_code" style="color:rgb(0,0,0);font-family:'Courier New';font-size:12px;border:1px solid rgb(204,204,204);">
      <pre><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">SELECT</span> <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">*</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">FROM</span> emp <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">WHERE</span> empno <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">=</span> <span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">1</span> <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">and</span> ename <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">=</span> (<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">SELECT</span> ename <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">FROM</span> emp <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">WHERE</span> empno <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">=</span>  10000<span style="color:rgb(128,0,0);font-weight:bold;font-size:12px;line-height:1.5;">1</span>) \G;</pre>
     </div> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>select_type</strong></p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">PRIMARY&nbsp;&nbsp;&nbsp; :子查询中最外层查询</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">SUBQUERY : 子查询内层第一个SELECT，结果不依赖于外部查询</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">DEPENDENT SUBQUERY:子查询内层第一个SELECT，依赖于外部查询</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">UNION&nbsp;&nbsp; :UNION语句中第二个SELECT开始后面所有SELECT，</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">SIMPLE：简单的 select 查询,不使用 union 及子查询</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">UNION ：UNION 中的第二个或随后的 select 查询,不依赖于外部查询的结果集</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>Table</strong></p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">显示这一步所访问数据库中表名称</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>Type</strong></p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">对表访问方式</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">ALL：</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">SELECT * FROM emp \G</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">完整的表扫描 通常不好</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">SELECT * FROM (SELECT * FROM emp WHERE empno = 1) a ;</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">system：表仅有一行(=系统表)。这是const联接类型的一个特</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">const：表最多有一个匹配行</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>Possible_keys</strong></p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">该查询可以利用的索引，如果没有任何索引显示&nbsp; null</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>Key&nbsp;</strong></p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">Mysql 从 Possible_keys 所选择使用索引</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>Rows</strong></p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">估算出结果集行数</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>Extra</strong></p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">查询细节信息</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">No tables ：Query语句中使用FROM DUAL 或不含任何FROM子句</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">Using filesort ：当Query中包含 ORDER BY 操作，而且无法利用索引完成排序，</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">Impossible WHERE noticed after reading const tables: MYSQL Query Optimizer</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">通过收集统计信息不可能存在结果</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">Using temporary：某些操作必须使用临时表，常见 GROUP BY&nbsp; ; ORDER BY</p> 
     <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">Using where：不用读取表中所有信息，仅通过索引就可以获取所需数据;</p> 
     <p><font color="#333333"><span style="font-size:15px;">本文转自邹琼俊博客园博客，原文链接：http://www.cnblogs.com/jiekzou/p/5371085.html，如需转载请自行联系原作者</span></font><br></p> 
    </div> 
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
