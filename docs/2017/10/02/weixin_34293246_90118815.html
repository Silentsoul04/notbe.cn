<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>ASP.NET MVC Bundling and RequireJS « NotBeCN</title>
  <meta name="description" content="             高手速来围观帮忙解惑~关于ASP.NET&nbsp;MVC&nbsp;Bundling&nbsp;and&nbsp;RequireJS的取舍问题，最近比较困惑，我希望有一种方式可以结合两者的优点。作为.NET程序员，难道你没有过这方面的困惑吗？    &nbsp;&nbsp;&nbsp;...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/10/02/weixin_34293246_90118815.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">ASP.NET MVC Bundling and RequireJS</h1>
    <p class="post-meta">Oct 2, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <p align="left" style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">高手速来围观帮忙解惑~关于ASP.NET&nbsp;MVC&nbsp;Bundling&nbsp;and&nbsp;RequireJS的取舍问题，最近比较困惑，我希望有一种方式可以结合两者的优点。作为.NET程序员，难道你没有过这方面的困惑吗？</p> 
   <p align="left" style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp; 因为我感觉各自都有优缺点，RequireJS的缺点在于，在开发的时候，你不能引入压缩后的js或者css，否则无法调试和修改，而Bundling的话debug模式默认情况下是不压缩，你一发布到生产成release就自动压缩，调试起来非常方便。RequireJS的优点在于可以异步按需加载，还有就是模块化js代码，而Bundling 则是简单粗暴的全部合并成一个文件进行加载，你看不出模块化引用也实现不了按需加载， 那么在开发过程中作为.NET程序员是如何取舍的呢？能不能结合二者的优点来使用呢？</p> 
   <p align="left" style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;<strong>目标：在ASP.NET MVC项目中实现js和css的模块化，并支持压缩合并。</strong></p> 
   <p align="left" style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp; 如果你跟我说你还不知道RequireJS是个神马冬冬？请移步至：<a href="http://requirejs.org/docs/api.html" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom:1px dotted rgb(51,51,51);">http://requirejs.org/docs/api.html</a></p> 
   <p align="left" style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp; 项目目录结构沿用上一篇<a id="homepage1_HomePageDays_DaysList_ctl01_DayList_TitleUrl_0" class="postTitle2" href="http://www.cnblogs.com/jiekzou/p/7084827.html" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom:1px dotted rgb(51,51,51);">ASP.NET MVC 重写RazorViewEngine实现多主题切换</a></p> 
   <h2 style="color:#FFFFFF;line-height:25px;font-size:17px;background:none repeat scroll 0px 0px;font-family:'微软雅黑', '宋体', '黑体', Arial;">方式一 Bunding+RequireJS混用</h2> 
   <p align="left" style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">先来看看一个老外的做法，他大体上是这样做的：</p> 
   <h3 style="font-size:16px;line-height:1.5;font-family:Verdana, Arial, Helvetica, sans-serif;">Bundling部分</h3> 
   <p align="left" style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">App_Start/BundleConfig.cs:</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre>bundles.Add(<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">new</span> ScriptBundle(<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">~/bundles/test</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">).Include(
                   </span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">~/Scripts/jquery-{version}.js</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">,
                   </span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">~/Scripts/q.js</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">,
                   </span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">~/Scripts/globalize.js</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span>));</pre>
   </div> 
   <h3 style="font-size:16px;line-height:1.5;font-family:Verdana, Arial, Helvetica, sans-serif;">RequireJS配置部分</h3> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">在ASP.NET MVC项目中，我们一般是在_Layout母版页中添加js引用</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:medium none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:medium none;"></a></span>
    </div> 
    <pre>    <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">script </span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">src</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="~/Scripts/require.js"</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;&lt;/</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">script</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;</span><span style="font-size:12px;line-height:1.5;">
    @if (!HttpContext.Current.IsDebuggingEnabled)
    {
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">script</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;</span><span style="font-size:12px;line-height:1.5;">
            requirejs.config({
                bundles: {
                    </span><span style="font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">@Scripts.Url("~/bundles/test").ToString()</span><span style="font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">: [
                        </span><span style="font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">jquery</span><span style="font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">,
                        </span><span style="font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">globalize</span><span style="font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">,
                        </span><span style="font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">q</span><span style="font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">]
                }
            });
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">script</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;</span><span style="font-size:12px;line-height:1.5;">
    }</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:medium none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:medium none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>个人点评：很不优雅的实现方式，说好的模块化呢？而且并没有提供完整的应用程序解决方案。</strong></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">老外原文地址：<a href="http://therealmofcode.com/posts/2014/03/aspnet-mvc-bundling-minification-requirejs.html" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom:1px dotted rgb(51,51,51);">ASP.NET MVC Bundling and Minification with RequireJS</a></p> 
   <h2 style="color:#FFFFFF;line-height:25px;font-size:17px;background:none repeat scroll 0px 0px;font-family:'微软雅黑', '宋体', '黑体', Arial;">方式二 RequireJS.NET</h2> 
   <p align="left" style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">但是随后我就发现了一个插件<a href="http://requirejsnet.veritech.io/" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom:1px dotted rgb(51,51,51);">RequireJS.NET</a></p> 
   <p align="left" style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">什么是RequireJS.NET？</p> 
   <p align="left" style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">RequireJS.NET让每一个C#程序员可以来构建JavaScript代码，不需要具备高级的js编程技能就可以来理解和使用。</p> 
   <p align="left" style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">在ASP.NET MVC中使用RequireJS的优势：</p> 
   <ul style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <li>让JavaScript代码更加可复用</li> 
    <li>可靠的对象和依赖关系管理</li> 
    <li>适用于大型复杂的应用</li> 
    <li>异步加载JavaScript文件</li> 
   </ul>
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>个人点评：安装这个安装那个，而且比较死板，我完全可以自己写代码实现它的功能，而且更加灵活，想怎么改怎么改。</strong></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">RequireJS.NET的使用请参考：<a href="http://requirejsnet.veritech.io/setup.html" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom:1px dotted rgb(51,51,51);">Getting started with RequireJS for ASP.NET MVC</a></p> 
   <h2 style="color:#FFFFFF;line-height:25px;font-size:17px;background:none repeat scroll 0px 0px;font-family:'微软雅黑', '宋体', '黑体', Arial;">我的实现方式</h2> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp; 接下来，我将隆重推出我的实现方式<strong>。</strong>我的做法是：抛弃ASP.NET MVC自带的Bundling功能，因为它太傻瓜、太粗暴了，但是可以将<strong>RequireJS and R.js&nbsp;</strong>很友好的集成在ASP.NET MVC项目中来。虽然RequireJS看上去在单页应用的场景下用起来非常方便，但是在应用程序场景下也是同样适用的，只要你愿意接受它的这种方式。</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>使用技术： using RequireJS and R.js</strong></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">目录结构如下：</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong><img src="https://images2015.cnblogs.com/blog/413851/201706/413851-20170629162639352-1096620290.png" alt="" style="border:0px none;"><img src="https://images2015.cnblogs.com/blog/413851/201706/413851-20170629163110789-1409041266.png" alt="" style="border:0px none;"><img src="https://images2015.cnblogs.com/blog/413851/201706/413851-20170629163114946-277200862.png" alt="" style="border:0px none;"></strong></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">由于在ASP.NET MVC项目中，有模板页_Layout.cshtml，那么我可以把一些公用调用的东西直接放到模板页中，这里我通过Html的扩展方法进行了封装</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">css的调用：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre>     <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">link </span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">rel</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="stylesheet"</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;"> href</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="@Html.StylesPath("</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">main.css")" </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">/&gt;</span></pre>
   </div> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">js的调用：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre>    <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">script </span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">src</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="@Url.Content("</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">~/themes/default/content/js/require.js")"</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;&lt;/</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">script</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;</span>
    <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">script</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;</span><span style="font-size:12px;line-height:1.5;">   @Html.ViewSpecificRequireJS()</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">script</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;</span><span style="font-size:12px;line-height:1.5;">
        @RenderSection("scripts", required: false)</span></pre>
   </div> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">RequireJsHelpers：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:medium none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:medium none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System.IO;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System.Text;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System.Web;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System.Web.Mvc;

</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">namespace</span><span style="font-size:12px;line-height:1.5;"> Secom.Emx.WebApp
{
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">static</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">class</span><span style="font-size:12px;line-height:1.5;"> RequireJsHelpers
    {
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">private</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">static</span> MvcHtmlString RequireJs(<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">this</span> HtmlHelper helper, <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">string</span> config, <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">string</span><span style="font-size:12px;line-height:1.5;"> module)
        {
            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">var</span> require = <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">new</span><span style="font-size:12px;line-height:1.5;"> StringBuilder();
            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">string</span> jsLocation = <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">/themes/default/content/release-js/</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">#if</span> DEBUG<span style="font-size:12px;line-height:1.5;">
            jsLocation </span>= <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">/themes/default/content/js/</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">#endif</span>

            <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span> (File.Exists(helper.ViewContext.HttpContext.Server.MapPath(Path.Combine(jsLocation, module + <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">.js</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">))))
            {
                require.AppendLine(</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">require( [ \"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span> + jsLocation + config + <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">\" ], function() {</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">);
                require.AppendLine(</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">    require( [ \"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span> + module + <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">\",\"domReady!\"] ); </span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">);
                require.AppendLine(</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">});</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">);
            }

            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">new</span><span style="font-size:12px;line-height:1.5;"> MvcHtmlString(require.ToString());
        }

        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">static</span> MvcHtmlString ViewSpecificRequireJS(<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">this</span><span style="font-size:12px;line-height:1.5;"> HtmlHelper helper)
        {
            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">var</span> areas = helper.ViewContext.RouteData.DataTokens[<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">area</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">];
            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">var</span> action = helper.ViewContext.RouteData.Values[<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">action</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">];
            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">var</span> controller = helper.ViewContext.RouteData.Values[<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">controller</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">];

            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">string</span> url = areas == <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">null</span>? <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">string</span>.Format(<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">views/{0}/{1}</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span>, controller, action): <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">string</span>.Format(<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">views/areas/{2}/{0}/{1}</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">, controller, action, areas);

            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> helper.RequireJs(<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">config.js</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">, url);
        }
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">static</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">string</span> StylesPath(<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">this</span> HtmlHelper helper, <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">string</span><span style="font-size:12px;line-height:1.5;"> pathWithoutStyles)
        {
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">#if</span> (DEBUG)
            <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">var</span> stylesPath = <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">~/themes/default/content/css/</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">#else</span>
            <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">var</span> stylesPath =  <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">~/themes/default/content/release-css/</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">#endif</span>
            <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> VirtualPathUtility.ToAbsolute(stylesPath +<span style="font-size:12px;line-height:1.5;"> pathWithoutStyles);
        }
    }
}</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:medium none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:medium none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">再来看下我们的js主文件config.js</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:medium none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:medium none;"></a></span>
    </div> 
    <pre><span style="font-size:12px;line-height:1.5;">requirejs.config({
    baseUrl: </span>'/themes/default/content/js'<span style="font-size:12px;line-height:1.5;">,
    paths: {
        </span>"jquery": "jquery.min"<span style="font-size:12px;line-height:1.5;">,
        </span>"jqueryValidate": "lib/jquery.validate.min"<span style="font-size:12px;line-height:1.5;">,
        </span>"jqueryValidateUnobtrusive": "lib/jquery.validate.unobtrusive.min"<span style="font-size:12px;line-height:1.5;">,
        </span>"bootstrap": "lib/bootstrap.min"<span style="font-size:12px;line-height:1.5;">,
        </span>"moment": "lib/moment.min"<span style="font-size:12px;line-height:1.5;">,
        </span>"domReady": "lib/domReady"<span style="font-size:12px;line-height:1.5;">,
    },
    shim: {
        </span>'bootstrap'<span style="font-size:12px;line-height:1.5;">: {
            deps: [</span>'jquery'<span style="font-size:12px;line-height:1.5;">],
            exports: </span>"jQuery.fn.popover"<span style="font-size:12px;line-height:1.5;">
        },
        </span>"jqueryValidate": ["jquery"<span style="font-size:12px;line-height:1.5;">],
        </span>"jqueryValidateUnobtrusive": ["jquery", "jqueryValidate"<span style="font-size:12px;line-height:1.5;">]
    }
});</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:medium none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:medium none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;在开发环境，我们的css文件肯定不能压缩合并，不然无法调试了，而生产环境肯定是需要压缩和合并的，那么我想要开发的时候不合并，一发布到生产就自动合并</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/413851/201706/413851-20170629163238258-753836908.png" alt="" style="border:0px none;"></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">那么有两种方式，一种呢是单独写一个批处理脚本，每次发布到生产的时候就运行一下，一种呢是直接在项目的生成事件中进行配置，如果是debug模式就不压缩合并，如果是release模式则压缩合并</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/413851/201706/413851-20170629163356414-211168348.png" alt="" style="border:0px none;"></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span> $(ConfigurationName) == Release node <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">$(ProjectDir)themes\default\content\build\r.js</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span> -o <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">$(ProjectDir)themes\default\content\build\build-js.js</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span>
<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span> $(ConfigurationName) == Release node <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">$(ProjectDir)themes\default\content\build\r.js</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span> -o <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">$(ProjectDir)themes\default\content\build\build-css.js</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span></pre>
   </div> 
   <h3 style="font-size:16px;line-height:1.5;font-family:Verdana, Arial, Helvetica, sans-serif;">自动构建</h3> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">批处理自动合并压缩脚本build.bat：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:medium none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:medium none;"></a></span>
    </div> 
    <pre>@<span style="font-size:12px;line-height:1.5;">echo off
echo start build js
node.exe r.js </span>-o build-<span style="font-size:12px;line-height:1.5;">js.js
echo </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">end</span><span style="font-size:12px;line-height:1.5;"> build js
echo start build css
node.exe r.js </span>-o build-<span style="font-size:12px;line-height:1.5;">css.js
echo </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">end</span><span style="font-size:12px;line-height:1.5;"> build css
echo. </span>&amp; pause</pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:medium none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:medium none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">因为我的js文件是和控制器中的view视图界面一一对应的，那么我需要一个动态的js构建脚本，这里我使用强大的T4模板来实现，新建一个文本模板build-js.tt，如果你的VS没有T4的智能提示，你需要安装一个VS插件，打开VS——工具——扩展和更新：</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/413851/201706/413851-20170629163900008-1037014089.png" alt="" style="border:0px none;"></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">T4模板代码如下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:medium none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:medium none;"></a></span>
    </div> 
    <pre>&lt;#@ template debug=<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">false</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span> hostspecific=<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">true</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span> language=<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">C#</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span> #&gt;
&lt;#@ assembly name=<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">System.Core</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span> #&gt;
&lt;#@ import <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">namespace</span>=<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">System.Linq</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span> #&gt;
&lt;#@ import <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">namespace</span>=<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">System.IO</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span> #&gt;
&lt;#@ import <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">namespace</span>=<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">System.Configuration</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span> #&gt;
&lt;#@ import <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">namespace</span>=<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">System.Text</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span> #&gt;
&lt;#@ import <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">namespace</span>=<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">System.Collections.Generic</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span> #&gt;
&lt;#@ output extension=<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">.js</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span> #&gt;<span style="font-size:12px;line-height:1.5;">
({
    appDir: </span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">&lt;#= relativeBaseUrl #&gt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">,
    baseUrl: </span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">./</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">,
    mainConfigFile: </span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">&lt;#= relativeBaseUrl #&gt;/config.js</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">,
    dir: </span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">../release-js</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">,
    modules: [
    {
        name: </span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">config</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">,
        include: [
            </span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;"> These JS files will be on EVERY page in the main.js file
            </span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;"> So they should be the files we will almost always need everywhere</span>
            <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">domReady</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">,
            </span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">jquery</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">,
            </span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">jqueryValidate</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">,
            </span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">jqueryValidateUnobtrusive</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">,
            </span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">bootstrap</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">,
            </span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">moment</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">
            ]
    },
    </span>&lt;# <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">foreach</span>(<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">string</span> path <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">in</span> System.IO.Directory.GetFiles(<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">this</span>.Host.ResolvePath(relativeBaseUrl+<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">/views</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span>), <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">*.js</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span>, System.IO.SearchOption.AllDirectories)) { #&gt;<span style="font-size:12px;line-height:1.5;">
{
       name: </span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">&lt;#= GetRequireJSName(path) #&gt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">
    },
    </span>&lt;# } #&gt;<span style="font-size:12px;line-height:1.5;">
],
    onBuildRead: function (moduleName, path, contents) {
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span> (moduleName = <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">config</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">) {
            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> contents.replace(<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">/themes/default/content/js</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span>,<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">/themes/default/content/release-js</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">)
        }
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span><span style="font-size:12px;line-height:1.5;"> contents;
    },
})

</span>&lt;#+ 
    <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">const</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">string</span> relativeBaseUrl = <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">../js</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">;

    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">string</span> GetRequireJSName(<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">string</span><span style="font-size:12px;line-height:1.5;"> path){
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">var</span> relativePath = Path.GetFullPath(path).Replace(Path.GetFullPath(<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">this</span>.Host.ResolvePath(<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">..\\js\\</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span>)), <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">""</span><span style="font-size:12px;line-height:1.5;">);
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> Path.Combine(Path.GetDirectoryName(relativePath), Path.GetFileNameWithoutExtension(relativePath)).Replace(<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">\\</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span>, <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">/</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">);
} #</span>&gt;</pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:medium none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:medium none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">通过T4模板生产的构建脚本如下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:medium none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:medium none;"></a></span>
    </div> 
    <pre><span style="font-size:12px;line-height:1.5;">({
    appDir: </span>'../js'<span style="font-size:12px;line-height:1.5;">,
    baseUrl: </span>'./'<span style="font-size:12px;line-height:1.5;">,
    mainConfigFile: </span>'../js/config.js'<span style="font-size:12px;line-height:1.5;">,
    dir: </span>'../release-js'<span style="font-size:12px;line-height:1.5;">,
    modules: [
    {
        name: </span>"config"<span style="font-size:12px;line-height:1.5;">,
        include: [
            </span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;"> These JS files will be on EVERY page in the main.js file</span>
            <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;"> So they should be the files we will almost always need everywhere</span>
            "domReady"<span style="font-size:12px;line-height:1.5;">,
            </span>"jquery"<span style="font-size:12px;line-height:1.5;">,
            </span>"jqueryValidate"<span style="font-size:12px;line-height:1.5;">,
            </span>"jqueryValidateUnobtrusive"<span style="font-size:12px;line-height:1.5;">,
            </span>"bootstrap"<span style="font-size:12px;line-height:1.5;">,
            </span>"moment"<span style="font-size:12px;line-height:1.5;">
            ]
    },
    {
       name: </span>'views/areas/admin/default/index'<span style="font-size:12px;line-height:1.5;">
    },
    {
       name: </span>'views/home/index'<span style="font-size:12px;line-height:1.5;">
    },
    {
       name: </span>'views/home/login'<span style="font-size:12px;line-height:1.5;">
    },
    ],
    onBuildRead: </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">function</span><span style="font-size:12px;line-height:1.5;"> (moduleName, path, contents) {
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span> (moduleName = "config"<span style="font-size:12px;line-height:1.5;">) {
            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> contents.replace("/themes/default/content/js","/themes/default/content/release-js"<span style="font-size:12px;line-height:1.5;">)
        }
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span><span style="font-size:12px;line-height:1.5;"> contents;
    },
})</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:medium none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:medium none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>&nbsp;个人点评：灵活性很好，想怎么整怎么整，而且可以很好的支持每日构建和持续集成。</strong></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;有时候，总是会在某一刹那间就有新奇的想法，这就是程序员，如果你觉得我的文章对你有帮助或者启发，请推荐一下吧！如果有自己的想法也请提出来，大家一起探讨！</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;后记：我本来还想给每js和css的url路径后缀添加版本号来实现客户端缓存的自动更新，如?v=1.0，但是后面想了下浏览器本身就自带客户端缓存，所以就先没有添加，如果真有需要，可以随时补上。</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;调整后的项目源码：https://git.coding.net/zouyujie/Smp.git</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><br></p> 
   <p><font color="#333333"><span style="font-size:14px;">本文转自邹琼俊博客园博客，原文链接：http://www.cnblogs.com/jiekzou/p/7089781.html，如需转载请自行联系原作者</span></font><br></p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
