<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Android -- Property Animation « NotBeCN</title>
  <meta name="description" content="                             3.0以前，android支持两种动画模式，tween animation,frame animation，在android3.0中又引入了一个新的动画系统：property animation，这三种动画模式在SDK中被称为property animat...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/10/01/weixin_34075551_90125125.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">Android -- Property Animation</h1>
    <p class="post-meta">Oct 1, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <div>
    <br>
   </div> 
   <div> 
    <p style="line-height:24px;color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;">3.0以前，android支持两种动画模式，tween animation,frame animation，在android3.0中又引入了一个新的动画系统：property animation，这三种动画模式在SDK中被称为property animation,view animation,drawable animation。</p> 
    <h2 style="color:rgb(177,177,177);font-size:21px;line-height:1.5;font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;">相关API</h2> 
    <ul style="color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;">
     <li style="list-style-type:disc;">Property Animation故名思议就是通过动画的方式改变对象的属性了，我们首先需要了解几个属性：</li> 
     <li style="list-style-type:disc;">Duration动画的持续时间，默认300ms。</li> 
     <li style="list-style-type:disc;">Time interpolation：时间差值，乍一看不知道是什么，但是我说LinearInterpolator、AccelerateDecelerateInterpolator，大家一定知道是干嘛的了，定义动画的变化率。</li> 
     <li style="list-style-type:disc;">Repeat count and behavior：重复次数、以及重复模式；可以定义重复多少次；重复时从头开始，还是反向。</li> 
     <li style="list-style-type:disc;">Animator sets: 动画集合，你可以定义一组动画，一起执行或者顺序执行。</li> 
     <li style="list-style-type:disc;">Frame refresh delay：帧刷新延迟，对于你的动画，多久刷新一次帧；默认为10ms，但最终依赖系统的当前状态；基本不用管。</li> 
    </ul>
    <p style="line-height:24px;color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;">&nbsp;</p> 
    <ul style="color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;">
     <li style="list-style-type:disc;">ObjectAnimator&nbsp; 动画的执行类，后面详细介绍</li> 
     <li style="list-style-type:disc;">ValueAnimator 动画的执行类，后面详细介绍</li> 
     <li style="list-style-type:disc;">AnimatorSet 用于控制一组动画的执行：线性，一起，每个动画的先后执行等。</li> 
     <li style="list-style-type:disc;">AnimatorInflater 用户加载属性动画的xml文件</li> 
     <li style="list-style-type:disc;">TypeEvaluator&nbsp; 类型估值，主要用于设置动画操作属性的值。</li> 
     <li style="list-style-type:disc;">TimeInterpolator 时间插值，上面已经介绍。</li> 
    </ul>
    <h2 style="color:rgb(177,177,177);font-size:21px;line-height:1.5;font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;">ObjectAnimator</h2> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(153,153,153);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
     <pre><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span> ObjectAnimActivity <span style="color:rgb(0,0,255);line-height:1.5;">extends</span><span style="line-height:1.5;"> Activity  
{  
    @Override  
    </span><span style="color:rgb(0,0,255);line-height:1.5;">protected</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> onCreate(Bundle savedInstanceState)  
    {  
        </span><span style="color:rgb(0,0,255);line-height:1.5;">super</span><span style="line-height:1.5;">.onCreate(savedInstanceState);  
        setContentView(R.layout.xml_for_anim);  
    }  
  
    </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> rotateyAnimRun(View view)  
    {  
         ObjectAnimator</span><span style="color:rgb(0,128,0);line-height:1.5;">//</span>  
         .ofFloat(view, "rotationX", 0.0F, 360.0F)<span style="color:rgb(0,128,0);line-height:1.5;">//</span>  
         .setDuration(500)<span style="color:rgb(0,128,0);line-height:1.5;">//</span>  
<span style="line-height:1.5;">         .start();  
    }  
  
}</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(153,153,153);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
    </div> 
    <p style="line-height:24px;color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;">对于ObjectAnimator</p> 
    <p style="line-height:24px;color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;">1、提供了ofInt、ofFloat、ofObject，这几个方法都是设置动画作用的元素、作用的属性、动画开始、结束、以及中间的任意个属性值。</p> 
    <p style="line-height:24px;color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;">当对于属性值，只设置一个的时候，会认为当然对象该属性的值为开始（getPropName反射获取），然后设置的值为终点。如果设置两个，则一个为开始、一个为结束</p> 
    <p style="line-height:24px;color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;">动画更新的过程中，会不断调用setPropName更新元素的属性，所有使用ObjectAnimator更新某个属性，必须得有getter（设置一个属性值的时候）和setter方法</p> 
    <p style="line-height:24px;color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;">2、如果你操作对象的该属性方法里面，比如上例的setRotationX如果内部没有调用view的重绘，则你需要自己按照下面方式手动调用。</p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(153,153,153);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
     <pre>anim.addUpdateListener(<span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> AnimatorUpdateListener()  
        {  
            @Override  
            </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> onAnimationUpdate(ValueAnimator animation)  
            {  
</span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">              view.postInvalidate();  
</span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">              view.invalidate();  </span>
<span style="line-height:1.5;">            }  
        });</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(153,153,153);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
    </div> 
    <p style="line-height:24px;color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;">3、看了上面的例子，因为设置的操作的属性只有一个，那么如果希望一个动画能够让View既可以缩小、又能够淡出（3个属性scaleX,scaleY,alpha），只使用ObjectAnimator咋弄？可能会说使用AnimatorSet啊，但是偏偏要用一个ObjectAnimator实例实现呢~下面看代码：</p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(153,153,153);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
     <pre><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span> rotateyAnimRun(<span style="color:rgb(0,0,255);line-height:1.5;">final</span><span style="line-height:1.5;"> View view)  
{  
    ObjectAnimator anim </span>= ObjectAnimator<span style="color:rgb(0,128,0);line-height:1.5;">//</span>  
            .ofFloat(view, "alpha", 1.0F,  0.0F)<span style="color:rgb(0,128,0);line-height:1.5;">//</span>  
            .setDuration(500);<span style="color:rgb(0,128,0);line-height:1.5;">//</span>  
<span style="line-height:1.5;">    anim.start();  
    anim.addUpdateListener(</span><span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> AnimatorUpdateListener()  
    {  
        @Override  
        </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> onAnimationUpdate(ValueAnimator animation)  
        {  
            </span><span style="color:rgb(0,0,255);line-height:1.5;">float</span> cVal =<span style="line-height:1.5;"> (Float) animation.getAnimatedValue();  
            view.setAlpha(cVal);  
            view.setScaleX(cVal);  
            view.setScaleY(cVal);  
        }  
    });  
}</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(153,153,153);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
    </div> 
    <p style="line-height:24px;color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;">4、其实还有更简单的方式，实现一个动画更改多个效果：使用propertyValuesHolder</p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(153,153,153);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
     <pre><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> propertyValuesHolder(View view)  
    {  
        PropertyValuesHolder pvhX </span>= PropertyValuesHolder.ofFloat("alpha"<span style="line-height:1.5;">, 1f,  
                0f, 1f);  
        PropertyValuesHolder pvhY </span>= PropertyValuesHolder.ofFloat("scaleX"<span style="line-height:1.5;">, 1f,  
                </span>0<span style="line-height:1.5;">, 1f);  
        PropertyValuesHolder pvhZ </span>= PropertyValuesHolder.ofFloat("scaleY"<span style="line-height:1.5;">, 1f,  
                </span>0<span style="line-height:1.5;">, 1f);  
        ObjectAnimator.ofPropertyValuesHolder(view, pvhX, pvhY,pvhZ).setDuration(</span>1000<span style="line-height:1.5;">).start();  
    }</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(153,153,153);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
    </div> 
    <h2 style="color:rgb(177,177,177);font-size:21px;line-height:1.5;font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;">ValueAnimator</h2> 
    <p style="line-height:24px;color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;">ValueAnimator可以说是整个属性动画框架的核心类，动画的驱动就是在此类中实现的。下面举一个ValueAnimator的实例：</p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(153,153,153);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
     <pre>ValueAnimator anim= ValueAnimator.ofInt(0, 40<span style="line-height:1.5;">);  
animation.setDuration(</span>40<span style="line-height:1.5;">);  
animation.start();  
anim.addUpdateListener(</span><span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> AnimatorUpdateListener() {  
    @Override  
        </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> onAnimationUpdate(ValueAnimator animation) {  
                </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">frameValue是通过startValue和endValue以及Fraction计算出来的  </span>
        <span style="color:rgb(0,0,255);line-height:1.5;">int</span> frameValue =<span style="line-height:1.5;"> (Integer)animation.getAnimatedValue();  
        </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">利用每一帧返回的值，可以做一些改变View大小，坐标，透明度等等操作  </span>
<span style="line-height:1.5;">    }  
});</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(153,153,153);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
    </div> 
    <p style="line-height:24px;color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;">ValueAnimator的区别之处：ValueAnimator并没有在属性上做操作，你可能会问这样有啥好处？我岂不是还得手动设置？</p> 
    <p style="line-height:24px;color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;">好处：不需要操作的对象的属性一定要有getter和setter方法，你可以自己根据当前动画的计算值，来操作任何属性。</p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(153,153,153);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
     <pre><span style="color:rgb(0,128,0);line-height:1.5;">/**</span><span style="color:rgb(0,128,0);line-height:1.5;"> 
     * 落体 
     * </span><span style="color:rgb(128,128,128);line-height:1.5;">@param</span><span style="color:rgb(0,128,0);line-height:1.5;"> view 
     </span><span style="color:rgb(0,128,0);line-height:1.5;">*/</span>  
    <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> verticalRun( View view)  
    {  
        ValueAnimator animator </span>= ValueAnimator.ofFloat(0, mScreenHeight  -<span style="line-height:1.5;"> mBlueBall.getHeight());  
        animator.setTarget(mBlueBall);  
        animator.setDuration(</span>1000<span style="line-height:1.5;">).start();  </span>
        animator.addUpdateListener(<span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> AnimatorUpdateListener()  
        {  
            @Override  
            </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> onAnimationUpdate(ValueAnimator animation)  
            {  
                mBlueBall.setTranslationY((Float) animation.getAnimatedValue());  
            }  
        });  
    }</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(153,153,153);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
    </div> 
    <p style="line-height:24px;color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;">与ObjectAnimator不同的就是我们自己设置元素属性的更新，虽然多了几行代码，但是貌似提高灵活性。</p> 
    <p style="line-height:24px;color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;">下面再来一个例子，如果我希望小球抛物线运动【实现抛物线的效果，水平方向100px/s，垂直方向加速度200px/s*s 】，分析一下，貌似只和时间有关系，但是根据时间的变化，横向和纵向的移动速率是不同的，我们该咋实现呢？此时就要重写TypeValue的时候了，因为我们在时间变化的同时，需要返回给对象两个值，x当前位置，y当前位置：</p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(153,153,153);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
     <pre><span style="color:rgb(0,128,0);line-height:1.5;">/**</span><span style="color:rgb(0,128,0);line-height:1.5;"> 
     * 抛物线 
     * </span><span style="color:rgb(128,128,128);line-height:1.5;">@param</span><span style="color:rgb(0,128,0);line-height:1.5;"> view 
     </span><span style="color:rgb(0,128,0);line-height:1.5;">*/</span>  
    <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> paowuxian(View view)  
    {  
  
        ValueAnimator valueAnimator </span>= <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> ValueAnimator();  
        valueAnimator.setDuration(</span>3000<span style="line-height:1.5;">);  
        valueAnimator.setObjectValues(</span><span style="color:rgb(0,0,255);line-height:1.5;">new</span> PointF(0, 0<span style="line-height:1.5;">));  
        valueAnimator.setInterpolator(</span><span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> LinearInterpolator());  
        valueAnimator.setEvaluator(</span><span style="color:rgb(0,0,255);line-height:1.5;">new</span> TypeEvaluator&lt;PointF&gt;<span style="line-height:1.5;">()  
        {  
            </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> fraction = t / duration  </span>
<span style="line-height:1.5;">            @Override  
            </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> PointF evaluate(<span style="color:rgb(0,0,255);line-height:1.5;">float</span><span style="line-height:1.5;"> fraction, PointF startValue,  
                    PointF endValue)  
            {  
                Log.e(TAG, fraction </span>* 3 + ""<span style="line-height:1.5;">);  
                </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> x方向200px/s ，则y方向0.5 * 10 * t  </span>
                PointF point = <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> PointF();  
                point.x </span>= 200 * fraction * 3<span style="line-height:1.5;">;  
                point.y </span>= 0.5f * 200 * (fraction * 3) * (fraction * 3<span style="line-height:1.5;">);  
                </span><span style="color:rgb(0,0,255);line-height:1.5;">return</span><span style="line-height:1.5;"> point;  
            }  
        });  
  
        valueAnimator.start();  
        valueAnimator.addUpdateListener(</span><span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> AnimatorUpdateListener()  
        {  
            @Override  
            </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> onAnimationUpdate(ValueAnimator animation)  
            {  
                PointF point </span>=<span style="line-height:1.5;"> (PointF) animation.getAnimatedValue();  
                mBlueBall.setX(point.x);  
                mBlueBall.setY(point.y);  
  
            }  
        });  
    }</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(153,153,153);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
    </div> 
    <p style="line-height:24px;color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;">好了，我们已经分别讲解了ValueAnimator和ObjectAnimator实现动画；二者区别；如何利用部分API，自己更新属性实现效果；自定义TypeEvaluator实现我们的需求；但是我们并没有讲如何设计插值，其实我觉得把，这个插值默认的那一串实现类够用了。</p> 
    <h2 style="color:rgb(177,177,177);font-size:21px;line-height:1.5;font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;">AnimatorSet</h2> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(153,153,153);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
     <pre><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> togetherRun(View view)  
    {  
        ObjectAnimator anim1 </span>= ObjectAnimator.ofFloat(mBlueBall, "scaleX"<span style="line-height:1.5;">,  
                </span>1.0f<span style="line-height:1.5;">, 2f);  
        ObjectAnimator anim2 </span>= ObjectAnimator.ofFloat(mBlueBall, "scaleY"<span style="line-height:1.5;">,  
                </span>1.0f<span style="line-height:1.5;">, 2f);  
        AnimatorSet animSet </span>= <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> AnimatorSet();  
        animSet.setDuration(</span>2000<span style="line-height:1.5;">);  
        animSet.setInterpolator(</span><span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> LinearInterpolator());  
        </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">两个动画同时执行  </span>
<span style="line-height:1.5;">        animSet.playTogether(anim1, anim2);  
        animSet.start();  
    }  
  
    </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> playWithAfter(View view)  
    {  
        </span><span style="color:rgb(0,0,255);line-height:1.5;">float</span> cx =<span style="line-height:1.5;"> mBlueBall.getX();  
  
        ObjectAnimator anim1 </span>= ObjectAnimator.ofFloat(mBlueBall, "scaleX"<span style="line-height:1.5;">,  
                </span>1.0f<span style="line-height:1.5;">, 2f);  
        ObjectAnimator anim2 </span>= ObjectAnimator.ofFloat(mBlueBall, "scaleY"<span style="line-height:1.5;">,  
                </span>1.0f<span style="line-height:1.5;">, 2f);  
        ObjectAnimator anim3 </span>=<span style="line-height:1.5;"> ObjectAnimator.ofFloat(mBlueBall,  
                </span>"x"<span style="line-height:1.5;">,  cx ,  0f);  
        ObjectAnimator anim4 </span>=<span style="line-height:1.5;"> ObjectAnimator.ofFloat(mBlueBall,  
                </span>"x"<span style="line-height:1.5;">, cx);  
          
        </span><span style="color:rgb(0,128,0);line-height:1.5;">/**</span><span style="color:rgb(0,128,0);line-height:1.5;"> 
         * anim1，anim2,anim3同时执行 
         * anim4接着执行 
         </span><span style="color:rgb(0,128,0);line-height:1.5;">*/</span><span style="line-height:1.5;">  
        AnimatorSet animSet </span>= <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> AnimatorSet();  
        animSet.play(anim1).with(anim2);  
        animSet.play(anim2).with(anim3);  
        animSet.play(anim4).after(anim3);  
        animSet.setDuration(</span>1000<span style="line-height:1.5;">);  
        animSet.start();  
    }  
}</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(153,153,153);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
    </div> 
    <ol style="color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;">
     <li style="list-style-type:decimal;">使用playTogether两个动画同时执行，当然还有playSequentially依次执行~~</li> 
     <li style="list-style-type:decimal;">如果我们有一堆动画，如何使用代码控制顺序，比如1，2同时；3在2后面；4在1之前等~就是效果2了</li> 
    </ol>
    <p style="line-height:24px;color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;"><strong>有一点注意：</strong>animSet.play().with();也是支持链式编程的，但是不要想着狂点，比如 animSet.play(anim1).with(anim2).before(anim3).before(anim5); 这样是不行的，系统不会根据你写的这一长串来决定先后的顺序，所以麻烦你按照上面例子的写法，多写几行。</p> 
    <h2 style="color:rgb(177,177,177);font-size:21px;line-height:1.5;font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;">使用xml文件来创建属性动画</h2> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(153,153,153);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
     <pre><span style="color:rgb(0,0,255);line-height:1.5;">&lt;?</span><span style="color:rgb(255,0,255);line-height:1.5;">xml version="1.0" encoding="utf-8"</span><span style="color:rgb(0,0,255);line-height:1.5;">?&gt;</span>  
<span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">set </span><span style="color:rgb(255,0,0);line-height:1.5;">xmlns:android</span><span style="color:rgb(0,0,255);line-height:1.5;">="http://schemas.android.com/apk/res/android"</span><span style="color:rgb(255,0,0);line-height:1.5;">  
    android:ordering</span><span style="color:rgb(0,0,255);line-height:1.5;">="together"</span> <span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>  
  
    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">objectAnimator  
        </span><span style="color:rgb(255,0,0);line-height:1.5;">android:duration</span><span style="color:rgb(0,0,255);line-height:1.5;">="1000"</span><span style="color:rgb(255,0,0);line-height:1.5;">  
        android:propertyName</span><span style="color:rgb(0,0,255);line-height:1.5;">="scaleX"</span><span style="color:rgb(255,0,0);line-height:1.5;">  
        android:valueFrom</span><span style="color:rgb(0,0,255);line-height:1.5;">="1"</span><span style="color:rgb(255,0,0);line-height:1.5;">  
        android:valueTo</span><span style="color:rgb(0,0,255);line-height:1.5;">="0.5"</span> <span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>  
    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">objectAnimator</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>  
    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">objectAnimator  
        </span><span style="color:rgb(255,0,0);line-height:1.5;">android:duration</span><span style="color:rgb(0,0,255);line-height:1.5;">="1000"</span><span style="color:rgb(255,0,0);line-height:1.5;">  
        android:propertyName</span><span style="color:rgb(0,0,255);line-height:1.5;">="scaleY"</span><span style="color:rgb(255,0,0);line-height:1.5;">  
        android:valueFrom</span><span style="color:rgb(0,0,255);line-height:1.5;">="1"</span><span style="color:rgb(255,0,0);line-height:1.5;">  
        android:valueTo</span><span style="color:rgb(0,0,255);line-height:1.5;">="0.5"</span> <span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>  
    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">objectAnimator</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>  
  
<span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">set</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(153,153,153);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
    </div> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(153,153,153);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
     <pre><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> scaleX(View view)  
    {  
        </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> 加载动画  </span>
        Animator anim = AnimatorInflater.loadAnimator(<span style="color:rgb(0,0,255);line-height:1.5;">this</span><span style="line-height:1.5;">, R.animator.scalex);  
        anim.setTarget(mMv);  
        anim.start();  
    }</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(153,153,153);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
    </div> 
    <p style="line-height:24px;color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;">使用AnimatorInflater加载动画的资源文件，然后设置目标。</p> 
    <p style="line-height:24px;color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;">使用set标签，有一个orderring属性设置为together,还有另一个值：sequentially（表示一个接一个执行）。</p> 
    <p style="line-height:24px;color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;"><span style="color:rgb(255,0,0);">#忽略了一个效果，就是缩放、反转等都有中心点或者轴，默认中心缩放，和中间对称线为反转线，所以我决定这个横向，纵向缩小以左上角为中心点：</span></p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(153,153,153);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
     <pre><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> 加载动画  </span>
Animator anim = AnimatorInflater.loadAnimator(<span style="color:rgb(0,0,255);line-height:1.5;">this</span><span style="line-height:1.5;">, R.animator.scale);  
mMv.setPivotX(</span>0<span style="line-height:1.5;">);  
mMv.setPivotY(</span>0<span style="line-height:1.5;">);  
</span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">显示的调用invalidate  </span>
<span style="line-height:1.5;">mMv.invalidate();  
anim.setTarget(mMv);  
anim.start();</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(153,153,153);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
    </div> 
    <p style="line-height:24px;color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;">很简单，直接给View设置pivotX和pivotY，然后调用一下invalidate，就ok了。</p> 
    <h2 style="color:rgb(177,177,177);font-size:21px;line-height:1.5;font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;">Layout Animations</h2> 
    <p style="line-height:24px;color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;">主要使用LayoutTransition为布局的容器设置动画，当容器中的视图层次发生变化时存在过渡的动画效果。</p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(153,153,153);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
     <pre>LayoutTransition transition = <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> LayoutTransition();  
    transition.setAnimator(LayoutTransition.CHANGE_APPEARING, transition.getAnimator(LayoutTransition.CHANGE_APPEARING));  
    transition.setAnimator(LayoutTransition.APPEARING, </span><span style="color:rgb(0,0,255);line-height:1.5;">null</span><span style="line-height:1.5;">);  
    transition.setAnimator(LayoutTransition.DISAPPEARING, </span><span style="color:rgb(0,0,255);line-height:1.5;">null</span><span style="line-height:1.5;">);  
    transition.setAnimator(LayoutTransition.CHANGE_DISAPPEARING,  </span><span style="color:rgb(0,0,255);line-height:1.5;">null</span><span style="line-height:1.5;">);  
    mGridLayout.setLayoutTransition(transition);</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(153,153,153);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
    </div> 
    <p style="line-height:24px;color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;">过渡的类型一共有四种：</p> 
    <p style="line-height:24px;color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;">LayoutTransition.APPEARING&nbsp;<strong>当一个View在ViewGroup中<em>出现</em>时，<span style="color:rgb(255,0,0);">对此View设置的动画</span></strong></p> 
    <p style="line-height:24px;color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;">LayoutTransition.CHANGE_APPEARING&nbsp;<strong>当一个View在ViewGroup中<em>出现</em>时，<span style="color:rgb(255,0,0);">对此View对其他View位置造成影响，对其他View设置的动画</span></strong></p> 
    <p style="line-height:24px;color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;">LayoutTransition.DISAPPEARING&nbsp;&nbsp;<strong>当一个View在ViewGroup中<em>消失</em>时，<span style="color:rgb(255,0,0);">对此View设置的动画</span></strong></p> 
    <p style="line-height:24px;color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;">LayoutTransition.CHANGE_DISAPPEARING&nbsp;<strong>当一个View在ViewGroup中<em>消失</em>时，<span style="color:rgb(255,0,0);">对此View对其他View位置造成影响，对其他View设置的动画</span></strong></p> 
    <p style="line-height:24px;color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;">LayoutTransition.CHANGE&nbsp;<strong>不是由于View出现或消失造成对其他View位置造成影响，然后对其他View设置的动画。</strong></p> 
    <p style="line-height:24px;color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;">注意动画到底设置在谁身上，此View还是其他View。</p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(153,153,153);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
     <pre><span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">LinearLayout </span><span style="color:rgb(255,0,0);line-height:1.5;">xmlns:android</span><span style="color:rgb(0,0,255);line-height:1.5;">="http://schemas.android.com/apk/res/android"</span><span style="color:rgb(255,0,0);line-height:1.5;">  
    xmlns:tools</span><span style="color:rgb(0,0,255);line-height:1.5;">="http://schemas.android.com/tools"</span><span style="color:rgb(255,0,0);line-height:1.5;">  
    android:id</span><span style="color:rgb(0,0,255);line-height:1.5;">="@+id/id_container"</span><span style="color:rgb(255,0,0);line-height:1.5;">  
    android:layout_width</span><span style="color:rgb(0,0,255);line-height:1.5;">="match_parent"</span><span style="color:rgb(255,0,0);line-height:1.5;">  
    android:layout_height</span><span style="color:rgb(0,0,255);line-height:1.5;">="match_parent"</span><span style="color:rgb(255,0,0);line-height:1.5;">  
    android:orientation</span><span style="color:rgb(0,0,255);line-height:1.5;">="vertical"</span> <span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>  
  
    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">Button  
        </span><span style="color:rgb(255,0,0);line-height:1.5;">android:layout_width</span><span style="color:rgb(0,0,255);line-height:1.5;">="wrap_content"</span><span style="color:rgb(255,0,0);line-height:1.5;">  
        android:layout_height</span><span style="color:rgb(0,0,255);line-height:1.5;">="wrap_content"</span><span style="color:rgb(255,0,0);line-height:1.5;">  
        android:onClick</span><span style="color:rgb(0,0,255);line-height:1.5;">="addBtn"</span><span style="color:rgb(255,0,0);line-height:1.5;">  
        android:text</span><span style="color:rgb(0,0,255);line-height:1.5;">="addBtns"</span> <span style="color:rgb(0,0,255);line-height:1.5;">/&gt;</span>  
  
    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">CheckBox  
        </span><span style="color:rgb(255,0,0);line-height:1.5;">android:id</span><span style="color:rgb(0,0,255);line-height:1.5;">="@+id/id_appear"</span><span style="color:rgb(255,0,0);line-height:1.5;">  
        android:layout_width</span><span style="color:rgb(0,0,255);line-height:1.5;">="wrap_content"</span><span style="color:rgb(255,0,0);line-height:1.5;">  
        android:layout_height</span><span style="color:rgb(0,0,255);line-height:1.5;">="wrap_content"</span><span style="color:rgb(255,0,0);line-height:1.5;">  
        android:checked</span><span style="color:rgb(0,0,255);line-height:1.5;">="true"</span><span style="color:rgb(255,0,0);line-height:1.5;">  
        android:text</span><span style="color:rgb(0,0,255);line-height:1.5;">="APPEARING"</span> <span style="color:rgb(0,0,255);line-height:1.5;">/&gt;</span>  
  
    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">CheckBox  
        </span><span style="color:rgb(255,0,0);line-height:1.5;">android:id</span><span style="color:rgb(0,0,255);line-height:1.5;">="@+id/id_change_appear"</span><span style="color:rgb(255,0,0);line-height:1.5;">  
        android:layout_width</span><span style="color:rgb(0,0,255);line-height:1.5;">="wrap_content"</span><span style="color:rgb(255,0,0);line-height:1.5;">  
        android:layout_height</span><span style="color:rgb(0,0,255);line-height:1.5;">="wrap_content"</span><span style="color:rgb(255,0,0);line-height:1.5;">  
        android:checked</span><span style="color:rgb(0,0,255);line-height:1.5;">="true"</span><span style="color:rgb(255,0,0);line-height:1.5;">  
        android:text</span><span style="color:rgb(0,0,255);line-height:1.5;">="CHANGE_APPEARING"</span> <span style="color:rgb(0,0,255);line-height:1.5;">/&gt;</span>  
  
    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">CheckBox  
        </span><span style="color:rgb(255,0,0);line-height:1.5;">android:id</span><span style="color:rgb(0,0,255);line-height:1.5;">="@+id/id_disappear"</span><span style="color:rgb(255,0,0);line-height:1.5;">  
        android:layout_width</span><span style="color:rgb(0,0,255);line-height:1.5;">="wrap_content"</span><span style="color:rgb(255,0,0);line-height:1.5;">  
        android:layout_height</span><span style="color:rgb(0,0,255);line-height:1.5;">="wrap_content"</span><span style="color:rgb(255,0,0);line-height:1.5;">  
        android:checked</span><span style="color:rgb(0,0,255);line-height:1.5;">="true"</span><span style="color:rgb(255,0,0);line-height:1.5;">  
        android:text</span><span style="color:rgb(0,0,255);line-height:1.5;">="DISAPPEARING"</span> <span style="color:rgb(0,0,255);line-height:1.5;">/&gt;</span>  
  
    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">CheckBox  
          </span><span style="color:rgb(255,0,0);line-height:1.5;">android:id</span><span style="color:rgb(0,0,255);line-height:1.5;">="@+id/id_change_disappear"</span><span style="color:rgb(255,0,0);line-height:1.5;">  
        android:layout_width</span><span style="color:rgb(0,0,255);line-height:1.5;">="wrap_content"</span><span style="color:rgb(255,0,0);line-height:1.5;">  
        android:layout_height</span><span style="color:rgb(0,0,255);line-height:1.5;">="wrap_content"</span><span style="color:rgb(255,0,0);line-height:1.5;">  
        android:checked</span><span style="color:rgb(0,0,255);line-height:1.5;">="true"</span><span style="color:rgb(255,0,0);line-height:1.5;">  
        android:text</span><span style="color:rgb(0,0,255);line-height:1.5;">="CHANGE_DISAPPEARING "</span> <span style="color:rgb(0,0,255);line-height:1.5;">/&gt;</span>  
  
<span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">LinearLayout</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(153,153,153);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
    </div> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(153,153,153);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
     <pre><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span> LayoutAnimaActivity <span style="color:rgb(0,0,255);line-height:1.5;">extends</span> Activity <span style="color:rgb(0,0,255);line-height:1.5;">implements</span><span style="line-height:1.5;">  OnCheckedChangeListener  {  
    </span><span style="color:rgb(0,0,255);line-height:1.5;">private</span><span style="line-height:1.5;"> ViewGroup viewGroup;  
    </span><span style="color:rgb(0,0,255);line-height:1.5;">private</span><span style="line-height:1.5;"> GridLayout mGridLayout;  
    </span><span style="color:rgb(0,0,255);line-height:1.5;">private</span> <span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> mVal;  
    </span><span style="color:rgb(0,0,255);line-height:1.5;">private</span><span style="line-height:1.5;"> LayoutTransition mTransition;  
  
    </span><span style="color:rgb(0,0,255);line-height:1.5;">private</span><span style="line-height:1.5;"> CheckBox mAppear, mChangeAppear, mDisAppear, mChangeDisAppear;  
  
    @Override  
    </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> onCreate(Bundle savedInstanceState)  {  
        </span><span style="color:rgb(0,0,255);line-height:1.5;">super</span><span style="line-height:1.5;">.onCreate(savedInstanceState);  
        setContentView(R.layout.layout_animator);  
        viewGroup </span>=<span style="line-height:1.5;"> (ViewGroup) findViewById(R.id.id_container);  
  
        mAppear </span>=<span style="line-height:1.5;"> (CheckBox) findViewById(R.id.id_appear);  
        mChangeAppear </span>=<span style="line-height:1.5;"> (CheckBox) findViewById(R.id.id_change_appear);  
        mDisAppear </span>=<span style="line-height:1.5;"> (CheckBox) findViewById(R.id.id_disappear);  
        mChangeDisAppear </span>=<span style="line-height:1.5;"> (CheckBox) findViewById(R.id.id_change_disappear);  
  
        mAppear.setOnCheckedChangeListener(</span><span style="color:rgb(0,0,255);line-height:1.5;">this</span><span style="line-height:1.5;">);  
        mChangeAppear.setOnCheckedChangeListener(</span><span style="color:rgb(0,0,255);line-height:1.5;">this</span><span style="line-height:1.5;">);  
        mDisAppear.setOnCheckedChangeListener(</span><span style="color:rgb(0,0,255);line-height:1.5;">this</span><span style="line-height:1.5;">);  
        mChangeDisAppear.setOnCheckedChangeListener(</span><span style="color:rgb(0,0,255);line-height:1.5;">this</span><span style="line-height:1.5;">);  
  
        </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> 创建一个GridLayout  </span>
        mGridLayout = <span style="color:rgb(0,0,255);line-height:1.5;">new</span> GridLayout(<span style="color:rgb(0,0,255);line-height:1.5;">this</span><span style="line-height:1.5;">);  
        </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> 设置每列5个按钮  </span>
        mGridLayout.setColumnCount(5<span style="line-height:1.5;">);  
        </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> 添加到布局中  </span>
<span style="line-height:1.5;">        viewGroup.addView(mGridLayout);  
        </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">默认动画全部开启  </span>
        mTransition = <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> LayoutTransition();  
        mGridLayout.setLayoutTransition(mTransition);  
  
    }  
  
    </span><span style="color:rgb(0,128,0);line-height:1.5;">/**</span><span style="color:rgb(0,128,0);line-height:1.5;"> 
     * 添加按钮 
     *  
     * </span><span style="color:rgb(128,128,128);line-height:1.5;">@param</span><span style="color:rgb(0,128,0);line-height:1.5;"> view 
     </span><span style="color:rgb(0,128,0);line-height:1.5;">*/</span>  
    <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> addBtn(View view)  {  
        </span><span style="color:rgb(0,0,255);line-height:1.5;">final</span> Button button = <span style="color:rgb(0,0,255);line-height:1.5;">new</span> Button(<span style="color:rgb(0,0,255);line-height:1.5;">this</span><span style="line-height:1.5;">);  
        button.setText((</span>++mVal) + ""<span style="line-height:1.5;">);  
        mGridLayout.addView(button, Math.min(</span>1<span style="line-height:1.5;">, mGridLayout.getChildCount()));  
        button.setOnClickListener(</span><span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> OnClickListener()  {  
  
            @Override  
            </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> onClick(View v) {  
                mGridLayout.removeView(button);  
            }  
        });  
    }  
  
    @Override  
    </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span> onCheckedChanged(CompoundButton buttonView, <span style="color:rgb(0,0,255);line-height:1.5;">boolean</span><span style="line-height:1.5;"> isChecked)  {  
        mTransition </span>= <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> LayoutTransition();  
        mTransition.setAnimator(   LayoutTransition.APPEARING,   (mAppear.isChecked() </span>? mTransition  .getAnimator(LayoutTransition.APPEARING) : <span style="color:rgb(0,0,255);line-height:1.5;">null</span><span style="line-height:1.5;">));  
        mTransition  .setAnimator( LayoutTransition.CHANGE_APPEARING,  (mChangeAppear.isChecked() </span>? mTransition.getAnimator(LayoutTransition.CHANGE_APPEARING)  : <span style="color:rgb(0,0,255);line-height:1.5;">null</span><span style="line-height:1.5;">));  
        mTransition.setAnimator(  LayoutTransition.DISAPPEARING,   (mDisAppear.isChecked() </span>? mTransition .getAnimator(LayoutTransition.DISAPPEARING) : <span style="color:rgb(0,0,255);line-height:1.5;">null</span><span style="line-height:1.5;">));  
        mTransition.setAnimator(  LayoutTransition.CHANGE_DISAPPEARING,  (mChangeDisAppear.isChecked() </span>? mTransition  .getAnimator(LayoutTransition.CHANGE_DISAPPEARING)  : <span style="color:rgb(0,0,255);line-height:1.5;">null</span><span style="line-height:1.5;">));  
        mGridLayout.setLayoutTransition(mTransition);  
    }  
}</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(153,153,153);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
    </div> 
    <p style="line-height:24px;color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;"><a href="https://images0.cnblogs.com/blog/587773/201505/101430212516889.gif" rel="nofollow" style="color:rgb(153,153,153);text-decoration:none;"><img title="1" src="https://images0.cnblogs.com/blog/587773/201505/101430225958145.gif" alt="1" width="151" height="240" style="border:0px;"></a></p> 
    <p style="line-height:24px;color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;">一定要注意，是对当前View还是其他Views设置的动画。</p> 
    <h2 style="color:rgb(177,177,177);font-size:21px;line-height:1.5;font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;">animate()</h2> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(153,153,153);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
     <pre><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> viewAnim(View view)  
    {  
        </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> need API12  </span>
        mBlueBall.animate()<span style="color:rgb(0,128,0);line-height:1.5;">//</span>  
                .alpha(0)<span style="color:rgb(0,128,0);line-height:1.5;">//</span>  
                .y(mScreenHeight / 2).setDuration(1000<span style="line-height:1.5;">)  
                </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> need API 12  </span>
                .withStartAction(<span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> Runnable(){  
                    @Override  
                    </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> run(){  
                        Log.e(TAG, </span>"START"<span style="line-height:1.5;">);  
                    }  
                    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> need API 16  </span>
                }).withEndAction(<span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> Runnable(){  
  
                    @Override  
                    </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> run(){  
                        Log.e(TAG, </span>"END"<span style="line-height:1.5;">);  
                        runOnUiThread(</span><span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> Runnable(){  
                            @Override  
                            </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> run()  
                            {  
                                mBlueBall.setY(</span>0<span style="line-height:1.5;">);  
                                mBlueBall.setAlpha(</span>1.0f<span style="line-height:1.5;">);  
                            }  
                        });  
                    }  
                }).start();  
    }</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(153,153,153);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
    </div> 
    <p style="line-height:24px;color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;">简单的使用mBlueBall.animate().alpha(0).y(mScreenHeight / 2).setDuration(1000).start()就能实现动画~~不过需要SDK11，此后在SDK12，SDK16又分别添加了withStartAction和withEndAction用于在动画前，和动画后执行一些操作。当然也可以.setListener(listener)等操作。</p> 
    <p style="line-height:24px;color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;">使用ObjectAnimator实现上面的变化，我们可以使用：PropertyValueHolder</p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';">
     <pre>PropertyValuesHolder pvhX = PropertyValuesHolder.ofFloat("alpha"<span style="line-height:1.5;">, 1f,  0f, 1f);  
PropertyValuesHolder pvhY </span>= PropertyValuesHolder.ofFloat("y", 0,   mScreenHeight / 2, 0<span style="line-height:1.5;">);  
ObjectAnimator.ofPropertyValuesHolder(mBlueBall, pvhX, pvhY).setDuration(</span>1000).start();</pre>
    </div> 
    <p style="line-height:24px;color:rgb(153,153,153);font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;font-size:15px;">效果与上面一样。</p> 
    <h2 style="color:rgb(177,177,177);font-size:21px;line-height:1.5;font-family:'Comic Sans MS', '微软雅黑', '宋体', Arial;">我是天王盖地虎的分割线</h2> 
    <h2 style="line-height:1.5;"><font color="#b1b1b1"><span style="font-size:21px;"><br></span></font></h2> 
    <h2 style="line-height:1.5;"><font color="#b1b1b1"><span style="font-size:21px;"><br></span></font></h2> 
    <h2 style="line-height:1.5;"><font color="#b1b1b1"><span style="font-size:21px;"><br></span></font></h2> 
    <h2 style="line-height:1.5;"><font color="#b1b1b1"><span style="font-size:21px;">本文转自我爱物联网博客园博客，原文链接：http://www.cnblogs.com/yydcdut/p/4492220.html，如需转载请自行联系原作者</span></font></h2> 
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
