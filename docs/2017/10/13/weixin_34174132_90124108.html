<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>路径，文件，目录，I/O常见操作汇总（三） « NotBeCN</title>
  <meta name="description" content="             &nbsp;&nbsp;摘要:&nbsp;&nbsp;&nbsp;&nbsp; 文件操作是程序中非常基础和重要的内容，而路径、文件、目录以及I/O都是在进行文件操作时的常见主题，这里想把这些常见的问题作个总结，对于每个问题， 尽量提供一些解决方案，即使没有你想要的答案，也希望能提供给你一...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/10/13/weixin_34174132_90124108.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">路径，文件，目录，I/O常见操作汇总（三）</h1>
    <p class="post-meta">Oct 13, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp;<strong>摘要:</strong>&nbsp;<strong><br></strong>&nbsp;&nbsp;&nbsp; 文件操作是程序中非常基础和重要的内容，而路径、文件、目录以及I/O都是在进行文件操作时的常见主题，这里想把这些常见的问题作个总结，对于每个问题， 尽量提供一些解决方案，即使没有你想要的答案，也希望能提供给你一点有益的思路，如果你有好的建议，恳请能够留言，使这些内容更加完善。&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;<strong>主要内容：<br></strong>&nbsp;&nbsp;&nbsp; 一、路径的相关操作， 如判断路径是否合法，路径类型，路径的特定部分，合并路径，系统文件夹路径等内容；<br> &nbsp;&nbsp;&nbsp; 二、相关通用文件对话框，这些对话框可以帮助我们操作文件系统中的文件和目录；<br> &nbsp;&nbsp;&nbsp; 三、文件和目录操作，如复制、移动、删除、重命名，文件的版本信息，文件判等、搜索，读写文件等；<br> &nbsp;&nbsp;&nbsp; 四、读写文件，对文件系统的监视；<br> &nbsp;&nbsp;&nbsp; 五、其它，如临时文件，随机文件名等；</p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;<a title="路径相关操作和通用文件对话框" href="http://www.cnblogs.com/anderslly/archive/2006/12/24/602479.aspx" rel="nofollow" style="text-decoration:none;color:rgb(224,0,255);border-bottom-width:1px;border-bottom-style:dashed;">第一篇-路径的相关操作和通用文件对话框的使用<br></a></p> 
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>
   <a title="文件和目录的相关操作" href="http://www.cnblogs.com/anderslly/archive/2006/12/29/605344.html" rel="nofollow" style="text-decoration:none;color:rgb(255,0,240);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">第二篇-文件和目录的相关操作<br></a>
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp; 这一篇将介绍第四、五部分。</span>
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;<strong>文件读写相关类介绍:</strong><br> &nbsp;&nbsp;&nbsp; 文件读写操作涉及的类主要是：<br> &nbsp;&nbsp;&nbsp; MarshalByRefObject 类：允许在支持远程处理的应用程序中跨应用程序域边界访问对象；<br> &nbsp;&nbsp;&nbsp; BinaryReader 类：用特定的编码将基元数据类型读作二进制值。<br> &nbsp;&nbsp;&nbsp; BinaryWriter 类： 以二进制形式将基元类型写入流，并支持用特定的编码写入字符串。<br> &nbsp;&nbsp;&nbsp; Stream 类： 提供字节序列的一般视图。<br> &nbsp;&nbsp;&nbsp; FileStream类：公开以文件为主的 Stream，既支持同步读写操作，也支持异步读写操作。<br> &nbsp;&nbsp;&nbsp; MemoryStream 类：创建其支持存储区为内存的流。<br> &nbsp;&nbsp;&nbsp; BufferedStream 类：给另一流上的读写操作添加一个缓冲层。<br> &nbsp;&nbsp;&nbsp; TextReader 类：表示可读取连续字符系列的阅读器。<br> &nbsp;&nbsp;&nbsp; TextWriter 类：表示可以编写一个有序字符系列的编写器。<br> &nbsp;&nbsp;&nbsp; StreamReader 类：实现一个 TextReader，使其以一种特定的编码从字节流中读取字符。<br> &nbsp;&nbsp;&nbsp; StreamWriter 类：实现一个 TextWriter，使其以一种特定的编码向流中写入字符。<br> &nbsp;&nbsp;&nbsp; StringReader 类：实现从字符串进行读取的 TextReader。<br> &nbsp;&nbsp;&nbsp; StringWriter 类：实现一个用于将信息写入字符串的 TextWriter。该信息存储在基础StringBuilder中。<br> &nbsp;&nbsp;&nbsp; 在使用它们之前最好能了解它们的继承关系，有助于作出最合适的选择：<br></p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp; 另外还要注意一下FileInfo和File类的一些方法，如Create，CreateText，Open等，有时也会带来方便。<br> &nbsp;&nbsp;&nbsp; 这些类的内容比较繁多，更多内容还请参考MSDN。&nbsp;</p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp; 下面是一些常见的问题及其解决方案：<br> &nbsp;&nbsp;&nbsp; 问题1：<span style="line-height:1.8;color:rgb(32,0,255);">如何读写文本文件（并考虑不同的编码类型）</span>；<br> &nbsp;&nbsp;&nbsp; 解决方案：<br> &nbsp;&nbsp;&nbsp; 创建一个FileStream对象用以引用该文件。要写入文件，将FileStream对象封装在StreamWriter对象中，使用其重载了的Write方法；要读取文件，将FileStream对象封装在StreamReader对象中，使用其Read或ReadLine方法；<br> &nbsp;&nbsp;&nbsp; .NET Framework允许通过StreamWriter和StreamReader类操作任何流来读写文本文件。当使用StreamWriter类写入数据时，调用它的Write方法，该方法在重载后可以支持所有常见的C#数据类型，包括字符串、字符、整数、浮点数以及十进制数等。但Write方法总会将的得到的数据转换为文本，如果希望将这些文本转换回原来的数据类型，应使用WriteLine方法，以确保每个值都处于单独的一行上。<br> &nbsp;&nbsp;&nbsp; 字符串的表现形式取决于你使用的编码，最常见的编码类型包括下面几种：ASCII，UTF-16，UTF-7，UTF-8。<br> &nbsp;&nbsp;&nbsp; .NET Framework在System.Text命名空间中为每种编码类型提供了一个类。在使用StreamWriter和StreamReader类时，可以指定需要的编码类型，或者使用默认的UTF-8。<br> &nbsp;&nbsp;&nbsp; 而在读取文本文件时，则要使用StreamReader类的Read或ReadLine方法。Read方法读取单个字符或者指定个数的字符，返回类型为字符或字符数组；ReadLine方法则返回包含整行内容的字符串；ReadToEnd方法从当前位置读取至流的结尾。<br> &nbsp;&nbsp;&nbsp; （更多内容还请参考MSDN）<br> &nbsp;&nbsp;&nbsp; 写入文本文件的示例：<br></p> 
   <div style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;border:1px solid rgb(204,204,204);font-size:13px;"> 
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">using</span>
    <span style="color:rgb(0,0,0);">&nbsp;(FileStream&nbsp;fs&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">new</span>
    <span style="color:rgb(0,0,0);">&nbsp;FileStream(fileName,&nbsp;FileMode.Create))<br> &nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">&nbsp;创建一个StreamWriter对象，使用UTF-8编码格式</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">using</span>
    <span style="color:rgb(0,0,0);">&nbsp;(StreamWriter&nbsp;writer&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">new</span>
    <span style="color:rgb(0,0,0);">&nbsp;StreamWriter(fs,&nbsp;Encoding.UTF8))<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">&nbsp;分别写入十进制数，字符串和字符类型的数据</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writer.WriteLine(</span>
    <span style="color:rgb(0,0,0);">123.45M</span>
    <span style="color:rgb(0,0,0);">);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writer.WriteLine(</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">String&nbsp;Data</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writer.WriteLine(</span>
    <span style="color:rgb(0,0,0);">'</span>
    <span style="color:rgb(0,0,0);">A</span>
    <span style="color:rgb(0,0,0);">'</span>
    <span style="color:rgb(0,0,0);">);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br> &nbsp;&nbsp;&nbsp;&nbsp;}</span> 
   </div> 
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp; 读取文本文件的示例：</span>
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <div style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;border:1px solid rgb(204,204,204);font-size:13px;"> 
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">&nbsp;以只读模式打开一个文本文件</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">using</span>
    <span style="color:rgb(0,0,0);">&nbsp;(FileStream&nbsp;fs&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">new</span>
    <span style="color:rgb(0,0,0);">&nbsp;FileStream(fileName,&nbsp;FileMode.Open))<br> &nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">using</span>
    <span style="color:rgb(0,0,0);">&nbsp;(StreamReader&nbsp;reader&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">new</span>
    <span style="color:rgb(0,0,0);">&nbsp;StreamReader(fs,&nbsp;Encoding.UTF8))<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">string</span>
    <span style="color:rgb(0,0,0);">&nbsp;text&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">string</span>
    <span style="color:rgb(0,0,0);">.Empty;<br><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">while</span>
    <span style="color:rgb(0,0,0);">(</span>
    <span style="color:rgb(0,0,0);">!</span>
    <span style="color:rgb(0,0,0);">reader.EndOfStream)<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;reader.ReadLine();<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;txtMessage.Text&nbsp;</span>
    <span style="color:rgb(0,0,0);">+=</span>
    <span style="color:rgb(0,0,0);">&nbsp;text&nbsp;</span>
    <span style="color:rgb(0,0,0);">+</span>
    <span style="color:rgb(0,0,0);">&nbsp;Environment.NewLine;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br> &nbsp;&nbsp;&nbsp;&nbsp;}</span> 
   </div> 
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp; 问题2：</span>
   <span style="font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;color:rgb(32,0,255);">如何读写二进制文件（使用强数据类型）</span>
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">；</span>
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp; 解决方案：</span>
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp; 创建一个FileStream对象用以引用该文件。要写入文件，将FileStream对象封装在BinaryWriter对象中，使用其重载了的Write方法；要读取文件，将FileStream对象封装在BinaryReader对象中，使用相应数据类型的Read方法。&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp; .NET Framework允许通过BinaryWriter和BinaryReader类操作任何流来读写二进制数据。当使用BinaryWriter类写入数据时，调用它的Write方法，该方法在重载后可以支持所有常见的C#数据类型，包括字符串、字符、整数、浮点数以及十进制数等，然后数据会被编码为一系列字节写入文件，也可以配置该过程中的编码类型。</span>
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp; 在使用二进制文件时，一定要特别注意其中的数据类型。当你读取数据时，一定要使用BinaryReader类的某种强类型的Read方法。例如，要读取字符串，要使用ReadString方法。（BinaryWriter在写入二进制文件时总会记录字符串的长度以避免任何可能的错误）</span>
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp; 写入文件的示例：</span>
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <div style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;border:1px solid rgb(204,204,204);font-size:13px;"> 
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">using</span>
    <span style="color:rgb(0,0,0);">&nbsp;(FileStream&nbsp;fs&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">new</span>
    <span style="color:rgb(0,0,0);">&nbsp;FileStream(fileName,&nbsp;FileMode.Create))<br> &nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">using</span>
    <span style="color:rgb(0,0,0);">&nbsp;(BinaryWriter&nbsp;writer&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">new</span>
    <span style="color:rgb(0,0,0);">&nbsp;BinaryWriter(fs))<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">&nbsp;写入十进制数，字符串和字符</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writer.Write(</span>
    <span style="color:rgb(0,0,0);">234.56M</span>
    <span style="color:rgb(0,0,0);">);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writer.Write(</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">String</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writer.Write(</span>
    <span style="color:rgb(0,0,0);">'</span>
    <span style="color:rgb(0,0,0);">!</span>
    <span style="color:rgb(0,0,0);">'</span>
    <span style="color:rgb(0,0,0);">);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br> &nbsp;&nbsp;&nbsp;&nbsp;}</span> 
   </div> 
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp; 读取文件的示例：</span>
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <div style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;border:1px solid rgb(204,204,204);font-size:13px;"> 
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">&nbsp;以只读模式打开一个二进制文件</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">using</span>
    <span style="color:rgb(0,0,0);">&nbsp;(FileStream&nbsp;fs&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">new</span>
    <span style="color:rgb(0,0,0);">&nbsp;FileStream(fileName,&nbsp;FileMode.Open))<br> &nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">using</span>
    <span style="color:rgb(0,0,0);">&nbsp;(StreamReader&nbsp;sr&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">new</span>
    <span style="color:rgb(0,0,0);">&nbsp;StreamReader(fs))<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MessageBox.Show(</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">全部数据：</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,0);">+</span>
    <span style="color:rgb(0,0,0);">&nbsp;sr.ReadToEnd());<br><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fs.Position&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,0);">0</span>
    <span style="color:rgb(0,0,0);">;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">using</span>
    <span style="color:rgb(0,0,0);">&nbsp;(BinaryReader&nbsp;reader&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">new</span>
    <span style="color:rgb(0,0,0);">&nbsp;BinaryReader(fs))<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">&nbsp;选用合适的数据类型读取数据</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">string</span>
    <span style="color:rgb(0,0,0);">&nbsp;message&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;reader.ReadDecimal().ToString()&nbsp;</span>
    <span style="color:rgb(0,0,0);">+</span>
    <span style="color:rgb(0,0,0);">&nbsp;Environment.NewLine;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message&nbsp;</span>
    <span style="color:rgb(0,0,0);">+=</span>
    <span style="color:rgb(0,0,0);">&nbsp;reader.ReadString()&nbsp;</span>
    <span style="color:rgb(0,0,0);">+</span>
    <span style="color:rgb(0,0,0);">&nbsp;Environment.NewLine;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message&nbsp;</span>
    <span style="color:rgb(0,0,0);">+=</span>
    <span style="color:rgb(0,0,0);">&nbsp;reader.ReadChar().ToString();<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MessageBox.Show(message);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br> &nbsp;&nbsp;&nbsp;&nbsp;}</span> 
   </div> 
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp; 问题3：</span>
   <span style="font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;color:rgb(32,0,255);">如何异步读取文件；</span>
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp; 解决方案：</span>
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp; 有时你需要读取一个文件但又不希望影响程序的执行。常见的情况是读取一个存储在网络驱动器上的文件。&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp; FileStream提供了对异步操作的基本支持，即它的BeginRead和EndRead方法。使用这些方法，可以在.NET Framework线程池提供的线程中读取一个数据块，而无须直接与System.Threading命名空间中的线程类打交道。</span>
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp; 采用异步方式读取文件时，可以选择每次读取数据的大小。根据情况的不同，你可能会每次读取很小的数据（比如，你要将数据逐块拷贝至另一个文件），也可能是一个相对较大的数据（比如，在程序逻辑开始之前需要一定数量的数据）。在调用BeginRead时指定要读取数据块的大小，同时传入一个缓冲区（buffer）以存放数据。因为BeginRead和EndRead需要访问很多相同的信息，如FileStream，buffer，数据块大小等，因此将这些内容封装一个单独的类当中是一个好主意。</span>
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp; 下面这个类就是一个简单的示例。AsyncProcessor类提供了StartProcess方法，调用它开始读取，每次读取操作结束，OnCompletedRead回调函数会被触发，此时可以处理数据，如果还有剩余数据，则开始一个新的读取操作。默认情况下，AsyncProcessor类每次读取2KB数据。</span>
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <div style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;border:1px solid rgb(204,204,204);font-size:13px;"> 
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">class</span>
    <span style="color:rgb(0,0,0);">&nbsp;AsyncProcessor<br> &nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">private</span>
    <span style="color:rgb(0,0,0);">&nbsp;Stream&nbsp;inputStream;<br><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">&nbsp;每次读取块的大小</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">private</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">int</span>
    <span style="color:rgb(0,0,0);">&nbsp;bufferSize&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,0);">2048</span>
    <span style="color:rgb(0,0,0);">;<br><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">public</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">int</span>
    <span style="color:rgb(0,0,0);">&nbsp;BufferSize<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">get</span>
    <span style="color:rgb(0,0,0);">&nbsp;{&nbsp;</span>
    <span style="color:rgb(0,0,255);">return</span>
    <span style="color:rgb(0,0,0);">&nbsp;bufferSize;&nbsp;}<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">set</span>
    <span style="color:rgb(0,0,0);">&nbsp;{&nbsp;bufferSize&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;value;&nbsp;}<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">&nbsp;容纳接收数据的缓存</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">private</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">byte</span>
    <span style="color:rgb(0,0,0);">[]&nbsp;buffer;<br><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">public</span>
    <span style="color:rgb(0,0,0);">&nbsp;AsyncProcessor(</span>
    <span style="color:rgb(0,0,255);">string</span>
    <span style="color:rgb(0,0,0);">&nbsp;fileName)<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;buffer&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">new</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">byte</span>
    <span style="color:rgb(0,0,0);">[bufferSize];<br><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">&nbsp;打开文件，指定参数为true以提供对异步操作的支持</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inputStream&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">new</span>
    <span style="color:rgb(0,0,0);">&nbsp;FileStream(fileName,&nbsp;FileMode.Open,&nbsp;FileAccess.Read,&nbsp;FileShare.Read,&nbsp;bufferSize,&nbsp;</span>
    <span style="color:rgb(0,0,255);">true</span>
    <span style="color:rgb(0,0,0);">);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">public</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">void</span>
    <span style="color:rgb(0,0,0);">&nbsp;StartProcess()<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">&nbsp;开始异步读取文件，填充缓存区</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inputStream.BeginRead(buffer,&nbsp;</span>
    <span style="color:rgb(0,0,0);">0</span>
    <span style="color:rgb(0,0,0);">,&nbsp;buffer.Length,&nbsp;OnCompletedRead,&nbsp;</span>
    <span style="color:rgb(0,0,255);">null</span>
    <span style="color:rgb(0,0,0);">);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">private</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">void</span>
    <span style="color:rgb(0,0,0);">&nbsp;OnCompletedRead(IAsyncResult&nbsp;asyncResult)<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">&nbsp;已经异步读取一个&nbsp;块&nbsp;，接收数据</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">int</span>
    <span style="color:rgb(0,0,0);">&nbsp;bytesRead&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;inputStream.EndRead(asyncResult);<br><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">&nbsp;如果没有读取任何字节，则流已达文件结尾</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">if</span>
    <span style="color:rgb(0,0,0);">&nbsp;(bytesRead&nbsp;</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,0);">0</span>
    <span style="color:rgb(0,0,0);">)<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">&nbsp;暂停以模拟对数据块的处理</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Debug.WriteLine(</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;异步线程：已读取一块</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Thread.Sleep(TimeSpan.FromMilliseconds(</span>
    <span style="color:rgb(0,0,0);">20</span>
    <span style="color:rgb(0,0,0);">));<br><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">&nbsp;开始读取下一块</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inputStream.BeginRead(buffer,&nbsp;</span>
    <span style="color:rgb(0,0,0);">0</span>
    <span style="color:rgb(0,0,0);">,&nbsp;buffer.Length,&nbsp;OnCompletedRead,&nbsp;</span>
    <span style="color:rgb(0,0,255);">null</span>
    <span style="color:rgb(0,0,0);">);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">else</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">&nbsp;结束操作</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Debug.WriteLine(</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;异步线程：读取文件结束</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inputStream.Close();<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br> &nbsp;&nbsp;&nbsp;&nbsp;}</span> 
   </div> 
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp; &nbsp; 使用该类时可以这么写：</span>
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <div style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;border:1px solid rgb(204,204,204);font-size:13px;"> 
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">&nbsp;开始在另一线程中异步读取文件</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;AsyncProcessor&nbsp;asyncIO&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">new</span>
    <span style="color:rgb(0,0,0);">&nbsp;AsyncProcessor(</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">test.txt</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">);<br> &nbsp;&nbsp;&nbsp;&nbsp;asyncIO.StartProcess();<br><br> &nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">&nbsp;在主程序中，做其它事情，这里简单地循环10秒</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;DateTime&nbsp;startTime&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;DateTime.Now;<br> &nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">while</span>
    <span style="color:rgb(0,0,0);">&nbsp;(DateTime.Now.Subtract(startTime).TotalSeconds&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,0);">10</span>
    <span style="color:rgb(0,0,0);">)<br> &nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Debug.WriteLine(</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">主程序：正在进行</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">&nbsp;暂停线程以模拟耗时的操作</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Thread.Sleep(TimeSpan.FromMilliseconds(</span>
    <span style="color:rgb(0,0,0);">100</span>
    <span style="color:rgb(0,0,0);">));<br> &nbsp;&nbsp;&nbsp;&nbsp;}<br><br> &nbsp;&nbsp;&nbsp;&nbsp;Debug.WriteLine(</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">主程序：已完成</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">);</span> 
   </div> 
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp; &nbsp;&nbsp;&nbsp;</span>
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp; 问题4：</span>
   <span style="font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;color:rgb(32,0,255);">如何创建临时文件</span>
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">；</span>
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp; 解决方案：</span>
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp; 有时需要在特定用户的临时目录下创建一个临时文件，这要求该文件具有唯一的名称，避免与其它程序生成的临时文件相冲突。我们会有多种选择。最简单的是，在程序所在目录内使用GUID或时间戳加上随机值作为文件名称。但Path类提供的方法还是可以为你节省工作量，这就是它的静态GetTempFileName方法，它在当前用户的临时目录下创建一个临时文件（文件名称一定是唯一的），临时目录通常类似于这样：C:\Documents and Settings\[username]\Local Settings\Temp。&nbsp;</span>
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <div style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;border:1px solid rgb(204,204,204);font-size:13px;"> 
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">string</span>
    <span style="color:rgb(0,0,0);">&nbsp;tempFile&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;Path.GetTempFileName();<br><br> &nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">using</span>
    <span style="color:rgb(0,0,0);">&nbsp;(FileStream&nbsp;fs&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">new</span>
    <span style="color:rgb(0,0,0);">&nbsp;FileStream(tempFile,&nbsp;FileMode.Open))<br> &nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">using</span>
    <span style="color:rgb(0,0,0);">&nbsp;(BinaryWriter&nbsp;writer&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">new</span>
    <span style="color:rgb(0,0,0);">&nbsp;BinaryWriter(fs))<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">&nbsp;写入数据</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writer.Write(</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">临时文件信息</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br> &nbsp;&nbsp;&nbsp;&nbsp;}<br><br> &nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">&nbsp;Do&nbsp;something<br><br> &nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">&nbsp;最后删除临时文件</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;File.Delete(tempFile);</span> 
   </div> 
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp; 问题5：</span>
   <span style="font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;color:rgb(32,0,255);">如何获得随机文件名</span>
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">；</span>
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp; 解决方案：</span>
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp; 使用Path.GetRandomFileName方法，它与GetTempFileName方法的不同之处在于它仅仅返回一个字符串但不会创建文件。</span>
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp; 问题6：<span style="line-height:1.8;color:rgb(32,0,255);">监视文件系统的变化</span>；<br> &nbsp;&nbsp;&nbsp; 解决方案：<br> &nbsp;&nbsp;&nbsp; 如果指定路径内的文件发生改变（比如文件被修改或创建），你希望能对此作出反应。<br> &nbsp;&nbsp;&nbsp; 如果程序与其它多个程序或业务处理相关，常常需要创建一个程序，并且只有文件系统发生变化时它才处于活动状态。你可以创建一个这样的程序，让它定期区检测指定目录，此时会发现有件事情让你苦恼：检测得越频繁，就会浪费越多的系统资源；而检测得越少，那么检测到变化的时间就会越长。<br> &nbsp;&nbsp;&nbsp; 这时可以使用FileSystemWatcher组件，指定要进行监视的目录或文件，并处理其Created，Deleted，Renamed，Changed事件。<br> &nbsp;&nbsp;&nbsp; 要使用FileSystemWatcher组件，首先要创建它的一个实例，然后设置下列属性：<br> &nbsp;&nbsp;&nbsp; Path：指定要监视的目录；<br> &nbsp;&nbsp;&nbsp; Filter：指定要监视的文件类型，如”*.txt”；<br> &nbsp;&nbsp;&nbsp; NotifyFilter：指定要监视的变化类型；<br> &nbsp;&nbsp;&nbsp; FileSystemWatcher会引发四个关键的事件：Created，Deleted，Renamed，Changed。这些事件都在其FileSystemEventArgs参数中提供了相关文件的信息：如文件名，路径，改变类型，Renamed事件中还可以了解到改变前的文件名和路径。如果要禁用这些事件，则将它的EnableRaisingEvents属性设置为false。Created，Deleted，Renamed三个事件比较容易处理，但Changed事件就得当心了，你需要设置它的NotifyFilter属性以指示监视那些类型的变化。否则，程序会在文件被修改时淹没在不断发生的事件中（缓存区溢出）。<br></p> 
   <div style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;border:1px solid rgb(204,204,204);font-size:13px;"> 
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">&nbsp;设置相关属性</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;watcher.Path&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;appPath;<br> &nbsp;&nbsp;&nbsp;&nbsp;watcher.Filter&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">*.txt</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">;<br> &nbsp;&nbsp;&nbsp;&nbsp;watcher.IncludeSubdirectories&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">true</span>
    <span style="color:rgb(0,0,0);">;<br><br> &nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">&nbsp;添加事件处理函数</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;watcher.Created&nbsp;</span>
    <span style="color:rgb(0,0,0);">+=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">new</span>
    <span style="color:rgb(0,0,0);">&nbsp;FileSystemEventHandler(OnChanged);<br> &nbsp;&nbsp;&nbsp;&nbsp;watcher.Deleted&nbsp;</span>
    <span style="color:rgb(0,0,0);">+=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">new</span>
    <span style="color:rgb(0,0,0);">&nbsp;FileSystemEventHandler(OnChanged);<br> &nbsp;&nbsp;&nbsp;&nbsp;watcher.Changed&nbsp;</span>
    <span style="color:rgb(0,0,0);">+=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">new</span>
    <span style="color:rgb(0,0,0);">&nbsp;FileSystemEventHandler(OnChanged);<br> &nbsp;&nbsp;&nbsp;&nbsp;watcher.Renamed&nbsp;</span>
    <span style="color:rgb(0,0,0);">+=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">new</span>
    <span style="color:rgb(0,0,0);">&nbsp;RenamedEventHandler(OnRenamed);</span> 
   </div> 
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <div style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;border:1px solid rgb(204,204,204);font-size:13px;"> 
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">void</span>
    <span style="color:rgb(0,0,0);">&nbsp;OnRenamed(</span>
    <span style="color:rgb(0,0,255);">object</span>
    <span style="color:rgb(0,0,0);">&nbsp;sender,&nbsp;RenamedEventArgs&nbsp;e)<br> &nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">string</span>
    <span style="color:rgb(0,0,0);">&nbsp;renamedFormat&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">File:&nbsp;{0}&nbsp;被重命名为&nbsp;:{1}</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;txtChangedInfo.Text&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">string</span>
    <span style="color:rgb(0,0,0);">.Format(renamedFormat,&nbsp;e.OldFullPath,&nbsp;e.FullPath);<br> &nbsp;&nbsp;&nbsp;&nbsp;}<br><br> &nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">void</span>
    <span style="color:rgb(0,0,0);">&nbsp;OnChanged(</span>
    <span style="color:rgb(0,0,255);">object</span>
    <span style="color:rgb(0,0,0);">&nbsp;sender,&nbsp;FileSystemEventArgs&nbsp;e)<br> &nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">&nbsp;显示通知信息</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;txtChangedInfo.Text&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">文件:&nbsp;</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,0);">+</span>
    <span style="color:rgb(0,0,0);">&nbsp;e.FullPath&nbsp;</span>
    <span style="color:rgb(0,0,0);">+</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">发生改变</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,0);">+</span>
    <span style="color:rgb(0,0,0);">&nbsp;Environment.NewLine;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;txtChangedInfo.Text&nbsp;</span>
    <span style="color:rgb(0,0,0);">+=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">改变类型:&nbsp;</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,0);">+</span>
    <span style="color:rgb(0,0,0);">&nbsp;e.ChangeType.ToString();<br> &nbsp;&nbsp;&nbsp;&nbsp;}</span> 
   </div> 
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp; 问题7：</span>
   <span style="font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;color:rgb(32,0,255);">如何使用独立存储文件</span>
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">；</span>
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp; 解决方案：</span>
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp; 有时你需要将数据存储在文件中，但对本地硬盘驱动器却没有必要的权限（FileIOPermission）。这时要用到System.IO.IsolatedStorage命名空间中的类，这些类允许你的程序在特定用户的目录下将数据写入文件而不需要直接访问硬盘驱动器的权限：</span>
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"></p> 
   <div style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;border:1px solid rgb(204,204,204);font-size:13px;"> 
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">&nbsp;创建当前用户的独立存储</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">using</span>
    <span style="color:rgb(0,0,0);">&nbsp;(IsolatedStorageFile&nbsp;store&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;IsolatedStorageFile.GetUserStoreForAssembly())<br> &nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">&nbsp;创建一个文件夹</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;store.CreateDirectory(</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">MyFolder</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">);<br><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">&nbsp;创建一个独立存储文件</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">using</span>
    <span style="color:rgb(0,0,0);">&nbsp;(Stream&nbsp;fs&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">new</span>
    <span style="color:rgb(0,0,0);">&nbsp;IsolatedStorageFileStream(</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">MyFile.txt</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">,&nbsp;FileMode.Create,&nbsp;store))<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StreamWriter&nbsp;writer&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">new</span>
    <span style="color:rgb(0,0,0);">&nbsp;StreamWriter(fs);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writer.WriteLine(</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">Test&nbsp;Line!</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writer.Flush();<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Debug.WriteLine(</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">当前大小：</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,0);">+</span>
    <span style="color:rgb(0,0,0);">&nbsp;store.CurrentSize.ToString()&nbsp;</span>
    <span style="color:rgb(0,0,0);">+</span>
    <span style="color:rgb(0,0,0);">&nbsp;Environment.NewLine);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Debug.WriteLine(</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">范围：</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,0);">+</span>
    <span style="color:rgb(0,0,0);">&nbsp;store.Scope.ToString()&nbsp;</span>
    <span style="color:rgb(0,0,0);">+</span>
    <span style="color:rgb(0,0,0);">&nbsp;Environment.NewLine);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">string</span>
    <span style="color:rgb(0,0,0);">[]&nbsp;files&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;store.GetFileNames(</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">*.*</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">if</span>
    <span style="color:rgb(0,0,0);">&nbsp;(files.Length&nbsp;</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,0);">0</span>
    <span style="color:rgb(0,0,0);">)<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Debug.WriteLine(</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">当前文件：</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,0);">+</span>
    <span style="color:rgb(0,0,0);">&nbsp;Environment.NewLine);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">foreach</span>
    <span style="color:rgb(0,0,0);">&nbsp;(</span>
    <span style="color:rgb(0,0,255);">string</span>
    <span style="color:rgb(0,0,0);">&nbsp;file&nbsp;</span>
    <span style="color:rgb(0,0,255);">in</span>
    <span style="color:rgb(0,0,0);">&nbsp;files)<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Debug.WriteLine(file&nbsp;</span>
    <span style="color:rgb(0,0,0);">+</span>
    <span style="color:rgb(0,0,0);">&nbsp;Environment.NewLine);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp; }</span> 
   </div> 
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>
   <span style="font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;color:rgb(255,0,0);">注意</span>
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">：本文部分内容为作示例都作了简化，所以肯定会有不合理之处，仅希望能为您提供一些线索和思路。在使用前还请多多参考相关资料。</span> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="line-height:1.8;color:rgb(0,16,255);">Anders Cui</span></p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;&nbsp; 参考:<br></p> 
   <ul style="list-style:none;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
    <li style="background-image:url(&quot;images/icon_miniarrow.gif&quot;);background-position:0px 9px;background-repeat:no-repeat;list-style-type:disc;">Apress-Visual C# 2005 Recipes A Problem Solution Approach</li> 
    <li style="background-image:url(&quot;images/icon_miniarrow.gif&quot;);background-position:0px 9px;background-repeat:no-repeat;list-style-type:disc;">MSDN</li> 
   </ul>
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"></p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="line-height:1.8;"><font color="#333333"><span style="font-size:14px;">本文转自一个程序员的自省博客园博客，原文链接：http://www.cnblogs.com/anderslly/archive/2007/01/03/readwritefile.html，如需转载请自行联系原作者。</span></font><br></p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
