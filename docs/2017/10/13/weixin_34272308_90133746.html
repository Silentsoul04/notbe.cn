<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>如何在博客园的文章/随笔中添加可运行的js代码 « NotBeCN</title>
  <meta name="description" content="             　　在博客园浏览大牛们写的文章时，经常会看到在文章中混有一些可运行示例，例如司徒正美的博客中：    &nbsp; &nbsp; &nbsp;    &nbsp; &nbsp; &nbsp; &nbsp;带有可运行示例 &nbsp;        &nbsp; &nbsp; &nbsp;...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/10/13/weixin_34272308_90133746.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">如何在博客园的文章/随笔中添加可运行的js代码</h1>
    <p class="post-meta">Oct 13, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <p style="color:rgb(51,51,51);font-family:'Microsoft Yahei';font-size:16px;">　　在博客园浏览大牛们写的文章时，经常会看到在文章中混有一些可运行示例，例如<a href="http://www.cnblogs.com/rubylouvre/" rel="nofollow" style="color:rgb(171,98,43);font-family:Arial, Helvetica, sans-serif;font-size:14px;line-height:normal;">司徒正美的博客</a>中：</p> 
   <p style="color:rgb(51,51,51);font-family:'Microsoft Yahei';font-size:16px;"><img src="https://images0.cnblogs.com/blog/520134/201308/13162229-7fda3c18b2e1418d800b976b8db08cd8.jpg" alt="" width="446" height="162" style="border:0px;">&nbsp; &nbsp; &nbsp;</p> 
   <p style="color:rgb(51,51,51);font-family:'Microsoft Yahei';font-size:16px;">&nbsp; &nbsp; &nbsp; &nbsp;带有可运行示例 &nbsp;</p> 
   <p style="color:rgb(51,51,51);font-family:'Microsoft Yahei';font-size:16px;"><img src="https://images0.cnblogs.com/blog/520134/201308/13162246-3347c721b6544d1d86b13fbd12efb253.jpg" alt="" width="408" height="174" style="border:0px;"></p> 
   <p style="color:rgb(51,51,51);font-family:'Microsoft Yahei';font-size:16px;">&nbsp; &nbsp; &nbsp; 可以点击“运行代码”</p> 
   <p style="color:rgb(51,51,51);font-family:'Microsoft Yahei';font-size:16px;">　　经过一番小小的探索，掌握了这种写博技巧，希望大家也借鉴大牛们的写法，让我们的博客更有表现力~开始~</p> 
   <h3 style="font-size:16px;line-height:1.5;color:rgb(51,51,51);font-family:'Microsoft Yahei';">一、博客中带有可运行javascript示例</h3> 
   <p style="color:rgb(51,51,51);font-family:'Microsoft Yahei';font-size:16px;">　　很显然，作者是写了js代码在文章里面了，方法也比较简单，进入后台编辑器的源码编辑模式，在里面直接敲&lt;script&gt;标签，把代码放进去就可以了。同理，也可以敲&lt;style&gt;标签写css代码。保存后，看你的文章，已经可以有“功能”了。我之前也以为这样就OK了，挺方便的嘛!谁知过几天后再访问，发现js失效了！F12查看我的代码，&lt;script&gt;没有了！肯定是博客园进行过滤了。进入后台再更新一下源码，发现又可以生效了，但是过几天后就又失效了。带着疑惑我给博客园技术团队发了封邮件询问，谁知结果非常简单，请看截图：</p> 
   <p style="color:rgb(51,51,51);font-family:'Microsoft Yahei';font-size:16px;">　　<img src="https://images0.cnblogs.com/blog/520134/201308/13163649-4362a7c9fc484c4891f87e140f28cd6e.jpg" alt="" style="border:0px;"></p> 
   <p style="color:rgb(51,51,51);font-family:'Microsoft Yahei';font-size:16px;">　　真晕！所以结论是：要想在文章中使用js代码，请先联系管理员开通权限。</p> 
   <h3 style="font-size:16px;line-height:1.5;color:rgb(51,51,51);font-family:'Microsoft Yahei';">二、点击“运行代码”，在新页面运行文本框中的代码</h3> 
   <p style="color:rgb(51,51,51);font-family:'Microsoft Yahei';font-size:16px;">　　这个就稍微有点技术含量了。我之前一直以为是博客园有什么插件提供，后来发现压根没有，这个功能得自己用代码写。基本步骤是这样的：</p> 
   <p style="color:rgb(51,51,51);font-family:'Microsoft Yahei';font-size:16px;">　　①写好HTML代码</p> 
   <p style="color:rgb(51,51,51);font-family:'Microsoft Yahei';font-size:16px;">　　②转义，放在textarea中</p> 
   <p style="color:rgb(51,51,51);font-family:'Microsoft Yahei';font-size:16px;">　　③点击“运行代码”，创建新窗口。var win = window.open();</p> 
   <p style="color:rgb(51,51,51);font-family:'Microsoft Yahei';font-size:16px;">　　④获取textarea中的代码，反转义，放到win中。win.document.write(html);</p> 
   <p style="color:rgb(51,51,51);font-family:'Microsoft Yahei';font-size:16px;">　　这样就可以在新窗口中运行你的代码了。这中间需要转义和反转义HTML代码，相关的函数如下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(171,98,43);font-family:Arial, Helvetica, sans-serif;font-size:14px;text-decoration:underline;line-height:normal;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">转义</span>
<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">var</span> REGX_HTML_ENCODE = /"|&amp;|'|&lt;|&gt;|[\x00-\x20]|[\x7F-\xFF]|[\u0100-\u2700]/<span style="font-size:12px;line-height:1.5;">g;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">var</span> encodeHtml = <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">function</span><span style="font-size:12px;line-height:1.5;">(s){
      </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> (<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">typeof</span> s != "string") ?<span style="font-size:12px;line-height:1.5;"> s :
          s.replace(REGX_HTML_ENCODE,
                    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">function</span>($0<span style="font-size:12px;line-height:1.5;">){
                        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">var</span> c = $0.charCodeAt(0), r = ["&amp;#"<span style="font-size:12px;line-height:1.5;">];
                        c </span>= (c == 0x20) ? 0xA0<span style="font-size:12px;line-height:1.5;"> : c;
                        r.push(c); r.push(</span>";"<span style="font-size:12px;line-height:1.5;">);
                        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> r.join(""<span style="font-size:12px;line-height:1.5;">);
                    });
  };

</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">反转义</span>
<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">var</span> REGX_HTML_DECODE = /&amp;\w+;|&amp;#(\d+);/<span style="font-size:12px;line-height:1.5;">g;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">var</span> HTML_DECODE =<span style="font-size:12px;line-height:1.5;"> {
        </span>"&amp;lt;"  : "&lt;"<span style="font-size:12px;line-height:1.5;">, 
        </span>"&amp;gt;"  : "&gt;"<span style="font-size:12px;line-height:1.5;">, 
        </span>"&amp;amp;" : "&amp;"<span style="font-size:12px;line-height:1.5;">, 
        </span>"&amp;nbsp;": " "<span style="font-size:12px;line-height:1.5;">, 
        </span>"&amp;quot;": "\""<span style="font-size:12px;line-height:1.5;">, 
        </span>"&amp;copy;": "©"

        <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;"> Add more</span>
<span style="font-size:12px;line-height:1.5;">   };
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">var</span> decodeHtml = <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">function</span><span style="font-size:12px;line-height:1.5;">(s){
      </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> (<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">typeof</span> s != "string") ?<span style="font-size:12px;line-height:1.5;"> s :
          s.replace(REGX_HTML_DECODE,
                    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">function</span>($0,$1<span style="font-size:12px;line-height:1.5;">){
                        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">var</span> c = HTML_DECODE[$0]; <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;"> 尝试查表</span>
                        <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span>(c ===<span style="font-size:12px;line-height:1.5;"> undefined){
                            </span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;"> Maybe is Entity Number</span>
                            <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span>(!isNaN($1<span style="font-size:12px;line-height:1.5;">)){
                                c </span>= String.fromCharCode(($1 == 160) ? 32 : $1<span style="font-size:12px;line-height:1.5;">);
                            }</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">else</span><span style="font-size:12px;line-height:1.5;">{
                                </span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;"> Not Entity Number</span>
                                c = $0<span style="font-size:12px;line-height:1.5;">;
                            }
                        }
                        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span><span style="font-size:12px;line-height:1.5;"> c;
                    });
  };</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(171,98,43);font-family:Arial, Helvetica, sans-serif;font-size:14px;text-decoration:underline;line-height:normal;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:'Microsoft Yahei';font-size:16px;">　　需要的东西就这些了，来试一下：</p> 
   <p style="color:rgb(51,51,51);font-family:'Microsoft Yahei';font-size:16px;"></p> 
   <p style="color:rgb(51,51,51);font-family:'Microsoft Yahei';font-size:16px;"></p> 
   <p style="color:rgb(51,51,51);font-family:'Microsoft Yahei';font-size:16px;">　　怎么样？是不是感觉瞬间高端洋气了呢~看着虽简单，这可是我鼓捣了半天那个编辑器才试成功的，这里不得不吐槽一下博客园的编辑器，太不好用了！而且还有一个重要问题：<span style="color:rgb(255,0,0);">&lt;script&gt;标签无法被转义</span>，如果代码中含有&lt;script&gt;，转义的时候总是出错，猜测是博客园对script进行的特殊处理。所以，若代码中含有&lt;script&gt;标签，只能自己手动“转义了”，即把&lt;换成&amp;lt;把&gt;换成&amp;gt;并且，把所有手动转义后的代码先写在textarea中。看看我在后台是如何写的吧：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(171,98,43);font-family:Arial, Helvetica, sans-serif;font-size:14px;text-decoration:underline;line-height:normal;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">textarea </span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">class</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="runcode"</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;"> style</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="width: 90%; height: 100px;"</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">&amp;lt;</span>script type="text/javascript"<span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">&amp;gt;</span>alert(document.getElementsByTagName("li")[0].innerHTML);<span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">&amp;lt;</span>/script<span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">&amp;gt;</span>
<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">textarea</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;</span>
<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">script </span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">type</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="text/javascript"</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;</span>
<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">var</span><span style="font-size:12px;line-height:1.5;"> REGX_HTML_ENCODE </span><span style="font-size:12px;line-height:1.5;">=</span> <span style="font-size:12px;line-height:1.5;">/</span><span style="font-size:12px;line-height:1.5;">"|&amp;|'|&lt;|&gt;|[\x00-\x20]|[\x7F-\xFF]|[\u0100-\u2700]</span><span style="font-size:12px;line-height:1.5;">/</span><span style="font-size:12px;line-height:1.5;">g;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">var</span><span style="font-size:12px;line-height:1.5;"> encodeHtml </span><span style="font-size:12px;line-height:1.5;">=</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">function</span><span style="font-size:12px;line-height:1.5;">(s){
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span><span style="font-size:12px;line-height:1.5;"> (</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">typeof</span><span style="font-size:12px;line-height:1.5;"> s </span><span style="font-size:12px;line-height:1.5;">!=</span> <span style="font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">string</span><span style="font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">) </span><span style="font-size:12px;line-height:1.5;">?</span><span style="font-size:12px;line-height:1.5;"> s :
s.replace(REGX_HTML_ENCODE,
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">function</span><span style="font-size:12px;line-height:1.5;">($</span><span style="font-size:12px;line-height:1.5;">0</span><span style="font-size:12px;line-height:1.5;">){
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">var</span><span style="font-size:12px;line-height:1.5;"> c </span><span style="font-size:12px;line-height:1.5;">=</span><span style="font-size:12px;line-height:1.5;"> $</span><span style="font-size:12px;line-height:1.5;">0</span><span style="font-size:12px;line-height:1.5;">.charCodeAt(</span><span style="font-size:12px;line-height:1.5;">0</span><span style="font-size:12px;line-height:1.5;">), r </span><span style="font-size:12px;line-height:1.5;">=</span><span style="font-size:12px;line-height:1.5;"> [</span><span style="font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">&amp;#</span><span style="font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">];
c </span><span style="font-size:12px;line-height:1.5;">=</span><span style="font-size:12px;line-height:1.5;"> (c </span><span style="font-size:12px;line-height:1.5;">==</span> <span style="font-size:12px;line-height:1.5;">0x20</span><span style="font-size:12px;line-height:1.5;">) </span><span style="font-size:12px;line-height:1.5;">?</span> <span style="font-size:12px;line-height:1.5;">0xA0</span><span style="font-size:12px;line-height:1.5;"> : c;
r.push(c); r.push(</span><span style="font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">;</span><span style="font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">);
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span><span style="font-size:12px;line-height:1.5;"> r.join(</span><span style="font-size:12px;line-height:1.5;">""</span><span style="font-size:12px;line-height:1.5;">);
});
};
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">var</span><span style="font-size:12px;line-height:1.5;"> REGX_HTML_DECODE </span><span style="font-size:12px;line-height:1.5;">=</span> <span style="font-size:12px;line-height:1.5;">/</span><span style="font-size:12px;line-height:1.5;">&amp;\w+;|&amp;#(\d+);</span><span style="font-size:12px;line-height:1.5;">/</span><span style="font-size:12px;line-height:1.5;">g;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">var</span><span style="font-size:12px;line-height:1.5;"> HTML_DECODE </span><span style="font-size:12px;line-height:1.5;">=</span><span style="font-size:12px;line-height:1.5;"> {
</span><span style="font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">&amp;lt;</span><span style="font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;"> : </span><span style="font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">&lt;</span><span style="font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">, 
</span><span style="font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">&amp;gt;</span><span style="font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;"> : </span><span style="font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">&gt;</span><span style="font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">, 
</span><span style="font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">&amp;amp;</span><span style="font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;"> : </span><span style="font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">&amp;</span><span style="font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">, 
</span><span style="font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">&amp;nbsp;</span><span style="font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">: </span><span style="font-size:12px;line-height:1.5;">"</span> <span style="font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">, 
</span><span style="font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">&amp;quot;</span><span style="font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">: </span><span style="font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">\"</span><span style="font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">, 
</span><span style="font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">&amp;copy;</span><span style="font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">: </span><span style="font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">©</span><span style="font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">
};
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">var</span><span style="font-size:12px;line-height:1.5;"> decodeHtml </span><span style="font-size:12px;line-height:1.5;">=</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">function</span><span style="font-size:12px;line-height:1.5;">(s){
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span><span style="font-size:12px;line-height:1.5;"> (</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">typeof</span><span style="font-size:12px;line-height:1.5;"> s </span><span style="font-size:12px;line-height:1.5;">!=</span> <span style="font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">string</span><span style="font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">) </span><span style="font-size:12px;line-height:1.5;">?</span><span style="font-size:12px;line-height:1.5;"> s :
s.replace(REGX_HTML_DECODE,
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">function</span><span style="font-size:12px;line-height:1.5;">($</span><span style="font-size:12px;line-height:1.5;">0</span><span style="font-size:12px;line-height:1.5;">,$</span><span style="font-size:12px;line-height:1.5;">1</span><span style="font-size:12px;line-height:1.5;">){
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">var</span><span style="font-size:12px;line-height:1.5;"> c </span><span style="font-size:12px;line-height:1.5;">=</span><span style="font-size:12px;line-height:1.5;"> HTML_DECODE[$</span><span style="font-size:12px;line-height:1.5;">0</span><span style="font-size:12px;line-height:1.5;">]; </span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;"> 尝试查表</span>
<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span><span style="font-size:12px;line-height:1.5;">(c </span><span style="font-size:12px;line-height:1.5;">===</span><span style="font-size:12px;line-height:1.5;"> undefined){
</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;"> Maybe is Entity Number</span>
<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span><span style="font-size:12px;line-height:1.5;">(</span><span style="font-size:12px;line-height:1.5;">!</span><span style="font-size:12px;line-height:1.5;">isNaN($</span><span style="font-size:12px;line-height:1.5;">1</span><span style="font-size:12px;line-height:1.5;">)){
c </span><span style="font-size:12px;line-height:1.5;">=</span><span style="font-size:12px;line-height:1.5;"> String.fromCharCode(($</span><span style="font-size:12px;line-height:1.5;">1</span> <span style="font-size:12px;line-height:1.5;">==</span> <span style="font-size:12px;line-height:1.5;">160</span><span style="font-size:12px;line-height:1.5;">) </span><span style="font-size:12px;line-height:1.5;">?</span> <span style="font-size:12px;line-height:1.5;">32</span><span style="font-size:12px;line-height:1.5;"> : $</span><span style="font-size:12px;line-height:1.5;">1</span><span style="font-size:12px;line-height:1.5;">);
}</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">else</span><span style="font-size:12px;line-height:1.5;">{
</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;"> Not Entity Number</span>
<span style="font-size:12px;line-height:1.5;">c </span><span style="font-size:12px;line-height:1.5;">=</span><span style="font-size:12px;line-height:1.5;"> $</span><span style="font-size:12px;line-height:1.5;">0</span><span style="font-size:12px;line-height:1.5;">;
}
}
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span><span style="font-size:12px;line-height:1.5;"> c;
});
};
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">var</span><span style="font-size:12px;line-height:1.5;"> html </span><span style="font-size:12px;line-height:1.5;">=</span><span style="font-size:12px;line-height:1.5;"> encodeHtml(</span><span style="font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">&lt;ol&gt;&lt;li&gt;测试的内容&lt;/li&gt;&lt;li&gt;测试的内容&lt;/li&gt;&lt;li&gt;测试的内容&lt;/li&gt;&lt;li&gt;测试的内容&lt;/li&gt;&lt;/ol&gt;</span><span style="font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">); 
$(</span><span style="font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">.runcode</span><span style="font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">).prepend(html); 
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">function</span><span style="font-size:12px;line-height:1.5;"> runcode(){ </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">var</span><span style="font-size:12px;line-height:1.5;"> win </span><span style="font-size:12px;line-height:1.5;">=</span><span style="font-size:12px;line-height:1.5;"> window.open(); win.document.write(decodeHtml($(</span><span style="font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">.runcode</span><span style="font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">).html())); }
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">script</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(171,98,43);font-family:Arial, Helvetica, sans-serif;font-size:14px;text-decoration:underline;line-height:normal;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:'Microsoft Yahei';font-size:16px;">　　没有想到别的办法，目前只能这么处理了。若大家有好的方法，欢迎告知哦~</p> 
   <p style="color:rgb(51,51,51);font-family:'Microsoft Yahei';font-size:16px;">　　好了，就这些内容了，小伙伴们，快来试试吧~</p> 
   <p style="color:rgb(51,51,51);font-family:'Microsoft Yahei';font-size:16px;"><span style="color:rgb(255,102,0);">&nbsp;-------------2013.08.16补充-----------------------</span></p> 
   <p style="color:rgb(51,51,51);font-family:'Microsoft Yahei';font-size:16px;"><span style="color:rgb(255,102,0);">　　<span style="color:rgb(0,0,0);">感谢<a title="查看所回复的评论" href="http://www.cnblogs.com/lvdabao/p/3255384.html#2752660" rel="nofollow" style="color:rgb(171,98,43);font-family:Arial, Helvetica, sans-serif;font-size:14px;line-height:normal;"><span style="color:rgb(0,0,0);">@</span></a>cnljli提供的方法。可以省掉一大片代码。原先在获取到textarea中的内容后，需要经过一个反转义函数decodeHtml将转义后的代码写到新窗口中。其实textarea的value值就可以直接取到转义后的内容，所以这句：</span></span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre>win.document.write(decodeHtml($('.runcode').html()));</pre>
   </div> 
   <p style="color:rgb(51,51,51);font-family:'Microsoft Yahei';font-size:16px;">　　可以换成</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre>win.document.write($('.runcode').val());</pre>
   </div> 
   <p style="color:rgb(51,51,51);font-family:'Microsoft Yahei';font-size:16px;">　　这样上面那一片定义decodeHtml函数的代码可以不要了~涨知识了~</p> 
   <p style="color:rgb(51,51,51);font-family:'Microsoft Yahei';font-size:16px;"><br></p> 
   <p><font color="#333333">本文转自吕大豹博客园博客，原文链接：http://www.cnblogs.com/lvdabao/p/3255384.html，如需转载请自行联系原作者</font><br></p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
