<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>白话学习MVC(八)Action的执行二 « NotBeCN</title>
  <meta name="description" content="             一、概述    　　上篇博文《白话学习MVC(七)Action的执行一》介绍了ASP.NET MVC中Action的执行的简要流程，并且对TempData的运行机制进行了详细的分析，本篇来分析上一篇中遗留的【3-2、ActionInvoker.InvokeAction(Controlle...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/10/13/weixin_34186128_90135701.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">白话学习MVC(八)Action的执行二</h1>
    <p class="post-meta">Oct 13, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <h3 style="color:rgb(255,255,255);font-size:16px;line-height:1.5;font-family:verdana, Arial, Helvetica, sans-serif;"><span style="line-height:1.8;font-size:14pt;">一、概述</span></h3> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:13px;">　　上篇博文《白话学习MVC(七)Action的执行一》介绍了ASP.NET MVC中Action的执行的简要流程，并且对TempData的运行机制进行了详细的分析，本篇来分析上一篇中遗留的【<strong>3-2、</strong></span><span style="line-height:1.8;"><span style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;color:rgb(136,136,136);">ActionInvoker.InvokeAction(ControllerContext, actionName)</span>】部分的内容，其中包含了</span><span style="line-height:1.8;"><span style="line-height:1.8;font-size:13px;">Action的执行、过滤器的执行、View的呈现(下节介绍)。</span><br></span></span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="line-height:1.8;color:rgb(0,0,255);">public</span> <span style="line-height:1.8;color:rgb(0,0,255);">abstract</span> <span style="line-height:1.8;color:rgb(0,0,255);">class</span><span style="line-height:1.8;"> Controller : ControllerBase, IActionFilter, IAuthorizationFilter, IDisposable, IExceptionFilter, IResultFilter
    {</span><span style="line-height:1.8;color:rgb(0,0,255);">protected</span> <span style="line-height:1.8;color:rgb(0,0,255);">override</span> <span style="line-height:1.8;color:rgb(0,0,255);">void</span><span style="line-height:1.8;"> ExecuteCore()
        {
            </span><span style="line-height:1.8;color:rgb(0,128,0);">//</span><span style="line-height:1.8;color:rgb(0,128,0);">获取上次处理过程中没有被使用的TempData</span>
<span style="line-height:1.8;">            PossiblyLoadTempData();
            </span><span style="line-height:1.8;color:rgb(0,0,255);">try</span><span style="line-height:1.8;">
            {
                </span><span style="line-height:1.8;color:rgb(0,128,0);">//</span><span style="line-height:1.8;color:rgb(0,128,0);">从路由数据中获取请求的Action的名字</span>
                <span style="line-height:1.8;color:rgb(0,0,255);">string</span> actionName = RouteData.GetRequiredString(<span style="line-height:1.8;color:rgb(128,0,0);">"</span><span style="line-height:1.8;color:rgb(128,0,0);">action</span><span style="line-height:1.8;color:rgb(128,0,0);">"</span><span style="line-height:1.8;">);</span>
                <span style="line-height:1.8;color:rgb(0,0,255);">if</span> (!<span style="line-height:1.8;"><span style="line-height:1.8;color:rgb(255,0,0);">ActionInvoker.InvokeAction(ControllerContext, actionName)</span>)
                {
                    HandleUnknownAction(actionName);
                }
            }
            </span><span style="line-height:1.8;color:rgb(0,0,255);">finally</span><span style="line-height:1.8;">
            {
                </span><span style="line-height:1.8;color:rgb(0,128,0);">//</span><span style="line-height:1.8;color:rgb(0,128,0);">将TempData保存到Session中。等待之后将Session的key【__ControllerTempData】发送到响应流中！</span>
<span style="line-height:1.8;">                PossiblySaveTempData();
            }
        }
</span><span style="line-height:1.8;">    }    <br></span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <h3 style="color:rgb(255,255,255);font-size:16px;line-height:1.5;font-family:verdana, Arial, Helvetica, sans-serif;"><span style="line-height:1.8;font-size:14pt;">二、详细分析</span></h3> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:13px;">　　概述中的红色字体部分，也就是我们上一节中遗留的代码段，它实现了Action的执行。现在我们就来通过MVC源代码分析此段代码所涉及的所有部分。</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>    <span style="line-height:1.8;color:rgb(0,0,255);">public</span> <span style="line-height:1.8;color:rgb(0,0,255);">abstract</span> <span style="line-height:1.8;color:rgb(0,0,255);">class</span><span style="line-height:1.8;"> Controller : ControllerBase, IActionFilter, IAuthenticationFilter, IAuthorizationFilter, IDisposable, IExceptionFilter, IResultFilter, IAsyncController, IAsyncManagerContainer
    {
        </span><span style="line-height:1.8;color:rgb(0,0,255);">private</span><span style="line-height:1.8;"> IActionInvoker _actionInvoker;
        
        </span><span style="line-height:1.8;color:rgb(0,0,255);">public</span><span style="line-height:1.8;"> IActionInvoker ActionInvoker
        {
            </span><span style="line-height:1.8;color:rgb(0,0,255);">get</span><span style="line-height:1.8;">
            {
                </span><span style="line-height:1.8;color:rgb(0,128,0);">//</span><span style="line-height:1.8;color:rgb(0,128,0);">ActionInvoker的InvokeAction方法就是执行Action的调用。
                </span><span style="line-height:1.8;color:rgb(0,128,0);">//</span><span style="line-height:1.8;color:rgb(0,128,0);">可见，此处又有一个扩展点，设置自定义的ActionInvoker（即：在激活Controller后，执行该控制器实例的ActionInvoker属性，为属性赋值即可）。</span>
                <span style="line-height:1.8;color:rgb(0,0,255);">if</span> (_actionInvoker == <span style="line-height:1.8;color:rgb(0,0,255);">null</span><span style="line-height:1.8;">)
                {    
                    _actionInvoker </span>=<span style="line-height:1.8;"> CreateActionInvoker();
                }
                </span><span style="line-height:1.8;color:rgb(0,0,255);">return</span><span style="line-height:1.8;"> _actionInvoker;
            }
            </span><span style="line-height:1.8;color:rgb(0,0,255);">set</span> { _actionInvoker =<span style="line-height:1.8;"> value; }
        }
    
        </span><span style="line-height:1.8;color:rgb(0,0,255);">protected</span> <span style="line-height:1.8;color:rgb(0,0,255);">override</span> <span style="line-height:1.8;color:rgb(0,0,255);">void</span><span style="line-height:1.8;"> ExecuteCore()
        {
            PossiblyLoadTempData();
            </span><span style="line-height:1.8;color:rgb(0,0,255);">try</span><span style="line-height:1.8;">
            {
                </span><span style="line-height:1.8;color:rgb(0,128,0);">//</span><span style="line-height:1.8;color:rgb(0,128,0);">从路由数据中获取请求的Action的名字（路由系统从请求地址中获取）</span>
                <span style="line-height:1.8;color:rgb(0,0,255);">string</span> actionName = RouteData.GetRequiredString(<span style="line-height:1.8;color:rgb(128,0,0);">"</span><span style="line-height:1.8;color:rgb(128,0,0);">action</span><span style="line-height:1.8;color:rgb(128,0,0);">"</span><span style="line-height:1.8;">);
                </span><span style="line-height:1.8;color:rgb(0,128,0);">//</span><span style="line-height:1.8;color:rgb(0,128,0);">ActionInvoker是Controller类中的一个属性，该属性默认返回的是一个AsyncControllerActionInvoker对象</span>
                <span style="line-height:1.8;color:rgb(0,0,255);">if</span> (!<span style="line-height:1.8;"><span style="line-height:1.8;color:rgb(255,0,0);">ActionInvoker.InvokeAction(ControllerContext, actionName)</span>)
                {
                    HandleUnknownAction(actionName);
                }
            }
            </span><span style="line-height:1.8;color:rgb(0,0,255);">finally</span><span style="line-height:1.8;">
            {
                PossiblySaveTempData();
            }
        }
        
        </span><span style="line-height:1.8;color:rgb(0,0,255);">protected</span> <span style="line-height:1.8;color:rgb(0,0,255);">virtual</span><span style="line-height:1.8;"> IActionInvoker CreateActionInvoker()
        {</span><span style="line-height:1.8;color:rgb(0,128,0);">//</span><span style="line-height:1.8;color:rgb(0,128,0);">对于Resolver，只能根据类型反射创建实例，接口和抽象类都是返回null，所以下面的代码返回的是一个AsyncControllerActionInvoker对象！（MVC3中是直接返回一个ControllerActionInvoker）
            </span><span style="line-height:1.8;color:rgb(0,128,0);">//</span><span style="line-height:1.8;color:rgb(0,128,0);">AsyncControllerActionInvoker不只是异步的，他还包括了同步。因为他继承自ControllerActionInvoker类，并实现了IAsyncActionInvoker接口。
            </span><span style="line-height:1.8;color:rgb(0,128,0);">//</span><span style="line-height:1.8;color:rgb(0,128,0);">这里就有疑问了，既然接口和抽象类都不能创建实例且返回null，那为什么还以接口为参数呢？</span>
            <span style="line-height:1.8;color:rgb(0,0,255);">return</span> Resolver.GetService&lt;IAsyncActionInvoker&gt;() ?? Resolver.GetService&lt;IActionInvoker&gt;() ?? <span style="line-height:1.8;color:rgb(0,0,255);">new</span><span style="line-height:1.8;"> AsyncControllerActionInvoker();
        }
    }</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:13px;">&nbsp;　　上述代码中，红色字体部分中的ActionInvoker是Controller类的一个属性，该属性返回的是私有IActionInvoker类型的字段_actionInvoker的值，如果_actionInvoker不等于null，则返回字段_actionInvoker的值，否则创建一个 AsyncControllerAtionInvoker对象赋值给_actionInvoker字段并返回。所以，在我们没有设置自定义ActionInvoker时，默认这个ActionInvoker是一个AsyncControllerActonInvoker对象。即：执行AsyncControllerActonInvoker对象的InvokeAction方法来完成Action的执行！</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:13px;color:rgb(153,153,153);"><strong>扩展：</strong><em>此处我们可以创建一个自定义的ActionInvoker，然后使用自定义的ActionInvoker来实现Action的执行！</em></span><br><span style="line-height:1.8;font-size:13px;color:rgb(153,153,153);"><em>　　1、创建自定义一个ActionInvoker（实现IActionInvoker接口的类或者直接继承AsyncControllerActonInvoker类）。</em></span><br><span style="line-height:1.8;font-size:13px;color:rgb(153,153,153);"><em>　　2、创建好自定义的ActionInvoker之后，就需要将我们的ActionInvoker设置到系统中，就是通过请求的控制器HomeController的基类Controller的这个ActionInvoker属性来进行设置。所以，我们就需要在HomeController被激活时，直接执行该控制器实例的ActionInvoker属性来设置，而控制器的激活是在一个ControllerActivator的Create方法中完成的，ControllerActivator的选择又是ControllerFactory来做的！</em></span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.8;">Global.asax</span> 
   </div> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.8;">MyControllerActivator.cs</span> 
   </div> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.8;">MyActionInvoker.cs</span> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:13px;">&nbsp;　　上面指出两部分内容，一、在默认情况下的ActionInvoker(AsyncControllerActonInvoker)；二、使用自定义ActionInvoker。我们所提到的ActionInvoker都是泛指实现了IActionInvoker接口的类，而上述两个中情况【默认ActionInvoker(AsyncControllerActonInvoker)】和【自定义ActionInvoker】便是实现了IActionInvoker接口，并实现了该接口中唯一的一个方法InvokeAction，而实现的这个方法中包含了对Action执行的所有操作，下面就来看看默认情况下ActionInvoker（AsyncControllerActonInvoker）的InvokeAction方法中是如何定义的！其实，自定义ActionInvoker的InvokeAction方法也是仿照AsyncControllerActonInvoker类来实现的。</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.8;">AsyncControllerActionInvoker</span> 
   </div> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="line-height:1.8;color:rgb(0,0,255);">public</span> <span style="line-height:1.8;color:rgb(0,0,255);">class</span><span style="line-height:1.8;"> ControllerActionInvoker : IActionInvoker
{
    </span><span style="line-height:1.8;color:rgb(0,0,255);">public</span> <span style="line-height:1.8;color:rgb(0,0,255);">virtual</span> <span style="line-height:1.8;color:rgb(0,0,255);">bool</span> InvokeAction(ControllerContext controllerContext, <span style="line-height:1.8;color:rgb(0,0,255);">string</span><span style="line-height:1.8;"> actionName)
    {
        </span><span style="line-height:1.8;color:rgb(0,128,0);">//</span><span style="line-height:1.8;color:rgb(0,128,0);">ControllerDescriptor封装描述控制器的信息，如控制器的名称、类型和操作。</span>
        ControllerDescriptor controllerDescriptor =<span style="line-height:1.8;"> GetControllerDescriptor(controllerContext);
        </span><span style="line-height:1.8;color:rgb(0,128,0);">//</span><span style="line-height:1.8;color:rgb(0,128,0);">FindAction方法：找到要执行的那么Action，并将该Action的相关信息封装在ActionDescriptor中。</span>
        <span style="line-height:1.8;color:rgb(255,0,0);">ActionDescriptor actionDescriptor = FindAction(controllerContext, controllerDescriptor, actionName);
        </span><span style="line-height:1.8;color:rgb(0,0,255);">if</span> (actionDescriptor != <span style="line-height:1.8;color:rgb(0,0,255);">null</span><span style="line-height:1.8;">)
        {
             </span><span style="line-height:1.8;color:rgb(0,128,0);">//</span><span style="line-height:1.8;color:rgb(0,128,0);">GetFilters方法：获取应用在Action上的所有过滤器，并封装到一个FilterInfo对象中。</span>
           <span style="line-height:1.8;color:rgb(255,0,0);"> FilterInfo filterInfo = GetFilters(controllerContext, actionDescriptor);

            </span><span style="line-height:1.8;color:rgb(0,0,255);">try</span><span style="line-height:1.8;">
            {
                </span><span style="line-height:1.8;color:rgb(0,128,0);">//</span><span style="line-height:1.8;color:rgb(0,128,0);">Authorize授权过滤器需要实现IAuthorizationFilter接口，该接口有一个方法：OnAuthorization
                
   </span><span style="line-height:1.8;color:rgb(0,128,0);">//</span><span style="line-height:1.8;color:rgb(0,128,0);">循环执行应用在Actio上所有Authorize授权过滤器的OnAuthorization方法,定义如果不满足过滤器条件，则需要创建一个ActionResult复制给Result属性
   </span><span style="line-height:1.8;color:rgb(0,128,0);">//</span><span style="line-height:1.8;color:rgb(0,128,0);">AuthorizeAttribute是MVC封装好的一个授权过滤器，从Cookie中获取信息，检查是否授权成功，可参考定义自己的授权管理器</span>
                <span style="line-height:1.8;color:rgb(255,0,0);">AuthorizationContext authContext = InvokeAuthorizationFilters(controllerContext, filterInfo.AuthorizationFilters, actionDescriptor);
                </span><span style="line-height:1.8;color:rgb(0,0,255);">if</span> (authContext.Result != <span style="line-height:1.8;color:rgb(0,0,255);">null</span><span style="line-height:1.8;">)
                {
                    </span><span style="line-height:1.8;color:rgb(0,128,0);">//</span><span style="line-height:1.8;color:rgb(0,128,0);">没有通过Authorize授权过滤器，直接根据自定义的ActionResult进行View的呈现！<br>
//View的呈现（下一节介绍）</span>
<span style="line-height:1.8;"><span style="line-height:1.8;color:rgb(153,153,153);"> InvokeActionResult(controllerContext, authContext.Result);</span>
                }
                </span><span style="line-height:1.8;color:rgb(0,0,255);">else</span><span style="line-height:1.8;">
                {
                     </span><span style="line-height:1.8;color:rgb(0,128,0);">//</span><span style="line-height:1.8;color:rgb(0,128,0);">ValidateRequest,该值指示是否为此请求启用请求验证
                     </span><span style="line-height:1.8;color:rgb(0,128,0);">//</span><span style="line-height:1.8;color:rgb(0,128,0);">是否对请求必须验证，默认为true，该属性定义在ControllerBase类中</span>
                    <span style="line-height:1.8;color:rgb(0,0,255);">if</span><span style="line-height:1.8;"> (controllerContext.Controller.ValidateRequest)
                    {
                        </span><span style="line-height:1.8;color:rgb(0,128,0);">//</span><span style="line-height:1.8;color:rgb(0,128,0);">ValidateRequest应该是检查XSS威胁之类的，在模型绑定请求中获取值前进行处理。</span>
<span style="line-height:1.8;">                        ValidateRequest(controllerContext);
                    }
                    </span><span style="line-height:1.8;color:rgb(0,128,0);">//</span><span style="line-height:1.8;color:rgb(0,128,0);">获取Action方法参数的值（模型绑定）</span>
                    <span style="line-height:1.8;color:rgb(255,0,0);">IDictionary&lt;string, object&gt; parameters = GetParameterValues(controllerContext, actionDescriptor);
                    </span><span style="line-height:1.8;color:rgb(0,128,0);">//</span><span style="line-height:1.8;color:rgb(0,128,0);">执行【方法过滤器】(实现IActionFilter接口)并执行Action内代码</span>
                    <span style="line-height:1.8;color:rgb(255,0,0);">ActionExecutedContext postActionContext = InvokeActionMethodWithFilters(controllerContext, filterInfo.ActionFilters, actionDescriptor, parameters);
                    </span><span style="line-height:1.8;color:rgb(0,128,0);">//</span><span style="line-height:1.8;color:rgb(0,128,0);">执行【结果过滤器】(实现IResultFilter接口)，再做View的呈现。</span>
<span style="line-height:1.8;"><span style="line-height:1.8;color:rgb(255,0,0);"> InvokeActionResultWithFilters(controllerContext, filterInfo.ResultFilters, postActionContext.Result);</span>
                }
            }
            </span><span style="line-height:1.8;color:rgb(0,0,255);">catch</span><span style="line-height:1.8;"> (ThreadAbortException)
            {</span>
                <span style="line-height:1.8;color:rgb(0,0,255);">throw</span><span style="line-height:1.8;">;
            }
            </span><span style="line-height:1.8;color:rgb(0,0,255);">catch</span><span style="line-height:1.8;"> (Exception ex)
            {
                </span><span style="line-height:1.8;color:rgb(0,128,0);">//</span><span style="line-height:1.8;color:rgb(0,128,0);">执行异常过滤器</span>
                ExceptionContext exceptionContext =<span style="line-height:1.8;"> InvokeExceptionFilters(controllerContext, filterInfo.ExceptionFilters, ex);
                </span><span style="line-height:1.8;color:rgb(0,0,255);">if</span> (!<span style="line-height:1.8;">exceptionContext.ExceptionHandled)
                {
                    </span><span style="line-height:1.8;color:rgb(0,0,255);">throw</span><span style="line-height:1.8;">;
                }<br><span style="line-height:1.8;color:rgb(0,128,0);"> //根据异常过滤器中定义的ActionResult进行View的呈现</span>
                InvokeActionResult(controllerContext, exceptionContext.Result);
            }

            </span><span style="line-height:1.8;color:rgb(0,0,255);">return</span> <span style="line-height:1.8;color:rgb(0,0,255);">true</span><span style="line-height:1.8;">;
        }
        </span><span style="line-height:1.8;color:rgb(0,128,0);">//</span><span style="line-height:1.8;color:rgb(0,128,0);"> notify controller that no method matched</span>
        <span style="line-height:1.8;color:rgb(0,0,255);">return</span> <span style="line-height:1.8;color:rgb(0,0,255);">false</span><span style="line-height:1.8;">;
    }
}</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:13px;">　　上述代码中已添加了详细的注释，大致流程为：首先，根据【控制器信息】和【Action的Name】从被请求控制器的众多Action中找到要访问的Action，然后再执行应用在Action上的过滤器，最后根据ActionResult再进行View的呈现（下一节介绍）。</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;"><span style="line-height:1.8;"><span style="line-height:1.8;color:rgb(153,153,153);"><em><span style="line-height:1.8;font-size:13px;"><strong>&nbsp;扩展：</strong>此处ControllerActionInvoker是MVC4中的，MVC5中新添加Authorizetion过滤器，并且这个过滤器的执行模式和Authorizetion过滤器是一样。对于Authentic过滤器，它需要实现IAuthenticationFilter接口，该接口中有两个方法：OnAuthentication和OnAuthenticationChallenge，执行顺序为：【Authentic过滤器的OnAuthentication方法】—&gt;【Action过滤器的执行】—&gt;【Action内代码的执行】—&gt;【Authentic过滤器的OnAuthenticationChallenge方法】—&gt;【Result过滤器的执行】—&gt;【View的呈现】，所以就目前看来，通过这个过滤器也就可以在Action执行前且View呈现之前进行一些操作，从而可增强扩展性！</span></em></span><br></span></span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.8;">MVC5:ControllerActionInvoker</span> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">InvokeAction方法解析</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>1、ActionDescriptor actionDescriptor = FindAction(controllerContext, controllerDescriptor, actionName);</strong></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　<span style="line-height:1.8;font-size:13px;">在控制器HomeController对象的所有方法中，找到当前请求的Action（控制器对象的一个方法）。</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.8;">ControllerActionInvoker</span> 
   </div> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.8;">ReflectedControllerDescriptor</span> 
   </div> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.8;">ActionMethodSelector</span> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　<span style="line-height:1.8;font-size:13px;">上述代码中，其实就是通过HomeController实例利用反射获取到所有的方法（包括父类中的方法），然后就是进行筛选，首先通过判断得到的方法是否是Controller类实例的方法，从而将HomeController父类中的方法过滤掉；之后再根据方法的名字来做判断，从而将方法名字不是请求的actionName的方法过滤掉；再之后判断应用在Action方法上的特性是否和客户端使用的 HTTP 数据传输方法一致，将不符合Http数据传输方法的Action过滤掉；再再之后，当符合条件的Action方法只有一个时，就将该Action方法返回，即：得到了指定的Action。最后将得到的Action方法封装到一个继承自ActionDescriptor类的ReflectedActionDescriptor对象中。<br></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:small;"><span style="line-height:19px;"><span style="line-height:1.8;color:rgb(153,153,153);"><em><strong>扩展</strong>：由上面介绍可知，其实对Action方法的查找和筛选都是在ActionMethodSelector中进行的，MVC5中的</em></span><span style="line-height:1.8;"><span style="line-height:1.8;color:rgb(153,153,153);"><em>ActionMethodSelector虽然大体上流程是和MVC4相同的，但是具体实现上还是有点差异，有兴趣的可以看一下。</em></span><br></span></span></span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.8;">MVC5：ActionMethodSelector</span> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>&nbsp;2、FilterInfo filterInfo = GetFilters(controllerContext, actionDescriptor);</strong></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　<span style="line-height:1.8;font-size:13px;">获取应用在Action方法上的所有过滤器，并将封装到一个FilterInfo对象中。这些过滤器有：ActionFilter、AuthorizationFilter、ExceptionFilter、ResultFilter，另外在MVC5中又新添加了一个AuthenticationFilter过滤器。</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.8;">ControllerActionInvoker</span> 
   </div> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.8;">FilterProviders</span> 
   </div> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.8;">FilterProviderCollection</span> 
   </div> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.8;">MultiServiceResolver</span> 
   </div> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.8;">GlobalFilterCollection</span> 
   </div> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.8;">FilterAttributeFilterProvider</span> 
   </div> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.8;">ControllerInstanceFilterProvider</span> 
   </div> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.8;">FilterInfo</span> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:13px;">　　上述代码中，实现了获取过滤器，而过滤器可以通过4种方式添加：1、Global.asax中的RegisterGlobalFilters方法，Scope=10；2、在控制器HomeController上以特性的方法添加，Scope=20；3、在Action上以特性的方式添加，Scope=30；4、控制器HomeController本身也是过滤器，它实现了各过滤器接口，Scope=0；</span><br><span style="line-height:1.8;font-size:13px;">　　针对以上的4中添加方法，【1】直接通过GlobalFilterCollection集合来获取，应为GlobalFilterCollection实现了IEnumerable接口、【2】【3】通过FilterAttributeFilterProvider对象的GetFilters方法来获取、【4】通过ControllerInstanceFilterProvider对象的GetFilters方法来获取。</span><br><span style="line-height:1.8;font-size:13px;">　　所以，整个流程为：遍历执行各【过滤器的提供器】的GetFilters方法，从而得到所有过滤器且过滤器按照Scope值从小到大排列，然后再从后向前执行来对不允许重复使用的过滤器进行去重（只保留Scope值大的过滤器），如果允许重复使用的话（AllowMutiple=true），表示允许重复使用该过滤器，则不执行去重。最终将得到的过滤器按照过滤器类型(按接口不同)分类封装到FilterInfo对象中。<br><strong><span style="line-height:1.8;color:rgb(255,0,0);">更正：</span></strong></span><span style="line-height:1.8;font-size:13px;color:rgb(255,0,0);">FilterProviderCollection类的AllowMultiple方法中【if(mvcFilter==null){true}】，也表示该过滤器为控制器本身。因为Controller类只实现了过滤器接口，而没有实现IMvcFilter接口或继承实现了IMvcFilter接口的类。</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><em><strong>&nbsp;<span style="line-height:1.8;color:rgb(153,153,153);">扩展</span></strong><span style="line-height:1.8;color:rgb(153,153,153);">：如有兴趣可以看一下MVC5中过获取过滤器代码</span></em></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.8;">MVC5：FilterProviderCollection</span> 
   </div> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.8;">MVC5：MultiServiceResolver</span> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>&nbsp;3、AuthorizationContext authContext = InvokeAuthorizationFilters(controllerContext, filterInfo.AuthorizationFilters, actionDescriptor);</strong></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:small;"><span style="line-height:19px;"><span style="line-height:1.8;">&nbsp;　　执行Authorize授权过滤器，其实就是执过滤器的OnAuthorization方法。AuthorizeAttribute是一个MVC的授权过滤器，可参考定义自己的授权过滤器。授权过滤器本质上是去读取cookie，检查cookie中相应的值是否和授权过滤器中设置的一致（可以用来做登录之后才能访问某页面的功能）。<br></span></span></span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.8;">ControllerActionInvoker</span> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:13px;">　　上述代码中，遍历所有的Authorize授权过滤器并执行其OnAuthorization方法，在OnAuthorization方法中，如果请求不满足条件，则创建一个ActionResult对象并赋值给AuthorizationContext对象的Result属性，之后直接使用该ActionResult进行View的呈现。</span><br><span style="line-height:1.8;font-size:13px;">　　在MVC中，</span><span style="line-height:1.8;"><span style="line-height:1.8;font-size:13px;">AuthorizeAttribute是微软定义的一个授权过滤器，它的OnAuthorization方法中规定，如果不满足条件的话，就跳转到登录页面（在WebConfig文件中配置）。</span><br><img src="https://images0.cnblogs.com/blog/425762/201311/21133957-6e102ded81e9483f83a7de8f44b9d7a1.png" alt="" style="border:0px;"></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:small;"><span style="line-height:19px;"><span style="line-height:1.8;">&nbsp;</span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>4、IDictionary&lt;string, object&gt; parameters = GetParameterValues(controllerContext, actionDescriptor);</strong></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　<span style="line-height:1.8;font-size:13px;">模型绑定，获取Action方法参数对象的实参。详细请看：<a class="titlelink" href="http://www.cnblogs.com/wupeiqi/p/3377854.html" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom:1px dotted rgb(51,51,51);">白话学习MVC(六)模型绑定</a></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>&nbsp;5、ActionExecutedContext postActionContext = InvokeActionMethodWithFilters(controllerContext, filterInfo.ActionFilters, actionDescriptor, parameters);</strong></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　<span style="line-height:1.8;font-size:13px;">执行【方法过滤器】(实现IActionFilter接口)并执行Action方法内的代码</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.8;">ControllerActionInvoker</span> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:13px;">　　上述代码，首先循环执行所有Action过滤器的ActionExecuting方法，然后执行Action方法内的代码，最后再循环执行所有的Action过滤器的ActionExecuted方法。此过程的过滤器中，如果不满足过滤器的要求，则直接利用自定义的ActionResult对象进行View的呈现！<br> 在执行Action方法内部代码时，那些返回值：return Content()、return View()、return Json()等，其实都是执行Controller类的方法，这些方法内创建继承自ActionResult类的ContentResult、ViewResult、JsonResult的对象并返回。<br></span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.8;">Controller</span> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:13px;">补充：过滤器的ActionExecuting方法和ActionExecuted方法的执行是按照一条龙的顺序执行的。</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><em><span style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;"><span style="line-height:1.8;"><img src="https://images0.cnblogs.com/blog/425762/201311/21143051-857585b042584d42a73524938da322d8.png" alt="" style="border:0px;"><br></span></span></span></em></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;"><span style="line-height:1.8;">此图摘自：http://www.cnblogs.com/artech/archive/2012/08/06/action-filter.html</span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;color:rgb(255,0,0);"><em><span style="line-height:1.8;font-size:13px;"><strong>重要：</strong>InvokeActionMethodWithFilters方法中的那句碉堡的代码实现了一条龙的方式去【OnActionExecuting】和【OnActionExecuted】方法，必须要好好学习下！！！</span></em></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>6、InvokeActionResultWithFilters(controllerContext, filterInfo.ResultFilters, postActionContext.Result);</strong></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　<span style="line-height:1.5;font-family:'Courier New';font-size:12px;">执行【结果过滤器】(实现IResultFilter接口)，再做View的呈现。</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.8;">ControllerActionInvoker</span> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;　　<span style="line-height:1.8;font-size:13px;">上述代码中，先循环执行所有的Result过滤器的OnResultExecuting方法，然后执行View的呈现，再循环执行所有的Result过滤器的OnResultExecuted方法。执行流程也是一条龙的方方式！</span><br><img src="https://images0.cnblogs.com/blog/425762/201311/21172543-a9922bcd46ca4889a6248a232c8b8159.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;　　以上所有就是Action执行的全部，如果不符之处，请指正！由以上的执行可知【View的呈现】是通过ControllerActionInvoker类的InvokeActionResult方法来实现的，下一篇就来详细分析View的呈现相关的知识！</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><br></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><br></p> 
   <p><font color="#333333"><span style="font-size:14px;">本文转自武沛齐博客园博客，原文链接：http://www.cnblogs.com/wupeiqi/p/3405170.html，如需转载请自行联系原作者</span></font><br></p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
