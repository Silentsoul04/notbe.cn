<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>深入浅出 React Native：使用 JavaScript 构建原生应用 « NotBeCN</title>
  <meta name="description" content="                       深入浅出 React Native：使用 JavaScript 构建原生应用     &nbsp;     链接：https://zhuanlan.zhihu.com/p/19996445          原文：Introducing React Native: B...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/10/11/weixin_33728268_90135154.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">深入浅出 React Native：使用 JavaScript 构建原生应用</h1>
    <p class="post-meta">Oct 11, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <div class="blogpost-body" style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:25.2px;"> 
    <p><img src="https://images2015.cnblogs.com/blog/791499/201609/791499-20160926190549360-225395761.png" alt="" style="border:0px;"></p> 
    <h1 style="color:rgb(0,0,0);line-height:1.5;font-size:28px;"><span style="line-height:1.8;font-family:'楷体';">深入浅出 React Native：使用 JavaScript 构建原生应用</span></h1> 
    <p>&nbsp;</p> 
    <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">链接：<a href="https://zhuanlan.zhihu.com/p/19996445" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);">https://zhuanlan.zhihu.com/p/19996445</a></span></p> 
    <div>
     <span style="line-height:1.8;font-family:'楷体';font-size:18px;">原文：<a class="wrap external" href="https://link.zhihu.com/?target=http%3A//www.raywenderlich.com/99473/introducing-react-native-building-apps-javascript" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);">Introducing React Native: Building Apps with JavaScript</a></span>
    </div> 
    <div> 
     <br>
     <br>
     <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">数月前，<a class="wrap external" href="https://link.zhihu.com/?target=https%3A//code.facebook.com/videos/786462671439502/react-js-conf-2015-keynote-introducing-react-native-/" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);">Facebook 对外宣布了正在开发的 React Native 框架</a>，这个框架允许你使用 JavaScript 开发原生的 iOS 应用——就在今天，<a class="wrap external" href="https://link.zhihu.com/?target=https%3A//github.com/facebook/react-native" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);">Beta 版的仓库</a>释出了！</span></p> 
     <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">基于&nbsp;<a class="wrap external" href="https://link.zhihu.com/?target=http%3A//phonegap.com/" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);">PhoneGap</a>&nbsp;使用 JavaScript 和 HTML5 开发 iOS 应用已经有好几年了，那 React Native 有什么牛的？</span></p> 
     <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">React Native 真的很牛，让大家兴奋异常的主要原因有两点：</span></p> 
     <ol>
      <li style="list-style:decimal;"> <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">可以基于 React Native使用 JavaScript 编写应用逻辑，UI 则可以保持全是原生的。这样的话就没有必要就 HTML5 的 UI 做出常见的妥协；</span></p> </li> 
      <li style="list-style:decimal;"> <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">React 引入了一种与众不同的、略显激进但具备高可用性的方案来构建用户界面。长话短说，应用的 UI 简单通过一个基于应用目前状态的函数来表达。</span></p> </li> 
     </ol>
     <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">React Native 的关键就是，以把&nbsp;<a class="wrap external" href="https://link.zhihu.com/?target=http%3A//facebook.github.io/react/" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);">React</a>&nbsp;编程模式的能力带到移动开发来作为主要目标。它的目标不是跨平台一次编写到处执行，而是一次学习跨平台开发。这个是一个非常大的区别。这篇教程只介绍 iOS 平台，不过你一旦掌握了相关的概念，就可以应用到 Android 平台，快速构建 Android 应用。</span></p> 
     <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">如果之前只用过 Objective-C 或者 Swift 写应用的话，你很可能不会对使用 JavaScript 来编写应用的愿景感到兴奋。尽管如此，作为一个 Swift 开发者来说，上面提到的第二点应该可以激起你的兴趣！</span></p> 
     <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">你通过 Swift，毫无疑问学习到了新的更多有效的编码方法和技巧，鼓励转换和不变性。然而，构建 UI 的方式还是和使用 Objective-C 的方式一致。仍然以 UIKit 为基础，独断专横。</span></p> 
     <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">通过像 virtual DOM 和 reconciliation 这些有趣的概念，React 将函数式编程直接带到了 UI 层。</span></p> 
     <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">这篇教程将带着你一路构建一个 UK 房产搜索应用：</span></p> 
     <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;"><img src="https://images2015.cnblogs.com/blog/791499/201609/791499-20160926190749578-588372791.png" alt="" style="border:0px;"></span></p> 
     <div> 
      <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">如果你之前一点 JavaScript 都没写过，别担心。这篇教程带着你进行一步一步进行编码。React 使用 CSS 属性来定义样式，一般比较容易读也比较容易理解。但是如果你想了解更多的话，可以去看看&nbsp;<a class="wrap external" href="https://link.zhihu.com/?target=https%3A//developer.mozilla.org/en-US/docs/Web/CSS" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);">Mozilla Developer Network reference</a>，很不错的。</span></p> 
      <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">想要学习更多，继续往下读！</span></p> 
      <div> 
       <h2 style="color:rgb(0,0,0);line-height:1.5;font-size:21px;">&nbsp;</h2> 
       <h2 style="color:rgb(0,0,0);line-height:1.5;font-size:21px;"><span style="line-height:1.8;font-family:'楷体';">准备工作</span></h2> 
       <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">React Native 框架<a class="wrap external" href="https://link.zhihu.com/?target=https%3A//github.com/facebook/react-native" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);">托管在 GitHub 上</a>。你可以通过两种方式获取到它：使用 git 克隆仓库，或者下载一个 zip 压缩包文件。如果你的机器上已经安装了 React Native，在着手编码前还有其他几个因素需要考虑。</span></p> 
       <ul>
        <li style="list-style:disc;"><span style="line-height:1.8;font-family:'楷体';font-size:18px;">React Native 借助&nbsp;<a class="wrap external" href="https://link.zhihu.com/?target=https%3A//nodejs.org/" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);">Node.js</a>，即 JavaScript 运行时来创建 JavaScript 代码。如果你已经安装了 Node.js，那就可以上手了。</span></li>
       </ul>
       <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">首先，使用 Homebrew 官网提供的指引<a class="wrap external" href="https://link.zhihu.com/?target=http%3A//brew.sh/" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);">安装 Homebrew</a>，然后在终端执行以下命令：</span></p> 
       <div class="highlight"> 
        <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
         <pre>brew install node</pre>
        </div> 
       </div> 
       <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">接下来，使用 homebrew 安装&nbsp;<a class="wrap external" href="https://link.zhihu.com/?target=https%3A//facebook.github.io/watchman/" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);">watchman</a>，一个来自Facebook 的观察程序：</span></p> 
       <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
        <pre>brew install watchman</pre>
       </div> 
       <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">通过配置 watchman，React 实现了在代码发生变化时，完成相关的重建的功能。就像在使用 Xcode 时，每次保存文件都会进行一次创建。</span></p> 
       <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">接下来使用 `npm` 安装 React Native CLI 工具：</span></p> 
       <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
        <pre>npm install -g react-native-cli</pre>
       </div> 
       <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">这使用 Node 包管理器抓取 CLI 工具，并且全局安装；`npm` 在功能上与 CocoaPods 或者 Carthage 类似。</span></p> 
       <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">浏览到你想要创建 React Native 应用的文件夹下，使用 CLI 工具构建项目：</span></p> 
       <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
        <pre>react-native init PropertyFinder</pre>
       </div> 
       <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">现在，已经创建了一个初始项目，包含了创建和运行一个 React Native 应用所需的一切。</span></p> 
       <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">如果仔细观察了创建的文件夹和文件，你会发现一个&nbsp;<em>node_modules</em>&nbsp;文件夹，包含了 React Native 框架。你也会发现一个&nbsp;<em>index.ios.js</em>&nbsp;文件，这是 CLI 工具创建的一个空壳应用。最后，会出现一个 Xcode 项目文件和一个 iOS 文件夹，包含了少量的代码用来引入&nbsp;<em>bootstrap</em>&nbsp;到你的项目中。</span></p> 
       <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">打开 Xcode 项目文件，然后创建并运行。模拟器将会启动并且展示下面的问候语：</span></p> 
      </div> 
      <img src="https://images2015.cnblogs.com/blog/791499/201609/791499-20160926190935641-1388929933.png" alt="" style="border:0px;">
     </div> 
     <div>
      <span style="line-height:1.8;font-family:'楷体';font-size:18px;">你可以能发现，有一个终端窗口弹出，输出了下面的信息：</span>
     </div> 
     <div> 
      <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;"> 
       <div class="cnblogs_code_toolbar">
        <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
       </div> 
       <pre><span style="line-height:1.8;">$ npm start

</span>&gt; react-native@<span style="line-height:1.8;color:rgb(128,0,128);">0.1</span>.<span style="line-height:1.8;color:rgb(128,0,128);">0</span> start /Users/colineberhardt/Projects/react-<span style="line-height:1.8;">native
</span>&gt; ./packager/<span style="line-height:1.8;">packager.sh

 </span>===============================================================
 |  Running packager on port <span style="line-height:1.8;color:rgb(128,0,128);">8081</span><span style="line-height:1.8;">.       
 </span>|  Keep <span style="line-height:1.8;color:rgb(0,0,255);">this</span> packager running <span style="line-height:1.8;color:rgb(0,0,255);">while</span><span style="line-height:1.8;"> developing on any JS         
 </span>|  projects. Feel <span style="line-height:1.8;color:rgb(0,0,255);">free</span> to close <span style="line-height:1.8;color:rgb(0,0,255);">this</span><span style="line-height:1.8;"> tab and run your own      
 </span>|  packager instance <span style="line-height:1.8;color:rgb(0,0,255);">if</span><span style="line-height:1.8;"> you prefer.                              
 </span>|                                                              
 |     https:<span style="line-height:1.8;color:rgb(0,128,0);">//</span><span style="line-height:1.8;color:rgb(0,128,0);">github.com/facebook/react-native                 </span>
 |                                                              
 ===============================================================<span style="line-height:1.8;">


    React packager ready.</span></pre> 
       <div class="cnblogs_code_toolbar">
        <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
       </div> 
      </div> 
      <div> 
       <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">这就是 React Native 包，在 node 下运行。一会儿你就会知道它是用来干什么的。</span></p> 
       <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">不要关闭终端窗口；就然它在后台运行。如果你不小心关了，只需要停下来使用 Xcode 重新运行项目。</span></p> 
       <blockquote style="border:2px solid rgb(239,239,239);background:none;"> 
        <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">注意：在进入编码工作之前，还有最后一件事 —— 在这个教程中，你需要编写大量的 JavaScript 代码，Xcode 并非是最好的工具！我使用&nbsp;<a class="wrap external" href="https://link.zhihu.com/?target=http%3A//www.sublimetext.com/" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);">Sublime Text</a>，一个价格合理且应用广泛的编辑器。不过，<a class="wrap external" href="https://link.zhihu.com/?target=https%3A//atom.io/" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);">atom</a>，<a class="wrap external" href="https://link.zhihu.com/?target=http%3A//brackets.io/" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);">brackets</a>&nbsp;或者其他轻量的编辑器都能胜任这份工作。</span></p> 
       </blockquote> 
       <div> 
        <h2 style="color:rgb(0,0,0);line-height:1.5;font-size:21px;">&nbsp;</h2> 
        <h2 style="color:rgb(0,0,0);line-height:1.5;font-size:21px;"><span style="line-height:1.8;font-family:'楷体';">React Native 你好</span></h2> 
        <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">在开始“搜房App”之前，先来个简单的 Hello World App 热热身。在这一节里，你将会使用到一些组件。</span></p> 
        <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">在你钟爱的编辑其中打开 index.ios.js，删除当前的内容，因为你要从头构建你自己的应用。然后在文件顶部增加下面这样一行：：</span></p> 
        <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
         <pre><span style="line-height:1.8;color:rgb(128,0,0);">'</span><span style="line-height:1.8;color:rgb(128,0,0);">use strict</span><span style="line-height:1.8;color:rgb(128,0,0);">'</span>;</pre>
        </div> 
        <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">这行代码是用于开启&nbsp;<strong>Strict Mode</strong>，Strict mode的错误处理可以有所提高，JavaScript的一些语言缺陷也可以避免。简而言之就是，JavaScript在这种模式下工作地更好！</span></p> 
        <blockquote style="border:2px solid rgb(239,239,239);background:none;"> 
         <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">注意：想要研究一下 Strict Mode 的朋友，我会推荐你阅读&nbsp;<a class="wrap external" href="https://link.zhihu.com/?target=http%3A//ejohn.org/blog/ecmascript-5-strict-mode-json-and-more/" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);">Jon Resig 的文章:“ECMAScript 5 Strict Mode, JSON, and More”</a></span></p> 
        </blockquote> 
        <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">然后，加上这一行：</span></p> 
        <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
         <pre><span style="line-height:1.8;color:rgb(0,0,255);">var</span> React = require('react-native');</pre>
        </div> 
        <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">这句代码是将 react-native 模块加载进来，并将它赋值给变量 React 的。React Native 使用同 Node.js 相同的模块加载方式：require，这个概念可以等同于 Swift 中的“链接库”或者“导入库”。</span></p> 
        <blockquote style="border:2px solid rgb(239,239,239);background:none;"> 
         <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">注意：想要了解更多关于 JavaScript 模块的知识，我推荐阅读<a class="wrap external" href="https://link.zhihu.com/?target=http%3A//addyosmani.com/writing-modular-js/" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);">&nbsp;Addy Osmani 写的这篇文章</a>。</span></p> 
        </blockquote> 
        <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">在 require 语句的下面，加上这一段：</span></p> 
        <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;"> 
         <div class="cnblogs_code_toolbar">
          <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
         </div> 
         <pre><span style="line-height:1.8;color:rgb(0,0,255);">var</span> styles =<span style="line-height:1.8;"> React.StyleSheet.create({
  text: {
    color: </span>'black'<span style="line-height:1.8;">,
    backgroundColor: </span>'white'<span style="line-height:1.8;">,
    fontSize: </span>30<span style="line-height:1.8;">,
    margin: </span>80<span style="line-height:1.8;">
  }
});</span></pre> 
         <div class="cnblogs_code_toolbar">
          <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
         </div> 
        </div> 
        <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">以上代码定义了一段应用在 “Hello World” 文本上的样式。如果你曾接触过Web开发，那你很可能已经发现了：React Native 使用的是&nbsp;<a class="wrap external" href="https://link.zhihu.com/?target=http%3A//www.w3schools.com/css/" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);">CSS</a>&nbsp;来定义应用界面的样式。</span></p> 
        <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">现在我们来关注应用本身吧！依然是在相同的文件下，将以下代码添加到样式代码的下面：</span></p> 
        <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
         <pre><span style="line-height:1.8;">class PropertyFinderApp extends React.Component {
  render() {
    </span><span style="line-height:1.8;color:rgb(0,0,255);">return</span> React.createElement(React.Text, {style: styles.text}, "Hello World!"<span style="line-height:1.8;">);
  }
}</span></pre>
        </div> 
        <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">是的，奏是 JavaScript class！</span></p> 
        <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">类 (class) 是在ES6中被引入的，纵然JavaScript一直在进步，但Web开发者受困于兼容浏览器的状况中，不能怎么使用JS的新特性。React Native运行在JavaScriptCore中是，也就是说，你可以使用JS的新特性啦，完全不用担心兼容什么的呢。</span></p> 
        <blockquote style="border:2px solid rgb(239,239,239);background:none;"> 
         <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">注意：如果你是一名 Web 开发者，我百分百鼓励你要使用现代的JavaScript，然后使用像&nbsp;<a class="wrap external" href="https://link.zhihu.com/?target=https%3A//babeljs.io/" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);">Babel</a>&nbsp;这样的工具生成兼容性的 JavaScript，用于支持兼容性不好的老浏览器。</span></p> 
        </blockquote> 
        <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">PropertyFinderApp 继承了 React.Component（React UI的基础模块）。组件包含着不可变的属性，可变的状态变量以及暴露给渲染用的方法。这会你做的应用比较简单，只用一个渲染方法就可以啦。</span></p> 
        <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">React Native 组件并不是 UIKit 类，它们只能说是在某种程度上等同。框架只是将 React 组件树转化成为原生的UI。</span></p> 
        <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">最后一步啦，将这一行加在文件末尾：</span></p> 
        <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
         <pre>React.AppRegistry.registerComponent('PropertyFinder', <span style="line-height:1.8;color:rgb(0,0,255);">function</span>() { <span style="line-height:1.8;color:rgb(0,0,255);">return</span> PropertyFinderApp });</pre>
        </div> 
        <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">AppRegistry 定义了App的入口，并提供了根组件。</span></p> 
        <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">保存&nbsp;<strong>PropertyFinderApp.js</strong>，回到Xcode中。确保&nbsp;<strong>PropertyFinder</strong>&nbsp;规划（scheme）已经勾选了，并设置了相应的 iPhone 模拟器，然后生成并运行你的项目。几秒之后，你应该就可以看到 “Hello World” 应用正在运行了：</span></p> 
        <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;"><img src="https://images2015.cnblogs.com/blog/791499/201609/791499-20160926191546750-128045142.png" alt="" style="border:0px;"></span></p> 
        <div> 
         <span style="line-height:1.8;font-family:'楷体';font-size:18px;">这个JavaScript应用运行在模拟器上，使用的是原生UI，没有任何内嵌的浏览器哦！</span> 
         <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">还不相信这是真的？:] 那打开你的 Xcode，选择&nbsp;<strong>Debug\View Debugging\Capture View Hierarchy</strong>，你看<strong>native view hierarchy</strong>&nbsp;中都没有 UIWebView，就只有一个原生的view！:]<span style="line-height:1.5;">。</span></span></p> 
         <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;"><span style="line-height:1.5;"><img src="https://images2015.cnblogs.com/blog/791499/201609/791499-20160926191630781-730056601.png" alt="" style="border:0px;"></span></span></p> 
         <div> 
          <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">你一定很好奇其中的原理吧，那就在 Xcode 中打开&nbsp;<strong>AppDelegate.m</strong>，接着找到 application:didFinishLaunchingWithOptions：这个方法构建了 RCTRootView 用于加载 JavaScript 应用以及渲染最后的视图的。</span></p> 
          <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">当应用开始运行的时候，RCTRootView将会从以下的URL中加载应用：</span></p> 
          <div class="highlight"> 
           <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
            <pre><span style="line-height:1.8;color:rgb(128,0,0);">http://localhost:8081/index.ios.bundle</span></pre>
           </div> 
          </div> 
          <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">重新调用了你在运行这个App时打开的终端窗口，它开启了一个 packager 和 server 来处理上面的请求。</span></p> 
          <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">在 Safari 中打开那个 URL；你将会看到这个 App 的 JavaScript 代码。你也可以在 React Native 框架中找到你的 “Hello World” 代码。</span></p> 
          <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">当你的App开始运行了以后，这段代码将会被加载进来，然后 JavaScriptCore 框架将会执行它。在 Hello World 的例子里，它将会加载 PropertyFinderApp 组件，然后构建出原生的 UIKit 视图。关于这部分的内容，后文里会再详细解释的。</span></p> 
          <div> 
           <br>
           <h2 style="color:rgb(0,0,0);line-height:1.5;font-size:21px;"><span style="line-height:1.8;font-family:'楷体';">你好 JSX 的世界</span></h2> 
           <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">你当前的应用程序会使用 React.createElement 来构建应用 UI ,React会将其转换到原生环境中。在当前情况下，你的JavaScript代码是完全可读的,但一个更复杂的 UI 与嵌套的元素将迅速使代码变成一大坨。&nbsp;</span><br><br><span style="line-height:1.8;font-family:'楷体';font-size:18px;">确保应用程序仍在运行,然后回到你的文本编辑器中，编辑 PropertyFinderApp.js 。修改组件 render 方法的返回语句如下:</span></p> 
           <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
            <pre><span style="line-height:1.8;color:rgb(0,0,255);">return</span> &lt;React.Text style={styles.text}&gt;Hello World (Again)&lt;/React.Text&gt;;</pre>
           </div> 
           <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">这是 JSX ，或 JavaScript 语法扩展,它直接在你的 JavaScript 代码中混合了类似 HTML 的语法;如果你是一个 web 开发人员,应该对此不陌生。在本篇文章中你将一直使用 JSX 。</span></p> 
           <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">把你的改动保存到 PropertyFinderApp.js 中，并返回到模拟器。按下 Cmd + R ,你将看到你的应用程序刷新,并显示更新的消息 “Hello World(again)”。</span></p> 
           <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">重新运行一个 React Native 应用程序像刷新 web 浏览器一样简单!:]</span></p> 
           <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">因为你会使用相同的一系列 JavaScript 文件,您可以让应用程序一直运行,只在更改和保存 PropertyFinderApp.js 后刷新即可</span></p> 
           <blockquote style="border:2px solid rgb(239,239,239);background:none;"> 
            <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">注意:如果你感到好奇,可以看看你的“包”在浏览器中，JSX被转换成什么。</span></p> 
           </blockquote> 
           <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">这个 “Hello World” 已经够大家玩耍了,是时候构建实际的应用程序了!</span></p> 
           <p>&nbsp;</p> 
          </div> 
          <div> 
           <h2 style="color:rgb(0,0,0);line-height:1.5;font-size:21px;"><span style="line-height:1.8;font-family:'楷体';">添加导航</span></h2> 
           <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">我们的房产查找应用使用标准的栈式导航，基于 UIKit 的 navigation controller。现在正是添加的时候。</span></p> 
           <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">在 index.ios.js 文件中，把 PropertyFinderApp 重命名为HelloWorld：</span></p> 
           <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
            <pre>class HelloWorld extends React.Component {</pre>
           </div> 
           <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">“Hello World” 这几个字你还需要让它显示一会儿，但它不再是应用的根组件了。</span></p> 
           <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">接下来，在 HelloWorld 这个组件下面添加如下这个类：</span></p> 
           <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;"> 
            <div class="cnblogs_code_toolbar">
             <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
            </div> 
            <pre><span style="line-height:1.8;">class PropertyFinderApp extends React.Component {
  render() {
    </span><span style="line-height:1.8;color:rgb(0,0,255);">return</span><span style="line-height:1.8;"> (
      </span>&lt;<span style="line-height:1.8;">React.NavigatorIOS
        style</span>=<span style="line-height:1.8;">{styles.container}
        initialRoute</span>=<span style="line-height:1.8;">{{
          title: </span>'Property Finder'<span style="line-height:1.8;">,
          component: HelloWorld,
        }}</span>/&gt;
<span style="line-height:1.8;">    );
  }
}</span></pre> 
            <div class="cnblogs_code_toolbar">
             <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
            </div> 
           </div> 
           <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">构造一个 navigation controller，应用一个样式，并把初始路由设为 Hello World 组件。在 Web 开发中，路由就是一种定义应用导航的一种技术，即定义页面——或者说是路由——与 URL 的对应关系。</span></p> 
           <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">在同一个文件中，更新样式定义，包含如下 container 的样式：</span></p> 
           <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;"> 
            <div class="cnblogs_code_toolbar">
             <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
            </div> 
            <pre><span style="line-height:1.8;color:rgb(0,0,255);">var</span> styles =<span style="line-height:1.8;"> React.StyleSheet.create({
  text: {
    color: </span>'black'<span style="line-height:1.8;">,
    backgroundColor: </span>'white'<span style="line-height:1.8;">,
    fontSize: </span>30<span style="line-height:1.8;">,
    margin: </span>80<span style="line-height:1.8;">
  },
  container: {
    flex: </span>1<span style="line-height:1.8;">
  }
});</span></pre> 
            <div class="cnblogs_code_toolbar">
             <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
            </div> 
           </div> 
           <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">在随后的教程中会告诉你 flex: 1 是什么意思。</span></p> 
           <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">回到模拟器，Cmd+R，看看新 UI 的样子：</span></p> 
          </div> 
          <img src="https://images2015.cnblogs.com/blog/791499/201609/791499-20160926192046110-1698589827.png" alt="" style="border:0px;">
         </div> 
         <div> 
          <span style="line-height:1.8;font-family:'楷体';font-size:18px;">这就是包含了 root view 的 navigation controller，目前 root view 就是 “Hello World”。很棒——应用已经有了基础的导航结构，到添加<strong>真实</strong>&nbsp;UI 的时候了。</span> 
          <h2 style="color:rgb(0,0,0);line-height:1.5;font-size:21px;"><span style="line-height:1.8;font-family:'楷体';font-size:18pt;">创建搜索页</span></h2> 
          <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">在项目中添加一个新文件，命名为 SearchPage.js，然后将其放在PropertyFinderApp.js 所在目录下。在文件中添加下面代码：</span></p> 
          <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;"> 
           <div class="cnblogs_code_toolbar">
            <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
           </div> 
           <pre>'use strict'<span style="line-height:1.8;">;

</span><span style="line-height:1.8;color:rgb(0,0,255);">var</span> React = require('react-native'<span style="line-height:1.8;">);
</span><span style="line-height:1.8;color:rgb(0,0,255);">var</span><span style="line-height:1.8;"> {
  StyleSheet,
  Text,
  TextInput,
  View,
  TouchableHighlight,
  ActivityIndicatorIOS,
  Image,
  Component
} </span>= React;</pre> 
           <div class="cnblogs_code_toolbar">
            <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
           </div> 
          </div> 
          <div> 
           <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">你会注意到，位于引入 react-native 所在位置的前面有一个严格模式标识，紧接着的声明语句是新知识。</span></p> 
           <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">这是一种解构赋值，准许你获取对象的多个属性并且使用一条语句将它们赋给多个变量。结果是，后面的代码中可以省略掉 React 前缀；比如，你可以直接引用 StyleSheet ，而不再需要 React.StyleSheet。解构同样适用于操作数组，<a class="wrap external" href="https://link.zhihu.com/?target=https%3A//developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);">更多细节请戳这里</a>。</span></p> 
           <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">继续在 SearchPage.js 文件中添加下面的样式：</span></p> 
           <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;"> 
            <div class="cnblogs_code_toolbar">
             <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
            </div> 
            <pre><span style="line-height:1.8;color:rgb(0,0,255);">var</span> styles =<span style="line-height:1.8;"> StyleSheet.create({
  description: {
    marginBottom: </span>20<span style="line-height:1.8;">,
    fontSize: </span>18<span style="line-height:1.8;">,
    textAlign: </span>'center'<span style="line-height:1.8;">,
    color: </span>'#656565'<span style="line-height:1.8;">
  },
  container: {
    padding: </span>30<span style="line-height:1.8;">,
    marginTop: </span>65<span style="line-height:1.8;">,
    alignItems: </span>'center'<span style="line-height:1.8;">
  }
});</span></pre> 
            <div class="cnblogs_code_toolbar">
             <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
            </div> 
           </div> 
           <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">同样，以上都是标准的 CSS 属性。和 Interface Builder 相比，这样设置样式缺少了可视化，但是比起在 viewDidLoad() 中逐个设置视图属性的做法更友好！</span></p> 
           <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">只需要把组件添加到样式声明的前面：</span></p> 
           <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;"> 
            <div class="cnblogs_code_toolbar">
             <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
            </div> 
            <pre><span style="line-height:1.8;">class SearchPage extends Component {
  render() {
    </span><span style="line-height:1.8;color:rgb(0,0,255);">return</span><span style="line-height:1.8;"> (
      </span>&lt;View style={styles.container}&gt;
        &lt;Text style={styles.description}&gt;<span style="line-height:1.8;">
          Search </span><span style="line-height:1.8;color:rgb(0,0,255);">for</span> houses to buy!
        &lt;/Text&gt;
        &lt;Text style={styles.description}&gt;<span style="line-height:1.8;">
          Search by place</span>-<span style="line-height:1.8;">name, postcode or search near your location.
        </span>&lt;/Text&gt;
      &lt;/View&gt;
<span style="line-height:1.8;">    );
  }
}</span></pre> 
            <div class="cnblogs_code_toolbar">
             <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
            </div> 
           </div> 
           <div> 
            <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">render 很好地展示出 JSX 以及它表示的结构。通过这个样式，你可以轻易地描绘出组件 UI 的结构：一个容器，包含两个 text 标签。</span></p> 
            <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">最后，将下面的代码添加到文件末尾：</span></p> 
            <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
             <pre>module.exports = SearchPage;</pre>
            </div> 
            <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">这可以 export SearchPage 类，方便在其他文件中使用它。</span></p> 
            <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">下一步是更新应用的路由，以初始化路由。</span></p> 
            <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">打开 PropertyFinderApp.js，在文件顶部紧接着上一个 require 语句的位置添加下面代码：</span></p> 
            <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
             <pre><span style="line-height:1.8;color:rgb(0,0,255);">var</span> SearchPage = require('./SearchPage');</pre>
            </div> 
            <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">在 PropertyFinderApp 类的 render 函数内部，通过更新 initialRoute 来引用最新添加的页面，如下：</span></p> 
            <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
             <pre>component: SearchPage</pre>
            </div> 
            <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">此时，如果你愿意则可以移除 HelloWorld 类以及与它相关联的样式。你不在需要那段代码了。</span></p> 
            <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">切换到模拟器，按下 Cmd+R 查看新的 UI：</span></p> 
           </div> 
           <img src="https://images2015.cnblogs.com/blog/791499/201609/791499-20160926192531985-411143964.png" alt="" style="border:0px;">
          </div> 
          <div> 
           <span style="line-height:1.8;font-family:'楷体';font-size:18px;">使用 Flexbox 定义外观</span> 
           <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">现在，你已经看到了用基本的 CSS 属性来控制外间距（margin），内间距（padding）还有颜色（color）。不过，可能你还不太了解要如何使用伸缩盒（flexbox），flexbox 是最近新加入 CSS 规范，用它就能很便利地布局界面。</span></p> 
           <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">React Native 用&nbsp;<a class="wrap external" href="https://link.zhihu.com/?target=https%3A//github.com/facebook/css-layout" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);">css-layout</a>（这是一个用 JavaScript 实现flexbox标准然后编译成 C（iOS平台）或者Java（Android平台）的库)。</span></p> 
           <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">Facebook把这个项目单独出来实在太正确了，这样可以编译成多种语言，促进更多新颖的应用的发展，比如<a class="wrap external" href="https://link.zhihu.com/?target=http%3A//blog.scottlogic.com/2015/02/02/svg-layout-flexbox.html" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);">flexbox layout to SVG</a>。</span></p> 
           <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">在你的App中，容器（container）默认地是纵向布局，也就是说在它的子元素将会竖直地排列，像这样：</span></p> 
           <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;"><img src="https://images2015.cnblogs.com/blog/791499/201609/791499-20160926192619594-286351372.png" alt="" style="border:0px;"></span></p> 
           <div> 
            <span style="line-height:1.8;font-family:'楷体';font-size:18px;">这被称为主轴 (main axis)，它的方向可以是竖直的也可以是水平的。</span> 
            <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">每一个子元素在竖直方向上的位置是由它的margin，height和padding共同决定的。容器的 alignItems 属性也要设置成 center，这个属性可以控制子元素在十字轴上的位置。在这里，它实现了居中对齐的文本。</span></p> 
            <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">好啦，现在我们把输入框和按钮加上去吧。打开&nbsp;<strong>SearchPage.js</strong>，将下面的代码插入第二个 Text 元素的后面：</span></p> 
            <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;"> 
             <div class="cnblogs_code_toolbar">
              <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
             </div> 
             <pre><span style="line-height:1.8;color:rgb(0,0,255);">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);">View </span><span style="line-height:1.8;color:rgb(255,0,0);">style</span><span style="line-height:1.8;color:rgb(0,0,255);">={styles.flowRight}</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span>
  <span style="line-height:1.8;color:rgb(0,0,255);">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);">TextInput
    </span><span style="line-height:1.8;color:rgb(255,0,0);">style</span><span style="line-height:1.8;color:rgb(0,0,255);">={styles.searchInput}
    </span><span style="line-height:1.8;color:rgb(255,0,0);">placeholder</span><span style="line-height:1.8;color:rgb(0,0,255);">='Search </span><span style="line-height:1.8;color:rgb(255,0,0);">via name or postcode'</span><span style="line-height:1.8;color:rgb(0,0,255);">/&gt;</span>
  <span style="line-height:1.8;color:rgb(0,0,255);">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);">TouchableHighlight </span><span style="line-height:1.8;color:rgb(255,0,0);">style</span><span style="line-height:1.8;color:rgb(0,0,255);">={styles.button}
      </span><span style="line-height:1.8;color:rgb(255,0,0);">underlayColor</span><span style="line-height:1.8;color:rgb(0,0,255);">='#99d9f4'</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span>
    <span style="line-height:1.8;color:rgb(0,0,255);">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);">Text </span><span style="line-height:1.8;color:rgb(255,0,0);">style</span><span style="line-height:1.8;color:rgb(0,0,255);">={styles.buttonText}</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span>Go<span style="line-height:1.8;color:rgb(0,0,255);">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);">Text</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span>
  <span style="line-height:1.8;color:rgb(0,0,255);">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);">TouchableHighlight</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span>
<span style="line-height:1.8;color:rgb(0,0,255);">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);">View</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span>
<span style="line-height:1.8;color:rgb(0,0,255);">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);">TouchableHighlight </span><span style="line-height:1.8;color:rgb(255,0,0);">style</span><span style="line-height:1.8;color:rgb(0,0,255);">={styles.button}
    </span><span style="line-height:1.8;color:rgb(255,0,0);">underlayColor</span><span style="line-height:1.8;color:rgb(0,0,255);">='#99d9f4'</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span>
  <span style="line-height:1.8;color:rgb(0,0,255);">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);">Text </span><span style="line-height:1.8;color:rgb(255,0,0);">style</span><span style="line-height:1.8;color:rgb(0,0,255);">={styles.buttonText}</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span>Location<span style="line-height:1.8;color:rgb(0,0,255);">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);">Text</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span>
<span style="line-height:1.8;color:rgb(0,0,255);">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);">TouchableHighlight</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span></pre> 
             <div class="cnblogs_code_toolbar">
              <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
             </div> 
            </div> 
            <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">现在你已经加上了两个最高等级的视图（top-level view），一个视图包含了文本输入框和一个按钮，还有一个视图内只有一个按钮。在后文中你会看到，它们的样式是什么样的。</span></p> 
            <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">接着，添加上对应的样式：</span></p> 
            <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;"> 
             <div class="cnblogs_code_toolbar">
              <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
             </div> 
             <pre><span style="line-height:1.8;color:rgb(128,0,0);">flowRight: </span>{<span style="line-height:1.8;color:rgb(255,0,0);">
  flexDirection</span>:<span style="line-height:1.8;color:rgb(0,0,255);"> 'row',
  alignItems: 'center',
  alignSelf: 'stretch'
</span>}<span style="line-height:1.8;color:rgb(128,0,0);">,
buttonText: </span>{<span style="line-height:1.8;color:rgb(255,0,0);">
  fontSize</span>:<span style="line-height:1.8;color:rgb(0,0,255);"> 18,
  color: 'white',
  alignSelf: 'center'
</span>}<span style="line-height:1.8;color:rgb(128,0,0);">,
button: </span>{<span style="line-height:1.8;color:rgb(255,0,0);">
  height</span>:<span style="line-height:1.8;color:rgb(0,0,255);"> 36,
  flex: 1,
  flexDirection: 'row',
  backgroundColor: '#48BBEC',
  borderColor: '#48BBEC',
  borderWidth: 1,
  borderRadius: 8,
  marginBottom: 10,
  alignSelf: 'stretch',
  justifyContent: 'center'
</span>}<span style="line-height:1.8;color:rgb(128,0,0);">,
searchInput: </span>{<span style="line-height:1.8;color:rgb(255,0,0);">
  height</span>:<span style="line-height:1.8;color:rgb(0,0,255);"> 36,
  padding: 4,
  marginRight: 5,
  flex: 4,
  fontSize: 18,
  borderWidth: 1,
  borderColor: '#48BBEC',
  borderRadius: 8,
  color: '#48BBEC'
</span>}</pre> 
             <div class="cnblogs_code_toolbar">
              <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
             </div> 
            </div> 
            <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">要注意格式问题：每一个样式都是用逗号分隔开的，所以别忘了在container 选择器后面还要加上一个逗号。</span></p> 
            <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">以上的样式将会应用在你刚刚加上的输入框和按钮上。</span></p> 
            <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">现在返回到模拟器，然后按下 Cmd+R 刷新界面：&nbsp;</span></p> 
            <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;"><img src="https://images2015.cnblogs.com/blog/791499/201609/791499-20160926192851235-2010253649.png" alt="" style="border:0px;"></span></p> 
            <div> 
             <span style="line-height:1.8;font-family:'楷体';font-size:18px;">文本区域和 ’Go’ 按钮在同一行，不需要显式地定义两个组件的宽度，你只需要将它们放在同一个容器中，加上 flexDirection:'row' 样式，再定义好它们的 flex 值。文本区域是 flex:4，按钮则是 flex:1，这说明两者的宽度比是4:1。</span> 
             <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">大概你也发现了，你的“按钮”其实并不是按钮！:] 使用了 UIKit 后，按钮更倾向于是可以轻碰（tap）的标签（label），所以 React Native 团队决定直接在 JavaScript 中构建按钮了。所以你在 App 中使用的按钮是 TouchableHighlight，这是一个 React Native 组件，当轻碰 TouchableHighlight 时，它会变得透明从而显示出衬底的颜色（也就是按钮下层的组件颜色）。</span></p> 
             <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">搜索界面的最后一步就是加上一张图片.你可以从<a class="wrap external" href="https://link.zhihu.com/?target=http%3A//cdn2.raywenderlich.com/wp-content/uploads/2015/03/ReactNative-HouseImage.zip" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);">这里下载我们用的图片素材</a>并解压。</span></p> 
             <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">在Xcode中打开<strong>Images.xcassets</strong>文件，点击加号添加一个新的图片集。然后将图片素材拖进正确的“区间”：</span></p> 
             <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;"><img src="https://images2015.cnblogs.com/blog/791499/201609/791499-20160926192947281-682131907.png" alt="" style="border:0px;"></span></p> 
             <div> 
              <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">你需要重启应用才能让图片生效。</span></p> 
              <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">将以下代码添加到 TouchableHighlight 组件后面，它将用于“获取位置”按钮：</span></p> 
              <div class="highlight"> 
               <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
                <pre><span style="line-height:1.8;color:rgb(0,0,255);">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);">Image </span><span style="line-height:1.8;color:rgb(255,0,0);">source</span><span style="line-height:1.8;color:rgb(0,0,255);">={require('image!house')} </span><span style="line-height:1.8;color:rgb(255,0,0);">style</span><span style="line-height:1.8;color:rgb(0,0,255);">={styles.image}</span><span style="line-height:1.8;color:rgb(0,0,255);">/&gt;</span></pre>
               </div> 
              </div> 
              <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">现在再样式表的最后加上图片对应的样式，别忘了给原样式中最后一个加上逗号哦：</span></p> 
              <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
               <pre><span style="line-height:1.8;color:rgb(128,0,0);">image: </span>{<span style="line-height:1.8;color:rgb(255,0,0);">
  width</span>:<span style="line-height:1.8;color:rgb(0,0,255);"> 217,
  height: 138
</span>}</pre>
              </div> 
              <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">require('image!house') 语句用于确定在你应用的asset目录下的图片资源，在 Xcode 中，如果你的打开了&nbsp;Images.xcassets，你会看到一个“房屋”的图标，正是上面代码中引用到的。</span></p> 
              <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">返回到模拟器，Cmd+R刷新UI：&nbsp;</span></p> 
              <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;"><img src="https://images2015.cnblogs.com/blog/791499/201609/791499-20160926193116781-657868814.png" alt="" style="border:0px;"></span></p> 
              <blockquote style="border:2px solid rgb(239,239,239);background:none;"> 
               <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">注意：如果你这会没有看到“房屋”图片，取而代之的是一张“找不到资源”的图片，尝试重启packager（也就是在终端里输入 npm start 命令）。</span></p> 
              </blockquote> 
              <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">现在你的应用看起来挺不错的啦，不过它还少了点功能。接下来你的任务就是给它加上点状态，让它执行一些操作。</span></p> 
              <p>&nbsp;</p> 
              <h2 style="color:rgb(0,0,0);line-height:1.5;font-size:21px;"><span style="line-height:1.8;font-family:'楷体';">添加组件状态</span></h2> 
              <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">每个 React 组件都带有一个key-value存储的状态对象，你必须在组件渲染之前设置其初始状态。</span></p> 
              <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">在 SearchPage.js 中，我们对 SearchPage 类中，render方法前添加以下的代码。</span></p> 
              <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;"> 
               <div class="cnblogs_code_toolbar">
                <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
               </div> 
               <pre><span style="line-height:1.8;">constructor(props) {
  super(props);
  </span><span style="line-height:1.8;color:rgb(0,0,255);">this</span>.state =<span style="line-height:1.8;"> {
    searchString: </span>'london'<span style="line-height:1.8;">
  };
}</span></pre> 
               <div class="cnblogs_code_toolbar">
                <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
               </div> 
              </div> 
              <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">现在你的组件拥有一个状态变量：searchString ，且初始值被设置为 london 。</span></p> 
              <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">这时候你需要利用起组件中的状态了。在render方法中，用以下的代码替换TextInput元素中的内容：</span></p> 
              <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
               <pre><span style="line-height:1.8;color:rgb(0,0,255);">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);">TextInput
  </span><span style="line-height:1.8;color:rgb(255,0,0);">style</span><span style="line-height:1.8;color:rgb(0,0,255);">={styles.searchInput}
  </span><span style="line-height:1.8;color:rgb(255,0,0);">value</span><span style="line-height:1.8;color:rgb(0,0,255);">={this.state.searchString}
  </span><span style="line-height:1.8;color:rgb(255,0,0);">placeholder</span><span style="line-height:1.8;color:rgb(0,0,255);">='Search </span><span style="line-height:1.8;color:rgb(255,0,0);">via name or postcode'</span><span style="line-height:1.8;color:rgb(0,0,255);">/&gt;</span></pre>
              </div> 
              <div> 
               <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">这一步设置了 TextInput 组件 value 属性的值，这个值用于把状态变量 searchString 的当前值作为展示给用户的文字。我们已经考虑初始值的设定了，但如果用户编辑这里的文字会发生什么呢？</span></p> 
               <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">第一步需要建立一个方法来处理事件。在 SearchPage 类中添加以下的代码：</span></p> 
               <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
                <pre><span style="line-height:1.8;">onSearchTextChanged(event) {
  console.log(</span>'onSearchTextChanged'<span style="line-height:1.8;">);
  </span><span style="line-height:1.8;color:rgb(0,0,255);">this</span><span style="line-height:1.8;">.setState({ searchString: event.nativeEvent.text });
  console.log(</span><span style="line-height:1.8;color:rgb(0,0,255);">this</span><span style="line-height:1.8;">.state.searchString);
}</span></pre>
               </div> 
               <div> 
                <div> 
                 <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">上面的代码从 events 中取出了 text 属性的值，并用于更新组件的状态。这里面也添加了一些有用的调试代码。</span></p> 
                 <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">当文字改变时，需要让这个方法被调用，调用后的文字会通过 render 函数返回到组件中。因此我们需要在标签上添加一个 onChange 属性，添加后的标签如下所示：</span></p> 
                 <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
                  <pre><span style="line-height:1.8;color:rgb(0,0,255);">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);">TextInput
  </span><span style="line-height:1.8;color:rgb(255,0,0);">style</span><span style="line-height:1.8;color:rgb(0,0,255);">={styles.searchInput}
  </span><span style="line-height:1.8;color:rgb(255,0,0);">value</span><span style="line-height:1.8;color:rgb(0,0,255);">={this.state.searchString}
  </span><span style="line-height:1.8;color:rgb(255,0,0);">onChange</span><span style="line-height:1.8;color:rgb(0,0,255);">={this.onSearchTextChanged.bind(this)}
  </span><span style="line-height:1.8;color:rgb(255,0,0);">placeholder</span><span style="line-height:1.8;color:rgb(0,0,255);">='Search </span><span style="line-height:1.8;color:rgb(255,0,0);">via name or postcode'</span><span style="line-height:1.8;color:rgb(0,0,255);">/&gt;</span></pre>
                 </div> 
                 <div> 
                  <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">当用户更改文本时,会调用 onChange 上 的函数;在本例中,则是 onSearchTextChanged 。</span></p> 
                  <blockquote style="border:2px solid rgb(239,239,239);background:none;"> 
                   <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">注意:你估计会对 bind(this) 语句有疑问。在 JavaScript 中，this 这个关键字有点不同于大多数其他语言;在 Swift 表示 “自身”。在这种情况中，bind 可以确保在 onSearchTextChanged 方法中, this 可以作为组件实例的引用。有关更多信息,请参见<a class="wrap external" href="https://link.zhihu.com/?target=https%3A//developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/this" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);">MDN this</a>页面。</span></p> 
                  </blockquote> 
                  <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">在你再次刷新你的应用程序之前，还有一个步骤:在 return 前添加以下语句，打印一条日志来记录 render() 函数的调用:</span></p> 
                 </div> 
                 <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
                  <pre> console.log('SearchPage.render');</pre>
                 </div> 
                 <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">你会从这些日志语句中学到一些很有趣的东西!:]</span></p> 
                 <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">回到你的模拟器,然后按Cmd + R。您现在应该看到文本输入的初始值为 “london” ,编辑一下文本，从而在 Xcode 控制台中产生一些日志:&nbsp;</span></p> 
                 <img src="https://images2015.cnblogs.com/blog/791499/201609/791499-20160926193537953-1285553964.png" alt="" style="border:0px;">
                </div> 
                <div> 
                 <div> 
                  <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">注意看上面的截图，日志打印的顺序看起来有些奇怪：</span></p> 
                  <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">第一次调用 render() 函数用于设置视图。当文本变化时， onSearchTextChanged 函数被调用。之后，通过更新组件的状态来反映输入了新的文本,这会触发另一次 render 。 onSearchTextChanged() 函数也会被调用，会将改变的字符串打印出来。每当应用程序更新任何 React 组件,将会触发整个UI层的重新绘制,这会调用你所有组件的 render 方法。这是一个好主意,因为这样做把组件的渲染逻辑，从状态变化影响UI这一过程中完全解耦出来。</span></p> 
                  <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">与其他大多数 UI 框架所不同的是,你既不需要在状态改变的时候去手动更新 UI ,或使用某种类型的绑定框架，来创建某种应用程序状态和它的 UI 表现的关联;例如,我的文章中讲的，<a class="wrap external" href="https://link.zhihu.com/?target=http%3A//www.raywenderlich.com/74106/mvvm-tutorial-with-reactivecocoa-part-1" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);">通过ReactiveCocoa实现MVVM模式</a>。</span></p> 
                  <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">在 React 中,你不再需要担心 UI 的哪些部分可能受到状态变化的影响;你的整个应用程序的 UI，都可以简单地表示为一个函数的状态。</span></p> 
                  <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">此时，你可能已经发现了这一概念中一个根本性的缺陷。是的,非常准确——性能!</span></p> 
                  <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">你肯定不能在 UI 变化时，完全抛弃掉整个 UI 然后重新绘制吧&nbsp;</span><br><span style="line-height:1.8;font-family:'楷体';font-size:18px;">？这就是 React 高明的地方了。每当 UI 渲染出来后,render 方法会返回一颗视图渲染树,并与当前的 UIKit 视图进行比较。这个称之为 reconciliation 的过程的输出是一个简单的更新列表, React 会将这个列表应用到当前视图。这意味着，只有实际改变了的部分才会重新绘制。</span></p> 
                  <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">这个令人拍案叫绝的崭新概念让ReactJS变得独特——virtual-DOM(文档对象模型,一个web文档的视图树)和 reconciliation 这些概念——被应用于iOS应用程序。</span></p> 
                  <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">稍后你可以整理下思路,之后,在刚才的应用中你仍然有一些工作要做。日志代码增加了代码的繁琐性，已经不需要了，所以删除掉日志代码。</span></p> 
                 </div> 
                </div> 
               </div> 
               <div> 
                <h2 style="color:rgb(0,0,0);line-height:1.5;font-size:21px;">初始化搜索功能</h2> 
                <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">为了实现搜索功能，你需要处理 “Go” 按钮的点击事件，调用对应的 API，并提供一个视觉效果，告诉用户正在做查询。</span></p> 
                <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">在 SearchPage.js 中，在构造函数中把初始状态更新成：</span></p> 
                <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
                 <pre><span style="line-height:1.8;color:rgb(0,0,255);">this</span>.state =<span style="line-height:1.8;"> {
  searchString: </span>'london'<span style="line-height:1.8;">,
  isLoading: </span><span style="line-height:1.8;color:rgb(0,0,255);">false</span><span style="line-height:1.8;">
};</span></pre>
                </div> 
                <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">新的 isLoading 属性将会记录是否有请求正在处理的状态。</span></p> 
                <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">在 render 开始的添加如下逻辑：</span></p> 
                <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
                 <pre><span style="line-height:1.8;">var spinner = this.state.isLoading ?
  ( </span><span style="line-height:1.8;color:rgb(0,0,255);">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);">ActivityIndicatorIOS
      </span><span style="line-height:1.8;color:rgb(255,0,0);">hidden</span><span style="line-height:1.8;color:rgb(0,0,255);">='true'
      </span><span style="line-height:1.8;color:rgb(255,0,0);">size</span><span style="line-height:1.8;color:rgb(0,0,255);">='large'</span><span style="line-height:1.8;color:rgb(0,0,255);">/&gt;</span><span style="line-height:1.8;"> ) :
  ( </span><span style="line-height:1.8;color:rgb(0,0,255);">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);">View</span><span style="line-height:1.8;color:rgb(0,0,255);">/&gt;</span>);</pre>
                </div> 
                <div> 
                 <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">这是一个三元操作符，与 if 语句类似，即根据组件 isLoading 的状态，要么添加一个 indicator，要么添加一个空的 view。因为整个组件会不停地更新，所以你自由地混合 JSX 和 JavaSript 代码。</span></p> 
                 <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">回到用 JSX 定义搜索界面的地方，在图片的下面添加：</span></p> 
                 <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
                  <pre>{spinner}</pre>
                 </div> 
                 <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">给渲染“Go”的 TouchableHighlight 标记添加如下的属性：</span></p> 
                 <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
                  <pre>onPress={<span style="line-height:1.8;color:rgb(0,0,255);">this</span>.onSearchPressed.bind(<span style="line-height:1.8;color:rgb(0,0,255);">this</span>)}</pre>
                 </div> 
                 <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">接下来，添加下面这两个方法到 SearchPage 类中：</span></p> 
                 <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;"> 
                  <div class="cnblogs_code_toolbar">
                   <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
                  </div> 
                  <pre><span style="line-height:1.8;">_executeQuery(query) {
  console.log(query);
  </span><span style="line-height:1.8;color:rgb(0,0,255);">this</span>.setState({ isLoading: <span style="line-height:1.8;color:rgb(0,0,255);">true</span><span style="line-height:1.8;"> });
}

onSearchPressed() {
  </span><span style="line-height:1.8;color:rgb(0,0,255);">var</span> query = urlForQueryAndPage('place_name', <span style="line-height:1.8;color:rgb(0,0,255);">this</span>.state.searchString, 1<span style="line-height:1.8;">);
  </span><span style="line-height:1.8;color:rgb(0,0,255);">this</span><span style="line-height:1.8;">._executeQuery(query);
}</span></pre> 
                  <div class="cnblogs_code_toolbar">
                   <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
                  </div> 
                 </div> 
                 <div> 
                  <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">_executeQuery() 之后会进行真实的查询，现在的话就是简单输出一条信息到控制台，并且把 isLoading 设置为对应的值，这样 UI 就可以显示新的状态了。</span></p> 
                  <blockquote style="border:2px solid rgb(239,239,239);background:none;"> 
                   <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">提示：JavaScript 的类并没有访问修饰符，因此没有 “私有” 的该奶奶。因此常常会发现开发者使用一个下划线作为方法的前缀，来说明这些方法是私有方法。</span></p> 
                  </blockquote> 
                  <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">当 “Go” 按钮被点击时，onSearchPressed() 将会被调用，开始查询。</span></p> 
                  <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">最后，添加下面这个工具函数在定义 SearchPage 类的上面：</span></p> 
                  <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;"> 
                   <div class="cnblogs_code_toolbar">
                    <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
                   </div> 
                   <pre><span style="line-height:1.8;color:rgb(0,0,255);">function</span><span style="line-height:1.8;"> urlForQueryAndPage(key, value, pageNumber) {
  </span><span style="line-height:1.8;color:rgb(0,0,255);">var</span> data =<span style="line-height:1.8;"> {
      country: </span>'uk'<span style="line-height:1.8;">,
      pretty: </span>'1'<span style="line-height:1.8;">,
      encoding: </span>'json'<span style="line-height:1.8;">,
      listing_type: </span>'buy'<span style="line-height:1.8;">,
      action: </span>'search_listings'<span style="line-height:1.8;">,
      page: pageNumber
  };
  data[key] </span>=<span style="line-height:1.8;"> value;

  </span><span style="line-height:1.8;color:rgb(0,0,255);">var</span> querystring =<span style="line-height:1.8;"> Object.keys(data)
    .map(key </span>=&gt; key + '=' +<span style="line-height:1.8;"> encodeURIComponent(data[key]))
    .join(</span>'&amp;'<span style="line-height:1.8;">);

  </span><span style="line-height:1.8;color:rgb(0,0,255);">return</span> 'http://api.nestoria.co.uk/api?' +<span style="line-height:1.8;"> querystring;
};</span></pre> 
                   <div class="cnblogs_code_toolbar">
                    <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
                   </div> 
                  </div> 
                  <div> 
                   <ul>
                    <li style="list-style:disc;"><span style="line-height:1.8;font-family:'楷体';font-size:18px;">这个函数并不依赖 SearchPage，因此被定义成了一个独立的函数，而不是类方法。他首先通过 data 来定义查询字符串所需要的参数，接着将 data 转换成需要的字符串格式，name=value 对，使用 &amp; 符号分割。语法 =&gt; 是一个箭头函数，又一个<a class="wrap external" href="https://link.zhihu.com/?target=https%3A//developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);">对 JavaScript 语言的扩展</a>，提供了这个便捷的语法来创建一个匿名函数。</span></li>
                   </ul>
                   <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">回到模拟器，Cmd+R，重新加载应用，点击 “Go” 按钮。你可以看到 activity indicator 显示出来，再看看 Xcode 的控制台：</span></p> 
                   <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;"><img src="https://images2015.cnblogs.com/blog/791499/201609/791499-20160926194812610-712064744.png" alt="" style="border:0px;"></span></p> 
                   <div> 
                    <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">activity indicator 渲染了，并且作为请求的 URL 出现在输出中。把 URL 拷贝到浏览器中访问看看得到的结果。你会看到大量的 JSON 对象。别担心——你不需要理解它们，之后会使用代码来解析之。</span></p> 
                    <blockquote style="border:2px solid rgb(239,239,239);background:none;"> 
                     <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">提示：应用使用了&nbsp;<a class="wrap external" href="https://link.zhihu.com/?target=http%3A//www.nestoria.co.uk/help/api" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);">Nestoria 的 API 来做房产的搜索</a>。API 返回的 JSON 数据非常的直白。但是你也可以看看文档了解更多细节，请求什么 URL 地址，以及返回数据的格式。</span></p> 
                    </blockquote> 
                    <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">下一步就是从应用中发出请求。</span></p> 
                    <p>&nbsp;</p> 
                    <h2 style="color:rgb(0,0,0);line-height:1.5;font-size:21px;"><span style="line-height:1.8;font-family:'楷体';">执行 API 请求</span></h2> 
                    <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">还是 SearchPage.js 文件中，更新构造器中的初始 state 添加一个message 变量：</span></p> 
                    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
                     <pre><span style="line-height:1.8;color:rgb(0,0,255);">this</span>.state =<span style="line-height:1.8;"> {
  searchString: </span>'london'<span style="line-height:1.8;">,
  isLoading: </span><span style="line-height:1.8;color:rgb(0,0,255);">false</span><span style="line-height:1.8;">,
  message: </span>''<span style="line-height:1.8;">
};</span></pre>
                    </div> 
                    <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">在 render 内部，将下面的代码添加到 UI 的底部：</span></p> 
                    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
                     <pre><span style="line-height:1.8;color:rgb(0,0,255);">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);">Text </span><span style="line-height:1.8;color:rgb(255,0,0);">style</span><span style="line-height:1.8;color:rgb(0,0,255);">={styles.description}</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span>{this.state.message}<span style="line-height:1.8;color:rgb(0,0,255);">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);">Text</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span></pre>
                    </div> 
                    <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">你需要使用这个为用户展示多种信息。</span></p> 
                    <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">在 SearchPage 类内部，将以下代码添加到 _executeQuery() 底部：</span></p> 
                    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;"> 
                     <div class="cnblogs_code_toolbar">
                      <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
                     </div> 
                     <pre><span style="line-height:1.8;">fetch(query)
  .then(response </span>=&gt;<span style="line-height:1.8;"> response.json())
  .then(json </span>=&gt; <span style="line-height:1.8;color:rgb(0,0,255);">this</span><span style="line-height:1.8;">._handleResponse(json.response))
  .</span><span style="line-height:1.8;color:rgb(0,0,255);">catch</span>(error =&gt; 
     <span style="line-height:1.8;color:rgb(0,0,255);">this</span><span style="line-height:1.8;">.setState({
      isLoading: </span><span style="line-height:1.8;color:rgb(0,0,255);">false</span><span style="line-height:1.8;">,
      message: </span>'Something bad happened ' +<span style="line-height:1.8;"> error
   }));</span></pre> 
                     <div class="cnblogs_code_toolbar">
                      <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
                     </div> 
                    </div> 
                    <div> 
                     <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">这里使用了 fetch 函数，它是&nbsp;<a class="wrap external" href="https://link.zhihu.com/?target=https%3A//fetch.spec.whatwg.org/" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);">Web API 的一部分</a>。和 XMLHttpRequest 相比，它提供了更加先进的 API。异步响应会返回<a class="wrap external" href="https://link.zhihu.com/?target=http%3A//www.html5rocks.com/en/tutorials/es6/promises/" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);">一个 promise</a>，成功的话会转化 JSON 并且为它提供了一个你将要添加的方法。</span></p> 
                     <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">最后一步是将下面的函数添加到 SearchPage：</span></p> 
                     <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;"> 
                      <div class="cnblogs_code_toolbar">
                       <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
                      </div> 
                      <pre><span style="line-height:1.8;">_handleResponse(response) {
  </span><span style="line-height:1.8;color:rgb(0,0,255);">this</span>.setState({ isLoading: <span style="line-height:1.8;color:rgb(0,0,255);">false</span> , message: ''<span style="line-height:1.8;"> });
  </span><span style="line-height:1.8;color:rgb(0,0,255);">if</span> (response.application_response_code.substr(0, 1) === '1'<span style="line-height:1.8;">) {
    console.log(</span>'Properties found: ' +<span style="line-height:1.8;"> response.listings.length);
  } </span><span style="line-height:1.8;color:rgb(0,0,255);">else</span><span style="line-height:1.8;"> {
    </span><span style="line-height:1.8;color:rgb(0,0,255);">this</span>.setState({ message: 'Location not recognized; please try again.'<span style="line-height:1.8;">});
  }
}</span></pre> 
                      <div class="cnblogs_code_toolbar">
                       <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
                      </div> 
                     </div> 
                     <div> 
                      <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">如果查询成功，这个方法会清除掉正在加载标识并且记录下查询到属性的个数。</span></p> 
                      <blockquote style="border:2px solid rgb(239,239,239);background:none;"> 
                       <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">注意：Nestoria 有<a class="wrap external" href="https://link.zhihu.com/?target=http%3A//www.nestoria.co.uk/help/api-return-codes" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);">很多种返回码</a>具备潜在的用途。比如，202 和 200 会返回最佳位置列表。当你创建完一个应用，为什么不处理一下这些，可以为用户呈现一个可选列表。</span></p> 
                      </blockquote> 
                      <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">保存项目，然后在模拟器中按下 Cmd+R，尝试搜索 ‘london’；你会在日志信息中看到 20 properties were found。然后随便尝试搜索一个不存在的位置，比如 ‘narnia’，你会得到下面的问候语。</span></p> 
                      <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;"><img src="https://images2015.cnblogs.com/blog/791499/201609/791499-20160926195127594-1419461436.png" alt="" style="border:0px;"></span></p> 
                      <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">是时候看一下这20个房屋所对应的真实的地方，比如伦敦！</span></p> 
                      <h2 style="color:rgb(0,0,0);line-height:1.5;font-size:21px;"><span style="line-height:1.8;font-family:'楷体';">结果显示</span></h2> 
                      <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">创建一个新的文件，命名为&nbsp;SearchResults.js，然后加上下面这段代码：</span></p> 
                      <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;"> 
                       <div class="cnblogs_code_toolbar">
                        <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
                       </div> 
                       <pre>'use strict'<span style="line-height:1.8;">;

</span><span style="line-height:1.8;color:rgb(0,0,255);">var</span> React = require('react-native'<span style="line-height:1.8;">);
</span><span style="line-height:1.8;color:rgb(0,0,255);">var</span><span style="line-height:1.8;"> {
  StyleSheet,
  Image, 
  View,
  TouchableHighlight,
  ListView,
  Text,
  Component
} </span>= React;</pre> 
                       <div class="cnblogs_code_toolbar">
                        <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
                       </div> 
                      </div> 
                      <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">你肯定注意到啦，这里用到了 require 语句将 react-native 模块引入其中，还有一个重构赋值语句。</span></p> 
                      <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">接着就是加入搜索结果的组件：</span></p> 
                      <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;"> 
                       <div class="cnblogs_code_toolbar">
                        <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
                       </div> 
                       <pre><span style="line-height:1.8;">作者：kmokidd
链接：https:</span><span style="line-height:1.8;color:rgb(0,128,0);">//</span><span style="line-height:1.8;color:rgb(0,128,0);">zhuanlan.zhihu.com/p/19996445</span>
<span style="line-height:1.8;">来源：知乎
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。

class SearchResults extends Component {

  constructor(props) {
    super(props);
    </span><span style="line-height:1.8;color:rgb(0,0,255);">var</span> dataSource = <span style="line-height:1.8;color:rgb(0,0,255);">new</span><span style="line-height:1.8;"> ListView.DataSource(
      {rowHasChanged: (r1, r2) </span>=&gt; r1.guid !==<span style="line-height:1.8;"> r2.guid});
    </span><span style="line-height:1.8;color:rgb(0,0,255);">this</span>.state =<span style="line-height:1.8;"> {
      dataSource: dataSource.cloneWithRows(</span><span style="line-height:1.8;color:rgb(0,0,255);">this</span><span style="line-height:1.8;">.props.listings)
    };
  }

  renderRow(rowData, sectionID, rowID) {
    </span><span style="line-height:1.8;color:rgb(0,0,255);">return</span><span style="line-height:1.8;"> (
      </span>&lt;<span style="line-height:1.8;">TouchableHighlight
          underlayColor</span>='#dddddd'&gt;
        &lt;View&gt;
          &lt;Text&gt;{rowData.title}&lt;/Text&gt;
        &lt;/View&gt;
      &lt;/TouchableHighlight&gt;
<span style="line-height:1.8;">    );
  }

  render() {
    </span><span style="line-height:1.8;color:rgb(0,0,255);">return</span><span style="line-height:1.8;"> (
      </span>&lt;<span style="line-height:1.8;">ListView
        dataSource</span>={<span style="line-height:1.8;color:rgb(0,0,255);">this</span><span style="line-height:1.8;">.state.dataSource}
        renderRow</span>={<span style="line-height:1.8;color:rgb(0,0,255);">this</span>.renderRow.bind(<span style="line-height:1.8;color:rgb(0,0,255);">this</span>)}/&gt;
<span style="line-height:1.8;">    );
  }
}</span></pre> 
                       <div class="cnblogs_code_toolbar">
                        <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
                       </div> 
                      </div> 
                      <div> 
                       <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">上述的代码里用到了一个特定的组件 – ListView – 它能将数据一行行地呈现出来，并放置在一个可滚动的容器内，和 UITableView 很相似。通过 ListView.DataSource 将 ListView 的数据引入，还有一个函数来显示每一行UI。</span></p> 
                       <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">在构建数据源的同时，你还需要一个函数用来比较每两行之间是否重复。 为了确认列表数据的变化，在 reconciliation 过程中ListView 就会使用到这个函数。在这个实例中，由 Nestoria API 返回的房屋数据都有一个guid 属性，它就是用来测试数据变化的。</span></p> 
                       <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">现在将模块导出的代码添加至文件末尾：</span></p> 
                       <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
                        <pre>module.exports = SearchResults;</pre>
                       </div> 
                       <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">将下面这段代码加到&nbsp;SearchPage.js&nbsp;较前的位置，不过要在 require 语句的后面哦：</span></p> 
                       <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
                        <pre><span style="line-height:1.8;color:rgb(0,0,255);">var</span> SearchResults = require('./SearchResults');</pre>
                       </div> 
                       <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">这样我们就能在 SearchPage 类中使用刚刚加上的 SearchResults 类。</span></p> 
                       <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">还要把 _handleResponse 方法中的 console.log 语句改成下面这样：</span></p> 
                       <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
                        <pre><span style="line-height:1.8;color:rgb(0,0,255);">this</span><span style="line-height:1.8;">.props.navigator.push({
  title: </span>'Results'<span style="line-height:1.8;">,
  component: SearchResults,
  passProps: {listings: response.listings}
});</span></pre>
                       </div> 
                       <div> 
                        <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">SearchResults 组件通过上面的代码传入列表里。在这里用的是 push方法确保搜索结果全部推进导航栈中，这样你就可以通过 ‘Back’ 按钮返回到根页面。</span></p> 
                        <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">回到模拟器，按下 Cmd+R 刷新页面，然后试试看我们的搜索。估计你会得到类似下面这样的结果：</span></p> 
                        <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;"><img src="https://images2015.cnblogs.com/blog/791499/201609/791499-20160926195456375-645411801.png" alt="" style="border:0px;"></span></p> 
                        <div> 
                         <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">耶！你的搜索实现了呢，不过这搜索结果页面的颜值也太低了，不要担心，接下来给它化化妆。</span></p> 
                         <br>
                         <h2 style="color:rgb(0,0,0);line-height:1.5;font-size:21px;"><span style="line-height:1.8;font-family:'楷体';">可点击样式</span></h2> 
                         <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">这些 React Native 的原生代码现在应该理解起来轻车熟路了,所以本教程将会加快速度。</span></p> 
                         <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">在 SearchResults.js 中，destructuring 声明后面添加以下语句来定义样式：</span></p> 
                         <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;"> 
                          <div class="cnblogs_code_toolbar">
                           <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
                          </div> 
                          <pre><span style="line-height:1.8;color:rgb(128,0,0);">var styles = StyleSheet.create(</span>{<span style="line-height:1.8;color:rgb(255,0,0);">
  thumb</span>:<span style="line-height:1.8;color:rgb(0,0,255);"> {
    width: 80,
    height: 80,
    marginRight: 10
  </span>}<span style="line-height:1.8;color:rgb(128,0,0);">,
  textContainer: </span>{<span style="line-height:1.8;color:rgb(255,0,0);">
    flex</span>:<span style="line-height:1.8;color:rgb(0,0,255);"> 1
  </span>}<span style="line-height:1.8;color:rgb(128,0,0);">,
  separator: </span>{<span style="line-height:1.8;color:rgb(255,0,0);">
    height</span>:<span style="line-height:1.8;color:rgb(0,0,255);"> 1,
    backgroundColor: '#dddddd'
  </span>}<span style="line-height:1.8;color:rgb(128,0,0);">,
  price: </span>{<span style="line-height:1.8;color:rgb(255,0,0);">
    fontSize</span>:<span style="line-height:1.8;color:rgb(0,0,255);"> 25,
    fontWeight: 'bold',
    color: '#48BBEC'
  </span>}<span style="line-height:1.8;color:rgb(128,0,0);">,
  title: </span>{<span style="line-height:1.8;color:rgb(255,0,0);">
    fontSize</span>:<span style="line-height:1.8;color:rgb(0,0,255);"> 20,
    color: '#656565'
  </span>}<span style="line-height:1.8;color:rgb(128,0,0);">,
  rowContainer: </span>{<span style="line-height:1.8;color:rgb(255,0,0);">
    flexDirection</span>:<span style="line-height:1.8;color:rgb(0,0,255);"> 'row',
    padding: 10
  </span>}<span style="line-height:1.8;color:rgb(128,0,0);">
});</span></pre> 
                          <div class="cnblogs_code_toolbar">
                           <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
                          </div> 
                         </div> 
                         <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">这些定义了每一行的样式。</span></p> 
                         <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">接下来修改 renderRow() 如下:</span></p> 
                         <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;"> 
                          <div class="cnblogs_code_toolbar">
                           <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
                          </div> 
                          <pre><span style="line-height:1.8;">作者：kmokidd
链接：https://zhuanlan.zhihu.com/p/19996445
来源：知乎
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。

renderRow(rowData, sectionID, rowID) {
  var price = rowData.price_formatted.split(' ')[0];

  return (
    </span><span style="line-height:1.8;color:rgb(0,0,255);">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);">TouchableHighlight </span><span style="line-height:1.8;color:rgb(255,0,0);">onPress</span><span style="line-height:1.8;color:rgb(0,0,255);">={() =</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span><span style="line-height:1.8;"> this.rowPressed(rowData.guid)}
        underlayColor='#dddddd'&gt;
      </span><span style="line-height:1.8;color:rgb(0,0,255);">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);">View</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span>
        <span style="line-height:1.8;color:rgb(0,0,255);">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);">View </span><span style="line-height:1.8;color:rgb(255,0,0);">style</span><span style="line-height:1.8;color:rgb(0,0,255);">={styles.rowContainer}</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span>
          <span style="line-height:1.8;color:rgb(0,0,255);">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);">Image </span><span style="line-height:1.8;color:rgb(255,0,0);">style</span><span style="line-height:1.8;color:rgb(0,0,255);">={styles.thumb} </span><span style="line-height:1.8;color:rgb(255,0,0);">source</span><span style="line-height:1.8;color:rgb(0,0,255);">={{ </span><span style="line-height:1.8;color:rgb(255,0,0);">uri: rowData.img_url }} </span><span style="line-height:1.8;color:rgb(0,0,255);">/&gt;</span>
          <span style="line-height:1.8;color:rgb(0,0,255);">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);">View  </span><span style="line-height:1.8;color:rgb(255,0,0);">style</span><span style="line-height:1.8;color:rgb(0,0,255);">={styles.textContainer}</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span>
            <span style="line-height:1.8;color:rgb(0,0,255);">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);">Text </span><span style="line-height:1.8;color:rgb(255,0,0);">style</span><span style="line-height:1.8;color:rgb(0,0,255);">={styles.price}</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span>£{price}<span style="line-height:1.8;color:rgb(0,0,255);">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);">Text</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span>
            <span style="line-height:1.8;color:rgb(0,0,255);">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);">Text </span><span style="line-height:1.8;color:rgb(255,0,0);">style</span><span style="line-height:1.8;color:rgb(0,0,255);">={styles.title} 
                  </span><span style="line-height:1.8;color:rgb(255,0,0);">numberOfLines</span><span style="line-height:1.8;color:rgb(0,0,255);">={1}</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span>{rowData.title}<span style="line-height:1.8;color:rgb(0,0,255);">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);">Text</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span>
          <span style="line-height:1.8;color:rgb(0,0,255);">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);">View</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span>
        <span style="line-height:1.8;color:rgb(0,0,255);">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);">View</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span>
        <span style="line-height:1.8;color:rgb(0,0,255);">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);">View </span><span style="line-height:1.8;color:rgb(255,0,0);">style</span><span style="line-height:1.8;color:rgb(0,0,255);">={styles.separator}</span><span style="line-height:1.8;color:rgb(0,0,255);">/&gt;</span>
      <span style="line-height:1.8;color:rgb(0,0,255);">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);">View</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span>
    <span style="line-height:1.8;color:rgb(0,0,255);">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);">TouchableHighlight</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span><span style="line-height:1.8;">
  );
}</span></pre> 
                          <div class="cnblogs_code_toolbar">
                           <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
                          </div> 
                         </div> 
                         <div> 
                          <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">这个操作修改了返回的价格,将已经格式了化的”300000 GBP”中的GBP后缀删除。然后它通过你已经很熟悉的技术来渲染每一行的 UI 。这一次,通过一个 URL 来提供缩略图的数据, React Native 负责在主线程之外解码这些数据。</span></p> 
                          <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">同时要注意 TouchableHighlight 组件中 onPress属性后使用的箭头函数；它用于捕获每一行的 guid。</span></p> 
                          <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">最后一步，给类添加一个方法来处理按下操作:</span></p> 
                          <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
                           <pre><span style="line-height:1.8;">rowPressed(propertyGuid) {
  </span><span style="line-height:1.8;color:rgb(0,0,255);">var</span> property = <span style="line-height:1.8;color:rgb(0,0,255);">this</span>.props.listings.filter(prop =&gt; prop.guid === propertyGuid)[0<span style="line-height:1.8;">];
}</span></pre>
                          </div> 
                          <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">该方法通过用户触发的属性来定位。目前该方法没有做任何事，你可以稍后处理。现在，是时候欣赏你的大作了。</span></p> 
                          <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">回到模拟器,按下 Cmd + R 查看结果:</span></p> 
                          <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;"><img src="https://images2015.cnblogs.com/blog/791499/201609/791499-20160926195736141-1599617683.png" alt="" style="border:0px;"></span></p> 
                          <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">看起来好多了——尽管你会怀疑是否任何人都能承受住在伦敦的代价!</span></p> 
                          <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">是时候向应用程序添加最后一个视图了。</span></p> 
                          <p>&nbsp;</p> 
                          <h2 style="color:rgb(0,0,0);line-height:1.5;font-size:21px;"><span style="line-height:1.8;font-family:'楷体';">房产详情视图</span></h2> 
                          <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">添加一个新的文件 PropertyView.js 到项目中，在文件的顶部添加如下代码：</span></p> 
                          <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;"> 
                           <div class="cnblogs_code_toolbar">
                            <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
                           </div> 
                           <pre>'use strict'<span style="line-height:1.8;">;

</span><span style="line-height:1.8;color:rgb(0,0,255);">var</span> React = require('react-native'<span style="line-height:1.8;">);
</span><span style="line-height:1.8;color:rgb(0,0,255);">var</span><span style="line-height:1.8;"> {
  StyleSheet,
  Image, 
  View,
  Text,
  Component
} </span>= React;</pre> 
                           <div class="cnblogs_code_toolbar">
                            <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
                           </div> 
                          </div> 
                          <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">信手拈来了吧！</span></p> 
                          <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">接着添加如下样式：</span></p> 
                          <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;"> 
                           <div class="cnblogs_code_toolbar">
                            <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
                           </div> 
                           <pre><span style="line-height:1.8;color:rgb(128,0,0);">var styles = StyleSheet.create(</span>{<span style="line-height:1.8;color:rgb(255,0,0);">
  container</span>:<span style="line-height:1.8;color:rgb(0,0,255);"> {
    marginTop: 65
  </span>}<span style="line-height:1.8;color:rgb(128,0,0);">,
  heading: </span>{<span style="line-height:1.8;color:rgb(255,0,0);">
    backgroundColor</span>:<span style="line-height:1.8;color:rgb(0,0,255);"> '#F8F8F8',
  </span>}<span style="line-height:1.8;color:rgb(128,0,0);">,
  separator: </span>{<span style="line-height:1.8;color:rgb(255,0,0);">
    height</span>:<span style="line-height:1.8;color:rgb(0,0,255);"> 1,
    backgroundColor: '#DDDDDD'
  </span>}<span style="line-height:1.8;color:rgb(128,0,0);">,
  image: </span>{<span style="line-height:1.8;color:rgb(255,0,0);">
    width</span>:<span style="line-height:1.8;color:rgb(0,0,255);"> 400,
    height: 300
  </span>}<span style="line-height:1.8;color:rgb(128,0,0);">,
  price: </span>{<span style="line-height:1.8;color:rgb(255,0,0);">
    fontSize</span>:<span style="line-height:1.8;color:rgb(0,0,255);"> 25,
    fontWeight: 'bold',
    margin: 5,
    color: '#48BBEC'
  </span>}<span style="line-height:1.8;color:rgb(128,0,0);">,
  title: </span>{<span style="line-height:1.8;color:rgb(255,0,0);">
    fontSize</span>:<span style="line-height:1.8;color:rgb(0,0,255);"> 20,
    margin: 5,
    color: '#656565'
  </span>}<span style="line-height:1.8;color:rgb(128,0,0);">,
  description: </span>{<span style="line-height:1.8;color:rgb(255,0,0);">
    fontSize</span>:<span style="line-height:1.8;color:rgb(0,0,255);"> 18,
    margin: 5,
    color: '#656565'
  </span>}<span style="line-height:1.8;color:rgb(128,0,0);">
});</span></pre> 
                           <div class="cnblogs_code_toolbar">
                            <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
                           </div> 
                          </div> 
                          <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">然后加上组件本身：</span></p> 
                          <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;"> 
                           <div class="cnblogs_code_toolbar">
                            <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
                           </div> 
                           <pre><span style="line-height:1.8;">class PropertyView extends Component {

  render() {
    var property = this.props.property;
    var stats = property.bedroom_number + ' bed ' + property.property_type;
    if (property.bathroom_number) {
      stats += ', ' + property.bathroom_number + ' ' + (property.bathroom_number &gt; 1
        ? 'bathrooms' : 'bathroom');
    }

    var price = property.price_formatted.split(' ')[0];

    return (
      </span><span style="line-height:1.8;color:rgb(0,0,255);">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);">View </span><span style="line-height:1.8;color:rgb(255,0,0);">style</span><span style="line-height:1.8;color:rgb(0,0,255);">={styles.container}</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span>
        <span style="line-height:1.8;color:rgb(0,0,255);">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);">Image </span><span style="line-height:1.8;color:rgb(255,0,0);">style</span><span style="line-height:1.8;color:rgb(0,0,255);">={styles.image} 
            </span><span style="line-height:1.8;color:rgb(255,0,0);">source</span><span style="line-height:1.8;color:rgb(0,0,255);">={{uri: </span><span style="line-height:1.8;color:rgb(255,0,0);">property.img_url}} </span><span style="line-height:1.8;color:rgb(0,0,255);">/&gt;</span>
        <span style="line-height:1.8;color:rgb(0,0,255);">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);">View </span><span style="line-height:1.8;color:rgb(255,0,0);">style</span><span style="line-height:1.8;color:rgb(0,0,255);">={styles.heading}</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span>
          <span style="line-height:1.8;color:rgb(0,0,255);">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);">Text </span><span style="line-height:1.8;color:rgb(255,0,0);">style</span><span style="line-height:1.8;color:rgb(0,0,255);">={styles.price}</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span>£{price}<span style="line-height:1.8;color:rgb(0,0,255);">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);">Text</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span>
          <span style="line-height:1.8;color:rgb(0,0,255);">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);">Text </span><span style="line-height:1.8;color:rgb(255,0,0);">style</span><span style="line-height:1.8;color:rgb(0,0,255);">={styles.title}</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span>{property.title}<span style="line-height:1.8;color:rgb(0,0,255);">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);">Text</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span>
          <span style="line-height:1.8;color:rgb(0,0,255);">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);">View </span><span style="line-height:1.8;color:rgb(255,0,0);">style</span><span style="line-height:1.8;color:rgb(0,0,255);">={styles.separator}</span><span style="line-height:1.8;color:rgb(0,0,255);">/&gt;</span>
        <span style="line-height:1.8;color:rgb(0,0,255);">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);">View</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span>
        <span style="line-height:1.8;color:rgb(0,0,255);">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);">Text </span><span style="line-height:1.8;color:rgb(255,0,0);">style</span><span style="line-height:1.8;color:rgb(0,0,255);">={styles.description}</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span>{stats}<span style="line-height:1.8;color:rgb(0,0,255);">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);">Text</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span>
        <span style="line-height:1.8;color:rgb(0,0,255);">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);">Text </span><span style="line-height:1.8;color:rgb(255,0,0);">style</span><span style="line-height:1.8;color:rgb(0,0,255);">={styles.description}</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span>{property.summary}<span style="line-height:1.8;color:rgb(0,0,255);">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);">Text</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span>
      <span style="line-height:1.8;color:rgb(0,0,255);">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);">View</span><span style="line-height:1.8;color:rgb(0,0,255);">&gt;</span><span style="line-height:1.8;">
    );
  }
}</span></pre> 
                           <div class="cnblogs_code_toolbar">
                            <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
                           </div> 
                          </div> 
                          <div> 
                           <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">render() 前面部分对数据进行了处理，与通常的情况一样，API 返回的数据良莠不齐，往往有些字段是缺失的。这段代码通过一些简单的逻辑，让数据更加地规整一些。</span></p> 
                           <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">render 剩余的部分就非常直接了。它就是一个简单的这个状态不可变状态的函数。</span></p> 
                           <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">最后在文件的末尾加上如下的 export：</span></p> 
                           <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
                            <pre>module.exports = PropertyView;</pre>
                           </div> 
                           <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">返回到 SearchResults.js 文件，在顶部，require React 的下面，添加一个新的 require 语句。</span></p> 
                           <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
                            <pre><span style="line-height:1.8;color:rgb(0,0,255);">var</span> PropertyView = require('./PropertyView');</pre>
                           </div> 
                           <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">接下来更新 rowPassed()，添加跳转到新加入的 PropertyView：</span></p> 
                           <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;"> 
                            <div class="cnblogs_code_toolbar">
                             <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
                            </div> 
                            <pre><span style="line-height:1.8;">rowPressed(propertyGuid) {
  </span><span style="line-height:1.8;color:rgb(0,0,255);">var</span> property = <span style="line-height:1.8;color:rgb(0,0,255);">this</span>.props.listings.filter(prop =&gt; prop.guid === propertyGuid)[0<span style="line-height:1.8;">];

  </span><span style="line-height:1.8;color:rgb(0,0,255);">this</span><span style="line-height:1.8;">.props.navigator.push({
    title: </span>"Property"<span style="line-height:1.8;">,
    component: PropertyView,
    passProps: {property: property}
  });
}</span></pre> 
                            <div class="cnblogs_code_toolbar">
                             <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
                            </div> 
                           </div> 
                           <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">你知道的：回到模拟器，Cmd + R，一路通过搜索点击一行到房产详情界面：</span></p> 
                          </div> 
                         </div> 
                        </div> 
                       </div> 
                      </div> 
                     </div> 
                     <img src="https://images2015.cnblogs.com/blog/791499/201609/791499-20160926200149313-608370310.png" alt="" style="border:0px;">
                    </div> 
                    <div> 
                     <span style="line-height:1.8;font-family:'楷体';font-size:18px;">物廉价美——看上去很不错哦！</span> 
                     <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">应用即将完成，最后一步是允许用户搜索附近的房产。</span></p> 
                     <div> 
                      <br>
                      <h2 style="color:rgb(0,0,0);line-height:1.5;font-size:21px;"><span style="line-height:1.8;font-family:'楷体';">地理位置搜索</span></h2> 
                      <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">在 Xcode 中，打开 Info.plist 添加一个新的 key，在编辑器内部单击鼠标右键并且选择&nbsp;<strong>Add Row</strong>。使用NSLocationWhenInUseUsageDescription 作为 key 名并且使用下面的值：</span></p> 
                      <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
                       <pre>PropertyFinder would like to use your location to find nearby properties</pre>
                      </div> 
                      <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">下面是当你添加了新的 key 后，所得到的属性列表：</span></p> 
                      <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">你将把这个关键的细节提示呈现给用户，方便他们请求访问当前位置。</span></p> 
                      <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">打开 SearchPage.js，找到用于渲染 Location 按钮的TouchableHighlight，然后为其添加下面的属性值：</span></p> 
                      <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
                       <pre>onPress={<span style="line-height:1.8;color:rgb(0,0,255);">this</span>.onLocationPressed.bind(<span style="line-height:1.8;color:rgb(0,0,255);">this</span>)}</pre>
                      </div> 
                      <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">当你用手指轻点这个按钮，会调用 onLocationPressed —— 接下来会定义这个方法。</span></p> 
                      <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;"> 
                       <div class="cnblogs_code_toolbar">
                        <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
                       </div> 
                       <pre><span style="line-height:1.8;">onLocationPressed() {
  navigator.geolocation.getCurrentPosition(
    location </span>=&gt;<span style="line-height:1.8;"> {
      </span><span style="line-height:1.8;color:rgb(0,0,255);">var</span> search = location.coords.latitude + ',' +<span style="line-height:1.8;"> location.coords.longitude;
      </span><span style="line-height:1.8;color:rgb(0,0,255);">this</span><span style="line-height:1.8;">.setState({ searchString: search });
      </span><span style="line-height:1.8;color:rgb(0,0,255);">var</span> query = urlForQueryAndPage('centre_point', search, 1<span style="line-height:1.8;">);
      </span><span style="line-height:1.8;color:rgb(0,0,255);">this</span><span style="line-height:1.8;">._executeQuery(query);
    },
    error </span>=&gt;<span style="line-height:1.8;"> {
      </span><span style="line-height:1.8;color:rgb(0,0,255);">this</span><span style="line-height:1.8;">.setState({
        message: </span>'There was a problem with obtaining your location: ' +<span style="line-height:1.8;"> error
      });
    });
}</span></pre> 
                       <div class="cnblogs_code_toolbar">
                        <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
                       </div> 
                      </div> 
                      <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">将下面的代码添加到 SearchPage 类中：</span></p> 
                      <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">通过 navigator.geolocation 检索当前位置；这是一个&nbsp;<a class="wrap external" href="https://link.zhihu.com/?target=https%3A//developer.mozilla.org/en-US/docs/Web/API/Geolocation/Using_geolocation" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);">Web API 所定义的</a>接口，所以对于每个在浏览器中使用 location 服务的用户来说这个接口都应该是一致的。React Native 框架借助原生的 iOS location 服务提供了自身的 API 实现。</span></p> 
                      <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">如果当前位置很容易获取到，你将调用第一个箭头函数；这会向Nestoria 发送一个 query。如果出现错误则会得到一个基本的出错信息。</span></p> 
                      <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">因为你已经改变了属性列表，你需要重新启动这个应用以看到更改。抱歉，这次不可以 Cmd+R。请中断 Xcode 中的应用，然后创建和运行项目。</span></p> 
                      <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">在使用基于位置的搜索前，你需要指定一个被 Nestoria 数据库覆盖的位置。在模拟器菜单中，选择 Debug\Location\Custom Location … 然后输入 55.02 维度和 -1.42 经度，这个坐标是英格兰北部的一个景色优美的海边小镇，我经常在那给家里打电话。</span></p> 
                     </div> 
                    </div> 
                   </div> 
                   <img src="https://images2015.cnblogs.com/blog/791499/201609/791499-20160926200425078-249444673.png" alt="" style="border:0px;">
                  </div> 
                  <div> 
                   <div> 
                    <span style="line-height:1.8;font-family:'楷体';font-size:18px;">警示：我们可以正常地使用位置搜索功能，不过可能有部分同学不能使用（在访问时返回 access denied 错误）—— 我们尚不确定其原因，可能是 React Native 的问题？如果谁遇到了同样的问题并且已经结果，烦请告诉我们。这里没有伦敦那样值得炫耀 —— 不过更加经济！:]</span>
                    <br>
                    <br>
                   </div> 
                   <div> 
                    <h2 style="color:rgb(0,0,0);line-height:1.5;font-size:21px;"><span style="line-height:1.8;font-family:'楷体';">下一步行动？</span></h2> 
                    <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">完成了第一个 React Native 应用呢，恭喜你！你可以<a class="wrap external" href="https://link.zhihu.com/?target=https%3A//github.com/ColinEberhardt/ReactNative-PropertyFinder" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);">下载本教程的完整代码</a>，亲自来试试看。</span></p> 
                    <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">如果已经接触过 Web 开发了，你会发现使用 JavaScript 和 React 来定义与原生 UI 相连接的接口和导航是多么地容易。而如果你曾经开发过原生 App，我相信在使用 React Native 的过程里你会感受到它种种好处：快速的应用迭代，JavaScript 的引入以及清晰地使用 CSS 定义样式。</span></p> 
                    <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">也许下次做 App 的时候，你可以试试这个框架？或者说，你依然坚持使用 Swift 或者 Objective-C？无论之后你的选择是怎么样的，我都希望读完这篇文章的你有所收获，还能把这些收获融入到你的项目当中是最好的啦。</span></p> 
                    <p><span style="line-height:1.8;font-family:'楷体';font-size:18px;">如果你对这篇教程有任何疑问，请在<a class="wrap external" href="https://link.zhihu.com/?target=http%3A//www.raywenderlich.com/99473/introducing-react-native-building-apps-javascript" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);">这篇文章</a>的讨论区留言！</span></p> 
                    <p>&nbsp;</p> 
                   </div> 
                  </div> 
                 </div> 
                </div> 
               </div> 
              </div> 
             </div> 
            </div> 
           </div> 
          </div> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
     <p><br><br></p> 
    </div> 
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:25.2px;">
    程序猿神奇的手，每时每刻，这双手都在改变着世界的交互方式！
   </div> 
   <div class="clear" style="clear:both;color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:25.2px;"></div> 
   <div> 
    <div> 
     <font color="#333333"><span style="font-size:14px;line-height:25.2px;">本文转自当天真遇到现实博客园博客，原文链接：http://www.cnblogs.com/XYQ-208910/p/5910481.html</span></font>
     <span style="font-size:14px;line-height:25.2px;color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;">，如需转载请自行联系原作者</span> 
    </div> 
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
