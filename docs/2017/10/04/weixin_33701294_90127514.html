<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Docker容器学习梳理--基础知识（1） « NotBeCN</title>
  <meta name="description" content="                  &nbsp;     Docker是PaaS 提供商 dotCloud 开源的一个基于 LXC 的高级容器引擎，源代码托管在 Github 上, 基于go语言并遵从Apache2.0协议开源。 Docker是通过内核虚拟化技术（namespace以及cgroups等）来提供容器...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/10/04/weixin_33701294_90127514.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">Docker容器学习梳理--基础知识（1）</h1>
    <p class="post-meta">Oct 4, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <div class="blogpost-body" style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13px;line-height:19.5px;"> 
    <p style="line-height:1.5;">&nbsp;</p> 
    <p style="line-height:1.5;">Docker是PaaS 提供商 dotCloud 开源的一个基于 LXC 的高级容器引擎，源代码托管在 Github 上, 基于go语言并遵从Apache2.0协议开源。<br> Docker是通过内核虚拟化技术（namespace以及cgroups等）来提供容器的资源隔离与安全保障。由于Docker通过操作系统层的虚拟化实现隔离，所以Docker容器在运行时，不需要类似虚拟机（ VM）额外的操作系统开销，提高资源利用率。</p> 
    <p style="line-height:1.5;"><strong><span style="line-height:1.5;color:rgb(255,0,0);">原理</span></strong>：<span style="line-height:1.5;color:rgb(255,102,0);">建立--&gt;传送--&gt;运行</span></p> 
    <p style="line-height:1.5;"><a href="http://images2015.cnblogs.com/blog/827552/201601/827552-20160105112742168-1052662160.png" rel="nofollow" style="color:rgb(7,93,179);"><img title="image" src="https://images2015.cnblogs.com/blog/827552/201601/827552-20160105112742996-802610362.png" alt="image" width="786" height="502" style="border:0px;"></a></p> 
    <p style="line-height:1.5;"><strong><span style="line-height:1.5;color:rgb(255,0,0);">架构：</span></strong>C/S架构</p> 
    <p style="line-height:1.5;"><strong><span style="line-height:1.5;color:rgb(255,0,0);">组件：</span></strong><span style="line-height:1.5;color:rgb(0,0,255);">镜像（Image）、容器（Container）、仓库（Repository）</span></p> 
    <p style="line-height:1.5;"><strong><span style="line-height:1.5;color:rgb(255,0,0);">Docker与VM的区别：</span></strong></p> 
    <p style="line-height:1.5;"><a href="http://images2015.cnblogs.com/blog/827552/201601/827552-20160105112744293-747895798.png" rel="nofollow" style="color:rgb(7,93,179);"><img title="image" src="https://images2015.cnblogs.com/blog/827552/201601/827552-20160105112745528-2062874480.png" alt="image" width="782" height="435" style="border:0px;"></a></p> 
    <p style="line-height:1.5;"><strong>docker与Openstack的对比</strong></p> 
    <p style="line-height:1.5;"><a href="http://images2015.cnblogs.com/blog/827552/201601/827552-20160105112747278-1660278999.png" rel="nofollow" style="color:rgb(7,93,179);"><img title="image" src="https://images2015.cnblogs.com/blog/827552/201601/827552-20160105112748434-1882321365.png" alt="image" width="775" height="431" style="border:0px;"></a></p> 
    <p style="line-height:1.5;"><strong><span style="line-height:1.5;color:rgb(255,0,0);">Docker用途</span></strong>：<span style="line-height:1.5;color:rgb(0,0,255);">简单配置、代码流水线管理、开发效率、应用隔离、服务器整合、调试能力、多租户、快速部署</span></p> 
    <p style="line-height:1.5;"><a href="http://images2015.cnblogs.com/blog/827552/201601/827552-20160105112751403-578539280.png" rel="nofollow" style="color:rgb(7,93,179);"><img title="image" src="https://images2015.cnblogs.com/blog/827552/201601/827552-20160105112752293-1614477253.png" alt="image" width="788" height="429" style="border:0px;"></a></p> 
    <p style="line-height:1.5;"><strong><span style="line-height:1.5;color:rgb(255,0,0);">Docker改变了什么？</span></strong><br> 面向产品：产品交付<br> 面向开发：简化环境配置<br> 面向测试：多版本测试&nbsp;<br> 面向运维：环境一致性<br> 面向架构：自动化扩容</p> 
    <p style="line-height:1.5;"><strong><span style="line-height:1.5;color:rgb(255,0,255);">Docker环境的安装部署</span></strong><br><span style="line-height:1.5;color:rgb(0,128,0);">环境准备（centos7）</span></p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
     <pre>yum install -y docker
systemctl start docker
systemctl enable docker</pre>
    </div> 
    <p style="line-height:1.5;"><span style="line-height:1.5;color:rgb(0,128,0);">镜像的查看（docker images信息结果包括：镜像仓库、标签、镜像ID、创建时间、镜像大小 &nbsp;&nbsp;）</span></p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
     <pre>[root@linux-node2 ~]# docker images
REPOSITORY           TAG                 IMAGE ID            CREATED             VIRTUAL SIZE
docker.io/centos     latest              60e65a8e4030        36 hours ago        196.6 MB
docker.io/nginx      latest              813e3731b203        9 days ago          133.8 MB
docker.io/registry   latest              a8706c2bfd21        2 weeks ago         422.8 MB</pre>
    </div> 
    <p style="line-height:1.5;"><span style="line-height:1.5;color:rgb(0,128,0);">镜像的导出、导入和下载（可以将本机下载的镜像导出，然后将导出文件上传到别的机器上，在别的机器上进行镜像导入）</span></p> 
    <div class="cnblogs_Highlighter sh-gutter"> 
     <div> 
      <div class="syntaxhighlighter bash" style="font-size:1em;"> 
       <table border="0" style="border:1px solid #C0C0C0;border-collapse:collapse;line-height:1.1em;vertical-align:baseline;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;font-size:12px;background:none;">
        <tbody style="border:0px;line-height:1.1em;vertical-align:baseline;background:none;">
         <tr style="border:0px;line-height:1.1em;vertical-align:baseline;background:none;">
          <td class="gutter" style="border:1px solid #C0C0C0;border-collapse:collapse;line-height:1.1em;vertical-align:baseline;width:35px;color:rgb(175,175,175);background:none;"> 
           <div class="line number1 index0 alt2" style="border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);line-height:1.8em;text-align:right;vertical-align:baseline;background:rgb(244,244,244) none;">
            1
           </div> 
           <div class="line number2 index1 alt1" style="border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);line-height:1.8em;text-align:right;vertical-align:baseline;background-image:none;">
            2
           </div> 
           <div class="line number3 index2 alt2" style="border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);line-height:1.8em;text-align:right;vertical-align:baseline;background:rgb(244,244,244) none;">
            3
           </div> 
           <div class="line number4 index3 alt1" style="border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);line-height:1.8em;text-align:right;vertical-align:baseline;background-image:none;">
            4
           </div> 
           <div class="line number5 index4 alt2" style="border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);line-height:1.8em;text-align:right;vertical-align:baseline;background:rgb(244,244,244) none;">
            5
           </div> </td> 
          <td class="code" style="border:1px solid #C0C0C0;border-collapse:collapse;line-height:1.1em;vertical-align:baseline;background:none;"> 
           <div style="border:0px;line-height:1.1em;vertical-align:baseline;background:none;"> 
            <div class="line number1 index0 alt2" style="border:0px;line-height:1.8em;vertical-align:baseline;background:rgb(244,244,244) none;"> 
             <code class="bash plain" style="border:0px;line-height:1.8em;vertical-align:baseline;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;">[root@linux-node2 ~]</code>
             <code class="bash comments" style="border:0px;line-height:1.8em;vertical-align:baseline;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:rgb(0,130,0);background:none;"># docker pull centos</code> 
            </div> 
            <div class="line number2 index1 alt1" style="border:0px;line-height:1.8em;vertical-align:baseline;background-image:none;"> 
             <code class="bash plain" style="border:0px;line-height:1.8em;vertical-align:baseline;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;">[root@linux-node2 ~]</code>
             <code class="bash comments" style="border:0px;line-height:1.8em;vertical-align:baseline;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:rgb(0,130,0);background:none;"># docker save centos &gt; /opt/centos.tar.gz</code> 
            </div> 
            <div class="line number3 index2 alt2" style="border:0px;line-height:1.8em;vertical-align:baseline;background:rgb(244,244,244) none;">
             &nbsp;
            </div> 
            <div class="line number4 index3 alt1" style="border:0px;line-height:1.8em;vertical-align:baseline;background-image:none;">
             <code class="bash plain" style="border:0px;line-height:1.8em;vertical-align:baseline;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;">将linux-node2的镜像导出文件上传到linux-node1机器上，然后在linux-node1机器上导入</code>
            </div> 
            <div class="line number5 index4 alt2" style="border:0px;line-height:1.8em;vertical-align:baseline;background:rgb(244,244,244) none;"> 
             <code class="bash plain" style="border:0px;line-height:1.8em;vertical-align:baseline;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;">[root@linux-node1 ~]</code>
             <code class="bash comments" style="border:0px;line-height:1.8em;vertical-align:baseline;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:rgb(0,130,0);background:none;"># docker load &lt; /opt/centos.tar.gz</code> 
            </div> 
           </div> </td> 
         </tr>
        </tbody>
       </table>
      </div> 
     </div> 
    </div> 
    <p style="line-height:1.5;"><span style="line-height:1.5;color:rgb(0,128,0);">镜像的删除（rmi后面可以跟多个id，用空格隔开）</span><br> docker rmi container_id</p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
     <pre>[root@linux-node2 ~]# docker rmi 813e3731b203</pre>
    </div> 
    <p style="line-height:1.5;"><span style="line-height:1.5;color:rgb(0,128,0);">首次创建一个简单的容器</span></p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
     <pre>[root@linux-node2 ~]# docker run centos /bin/echo "hehe"
hehe</pre>
    </div> 
    <p style="line-height:1.5;">命令解读：使用centos镜像，run执行命令，使用echo命令输出hehe</p> 
    <p style="line-height:1.5;"><span style="line-height:1.5;color:rgb(0,128,0);">查看容器状态</span><br> 可以使用docker ps只能看见存活的容器，docker ps -a 查看全部的容器，结果信息表示：<br> 容器ID、使用的镜像、执行的命令、创建的时间、状态、端口、名称（如果不指定，自动生成）</p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
     <pre>[root@linux-node2 ~]# docker ps -a
CONTAINER ID        IMAGE               COMMAND             CREATED              STATUS                          PORTS               NAMES
daeb4d7f7aab        centos              "/bin/echo hehe"    About a minute ago   Exited (0) About a minute ago                       insane_einstein</pre>
    </div> 
    <p style="line-height:1.5;"><span style="line-height:1.5;color:rgb(0,128,0);">创建容器</span><br> --name：指定容器名称<br> -t ：分配一个tty终端<br> -i ：容器的标准输保持打开的状态</p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
     <pre>[root@linux-node2 ~]# docker run --name mydocker -t -i centos /bin/bash
[root@94ab7a046f7c /]# ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root          1  0.0  0.1  11772  1872 ?        Ss   03:42   0:00 /bin/bash
root         14  0.0  0.0  35888  1472 ?        R+   03:43   0:00 ps aux</pre>
    </div> 
    <p style="line-height:1.5;">这种方式创建自动进入容器，开启的容器只执行/bin/bash；</p> 
    <p style="line-height:1.5;"><span style="line-height:1.5;color:rgb(0,128,0);">在容器中查看主机名</span></p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
     <pre>[root@94ab7a046f7c /]# hostname
94ab7a046f7c
[root@94ab7a046f7c /]# exit</pre>
    </div> 
    <p style="line-height:1.5;"><span style="line-height:1.5;color:rgb(0,128,0);">启动、停止容器</span></p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
     <pre>[root@linux-node2 ~]# docker stop  ID</pre> 
     <pre>[root@linux-node2 ~]# docker start  ID</pre> 
    </div> 
    <p style="line-height:1.5;"><span style="line-height:1.5;color:rgb(0,128,0);">进入容器</span><span style="line-height:1.5;color:rgb(255,0,255);"><br></span></p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
     <pre>[root@linux-node2 ~]# docker attach 94ab7a046f7c</pre> 
     <pre>[root@94ab7a046f7c /]#</pre> 
    </div> 
    <p style="line-height:1.5;"><span style="line-height:1.5;color:rgb(0,128,0);">删除容器</span></p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
     <pre>[root@linux-node2 ~]# docker rm ID/名称
加-f 强制删除，包括正在运行中的容器</pre>
    </div> 
    <p style="line-height:1.5;"><span style="line-height:1.5;color:rgb(0,128,0);">映射</span></p> 
    <p style="line-height:1.5;"><a href="http://images2015.cnblogs.com/blog/827552/201601/827552-20160105112753137-455928911.png" rel="nofollow" style="color:rgb(7,93,179);"><img title="image" src="https://images2015.cnblogs.com/blog/827552/201601/827552-20160105112753637-1177530129.png" alt="image" width="521" height="347" style="border:0px;"></a></p> 
    <p style="line-height:1.5;"><span style="line-height:1.5;color:rgb(0,128,0);">随机映射</span><br> 端口的映射是系统自动分配的？</p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(7,93,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
     <pre>[root@linux-node2 ~]# docker run -d -P nginx
90316d97ee975b4e62e1927a9fb31f20703556b1a3ea07880d0c68dcb5bbd3bb
[root@linux-node2 ~]# docker ps -l
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                                           NAMES
90316d97ee97        nginx               "nginx -g 'daemon off"   25 seconds ago      Up 23 seconds       0.0.0.0:32769-&gt;80/tcp, 0.0.0.0:32768-&gt;443/tcp   ecstatic_almeida</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(7,93,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
    </div> 
    <p style="line-height:1.5;"><span style="line-height:1.5;color:rgb(0,128,0);">指定映射</span><br> 指定端口的映射</p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(7,93,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
     <pre>[root@linux-node2 ~]# docker run -d -p 81:80 nginx
0294a8f5b4fc81ba31383a8eb98ec62b136826eba92360c84afd87bf1bf819fc
[root@linux-node2 ~]# docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                                           NAMES
0294a8f5b4fc        nginx               "nginx -g 'daemon off"   11 seconds ago      Up 10 seconds       443/tcp, 0.0.0.0:81-&gt;80/tcp                     admiring_ramanujan</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(7,93,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
    </div> 
    <p style="line-height:1.5;"><span style="line-height:1.5;color:rgb(0,128,0);">查看日志</span></p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
     <pre>[root@linux-node2 ~]# docker log +ID</pre>
    </div> 
    <p style="line-height:1.5;"><span style="line-height:1.5;color:rgb(0,128,0);">数据管理</span></p> 
    <p style="line-height:1.5;"><a href="http://images2015.cnblogs.com/blog/827552/201601/827552-20160105112754606-100725538.png" rel="nofollow" style="color:rgb(7,93,179);"><img title="image" src="https://images2015.cnblogs.com/blog/827552/201601/827552-20160105112755231-1208787211.png" alt="image" width="554" height="208" style="border:0px;"></a></p> 
    <p style="line-height:1.5;"><span style="line-height:1.5;color:rgb(0,128,0);">数据卷</span><br><span style="line-height:1.5;color:rgb(255,102,0);">默认挂载目录</span><br> 创建一个数据卷，名称是volume-test1，挂载到data下默认挂载目录</p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
     <pre>[root@linux-node2 ~]# docker run -it --name volume-test1 -v /data centos 
[root@1768d6414cfc /]# ls -l /data/
total 0</pre>
    </div> 
    <p style="line-height:1.5;">打开一个新的窗口</p> 
    <p style="line-height:1.5;">列出容器的所有信息，查看mounts模块</p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(7,93,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
     <pre>[root@linux-node2 ~]# docker inspect 1768d6414cfc 
 "Mounts": [
        {
            "Name": "55c97df0276bb8879398b4e7286fc41f9872e9203267da7e23060e24ba06d167",
            "Source": "/var/lib/docker/volumes/55c97df0276bb8879398b4e7286fc41f9872e9203267da7e23060e24ba06d167/_data",
            "Destination": "/data",
            "Driver": "local",
            "Mode": "",
            "RW": true
        }
    ],</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(7,93,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
    </div> 
    <p style="line-height:1.5;">查找挂载点并进入</p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
     <pre>查看挂载的位置
[root@linux-node2 ~]# ll /var/lib/docker/volumes/55c97df0276bb8879398b4e7286fc41f9872e9203267da7e23060e24ba06d167/_data
总用量 0
进入到挂载点
[root@linux-node2 ~]# cd /var/lib/docker/volumes/55c97df0276bb8879398b4e7286fc41f9872e9203267da7e23060e24ba06d167/_data</pre>
    </div> 
    <p style="line-height:1.5;">创建一个cgt测试，并重新回到容器中查看</p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
     <pre>[root@linux-node2 _data]# mkdir cgt

去容器中查看
[root@1768d6414cfc /]# ls -l /data/
total 4
drwxr-xr-x 2 root root 4096 Jan  4 14:04 cgt</pre>
    </div> 
    <p style="line-height:1.5;"><span style="line-height:1.5;color:rgb(255,102,0);">指定挂载目录</span></p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
     <pre>将/opt挂载到/opt目录下
[root@linux-node2 ~]# docker run -it --name volume-test1 -v /opt:/opt centos</pre>
    </div> 
    <p style="line-height:1.5;"><span style="line-height:1.5;color:rgb(255,102,0);">指定权限</span></p> 
    <p style="line-height:1.5;">只需要在挂载后面加上权限即可。</p> 
    <p style="line-height:1.5;">加读写rw；只读ro</p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
     <pre>[root@linux-node2 ~]# docker run -it --name volume-test1 -v /opt:/opt:rw centos</pre>
    </div> 
    <p style="line-height:1.5;"><span style="line-height:1.5;color:rgb(255,102,0);">挂载单个文件</span></p> 
    <p style="line-height:1.5;">记录历史记录</p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
     <pre>[root@linux-node2 ~]# docker run -it -v ~/.bash_history:/.bash_history centos</pre>
    </div> 
    <p style="line-height:1.5;"><span style="line-height:1.5;color:rgb(255,102,0);">数据卷容器</span></p> 
    <p style="line-height:1.5;">让一个容器可以访问另一个容器的数据卷</p> 
    <p style="line-height:1.5;">启动两个容器</p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(7,93,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
     <pre>启动nfs容器，挂在一个卷，使用-d直接在后台执行
[root@linux-node2 ~]# docker run -d --name nfs -v /data centos 
209bc89b365ad6bc1eeae693ada01c04c2d08e9ee2b8816e624882944c116126

启动test1容器，挂载到nfs的数据卷容器上，
[root@linux-node2 ~]# docker run -it --name test1 --volumes-from nfs centos
[root@5e399198d6a8 /]# ls /data/
查看没内容</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(7,93,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
    </div> 
    <p style="line-height:1.5;">找到nfs容器的挂载点</p> 
    <p style="line-height:1.5;">（可以使用名称，不仅仅是ID）</p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(7,93,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
     <pre>找到nfs容器的ID
[root@linux-node2 opt]# docker ps -a
CONTAINER ID        IMAGE               COMMAND             CREATED              STATUS                     PORTS               NAMES
209bc89b365a        centos              "/bin/bash"         2 minutes ago        Exited (0) 2 minutes ago                       nfs
找到nfs容器的挂载点</pre> 
     <pre>[root@linux-node2 _data]# docker inspect nfs
[root@linux-node2 opt]# cd /var/lib/docker/volumes/3938c9b1143d41340e148a4c7bc12d13b53966b15380c5b958a9e035897450d5/_data
[root@linux-node2 _data]# touch cgt</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(7,93,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
    </div> 
    <p style="line-height:1.5;">在test1上查看</p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
     <pre>到test1上查看
[root@5e399198d6a8 /]# ls /data/
cgt</pre>
    </div> 
    <p style="line-height:1.5;"><span style="line-height:1.5;color:rgb(255,0,0);">注意：数据卷容器不论停止还是开启，不影响其他容器挂载使用</span><br><span style="line-height:1.5;color:rgb(255,0,255);">如何制作镜像</span><br><span style="line-height:1.5;color:rgb(0,0,255);">方式一：手动构建容器</span><br> 1）创建一个容器mynginx，使用centos镜像</p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
     <pre>[root@linux-node2 ~]# docker run --name mynginx -it centos
[root@f9c7dfb6f552 /]# rpm -ivh http://mirrors.aliyun.com/epel/epel-release-latest-7.noarch.rpm
[root@f9c7dfb6f552 /]# yum -y install nginx
[root@f9c7dfb6f552 /]# exit 
exit</pre>
    </div> 
    <p style="line-height:1.5;">2）基于mynginx容器做一个镜像mynginx:v1</p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(7,93,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
     <pre>[root@linux-node2 ~]# docker ps -a
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                      PORTS               NAMES
f9c7dfb6f552        centos              "/bin/bash"         3 minutes ago       Exited (0) 15 seconds ago                       mynginx
基于mynginx这个容器做一个镜像
[root@linux-node2 ~]# docker commit -m "my nginx" f9c7dfb6f552 cgt/mynginx:v1
3f3adc859b77b2b47c3631229761bee6c7066f1c708bc01c5173c2ef5c0adce8
提交镜像，同时打一个标签叫mynginx:v1，cgt相当于你向github上提交的用户名

查看镜像
[root@linux-node2 ~]# docker images
REPOSITORY                           TAG                 IMAGE ID            CREATED              VIRTUAL SIZE
<strong>cgt</strong><strong>/mynginx                          v1</strong>                  3f3adc859b77        About a minute ago   326.4 MB</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(7,93,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
    </div> 
    <p style="line-height:1.5;">3）基于mynginx:v1创建一个容器mynginxv1</p> 
    <p style="line-height:1.5;">目的是修改nginx不让其在后台运行</p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(7,93,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
     <pre>[root@linux-node2 ~]# docker run -it --name nginxv1 cgt/mynginx:v1
[root@ea64c5855006 /]# vi /etc/nginx/nginx.conf
daemon off;      # 不再后台运行
[root@ea64c5855006 /]# exit 
exit

[root@linux-node2 ~]# docker ps -a
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                      PORTS               NAMES
ea64c5855006        cgt/mynginx:v1      "/bin/bash"         2 minutes ago       Exited (0) 42 seconds ago                       nginxv1</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(7,93,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
    </div> 
    <p style="line-height:1.5;">4）基于mynginxv1提交mynginxv2版本</p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(7,93,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
     <pre>重新提交V2版本
[root@linux-node2 ~]# docker commit -m "my nginx" ea64c5855006  cgt/mynginx:v2
a480cdf9055ec4e640c65df6404c6ba42903ea77198a26cec75eef0e4965fe67
查看V2镜像
[root@linux-node2 ~]# docker images
REPOSITORY                           TAG                 IMAGE ID            CREATED             VIRTUAL SIZE
cgt/mynginx                          v2                  a480cdf9055e        25 seconds ago</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(7,93,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
    </div> 
    <p style="line-height:1.5;">5）基于mynginxv2镜像，创建mynginxv2容器</p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(7,93,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
     <pre>启动容器，-d后台运行，-p指定端口 在后面是镜像，最后是命令（因为是yum安装的，可以直接写nginx,如果不是yum，那要写绝对路径）
[root@linux-node2 ~]# docker run -d -p 82:80 cgt/mynginx:v2 nginx
4eaf8a19034a673100f9355504628fad45e6ecbab91615afd6cb4e7a18b82171

[root@linux-node2 ~]# docker ps
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS                NAMES
4eaf8a19034a        cgt/mynginx:v2      "nginx"             15 seconds ago      Up 14 seconds       0.0.0.0:82-&gt;80/tcp   elegant_leakey
可以在浏览器访问82端口</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(7,93,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
    </div> 
    <p style="line-height:1.5;"><span style="line-height:1.5;color:rgb(0,0,255);"><strong>方式二：Dockerfile</strong></span></p> 
    <p style="line-height:1.5;">1）Dockerfile包含的信息</p> 
    <p style="line-height:1.5;">&nbsp;&nbsp;&nbsp; 基础镜像信息&nbsp;<br> &nbsp;&nbsp;&nbsp; 维护者信息&nbsp;<br> &nbsp;&nbsp;&nbsp; 镜像操作指令&nbsp;<br> &nbsp;&nbsp;&nbsp; 容器启动时执行指令</p> 
    <p style="line-height:1.5;">2）文件的编写</p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(7,93,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
     <pre>[root@linux-node2 ~]# mkdir /opt/dockerfile/nginx/ -p
[root@linux-node2 ~]# cd /opt/dockerfile/nginx/
将index.html上传到此处
[root@linux-node2 nginx]# vim Dockerfile
# This is docker file
# version v1
# Author wangshibo
# Base image(基础镜像)
FROM centos

# Maintainer(维护者信息)
MAINTAINER wangshibo  2134728394@qq.com

# Commands(执行命令)
RUN rpm -ivh  http://mirrors.aliyun.com/epel/epel-release-latest-7.noarch.rpm
RUN yum -y install nginx
# Add(添加文件)
ADD index.html /usr/share/nginx/html/index.html    # index.html是自己编写的文件，放在后面的目录中，因为yum安装后Documentroot是在这里
RUN echo "daemon off;" &gt;&gt;/etc/nginx/nginx.conf
EXPOSE 80           # 对外的端口
CMD ['nginx']       # 执行的命令</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(7,93,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
    </div> 
    <p style="line-height:1.5;"><img src="https://images2015.cnblogs.com/blog/907596/201703/907596-20170314110639823-2116952917.png" alt="" style="border:0px;"></p> 
    <p style="line-height:1.5;">3）构建容器，并运行</p> 
    <div class="cnblogs_Highlighter sh-gutter"> 
     <div> 
      <div class="syntaxhighlighter bash" style="font-size:1em;"> 
       <table border="0" style="border:1px solid #C0C0C0;border-collapse:collapse;line-height:1.1em;vertical-align:baseline;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;font-size:12px;background:none;">
        <tbody style="border:0px;line-height:1.1em;vertical-align:baseline;background:none;">
         <tr style="border:0px;line-height:1.1em;vertical-align:baseline;background:none;">
          <td class="gutter" style="border:1px solid #C0C0C0;border-collapse:collapse;line-height:1.1em;vertical-align:baseline;width:35px;color:rgb(175,175,175);background:none;"> 
           <div class="line number1 index0 alt2" style="border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);line-height:1.8em;text-align:right;vertical-align:baseline;background:rgb(244,244,244) none;">
            1
           </div> 
           <div class="line number2 index1 alt1" style="border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);line-height:1.8em;text-align:right;vertical-align:baseline;background-image:none;">
            2
           </div> 
           <div class="line number3 index2 alt2" style="border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);line-height:1.8em;text-align:right;vertical-align:baseline;background:rgb(244,244,244) none;">
            3
           </div> 
           <div class="line number4 index3 alt1" style="border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);line-height:1.8em;text-align:right;vertical-align:baseline;background-image:none;">
            4
           </div> </td> 
          <td class="code" style="border:1px solid #C0C0C0;border-collapse:collapse;line-height:1.1em;vertical-align:baseline;background:none;"> 
           <div style="border:0px;line-height:1.1em;vertical-align:baseline;background:none;"> 
            <div class="line number1 index0 alt2" style="border:0px;line-height:1.8em;vertical-align:baseline;background:rgb(244,244,244) none;"> 
             <code class="bash plain" style="border:0px;line-height:1.8em;vertical-align:baseline;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;">建立newnginx容器，-t：标签，执行</code>
             <code class="bash plain" style="border:0px;line-height:1.8em;vertical-align:baseline;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;">/opt/dockerfile/nginx/</code>
             <code class="bash plain" style="border:0px;line-height:1.8em;vertical-align:baseline;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;">下面的默认的Dockerfile文件</code> 
            </div> 
            <div class="line number2 index1 alt1" style="border:0px;line-height:1.8em;vertical-align:baseline;background-image:none;"> 
             <code class="bash plain" style="border:0px;line-height:1.8em;vertical-align:baseline;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;">[root@linux-node2 nginx]</code>
             <code class="bash comments" style="border:0px;line-height:1.8em;vertical-align:baseline;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:rgb(0,130,0);background:none;"># docker build -t cgt/mynginx:v3 /opt/dockerfile/nginx/</code> 
            </div> 
            <div class="line number3 index2 alt2" style="border:0px;line-height:1.8em;vertical-align:baseline;background:rgb(244,244,244) none;">
             &nbsp;
            </div> 
            <div class="line number4 index3 alt1" style="border:0px;line-height:1.8em;vertical-align:baseline;background-image:none;"> 
             <code class="bash plain" style="border:0px;line-height:1.8em;vertical-align:baseline;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;">[root@linux-node2 nginx]</code>
             <code class="bash comments" style="border:0px;line-height:1.8em;vertical-align:baseline;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;color:rgb(0,130,0);background:none;"># docker run -d -p 83:80 cgt/mynginx:v3</code> 
            </div> 
           </div> </td> 
         </tr>
        </tbody>
       </table>
      </div> 
     </div> 
    </div> 
    <p style="line-height:1.5;"><span style="line-height:1.5;color:rgb(255,0,0);">-------------------------------------------------------------------------------------------------------------------------------</span></p> 
    <p style="line-height:1.5;"><span style="line-height:1.5;">Docker是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的容器中，然后发布到任何流行的Linux机器上，也可以实现虚拟化。<span style="line-height:1.5;color:rgb(0,128,0);">当你真正投入容器Docker的怀抱，不但可以发现它能解决很多问题，而且还具有众多的优点:</span></span></p> 
    <div class="cnblogs_Highlighter sh-gutter"> 
     <div> 
      <div class="syntaxhighlighter bash" style="font-size:1em;"> 
       <table border="0" style="border:1px solid #C0C0C0;border-collapse:collapse;line-height:1.1em;vertical-align:baseline;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;font-size:12px;background:none;">
        <tbody style="border:0px;line-height:1.1em;vertical-align:baseline;background:none;">
         <tr style="border:0px;line-height:1.1em;vertical-align:baseline;background:none;">
          <td class="gutter" style="border:1px solid #C0C0C0;border-collapse:collapse;line-height:1.1em;vertical-align:baseline;width:35px;color:rgb(175,175,175);background:none;"> 
           <div class="line number1 index0 alt2" style="border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);line-height:1.8em;text-align:right;vertical-align:baseline;background:rgb(244,244,244) none;">
            1
           </div> 
           <div class="line number2 index1 alt1" style="border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);line-height:1.8em;text-align:right;vertical-align:baseline;background-image:none;">
            2
           </div> 
           <div class="line number3 index2 alt2" style="border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);line-height:1.8em;text-align:right;vertical-align:baseline;background:rgb(244,244,244) none;">
            3
           </div> </td> 
          <td class="code" style="border:1px solid #C0C0C0;border-collapse:collapse;line-height:1.1em;vertical-align:baseline;background:none;"> 
           <div style="border:0px;line-height:1.1em;vertical-align:baseline;background:none;"> 
            <div class="line number1 index0 alt2" style="border:0px;line-height:1.8em;vertical-align:baseline;background:rgb(244,244,244) none;">
             <code class="bash plain" style="border:0px;line-height:1.8em;vertical-align:baseline;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;">1）它是不可变的－操作系统，库版本，配置，文件夹和应用都是一样的。您可以使用通过相同QA测试的镜像，使产品具有相同的表现。　　</code>
            </div> 
            <div class="line number2 index1 alt1" style="border:0px;line-height:1.8em;vertical-align:baseline;background-image:none;">
             <code class="bash plain" style="border:0px;line-height:1.8em;vertical-align:baseline;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;">2）它是轻量级的－容器的内存占用非常小。不需要几百几千MB，它只要对主进程分配内存再加上几十MB。　　</code>
            </div> 
            <div class="line number3 index2 alt2" style="border:0px;line-height:1.8em;vertical-align:baseline;background:rgb(244,244,244) none;">
             <code class="bash plain" style="border:0px;line-height:1.8em;vertical-align:baseline;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;">3）它很快速－启动一个容器与启动一个单进程一样快。不需要几分钟，您可以在几秒钟内启动一个全新的容器。　　</code>
            </div> 
           </div> </td> 
         </tr>
        </tbody>
       </table>
      </div> 
     </div> 
    </div> 
    <p style="line-height:1.5;">但是，许多用户依然像对待典型的虚拟机那样对待容器，似乎都忘记了除了与虚拟机相似的部分，容器还有一个很大的优点：它是一次性的。　　<br> 这个“特性”本身促使用户改变他们关于使用和管理容器的习惯；<span style="line-height:1.5;color:rgb(0,128,0);">下面将会说明下在容器中不应该做这些事，以确保最大地发挥容器的作用。</span></p> 
    <div class="cnblogs_Highlighter sh-gutter"> 
     <div> 
      <div class="syntaxhighlighter bash" style="font-size:1em;"> 
       <table border="0" style="border:1px solid #C0C0C0;border-collapse:collapse;line-height:1.1em;vertical-align:baseline;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;font-size:12px;background:none;">
        <tbody style="border:0px;line-height:1.1em;vertical-align:baseline;background:none;">
         <tr style="border:0px;line-height:1.1em;vertical-align:baseline;background:none;">
          <td class="gutter" style="border:1px solid #C0C0C0;border-collapse:collapse;line-height:1.1em;vertical-align:baseline;width:35px;color:rgb(175,175,175);background:none;"> 
           <div class="line number1 index0 alt2" style="border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);line-height:1.8em;text-align:right;vertical-align:baseline;background:rgb(244,244,244) none;">
            1
           </div> 
           <div class="line number2 index1 alt1" style="border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);line-height:1.8em;text-align:right;vertical-align:baseline;background-image:none;">
            2
           </div> 
           <div class="line number3 index2 alt2" style="border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);line-height:1.8em;text-align:right;vertical-align:baseline;background:rgb(244,244,244) none;">
            3
           </div> 
           <div class="line number4 index3 alt1" style="border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);line-height:1.8em;text-align:right;vertical-align:baseline;background-image:none;">
            4
           </div> 
           <div class="line number5 index4 alt2" style="border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);line-height:1.8em;text-align:right;vertical-align:baseline;background:rgb(244,244,244) none;">
            5
           </div> 
           <div class="line number6 index5 alt1" style="border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);line-height:1.8em;text-align:right;vertical-align:baseline;background-image:none;">
            6
           </div> 
           <div class="line number7 index6 alt2" style="border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);line-height:1.8em;text-align:right;vertical-align:baseline;background:rgb(244,244,244) none;">
            7
           </div> 
           <div class="line number8 index7 alt1" style="border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);line-height:1.8em;text-align:right;vertical-align:baseline;background-image:none;">
            8
           </div> 
           <div class="line number9 index8 alt2" style="border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);line-height:1.8em;text-align:right;vertical-align:baseline;background:rgb(244,244,244) none;">
            9
           </div> 
           <div class="line number10 index9 alt1" style="border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);line-height:1.8em;text-align:right;vertical-align:baseline;background-image:none;">
            10
           </div> 
           <div class="line number11 index10 alt2" style="border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);line-height:1.8em;text-align:right;vertical-align:baseline;background:rgb(244,244,244) none;">
            11
           </div> 
           <div class="line number12 index11 alt1" style="border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);line-height:1.8em;text-align:right;vertical-align:baseline;background-image:none;">
            12
           </div> 
           <div class="line number13 index12 alt2" style="border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);line-height:1.8em;text-align:right;vertical-align:baseline;background:rgb(244,244,244) none;">
            13
           </div> 
           <div class="line number14 index13 alt1" style="border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);line-height:1.8em;text-align:right;vertical-align:baseline;background-image:none;">
            14
           </div> 
           <div class="line number15 index14 alt2" style="border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);line-height:1.8em;text-align:right;vertical-align:baseline;background:rgb(244,244,244) none;">
            15
           </div> 
           <div class="line number16 index15 alt1" style="border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);line-height:1.8em;text-align:right;vertical-align:baseline;background-image:none;">
            16
           </div> 
           <div class="line number17 index16 alt2" style="border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);line-height:1.8em;text-align:right;vertical-align:baseline;background:rgb(244,244,244) none;">
            17
           </div> 
           <div class="line number18 index17 alt1" style="border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);line-height:1.8em;text-align:right;vertical-align:baseline;background-image:none;">
            18
           </div> 
           <div class="line number19 index18 alt2" style="border-width:0px 2px 0px 0px;border-right-style:solid;border-right-color:rgb(108,226,108);line-height:1.8em;text-align:right;vertical-align:baseline;background:rgb(244,244,244) none;">
            19
           </div> </td> 
          <td class="code" style="border:1px solid #C0C0C0;border-collapse:collapse;line-height:1.1em;vertical-align:baseline;background:none;"> 
           <div style="border:0px;line-height:1.1em;vertical-align:baseline;background:none;"> 
            <div class="line number1 index0 alt2" style="border:0px;line-height:1.8em;vertical-align:baseline;background:rgb(244,244,244) none;">
             <code class="bash plain" style="border:0px;line-height:1.8em;vertical-align:baseline;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;">1）不要在容器中存储数据 – 容器可能被停止，销毁，或替换。一个运行在容器中的程序版本1.0，应该很容易被1.1的版本替换且不影响或损失数据。有鉴于此，如果你需要存储数据，请存在卷中，并且注意如果两个容器在同一个卷上写数据会导致崩溃。确保你的应用被设计成在共享数据存储上写入。</code>
            </div> 
            <div class="line number2 index1 alt1" style="border:0px;line-height:1.8em;vertical-align:baseline;background-image:none;">
             &nbsp;
            </div> 
            <div class="line number3 index2 alt2" style="border:0px;line-height:1.8em;vertical-align:baseline;background:rgb(244,244,244) none;">
             <code class="bash plain" style="border:0px;line-height:1.8em;vertical-align:baseline;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;">2）不要将你的应用发布两份 – 一些人将容器视为虚拟机。他们中的大多数倾向于认为他们应该在现有的运行容器里发布自己的应用。在开发阶段这样是对的，此时你需要不断地部署与调试；但对于质量保证与生产中的一个连续部署的管道，你的应用本该成为镜像的一部分。记住：容器应该保持不变。</code>
            </div> 
            <div class="line number4 index3 alt1" style="border:0px;line-height:1.8em;vertical-align:baseline;background-image:none;">
             &nbsp;
            </div> 
            <div class="line number5 index4 alt2" style="border:0px;line-height:1.8em;vertical-align:baseline;background:rgb(244,244,244) none;">
             <code class="bash plain" style="border:0px;line-height:1.8em;vertical-align:baseline;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;">3）不要创建超大镜像 – 一个超大镜像只会难以分发。确保你仅有运行你应用/进程的必需的文件和库。不要安装不必要的包或在创建中运行更新（yum更新）。</code>
            </div> 
            <div class="line number6 index5 alt1" style="border:0px;line-height:1.8em;vertical-align:baseline;background-image:none;">
             &nbsp;
            </div> 
            <div class="line number7 index6 alt2" style="border:0px;line-height:1.8em;vertical-align:baseline;background:rgb(244,244,244) none;">
             <code class="bash plain" style="border:0px;line-height:1.8em;vertical-align:baseline;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;">4）不要使用单层镜像 – 要对分层文件系统有更合理的使用，始终为你的操作系统创建你自己的基础镜像层，另外一层为安全和用户定义，一层为库的安装，一层为配置，最后一层为应用。这将易于重建和管理一个镜像，也易于分发。</code>
            </div> 
            <div class="line number8 index7 alt1" style="border:0px;line-height:1.8em;vertical-align:baseline;background-image:none;">
             &nbsp;
            </div> 
            <div class="line number9 index8 alt2" style="border:0px;line-height:1.8em;vertical-align:baseline;background:rgb(244,244,244) none;">
             <code class="bash plain" style="border:0px;line-height:1.8em;vertical-align:baseline;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;">5）不要为运行中的容器创建镜像 – 换言之，不要使用“docker commit”命令来创建镜像。这种创建镜像的方法是不可重现的也不能版本化，应该彻底避免。始终使用Dockerfile或任何其他的可完全重现的S2I（源至镜像）方法。</code>
            </div> 
            <div class="line number10 index9 alt1" style="border:0px;line-height:1.8em;vertical-align:baseline;background-image:none;">
             &nbsp;
            </div> 
            <div class="line number11 index10 alt2" style="border:0px;line-height:1.8em;vertical-align:baseline;background:rgb(244,244,244) none;">
             <code class="bash plain" style="border:0px;line-height:1.8em;vertical-align:baseline;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;">6）不要只使用“最新”标签 – 最新标签就像Maven用户的“快照”。标签是被鼓励使用的，尤其是当你有一个分层的文件系统。你总不希望当你2个月之后创建镜像时，惊讶地发现你的应用无法运行，因为最顶的分层被非向后兼容的新版本替换，或者创建缓存中有一个错误的“最新”版本。在生产中部署容器时应避免使用最新。</code>
            </div> 
            <div class="line number12 index11 alt1" style="border:0px;line-height:1.8em;vertical-align:baseline;background-image:none;">
             &nbsp;
            </div> 
            <div class="line number13 index12 alt2" style="border:0px;line-height:1.8em;vertical-align:baseline;background:rgb(244,244,244) none;">
             <code class="bash plain" style="border:0px;line-height:1.8em;vertical-align:baseline;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;">7）不要在单一容器中运行超过一个进程－容器能完美地运行单个进程（http守护进程，应用服务器，数据库），但是如果你不止有一个进程，管理、获取日志、独立更新都会遇到麻烦。</code>
            </div> 
            <div class="line number14 index13 alt1" style="border:0px;line-height:1.8em;vertical-align:baseline;background-image:none;">
             &nbsp;
            </div> 
            <div class="line number15 index14 alt2" style="border:0px;line-height:1.8em;vertical-align:baseline;background:rgb(244,244,244) none;">
             <code class="bash plain" style="border:0px;line-height:1.8em;vertical-align:baseline;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;">8）不要在镜像中存储凭据。使用环境变量 –不要将镜像中的任何用户名/密码写死。使用环境变量来从容器外部获取此信息。</code>
            </div> 
            <div class="line number16 index15 alt1" style="border:0px;line-height:1.8em;vertical-align:baseline;background-image:none;">
             &nbsp;
            </div> 
            <div class="line number17 index16 alt2" style="border:0px;line-height:1.8em;vertical-align:baseline;background:rgb(244,244,244) none;">
             <code class="bash plain" style="border:0px;line-height:1.8em;vertical-align:baseline;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;">9）使用非root用户运行进程 – “docker容器默认以root运行。（…）随着docker的成熟，更多的安全默认选项变得可用。现如今，请求root对于其他人是危险的，可能无法在所有环境中可用。你的镜像应该使用USER指令来指令容器的一个非root用户来运行。”</code>
            </div> 
            <div class="line number18 index17 alt1" style="border:0px;line-height:1.8em;vertical-align:baseline;background-image:none;">
             &nbsp;
            </div> 
            <div class="line number19 index18 alt2" style="border:0px;line-height:1.8em;vertical-align:baseline;background:rgb(244,244,244) none;">
             <code class="bash plain" style="border:0px;line-height:1.8em;vertical-align:baseline;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;background:none;">10）不要依赖IP地址 – 每个容器都有自己的内部IP地址，如果你启动并停止它地址可能会变化。如果你的应用或微服务需要与其他容器通讯，使用任何命名与（或者）环境变量来从一个容器传递合适信息到另一个。</code>
            </div> 
           </div> </td> 
         </tr>
        </tbody>
       </table>
      </div> 
     </div> 
    </div> 
   </div> 
   <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13px;line-height:19.5px;">
    ***************当你发现自己的才华撑不起野心时，就请安静下来学习吧***************
   </div> 
   <div class="clear" style="clear:both;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13px;line-height:19.5px;"></div> 
   <div> 
    <div> 
     <font><span style="font-size:13px;line-height:19.5px;">本文转自散尽浮华博客园博客，原文链接：http://www.cnblogs.com/kevingrace/p/5252929.html</span></font>
     <span style="font-size:13px;line-height:19.5px;font-family:Verdana, Arial, Helvetica, sans-serif;">，如需转载请自行联系原作者</span> 
    </div> 
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
