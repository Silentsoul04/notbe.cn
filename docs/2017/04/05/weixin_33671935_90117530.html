<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Struts Validator验证器使用指南 « NotBeCN</title>
  <meta name="description" content="             作者：    David Winterfeldt大卫    James Turner詹姆斯    Rob Leland罗伯特    翻译：    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 侯思超    验证器：    从0.5版，验证器在一些form中就已...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/04/05/weixin_33671935_90117530.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">Struts Validator验证器使用指南</h1>
    <p class="post-meta">Apr 5, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">作者：</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">David Winterfeldt大卫</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">James Turner詹姆斯</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">Rob Leland罗伯特</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">翻译：</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 侯思超</p> 
   <h2 style="font-size:21px;line-height:1.5;font-family:verdana, Arial, Helvetica, sans-serif;">验证器：</h2> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">从0.5版，验证器在一些form中就已经实现了，他最初包含在开发人员包中，后来核心代码挪到Jakarta Commons包中和Struts特别扩展中作为 Struts 1.1的一部分。许多开发者为方便一直使用struts验证器，这篇文档首先概述验证器的核心功能性，然后大概介绍在 struts1.1中的变化和新增功能。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">如果你配置好验证器插件，你应该扩展ValidatorForm而不是ActionForm，以便它能加载你的Validator资源。他根据struts-config.xml文件中的action的name属性为当前form的调用相应的验证器，因此在validator-rules.xml中的form元素的名称属性应该与action的name属性值相匹配。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">另外一种选择是扩展ValidatorActionForm 而不是ValidatorForm，ValidatorActionForm使用struts-config.xml中action的path属性，所以path属性的值相应的应该与validator-rules.xml中的Form的name属性匹配。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">一个分离的action可以定义给多页form的每个页面，而且验证规则可以与action关联而不是与页码，就像验证范例中的多页form范例那样。</p> 
   <h2 style="font-size:21px;line-height:1.5;font-family:verdana, Arial, Helvetica, sans-serif;">国际化</h2> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">在validator-rules.xml 文件中form的验证规则可以组织为FormSet。FormSet 有与java.util.Locale 类相应的属性：如语言, 国家以及变量型属性，如果他们未定义，FormSet 将把它设置为默认值。一个FormSet 也可以有关联的常量。另外还可以定义与FormSet 同一级别的全局global元素，他与FormSet同样也有常量。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><b>注意</b>：你必须在国际化的FormSet前声明一个没有国际化的默认FormSet。这样如果Validator没有找到locale时可以有一个默认版本。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 可插入验证器的默认错误信息值可以被msg元素覆盖。所以为mask验证器生成错误信息的替代方法就是使用msg属性，如果字段的name属性与验证器的name属性匹配，那末将使用字段的msg属性。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; error messages的可以设置arg0-arg3 等参数元素。如果没有设置arg0-arg3的name属性， error messages将使用他们作为默认的构建参数值。如果设置了name属性，你就可以把参数指定给一特定的可插入验证器，然后这些参数将在构造错误信息时被使用。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;field</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">property="lastName"</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">depends="required,mask"&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;msg</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">name="mask"</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">key="registrationForm.lastname.maskmsg"/&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;arg0 key="registrationForm.lastname.displayname"/&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-name&gt;mask&lt;/var-name&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-value&gt;^[a-zA-Z]*$&lt;/var-value&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/field&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">默认的arg0-arg3元素将在消息资源中查找相应的key，如果资源属性设为false，她将把值直接传进去，而不从消息资源中查找。注意1.1版本中，你必须为每个模块中明确地定义在验证中用到的消息资源，否则将使用top-level资源。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;field</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">property="integer"</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">depends="required,integer,intRange"&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;arg0 key="typeForm.integer.displayname"/&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;arg1</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">name="range"</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">key="${var:min}"</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">resource="false"/&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;arg2</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">name="range"</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">key="${var:max}"</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">resource="false"/&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-name&gt;min&lt;/var-name&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-value&gt;10&lt;/var-value&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-name&gt;max&lt;/var-name&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-value&gt;20&lt;/var-value&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/field&gt;</p> 
   <h2 style="font-size:21px;line-height:1.5;font-family:verdana, Arial, Helvetica, sans-serif;">常量<span style="font-family:Arial;">/</span>变量</h2> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">全局的常量可以在全局标签中定义，FormSet/本地常量能在formset 标签中创建。常量当前仅仅是代替字段的property属性，字段的var 元素的 value属性，字段的msg 元素的 key属性，字段的arg0-arg3 元素的 key属性。字段的变量也可以在arg0-arg3 元素中被代替（例如：${var:min}））。替换的顺序是FormSet/Locale常量第一，全局的常量第二，</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">arg elements 变量最后。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;global&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;constant&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;constant-name&gt;zip&lt;/constant-name&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;constant-value&gt;^\d{5}(-\d{4})?$&lt;/constant-value&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/constant&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/global&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;field</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">property="zip"</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">depends="required,mask"&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;arg0 key="registrationForm.zippostal.displayname"/&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-name&gt;mask&lt;/var-name&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-value&gt;${zip}&lt;/var-value&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/field&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">验证器可以使用字段下面的变量部分来存储变量，这些变量通过字段的getVar（(String key)方法取得。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;field</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">property="integer"</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">depends="required,integer,intRange"&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;arg0 key="typeForm.integer.displayname"/&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;arg1</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">name="range"</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">key="${var:min}" resource="false"/&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;arg2</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">name="range"</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">key="${var:max}" resource="false"/&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-name&gt;min&lt;/var-name&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-value&gt;10&lt;/var-value&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-name&gt;max&lt;/var-name&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-value&gt;20&lt;/var-value&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/field&gt;</p> 
   <h2 style="font-size:21px;line-height:1.5;font-family:verdana, Arial, Helvetica, sans-serif;">使用<span style="font-family:Arial;">validwhen</span>设计复杂的验证</h2> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">使用validwhen来设计复杂验证的一个经常的要求就是根据一个字段验证另外一个字段（比如, 如果你要用户两次输入口令来确认值口令一致），另外一个就是表单中的一个字段只有另外一个字段有确定值的时候才是必须输入的。新的validwhen验证规则将很快被包含在1.1后的STRUTS版本中，她就是用来处理这种情况的。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; validwhen 规则处理单个的变量字段，叫测试。这变量的值是一个布尔的表达式，如果验证有效则它必须为真。可以包含这种变量的表达式有：</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">u&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 单引号或双引号字符串literals，</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">u&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 十进制、十六进制、八进制的Integer literals，</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">u&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; null与null和空字符串匹配，</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">u&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 其它可以用属性名引用的form字段,例如customerAge，</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">u&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 可以在外部因用得索引字段, 例如childLastName[2]，</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">u&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 可以默认implicit因用得索引字段, 例如childLastName[], 她将作为被索引的字段使用同样的索引到数组中，</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">The literal *这里指它包含当前测试字段的值，</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">作为例子，考虑一个包含通讯地址和邮箱字段的form。如果通讯地址不为空则邮箱字段是必须的required。你能这样定义validwhen 规则：</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;field property="emailAddress" depends="validwhen"&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;arg0 key="userinfo.emailAddress.label"/&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-name&gt;test&lt;/var-name&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-value&gt;((sendNewsletter == null) or (*this* != null))&lt;/var-value&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/field&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">上面定义的意思是：如果通讯地址是空或不空时这个字段时有效的。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">这里有个稍微复杂的例子，它使用了索引字段。假定有一个表单，允许用户输入他们希望定购的部件号和数量。类orderLine 的bean的一数组被用来在称为orderLines 的一属性保持输入项。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">If you wished to verify that every line with part number also had a quantity entered, you could do it with:</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">如果你希望校验订单中有数量输入得每一行，你可以这样：</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;field</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">property="quantity"</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">indexedListProperty="orderLines"</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">depends="validwhen"&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;arg0 key="orderform.quantity.label"/&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-name&gt;test&lt;/var-name&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-value&gt;((orderLines[].partNumber == null) or (*this* != null))&lt;/var-value&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/field&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">这里的意思是：如果相应的partNumber 字段是空, 或这字段是不空的，则这字段是有效的。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">最后一个例子，想象一表单，用户必须输入他们的以英寸为单位的高度，如果他们在高度在60英寸以下，则出一错误。（it is an error to have checked off nbaPointGuard as a career.）</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;field property="nbaPointGuard" depends="validwhen"&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;arg0 key="careers.nbaPointGuard.label"/&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-name&gt;test&lt;/var-name&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-value&gt;((heightInInches &gt;= 60) or (*this* == null))&lt;/var-value&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/field&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">给程序员的简单说明：</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">所有的比较关系必须在parens 封装。All comparisons must be enclosed in parens.</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">只有两个itme时可以and或or链接。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">如果比较的两item都可以转为整数，则使用numeric比较，否则使用字符串比较。</p> 
   <h2 style="font-size:21px;line-height:1.5;font-family:verdana, Arial, Helvetica, sans-serif;">可插入验证器</h2> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">验证是从validation.xml 文件中加载的，默认的验证规则定义在validation.xml 文件中，默认定义了required, mask ,byte, short, int, long, float, double, date (没有本地支持), and a numeric range。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">" mask "方式依赖于默认值安装要求，那意味着"required "可以完成，在"'mask "将运行以前"required "和" mask "方式被默认包含进框架中了。任何字段如果不是"required "而且是空或有零长度将跳过其他验证。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">如果使用了Javascript 标签，客户端javascript在validator's javascript 属性中查找值而且产生一个有验证form方法的对象，要得到更多的关于Javascript Validator 标签工作细节的详细的解释,参阅html标签API参考。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">"'mask' "方式让你用一正则表达式掩码验证字段，它使用jakarta的正规表达式包，所有的有效性规则存储在validator-rules.xml 文件，使用的主类是org.apache.regexp.RE。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">validation.xml文件中的验证器配置范例：</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;validator name="required"</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">classname="org.apache.struts.validator.FieldChecks"</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">method="validateRequired"</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">methodParams="java.lang.Object,</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">org.apache.commons.validator.ValidatorAction,</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">org.apache.commons.validator.Field,</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">org.apache.struts.action.ActionErrors,</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">javax.servlet.http.HttpServletRequest"</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">msg="errors.required"&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;validator name="mask"</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">classname="org.apache.struts.validator.FieldChecks"</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">method="validateMask"</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">methodParams="java.lang.Object,</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">org.apache.commons.validator.ValidatorAction,</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">org.apache.commons.validator.Field,</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">org.apache.struts.action.ActionErrors,</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">javax.servlet.http.HttpServletRequest"</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">msg="errors.invalid"&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <h3 style="font-size:16px;background-image:url(&quot;images/bg_list.gif&quot;);background-position:left top;background-repeat:no-repeat;line-height:1.8;color:rgb(102,102,102);font-family:verdana, Arial, Helvetica, sans-serif;"><span style="font-size:18pt;">定义可插入验证器</span></h3> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">方法的参数是用逗号分隔的一些类名称列表，方法属性需要有一个符合上面的列表的签名。列表由以下组合而成：</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">java.lang.Object – 要验证的Bean。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">org.apache.commons.validator.ValidatorAction – 当前ValidatorAction。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">org.apache.commons.validator.Field – 要验证的字段</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">org.apache.struts.action.ActionErrors – 如果验证错误将加入ActionError的错误对象javax.servlet.http.HttpServletRequest –当前request 对象。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">javax.servlet.ServletContext – 应用的ServletContext。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">org.apache.commons.validator.Validator–当前的org.apache.commons.validator.Validator实例。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">java.util.Locale – 当前用户的Locale。</p> 
   <h3 style="font-size:16px;background-image:url(&quot;images/bg_list.gif&quot;);background-position:left top;background-repeat:no-repeat;line-height:1.8;color:rgb(102,102,102);font-family:verdana, Arial, Helvetica, sans-serif;"><span style="font-size:18pt;">多页面form</span></h3> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">字段部分有一可选的页面属性，它可以被设为整数，页上字段的所有验证小于或等于服务器端验证的当前页，页上字段的所有验证小于或等于客户端页上所有字段的验证小于或等于服务器端验证的当前页验证的当前页。一个mutli-part表单需要定义页面属性：</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;html:hidden property="page" value="1"/&gt;。</p> 
   <h3 style="font-size:16px;background-image:url(&quot;images/bg_list.gif&quot;);background-position:left top;background-repeat:no-repeat;line-height:1.8;color:rgb(102,102,102);font-family:verdana, Arial, Helvetica, sans-serif;"><span style="font-size:18pt;">比较两个字段</span></h3> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">这是一个展示你怎样才能比较两个字段是否有一样的值的例子。比如“用户改变他们的口令“一般会有口令字段和一确认字段。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;validator name="twofields"</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">classname="com.mysite.StrutsValidator"</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">method="validateTwoFields"</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">msg="errors.twofields"/&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;field property="password" depends="required,twofields"&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;arg0 key="typeForm.password.displayname"/&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-name&gt;secondProperty&lt;/var-name&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-value&gt;password2&lt;/var-value&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/field&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">public static boolean validateTwoFields(</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">Object bean, ValidatorAction va,&nbsp;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">Field field, ActionErrors errors, HttpServletRequest request,&nbsp;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">ServletContext application) {</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">String value = ValidatorUtils.getValueAsString( bean,&nbsp; field.getProperty());</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">String sProperty2 = field.getVarValue("secondProperty");</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">String value2 = ValidatorUtils.getValueAsString( bean,&nbsp; sProperty2);</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (!GenericValidator.isBlankOrNull(value)) {</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">try {</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">if (!value.equals(value2)) {</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">errors.add(field.getKey(),</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">Resources.getActionError( application, request, va, field));</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">}</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">} catch (Exception e) {</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">errors.add(field.getKey(), Resources.getActionError( application, request, va, field));</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">return false;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">}</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">}</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">}</p> 
   <h2 style="font-size:21px;line-height:1.5;font-family:verdana, Arial, Helvetica, sans-serif;">已知的<span style="font-family:Arial;">bug</span> </h2> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">Struts Validator依赖于Commons Validator包，所以问题报告和增强需求可能在两个产品中列出。</p> 
   <ul style="margin-left:30px;font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <li style="list-style-type:disc;"><a href="http://nagoya.apache.org/bugzilla/buglist.cgi?bug_status=UNCONFIRMED&amp;bug_status=NEW&amp;bug_status=ASSIGNED&amp;bug_status=REOPENED&amp;bug_status=VERIFIED&amp;bug_severity=Blocker&amp;bug_severity=Critical&amp;bug_severity=Major&amp;bug_severity=Normal&amp;bug_severity=Minor%20" rel="nofollow" style="color:rgb(255,51,102);text-decoration:none;"><span style="color:rgb(2,50,100);">Struts Validator Bugzilla Reports</span></a></li> 
    <li style="list-style-type:disc;"><a href="http://nagoya.apache.org/bugzilla/buglist.cgi?bug_status=UNCONFIRMED&amp;bug_status=NEW&amp;bug_status=ASSIGNED&amp;bug_status=REOPENED&amp;bug_status=VERIFIED&amp;bug_severity=Blocker&amp;bug_severity=Critical&amp;bug_severity=Major&amp;bug_severity=Normal&amp;bug_severity=Minor%20" rel="nofollow" style="color:rgb(255,51,102);text-decoration:none;"><span style="color:rgb(2,50,100);">Commons Validator Bugzilla Reports</span></a></li> 
   </ul>
   <h2 style="font-size:21px;line-height:1.5;font-family:verdana, Arial, Helvetica, sans-serif;">变更和<span style="font-family:Arial;">deprecations</span> </h2> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><b>新建的标记属性。</b></p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;html:javascript&gt;标记有新的属性定义.</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><b>使用commons-validator.jar</b><b>中的DTD</b><b>验证。</b></p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">当前使用的验证XML文件是根据commons-validator.jar中的DTD。Struts不在为validator-rules.xml and validator.xml.单独维护一个分离的DTD，另外,commons-validator 现在维护一个统一的validator.dtd。修改所有validator.xml文件的DTD引用为</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;!DOCTYPE form-validation PUBLIC</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">"-//Apache Software Foundation//DTD Commons Validator Rules Configuration 1.0//EN"</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">"http://jakarta.apache.org/commons/dtds/validator_1_0.dtd"&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><b>空字段。</b></p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">当前默认在所有得基础验证类型中忽略空白的字段，如果你要求一个字段必须输入，那末在你的应用的validator.xml 文件相应的字段定义的depends属性中添加 " required "。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><b>新建的范围RANGE</b><b>方法.</b></p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">JavaScript 和JAVA中都添加了intRange &amp; floatRange 方法。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><b>有条件地REQUIRED</b><b>字段.</b></p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">最大的修改是添加了基于其她字段的值的有条件地require验证的能力。它允许你定义逻辑如：“只有X字段非空的时候Y字段为’male’才有效”，这是实现上述逻辑的推荐方法，这种方法在1.1版后的第一版将实现。在1.1版中添加的Requiredif验证规则，将在新版中去掉。不过，如果你正准备使用requiredif，这里有一个简短的教程。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 让我们假定你有一个有3个字段的医药的信息表单，性别sex，怀孕测试pregnancyTest，测试结果testResult，如果性别为'f' or 'F'，则怀孕测试pregnancyTest是required，如果pregnancyTest不是空，测试结果testResult是required。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">你的validation.xml 文件的输入项应该是这样的：</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;form name="medicalStatusForm"&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;field property="pregnancyTest" depends="requiredif"&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;arg0 key="medicalStatusForm.pregnancyTest.label"/&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-name&gt;field[0]&lt;/var-name&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-value&gt;sex&lt;/var-value&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-name&gt;fieldTest[0]&lt;/var-name&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-value&gt;EQUAL&lt;/var-value&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-name&gt;fieldValue[0]&lt;/var-name&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-value&gt;F&lt;/var-value&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-name&gt;field[1]&lt;/var-name&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-value&gt;sex&lt;/var-value&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-name&gt;fieldTest[1]&lt;/var-name&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-value&gt;EQUAL&lt;/var-value&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-name&gt;fieldValue[1]&lt;/var-name&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-value&gt;f&lt;/var-value&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-name&gt;fieldJoin&lt;/var-name&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-value&gt;OR&lt;/var-value&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/field&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;field property="testResult" depends="requiredif"&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;arg0 key="medicalStatusForm.testResult.label"/&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-name&gt;field[0]&lt;/var-name&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-value&gt;pregnancyTest&lt;/var-value&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-name&gt;fieldTest[0]&lt;/var-name&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-value&gt;NOTNULL&lt;/var-value&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/field&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/form&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">这里有一个使用索引的属性更复杂的例子，如果你的struts-config.xml 有这下面：</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;form-bean name="dependentlistForm"</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">type="org.apache.struts.webapp.validator.forms.ValidatorForm"&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;form-property</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">name="dependents"</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">type="org.apache.struts.webapp.validator.Dependent[]" size="10"/&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;form-property name="insureDependents" type="java.lang.Boolean" initial="false"/&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/form-bean&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">这里dependentlistForm bean有lastName，firstName，dob，coverageType四个属性，你可以这样定义一验证规则：</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;form name="dependentlistForm"&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;field</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">property="firstName" indexedListProperty="dependents" depends="requiredif"&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;arg0 key="dependentlistForm.firstName.label"/&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-name&gt;field[0]&lt;/var-name&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-value&gt;lastName&lt;/var-value&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-name&gt;fieldIndexed[0]&lt;/var-name&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-value&gt;true&lt;/var-value&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-name&gt;fieldTest[0]&lt;/var-name&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-value&gt;NOTNULL&lt;/var-value&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/field&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;field</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">property="dob" indexedListProperty="dependents" depends="requiredif,date"&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;arg0 key="dependentlistForm.dob.label"/&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-name&gt;field[0]&lt;/var-name&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-value&gt;lastName&lt;/var-value&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-name&gt;fieldIndexed[0]&lt;/var-name&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-value&gt;true&lt;/var-value&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-name&gt;fieldTest[0]&lt;/var-name&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-value&gt;NOTNULL&lt;/var-value&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/field&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;field</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">property="coverageType" indexedListProperty="dependents" depends="requiredif"&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;arg0 key="dependentlistForm.coverageType.label"/&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-name&gt;field[0]&lt;/var-name&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-value&gt;lastName&lt;/var-value&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-name&gt;fieldIndexed[0]&lt;/var-name&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-value&gt;true&lt;/var-value&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-name&gt;fieldTest[0]&lt;/var-name&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-value&gt;NOTNULL&lt;/var-value&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-name&gt;field[1]&lt;/var-name&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-value&gt;insureDependents&lt;/var-value&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-name&gt;fieldTest[1]&lt;/var-name&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-value&gt;EQUAL&lt;/var-value&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-name&gt;fieldValue[1]&lt;/var-name&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-value&gt;true&lt;/var-value&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-name&gt;fieldJoin&lt;/var-name&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;var-value&gt;AND&lt;/var-value&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/var&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/field&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;/form&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">这里的意思是：</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">如果lastName 字段是非空的，firstName 字段required。因为字段Indexed 为真，这它意味着lastName的indexed 必须与firstName 的索引的一样，dob同理，除非date不为空。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">如果lastName 用样索引时的值不空, 而且非索引字段insureDependents为真，则coverageType 是only require。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">你可以对字段在[n]中使用任意数字，唯一的限制是他们必须都是AND或OR,你无法混合使用。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><b>Deprecation</b><b>：</b></p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">u&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; JavaScript 和Java的range方法.</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">u&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; StrutsValidator &amp;StrutsValidatorUtil 类中的Deprecation方法</p> 
   <h2 style="font-size:21px;line-height:1.5;font-family:verdana, Arial, Helvetica, sans-serif;">验证器<span style="font-family:Arial;">api</span>指南</h2> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">一个简明的<a href="http://jakarta.apache.org/struts/api/org/apache/struts/validator/package-summary.html#package_description" rel="nofollow" style="color:rgb(255,51,102);text-decoration:none;"><span style="color:rgb(2,50,100);">Struts验证器API指南</span></a>&nbsp;可以帮助你开始。</p> 
   <h2 style="font-size:21px;line-height:1.5;font-family:verdana, Arial, Helvetica, sans-serif;">验证器资源</h2> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><a href="http://tinyurl.com/6jnv" rel="nofollow" style="color:rgb(255,51,102);text-decoration:none;"><b><span style="color:rgb(2,50,100);font-family:'宋体';">Struts Validator: Validating Two Fields Match</span></b></a><span style="font-family:'宋体';">&nbsp;作者Matt Raible。（两个字段匹配验证）关于使用方法的文章。（范例部分为翻译此文内容）</span></p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><a href="http://www.strutskickstart.com/" rel="nofollow" style="color:rgb(255,51,102);text-decoration:none;"><b><span style="color:rgb(2,50,100);font-family:'宋体';">DynaForms and the Validator</span></b></a><span style="font-family:'宋体';">&nbsp;作者James Turner and Kevin Bedell。</span><a href="http://www.strutskickstart.com/" rel="nofollow" style="color:rgb(255,51,102);text-decoration:none;"><span style="color:rgb(2,50,100);font-family:'宋体';">Struts Kickstart</span></a><span style="font-family:'宋体';">的其中一章（动态form和验证器），可以自由下载PDF).</span></p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><a href="http://www.manning.com/getpage.html?project=husted&amp;filename=chapters.html" rel="nofollow" style="color:rgb(255,51,102);text-decoration:none;"><b><span style="color:rgb(2,50,100);font-family:'宋体';">Validating user input</span></b></a><span style="font-family:'宋体';">&nbsp;作者 David Winterfeldt and Ted Husted。</span><a href="http://www.amazon.com/exec/obidos/ISBN=1930110502/hitchhikeguidetoA/" rel="nofollow" style="color:rgb(255,51,102);text-decoration:none;"><span style="color:rgb(2,50,100);font-family:'宋体';">Struts in Action</span></a><span style="font-family:'宋体';">的其中一章，可以自由下载(PDF)。</span></p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><b><br></b></p> 
   <h1 style="font-size:28px;line-height:1.5;font-family:verdana, Arial, Helvetica, sans-serif;">使用方法</h1> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">作者：</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">丑陋 &amp;&amp; Snowtears：经过2周的不懈努力，阅读了大量的资料，终于对Validator有了个初步的认识，整理了一下，浅浅的谈了谈写法，希望能有一定的帮助，其中肯定有许多说的不对不准确的地方，还请多指教&nbsp;<a href="mailto:real_herozx@163.net" rel="nofollow" style="color:rgb(255,51,102);text-decoration:none;"><span style="color:rgb(2,50,100);">real_herozx@163.net</span></a></p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 王艺：</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 根据以上两位的文章正理而成</p> 
   <h2 style="font-size:21px;line-height:1.5;font-family:verdana, Arial, Helvetica, sans-serif;">配置<span style="font-family:Arial;">ruts-config.xml</span>：</h2> 
   <h3 style="font-size:16px;background-image:url(&quot;images/bg_list.gif&quot;);background-position:left top;background-repeat:no-repeat;line-height:1.8;color:rgb(102,102,102);font-family:verdana, Arial, Helvetica, sans-serif;"> <span style="font-size:18pt;">1、</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-size:18pt;">添加ApplicationResources配置文件。</span> </h3> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">如：</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;!-- ========== Message Resources Definitions =========================== --&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;message-resources parameter="com.dc.sibss.om.struts.ApplicationResources" /&gt;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">其中com.sibss.om.struts.ApplicationResources"的部分是资源文件的路径，此文件的作用是提供错误信息的非编程定制化和多语言支持。如果我们使用中文平台操作系统，则默认情况下将首先查找ApplicationResource_zh_CN.properties文件，然后是ApplicationResources_zh.properties，如果前两个文件没有被找到则将查找ApplicationResources.properties文件。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">为了能够在页面上显示错误提示信息，我们还需要将以下内容添加到ApplicationResources.properties文件的末尾：</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; errors.required={0} is required.</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">errors.minlength={0} cannot be less than {1} characters.</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">errors.maxlength={0} cannot be greater than {2} characters.</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">errors.invalid={0} is invalid.</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">errors.byte={0} must be an byte.</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">errors.short={0} must be an short.</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">errors.integer={0} must be an integer.</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><br></p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><br></p> 
   <p><font><span style="font-size:14px;">本文转自茄子_2008博客园博客，原文链接：http://www.cnblogs.com/xd502djj/archive/2010/09/05/1818295.html</span></font><span style="font-size:14px;font-family:verdana, Arial, Helvetica, sans-serif;">，如需转载请自行联系原作者。</span></p> 
   <div>
    <br>
   </div> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><br></p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><br></p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
