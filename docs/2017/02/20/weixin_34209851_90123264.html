<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>7. Shell 脚本编写 « NotBeCN</title>
  <meta name="description" content="                  7. Shell 脚本编写                        1、提示用户输入一个字符串，如果是 hello，打出 yes，并每秒输出 "hello，world"，否则就输出 no，实现如下：                                 #!/b...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/02/20/weixin_34209851_90123264.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">7. Shell 脚本编写</h1>
    <p class="post-meta">Feb 20, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <div> 
    <span><span>7. Shell 脚本编写</span></span> 
    <div>
     <br>
    </div> 
    <div>
     <span><span>1、提示用户输入一个字符串，如果是 hello，打出 yes，并每秒输出 "hello，world"，否则就输出 no，实现如下：</span></span>
    </div> 
   </div> 
   <div>
    <br>
   </div> 
   <div> 
    <div>
     <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">#!/bin/bash</span></span>
    </div> 
    <div>
     <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">#Filename:hello.sh</span></span>
    </div> 
    <div>
     <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);"><br></span></span>
    </div> 
    <div>
     <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">echo "Please input 'hello'"</span></span>
    </div> 
    <div>
     <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">read -p "&gt; " str &nbsp;// 得到键盘输入</span></span>
    </div> 
    <div>
     <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">echo $str</span></span>
    </div> 
    <div>
     <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);"><br></span></span>
    </div> 
    <div>
     <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">if [ "$str" == hello ]</span></span>
    </div> 
    <div>
     <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">then</span></span>
    </div> 
    <div>
     <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">&nbsp; &nbsp; &nbsp; &nbsp; echo "yes"</span></span>
    </div> 
    <div>
     <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">&nbsp; &nbsp; &nbsp; &nbsp; while true</span></span>
    </div> 
    <div>
     <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">&nbsp; &nbsp; &nbsp; &nbsp; do</span></span>
    </div> 
    <div>
     <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo "hello, world"</span></span>
    </div> 
    <div>
     <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sleep 1 &nbsp; // 睡眠1秒</span></span>
    </div> 
    <div>
     <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">&nbsp; &nbsp; &nbsp; &nbsp; done</span></span>
    </div> 
    <div>
     <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">else</span></span>
    </div> 
    <div>
     <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">echo "no"</span></span>
    </div> 
    <div>
     <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">fi</span></span>
    </div> 
   </div> 
   <div>
    <br>
   </div> 
   <div> 
    <span>2、</span>
    <span style="color:rgb(51,51,51);font-size:14px;"><span>实现一个 find.sh，运行 ./find.sh &nbsp;/tmp/test.txt ，当 /tmp/test.txt 为文件且存在时输出 yes, 否则输出 no，实现如下：</span></span> 
   </div> 
   <div>
    <br>
   </div> 
   <div> 
    <div>
     <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">#!/bin/bash</span></span>
    </div> 
    <div>
     <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">#Filename:find.sh</span></span>
    </div> 
    <div>
     <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">args1=$1 &nbsp; &nbsp; &nbsp; &nbsp; ( $0 为要执行的文件路径，$1 为输入的第一个参数，以此类推)</span></span>
    </div> 
    <div>
     <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);"><br></span></span>
    </div> 
    <div>
     <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">if [ -e "$args1" ] &nbsp; &nbsp;// 如果该变量代表的值是一个文件</span></span>
    </div> 
    <div>
     <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">then</span></span>
    </div> 
    <div>
     <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">&nbsp; &nbsp; &nbsp; &nbsp; echo "yes"</span></span>
    </div> 
    <div>
     <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">else</span></span>
    </div> 
    <div>
     <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">&nbsp; &nbsp; &nbsp; &nbsp; echo "no"</span></span>
    </div> 
    <div>
     <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">fi</span></span>
    </div> 
   </div> 
   <div> 
    <div>
     <span style="color:rgb(51,51,51);font-size:14px;"><span><br></span></span>
    </div> 
    <div>
     <span style="color:rgb(51,51,51);font-size:14px;"><span>判断文件的参数如下：</span></span>
    </div> 
    <div> 
     <span style="color:rgb(69,69,69);font-size:14px;"><span>-e 文件存在&nbsp;</span></span>
     <br style="color:rgb(69,69,69);">
     <span style="color:rgb(69,69,69);font-size:14px;"><span>-f file 是一个 regular 文件(不是目录或者设备文件)&nbsp;</span></span>
     <br style="color:rgb(69,69,69);">
     <span style="color:rgb(69,69,69);font-size:14px;"><span>-s 文件长度不为 0&nbsp;</span></span>
     <br style="color:rgb(69,69,69);">
     <span style="color:rgb(69,69,69);font-size:14px;"><span>-d 文件是个目录&nbsp;</span></span>
     <br style="color:rgb(69,69,69);">
     <span style="color:rgb(69,69,69);font-size:14px;"><span>-b 文件是个块设备(软盘,cdrom 等等)&nbsp;</span></span>
     <br style="color:rgb(69,69,69);">
     <span style="color:rgb(69,69,69);font-size:14px;"><span>-c 文件是个字符设备(键盘,modem,声卡等等)&nbsp;</span></span>
     <br style="color:rgb(69,69,69);">
     <span style="color:rgb(69,69,69);font-size:14px;"><span>-p 文件是个管道&nbsp;</span></span>
     <br style="color:rgb(69,69,69);">
     <span style="color:rgb(69,69,69);font-size:14px;"><span>-h 文件是个符号链接&nbsp;</span></span>
     <br style="color:rgb(69,69,69);">
     <span style="color:rgb(69,69,69);font-size:14px;"><span>-L 文件是个符号链接&nbsp;</span></span>
     <br style="color:rgb(69,69,69);">
     <span style="color:rgb(69,69,69);font-size:14px;"><span>-S 文件是个 socket&nbsp;</span></span>
     <br style="color:rgb(69,69,69);">
     <span style="color:rgb(69,69,69);font-size:14px;"><span>-t 关联到一个终端设备的文件描述符 这个选项一般都用来检测是否在一个给定脚本中的 stdin[-t0]或[-t1]是一个终端&nbsp;</span></span>
     <br style="color:rgb(69,69,69);">
     <span style="color:rgb(69,69,69);font-size:14px;"><span>-r 文件具有读权限(对于用户运行这个 test)&nbsp;</span></span>
     <br style="color:rgb(69,69,69);">
     <span style="color:rgb(69,69,69);font-size:14px;"><span>-w 文件具有写权限(对于用户运行这个 test)&nbsp;</span></span>
     <br style="color:rgb(69,69,69);">
     <span style="color:rgb(69,69,69);font-size:14px;"><span>-x 文件具有执行权限(对于用户运行这个 test)</span></span> 
    </div> 
    <div>
     <span style="color:rgb(69,69,69);font-size:14px;"><span><br></span></span>
    </div> 
    <div> 
     <span style="color:rgb(69,69,69);font-size:14px;"><span>3、</span></span>
     <span style="color:rgb(51,51,51);font-size:14px;"><span>实现一个 ping.sh</span></span> 
    </div> 
    <ul style="color:rgb(51,51,51);font-size:14px;">
     <li><span>运行 ./ping.sh start 后在后台运行 ping 命令，ping 127.0.0.1，并把 ping 结果输出到 /tmp/ping.log</span></li> 
     <li><span>运行 ./ping.sh status 显示 ping 命令是否正在运行</span></li> 
     <li><span>运行 ./ping.sh stop 停止 ping 命令，如果正在运行的话。</span></li> 
    </ul>
    <div>
     <span style="color:#333333;"><span style="font-size:14px;"><span># 方法一：输入 stop 时，直接关闭所有的 ping 进程</span></span></span>
    </div> 
    <div> 
     <div>
      <br>
     </div> 
     <div> 
      <div>
       <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">#!/bin/bash</span></span>
      </div> 
      <div>
       <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">#Filaname:ping.sh</span></span>
      </div> 
      <div>
       <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);"><br></span></span>
      </div> 
      <div>
       <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">if [ "$1" == "start" ]</span></span>
      </div> 
      <div>
       <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">then</span></span>
      </div> 
      <div>
       <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">&nbsp; &nbsp; &nbsp; &nbsp; ping 127.0.0.1 &gt; /tmp/ping.log &amp;</span></span>
      </div> 
      <div>
       <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">elif [ "$1" == "status" ]</span></span>
      </div> 
      <div>
       <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">then</span></span>
      </div> 
      <div>
       <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">&nbsp; &nbsp; &nbsp; &nbsp; ps -ef | grep "ping 127.0.0.1"</span></span>
      </div> 
      <div>
       <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">elif [ "$1" == "stop" ]</span></span>
      </div> 
      <div>
       <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">then</span></span>
      </div> 
      <div>
       <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">&nbsp; &nbsp; &nbsp; &nbsp; killall ping &nbsp;(会干掉所有的ping 进程，包括子进程)</span></span>
      </div> 
      <div>
       <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">fi</span></span>
      </div> 
     </div> 
     <div>
      <span style="color:#333333;"><span><br></span></span>
     </div> 
     <div>
      <span style="color:#333333;"><span>#方法二：得到ping 127.0.0.1 的进程 ID ，再用kill 结束掉</span></span>
     </div> 
    </div> 
    <div> 
     <div>
      <br>
     </div> 
     <div> 
      <div>
       <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">#!/bin/bash</span></span>
      </div> 
      <div>
       <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">#Filaname:ping.sh</span></span>
      </div> 
      <div>
       <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);"><br></span></span>
      </div> 
      <div>
       <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">if [ "$1" == "start" ]</span></span>
      </div> 
      <div>
       <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">then</span></span>
      </div> 
      <div>
       <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">&nbsp; &nbsp; &nbsp; &nbsp; ping 127.0.0.1 &gt; /tmp/ping.log &amp;</span></span>
      </div> 
      <div>
       <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">elif [ "$1" == "status" ]</span></span>
      </div> 
      <div>
       <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">then</span></span>
      </div> 
      <div>
       <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">&nbsp; &nbsp; &nbsp; &nbsp; ps -ef | grep "ping 127.0.0.1"</span></span>
      </div> 
      <div>
       <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">elif [ "$1" == "stop" ]</span></span>
      </div> 
      <div>
       <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">then</span></span>
      </div> 
      <div>
       <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">&nbsp; &nbsp; &nbsp; &nbsp; pid=`ps -ef |grep ping | grep "127.0.0.1" | awk '{print $2}'`</span></span>
      </div> 
      <div>
       <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">&nbsp; &nbsp; &nbsp; &nbsp; if [ "pid" -gt 0 ];then</span></span>
      </div> 
      <div>
       <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; kill $pid</span></span>
      </div> 
      <div>
       <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo kill $pid</span></span>
      </div> 
      <div>
       <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">&nbsp; &nbsp; &nbsp; &nbsp; else</span></span>
      </div> 
      <div>
       <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo "要关闭的进程不存在"</span></span>
      </div> 
      <div>
       <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">&nbsp; &nbsp; &nbsp; &nbsp; fi</span></span>
      </div> 
      <div>
       <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">fi</span></span>
      </div> 
     </div> 
     <div>
      <span style="font-size:14px;"><span><br></span></span>
     </div> 
     <div> 
      <span style="font-size:18px;"><span>3、将上面的 ping.sh 加入开机自启动</span></span>
      <span style="font-size:14px;"><span><br></span></span> 
     </div> 
     <div>
      <span style="font-size:18px;"><span>系统的rc.local 文件是在 系统启动之后才加载的，可以把脚本添加到这个文件中</span></span>
     </div> 
     <div>
      <span style="font-size:18px;"><span>打开 /etc/rc.d/rc.local 文件（root 用户）：vim /etc/rc.d/rc.local</span></span>
     </div> 
     <div>
      <span style="font-size:18px;"><span>加入下面两行：</span></span>
     </div> 
     <div>
      <br>
     </div> 
     <div> 
      <div>
       <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">cd /home/demon &nbsp; # 进入到当前目录</span></span>
      </div> 
      <div>
       <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color:rgb(51,51,51);">su demon -c "./ping.sh start"</span></span>
      </div> 
     </div> 
     <div>
      <span style="color:#333333;"><span style="font-size:14px;"><span><br></span></span></span>
     </div> 
     <div>
      <span style="font-size:14px;"><span>4、解析 mysql.server 脚本的作用</span></span>
     </div> 
     <div>
      <span style="font-size:14px;"><span><br></span></span>
     </div> 
     <div>
      <span style="font-size:14px;"><span>mysql.server 是用来打开或关闭 mysql 服务</span></span>
     </div> 
     <div> 
      <div style="color:rgb(51,51,51);font-size:14px;"> 
       <div>
        <br>
       </div> 
       <div style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;font-size:12px;"> 
        <div>
         #!/bin/sh
        </div> 
        <div>
         <br>
        </div> 
        <div>
         basedir=
        </div> 
        <div>
         datadir=
        </div> 
        <div>
         service_startup_timeout=900 &nbsp; &nbsp; #服务启动超时时间
        </div> 
        <div>
         <br>
        </div> 
        <div>
         lockdir='/var/lock/subsys'
        </div> 
        <div>
         lock_file_path="$lockdir/mysql"
        </div> 
        <div>
         <br>
        </div> 
        <div>
         mysqld_pid_file_path=
        </div> 
        <div>
         # 判断 $basedir 的长度是否为 0
        </div> 
        <div>
         if test -z "$basedir"
        </div> 
        <div>
         then
        </div> 
        <div>
         &nbsp; basedir=/usr/local/mysql
        </div> 
        <div>
         &nbsp; bindir=/usr/local/mysql/bin
        </div> 
        <div>
         &nbsp; if test -z "$datadir"
        </div> 
        <div>
         &nbsp; then
        </div> 
        <div>
         &nbsp; &nbsp; datadir=/usr/local/mysql/data
        </div> 
        <div>
         &nbsp; fi
        </div> 
        <div>
         &nbsp; sbindir=/usr/local/mysql/bin
        </div> 
        <div>
         &nbsp; libexecdir=/usr/local/mysql/bin
        </div> 
        <div>
         else
        </div> 
        <div>
         &nbsp; bindir="$basedir/bin"
        </div> 
        <div>
         &nbsp; if test -z "$datadir"
        </div> 
        <div>
         &nbsp; then
        </div> 
        <div>
         &nbsp; &nbsp; datadir="$basedir/data"
        </div> 
        <div>
         &nbsp; fi
        </div> 
        <div>
         &nbsp; sbindir="$basedir/sbin"
        </div> 
        <div>
         &nbsp; libexecdir="$basedir/libexec"
        </div> 
        <div>
         fi
        </div> 
        <div>
         <br>
        </div> 
        <div>
         datadir_set=
        </div> 
        <div>
         <br>
        </div> 
        <div>
         lsb_functions="/lib/lsb/init-functions"
        </div> 
        <div>
         # 判断是否是一个文件，并存在
        </div> 
        <div>
         if test -f $lsb_functions ; then
        </div> 
        <div>
         &nbsp; . $lsb_functions
        </div> 
        <div>
         else
        </div> 
        <div>
         &nbsp; log_success_msg()
        </div> 
        <div>
         &nbsp; {
        </div> 
        <div>
         &nbsp; &nbsp; echo " SUCCESS! $@"
        </div> 
        <div>
         &nbsp; }
        </div> 
        <div>
         &nbsp; log_failure_msg()
        </div> 
        <div>
         &nbsp; {
        </div> 
        <div>
         &nbsp; &nbsp; echo " ERROR! $@"
        </div> 
        <div>
         &nbsp; }
        </div> 
        <div>
         fi
        </div> 
        <div>
         <br>
        </div> 
        <div>
         #添加 PATH 到环境变量中
        </div> 
        <div>
         PATH="/sbin:/usr/sbin:/bin:/usr/bin:$basedir/bin"
        </div> 
        <div>
         export PATH
        </div> 
        <div>
         <br>
        </div> 
        <div>
         # mode 是传入的第一个参数，用于判断启动脚本是 开启 mysql 服务，还是关闭
        </div> 
        <div>
         mode=$1 &nbsp; &nbsp;# start or stop
        </div> 
        <div>
         <br>
        </div> 
        <div>
         # 判断参数的数量是否大于 1
        </div> 
        <div>
         # $# 为参数的数量，-ge 大于(数字比较)，当 &amp;&amp; 左边的表达式为真时，才会执行 右边的表达式，
        </div> 
        <div>
         # shift 表示左移，shift 2表示左移两个，&amp;4 移到 &amp;2，&amp;3 移到 &amp;1，原来的&amp;1,、&amp;2被丢弃吊了，而 &amp;0 不会被影响；不带参数的相当于 shift 1
        </div> 
        <div>
         [ $# -ge 1 ] &amp;&amp; shift
        </div> 
        <div>
         <br>
        </div> 
        <div>
         other_args="$*" &nbsp; # uncommon, but needed when called from an RPM upgrade action
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Expected: "--skip-networking --skip-grant-tables"
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# They are not checked here, intentionally, as it is the resposibility
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# of the "spec" file author to give correct arguments only.
        </div> 
        <div>
         <br>
        </div> 
        <div>
         case `echo "testing\c"`,`echo -n testing` in
        </div> 
        <div>
         &nbsp; &nbsp; *c*,-n*) echo_n= &nbsp; echo_c= &nbsp; &nbsp; ;;
        </div> 
        <div>
         &nbsp; &nbsp; *c*,*) &nbsp; echo_n=-n echo_c= &nbsp; &nbsp; ;;
        </div> 
        <div>
         &nbsp; &nbsp; *) &nbsp; &nbsp; &nbsp; echo_n= &nbsp; echo_c='\c' ;;
        </div> 
        <div>
         esac
        </div> 
        <div>
         <br>
        </div> 
        <div>
         parse_server_arguments() {
        </div> 
        <div>
         &nbsp; for arg do
        </div> 
        <div>
         &nbsp; &nbsp; case "$arg" in
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; --basedir=*) &nbsp;basedir=`echo "$arg" | sed -e 's/^[^=]*=//'`
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bindir="$basedir/bin"
        </div> 
        <div>
         &nbsp;&nbsp; &nbsp;if test -z "$datadir_set"; then
        </div> 
        <div>
         &nbsp;&nbsp; &nbsp; &nbsp;datadir="$basedir/data"
        </div> 
        <div>
         &nbsp;&nbsp; &nbsp;fi
        </div> 
        <div>
         &nbsp;&nbsp; &nbsp;sbindir="$basedir/sbin"
        </div> 
        <div>
         &nbsp;&nbsp; &nbsp;libexecdir="$basedir/libexec"
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; ;;
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; --datadir=*) &nbsp;datadir=`echo "$arg" | sed -e 's/^[^=]*=//'`
        </div> 
        <div>
         &nbsp;&nbsp; &nbsp;datadir_set=1
        </div> 
        <div>
         ;;
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; --pid-file=*) mysqld_pid_file_path=`echo "$arg" | sed -e 's/^[^=]*=//'` ;;
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; --service-startup-timeout=*) service_startup_timeout=`echo "$arg" | sed -e 's/^[^=]*=//'` ;;
        </div> 
        <div>
         &nbsp; &nbsp; esac
        </div> 
        <div>
         &nbsp; done
        </div> 
        <div>
         }
        </div> 
        <div>
         <br>
        </div> 
        <div>
         wait_for_pid () {
        </div> 
        <div>
         &nbsp; verb="$1" &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # created | removed
        </div> 
        <div>
         &nbsp; pid="$2" &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# process ID of the program operating on the pid-file
        </div> 
        <div>
         &nbsp; pid_file_path="$3" # path to the PID file.
        </div> 
        <div>
         <br>
        </div> 
        <div>
         &nbsp; i=0
        </div> 
        <div>
         &nbsp; avoid_race_condition="by checking again"
        </div> 
        <div>
         <br>
        </div> 
        <div>
         &nbsp; while test $i -ne $service_startup_timeout ; do
        </div> 
        <div>
         <br>
        </div> 
        <div>
         &nbsp; &nbsp; case "$verb" in
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; 'created')
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; # wait for a PID-file to pop into existence.
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; test -s "$pid_file_path" &amp;&amp; i='' &amp;&amp; break
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; ;;
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; 'removed')
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; # wait for this PID-file to disappear
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; test ! -s "$pid_file_path" &amp;&amp; i='' &amp;&amp; break
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; ;;
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; *)
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; echo "wait_for_pid () usage: wait_for_pid created|removed pid pid_file_path"
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; exit 1
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; ;;
        </div> 
        <div>
         &nbsp; &nbsp; esac
        </div> 
        <div>
         <br>
        </div> 
        <div>
         &nbsp; &nbsp; # if server isn't running, then pid-file will never be updated
        </div> 
        <div>
         &nbsp; &nbsp; if test -n "$pid"; then
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; if kill -0 "$pid" 2&gt;/dev/null; then
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; : &nbsp;# the server still runs
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; else
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; # The server may have exited between the last pid-file check and now.
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; if test -n "$avoid_race_condition"; then
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; avoid_race_condition=""
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; continue &nbsp;# Check again.
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; fi
        </div> 
        <div>
         <br>
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; # there's nothing that will affect the file.
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; log_failure_msg "The server quit without updating PID file ($pid_file_path)."
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; return 1 &nbsp;# not waiting any more.
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; fi
        </div> 
        <div>
         &nbsp; &nbsp; fi
        </div> 
        <div>
         <br>
        </div> 
        <div>
         &nbsp; &nbsp; echo $echo_n ".$echo_c"
        </div> 
        <div>
         &nbsp; &nbsp; i=`expr $i + 1`
        </div> 
        <div>
         &nbsp; &nbsp; sleep 1
        </div> 
        <div>
         <br>
        </div> 
        <div>
         &nbsp; done
        </div> 
        <div>
         <br>
        </div> 
        <div>
         &nbsp; if test -z "$i" ; then
        </div> 
        <div>
         &nbsp; &nbsp; log_success_msg
        </div> 
        <div>
         &nbsp; &nbsp; return 0
        </div> 
        <div>
         &nbsp; else
        </div> 
        <div>
         &nbsp; &nbsp; log_failure_msg
        </div> 
        <div>
         &nbsp; &nbsp; return 1
        </div> 
        <div>
         &nbsp; fi
        </div> 
        <div>
         }
        </div> 
        <div>
         <br>
        </div> 
        <div>
         # Get arguments from the my.cnf file,
        </div> 
        <div>
         # the only group, which is read from now on is [mysqld]
        </div> 
        <div>
         # test -x 判断文件是否可执行
        </div> 
        <div>
         if test -x ./bin/my_print_defaults
        </div> 
        <div>
         then
        </div> 
        <div>
         &nbsp; print_defaults="./bin/my_print_defaults"
        </div> 
        <div>
         elif test -x $bindir/my_print_defaults
        </div> 
        <div>
         then
        </div> 
        <div>
         &nbsp; print_defaults="$bindir/my_print_defaults"
        </div> 
        <div>
         elif test -x $bindir/mysql_print_defaults
        </div> 
        <div>
         then
        </div> 
        <div>
         &nbsp; print_defaults="$bindir/mysql_print_defaults"
        </div> 
        <div>
         else
        </div> 
        <div>
         &nbsp; # Try to find basedir in /etc/my.cnf
        </div> 
        <div>
         &nbsp; conf=/etc/my.cnf
        </div> 
        <div>
         &nbsp; print_defaults=
        </div> 
        <div>
         &nbsp; # 判断文件是否可读
        </div> 
        <div>
         &nbsp; if test -r $conf
        </div> 
        <div>
         &nbsp; then
        </div> 
        <div>
         &nbsp; &nbsp; subpat='^[^=]*basedir[^=]*=\(.*\)$'
        </div> 
        <div>
         &nbsp; &nbsp; dirs=`sed -e "/$subpat/!d" -e 's//\1/' $conf`
        </div> 
        <div>
         &nbsp; &nbsp; for d in $dirs
        </div> 
        <div>
         &nbsp; &nbsp; do
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; d=`echo $d | sed -e 's/[&nbsp; ]//g'`
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; if test -x "$d/bin/my_print_defaults"
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; then
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; print_defaults="$d/bin/my_print_defaults"
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; break
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; fi
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; if test -x "$d/bin/mysql_print_defaults"
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; then
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; print_defaults="$d/bin/mysql_print_defaults"
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; break
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; fi
        </div> 
        <div>
         &nbsp; &nbsp; done
        </div> 
        <div>
         &nbsp; fi
        </div> 
        <div>
         <br>
        </div> 
        <div>
         &nbsp; # Hope it's in the PATH ... but I doubt it
        </div> 
        <div>
         &nbsp; # 判断字符串长度是否为 0
        </div> 
        <div>
         &nbsp; test -z "$print_defaults" &amp;&amp; print_defaults="my_print_defaults"
        </div> 
        <div>
         fi
        </div> 
        <div>
         <br>
        </div> 
        <div>
         #
        </div> 
        <div>
         # Read defaults file from 'basedir'. &nbsp; If there is no defaults file there
        </div> 
        <div>
         # check if it's in the old (depricated) place (datadir) and read it from there
        </div> 
        <div>
         #
        </div> 
        <div>
         <br>
        </div> 
        <div>
         extra_args=""
        </div> 
        <div>
         if test -r "$basedir/my.cnf"
        </div> 
        <div>
         then
        </div> 
        <div>
         &nbsp; extra_args="-e $basedir/my.cnf"
        </div> 
        <div>
         else
        </div> 
        <div>
         &nbsp; if test -r "$datadir/my.cnf"
        </div> 
        <div>
         &nbsp; then
        </div> 
        <div>
         &nbsp; &nbsp; extra_args="-e $datadir/my.cnf"
        </div> 
        <div>
         &nbsp; fi
        </div> 
        <div>
         fi
        </div> 
        <div>
         <br>
        </div> 
        <div>
         parse_server_arguments `$print_defaults $extra_args mysqld server mysql_server mysql.server`
        </div> 
        <div>
         <br>
        </div> 
        <div>
         #
        </div> 
        <div>
         # Set pid file if not given
        </div> 
        <div>
         #
        </div> 
        <div>
         if test -z "$mysqld_pid_file_path"
        </div> 
        <div>
         then
        </div> 
        <div>
         &nbsp; mysqld_pid_file_path=$datadir/`hostname`.pid
        </div> 
        <div>
         else
        </div> 
        <div>
         &nbsp; case "$mysqld_pid_file_path" in
        </div> 
        <div>
         &nbsp; &nbsp; /* ) ;;
        </div> 
        <div>
         &nbsp; &nbsp; * ) &nbsp;mysqld_pid_file_path="$datadir/$mysqld_pid_file_path" ;;
        </div> 
        <div>
         &nbsp; esac
        </div> 
        <div>
         fi
        </div> 
        <div>
         <br>
        </div> 
        <div>
         case "$mode" in
        </div> 
        <div>
         &nbsp; 'start')
        </div> 
        <div>
         &nbsp; &nbsp; # Start daemon
        </div> 
        <div>
         <br>
        </div> 
        <div>
         &nbsp; &nbsp; # Safeguard (relative paths, core dumps..)
        </div> 
        <div>
         &nbsp; &nbsp; cd $basedir
        </div> 
        <div>
         <br>
        </div> 
        <div>
         &nbsp; &nbsp; echo $echo_n "Starting MySQL"
        </div> 
        <div>
         &nbsp; &nbsp; if test -x $bindir/mysqld_safe
        </div> 
        <div>
         &nbsp; &nbsp; then
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; # Give extra arguments to mysqld with the my.cnf file. This script
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; # may be overwritten at next upgrade.
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; $bindir/mysqld_safe --datadir="$datadir" --pid-file="$mysqld_pid_file_path" $other_args &gt;/dev/null 2&gt;&amp;1 &amp;
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; wait_for_pid created "$!" "$mysqld_pid_file_path"; return_value=$?
        </div> 
        <div>
         <br>
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; # Make lock for RedHat / SuSE
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; if test -w "$lockdir"
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; then
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; touch "$lock_file_path"
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; fi
        </div> 
        <div>
         <br>
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; exit $return_value
        </div> 
        <div>
         &nbsp; &nbsp; else
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; log_failure_msg "Couldn't find MySQL server ($bindir/mysqld_safe)"
        </div> 
        <div>
         &nbsp; &nbsp; fi
        </div> 
        <div>
         &nbsp; &nbsp; ;;
        </div> 
        <div>
         <br>
        </div> 
        <div>
         &nbsp; 'stop')
        </div> 
        <div>
         &nbsp; &nbsp; # Stop daemon. We use a signal here to avoid having to know the
        </div> 
        <div>
         &nbsp; &nbsp; # root password.
        </div> 
        <div>
         <br>
        </div> 
        <div>
         &nbsp; &nbsp; if test -s "$mysqld_pid_file_path"
        </div> 
        <div>
         &nbsp; &nbsp; then
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; mysqld_pid=`cat "$mysqld_pid_file_path"`
        </div> 
        <div>
         <br>
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; if (kill -0 $mysqld_pid 2&gt;/dev/null)
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; then
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; echo $echo_n "Shutting down MySQL"
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; kill $mysqld_pid
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; # mysqld should remove the pid file when it exits, so wait for it.
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; wait_for_pid removed "$mysqld_pid" "$mysqld_pid_file_path"; return_value=$?
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; else
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; log_failure_msg "MySQL server process #$mysqld_pid is not running!"
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; rm "$mysqld_pid_file_path"
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; fi
        </div> 
        <div>
         <br>
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; # Delete lock for RedHat / SuSE
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; if test -f "$lock_file_path"
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; then
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; rm -f "$lock_file_path"
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; fi
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; exit $return_value
        </div> 
        <div>
         &nbsp; &nbsp; else
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; log_failure_msg "MySQL server PID file could not be found!"
        </div> 
        <div>
         &nbsp; &nbsp; fi
        </div> 
        <div>
         &nbsp; &nbsp; ;;
        </div> 
        <div>
         <br>
        </div> 
        <div>
         &nbsp; 'restart')
        </div> 
        <div>
         &nbsp; &nbsp; # Stop the service and regardless of whether it was
        </div> 
        <div>
         &nbsp; &nbsp; # running or not, start it again.
        </div> 
        <div>
         &nbsp; &nbsp; if $0 stop &nbsp;$other_args; then
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; $0 start $other_args
        </div> 
        <div>
         &nbsp; &nbsp; else
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; log_failure_msg "Failed to stop running server, so refusing to try to start."
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; exit 1
        </div> 
        <div>
         &nbsp; &nbsp; fi
        </div> 
        <div>
         &nbsp; &nbsp; ;;
        </div> 
        <div>
         <br>
        </div> 
        <div>
         &nbsp; 'reload'|'force-reload')
        </div> 
        <div>
         &nbsp; &nbsp; if test -s "$mysqld_pid_file_path" ; then
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; read mysqld_pid &lt; &nbsp;"$mysqld_pid_file_path"
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; kill -HUP $mysqld_pid &amp;&amp; log_success_msg "Reloading service MySQL"
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; touch "$mysqld_pid_file_path"
        </div> 
        <div>
         &nbsp; &nbsp; else
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; log_failure_msg "MySQL PID file could not be found!"
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; exit 1
        </div> 
        <div>
         &nbsp; &nbsp; fi
        </div> 
        <div>
         &nbsp; &nbsp; ;;
        </div> 
        <div>
         &nbsp; 'status')
        </div> 
        <div>
         &nbsp; &nbsp; # First, check to see if pid file exists
        </div> 
        <div>
         &nbsp; &nbsp; if test -s "$mysqld_pid_file_path" ; then
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; read mysqld_pid &lt; "$mysqld_pid_file_path"
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; if kill -0 $mysqld_pid 2&gt;/dev/null ; then
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; log_success_msg "MySQL running ($mysqld_pid)"
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; exit 0
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; else
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; log_failure_msg "MySQL is not running, but PID file exists"
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; exit 1
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; fi
        </div> 
        <div>
         &nbsp; &nbsp; else
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; # Try to find appropriate mysqld process
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; mysqld_pid=`pidof $libexecdir/mysqld`
        </div> 
        <div>
         <br>
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; # test if multiple pids exist
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; pid_count=`echo $mysqld_pid | wc -w`
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; if test $pid_count -gt 1 ; then
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; log_failure_msg "Multiple MySQL running but PID file could not be found ($mysqld_pid)"
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; exit 5
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; elif test -z $mysqld_pid ; then
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; if test -f "$lock_file_path" ; then
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; log_failure_msg "MySQL is not running, but lock file ($lock_file_path) exists"
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; exit 2
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; fi
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; log_failure_msg "MySQL is not running"
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; exit 3
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; else
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; log_failure_msg "MySQL is running but PID file could not be found"
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; &nbsp; exit 4
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; fi
        </div> 
        <div>
         &nbsp; &nbsp; fi
        </div> 
        <div>
         &nbsp; &nbsp; ;;
        </div> 
        <div>
         &nbsp; &nbsp; *)
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; # usage
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; basename=`basename "$0"`
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; echo "Usage: $basename &nbsp;{start|stop|restart|reload|force-reload|status} &nbsp;[ MySQL server options ]"
        </div> 
        <div>
         &nbsp; &nbsp; &nbsp; exit 1
        </div> 
        <div>
         &nbsp; &nbsp; ;;
        </div> 
        <div>
         esac
        </div> 
        <div>
         <br>
        </div> 
        <div>
         exit 0
        </div> 
       </div> 
       <div>
        <br>
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
