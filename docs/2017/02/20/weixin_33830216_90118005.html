<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>U-Boot 启动过程笔记 « NotBeCN</title>
  <meta name="description" content="                 [1] 规则           &nbsp; &nbsp; 目标: 依赖           &nbsp; &nbsp; [TAB]命令(命令名 参数 依赖 目标)           &nbsp; &nbsp;           [2] 难点           &nbsp...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/02/20/weixin_33830216_90118005.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">U-Boot 启动过程笔记</h1>
    <p class="post-meta">Feb 20, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <div>
    [1] 规则
   </div> 
   <div>
    &nbsp; &nbsp; 目标: 依赖
   </div> 
   <div>
    &nbsp; &nbsp; [TAB]命令(命令名 参数 依赖 目标)
   </div> 
   <div>
    &nbsp; &nbsp;
   </div> 
   <div>
    [2] 难点
   </div> 
   <div>
    &nbsp; &nbsp; 1. 自动变量
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;作用域在当前规则中, Make给它自动赋值
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;$@ &nbsp; 目标
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 注意: 每一条规则只有一个目标
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; test test.o: test.c
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [TAB]$(CC) $(CFLAGS) $&lt; -o $@
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 等价于
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; test: test.c
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [TAB]$(CC) $(CFLAGS) $&lt; -o $@
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; test.o: test.c
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [TAB]$(CC) $(CFLAGS) $&lt; -o $@
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;$&lt; &nbsp; 第一个依赖
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;$^ &nbsp; 所有依赖
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp;2. 模式规则
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; 目标和依赖使用%匹配符的规则
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; %.o: %.c
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; [TAB]$(CC) $(CFLAGS) $&lt; -o $@
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp;3. 自动推倒(自动找规则生成目标)
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; (1) 寻找生成目标的显示规则(自己写的非模式规则)
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; (2) 寻找生成目标的模式规则
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; (3) 寻找生成目标的隐式规则(make程序默认的模式规则)
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    [3] ARM工程
   </div> 
   <div>
    &nbsp; &nbsp; 1. 目录
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;board &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 跟主板相关的配置文件和源代码(主板的初始化代码)
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;common &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;主程序
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;cpu &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cpu的启动代码
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;drivers &nbsp; &nbsp; &nbsp; &nbsp; 通用设备驱动
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;include &nbsp; &nbsp; &nbsp; &nbsp; 头文件
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;lib &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 库(通用算法)的源代码
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; 2. 源文件
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;*.S &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 汇编源码
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;*.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; C源码
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;*.h &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 头文件
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;config.mk &nbsp; &nbsp; &nbsp; 编译命令和编译参数
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;Makefile &nbsp; &nbsp; &nbsp; &nbsp;make脚本
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;map.lds &nbsp; &nbsp; &nbsp; &nbsp; 链接脚本
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; 3. 编译
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;$ make
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; 4. 目标文件
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;fs4412.bin &nbsp; &nbsp; &nbsp;binary格式的可执行文件
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;fs4412 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ELF格式的可执行文件
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;fs4412.dis &nbsp; &nbsp; &nbsp;反汇编文件
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;fs4412.map &nbsp; &nbsp; &nbsp;详细符合表文件(链接过程文件)
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;System.map &nbsp; &nbsp; &nbsp;符合表文件
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; 5. 编译原理
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;1. 主Makefile
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; OBJS &nbsp; &nbsp; &nbsp; &nbsp; 启动代码编译出来的目标文件(*.o)
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LIBS &nbsp; &nbsp; &nbsp; &nbsp; 非启动代码编译出来的静态库(lib*.a)(多个目标文件的打包)
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;2. 子Makefile
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LIB &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;子目录下的源代码编译出来的目标文件，打包成的静态库文件
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; START &nbsp; &nbsp; &nbsp; &nbsp;启动代码编译出来的目标文件
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SOBJS &nbsp; &nbsp; &nbsp; &nbsp;汇编代码编译出来的目标文件
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; COBJS &nbsp; &nbsp; &nbsp; &nbsp;C代码编译出来的目标文件
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; 6. 如何添加模块到工程?
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;1. 添加源代码
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;2. 添加子目录
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;3. 添加源代码到子目录
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;4. 给子目录添加Makefile
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 拷贝别的子目录下的Makefile，修改如下变量的值:
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LIB &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;子目录下的源代码编译出来的目标文件，打包成的静态库文件
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; START &nbsp; &nbsp; &nbsp; &nbsp;启动代码编译出来的目标文件
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SOBJS &nbsp; &nbsp; &nbsp; &nbsp;汇编代码编译出来的目标文件
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; COBJS &nbsp; &nbsp; &nbsp; &nbsp;C代码编译出来的目标文件
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;5. 修改顶层目录下的Makefile, 添加新的子目录生成的目标到工程:
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; OBJS &nbsp; &nbsp; &nbsp; &nbsp; 启动代码编译出来的目标文件(*.o)
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LIBS &nbsp; &nbsp; &nbsp; &nbsp; 非启动代码编译出来的静态库(lib*.a)(多个目标文件的打包)
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    [4] u-boot工程
   </div> 
   <div>
    &nbsp; &nbsp; 1. 目录
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;cpu(cpu/cpu名称(arm_cortexa8)/...) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;CPU的启动代码
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;board(board/芯片厂家(samsung)/主板名(fsc100)/... &nbsp;启动代码中需要使用的核心硬件的驱动(内存初始化、flash的读驱动、soc中部分硬件的初始化)
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;common &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;主程序和命令实现代码
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;lib_arm(lib_generic) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;某个架构的CPU需要使用的公共代码(校验算法CRC 压缩算法 标准C库)
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;net &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 网络协议代码
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;drivers &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 通用设备驱动
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;fs &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;文件系统实现代码
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;disk &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;磁盘分区驱动
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;tools &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 工具
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;doc &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 文档(作者写的)
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; 2. 源文件
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;Makefile &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;make脚本文件
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;config.mk &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 编译命令和编译参数
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;README &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;整个工程的说明
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;mkconfig &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;工程配置的shell脚本
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;rules.mk &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;产生Makefile规则(hello.o: hello.c hello.h stdio.h)
   </div> 
   <div>
    &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; 3. 特点
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;1. 支持多个CPU
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;2. 支持多个主板
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;3. 支持非常多的设备驱动
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;4. 工程管理和代码比较混乱
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;任何一款产品，都不可能用到u-boot提供的所有代码, 所以编译过程应该分成:
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;1. 选择需要的源代码--配置
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;2. 编译需要的源代码--编译
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; 4. 编译
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;1. 配置
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ make fsc100(主板名)_config
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;2. 编译
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ make
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;3. 清除编译
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ make clean
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;4. 清除配置
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ make clobber
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; 5. 目标文件
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;u-boot &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ELF格式的可执行程序
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;u-boot.bin &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;binary格式的可执行程序
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;u-boot.map &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;详细符号表(有链接过程)
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;System.map &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;符号表文件
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; 6. 配置原理
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;1. 过程
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 《u-boot配置流程图.bmp》 注意：2010版本的u-boot没有boards.cfg
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;2. 结果
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; include/config.mk &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;选择源代码目录
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; include/config.h &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 选取目录下的源代码文件和从选取的源代码文件中选取一部分源代码 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#include &lt;configs/fsc100.h&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 主板的配置文件(通过宏定义配置)
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #include &lt;config_cmd_default.h&gt; &nbsp; &nbsp; &nbsp;通过里面的宏定义控制命令是否编译到最终的u-boot可执行文件
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (config_cmd_all.h) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; u-boot支持的所有命令的配置项(宏定义)
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;3. 原理 &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1. $ make fsc100_config命令的实现原理
   </div> 
   <div> 
    <div>
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;根据配置命令($ make fsc100_config)，来看主Makefile，即在主Makefile中寻找目标为fsc100_config规则:
    </div> 
    <div style="color:rgb(51,51,51);"> 
     <div>
      <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SRCTREE &nbsp; &nbsp; := $(CURDIR)</span>
     </div> 
     <div>
      <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;...</span>
     </div> 
     <div>
      <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;MKCONFIG &nbsp; &nbsp;:= $(SRCTREE)/mkconfig</span>
     </div> 
     <div>
      <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;...</span>
     </div> 
     <div>
      <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;fsc100_config: &nbsp;unconfig</span>
     </div> 
     <div>
      <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[tab]@$(MKCONFIG) $(@:_config=) arm arm_cortexa8 fsc100 samsung s5pc1xx</span>
     </div> 
     <div>
      <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mkconfig &nbsp;fsc100 arm arm_cortexa8 fsc100 samsung s5pc1xx</span>
     </div> 
    </div> 
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div> 
    <div>
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2. 选择目录
    </div> 
    <div style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;color:rgb(51,51,51);"> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;include include/config.mk
     </div> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(....
     </div> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CPU = arm-cortex_a8(目录名)
     </div> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )
     </div> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ....
     </div> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;LIBS += cpu/$(CPU)/lib$(CPU).a &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;选择arm-cortex_a8 cpu目录
     </div> 
     <div>
      <br>
     </div> 
    </div> 
    <div>
     <br>
    </div> 
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3. 选择目录中的源代码文件
   </div> 
   <div> 
    <div>
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;例: 在include/configs/fsc100.h定义:
    </div> 
    <div style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;color:rgb(51,51,51);"> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#define &nbsp; CONFIG_DRIVER_DM9000 1 &nbsp; &nbsp; &nbsp;如果宏定义不存在, 就不会被转换成相应的Makefile变量
     </div> 
     <div>
      <br>
     </div> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;在make时, 它会被转换成Makefile变量，存放在include/autoconf.mk中:
     </div> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;CONFIG_DRIVER_DM9000 = y
     </div> 
     <div>
      <br>
     </div> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;在主Makefile中，会包含include/autoconf.mk，因此在子Makefile中也可以见到CONFIG_DRIVER_DM9000变量
     </div> 
     <div>
      <br>
     </div> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;在driver/net/Makefile中，会按照如下方式使用:
     </div> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;LIB = libnet.a
     </div> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;...
     </div> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;...
     </div> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;COBJS-$(CONFIG_DRIVER_DM9000) += dm9000x.o
     </div> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;...
     </div> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;...
     </div> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;COBJS = $(COBJS-y)
     </div> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;...
     </div> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;OBJS = $(COBJS)
     </div> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;...
     </div> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(LIB): .depend $(OBJS)
     </div> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[TAB]$(AR) $(ARFLAGS) $@ $(OBJS)
     </div> 
     <div>
      <br>
     </div> 
    </div> 
    <div>
     <br>
    </div> 
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;4. 选取文件中的部分源码(条件编译)
   </div> 
   <div> 
    <div>
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 例: 在include/configs/fsc100.h头文件中，存在如下宏定义:
    </div> 
    <div style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;color:rgb(51,51,51);"> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #define CONFIG_CMD_PING 1 &nbsp; &nbsp; &nbsp; &nbsp;(注意: 命令配置项最好放入include/config_cmd_default.h)
     </div> 
     <div>
      <br>
     </div> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 在common/cmd_net.c文件中，存在如下代码:
     </div> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #if defined(CONFIG_CMD_PING)
     </div> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ...(ping命令实现代码)
     </div> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #endif
     </div> 
     <div>
      <br>
     </div> 
    </div> 
    <div>
     <br>
    </div> 
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5. 给源代码提供数据(宏替换)
   </div> 
   <div> 
    <div>
     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 例: 在include/configs/fsc100.h头文件中，存在如下宏定义:
    </div> 
    <div style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;color:rgb(51,51,51);"> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #define CONFIG_DM9000_BASE 0X88000000
     </div> 
     <div>
      <br>
     </div> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 在driver/net/dm9000x.c文件中会使用这个宏定义:
     </div> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ...
     </div> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dm9000_probe(void)
     </div> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {
     </div> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;...
     </div> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;printf("dm9000 i/o: 0x%x, id: 0x%x \n", CONFIG_DM9000_BASE, id_val);
     </div> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;...
     </div> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
     </div> 
     <div>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ...
     </div> 
     <div>
      <br>
     </div> 
    </div> 
    <div>
     <br>
    </div> 
   </div> 
   <div>
    &nbsp;7. 编译原理
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;1. 总体编译过程
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 见《u-boot编译过程图2013.01.bmp》
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;2. 顶层目录下的Makefile
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; OBJS &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;启动代码编译出来的目标文件
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LIBS &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;非启动代码编译出来的目标文件
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;3. 子目录下的Makefile
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LIB &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 最终生成的lib*.a文件(只有非启动代码会被打包到这个文件)
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; COBJS &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *.C编译出来的目标文件
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SOBJS &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *.S编译出来的目标文件
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    8. 如何添加模块到工程?
   </div> 
   <div> 
    <div>
     # 包含编译命令和编译参数
    </div> 
    <div style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;color:rgb(51,51,51);">
      include $(TOPDIR)/config.mk
    </div> 
    <div>
     <br>
    </div> 
   </div> 
   <div> 
    <div>
     # 总目标(非启动代码)
    </div> 
    <div style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;color:rgb(51,51,51);"> 
     <div>
      LIB := $(obj)libuart.a
     </div> 
     <div>
      <br>
     </div> 
     <div>
      # COBJS-$(CONFIG_USB_TTY) += usbtty.o
     </div> 
    </div> 
    <div>
     <br>
    </div> 
   </div> 
   <div> 
    <div>
     # C语言源代码编译出来的目标文件
    </div> 
    <div style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;color:rgb(51,51,51);">
      COBJS := uart.o &nbsp;#$(sort $(COBJS-y))
    </div> 
    <div>
     <br>
    </div> 
   </div> 
   <div> 
    <div>
     # 汇编代码编译出来的目标文件
    </div> 
    <div style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;color:rgb(51,51,51);">
      #SOBJS := ...
    </div> 
    <div>
     <br>
    </div> 
   </div> 
   <div> 
    <div>
     # 源代码文件，用在rules.mk中
    </div> 
    <div style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;color:rgb(51,51,51);">
      SRCS := $(COBJS:.o=.c)
    </div> 
    <div>
     <br>
    </div> 
   </div> 
   <div> 
    <div>
     # 等价于COBJS
    </div> 
    <div style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;color:rgb(51,51,51);">
      OBJS := $(addprefix $(obj),$(COBJS)) # $(addprefix $(obj),$(SOBJS))
    </div> 
    <div>
     <br>
    </div> 
   </div> 
   <div> 
    <div>
     # 防止LIB变量中有多个目标
    </div> 
    <div style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;color:rgb(51,51,51);">
      all: $(LIB)
    </div> 
    <div>
     <br>
    </div> 
   </div> 
   <div> 
    <div>
     # 将目标文件打包成静态库
    </div> 
    <div style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;color:rgb(51,51,51);"> 
     <div>
      $(LIB): $(obj).depend $(OBJS)
     </div> 
     <div>
      &nbsp;$(AR) $(ARFLAGS) $@ $(OBJS)
     </div> 
    </div> 
    <div>
     <br>
    </div> 
   </div> 
   <div>
    #########################################################################
   </div> 
   <div>
    <br>
   </div> 
   <div>
    # 产生.depend文件
   </div> 
   <div>
    # defines $(obj).depend target
   </div> 
   <div>
    include $(SRCTREE)/rules.mk
   </div> 
   <div>
    <br>
   </div> 
   <div>
    # 包含.depend文件(*.o : *.c *.h 规则)
   </div> 
   <div>
    sinclude $(obj).depend
   </div> 
   <div>
    <br>
   </div> 
   <div>
    #########################################################################
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; 1. 添加源代码
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;2. 添加子目录
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;3. 添加源代码到子目录
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;4. 给子目录添加Makefile
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 拷贝别的子目录下的Makefile，修改如下变量的值:
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LIB &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;子目录下的源代码编译出来的目标文件，打包成的静态库文件
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; START &nbsp; &nbsp; &nbsp; &nbsp;启动代码编译出来的目标文件
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SOBJS &nbsp; &nbsp; &nbsp; &nbsp;汇编代码编译出来的目标文件
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; COBJS &nbsp; &nbsp; &nbsp; &nbsp;C代码编译出来的目标文件
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;5. 修改顶层目录下的Makefile, 添加新的子目录生成的目标到工程:
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; OBJS &nbsp; &nbsp; &nbsp; &nbsp; 启动代码编译出来的目标文件(*.o)
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;注意: 有些版本，不支持将启动代码放置的cpu以外目录，这时需要修改如下规则：
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(OBJS): depend
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# $(MAKE) -C cpu/$(CPU) $(if $(REMOTE_BUILD),$@,$(notdir $@))
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $(MAKE) -C $(dir $(subst $(obj),,$@)) $(if $(REMOTE_BUILD),$@,$(notdir $@))
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # $(dir $(subst $(obj),,$@))
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $(dir A) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;求A的路径，如: A是"drivers/uart/uart.o" 路径为"drivers/uart"
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $(subst $(obj),,$@) &nbsp; &nbsp; &nbsp; &nbsp; obj指定目标代码的路径(当源代码和目标代码不放在同一目录时)
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 将@中的每个值的$(obj)部分，替换成空
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # $(if $(REMOTE_BUILD),$@,$(notdir $@)) 当REMOTE_BUILD变量值非空时，整个函数的值为@变量的值
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.... &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 空时, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $(notdir $@)的结果
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LIBS &nbsp; &nbsp; &nbsp; &nbsp; 非启动代码编译出来的静态库(lib*.a)(多个目标文件的打包)
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;注意:
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1. 如何控制源代码文件是否编译到u-boot?
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2. 如何空源代码文件的一部分编译到u-boot？
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3. 如何为源代码文件提供数据?
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 开关或数据都必须在include/configs/主板名.h
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; 9. 源代码阅读软件
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;vi(编辑或查看) + ctags(搜索定义)
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;1. 建立ctags索引文件
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ ctags -R &nbsp; &nbsp; (在工程的顶层目录下执行)
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;2. 查找定义
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 把光标移动到要查找定义的标识符，然后按ctrl + ]
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;3. 回退
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ctrl + O
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;sourceinside
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;先建立工程, 添加所有文件到工程
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; 10. 源代码分析
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;1. 自启动
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.1 核心硬件(初始化或驱动)
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.1.1 CPU(A8)
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 异常中断向量表(包含配置异常中断向量表的位置)
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cpu/arm-cortex_A8 35 - 56行
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (ALU + 控制器)传统的CPU &nbsp; &nbsp; 关闭中断, 进入SVC模式
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cpu/arm-cortex_A8 106 - 109行
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MMU 和 cache &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;关闭&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
   </div> 
   <div> 
    <div style="color:rgb(51,51,51);"> 
     <div>
      <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;">cpu/arm_cortexa8/start.S</span>
     </div> 
     <div>
      <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;">227 &nbsp; &nbsp; /*</span>
     </div> 
     <div>
      <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;">228 &nbsp; &nbsp; &nbsp;* 关闭tlb和icache</span>
     </div> 
     <div>
      <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;">229 &nbsp; &nbsp; &nbsp;*/</span>
     </div> 
     <div>
      <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;">230 &nbsp; &nbsp; mov r0, #0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;@ set up for MCR</span>
     </div> 
     <div>
      <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;">231 &nbsp; &nbsp; mcr p15, 0, r0, c8, c7, 0 &nbsp; @ invalidate TLBs</span>
     </div> 
     <div>
      <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;">232 &nbsp; &nbsp; mcr p15, 0, r0, c7, c5, 0 &nbsp; @ invalidate icache</span>
     </div> 
     <div>
      <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;">233</span>
     </div> 
     <div>
      <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;">234 &nbsp; &nbsp; /*</span>
     </div> 
     <div>
      <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;">235 &nbsp; &nbsp; &nbsp;* 关闭mmu和cache</span>
     </div> 
     <div>
      <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;">236 &nbsp; &nbsp; &nbsp;*/</span>
     </div> 
     <div>
      <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;">237 &nbsp; &nbsp; mrc p15, 0, r0, c1, c0, 0</span>
     </div> 
     <div>
      <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;">238 &nbsp; &nbsp; bic r0, r0, #0x00002000 @ clear bits 13 (--V-)</span>
     </div> 
     <div>
      <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;">239 &nbsp; &nbsp; bic r0, r0, #0x00000007 @ clear bits 2:0 (-CAM)</span>
     </div> 
     <div>
      <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;">240 &nbsp; &nbsp; orr r0, r0, #0x00000002 @ set bit 1 (--A-) Align</span>
     </div> 
     <div>
      <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;">241 &nbsp; &nbsp; orr r0, r0, #0x00000800 @ set bit 12 (Z---) BTB</span>
     </div> 
     <div>
      <span style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;">242 &nbsp; &nbsp; mcr p15, 0, r0, c1, c0, 0</span>
     </div> 
    </div> 
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.1.2 SOC
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 如果有看门狗 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;关闭或喂狗
   </div> 
   <div> 
    <div>
     &nbsp;board/samsung/fsc100/lowlevel_init.S
    </div> 
    <div style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;color:rgb(51,51,51);"> 
     <div>
      &nbsp;57 &nbsp; &nbsp; /* 关闭看门狗 */
     </div> 
     <div>
      &nbsp;58 &nbsp; &nbsp; ldr r0, =S5PC100_WATCHDOG_BASE &nbsp; &nbsp; &nbsp;@0xEA200000
     </div> 
     <div>
      &nbsp;59 &nbsp; &nbsp; orr r0, r0, #0x0
     </div> 
     <div>
      &nbsp;60 &nbsp; &nbsp; str r5, [r0]
     </div> 
     <div>
      <br>
     </div> 
    </div> 
    <div>
     <br>
    </div> 
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 如果需要加快代码的执行速度 &nbsp;初始化PLL
   </div> 
   <div> 
    <div>
     board/samsung/fsc100/lowlevel_init.S
    </div> 
    <div style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;color:rgb(51,51,51);">
      96 &nbsp; &nbsp; bl &nbsp;system_clock_init
    </div> 
    <div>
     <br>
    </div> 
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UART &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;初始化(驱动)发送即可
   </div> 
   <div> 
    <div>
     board/samsung/fsc100/lowlevel_init.S
    </div> 
    <div style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;color:rgb(51,51,51);">
      101 &nbsp; &nbsp; bl &nbsp;uart_asm_init
    </div> 
    <div>
     <br>
    </div> 
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 如果需要用到DMA &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 初始化(驱动)DMA
   </div> 
   <div> 
    <div>
     board/samsung/fsc100/lowlevel_init.S
    </div> 
    <div style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;color:rgb(51,51,51);">
      104 &nbsp; &nbsp; bl &nbsp;dma_init
    </div> 
    <div>
     <br>
    </div> 
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 如果从Nandflash启动 &nbsp; &nbsp; &nbsp; &nbsp; 初始化nandflash控制器管脚
   </div> 
   <div> 
    <div>
     board/samsung/fsc100/lowlevel_init.S &nbsp;
    </div> 
    <div style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;color:rgb(51,51,51);"> 
     <div>
      106 &nbsp; &nbsp; bl &nbsp;nand_pin_mux
     </div> 
     <div>
      108 &nbsp; &nbsp; bl &nbsp;nand_asm_init
     </div> 
    </div> 
    <div>
     <br>
    </div> 
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.1.3 BOARD
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 初始化DDR
   </div> 
   <div> 
    <div>
     board/samsung/fsc100/lowlevel_init.S &nbsp;
    </div> 
    <div style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;color:rgb(51,51,51);">
      118 &nbsp; &nbsp; bl &nbsp;mem_ctrl_asm_init
    </div> 
    <div>
     <br>
    </div> 
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 如果从Nandflash启动 &nbsp; &nbsp; &nbsp; &nbsp; 驱动nandflash的读
   </div> 
   <div> 
    <div>
     cpu/arm_cortexa8/start.S
    </div> 
    <div style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;color:rgb(51,51,51);"> 
     <div>
      158 ldr sp, =(0x22000000)
     </div> 
     <div>
      159 bl copy_uboot_to_ram
     </div> 
    </div> 
    <div>
     <br>
    </div> 
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.2 软件(创建C语言执行环境)
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.2.1 自拷贝到DDR
   </div> 
   <div> 
    <div>
     cpu/arm_cortexa8/start.S
    </div> 
    <div style="font-family:Monaco, Menlo, Consolas, 'Courier New', monospace;color:rgb(51,51,51);"> 
     <div>
      158 ldr sp, =(0x22000000)
     </div> 
     <div>
      159 bl copy_uboot_to_ram
     </div> 
    </div> 
    <div>
     <br>
    </div> 
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.2.2 栈内存分配(需要给SVC、abort、undefined instruction 三个模式分配栈空间)
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.2.3 .BSS段清空
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.2.4 跳转到内存运行
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.2.5 预留内存给malloc函数
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.2.6 预留内存给全局数据结构
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;2. 命令执行
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2.1 接收命令输入
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2.2 解析命令
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2.3 执行命令
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 协议栈(网络协议栈(net)/USB协议栈(drivers/usb)/...)
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 文件系统(fs)
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 分区驱动(disk)
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 硬件驱动(drivers)
   </div> 
   <div>
    <br>
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp;3. OS启动(bootm)
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 建立linux系统的启动环境:
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3.1 关闭中断, 进入SVC
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3.2 关闭MMU和cache
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3.3 R0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; R1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; arch number(mach type id) 主板id
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; R2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 内核参数指针(atags list)
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3.4 传参给内核
   </div> 
   <div>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3.5 跳转到内核的运行地址去启动
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
