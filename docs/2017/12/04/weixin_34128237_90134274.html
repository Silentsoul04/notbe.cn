<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>如何让你的程序运行的更快(1)---String VS StringBuffer « NotBeCN</title>
  <meta name="description" content="             最开始给这篇文章起名的时候准备叫“如何让你的程序运行的更快(1)之String StringBuffer谁与争锋！”，后来想想武侠的味道太浓了，有吸引眼球骗取点击率的嫌疑，还是简单一点的好，毕竟这是技术不是文学，需要严谨。你说呢？^+^ 在总体的框架设计确定以后，多注意一些编程细节，积少...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/12/04/weixin_34128237_90134274.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">如何让你的程序运行的更快(1)---String VS StringBuffer</h1>
    <p class="post-meta">Dec 4, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font>最开始给这篇文章起名的时候准备叫“<strong><font color="#0000ff">如何让你的程序运行的更快(1)之String StringBuffer谁与争锋！</font></strong>”，后来想想武侠的味道太浓了，有吸引眼球骗取点击率的嫌疑，还是简单一点的好，毕竟这是技术不是文学，需要严谨。你说呢？^+^<br><br> 在总体的框架设计确定以后，多注意一些编程细节，积少成多，可以获得更佳的性能，让程序跑的更快！</font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font>前些天同事优化代码时提到了String和StringBuffer。仔细想想，发现自己也就是知道个大概，所以查了 一下资料。文章中有错误的地方你可一定要告诉我啊，呵呵^+^<br></font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font><font><font color="#0000ff">一.介绍<br><br></font>String：非可变类(immutable)，一旦创建就不能再被改变。<br> StringBuffer：可变类，创建之后可以被改变。</font></font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font>何谓非可变类？<br> 简单说，非可变类的实例是不能被修改的，每个实例中包含的信息都必须在该实例创建的时候就提供出来 ，并且在对象的整个生存周期内固定不变。</font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font>非可变类好处：状态单一，对象简单，便于维护；通常是线程安全的；用户可以共享非可变对象，甚至可 以共享它们的内部信息</font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><br><font><font><font color="#0000ff">二.创建字符串<br></font><br> 两种方法：<br> 1.&nbsp;String s1 = "hello";<br> 2.&nbsp;String s2 = new String("hello");</font></font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font>哪种方式性能更好？<br> 例1：<br></font></p> 
   <div style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;border-width:1px;border-style:solid;"> 
    <font><font><span style="color:rgb(0,128,128);">&nbsp;1</span>&nbsp;<span style="color:rgb(0,128,0);">//</span><span style="color:rgb(0,128,0);">create&nbsp;String&nbsp;without&nbsp;"new"&nbsp;keyword</span></font>&nbsp;</font>
    <span style="color:rgb(0,128,0);"><br></span>
    <font><font><span style="color:rgb(0,128,128);">&nbsp;2</span>&nbsp;<span style="color:rgb(0,128,0);"></span><span style="color:rgb(0,0,255);">long</span><span style="color:rgb(0,0,0);">&nbsp;startTime1&nbsp;</span><span style="color:rgb(0,0,0);">=</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">&nbsp;System.currentTimeMillis();<br></span><span style="color:rgb(0,128,128);">&nbsp;3</span>&nbsp;<span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,0,255);">for</span><span style="color:rgb(0,0,0);">(</span><span style="color:rgb(0,0,255);">int</span><span style="color:rgb(0,0,0);">&nbsp;i</span><span style="color:rgb(0,0,0);">=</span><span style="color:rgb(0,0,0);">0</span><span style="color:rgb(0,0,0);">;i</span><span style="color:rgb(0,0,0);">&lt;</span><span style="color:rgb(0,0,0);">100000</span><span style="color:rgb(0,0,0);">;i</span><span style="color:rgb(0,0,0);">++</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">){<br></span><span style="color:rgb(0,128,128);">&nbsp;4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;<span style="color:rgb(0,0,0);">&nbsp;String&nbsp;str1&nbsp;</span>&nbsp;<span style="color:rgb(0,0,0);">=</span>&nbsp;<span style="color:rgb(0,0,0);">&nbsp;</span>&nbsp;<span style="color:rgb(0,0,0);">"</span>&nbsp;<span style="color:rgb(0,0,0);">hello</span>&nbsp;<span style="color:rgb(0,0,0);">"</span>&nbsp;</font></font>
    <font><font><span style="color:rgb(0,0,0);">;<br></span><span style="color:rgb(0,128,128);">&nbsp;5</span>&nbsp;&nbsp;</font></font>
    <font><font><span style="color:rgb(0,0,0);">}<br></span><span style="color:rgb(0,128,128);">&nbsp;6</span>&nbsp;<span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,0,255);">long</span><span style="color:rgb(0,0,0);">&nbsp;endTime1&nbsp;</span><span style="color:rgb(0,0,0);">=</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">&nbsp;System.currentTimeMillis();<br></span><span style="color:rgb(0,128,128);">&nbsp;7</span>&nbsp;<span style="color:rgb(0,0,0);">System.out.println(</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">create&nbsp;String&nbsp;without&nbsp;'new'&nbsp;keyword&nbsp;:&nbsp;</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">&nbsp;</span><span style="color:rgb(0,0,0);">+</span><span style="color:rgb(0,0,0);">&nbsp;(endTime1&nbsp;</span><span style="color:rgb(0,0,0);">-</span><span style="color:rgb(0,0,0);">&nbsp;startTime1)&nbsp;</span><span style="color:rgb(0,0,0);">+</span><span style="color:rgb(0,0,0);">&nbsp;</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">&nbsp;milli&nbsp;seconds</span><span style="color:rgb(0,0,0);">"</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">&nbsp;);<br></span><span style="color:rgb(0,128,128);">&nbsp;8</span>&nbsp;&nbsp;</font></font>
    <font><font><span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br></span><span style="color:rgb(0,128,128);">&nbsp;9</span>&nbsp;<span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,128,0);">//</span><span style="color:rgb(0,128,0);">create&nbsp;String&nbsp;with&nbsp;'new'&nbsp;keyword&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></font>&nbsp;</font>
    <span style="color:rgb(0,128,0);"><br></span>
    <font><font><span style="color:rgb(0,128,128);">10</span>&nbsp;<span style="color:rgb(0,128,0);"></span><span style="color:rgb(0,0,255);">long</span><span style="color:rgb(0,0,0);">&nbsp;startTime2&nbsp;</span><span style="color:rgb(0,0,0);">=</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">&nbsp;System.currentTimeMillis();<br></span><span style="color:rgb(0,128,128);">11</span>&nbsp;<span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,0,255);">for</span><span style="color:rgb(0,0,0);">(</span><span style="color:rgb(0,0,255);">int</span><span style="color:rgb(0,0,0);">&nbsp;i</span><span style="color:rgb(0,0,0);">=</span><span style="color:rgb(0,0,0);">0</span><span style="color:rgb(0,0,0);">;i</span><span style="color:rgb(0,0,0);">&lt;</span><span style="color:rgb(0,0,0);">100000</span><span style="color:rgb(0,0,0);">;i</span><span style="color:rgb(0,0,0);">++</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">){<br></span><span style="color:rgb(0,128,128);">12</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(0,0,0);">String&nbsp;str2&nbsp;</span><span style="color:rgb(0,0,0);">=</span><span style="color:rgb(0,0,0);">&nbsp;</span><span style="color:rgb(0,0,255);">new</span><span style="color:rgb(0,0,0);">&nbsp;String(</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">hello</span><span style="color:rgb(0,0,0);">"</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">);<br></span><span style="color:rgb(0,128,128);">13</span>&nbsp;&nbsp;</font></font>
    <font><font><span style="color:rgb(0,0,0);">}<br></span><span style="color:rgb(0,128,128);">14</span>&nbsp;<span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,0,255);">long</span><span style="color:rgb(0,0,0);">&nbsp;endTime2&nbsp;</span><span style="color:rgb(0,0,0);">=</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">&nbsp;System.currentTimeMillis();<br></span><span style="color:rgb(0,128,128);">15</span>&nbsp;<span style="color:rgb(0,0,0);">System.out.println(</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">create&nbsp;String&nbsp;with&nbsp;'new'&nbsp;keyword&nbsp;:&nbsp;</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">&nbsp;</span><span style="color:rgb(0,0,0);">+</span><span style="color:rgb(0,0,0);">&nbsp;(endTime2&nbsp;</span><span style="color:rgb(0,0,0);">-</span><span style="color:rgb(0,0,0);">&nbsp;startTime2)&nbsp;</span><span style="color:rgb(0,0,0);">+</span><span style="color:rgb(0,0,0);">&nbsp;</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">&nbsp;milli&nbsp;seconds</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">);</span></font></font> 
   </div> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font><br><font></font></font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font>输出结果为(注：程序的输出结果也许和你的结果不同，但是总体趋势应该是一致的)：</font></p> 
   <div style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;border-width:1px;border-style:solid;"> 
    <font><font><span style="color:rgb(0,0,0);">create&nbsp;String&nbsp;without&nbsp;</span>&nbsp;<span style="color:rgb(0,0,0);">'</span>&nbsp;<span style="color:rgb(0,0,0);">new</span>&nbsp;<span style="color:rgb(0,0,0);">'</span>&nbsp;<span style="color:rgb(0,0,0);">&nbsp;keyword&nbsp;:&nbsp;</span>&nbsp;<span style="color:rgb(0,0,0);">0</span>&nbsp;</font></font>
    <font><font><span style="color:rgb(0,0,0);">&nbsp;milli&nbsp;seconds<br> create&nbsp;String&nbsp;with&nbsp;</span>&nbsp;<span style="color:rgb(0,0,0);">'</span>&nbsp;<span style="color:rgb(0,0,0);">new</span>&nbsp;<span style="color:rgb(0,0,0);">'</span>&nbsp;<span style="color:rgb(0,0,0);">&nbsp;keyword&nbsp;:&nbsp;</span>&nbsp;<span style="color:rgb(0,0,0);">16</span>&nbsp;<span style="color:rgb(0,0,0);">&nbsp;milli&nbsp;seconds</span></font></font> 
   </div> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font><font><font color="#0000ff"><strong>结论：</strong>&nbsp;</font>创建字符串变量时尽可能不使用new关键字<br> &nbsp;<br><font color="#0000ff"><strong>说明：</strong></font><br> 虽然两个语句都是返回一个String对象的引用，但是jvm对两者的处理方式是不一样的。</font></font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font>对于第一种不用new关键字创建String对象：<br> JVM首先会在内部维护的滞留字符串中通过String的equels方法查找是对象池中是否存放有该 String对象。如果有，返回已有的String对象给用户，而不会在heap中重新创建一个新的String对象；如 果对象池中没有该String对象，JVM则在heap中创建新的String对象，将其引用返回给用户，同时将该引 用添加至滞留字符串中。</font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font>对于第二种使用new关键字创建String对象：<br> JVM会马上在heap中创建一个String对象，然后将该对象的引用返回给用户。JVM是不会主动把该 对象放到滞留字符串里面的，除非程序调用 String的intern()方法.</font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><br><font>JVM为字符串自变量维护一些唯一的String对象，程序员不需要为字符串自变量而发愁。但是使用new关键 字可能会在内存中创建重复的String对象，你不必为此而烦恼，intern()方法可以帮你解决问题。</font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font>String.intern()：检查字符串对象的存在性，如果需要的字符串对象已经存在，那么它会将引用指向已 经存在的字符串对象而不是重新创建一个。</font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font>例2：<br></font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font></font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font></font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font></font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font></font></p> 
   <div style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;border-width:1px;border-style:solid;"> 
    <font><font><span style="color:rgb(0,128,128);">&nbsp;1</span>&nbsp;<span style="color:rgb(0,0,0);">String&nbsp;str3&nbsp;</span><span style="color:rgb(0,0,0);">=</span><span style="color:rgb(0,0,0);">&nbsp;</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">world</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,0);">/*</span><span style="color:rgb(0,128,0);">JVM在滞留字符串中找不到值为“world”的字符串，就在堆上创建一个string对象，并将该对象的引用加入到滞留字符串中</span><span style="color:rgb(0,128,0);">*/</span></font>&nbsp;</font>
    <span style="color:rgb(0,0,0);"><br></span>
    <font><font><span style="color:rgb(0,128,128);">&nbsp;2</span>&nbsp;&nbsp;</font></font>
    <span style="color:rgb(0,0,0);"><br></span>
    <font><font><span style="color:rgb(0,128,128);">&nbsp;3</span>&nbsp;<span style="color:rgb(0,0,0);">String&nbsp;str4&nbsp;</span><span style="color:rgb(0,0,0);">=</span><span style="color:rgb(0,0,0);">&nbsp;</span><span style="color:rgb(0,0,255);">new</span><span style="color:rgb(0,0,0);">&nbsp;String(</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">world</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,0);">/*</span><span style="color:rgb(0,128,0);">JVM在堆上重新创建一个值为“world”的字符串，此时堆上有两个值为“world”的字符串</span><span style="color:rgb(0,128,0);">*/</span></font>&nbsp;</font>
    <span style="color:rgb(0,0,0);"><br></span>
    <font><font><span style="color:rgb(0,128,128);">&nbsp;4</span>&nbsp;<span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,0,255);">if</span><span style="color:rgb(0,0,0);">(str3&nbsp;</span><span style="color:rgb(0,0,0);">==</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">&nbsp;str4){<br></span><span style="color:rgb(0,128,128);">&nbsp;5</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(0,0,0);">System.out.println(</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">str3&nbsp;==&nbsp;str4</span><span style="color:rgb(0,0,0);">"</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">);<br></span><span style="color:rgb(0,128,128);">&nbsp;6</span>&nbsp;&nbsp;</font></font>
    <font><font><span style="color:rgb(0,0,0);">}<br></span><span style="color:rgb(0,128,128);">&nbsp;7</span>&nbsp;<span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,0,255);">else</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">{<br></span><span style="color:rgb(0,128,128);">&nbsp;8</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(0,0,0);">System.out.println(</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">str3&nbsp;!=&nbsp;str4</span><span style="color:rgb(0,0,0);">"</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">);<br></span><span style="color:rgb(0,128,128);">&nbsp;9</span>&nbsp;&nbsp;</font></font>
    <font><font><span style="color:rgb(0,0,0);">}<br></span><span style="color:rgb(0,128,128);">10</span>&nbsp;<span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,128,0);">//</span><span style="color:rgb(0,128,0);">输出：str3&nbsp;!=&nbsp;str4</span></font>&nbsp;</font>
    <span style="color:rgb(0,128,0);"><br></span>
    <font><font><span style="color:rgb(0,128,128);">11</span>&nbsp;<span style="color:rgb(0,128,0);"></span></font>&nbsp;</font>
    <span style="color:rgb(0,0,0);"><br></span>
    <font><font><span style="color:rgb(0,128,128);">12</span>&nbsp;<span style="color:rgb(0,0,0);">String&nbsp;str5&nbsp;</span><span style="color:rgb(0,0,0);">=</span><span style="color:rgb(0,0,0);">&nbsp;</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">world</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,0);">/*</span><span style="color:rgb(0,128,0);">JVM在发现滞留字符串中存在“world”对象，因此返回str3指向的对象给str5，即str3和str5是指向同一个对象的引用</span><span style="color:rgb(0,128,0);">*/</span></font>&nbsp;</font>
    <span style="color:rgb(0,0,0);"><br></span>
    <font><font><span style="color:rgb(0,128,128);">13</span>&nbsp;&nbsp;</font></font>
    <span style="color:rgb(0,0,0);"><br></span>
    <font><font><span style="color:rgb(0,128,128);">14</span>&nbsp;<span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,0,255);">if</span><span style="color:rgb(0,0,0);">(str3&nbsp;</span><span style="color:rgb(0,0,0);">==</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">&nbsp;str5){<br></span><span style="color:rgb(0,128,128);">15</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(0,0,0);">System.out.println(</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">str3&nbsp;==&nbsp;str5</span><span style="color:rgb(0,0,0);">"</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">);<br></span><span style="color:rgb(0,128,128);">16</span>&nbsp;&nbsp;</font></font>
    <font><font><span style="color:rgb(0,0,0);">}<br></span><span style="color:rgb(0,128,128);">17</span>&nbsp;<span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,0,255);">else</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">{<br></span><span style="color:rgb(0,128,128);">18</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(0,0,0);">System.out.println(</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">str3&nbsp;!=&nbsp;str5</span><span style="color:rgb(0,0,0);">"</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">);<br></span><span style="color:rgb(0,128,128);">19</span>&nbsp;&nbsp;</font></font>
    <font><font><span style="color:rgb(0,0,0);">}<br></span><span style="color:rgb(0,128,128);">20</span>&nbsp;<span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,128,0);">//</span><span style="color:rgb(0,128,0);">输出：str3&nbsp;==&nbsp;str5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></font>&nbsp;</font>
    <span style="color:rgb(0,128,0);"><br></span>
    <font><font><span style="color:rgb(0,128,128);">21</span>&nbsp;<span style="color:rgb(0,128,0);"></span></font>&nbsp;</font>
    <span style="color:rgb(0,0,0);"><br></span>
    <font><font><span style="color:rgb(0,128,128);">22</span>&nbsp;<span style="color:rgb(0,0,0);">str4&nbsp;</span><span style="color:rgb(0,0,0);">=</span><span style="color:rgb(0,0,0);">&nbsp;str4.intern();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,0);">/*</span><span style="color:rgb(0,128,0);">此时，JVM发现滞留字符串中已经存在“world”对象，因此返回str3指向的对象给str4，即str3和str4是指向同一个对象的引用</span><span style="color:rgb(0,128,0);">*/</span></font>&nbsp;</font>
    <span style="color:rgb(0,0,0);"><br></span>
    <font><font><span style="color:rgb(0,128,128);">23</span>&nbsp;&nbsp;</font></font>
    <font><font><span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br></span><span style="color:rgb(0,128,128);">24</span>&nbsp;<span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,0,255);">if</span><span style="color:rgb(0,0,0);">(str3&nbsp;</span><span style="color:rgb(0,0,0);">==</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">&nbsp;str4){<br></span><span style="color:rgb(0,128,128);">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(0,0,0);">System.out.println(</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">after&nbsp;intern()&nbsp;str3&nbsp;==&nbsp;str4</span><span style="color:rgb(0,0,0);">"</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">);<br></span><span style="color:rgb(0,128,128);">26</span>&nbsp;&nbsp;</font></font>
    <font><font><span style="color:rgb(0,0,0);">}<br></span><span style="color:rgb(0,128,128);">27</span>&nbsp;<span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,0,255);">else</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">{<br></span><span style="color:rgb(0,128,128);">28</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(0,0,0);">System.out.println(</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">after&nbsp;intern()&nbsp;str3&nbsp;!=&nbsp;str4</span><span style="color:rgb(0,0,0);">"</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">);<br></span><span style="color:rgb(0,128,128);">29</span>&nbsp;&nbsp;</font></font>
    <font><font><span style="color:rgb(0,0,0);">}<br></span><span style="color:rgb(0,128,128);">30</span>&nbsp;<span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,128,0);">//</span><span style="color:rgb(0,128,0);">输出：after&nbsp;intern()&nbsp;str3&nbsp;==&nbsp;str4</span></font>&nbsp;</font>
    <span style="color:rgb(0,128,0);"><br></span>
    <font><font><span style="color:rgb(0,128,128);">31</span>&nbsp;<span style="color:rgb(0,128,0);"></span></font>&nbsp;</font>
    <span style="color:rgb(0,0,0);"><br></span>
    <font><font><span style="color:rgb(0,128,128);">32</span>&nbsp;<span style="color:rgb(0,0,0);"></span></font></font> 
   </div> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font><font><font color="#0000ff"><strong>结论：</strong>&nbsp;</font>如果使用new关键字创建了字符串变量，则尽可能使用intern()方法。</font></font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font>上面的例子执行正是用到了string对象的不可变性质。既然string对象一旦创建就不可以改变，那么多个 引用指向同一个对象就不会对彼此产生影响。</font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><br><font color="#0000ff"><font><font><strong>三.字符串连接</strong></font></font></font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font>　　你可以使用+操作符或者String.concat()或者StringBuffer.append()等办法来连接多个字符串，哪 一种方法性能最佳？</font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font>如何选择取决于两种情景：<br> 第一种情景：需要连接的字符串是在编译期间决定的，还是在运行期间决定。<br> 第二种情景：你使用的是 StringBuffer还是String。</font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font><font>通常程序员会认为StringBuffer.append()方法会优于+操作符或 String.concat()方法，但是在一些特定 的情况下这个假想是不成立的。<br> &nbsp;<br><br> 1) 第一种情景：<strong><font color="#0000ff">编译期间决定</font></strong><font color="#ff0000">VS</font></font>&nbsp;</font><font color="#0000ff"><strong>运行期间决定<br></strong></font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font></font></p> 
   <div style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;border-width:1px;border-style:solid;"> 
    <font><font><span style="color:rgb(0,128,128);">&nbsp;1</span>&nbsp;<span style="color:rgb(0,128,0);">//</span><span style="color:rgb(0,128,0);">test&nbsp;the&nbsp;string&nbsp;Concatenation</span></font>&nbsp;</font>
    <span style="color:rgb(0,128,0);"><br></span>
    <font><font><span style="color:rgb(0,128,128);">&nbsp;2</span>&nbsp;<span style="color:rgb(0,128,0);"></span><span style="color:rgb(0,0,255);">long</span><span style="color:rgb(0,0,0);">&nbsp;startTime6&nbsp;</span><span style="color:rgb(0,0,0);">=</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">&nbsp;System.currentTimeMillis();<br></span><span style="color:rgb(0,128,128);">&nbsp;3</span>&nbsp;<span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,0,255);">for</span><span style="color:rgb(0,0,0);">(</span><span style="color:rgb(0,0,255);">int</span><span style="color:rgb(0,0,0);">&nbsp;k</span><span style="color:rgb(0,0,0);">=</span><span style="color:rgb(0,0,0);">0</span><span style="color:rgb(0,0,0);">;&nbsp;k</span><span style="color:rgb(0,0,0);">&lt;</span><span style="color:rgb(0,0,0);">100000</span><span style="color:rgb(0,0,0);">;&nbsp;k</span><span style="color:rgb(0,0,0);">++</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">){<br></span><span style="color:rgb(0,128,128);">&nbsp;4</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(0,0,0);">String&nbsp;str6&nbsp;</span><span style="color:rgb(0,0,0);">=</span><span style="color:rgb(0,0,0);">&nbsp;</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">this&nbsp;is&nbsp;</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">&nbsp;</span><span style="color:rgb(0,0,0);">+</span><span style="color:rgb(0,0,0);">&nbsp;</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">a&nbsp;test&nbsp;</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">&nbsp;</span><span style="color:rgb(0,0,0);">+</span><span style="color:rgb(0,0,0);">&nbsp;</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">for&nbsp;string&nbsp;concatenation</span><span style="color:rgb(0,0,0);">"</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">;<br></span><span style="color:rgb(0,128,128);">&nbsp;5</span>&nbsp;&nbsp;</font></font>
    <font><font><span style="color:rgb(0,0,0);">}<br></span><span style="color:rgb(0,128,128);">&nbsp;6</span>&nbsp;<span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,0,255);">long</span><span style="color:rgb(0,0,0);">&nbsp;endTime6&nbsp;</span><span style="color:rgb(0,0,0);">=</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">&nbsp;System.currentTimeMillis();<br></span><span style="color:rgb(0,128,128);">&nbsp;7</span>&nbsp;<span style="color:rgb(0,0,0);">System.out.println(</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">string&nbsp;concatenation&nbsp;using&nbsp;'+'&nbsp;:&nbsp;</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">&nbsp;</span><span style="color:rgb(0,0,0);">+</span><span style="color:rgb(0,0,0);">&nbsp;(endTime6&nbsp;</span><span style="color:rgb(0,0,0);">-</span><span style="color:rgb(0,0,0);">&nbsp;startTime6)&nbsp;</span><span style="color:rgb(0,0,0);">+</span><span style="color:rgb(0,0,0);">&nbsp;</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">&nbsp;milli&nbsp;seconds</span><span style="color:rgb(0,0,0);">"</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">);<br></span><span style="color:rgb(0,128,128);">&nbsp;8</span>&nbsp;&nbsp;</font></font>
    <font><font><span style="color:rgb(0,0,0);">&nbsp;&nbsp;<br></span><span style="color:rgb(0,128,128);">&nbsp;9</span>&nbsp;<span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,0,255);">long</span><span style="color:rgb(0,0,0);">&nbsp;startTime7&nbsp;</span><span style="color:rgb(0,0,0);">=</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">&nbsp;System.currentTimeMillis();<br></span><span style="color:rgb(0,128,128);">10</span>&nbsp;<span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,0,255);">for</span><span style="color:rgb(0,0,0);">(</span><span style="color:rgb(0,0,255);">int</span><span style="color:rgb(0,0,0);">&nbsp;k</span><span style="color:rgb(0,0,0);">=</span><span style="color:rgb(0,0,0);">0</span><span style="color:rgb(0,0,0);">;&nbsp;k</span><span style="color:rgb(0,0,0);">&lt;</span><span style="color:rgb(0,0,0);">100000</span><span style="color:rgb(0,0,0);">;&nbsp;k</span><span style="color:rgb(0,0,0);">++</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">){<br></span><span style="color:rgb(0,128,128);">11</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(0,0,0);">String&nbsp;str7&nbsp;</span><span style="color:rgb(0,0,0);">=</span><span style="color:rgb(0,0,0);">&nbsp;</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">this&nbsp;is&nbsp;</span><span style="color:rgb(0,0,0);">"</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">;<br></span><span style="color:rgb(0,128,128);">12</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(0,0,0);">str7.concat(</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">a&nbsp;test&nbsp;</span><span style="color:rgb(0,0,0);">"</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">);<br></span><span style="color:rgb(0,128,128);">13</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(0,0,0);">str7.concat(</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">for&nbsp;string&nbsp;concatenation</span><span style="color:rgb(0,0,0);">"</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">);<br></span><span style="color:rgb(0,128,128);">14</span>&nbsp;&nbsp;</font></font>
    <font><font><span style="color:rgb(0,0,0);">}<br></span><span style="color:rgb(0,128,128);">15</span>&nbsp;<span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,0,255);">long</span><span style="color:rgb(0,0,0);">&nbsp;endTime7&nbsp;</span><span style="color:rgb(0,0,0);">=</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">&nbsp;System.currentTimeMillis();<br></span><span style="color:rgb(0,128,128);">16</span>&nbsp;<span style="color:rgb(0,0,0);">System.out.println(</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">string&nbsp;concatenation&nbsp;using&nbsp;concat()&nbsp;:&nbsp;</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">&nbsp;</span><span style="color:rgb(0,0,0);">+</span><span style="color:rgb(0,0,0);">&nbsp;(endTime7&nbsp;</span><span style="color:rgb(0,0,0);">-</span><span style="color:rgb(0,0,0);">&nbsp;startTime7)&nbsp;</span><span style="color:rgb(0,0,0);">+</span><span style="color:rgb(0,0,0);">&nbsp;</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">&nbsp;milli&nbsp;seconds</span><span style="color:rgb(0,0,0);">"</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">);<br></span><span style="color:rgb(0,128,128);">17</span>&nbsp;&nbsp;</font></font>
    <span style="color:rgb(0,0,0);"><br></span>
    <font><font><span style="color:rgb(0,128,128);">18</span>&nbsp;<span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,0,255);">long</span><span style="color:rgb(0,0,0);">&nbsp;startTime8&nbsp;</span><span style="color:rgb(0,0,0);">=</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">&nbsp;System.currentTimeMillis();<br></span><span style="color:rgb(0,128,128);">19</span>&nbsp;<span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,0,255);">for</span><span style="color:rgb(0,0,0);">(</span><span style="color:rgb(0,0,255);">int</span><span style="color:rgb(0,0,0);">&nbsp;l</span><span style="color:rgb(0,0,0);">=</span><span style="color:rgb(0,0,0);">0</span><span style="color:rgb(0,0,0);">;&nbsp;l</span><span style="color:rgb(0,0,0);">&lt;</span><span style="color:rgb(0,0,0);">100000</span><span style="color:rgb(0,0,0);">;&nbsp;l</span><span style="color:rgb(0,0,0);">++</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">){<br></span><span style="color:rgb(0,128,128);">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(0,0,0);">StringBuffer&nbsp;sb8&nbsp;</span><span style="color:rgb(0,0,0);">=</span><span style="color:rgb(0,0,0);">&nbsp;</span><span style="color:rgb(0,0,255);">new</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">&nbsp;StringBuffer();<br></span><span style="color:rgb(0,128,128);">21</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(0,0,0);">sb8.append(</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">this&nbsp;is&nbsp;</span><span style="color:rgb(0,0,0);">"</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">);<br></span><span style="color:rgb(0,128,128);">22</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(0,0,0);">sb8.append(</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">a&nbsp;test&nbsp;</span><span style="color:rgb(0,0,0);">"</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">);<br></span><span style="color:rgb(0,128,128);">23</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(0,0,0);">sb8.append(</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">for&nbsp;string&nbsp;concatenation</span><span style="color:rgb(0,0,0);">"</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">);<br></span><span style="color:rgb(0,128,128);">24</span>&nbsp;&nbsp;</font></font>
    <font><font><span style="color:rgb(0,0,0);">}<br></span><span style="color:rgb(0,128,128);">25</span>&nbsp;<span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,0,255);">long</span><span style="color:rgb(0,0,0);">&nbsp;endTime8&nbsp;</span><span style="color:rgb(0,0,0);">=</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">&nbsp;System.currentTimeMillis();<br></span><span style="color:rgb(0,128,128);">26</span>&nbsp;<span style="color:rgb(0,0,0);">System.out.println(</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">string&nbsp;concatenation&nbsp;using&nbsp;append()&nbsp;:&nbsp;</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">&nbsp;</span><span style="color:rgb(0,0,0);">+</span><span style="color:rgb(0,0,0);">&nbsp;(endTime8&nbsp;</span><span style="color:rgb(0,0,0);">-</span><span style="color:rgb(0,0,0);">&nbsp;startTime8)&nbsp;</span><span style="color:rgb(0,0,0);">+</span><span style="color:rgb(0,0,0);">&nbsp;</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">&nbsp;milli&nbsp;seconds</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">);</span></font></font> 
   </div> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font>上面代码的输出结果：</font></p> 
   <div style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;border-width:1px;border-style:solid;"> 
    <font><font><span style="color:rgb(0,0,0);">string&nbsp;concatenation&nbsp;using&nbsp;</span>&nbsp;<span style="color:rgb(0,0,0);">'</span>&nbsp;<span style="color:rgb(0,0,0);">+</span>&nbsp;<span style="color:rgb(0,0,0);">'</span>&nbsp;<span style="color:rgb(0,0,0);">&nbsp;:&nbsp;</span>&nbsp;<span style="color:rgb(0,0,0);">0</span>&nbsp;</font></font>
    <font><font><span style="color:rgb(0,0,0);">&nbsp;milli&nbsp;seconds<br> string&nbsp;concatenation&nbsp;using&nbsp;concat()&nbsp;:&nbsp;</span>&nbsp;<span style="color:rgb(0,0,0);">31</span>&nbsp;</font></font>
    <font><font><span style="color:rgb(0,0,0);">&nbsp;milli&nbsp;seconds<br> string&nbsp;concatenation&nbsp;using&nbsp;append()&nbsp;:&nbsp;</span>&nbsp;<span style="color:rgb(0,0,0);">62</span>&nbsp;<span style="color:rgb(0,0,0);">&nbsp;milli&nbsp;seconds</span></font></font> 
   </div> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font>很有趣，+操作符比StringBuffer.append()方法要快. Why？<br> &nbsp;<br> 这是因为编译器对简单的字符串进行了优化。即使使用new关键字来创建String对象的时候也是如此。例 如，</font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font>编译前：<br> String str6 = "this is " + "a test " + "for string concatenation";<br> 编译后：<br> String str6 = "this is a test for string concatenation";</font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font>这里String对象在编译期间就决定了而StringBuffer对象是在运行期间决定的。运行期间决定需要额外的 开销。</font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font><font><font color="#0000ff"><strong>结论：</strong>&nbsp;</font>如果字符串在编译期间就可以决定它的值，则字符串拼接的时候, “+”操作符效率更高，简单的 认为append()效率高于“+”是错误的。<br> &nbsp;<br><br> 2) 第二种情景：<font color="#0000ff">StringBuffer</font><font color="#ff0000"><strong>VS</strong></font></font>&nbsp;</font><font color="#0000ff">String<br><br></font></p> 
   <div style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;border-width:1px;border-style:solid;"> 
    <font><font><span style="color:rgb(0,128,128);">&nbsp;1</span>&nbsp;<span style="color:rgb(0,128,0);">//</span><span style="color:rgb(0,128,0);">string&nbsp;concatenation&nbsp;using&nbsp;'+='</span></font>&nbsp;</font>
    <span style="color:rgb(0,128,0);"><br></span>
    <font><font><span style="color:rgb(0,128,128);">&nbsp;2</span>&nbsp;<span style="color:rgb(0,128,0);"></span><span style="color:rgb(0,0,255);">long</span><span style="color:rgb(0,0,0);">&nbsp;startTime9&nbsp;</span><span style="color:rgb(0,0,0);">=</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">&nbsp;System.currentTimeMillis();<br></span><span style="color:rgb(0,128,128);">&nbsp;3</span>&nbsp;<span style="color:rgb(0,0,0);">String&nbsp;str9&nbsp;</span><span style="color:rgb(0,0,0);">=</span><span style="color:rgb(0,0,0);">&nbsp;</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">hello</span><span style="color:rgb(0,0,0);">"</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">;<br></span><span style="color:rgb(0,128,128);">&nbsp;4</span>&nbsp;<span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,0,255);">for</span><span style="color:rgb(0,0,0);">(</span><span style="color:rgb(0,0,255);">int</span><span style="color:rgb(0,0,0);">&nbsp;i</span><span style="color:rgb(0,0,0);">=</span><span style="color:rgb(0,0,0);">0</span><span style="color:rgb(0,0,0);">;&nbsp;i</span><span style="color:rgb(0,0,0);">&lt;</span><span style="color:rgb(0,0,0);">10000</span><span style="color:rgb(0,0,0);">;&nbsp;i</span><span style="color:rgb(0,0,0);">++</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">){<br></span><span style="color:rgb(0,128,128);">&nbsp;5</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(0,0,0);">str9&nbsp;</span><span style="color:rgb(0,0,0);">+=</span><span style="color:rgb(0,0,0);">&nbsp;</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">hello</span><span style="color:rgb(0,0,0);">"</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">;<br></span><span style="color:rgb(0,128,128);">&nbsp;6</span>&nbsp;&nbsp;</font></font>
    <font><font><span style="color:rgb(0,0,0);">}<br></span><span style="color:rgb(0,128,128);">&nbsp;7</span>&nbsp;<span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,0,255);">long</span><span style="color:rgb(0,0,0);">&nbsp;endTime9&nbsp;</span><span style="color:rgb(0,0,0);">=</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">&nbsp;System.currentTimeMillis();<br></span><span style="color:rgb(0,128,128);">&nbsp;8</span>&nbsp;<span style="color:rgb(0,0,0);">System.out.println(</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">string&nbsp;concatenation&nbsp;using&nbsp;'+='&nbsp;:&nbsp;</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">&nbsp;</span><span style="color:rgb(0,0,0);">+</span><span style="color:rgb(0,0,0);">&nbsp;(endTime9&nbsp;</span><span style="color:rgb(0,0,0);">-</span><span style="color:rgb(0,0,0);">&nbsp;startTime9)&nbsp;</span><span style="color:rgb(0,0,0);">+</span><span style="color:rgb(0,0,0);">&nbsp;</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">&nbsp;milli&nbsp;seconds</span><span style="color:rgb(0,0,0);">"</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">);<br></span><span style="color:rgb(0,128,128);">&nbsp;9</span>&nbsp;&nbsp;</font></font>
    <font><font><span style="color:rgb(0,0,0);">&nbsp;&nbsp;<br></span><span style="color:rgb(0,128,128);">10</span>&nbsp;<span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,128,0);">//</span><span style="color:rgb(0,128,0);">string&nbsp;concatenation&nbsp;using&nbsp;append()</span></font>&nbsp;</font>
    <span style="color:rgb(0,128,0);"><br></span>
    <font><font><span style="color:rgb(0,128,128);">11</span>&nbsp;<span style="color:rgb(0,128,0);"></span><span style="color:rgb(0,0,255);">long</span><span style="color:rgb(0,0,0);">&nbsp;startTime10&nbsp;</span><span style="color:rgb(0,0,0);">=</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">&nbsp;System.currentTimeMillis();<br></span><span style="color:rgb(0,128,128);">12</span>&nbsp;<span style="color:rgb(0,0,0);">StringBuffer&nbsp;sb10&nbsp;</span><span style="color:rgb(0,0,0);">=</span><span style="color:rgb(0,0,0);">&nbsp;</span><span style="color:rgb(0,0,255);">new</span><span style="color:rgb(0,0,0);">&nbsp;StringBuffer(</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">hello</span><span style="color:rgb(0,0,0);">"</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">);<br></span><span style="color:rgb(0,128,128);">13</span>&nbsp;<span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,0,255);">for</span><span style="color:rgb(0,0,0);">(</span><span style="color:rgb(0,0,255);">int</span><span style="color:rgb(0,0,0);">&nbsp;i</span><span style="color:rgb(0,0,0);">=</span><span style="color:rgb(0,0,0);">0</span><span style="color:rgb(0,0,0);">;&nbsp;i</span><span style="color:rgb(0,0,0);">&lt;</span><span style="color:rgb(0,0,0);">10000</span><span style="color:rgb(0,0,0);">;&nbsp;i</span><span style="color:rgb(0,0,0);">++</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">){<br></span><span style="color:rgb(0,128,128);">14</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(0,0,0);">sb10.append(</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">hello</span><span style="color:rgb(0,0,0);">"</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">);<br></span><span style="color:rgb(0,128,128);">15</span>&nbsp;&nbsp;</font></font>
    <font><font><span style="color:rgb(0,0,0);">}<br></span><span style="color:rgb(0,128,128);">16</span>&nbsp;<span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,0,255);">long</span><span style="color:rgb(0,0,0);">&nbsp;endTime10&nbsp;</span><span style="color:rgb(0,0,0);">=</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">&nbsp;System.currentTimeMillis();<br></span><span style="color:rgb(0,128,128);">17</span>&nbsp;<span style="color:rgb(0,0,0);">System.out.println(</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">string&nbsp;concatenation&nbsp;using&nbsp;append()&nbsp;:&nbsp;</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">&nbsp;</span><span style="color:rgb(0,0,0);">+</span><span style="color:rgb(0,0,0);">&nbsp;(endTime10&nbsp;</span><span style="color:rgb(0,0,0);">-</span><span style="color:rgb(0,0,0);">&nbsp;startTime10)&nbsp;</span><span style="color:rgb(0,0,0);">+</span><span style="color:rgb(0,0,0);">&nbsp;</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">&nbsp;milli&nbsp;seconds</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">);</span></font></font> 
   </div> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><br><font>上面代码的输出结果：</font></p> 
   <div style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;border-width:1px;border-style:solid;"> 
    <font><font><span style="color:rgb(0,0,0);">string&nbsp;concatenation&nbsp;using&nbsp;</span>&nbsp;<span style="color:rgb(0,0,0);">'</span>&nbsp;<span style="color:rgb(0,0,0);">+=</span>&nbsp;<span style="color:rgb(0,0,0);">'</span>&nbsp;<span style="color:rgb(0,0,0);">&nbsp;:&nbsp;</span>&nbsp;<span style="color:rgb(0,0,0);">3094</span>&nbsp;</font></font>
    <font><font><span style="color:rgb(0,0,0);">&nbsp;milli&nbsp;seconds<br> string&nbsp;concatenation&nbsp;using&nbsp;append()&nbsp;:&nbsp;</span>&nbsp;<span style="color:rgb(0,0,0);">16</span>&nbsp;<span style="color:rgb(0,0,0);">&nbsp;milli&nbsp;seconds</span></font></font> 
   </div> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font></font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font></font></p> 
   <font style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font><font color="#0000ff"><strong>结论：</strong>&nbsp;</font>避免使用“+=”来构造字符串</font></font>
   <span style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"></span> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font>虽然两者都是在运行期间决定字符串对象，但是使用+=操作符会产生更多的临时对象。</font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font>在上例中，由于String类是不可变的，所以进行字符串拼接的时候，每循环一次就会产生临时对象来保存 str9和“hello”的值，之后创建一个临时的StringBuffer对象，并调用其append()方法来完成字符串的 拼接，最后调用toString()方法，将临时StringBuffer对象转为String再赋值给str9。此时str9已经改变 ，指向了新的对象。</font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><br><font>3) 第三种情景：设置StringBuffer的容量来提升性能<br></font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font></font></p> 
   <div style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;border-width:1px;border-style:solid;"> 
    <font><font><span style="color:rgb(0,128,128);">&nbsp;1</span>&nbsp;<span style="color:rgb(0,0,255);">long</span><span style="color:rgb(0,0,0);">&nbsp;startTime10&nbsp;</span><span style="color:rgb(0,0,0);">=</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">&nbsp;System.currentTimeMillis();<br></span><span style="color:rgb(0,128,128);">&nbsp;2</span>&nbsp;<span style="color:rgb(0,0,0);">StringBuffer&nbsp;sb10&nbsp;</span><span style="color:rgb(0,0,0);">=</span><span style="color:rgb(0,0,0);">&nbsp;</span><span style="color:rgb(0,0,255);">new</span><span style="color:rgb(0,0,0);">&nbsp;StringBuffer(</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">hello</span><span style="color:rgb(0,0,0);">"</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">);<br></span><span style="color:rgb(0,128,128);">&nbsp;3</span>&nbsp;<span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,0,255);">for</span><span style="color:rgb(0,0,0);">(</span><span style="color:rgb(0,0,255);">int</span><span style="color:rgb(0,0,0);">&nbsp;i</span><span style="color:rgb(0,0,0);">=</span><span style="color:rgb(0,0,0);">0</span><span style="color:rgb(0,0,0);">;&nbsp;i</span><span style="color:rgb(0,0,0);">&lt;</span><span style="color:rgb(0,0,0);">10000</span><span style="color:rgb(0,0,0);">;&nbsp;i</span><span style="color:rgb(0,0,0);">++</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">){<br></span><span style="color:rgb(0,128,128);">&nbsp;4</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(0,0,0);">sb10.append(</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">hello</span><span style="color:rgb(0,0,0);">"</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">);<br></span><span style="color:rgb(0,128,128);">&nbsp;5</span>&nbsp;&nbsp;</font></font>
    <font><font><span style="color:rgb(0,0,0);">}<br></span><span style="color:rgb(0,128,128);">&nbsp;6</span>&nbsp;<span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,0,255);">long</span><span style="color:rgb(0,0,0);">&nbsp;endTime10&nbsp;</span><span style="color:rgb(0,0,0);">=</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">&nbsp;System.currentTimeMillis();<br></span><span style="color:rgb(0,128,128);">&nbsp;7</span>&nbsp;<span style="color:rgb(0,0,0);">System.out.println(</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">string&nbsp;concatenation&nbsp;using&nbsp;append()&nbsp;:&nbsp;</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">&nbsp;</span><span style="color:rgb(0,0,0);">+</span><span style="color:rgb(0,0,0);">&nbsp;(endTime10&nbsp;</span><span style="color:rgb(0,0,0);">-</span><span style="color:rgb(0,0,0);">&nbsp;startTime10)&nbsp;</span><span style="color:rgb(0,0,0);">+</span><span style="color:rgb(0,0,0);">&nbsp;</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">&nbsp;milli&nbsp;seconds</span><span style="color:rgb(0,0,0);">"</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">);<br></span><span style="color:rgb(0,128,128);">&nbsp;8</span>&nbsp;&nbsp;</font></font>
    <font><font><span style="color:rgb(0,0,0);">&nbsp;&nbsp;<br></span><span style="color:rgb(0,128,128);">&nbsp;9</span>&nbsp;<span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,128,0);">//</span><span style="color:rgb(0,128,0);">set&nbsp;the&nbsp;StringBuffer&nbsp;capacity</span></font>&nbsp;</font>
    <span style="color:rgb(0,128,0);"><br></span>
    <font><font><span style="color:rgb(0,128,128);">10</span>&nbsp;<span style="color:rgb(0,128,0);"></span><span style="color:rgb(0,0,255);">long</span><span style="color:rgb(0,0,0);">&nbsp;startTime11&nbsp;</span><span style="color:rgb(0,0,0);">=</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">&nbsp;System.currentTimeMillis();<br></span><span style="color:rgb(0,128,128);">11</span>&nbsp;<span style="color:rgb(0,0,0);">StringBuffer&nbsp;sb11&nbsp;</span><span style="color:rgb(0,0,0);">=</span><span style="color:rgb(0,0,0);">&nbsp;</span><span style="color:rgb(0,0,255);">new</span><span style="color:rgb(0,0,0);">&nbsp;StringBuffer(</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">hello</span><span style="color:rgb(0,0,0);">"</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">);<br></span><span style="color:rgb(0,128,128);">12</span>&nbsp;<span style="color:rgb(0,0,0);">sb11.ensureCapacity(</span><span style="color:rgb(0,0,0);">10000</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">);<br></span><span style="color:rgb(0,128,128);">13</span>&nbsp;<span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,0,255);">for</span><span style="color:rgb(0,0,0);">(</span><span style="color:rgb(0,0,255);">int</span><span style="color:rgb(0,0,0);">&nbsp;i</span><span style="color:rgb(0,0,0);">=</span><span style="color:rgb(0,0,0);">0</span><span style="color:rgb(0,0,0);">;&nbsp;i</span><span style="color:rgb(0,0,0);">&lt;</span><span style="color:rgb(0,0,0);">10000</span><span style="color:rgb(0,0,0);">;&nbsp;i</span><span style="color:rgb(0,0,0);">++</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">){<br></span><span style="color:rgb(0,128,128);">14</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(0,0,0);">sb11.append(</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">hello</span><span style="color:rgb(0,0,0);">"</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">);<br></span><span style="color:rgb(0,128,128);">15</span>&nbsp;&nbsp;</font></font>
    <font><font><span style="color:rgb(0,0,0);">}<br></span><span style="color:rgb(0,128,128);">16</span>&nbsp;<span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,0,255);">long</span><span style="color:rgb(0,0,0);">&nbsp;endTime11&nbsp;</span><span style="color:rgb(0,0,0);">=</span></font>&nbsp;</font>
    <font><font><span style="color:rgb(0,0,0);">&nbsp;System.currentTimeMillis();<br></span><span style="color:rgb(0,128,128);">17</span>&nbsp;<span style="color:rgb(0,0,0);">System.out.println(</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">string&nbsp;concatenation&nbsp;using&nbsp;append()&nbsp;after&nbsp;set&nbsp;the&nbsp;StringBuffer&nbsp;capacity&nbsp;:&nbsp;</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">&nbsp;</span><span style="color:rgb(0,0,0);">+</span><span style="color:rgb(0,0,0);">&nbsp;(endTime11&nbsp;</span><span style="color:rgb(0,0,0);">-</span><span style="color:rgb(0,0,0);">&nbsp;startTime11)&nbsp;</span><span style="color:rgb(0,0,0);">+</span><span style="color:rgb(0,0,0);">&nbsp;</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">&nbsp;milli&nbsp;seconds</span><span style="color:rgb(0,0,0);">"</span><span style="color:rgb(0,0,0);">);</span></font></font> 
   </div> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><br><font>&nbsp; 上面代码的输出结果：<br></font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font></font></p> 
   <div style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;border-width:1px;border-style:solid;"> 
    <font><font><span style="color:rgb(0,0,0);">string&nbsp;concatenation&nbsp;using&nbsp;append()&nbsp;:&nbsp;</span>&nbsp;<span style="color:rgb(0,0,0);">16</span>&nbsp;</font></font>
    <font><font><span style="color:rgb(0,0,0);">&nbsp;milli&nbsp;seconds<br> string&nbsp;concatenation&nbsp;using&nbsp;append()&nbsp;after&nbsp;set&nbsp;the&nbsp;StringBuffer&nbsp;capacity&nbsp;:&nbsp;</span>&nbsp;<span style="color:rgb(0,0,0);">0</span>&nbsp;<span style="color:rgb(0,0,0);">&nbsp;milli&nbsp;seconds</span></font></font> 
   </div> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font><font><font color="#0000ff"><strong>结论：</strong>&nbsp;</font><br> 声明StringBuffer对象的时候，指定合适的capacity，会提升程序性能。</font></font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font>1)使用StringBuffer的构造函数来设定它的初始化容量：StringBuffer(int length)<br> 2)使用ensureCapacity(int minimumcapacity)方法在StringBuffer对象创建之后设置它的容量。</font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font>首先我们看看StringBuffer的缺省行为，然后再找出一条更好的提升性能的途径。<br> &nbsp;<br> StringBuffer的缺省行为：<br> StringBuffer在内部维护一个字符数组，当你使用缺省的构造函数来创建StringBuffer对象的时候， StringBuffer的容量被初始化为16个字符，也就是说缺省容量就是16个字符。当StringBuffer达到最大容 量的时候，它会将自身容量增加到当前的2倍再加2，也就是（2*旧值+2）。<br> 如果你使用缺省值，初始化之后接着往里面追加字符，在你追加到第<font color="#ff0000">17</font><font color="#0000ff">(原文是16，其实是错误的，因为在追加到第16个字符的时候，容量不会发生变化，很抱歉，以后会更严谨一些^+^)</font>个字符的时候它会将容量增加 到34（2*16+2），当追加到34个字符的时候就会将容量增加到70（2*34+2）。无论何事只要StringBuffer 到达它的最大容量它就不得不创建一个新的字符数组然后重新将旧字符和新字符都拷贝一遍。所以给 StringBuffer设置一个合理的初始化容量值，会提升程序的性能。</font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font><font><font color="#0000ff">但是为什么容量变化的时候是2*旧值+2呢？有谁能告诉我么?查资料的时候没有找到</font></font></font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font></font>&nbsp;</p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font>附：查资料的过程中发现了jdk 5.0还提供了StringBuilder类，我是没有用过。不过也介绍一下好了。（ 来源 JavaWorld ）：</font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Java.lang.StringBuffer 线程安全的可变字符序列。类似于 String 的字符串缓冲区，但不能修 改。可将字符串缓冲区安全地用于多个线程。可以在必要时对这些方法进行同步，因此任意特定实例上的 所有操作就好像是以串行顺序发生的，该顺序与所涉及的每个线程进行的方法调用顺序一致。</font></p> 
   <p style="color:rgb(75,75,75);font-family:georgia, verdana, Arial, helvetica, 'sans-seriff';font-size:13px;"><font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 每个字符串缓冲区都有一定的容量。只要字符串缓冲区所包含的字符序列的长度没有超出此容量 ，就无需分配新的内部缓冲区数组。如果内部缓冲区溢出，则此容量自动增大。从 JDK 5.0 开始，为该 类增添了一个单个线程使用的等价类，即 StringBuilder 。与该类相比，通常应该优先使用 StringBuilder 类，因为它支持所有相同的操作，但由于它不执行同步，所以速度更快。 但是如果将 StringBuilder 的实例用于多个线程是不安全的。需要这样的同步，则建议使用 StringBuffer 。</font></p> 
   <p><br><font color="#4b4b4b">本文转自BlogJavaOo缘来是你oO的博客，原文链接：<a href="http://www.blogjava.net/majianan/archive/2006/09/14/69706.html" rel="nofollow" title="如何让你的程序运行的更快(1)---String VS StringBuffer">如何让你的程序运行的更快(1)---String VS StringBuffer</a>，如需转载请自行联系原博主。</font><br></p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
