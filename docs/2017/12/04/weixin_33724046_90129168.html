<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>CvMat and cv::Mat « NotBeCN</title>
  <meta name="description" content="                  CvMat:          typedef struct CvMat{    int type;    int step;    /* for internal use only */    int* refcount;    int hdr_refcount;    un...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/12/04/weixin_33724046_90129168.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">CvMat and cv::Mat</h1>
    <p class="post-meta">Dec 4, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <div class="blogpost-body"> 
    <p style="color:rgb(73,73,73);font-family:Arial, Helvetica, sans-serif;font-size:14px;">CvMat:</p> 
    <div class="cnblogs_code" style="color:rgb(0,0,0);font-family:'Courier New';font-size:12px;border:1px solid rgb(204,204,204);">
     <pre>typedef <span style="color:rgb(0,0,255);line-height:1.5;">struct</span><span style="line-height:1.5;"> CvMat
{
    </span><span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> type;
    </span><span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> step;

    </span><span style="color:rgb(0,128,0);line-height:1.5;">/*</span><span style="color:rgb(0,128,0);line-height:1.5;"> for internal use only </span><span style="color:rgb(0,128,0);line-height:1.5;">*/</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">int</span>*<span style="line-height:1.5;"> refcount;
    </span><span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> hdr_refcount;

    union
    {
        uchar</span>*<span style="line-height:1.5;"> ptr;
        </span><span style="color:rgb(0,0,255);line-height:1.5;">short</span>*<span style="line-height:1.5;"> s;
        </span><span style="color:rgb(0,0,255);line-height:1.5;">int</span>*<span style="line-height:1.5;"> i;
        </span><span style="color:rgb(0,0,255);line-height:1.5;">float</span>*<span style="line-height:1.5;"> fl;
        </span><span style="color:rgb(0,0,255);line-height:1.5;">double</span>*<span style="line-height:1.5;"> db;
    } data;

#ifdef __cplusplus
    union
    {
        </span><span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> rows;
        </span><span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> height;
    };

    union
    {
        </span><span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> cols;
        </span><span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> width;
    };
</span><span style="color:rgb(0,0,255);line-height:1.5;">#else</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> rows;
    </span><span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> cols;
</span><span style="color:rgb(0,0,255);line-height:1.5;">#endif</span><span style="line-height:1.5;">

}
CvMat;</span></pre>
    </div> 
    <p style="color:rgb(73,73,73);font-family:Arial, Helvetica, sans-serif;font-size:14px;">cv::Mat</p> 
    <div class="cnblogs_code" style="color:rgb(0,0,0);font-family:'Courier New';font-size:12px;border:1px solid rgb(204,204,204);">
     <pre><span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> CV_EXPORTS Mat
{
</span><span style="color:rgb(0,0,255);line-height:1.5;">public</span><span style="line-height:1.5;">:
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> constructors</span>
<span style="line-height:1.5;">    Mat();
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> constructs matrix of the specified size and type
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> (_type is CV_8UC1, CV_64FC3, CV_32SC(12) etc.)</span>
    Mat(<span style="color:rgb(0,0,255);line-height:1.5;">int</span> _rows, <span style="color:rgb(0,0,255);line-height:1.5;">int</span> _cols, <span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> _type);
    Mat(Size _size, </span><span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> _type);
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> constucts matrix and fills it with the specified value _s.</span>
    Mat(<span style="color:rgb(0,0,255);line-height:1.5;">int</span> _rows, <span style="color:rgb(0,0,255);line-height:1.5;">int</span> _cols, <span style="color:rgb(0,0,255);line-height:1.5;">int</span> _type, <span style="color:rgb(0,0,255);line-height:1.5;">const</span> Scalar&amp;<span style="line-height:1.5;"> _s);
    Mat(Size _size, </span><span style="color:rgb(0,0,255);line-height:1.5;">int</span> _type, <span style="color:rgb(0,0,255);line-height:1.5;">const</span> Scalar&amp;<span style="line-height:1.5;"> _s);
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> copy constructor</span>
    Mat(<span style="color:rgb(0,0,255);line-height:1.5;">const</span> Mat&amp;<span style="line-height:1.5;"> m);
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> constructor for matrix headers pointing to user-allocated data</span>
    Mat(<span style="color:rgb(0,0,255);line-height:1.5;">int</span> _rows, <span style="color:rgb(0,0,255);line-height:1.5;">int</span> _cols, <span style="color:rgb(0,0,255);line-height:1.5;">int</span> _type, <span style="color:rgb(0,0,255);line-height:1.5;">void</span>* _data, size_t _step=<span style="line-height:1.5;">AUTO_STEP);
    Mat(Size _size, </span><span style="color:rgb(0,0,255);line-height:1.5;">int</span> _type, <span style="color:rgb(0,0,255);line-height:1.5;">void</span>* _data, size_t _step=<span style="line-height:1.5;">AUTO_STEP);
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> creates a matrix header for a part of the bigger matrix</span>
    Mat(<span style="color:rgb(0,0,255);line-height:1.5;">const</span> Mat&amp; m, <span style="color:rgb(0,0,255);line-height:1.5;">const</span> Range&amp; rowRange, <span style="color:rgb(0,0,255);line-height:1.5;">const</span> Range&amp;<span style="line-height:1.5;"> colRange);
    Mat(</span><span style="color:rgb(0,0,255);line-height:1.5;">const</span> Mat&amp; m, <span style="color:rgb(0,0,255);line-height:1.5;">const</span> Rect&amp;<span style="line-height:1.5;"> roi);
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> converts old-style CvMat to the new matrix; the data is not copied by default</span>
    Mat(<span style="color:rgb(0,0,255);line-height:1.5;">const</span> CvMat* m, <span style="color:rgb(0,0,255);line-height:1.5;">bool</span> copyData=<span style="color:rgb(0,0,255);line-height:1.5;">false</span><span style="line-height:1.5;">);
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> converts old-style IplImage to the new matrix; the data is not copied by default</span>
    Mat(<span style="color:rgb(0,0,255);line-height:1.5;">const</span> IplImage* img, <span style="color:rgb(0,0,255);line-height:1.5;">bool</span> copyData=<span style="color:rgb(0,0,255);line-height:1.5;">false</span><span style="line-height:1.5;">);
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> builds matrix from std::vector with or without copying the data</span>
    template&lt;typename _Tp&gt; <span style="color:rgb(0,0,255);line-height:1.5;">explicit</span> Mat(<span style="color:rgb(0,0,255);line-height:1.5;">const</span> vector&lt;_Tp&gt;&amp; vec, <span style="color:rgb(0,0,255);line-height:1.5;">bool</span> copyData=<span style="color:rgb(0,0,255);line-height:1.5;">false</span><span style="line-height:1.5;">);
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> helper constructor to compile matrix expressions</span>
    Mat(<span style="color:rgb(0,0,255);line-height:1.5;">const</span> MatExpr_Base&amp;<span style="line-height:1.5;"> expr);
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> destructor - calls release()</span>
    ~<span style="line-height:1.5;">Mat();
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> assignment operators</span>
    Mat&amp; <span style="color:rgb(0,0,255);line-height:1.5;">operator</span> = (<span style="color:rgb(0,0,255);line-height:1.5;">const</span> Mat&amp;<span style="line-height:1.5;"> m);
    Mat</span>&amp; <span style="color:rgb(0,0,255);line-height:1.5;">operator</span> = (<span style="color:rgb(0,0,255);line-height:1.5;">const</span> MatExpr_Base&amp;<span style="line-height:1.5;"> expr);

    </span><span style="color:rgb(0,0,255);line-height:1.5;">operator</span> MatExpr_&lt;Mat, Mat&gt;() <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;

    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> returns a new matrix header for the specified row</span>
    Mat row(<span style="color:rgb(0,0,255);line-height:1.5;">int</span> y) <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> returns a new matrix header for the specified column</span>
    Mat col(<span style="color:rgb(0,0,255);line-height:1.5;">int</span> x) <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> ... for the specified row span</span>
    Mat rowRange(<span style="color:rgb(0,0,255);line-height:1.5;">int</span> startrow, <span style="color:rgb(0,0,255);line-height:1.5;">int</span> endrow) <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;
    Mat rowRange(</span><span style="color:rgb(0,0,255);line-height:1.5;">const</span> Range&amp; r) <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> ... for the specified column span</span>
    Mat colRange(<span style="color:rgb(0,0,255);line-height:1.5;">int</span> startcol, <span style="color:rgb(0,0,255);line-height:1.5;">int</span> endcol) <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;
    Mat colRange(</span><span style="color:rgb(0,0,255);line-height:1.5;">const</span> Range&amp; r) <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> ... for the specified diagonal
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> (d=0 - the main diagonal,
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">  &gt;0 - a diagonal from the lower half,
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">  &lt;0 - a diagonal from the upper half)</span>
    Mat diag(<span style="color:rgb(0,0,255);line-height:1.5;">int</span> d=<span style="color:rgb(128,0,128);line-height:1.5;">0</span>) <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> constructs a square diagonal matrix which main diagonal is vector "d"</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">static</span> Mat diag(<span style="color:rgb(0,0,255);line-height:1.5;">const</span> Mat&amp;<span style="line-height:1.5;"> d);

    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> returns deep copy of the matrix, i.e. the data is copied</span>
    Mat clone() <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> copies the matrix content to "m".
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> It calls m.create(this-&gt;size(), this-&gt;type()).</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">void</span> copyTo( Mat&amp; m ) <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> copies those matrix elements to "m" that are marked with non-zero mask elements.</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">void</span> copyTo( Mat&amp; m, <span style="color:rgb(0,0,255);line-height:1.5;">const</span> Mat&amp; mask ) <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> converts matrix to another datatype with optional scalng. See cvConvertScale.</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">void</span> convertTo( Mat&amp; m, <span style="color:rgb(0,0,255);line-height:1.5;">int</span> rtype, <span style="color:rgb(0,0,255);line-height:1.5;">double</span> alpha=<span style="color:rgb(128,0,128);line-height:1.5;">1</span>, <span style="color:rgb(0,0,255);line-height:1.5;">double</span> beta=<span style="color:rgb(128,0,128);line-height:1.5;">0</span> ) <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;

    </span><span style="color:rgb(0,0,255);line-height:1.5;">void</span> assignTo( Mat&amp; m, <span style="color:rgb(0,0,255);line-height:1.5;">int</span> type=-<span style="color:rgb(128,0,128);line-height:1.5;">1</span> ) <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;

    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> sets every matrix element to s</span>
    Mat&amp; <span style="color:rgb(0,0,255);line-height:1.5;">operator</span> = (<span style="color:rgb(0,0,255);line-height:1.5;">const</span> Scalar&amp;<span style="line-height:1.5;"> s);
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> sets some of the matrix elements to s, according to the mask</span>
    Mat&amp; setTo(<span style="color:rgb(0,0,255);line-height:1.5;">const</span> Scalar&amp; s, <span style="color:rgb(0,0,255);line-height:1.5;">const</span> Mat&amp; mask=<span style="line-height:1.5;">Mat());
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> creates alternative matrix header for the same data, with different
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> number of channels and/or different number of rows. see cvReshape.</span>
    Mat reshape(<span style="color:rgb(0,0,255);line-height:1.5;">int</span> _cn, <span style="color:rgb(0,0,255);line-height:1.5;">int</span> _rows=<span style="color:rgb(128,0,128);line-height:1.5;">0</span>) <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;

    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> matrix transposition by means of matrix expressions</span>
    MatExpr_&lt;MatExpr_Op2_&lt;Mat, <span style="color:rgb(0,0,255);line-height:1.5;">double</span>, Mat, MatOp_T_&lt;Mat&gt; &gt;, Mat&gt;<span style="line-height:1.5;">
    t() </span><span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> matrix inversion by means of matrix expressions</span>
    MatExpr_&lt;MatExpr_Op2_&lt;Mat, <span style="color:rgb(0,0,255);line-height:1.5;">int</span>, Mat, MatOp_Inv_&lt;Mat&gt; &gt;, Mat&gt;<span style="line-height:1.5;">
        inv(</span><span style="color:rgb(0,0,255);line-height:1.5;">int</span> method=DECOMP_LU) <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;
    MatExpr_</span>&lt;MatExpr_Op4_&lt;Mat, Mat, <span style="color:rgb(0,0,255);line-height:1.5;">double</span>, <span style="color:rgb(0,0,255);line-height:1.5;">char</span>, Mat, MatOp_MulDiv_&lt;Mat&gt; &gt;, Mat&gt;
    <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> per-element matrix multiplication by means of matrix expressions</span>
    mul(<span style="color:rgb(0,0,255);line-height:1.5;">const</span> Mat&amp; m, <span style="color:rgb(0,0,255);line-height:1.5;">double</span> scale=<span style="color:rgb(128,0,128);line-height:1.5;">1</span>) <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;
    MatExpr_</span>&lt;MatExpr_Op4_&lt;Mat, Mat, <span style="color:rgb(0,0,255);line-height:1.5;">double</span>, <span style="color:rgb(0,0,255);line-height:1.5;">char</span>, Mat, MatOp_MulDiv_&lt;Mat&gt; &gt;, Mat&gt;<span style="line-height:1.5;">
    mul(</span><span style="color:rgb(0,0,255);line-height:1.5;">const</span> MatExpr_&lt;MatExpr_Op2_&lt;Mat, <span style="color:rgb(0,0,255);line-height:1.5;">double</span>, Mat, MatOp_Scale_&lt;Mat&gt; &gt;, Mat&gt;&amp; m, <span style="color:rgb(0,0,255);line-height:1.5;">double</span> scale=<span style="color:rgb(128,0,128);line-height:1.5;">1</span>) <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;
    MatExpr_</span>&lt;MatExpr_Op4_&lt;Mat, Mat, <span style="color:rgb(0,0,255);line-height:1.5;">double</span>, <span style="color:rgb(0,0,255);line-height:1.5;">char</span>, Mat, MatOp_MulDiv_&lt;Mat&gt; &gt;, Mat&gt;<span style="line-height:1.5;">    
    mul(</span><span style="color:rgb(0,0,255);line-height:1.5;">const</span> MatExpr_&lt;MatExpr_Op2_&lt;Mat, <span style="color:rgb(0,0,255);line-height:1.5;">double</span>, Mat, MatOp_DivRS_&lt;Mat&gt; &gt;, Mat&gt;&amp; m, <span style="color:rgb(0,0,255);line-height:1.5;">double</span> scale=<span style="color:rgb(128,0,128);line-height:1.5;">1</span>) <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;
    
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> computes cross-product of 2 3D vectors</span>
    Mat cross(<span style="color:rgb(0,0,255);line-height:1.5;">const</span> Mat&amp; m) <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> computes dot-product</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">double</span> dot(<span style="color:rgb(0,0,255);line-height:1.5;">const</span> Mat&amp; m) <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;

    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> Matlab-style matrix initialization</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">static</span> MatExpr_Initializer zeros(<span style="color:rgb(0,0,255);line-height:1.5;">int</span> rows, <span style="color:rgb(0,0,255);line-height:1.5;">int</span> cols, <span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> type);
    </span><span style="color:rgb(0,0,255);line-height:1.5;">static</span> MatExpr_Initializer zeros(Size size, <span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> type);
    </span><span style="color:rgb(0,0,255);line-height:1.5;">static</span> MatExpr_Initializer ones(<span style="color:rgb(0,0,255);line-height:1.5;">int</span> rows, <span style="color:rgb(0,0,255);line-height:1.5;">int</span> cols, <span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> type);
    </span><span style="color:rgb(0,0,255);line-height:1.5;">static</span> MatExpr_Initializer ones(Size size, <span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> type);
    </span><span style="color:rgb(0,0,255);line-height:1.5;">static</span> MatExpr_Initializer eye(<span style="color:rgb(0,0,255);line-height:1.5;">int</span> rows, <span style="color:rgb(0,0,255);line-height:1.5;">int</span> cols, <span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> type);
    </span><span style="color:rgb(0,0,255);line-height:1.5;">static</span> MatExpr_Initializer eye(Size size, <span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> type);

    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> allocates new matrix data unless the matrix already has specified size and type.
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> previous data is unreferenced if needed.</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">void</span> create(<span style="color:rgb(0,0,255);line-height:1.5;">int</span> _rows, <span style="color:rgb(0,0,255);line-height:1.5;">int</span> _cols, <span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> _type);
    </span><span style="color:rgb(0,0,255);line-height:1.5;">void</span> create(Size _size, <span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> _type);
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> increases the reference counter; use with care to avoid memleaks</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> addref();
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> decreases reference counter;
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> deallocate the data when reference counter reaches 0.</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> release();

    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> locates matrix header within a parent matrix. See below</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">void</span> locateROI( Size&amp; wholeSize, Point&amp; ofs ) <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> moves/resizes the current matrix ROI inside the parent matrix.</span>
    Mat&amp; adjustROI( <span style="color:rgb(0,0,255);line-height:1.5;">int</span> dtop, <span style="color:rgb(0,0,255);line-height:1.5;">int</span> dbottom, <span style="color:rgb(0,0,255);line-height:1.5;">int</span> dleft, <span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> dright );
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> extracts a rectangular sub-matrix
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> (this is a generalized form of row, rowRange etc.)</span>
    Mat <span style="color:rgb(0,0,255);line-height:1.5;">operator</span>()( Range rowRange, Range colRange ) <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;
    Mat </span><span style="color:rgb(0,0,255);line-height:1.5;">operator</span>()( <span style="color:rgb(0,0,255);line-height:1.5;">const</span> Rect&amp; roi ) <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;

    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> converts header to CvMat; no data is copied</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">operator</span> CvMat() <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> converts header to IplImage; no data is copied</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">operator</span> IplImage() <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;
    
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> returns true iff the matrix data is continuous
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> (i.e. when there are no gaps between successive rows).
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> similar to CV_IS_MAT_CONT(cvmat-&gt;type)</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">bool</span> isContinuous() <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> returns element size in bytes,
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> similar to CV_ELEM_SIZE(cvmat-&gt;type)</span>
    size_t elemSize() <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> returns the size of element channel in bytes.</span>
    size_t elemSize1() <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> returns element type, similar to CV_MAT_TYPE(cvmat-&gt;type)</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">int</span> type() <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> returns element type, similar to CV_MAT_DEPTH(cvmat-&gt;type)</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">int</span> depth() <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> returns element type, similar to CV_MAT_CN(cvmat-&gt;type)</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">int</span> channels() <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> returns step/elemSize1()</span>
    size_t step1() <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> returns matrix size:
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> width == number of columns, height == number of rows</span>
    Size size() <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> returns true if matrix data is NULL</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">bool</span> empty() <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;

    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> returns pointer to y-th row</span>
    uchar* ptr(<span style="color:rgb(0,0,255);line-height:1.5;">int</span> y=<span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;">);
    </span><span style="color:rgb(0,0,255);line-height:1.5;">const</span> uchar* ptr(<span style="color:rgb(0,0,255);line-height:1.5;">int</span> y=<span style="color:rgb(128,0,128);line-height:1.5;">0</span>) <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;

    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> template version of the above method</span>
    template&lt;typename _Tp&gt; _Tp* ptr(<span style="color:rgb(0,0,255);line-height:1.5;">int</span> y=<span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;">);
    template</span>&lt;typename _Tp&gt; <span style="color:rgb(0,0,255);line-height:1.5;">const</span> _Tp* ptr(<span style="color:rgb(0,0,255);line-height:1.5;">int</span> y=<span style="color:rgb(128,0,128);line-height:1.5;">0</span>) <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;
    
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> template methods for read-write or read-only element access.
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> note that _Tp must match the actual matrix type -
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> the functions do not do any on-fly type conversion</span>
    template&lt;typename _Tp&gt; _Tp&amp; at(<span style="color:rgb(0,0,255);line-height:1.5;">int</span> y, <span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> x);
    template</span>&lt;typename _Tp&gt; _Tp&amp;<span style="line-height:1.5;"> at(Point pt);
    template</span>&lt;typename _Tp&gt; <span style="color:rgb(0,0,255);line-height:1.5;">const</span> _Tp&amp; at(<span style="color:rgb(0,0,255);line-height:1.5;">int</span> y, <span style="color:rgb(0,0,255);line-height:1.5;">int</span> x) <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;
    template</span>&lt;typename _Tp&gt; <span style="color:rgb(0,0,255);line-height:1.5;">const</span> _Tp&amp; at(Point pt) <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;
    
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> template methods for iteration over matrix elements.
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> the iterators take care of skipping gaps in the end of rows (if any)</span>
    template&lt;typename _Tp&gt; MatIterator_&lt;_Tp&gt;<span style="line-height:1.5;"> begin();
    template</span>&lt;typename _Tp&gt; MatIterator_&lt;_Tp&gt;<span style="line-height:1.5;"> end();
    template</span>&lt;typename _Tp&gt; MatConstIterator_&lt;_Tp&gt; begin() <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;
    template</span>&lt;typename _Tp&gt; MatConstIterator_&lt;_Tp&gt; end() <span style="color:rgb(0,0,255);line-height:1.5;">const</span><span style="line-height:1.5;">;

    </span><span style="color:rgb(0,0,255);line-height:1.5;">enum</span> { MAGIC_VAL=<span style="color:rgb(128,0,128);line-height:1.5;">0x42FF0000</span>, AUTO_STEP=<span style="color:rgb(128,0,128);line-height:1.5;">0</span>, CONTINUOUS_FLAG=<span style="line-height:1.5;">CV_MAT_CONT_FLAG };

    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> includes several bit-fields:
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">  * the magic signature
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">  * continuity flag
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">  * depth
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">  * number of channels</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> flags;
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> the number of rows and columns</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> rows, cols;
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> a distance between successive rows in bytes; includes the gap if any</span>
<span style="line-height:1.5;">    size_t step;
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> pointer to the data</span>
    uchar*<span style="line-height:1.5;"> data;

    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> pointer to the reference counter;
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> when matrix points to user-allocated data, the pointer is NULL</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">int</span>*<span style="line-height:1.5;"> refcount;
    
    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> helper fields used in locateROI and adjustROI</span>
    uchar*<span style="line-height:1.5;"> datastart;
    uchar</span>*<span style="line-height:1.5;"> dataend;
};</span></pre>
    </div> 
    <p><font color="#494949"><span style="font-size:14px;">本文转自博客园Grandyang的博客，原文链接：<a href="http://www.cnblogs.com/grandyang/p/4276250.html" rel="nofollow" title="CvMat and cv::Mat">CvMat and cv::Mat</a>，如需转载请自行联系原博主。</span></font><br></p> 
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
