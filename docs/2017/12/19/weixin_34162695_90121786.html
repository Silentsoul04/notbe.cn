<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>iBATIS In Action：使用映射语句（一） « NotBeCN</title>
  <meta name="description" content="             在前面的章节中，我们了解了iBATIS的sqlMap.config文件的配置，还给出了一个映射语句文件的示例。现在您应该具备了一定基础，可以进一步完善我们的数据访问层了。    本章和下一章（执行非查询语句）将详细讨论在Data Map文件中创建和使用映射语句的相关内容。在本章中，我们将...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/12/19/weixin_34162695_90121786.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">iBATIS In Action：使用映射语句（一）</h1>
    <p class="post-meta">Dec 19, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-family:'宋体';">在前面的章节中，我们了解了</span><span style="line-height:1.8;">iBATIS</span><span style="line-height:1.8;font-family:'宋体';">的</span><span style="line-height:1.8;">sqlMap.config</span><span style="line-height:1.8;font-family:'宋体';">文件的配置，还给出了一个映射语句文件的示例。现在您应该具备了一定基础，可以进一步完善我们的数据访问层了。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-family:'宋体';">本章和下一章（执行非查询语句）将详细讨论在</span><span style="line-height:1.8;">Data Map</span><span style="line-height:1.8;font-family:'宋体';">文件中创建和使用映射语句的相关内容。在本章中，我们将首先浏览映射语句的大体内容以及它们的前提知识。然后我们将解释如何使用映射语句从数据库中获取类型化的对象（</span><span style="line-height:1.8;">typed object</span><span style="line-height:1.8;font-family:'宋体';">），以及如何传入参数来限制返回的数据（比如添加查询条件）。在第五章中，您将学习到如何使用映射语句来更新数据库。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><strong><span style="line-height:1.8;">4.1&nbsp;</span></strong><strong><span style="line-height:1.8;font-family:'宋体';">使用基础</span><span style="line-height:1.8;"></span></strong></p> 
   <p><strong></strong></p> 
   <strong></strong> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><strong><span style="line-height:1.8;">4.1.1&nbsp;</span></strong><strong><span style="line-height:1.8;font-family:'宋体';">创建</span><span style="line-height:1.8;">JavaBeans</span></strong></p> 
   <p><strong></strong></p> 
   <strong></strong> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><strong><span style="line-height:1.8;font-family:'宋体';">译注</span></strong><span style="line-height:1.8;font-family:'宋体';">：原书中本节的内容主要是关于</span><span style="line-height:1.8;">JavaBeans</span><span style="line-height:1.8;font-family:'宋体';">的，相关术语与</span><span style="line-height:1.8;">.NET</span><span style="line-height:1.8;font-family:'宋体';">中差别较大，因此略过，这里只给出一些基本的术语。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;"><strong>JavaBeans</strong></span><span style="line-height:1.8;font-family:'宋体';">：按</span><span style="line-height:1.8;">Sun</span><span style="line-height:1.8;font-family:'宋体';">的定义，</span><span style="line-height:1.8;">JavaBeans</span><span style="line-height:1.8;font-family:'宋体';">是一种</span><span style="line-height:1.8;">Java</span><span style="line-height:1.8;font-family:'宋体';">语言编写的可复用的组件。</span><span style="line-height:1.8;">JavaBeans</span><span style="line-height:1.8;font-family:'宋体';">是一个</span><span style="line-height:1.8;">Java</span><span style="line-height:1.8;font-family:'宋体';">类，它定义了一些属性，可以通过事件与其它</span><span style="line-height:1.8;">Beans</span><span style="line-height:1.8;font-family:'宋体';">进行通信。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;"><strong>POJO</strong></span><span style="line-height:1.8;font-family:'宋体';">：即</span><span style="line-height:1.8;">Plain Old Java Object</span><span style="line-height:1.8;font-family:'宋体';">，引用</span><span style="line-height:1.8;">Martin Fowler</span><span style="line-height:1.8;font-family:'宋体';">的话来说明</span><span style="line-height:1.8;">POJO</span><span style="line-height:1.8;font-family:'宋体';">的定义：</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;">“I've come to the conclusion that people forget about regular Java objects because they haven't got a fancy name - so while preparing for a talk Rebecca Parsons, Josh Mackenzie and I gave them one: POJO (Plain Old Java Object). A POJO domain model is easier to put together, quick to build, can run and test outside of an EJB container, and isn't dependent on EJB (maybe that's why EJB vendors don't encourage you to use them.)”</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;"><strong>POCO</strong></span><span style="line-height:1.8;font-family:'宋体';">：即</span><span style="line-height:1.8;">Plain Old CLR Object</span><span style="line-height:1.8;font-family:'宋体';">。在</span><span style="line-height:1.8;">.NET</span><span style="line-height:1.8;font-family:'宋体';">中，</span><span style="line-height:1.8;">POJO</span><span style="line-height:1.8;font-family:'宋体';">就不再适用了，那么把</span><span style="line-height:1.8;">Java</span><span style="line-height:1.8;font-family:'宋体';">替换为</span><span style="line-height:1.8;">CLR</span><span style="line-height:1.8;font-family:'宋体';">，就是</span><span style="line-height:1.8;">POCO</span><span style="line-height:1.8;font-family:'宋体';">了（我只在某篇文章中看到过，在网上搜不到的</span><span style="line-height:1.8;">…</span><span style="line-height:1.8;font-family:'宋体';">）。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;"><strong>Domain Object</strong></span><span style="line-height:1.8;font-family:'宋体';">：领域对象，这是一个很有争议的词。前段时间园子里曾就此发生过激烈的争论，另外在</span><span style="line-height:1.8;">javaeye</span><span style="line-height:1.8;font-family:'宋体';">上也有一篇</span><span style="line-height:1.8;"><a href="http://www.javaeye.com/topic/11712" rel="nofollow" style="text-decoration:none;color:rgb(61,129,238);border-bottom-width:1px;border-bottom-style:dashed;"><span style="line-height:1.8;font-family:'宋体';"><span style="line-height:1.8;">关于它的讨论</span></span></a></span><span style="line-height:1.8;font-family:'宋体';">，相信很多人都看过了。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-family:'宋体';">通过</span><span style="line-height:1.8;">Martin Fowler</span><span style="line-height:1.8;font-family:'宋体';">的话，我们可以看到</span><span style="line-height:1.8;">POJO</span><span style="line-height:1.8;font-family:'宋体';">的来由，它提供了一个</span><span style="line-height:1.8;">”</span><span style="line-height:1.8;font-family:'宋体';">标准</span><span style="line-height:1.8;">”</span><span style="line-height:1.8;font-family:'宋体';">术语，使得人们对此类对象有了清楚的认识，并且开发人员在讨论问题时找到了</span><span style="line-height:1.8;">”</span><span style="line-height:1.8;font-family:'宋体';">共同语言</span><span style="line-height:1.8;">”</span><span style="line-height:1.8;font-family:'宋体';">。</span><span style="line-height:1.8;">.NET</span><span style="line-height:1.8;font-family:'宋体';">中也需要这样的术语，所以在翻译过程中，我将</span><span style="line-height:1.8;">POJO</span><span style="line-height:1.8;font-family:'宋体';">都对应于</span><span style="line-height:1.8;">POCO</span><span style="line-height:1.8;font-family:'宋体';">。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-family:'宋体';">另外，在使用</span><span style="line-height:1.8;">iBATIS</span><span style="line-height:1.8;font-family:'宋体';">操作数据库时，对象的<strong>属性</strong>（</span><span style="line-height:1.8;">Property</span><span style="line-height:1.8;font-family:'宋体';">）显得尤为重要。这里提一点，注意属性的命名规范，建议使用</span><span style="line-height:1.8;">Pascal case</span><span style="line-height:1.8;font-family:'宋体';">（</span><span style="line-height:1.8;">Java</span><span style="line-height:1.8;font-family:'宋体';">中使用</span><span style="line-height:1.8;">Camel case</span><span style="line-height:1.8;font-family:'宋体';">）。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><strong><span style="line-height:1.8;">4.1.2 SqlMap</span></strong><strong><span style="line-height:1.8;font-family:'宋体';">的</span><span style="line-height:1.8;">API</span></strong></p> 
   <p><strong></strong></p> 
   <strong></strong> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-family:'宋体';">在对</span><span style="line-height:1.8;">JavaBeans</span><span style="line-height:1.8;font-family:'宋体';">有所理解之后，我们将开始查看</span><span style="line-height:1.8;">iBATIS</span><span style="line-height:1.8;font-family:'宋体';">提供的</span><span style="line-height:1.8;">API</span><span style="line-height:1.8;font-family:'宋体';">。</span><strong><span style="line-height:1.8;">ISqlMapper</span></strong><span style="line-height:1.8;font-family:'宋体';">接口有</span><span style="line-height:1.8;">30</span><span style="line-height:1.8;font-family:'宋体';">多个方法，我们将在后面的章节中一一了解。现在，先来看看本章将要用到的几个。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><strong><span style="line-height:1.8;">QueryForObject()</span></strong><strong><span style="line-height:1.8;font-family:'宋体';">方法</span><span style="line-height:1.8;"></span></strong></p> 
   <p><strong></strong></p> 
   <strong></strong> 
   <span style="color:rgb(51,51,51);font-size:10.5pt;font-family:'Times New Roman';">QueryForObject()</span>
   <span style="color:rgb(51,51,51);font-size:10.5pt;font-family:'宋体';">方法用于从数据库中获取单行数据，并将其转换为</span>
   <span style="color:rgb(51,51,51);font-size:10.5pt;font-family:'Times New Roman';">C#</span>
   <span style="color:rgb(51,51,51);font-size:10.5pt;font-family:'宋体';">对象，它共有</span>
   <span style="color:rgb(51,51,51);font-size:10.5pt;font-family:'Times New Roman';">4</span>
   <span style="color:rgb(51,51,51);font-size:10.5pt;font-family:'宋体';">种签名：<br><br></span>
   <div style="border:1px solid rgb(204,204,204);font-size:13px;"> 
    <img alt="" src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align="top" style="border:0px;">
    <span style="color:rgb(0,0,255);">object</span>
    <span style="color:rgb(0,0,0);">&nbsp;QueryForObject(</span>
    <span style="color:rgb(0,0,255);">string</span>
    <span style="color:rgb(0,0,0);">&nbsp;statementName,&nbsp;</span>
    <span style="color:rgb(0,0,255);">object</span>
    <span style="color:rgb(0,0,0);">&nbsp;parameterObject);<br><img alt="" src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align="top" style="border:0px;"></span>
    <span style="color:rgb(0,0,255);">object</span>
    <span style="color:rgb(0,0,0);">&nbsp;QueryForObject(</span>
    <span style="color:rgb(0,0,255);">string</span>
    <span style="color:rgb(0,0,0);">&nbsp;statementName,&nbsp;</span>
    <span style="color:rgb(0,0,255);">object</span>
    <span style="color:rgb(0,0,0);">&nbsp;parameterObject,&nbsp;</span>
    <span style="color:rgb(0,0,255);">object</span>
    <span style="color:rgb(0,0,0);">&nbsp;resultObject);<br><img alt="" src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align="top" style="border:0px;">T&nbsp;QueryForObject</span>
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">T</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);">(</span>
    <span style="color:rgb(0,0,255);">string</span>
    <span style="color:rgb(0,0,0);">&nbsp;statementName,&nbsp;</span>
    <span style="color:rgb(0,0,255);">object</span>
    <span style="color:rgb(0,0,0);">&nbsp;parameterObject);<br><img alt="" src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align="top" style="border:0px;">T&nbsp;QueryForObject</span>
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">T</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);">(</span>
    <span style="color:rgb(0,0,255);">string</span>
    <span style="color:rgb(0,0,0);">&nbsp;statementName,&nbsp;</span>
    <span style="color:rgb(0,0,255);">object</span>
    <span style="color:rgb(0,0,0);">&nbsp;parameterObject,&nbsp;T&nbsp;instanceObject);<br></span> 
   </div> 
   <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">首先可以把它们分为两种：泛型和非泛型。每一种又分别有两个版本，第一个版本更为常用，它会使用默认构造函数创建一个新的对象返回（否则会在运行时抛出异常）；第二个版本接受一个对象将其作为返回值——在执行映射语句后，会设置它的相应属性，而不是创建新的对象。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">如果我们要使用的对象不容易创建，比如缺少缺省的构造函数，或者构造函数是受保护的（</span><span style="line-height:1.8;">protected</span><span style="line-height:1.8;">），那么第二种版本（接受三个参数）会很有用。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">需要注意的是，调用</span><span style="line-height:1.8;">QueryForObject()</span><span style="line-height:1.8;">方法时，如果查询结果多于一行，那么</span><span style="line-height:1.8;">iBATIS</span><span style="line-height:1.8;">只会接受第一行记录，其它的记录则忽略不计。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;"><strong><span style="line-height:1.8;">QueryForList()&nbsp;</span></strong><strong><span style="line-height:1.8;">方法</span><span style="line-height:1.8;"></span></strong></p> 
   <p><strong></strong></p> 
   <strong></strong> 
   <div style="border:1px solid rgb(204,204,204);font-size:13px;"> 
    <img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">
    <span style="color:rgb(0,0,0);">IList&nbsp;QueryForList(</span>
    <span style="color:rgb(0,0,255);">string</span>
    <span style="color:rgb(0,0,0);">&nbsp;statementName,&nbsp;</span>
    <span style="color:rgb(0,0,255);">object</span>
    <span style="color:rgb(0,0,0);">&nbsp;parameterObject);<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;"></span>
    <span style="color:rgb(0,0,255);">void</span>
    <span style="color:rgb(0,0,0);">&nbsp;QueryForList(</span>
    <span style="color:rgb(0,0,255);">string</span>
    <span style="color:rgb(0,0,0);">&nbsp;statementName,&nbsp;</span>
    <span style="color:rgb(0,0,255);">object</span>
    <span style="color:rgb(0,0,0);">&nbsp;parameterObject,&nbsp;IList&nbsp;resultObject);<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">IList&nbsp;QueryForList(</span>
    <span style="color:rgb(0,0,255);">string</span>
    <span style="color:rgb(0,0,0);">&nbsp;statementName,&nbsp;</span>
    <span style="color:rgb(0,0,255);">object</span>
    <span style="color:rgb(0,0,0);">&nbsp;parameterObject,&nbsp;</span>
    <span style="color:rgb(0,0,255);">int</span>
    <span style="color:rgb(0,0,0);">&nbsp;skipResults,&nbsp;</span>
    <span style="color:rgb(0,0,255);">int</span>
    <span style="color:rgb(0,0,0);">&nbsp;maxResults);<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">IList</span>
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">T</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);">&nbsp;QueryForList</span>
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">T</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);">(</span>
    <span style="color:rgb(0,0,255);">string</span>
    <span style="color:rgb(0,0,0);">&nbsp;statementName,&nbsp;</span>
    <span style="color:rgb(0,0,255);">object</span>
    <span style="color:rgb(0,0,0);">&nbsp;parameterObject);<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;"></span>
    <span style="color:rgb(0,0,255);">void</span>
    <span style="color:rgb(0,0,0);">&nbsp;QueryForList</span>
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">T</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);">(</span>
    <span style="color:rgb(0,0,255);">string</span>
    <span style="color:rgb(0,0,0);">&nbsp;statementName,&nbsp;</span>
    <span style="color:rgb(0,0,255);">object</span>
    <span style="color:rgb(0,0,0);">&nbsp;parameterObject,&nbsp;IList</span>
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">T</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);">&nbsp;resultObject);<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">IList</span>
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">T</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);">&nbsp;QueryForList</span>
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">T</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);">(</span>
    <span style="color:rgb(0,0,255);">string</span>
    <span style="color:rgb(0,0,0);">&nbsp;statementName,&nbsp;</span>
    <span style="color:rgb(0,0,255);">object</span>
    <span style="color:rgb(0,0,0);">&nbsp;parameterObject,&nbsp;</span>
    <span style="color:rgb(0,0,255);">int</span>
    <span style="color:rgb(0,0,0);">&nbsp;skipResults,&nbsp;</span>
    <span style="color:rgb(0,0,255);">int</span>
    <span style="color:rgb(0,0,0);">&nbsp;maxResults);<br></span> 
   </div> 
   <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">QueryFoList()</span><span style="line-height:1.8;">方法用于数据库中获取一行或多行数据，将其转化为</span><span style="line-height:1.8;">POCO</span><span style="line-height:1.8;">的列表返回，与</span><span style="line-height:1.8;">QueryForObject()</span><span style="line-height:1.8;">方法类似，</span><span style="line-height:1.8;">QueryFoList()</span><span style="line-height:1.8;">方法也分泛型和非泛型之分。每一种有三个版本，这里以<strong>泛型的三个版本</strong>进行说明。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">第一个版本将映射语句的所有结果转化为对象返回；第二个版本与第一个类似，只是将结果存放在参数</span><span style="line-height:1.8;">resultObject</span><span style="line-height:1.8;">中返回；第三个版本返回查询结果的一个子集——跳过</span><span style="line-height:1.8;">skip</span><span style="line-height:1.8;">参数指定数目的记录，然后返回</span><span style="line-height:1.8;">max</span><span style="line-height:1.8;">参数指定数目的结果。因此，如果映射语句本来返回的是</span><span style="line-height:1.8;">100</span><span style="line-height:1.8;">行记录，但您只需要</span><span style="line-height:1.8;">11</span><span style="line-height:1.8;">－</span><span style="line-height:1.8;">20</span><span style="line-height:1.8;">行，那么只需要将</span><span style="line-height:1.8;">skip</span><span style="line-height:1.8;">和</span><span style="line-height:1.8;">max</span><span style="line-height:1.8;">参数分别设置为</span><span style="line-height:1.8;">10</span><span style="line-height:1.8;">、</span><span style="line-height:1.8;">10</span><span style="line-height:1.8;">即可。</span><strong><span style="line-height:1.8;"></span></strong></p> 
   <p><strong></strong></p> 
   <strong></strong> 
   <p align="left" style="line-height:1.8;font-size:13px;"><strong>译注：</strong><span style="line-height:1.8;">上面说的第三个版本在开发中很有用，结合</span><span style="line-height:1.8;">ObjectDataSource</span><span style="line-height:1.8;">会更强大，请参看我曾写过的</span><span style="line-height:1.8;"><a href="http://www.cnblogs.com/anderslly/archive/2007/06/21/ibatisodspaging.html" rel="nofollow" style="text-decoration:none;color:rgb(61,129,238);border-bottom-width:1px;border-bottom-style:dashed;"><span style="line-height:1.8;"><span style="line-height:1.8;">一篇小文</span></span></a></span><span style="line-height:1.8;">。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;"><strong><span style="line-height:1.8;">QueryForMap()&nbsp;</span></strong><strong>方法</strong></p> 
   <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">QueryForMap()</span><span style="line-height:1.8;">方法从数据库获取一行或多行记录，将结果转换为</span><span style="line-height:1.8;">C#</span><span style="line-height:1.8;">对象，然后放在一个</span><span style="line-height:1.8;">IDictionary</span><span style="line-height:1.8;">（而不是</span><span style="line-height:1.8;">IList</span><span style="line-height:1.8;">）中返回。它有两个版本：</span></p> 
   <div style="border:1px solid rgb(204,204,204);font-size:13px;"> 
    <img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">
    <span style="color:rgb(0,0,0);">IDictionary&nbsp;QueryForMap(</span>
    <span style="color:rgb(0,0,255);">string</span>
    <span style="color:rgb(0,0,0);">&nbsp;statementName,&nbsp;</span>
    <span style="color:rgb(0,0,255);">object</span>
    <span style="color:rgb(0,0,0);">&nbsp;parameterObject,&nbsp;</span>
    <span style="color:rgb(0,0,255);">string</span>
    <span style="color:rgb(0,0,0);">&nbsp;keyProperty);<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">IDictionary&nbsp;QueryForMap(</span>
    <span style="color:rgb(0,0,255);">string</span>
    <span style="color:rgb(0,0,0);">&nbsp;statementName,&nbsp;</span>
    <span style="color:rgb(0,0,255);">object</span>
    <span style="color:rgb(0,0,0);">&nbsp;parameterObject,&nbsp;</span>
    <span style="color:rgb(0,0,255);">string</span>
    <span style="color:rgb(0,0,0);">&nbsp;keyProperty,&nbsp;</span>
    <span style="color:rgb(0,0,255);">string</span>
    <span style="color:rgb(0,0,0);">&nbsp;valueProperty);<br></span> 
   </div> 
   <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">第一个版本会执行一个查询，返回一个包含对象的</span><span style="line-height:1.8;">IDictionary</span><span style="line-height:1.8;">（键值对），</span><span style="line-height:1.8;">IDictionary</span><span style="line-height:1.8;">的</span><span style="line-height:1.8;">key</span><span style="line-height:1.8;">由</span><span style="line-height:1.8;font-size:8pt;font-family:Consolas;">keyProperty</span><span style="line-height:1.8;">指定，其</span><span style="line-height:1.8;">value</span><span style="line-height:1.8;">则是由对应的记录行转换来的对象。第二个版本与第一个类似，但它的</span><span style="line-height:1.8;">value</span><span style="line-height:1.8;">是由</span><span style="line-height:1.8;font-size:8pt;font-family:Consolas;">valueProperty</span><span style="line-height:1.8;">指定的，而不是整个对象。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">该方法值得一说。来考虑一种情况：我们有一条映射语句，它返回一组账户（</span><span style="line-height:1.8;">account</span><span style="line-height:1.8;">）信息。使用第一个方法，使用第一个版本，我们将得到一个</span><span style="line-height:1.8;">IDictionary</span><span style="line-height:1.8;">，它的</span><span style="line-height:1.8;">accountId</span><span style="line-height:1.8;">为</span><span style="line-height:1.8;">key</span><span style="line-height:1.8;">，而整个</span><span style="line-height:1.8;">account</span><span style="line-height:1.8;">对象则作为</span><span style="line-height:1.8;">value</span><span style="line-height:1.8;">。使用第二个版本，则可以得到另一个</span><span style="line-height:1.8;">IDictionary</span><span style="line-height:1.8;">，它的</span><span style="line-height:1.8;">accountId</span><span style="line-height:1.8;">为</span><span style="line-height:1.8;">key</span><span style="line-height:1.8;">，只将</span><span style="line-height:1.8;">accountName</span><span style="line-height:1.8;">作为</span><span style="line-height:1.8;">value</span><span style="line-height:1.8;">：<br><br></span></p> 
   <div style="border:1px solid rgb(204,204,204);font-size:13px;"> 
    <img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">
    <span style="color:rgb(0,0,0);">IDictionary&nbsp;accounts&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;sqlMapper.QueryForMap(</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">Account.getAll</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">,&nbsp;</span>
    <span style="color:rgb(0,0,255);">null</span>
    <span style="color:rgb(0,0,0);">,&nbsp;</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">accountId</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">);<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">accounts&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;sqlMapper.QueryForMap(</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">Account.getAll</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">,&nbsp;</span>
    <span style="color:rgb(0,0,255);">null</span>
    <span style="color:rgb(0,0,0);">,&nbsp;</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">accountId</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">,&nbsp;</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">accountName</span>
    <span style="color:rgb(0,0,0);">"</span>
    <span style="color:rgb(0,0,0);">);<br></span> 
   </div> 
   <br>
   <p align="left" style="line-height:1.8;font-size:13px;"><strong>译注</strong><span style="line-height:1.8;">：</span><span style="line-height:1.8;">”Map”</span><span style="line-height:1.8;">这个名称是</span><span style="line-height:1.8;">Java</span><span style="line-height:1.8;">里的，按</span><span style="line-height:1.8;">.NET</span><span style="line-height:1.8;">的精神，应该是</span><span style="line-height:1.8;">Dictionary</span><span style="line-height:1.8;">，所以</span><span style="line-height:1.8;">iBATIS.NET</span><span style="line-height:1.8;">提供了该方法的别名方法：</span><span style="line-height:1.8;">QueryForDictionary</span><span style="line-height:1.8;">。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">现在，您已经了解了使用</span><span style="line-height:1.8;">iBATIS</span><span style="line-height:1.8;">所需要的各个</span><span style="line-height:1.8;">API</span><span style="line-height:1.8;">，接下来再看看创建映射语句的不同方式。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;"><strong><span style="line-height:1.8;">4.1.3&nbsp;</span></strong><strong><span style="line-height:1.8;">映射语句的类型</span><span style="line-height:1.8;"></span></strong></p> 
   <p><strong></strong></p> 
   <strong></strong> 
   <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">前面我们讨论了</span><strong><span style="line-height:1.8;">ISqlMapper</span></strong><span style="line-height:1.8;">的</span><span style="line-height:1.8;">API</span><span style="line-height:1.8;">的用法，别急，再使用这些</span><span style="line-height:1.8;">API</span><span style="line-height:1.8;">之前，还得了解一下如何创建各种映射语句。在上个例子中，我们执行了一条名称为</span><span style="line-height:1.8;">Account.getAll</span><span style="line-height:1.8;">的映射语句，但却没看到它是什么样子的（不过在第二章中，我们的示例中曾有过映射语句的例子），它实际上是一条</span><span style="line-height:1.8;">&lt;select&gt;</span><span style="line-height:1.8;">语句。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">iBATIS</span><span style="line-height:1.8;">中共有几种类型的映射语句，每一种都有自己的作用以及一组特性（</span><span style="line-height:1.8;">attribute</span><span style="line-height:1.8;">）和子元素。这似乎是很简单的，但一般情况下，我们<strong>最好使用最匹配的语句类型</strong>（比如，使用</span><span style="line-height:1.8;">&lt;insert&gt;</span><span style="line-height:1.8;">来插入数据，而不是使用</span><span style="line-height:1.8;">&lt;update&gt;</span><span style="line-height:1.8;">语句，也不要使用更通用</span><span style="line-height:1.8;">&lt;statement&gt;</span><span style="line-height:1.8;">语句），因为精确的语句类型更容易理解，在某些情况下还能提供额外的功能（就像使用</span><span style="line-height:1.8;">&lt;insert&gt;</span><span style="line-height:1.8;">时，它有一个</span><span style="line-height:1.8;">&lt;selectKey&gt;</span><span style="line-height:1.8;">子元素——我们将在</span><span style="line-height:1.8;">5.2</span><span style="line-height:1.8;">节中讨论）。</span></p> 
   <span style="font-size:10.5pt;">表</span>
   <span style="font-size:10.5pt;font-family:'Times New Roman';">4.1</span>
   <span style="font-size:10.5pt;">包含了各种类型语句的描述。</span> 
   <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;"></span></p> 
   <p></p> 
   <table class="MsoTableGrid" border="1" style="border:medium none;border-collapse:collapse;margin-left:5.4pt;">
    <tbody>
     <tr>
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;background:rgb(204,204,204) none repeat scroll 0% 50%;width:79.8pt;"> <p align="center" style="line-height:1.8;font-size:13px;text-align:center;"><strong><span style="line-height:1.8;">语句类型</span><span style="line-height:1.8;"></span></strong></p> <p><strong></strong></p> <strong></strong> </td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;background:rgb(204,204,204) none repeat scroll 0% 50%;width:85.2pt;"> <p align="center" style="line-height:1.8;font-size:13px;text-align:center;"><strong><span style="line-height:1.8;">特性</span><span style="line-height:1.8;"></span></strong></p> <p><strong></strong></p> <strong></strong> </td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;background:rgb(204,204,204) none repeat scroll 0% 50%;width:96pt;"> <p align="center" style="line-height:1.8;font-size:13px;text-align:center;"><strong><span style="line-height:1.8;">子元素</span><span style="line-height:1.8;"></span></strong></p> <p><strong></strong></p> <strong></strong> </td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;background:rgb(204,204,204) none repeat scroll 0% 50%;width:74.45pt;"> <p align="center" style="line-height:1.8;font-size:13px;text-align:center;"><strong><span style="line-height:1.8;">用途</span><span style="line-height:1.8;"></span></strong></p> <p><strong></strong></p> <strong></strong> </td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;background:rgb(204,204,204) none repeat scroll 0% 50%;width:78.55pt;"> <p align="center" style="line-height:1.8;font-size:13px;text-align:center;"><strong><span style="line-height:1.8;">详细内容参考</span><span style="line-height:1.8;"></span></strong></p> <p><strong></strong></p> <strong></strong> </td> 
     </tr>
     <tr>
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:79.8pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">&lt;select&gt;</span></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;background:rgb(230,230,230) none repeat scroll 0% 50%;width:85.2pt;"> <pre><span style="font-size:10.5pt;font-family:'Times New Roman';">id </span></pre> <p></p> <pre><span style="font-size:10.5pt;font-family:'Times New Roman';">parameterClass </span></pre> <p></p> <pre><span style="font-size:10.5pt;font-family:'Times New Roman';">resultClass </span></pre> <p></p> <pre><span style="font-size:10.5pt;font-family:'Times New Roman';">listClass</span></pre> <p></p> <pre><span style="font-size:10.5pt;font-family:'Times New Roman';">parameterMap </span></pre> <p></p> <pre><span style="font-size:10.5pt;font-family:'Times New Roman';">resultMap </span></pre> <p></p> <pre><span style="font-size:10.5pt;font-family:'Times New Roman';">cacheModel</span></pre> <p></p> <pre><span style="font-size:10.5pt;font-family:'Times New Roman';">extends</span></pre> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:96pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">所有动态元素</span></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:74.45pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">查询数据</span></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:78.55pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">4.2</span><span style="line-height:1.8;">节；<span style="line-height:1.8;"><br></span>第<span style="line-height:1.8;">8</span>章</span></p> </td> 
     </tr>
     <tr>
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:79.8pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">&lt;insert&gt;</span></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;background:rgb(230,230,230) none repeat scroll 0% 50%;width:85.2pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">id parameterClass parameterMap</span></p> <p></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:96pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">所有动态元素</span><span style="line-height:1.8;">&lt;selectKey&gt; &lt;generate&gt;</span></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:74.45pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">插入数据</span></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:78.55pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">5.2</span><span style="line-height:1.8;">节；<span style="line-height:1.8;"><br></span>第<span style="line-height:1.8;">8</span>章</span></p> </td> 
     </tr>
     <tr>
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:79.8pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">&lt;update&gt;</span></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;background:rgb(230,230,230) none repeat scroll 0% 50%;width:85.2pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">id<br> parameterClass parameterMap extends</span></p> <p></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:96pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">所有动态元素</span></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:74.45pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">更新数据</span></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:78.55pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">5.3</span><span style="line-height:1.8;">节；<span style="line-height:1.8;"><br></span>第<span style="line-height:1.8;">8</span>章</span></p> </td> 
     </tr>
     <tr>
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:79.8pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">&lt;delete&gt;</span></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;background:rgb(230,230,230) none repeat scroll 0% 50%;width:85.2pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">id<br> parameterClass parameterMap extends</span></p> <p></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:96pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">所有动态元素</span></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:74.45pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">删除数据</span></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:78.55pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">5.3</span><span style="line-height:1.8;">节；<span style="line-height:1.8;"><br></span>第<span style="line-height:1.8;">8</span>章</span></p> </td> 
     </tr>
     <tr>
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:79.8pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">&lt;procedure&gt;</span></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;background:rgb(230,230,230) none repeat scroll 0% 50%;width:85.2pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">id&nbsp;<br> parameterMap resultClass resultMap cacheModel</span></p> <p></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:96pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">所有动态元素</span></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:74.45pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">执行存储过程</span></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:78.55pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">5.5</span><span style="line-height:1.8;">节；<span style="line-height:1.8;"><br></span>第<span style="line-height:1.8;">8</span>章</span></p> </td> 
     </tr>
     <tr>
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:79.8pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">&lt;statement&gt;</span></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;background:rgb(230,230,230) none repeat scroll 0% 50%;width:85.2pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">id parameterClass resultClass listClass parameterMap resultMap cacheModel</span></p> <p></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:96pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">所有动态元素</span></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:74.45pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">可以包含任意类型的语句，几乎无所不能</span></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:78.55pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">6.3.1</span><span style="line-height:1.8;">节；<span style="line-height:1.8;"><br></span>第<span style="line-height:1.8;">8</span>章</span></p> </td> 
     </tr>
    </tbody>
   </table>
   <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;"></span></p> 
   <p><strong><span style="line-height:1.8;">译注</span></strong><span style="line-height:1.8;">：在</span><span style="line-height:1.8;">iBATIS.NET</span><span style="line-height:1.8;">的</span><span style="line-height:1.8;">DataMapper1.6.1</span><span style="line-height:1.8;">版本中，还有另外两个与语句相关的元素：</span><span style="line-height:1.8;">&lt;sql&gt;</span><span style="line-height:1.8;">和</span><span style="line-height:1.8;">&lt;include&gt;</span><span style="line-height:1.8;">，能给我们带来更多方便，详细内容请参看</span><span style="line-height:1.8;">iBATIS</span><span style="line-height:1.8;">官方文档。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">在本章中，我们会只关注</span><span style="line-height:1.8;">&lt;select&gt;</span><span style="line-height:1.8;">类型的语句。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;"><strong><span style="line-height:1.8;">4.2&nbsp;</span></strong><strong><span style="line-height:1.8;">使用</span><span style="line-height:1.8;">&lt;select&gt;</span></strong><strong><span style="line-height:1.8;">语句</span><span style="line-height:1.8;"></span></strong></p> 
   <p><strong></strong></p> 
   <strong></strong> 
   <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">从数据库查询数据是应用程序最基本的用途之一。</span><span style="line-height:1.8;">iBATIS</span><span style="line-height:1.8;">框架使大部分情况下的</span><span style="line-height:1.8;">SELECT</span><span style="line-height:1.8;">语句变得简单，并提供了大量特性，可以满足您对访问数据库的任何需要。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;"><strong><span style="line-height:1.8;">4.2.1&nbsp;</span></strong><strong><span style="line-height:1.8;">在内联参数中使用</span><span style="line-height:1.8;">#</span></strong><strong><span style="line-height:1.8;">占位符</span><span style="line-height:1.8;"></span></strong></p> 
   <p><strong></strong></p> 
   <strong></strong> 
   <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">到目前为止，前面的所以示例都过于简单，我们很少会去执行没有条件的查询。如果要给映射语句添加查询条件，内联参数是一种简单的方法，它在使用时有两种方式。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">第一种方式是使用</span><span style="line-height:1.8;">#</span><span style="line-height:1.8;">语法。下面这个简单的例子演示了如何传入一个简单的内联参数，然后通过</span><span style="line-height:1.8;">accountId</span><span style="line-height:1.8;">获取单个的</span><span style="line-height:1.8;">Account</span><span style="line-height:1.8;">对象：</span></p> 
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"></span> 
   <div style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;border:1px solid rgb(204,204,204);font-size:13px;"> 
    <img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">
    <span style="color:rgb(0,0,255);">&lt;</span>
    <span style="color:rgb(128,0,0);">select&nbsp;</span>
    <span style="color:rgb(255,0,0);">id</span>
    <span style="color:rgb(0,0,255);">="getByIdValue"</span>
    <span style="color:rgb(255,0,0);">&nbsp;resultClass</span>
    <span style="color:rgb(0,0,255);">="Account"</span>
    <span style="color:rgb(0,0,255);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;select<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;accountId,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;username,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;password,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;firstName,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;lastName,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;address1,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;address2,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;city,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;state,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;postalCode,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;country<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;Account<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;where&nbsp;accountId&nbsp;=&nbsp;#value#<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;"></span>
    <span style="color:rgb(0,0,255);">&lt;/</span>
    <span style="color:rgb(128,0,0);">select</span>
    <span style="color:rgb(0,0,255);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br></span> 
   </div> 
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-family:'宋体';">这里的</span><span style="line-height:1.8;">#value#</span><span style="line-height:1.8;font-family:'宋体';">字符串告诉</span><span style="line-height:1.8;">iBATIS</span><span style="line-height:1.8;font-family:'宋体';">，该语句接受一个简单参数。这条语句可以如是调用：</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;">Account account = sqlMapper.QueryForObject(“Account.getByIdValue”, 1) as Account;</span></p> 
   <span style="color:rgb(51,51,51);font-size:10.5pt;font-family:'宋体';">好，让我们看一下执行这条语句时，</span>
   <span style="color:rgb(51,51,51);font-size:10.5pt;font-family:'Times New Roman';">iBATIS</span>
   <span style="color:rgb(51,51,51);font-size:10.5pt;font-family:'宋体';">做了哪些事情。首先，它会查找</span>
   <span style="color:rgb(51,51,51);font-size:10.5pt;font-family:'Times New Roman';">id</span>
   <span style="color:rgb(51,51,51);font-size:10.5pt;font-family:'宋体';">为</span>
   <span style="color:rgb(51,51,51);font-size:10.5pt;font-family:'Times New Roman';">Account.getByIdValue</span>
   <span style="color:rgb(51,51,51);font-size:10.5pt;font-family:'宋体';">的语句，将</span>
   <span style="color:rgb(51,51,51);font-size:10.5pt;font-family:'Times New Roman';">#value#</span>
   <span style="color:rgb(51,51,51);font-size:10.5pt;font-family:'宋体';">占位符转换为</span>
   <span style="color:rgb(51,51,51);font-size:10.5pt;font-family:'Times New Roman';">ADO.NET</span>
   <span style="color:rgb(51,51,51);font-size:10.5pt;font-family:'宋体';">中的参数：</span>
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <div style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;border:1px solid rgb(204,204,204);font-size:13px;"> 
    <img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;select<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;accountId,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;username,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;password,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;firstName,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;lastName,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;address1,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;address2,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;city,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;state,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;postalCode,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;country<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;Account<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;where&nbsp;accountId&nbsp;=&nbsp;@param0<br></span> 
   </div> 
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-family:'宋体';">接着，将参数的值设置为</span><span style="line-height:1.8;">1</span><span style="line-height:1.8;font-family:'宋体';">（见上面代码中的</span><span style="line-height:1.8;">QueryForObject()</span><span style="line-height:1.8;font-family:'宋体';">方法的第二个参数）；最后执行这条语句。</span><span style="line-height:1.8;">iBATIS</span><span style="line-height:1.8;font-family:'宋体';">获取结果记录，将其映射为一个对象，然后返回。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-family:'宋体';">尽管这些内容看起来是比较底层的信息，但我们应当理解它。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-family:'宋体';">最常遇到的问题之一便是：“我在</span><span style="line-height:1.8;">WHERE</span><span style="line-height:1.8;font-family:'宋体';">子句中如何使用</span><span style="line-height:1.8;">LIKE</span><span style="line-height:1.8;font-family:'宋体';">？”。看看前面那条语句，显然输入参数应当含有通配符（</span><span style="line-height:1.8;">wildchar</span><span style="line-height:1.8;font-family:'宋体';">），而且也不太容易将其插入到</span><span style="line-height:1.8;">SQL</span><span style="line-height:1.8;font-family:'宋体';">语句中。这个问题有三种解决方案：</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-family:'宋体';">输入参数的值含有</span><span style="line-height:1.8;">SQL</span><span style="line-height:1.8;font-family:'宋体';">中的通配符（如</span><span style="line-height:1.8;">T-SQL</span><span style="line-height:1.8;font-family:'宋体';">中的</span><span style="line-height:1.8;">%</span><span style="line-height:1.8;font-family:'宋体';">）。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-family:'宋体';">要搜索的文本是可被参数化的</span><span style="line-height:1.8;">SQL</span><span style="line-height:1.8;font-family:'宋体';">表达式（如</span><span style="line-height:1.8;font-family:'宋体';">'%' + #value# + '%'</span><span style="line-height:1.8;font-family:'宋体';">）的一部分。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-family:'宋体';">使用文本替换方法（这就是下一个主题的内容了，见</span><span style="line-height:1.8;">4.2.2</span><span style="line-height:1.8;font-family:'宋体';">）。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><strong><span style="line-height:1.8;">4.2.2&nbsp;</span></strong><strong><span style="line-height:1.8;font-family:'宋体';">在内联参数中使用</span><span style="line-height:1.8;">$</span></strong><strong><span style="line-height:1.8;font-family:'宋体';">占位符</span><span style="line-height:1.8;"></span></strong></p> 
   <p><strong></strong></p> 
   <strong></strong> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-family:'宋体';">内联参数的另一种方式是使用文本替换（</span><span style="line-height:1.8;">$</span><span style="line-height:1.8;font-family:'宋体';">）语法，它将一个值直接插入</span><span style="line-height:1.8;">SQL</span><span style="line-height:1.8;font-family:'宋体';">。<strong>使用这种方法时要当心，因为它会带来</strong></span><strong><span style="line-height:1.8;">SQL</span></strong><strong><span style="line-height:1.8;font-family:'宋体';">注入的危险，如果滥用，还会带来性能问题</span></strong><span style="line-height:1.8;font-family:'宋体';">。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-family:'宋体';">这也是使用</span><span style="line-height:1.8;">LIKE</span><span style="line-height:1.8;font-family:'宋体';">操作符的一种方法。看这个例子：</span></p> 
   <div style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;border:1px solid rgb(204,204,204);font-size:13px;"> 
    <img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">
    <span style="color:rgb(0,0,255);">&lt;</span>
    <span style="color:rgb(128,0,0);">select&nbsp;</span>
    <span style="color:rgb(255,0,0);">id</span>
    <span style="color:rgb(0,0,255);">="getByLikeCity"</span>
    <span style="color:rgb(255,0,0);">&nbsp;resultClass</span>
    <span style="color:rgb(0,0,255);">="Account"</span>
    <span style="color:rgb(0,0,255);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;select<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;accountId,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;username,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;password,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;firstName,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;lastName,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;address1,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;address2,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;city,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;state,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;postalCode,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;country<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;Account<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;where&nbsp;city&nbsp;like&nbsp;‘%<span class="MathJax" style="line-height:normal;word-spacing:normal;border:0px;"><span class="math" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.25px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">v</span><span class="mi" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">a</span><span class="mi" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">l</span><span class="mi" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">u</span><span class="mi" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">e</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.073em;line-height:normal;width:0px;"></span></span><span class="MJX_Assistive_MathML" style="border:0px;vertical-align:0px;line-height:normal;width:1px;">value</span></span>%’<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;"></span>
    <span style="color:rgb(0,0,255);">&lt;/</span>
    <span style="color:rgb(128,0,0);">select</span>
    <span style="color:rgb(0,0,255);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br></span> 
   </div> 
   <br style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-family:'宋体';">这条语句跟前面那个（使用</span><span style="line-height:1.8;">#</span><span style="line-height:1.8;font-family:'宋体';">的）的区别在于</span><span style="line-height:1.8;">iBATIS</span><span style="line-height:1.8;font-family:'宋体';">处理输入参数的方式。执行这条语句所需的代码是一样的：</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;">accountList = sqlMapper.QueryForList(“Account.getByLikeCity”, “burg”);</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-family:'宋体';">这一次，</span><span style="line-height:1.8;">iBATIS</span><span style="line-height:1.8;font-family:'宋体';">将语句转化为：</span></p> 
   <div style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;border:1px solid rgb(204,204,204);font-size:13px;"> 
    <img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;select<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;accountId,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;username,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;password,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;firstName,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;lastName,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;address1,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;address2,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;city,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;state,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;postalCode,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;country<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;Account<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;where&nbsp;city&nbsp;like‘%<span class="MathJax" style="line-height:normal;word-spacing:normal;border:0px;"><span class="math" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;font-size:16.25px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">b</span><span class="mi" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">u</span><span class="mi" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">r</span><span class="mi" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">g<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px;border-left-style:solid;vertical-align:-.304em;line-height:normal;width:0px;"></span></span><span class="MJX_Assistive_MathML" style="border:0px;vertical-align:0px;line-height:normal;width:1px;">burg</span></span>%’<img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;"></span> 
   </div> 
   <span style="color:rgb(51,51,51);font-size:10.5pt;font-family:'宋体';"><br> 没有设置任何参数，因为语句已经是完整的了。需要再次强调的是，使用这种方法会让我们的程序更易受到</span>
   <span style="color:rgb(51,51,51);font-size:10.5pt;font-family:'Times New Roman';">SQL</span>
   <span style="color:rgb(51,51,51);font-size:10.5pt;font-family:'宋体';">注入的攻击。<br></span>
   <span style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"></span> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><strong><span style="line-height:1.8;">4.2.3&nbsp;</span></strong><strong><span style="line-height:1.8;font-family:'宋体';">关于</span><span style="line-height:1.8;">SQL</span></strong><strong><span style="line-height:1.8;font-family:'宋体';">注入</span><span style="line-height:1.8;"></span></strong></p> 
   <p><strong></strong></p> 
   <strong></strong> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-family:'宋体';">所谓</span><span style="line-height:1.8;">SQL</span><span style="line-height:1.8;font-family:'宋体';">注入攻击，是指一些恶意用户向应用程序输入一些特殊形式的数据，使得程序执行一些意想不到的行为。例如，在上面的语句（</span><span style="line-height:1.8;">4.2.2</span><span style="line-height:1.8;font-family:'宋体';">）中，如果用户输入的值是：<br><br></span></p> 
   <div style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;border:1px solid rgb(204,204,204);font-size:13px;"> 
    <img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">
    <span style="color:rgb(0,0,0);">burg’;&nbsp;drop&nbsp;table&nbsp;Account;&nbsp;--</span> 
   </div> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-size:10.5pt;font-family:'宋体';">它会将我们的</span><span style="line-height:1.8;font-size:10.5pt;font-family:'Times New Roman';">select</span><span style="line-height:1.8;font-size:10.5pt;font-family:'宋体';">语句转化为这样“邪恶”的形式：<br></span></p> 
   <div style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;border:1px solid rgb(204,204,204);font-size:13px;"> 
    <img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;select<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;accountId,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;username,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;password,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;firstName,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;lastName,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;address1,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;address2,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;city,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;state,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;postalCode,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;country<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;Account<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;where&nbsp;city&nbsp;like&nbsp;‘%burg’;&nbsp;drop&nbsp;table&nbsp;Account;&nbsp;--%’<br></span> 
   </div> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-family:'宋体';">这下好了，我们的那些聪明的用户从数据库中查询出了所有以</span><span style="line-height:1.8;">burg</span><span style="line-height:1.8;font-family:'宋体';">结尾的记录，这还没什么大问题。但他还从数据库删除了一张表（如果只是一个，也算幸运了——如果他真的够聪明，他会知道机会难得，从而会试着删除多张表）。字符串末尾的“</span><span style="line-height:1.8;">--</span><span style="line-height:1.8;font-family:'宋体';">”告诉数据库忽略</span><span style="line-height:1.8;">drop</span><span style="line-height:1.8;font-family:'宋体';">语句后的所有内容，因此该语句不会抛出异常。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-family:'宋体';">如果是由于你的代码问题，让这种事情发生在生产环境中的真实应用程序中，那么这一天你在办公室里就不太好过了。就像我们提到过的，谨慎使用替换（</span><span style="line-height:1.8;">$</span><span style="line-height:1.8;font-family:'宋体';">）语法。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><strong><span style="line-height:1.8;">4.2.4&nbsp;</span></strong><strong><span style="line-height:1.8;font-family:'宋体';">自动结果映射</span><span style="line-height:1.8;"></span></strong></p> 
   <p><strong></strong></p> 
   <strong></strong> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-family:'宋体';">您可能已经注意到，我们在前面的例子中没有定义</span><span style="line-height:1.8;">result map</span><span style="line-height:1.8;font-family:'宋体';">，而是使用了</span><span style="line-height:1.8;">result class</span><span style="line-height:1.8;font-family:'宋体';">。</span><span style="line-height:1.8;">iBATIS</span><span style="line-height:1.8;font-family:'宋体';">的自动结果映射可以让语句正常工作，它会自动创建一个</span><span style="line-height:1.8;">result map</span><span style="line-height:1.8;font-family:'宋体';">，并在执行时将其应用到语句上。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-family:'宋体';">共有三种方式来使用这个特性：单列查询，固定列列表查询以及动态列列表查询。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-size:10.5pt;font-family:'宋体';">如果您只想从查询中获取单个列的值，可以使用自动结果映射：<br></span></p> 
   <div style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;border:1px solid rgb(204,204,204);font-size:13px;"> 
    <img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">
    <span style="color:rgb(0,0,255);">&lt;</span>
    <span style="color:rgb(128,0,0);">select&nbsp;</span>
    <span style="color:rgb(255,0,0);">id</span>
    <span style="color:rgb(0,0,255);">="getAllAccountIdValues"</span>
    <span style="color:rgb(255,0,0);">&nbsp;resultClass</span>
    <span style="color:rgb(0,0,255);">="int"</span>
    <span style="color:rgb(0,0,255);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">Select&nbsp;accountId&nbsp;from&nbsp;Account<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;"></span>
    <span style="color:rgb(0,0,255);">&lt;/</span>
    <span style="color:rgb(128,0,0);">select</span>
    <span style="color:rgb(0,0,255);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br></span> 
   </div> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;">IList&lt;int&gt; accountIds = sqlMapper.QueryForList&lt;int&gt;(“Account.getAllAccountIdValues”, null);</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-family:'宋体';">这条语句会返回</span><span style="line-height:1.8;">Account</span><span style="line-height:1.8;font-family:'宋体';">表中所有的</span><span style="line-height:1.8;">accountId</span><span style="line-height:1.8;font-family:'宋体';">值。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-family:'宋体';">如果您需要多个列的值，使用自动结果映射可以将列名作为</span><span style="line-height:1.8;">POCO</span><span style="line-height:1.8;font-family:'宋体';">的属性名或</span><span style="line-height:1.8;">IDictionary</span><span style="line-height:1.8;font-family:'宋体';">的</span><span style="line-height:1.8;">key</span><span style="line-height:1.8;font-family:'宋体';">。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-family:'宋体';">如果是映射到</span><span style="line-height:1.8;">POCO</span><span style="line-height:1.8;font-family:'宋体';">，需要<strong>注意</strong>：如果存在一列，它存在于数据库中，但不在对象中（没有与之对应的属性），那么不会有任何的错误、警告和数据——数据将被悄无声息地忽略。如果是映射到</span><span style="line-height:1.8;">IDictionary</span><span style="line-height:1.8;font-family:'宋体';">，问题也是类似的，尽管可以取到数据，却不在期望的地方。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-family:'宋体';">如果您希望使用更好的映射方式，请参看“使用外部结果映射”一节（</span><span style="line-height:1.8;">4.3.1</span><span style="line-height:1.8;font-family:'宋体';">）。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-family:'宋体';">尽管存在这两个潜在的问题，自动映射仍有可用之处。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-size:10.5pt;font-family:'宋体';">如果查询所得的字段列表在运行时会发生改变，动态的结果映射也可能会用到。代码清单</span><span style="line-height:1.8;font-size:10.5pt;font-family:'Times New Roman';">4.2&nbsp;</span><span style="line-height:1.8;font-size:10.5pt;font-family:'宋体';">演示了这种情况：<br></span></p> 
   <div style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;border:1px solid rgb(204,204,204);font-size:13px;"> 
    <img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">
    <span style="color:rgb(0,0,255);">&lt;</span>
    <span style="color:rgb(128,0,0);">select&nbsp;</span>
    <span style="color:rgb(255,0,0);">id</span>
    <span style="color:rgb(0,0,255);">="getAccountRemapExample"</span>
    <span style="color:rgb(255,0,0);">&nbsp;resultClass</span>
    <span style="color:rgb(0,0,255);">="hashtable"</span>
    <span style="color:rgb(255,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;select<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;accountId,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;username,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">&lt;</span>
    <span style="color:rgb(128,0,0);">dynamic</span>
    <span style="color:rgb(0,0,255);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">&lt;</span>
    <span style="color:rgb(128,0,0);">isEqual&nbsp;</span>
    <span style="color:rgb(255,0,0);">property</span>
    <span style="color:rgb(0,0,255);">="includePassword"</span>
    <span style="color:rgb(255,0,0);">&nbsp;compareValue</span>
    <span style="color:rgb(0,0,255);">="true"</span>
    <span style="color:rgb(255,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;password,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">&lt;/</span>
    <span style="color:rgb(128,0,0);">isEqual</span>
    <span style="color:rgb(0,0,255);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">&lt;/</span>
    <span style="color:rgb(128,0,0);">dynamic</span>
    <span style="color:rgb(0,0,255);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;firstName,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;lastName<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;Account<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">&lt;</span>
    <span style="color:rgb(128,0,0);">dynamic&nbsp;</span>
    <span style="color:rgb(255,0,0);">prepend</span>
    <span style="color:rgb(0,0,255);">="&nbsp;where&nbsp;"</span>
    <span style="color:rgb(0,0,255);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">&lt;</span>
    <span style="color:rgb(128,0,0);">isNotEmpty&nbsp;</span>
    <span style="color:rgb(255,0,0);">property</span>
    <span style="color:rgb(0,0,255);">="city"</span>
    <span style="color:rgb(0,0,255);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;city&nbsp;like&nbsp;#city#<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">&lt;/</span>
    <span style="color:rgb(128,0,0);">isNotEmpty</span>
    <span style="color:rgb(0,0,255);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">&lt;</span>
    <span style="color:rgb(128,0,0);">isNotNull&nbsp;</span>
    <span style="color:rgb(255,0,0);">property</span>
    <span style="color:rgb(0,0,255);">="accountId"</span>
    <span style="color:rgb(255,0,0);">&nbsp;prepend</span>
    <span style="color:rgb(0,0,255);">="&nbsp;and&nbsp;"</span>
    <span style="color:rgb(0,0,255);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;accountId&nbsp;=&nbsp;#accountId#<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">&lt;/</span>
    <span style="color:rgb(128,0,0);">isNotNull</span>
    <span style="color:rgb(0,0,255);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">&lt;/</span>
    <span style="color:rgb(128,0,0);">dynamic</span>
    <span style="color:rgb(0,0,255);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" alt="" align="top" style="border:0px;"></span>
    <span style="color:rgb(0,0,255);">&lt;/</span>
    <span style="color:rgb(128,0,0);">select</span>
    <span style="color:rgb(0,0,255);">&gt;</span> 
   </div> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-family:'宋体';">这里的例子用到了动态</span><span style="line-height:1.8;">SQL</span><span style="line-height:1.8;font-family:'宋体';">（要到第</span><span style="line-height:1.8;">8</span><span style="line-height:1.8;font-family:'宋体';">章才会讲到），属性</span><span style="line-height:1.8;">includePassword</span><span style="line-height:1.8;font-family:'宋体';">决定了结果所包含的列。取决于</span><span style="line-height:1.8;">includePassword</span><span style="line-height:1.8;font-family:'宋体';">的值，结果会包含或不包含</span><span style="line-height:1.8;">password</span><span style="line-height:1.8;font-family:'宋体';">列。要注意的一点是，每次执行都要决定结果映射方式会带来性能损失，因此建议仅在绝对需要的时候才使用这种方法。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><strong><span style="line-height:1.8;">4.2.5&nbsp;</span></strong><strong><span style="line-height:1.8;font-family:'宋体';">连接相关的数据（</span><span style="line-height:1.8;">Joining related data</span></strong><strong><span style="line-height:1.8;font-family:'宋体';">）</span><span style="line-height:1.8;"></span></strong></p> 
   <p><strong></strong></p> 
   <strong></strong> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-family:'宋体';">有时我们需要连接多张数据表，将结果放入一个扁平（</span><span style="line-height:1.8;">flatten-out</span><span style="line-height:1.8;font-family:'宋体';">）的结构，用作报表或其它目的。</span><span style="line-height:1.8;">iBATIS</span><span style="line-height:1.8;font-family:'宋体';">框架使此过程变得简单，因为它本来就是将</span><span style="line-height:1.8;">SQL</span><span style="line-height:1.8;font-family:'宋体';">语句映射为对象，而不是从表到对象。从字面上来看，对单表的</span><span style="line-height:1.8;">&lt;select&gt;</span><span style="line-height:1.8;font-family:'宋体';">和多表的</span><span style="line-height:1.8;">&lt;select&gt;</span><span style="line-height:1.8;font-family:'宋体';">进行映射没什么不同。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-family:'宋体';">在第</span><span style="line-height:1.8;">7</span><span style="line-height:1.8;font-family:'宋体';">章，我们将了解如何进行更高级的多表操作，将从表的数据映射为对象的子对象——如一个订单（</span><span style="line-height:1.8;">order</span><span style="line-height:1.8;font-family:'宋体';">）的明细列表（</span><span style="line-height:1.8;">order detail</span><span style="line-height:1.8;font-family:'宋体';">）。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-family:'宋体';">现在，我们要简单地重申，从字面上来看，对单表的</span><span style="line-height:1.8;">&lt;select&gt;</span><span style="line-height:1.8;font-family:'宋体';">和多表的</span><span style="line-height:1.8;">&lt;select&gt;</span><span style="line-height:1.8;font-family:'宋体';">进行映射没什么不同。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-size:10.5pt;font-family:'宋体';">我们已经讨论了，为何说</span><span style="line-height:1.8;font-size:10.5pt;font-family:'Times New Roman';">SQL</span><span style="line-height:1.8;font-size:10.5pt;font-family:'宋体';">类似于一个函数（</span><span style="line-height:1.8;font-size:10.5pt;font-family:'Times New Roman';">function</span><span style="line-height:1.8;font-size:10.5pt;font-family:'宋体';">），它有自己的输入值，基于这些输入值，它能够产生输出值。在下一节中，我们来看看如何提供这些输入值。</span></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><span style="line-height:1.8;font-size:10.5pt;font-family:'宋体';">点击<a href="http://files.cnblogs.com/anderslly/IBatisInActionCh04.zip" rel="nofollow" style="text-decoration:none;color:rgb(61,129,238);border-bottom-width:1px;border-bottom-style:dashed;">这里</a>下载示例代码（数据库为Northwind，请修改SqlMap.config中的配置）。</span><br></p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;">下一篇：<span style="line-height:1.8;color:rgb(2,2,2);"><span style="line-height:1.8;color:rgb(255,8,240);">iBATIS In Action：使用映射语句（二）</span></span>；</p> 
   <p align="left" style="line-height:1.8;font-size:13px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;"><br></p> 
   <p align="left" style="line-height:1.8;"><font color="#333333"><span style="font-size:13px;">本文转自一个程序员的自省博客园博客，原文链接：http://www.cnblogs.com/anderslly/archive/2007/10/16/ibatisusingmappedstatement.html，如需转载请自行联系原作者。</span></font><br></p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
