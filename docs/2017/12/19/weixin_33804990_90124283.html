<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>网站性能优化之应用程序缓存-中篇 « NotBeCN</title>
  <meta name="description" content="             一、上章回顾    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 上一章中我们主要简单的介绍了如何使用服务器缓存及如何实现服务器缓存，下面我们来通过下图来进行详细回顾：    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/12/19/weixin_33804990_90124283.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">网站性能优化之应用程序缓存-中篇</h1>
    <p class="post-meta">Dec 19, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <h3 style="font-size:16px;line-height:1.5;font-family:Helvetica, Verdana, Arial, sans-serif;">一、上章回顾</h3> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 上一章中我们主要简单的介绍了如何使用服务器缓存及如何实现服务器缓存，下面我们来通过下图来进行详细回顾：</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://images.cnblogs.com/cnblogs_com/hegezhou_hot/WindowsLiveWriter/968663179f69_CA58/image_2.png" rel="nofollow" style="color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);"><img title="image" src="https://images.cnblogs.com/cnblogs_com/hegezhou_hot/WindowsLiveWriter/968663179f69_CA58/image_thumb.png" alt="image" width="787" height="451" style="border:0px;"></a></p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1、用户发送页面请求，等待服务器返回信息。</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2、表示层通过请求业务层来访问业务数据信息。</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3、业务层在与数据访问层交互时先与服务器缓存组件交互。</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4、服务器缓存在接收数据请求并处理的过程中判定服务器缓存中是否存在指定的数据集缓存对象。如果存在则返回该缓存对象，否则通过数据访问层，访问数据</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">库中的数据，并把数据缓存在服务器组件中。并返回该查询结果集。</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5、表示层获得数据集合后显示。</p> 
   <h3 style="font-size:16px;line-height:1.5;font-family:Helvetica, Verdana, Arial, sans-serif;">二、摘要</h3> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 本章将主要讲解缓存中的过期策略及如何平衡过期这个过期策略，怎么样在项目中解决这样的问题，这就是本篇要讲述的内容。</p> 
   <h3 style="font-size:16px;line-height:1.5;font-family:Helvetica, Verdana, Arial, sans-serif;">三、本章大纲</h3> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1、上章回顾。</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2、摘要。</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3、本章大纲。</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4、具体策略分析。</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5、缓存过期策略方案。</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 6、本章总结。</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 7、下篇预告。</p> 
   <h3 style="font-size:16px;line-height:1.5;font-family:Helvetica, Verdana, Arial, sans-serif;">四、具体策略分析</h3> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 我们我们平时使用缓存中最头疼的问题应该就是缓存的过期的问题吧，缓存带来的好处显而易见，不见提高了网站应用程序的性能，同时提高了访问的速度，减少</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">了与数据库交互的次数。无疑是好的方案，所以网上有很多的建议都是，能缓存的数据尽量缓存，因为缓存必定能带来性能的提升。同时有个很大的问题始终困扰着我</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">们。这样是我平时在使用缓存的过程中头疼的问题。例如这样的情况：</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://images.cnblogs.com/cnblogs_com/hegezhou_hot/WindowsLiveWriter/968663179f69_CA58/image_4.png" rel="nofollow" style="color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);"><img title="image" src="https://images.cnblogs.com/cnblogs_com/hegezhou_hot/WindowsLiveWriter/968663179f69_CA58/image_thumb_1.png" alt="image" width="499" height="427" style="border:0px;"></a></p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 所以问题就随之而来，如何保证这个产品策略的过期性和同步性，当然我们知道产品分类一般情况下变化不大，所以我们缓存，对于信息变化或者改变频率较高的</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">数据，我们当然可以考虑每次加载的时候都缓存，等到第二次访问的时候过期这样的方式来处理也是可以的。总之呢就是不经常改变的常用的数据信息能缓存的一定缓</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">存。大家都知道2-8法则的，其实不管是什么程序基本上都满足这个原则。</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://images.cnblogs.com/cnblogs_com/hegezhou_hot/WindowsLiveWriter/968663179f69_CA58/image_6.png" rel="nofollow" style="color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);"><img title="image" src="https://images.cnblogs.com/cnblogs_com/hegezhou_hot/WindowsLiveWriter/968663179f69_CA58/image_thumb_2.png" alt="image" width="517" height="383" style="border:0px;"></a></p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 当然Winform的程序则会比较复杂一些，可能制定的策略相对来说也不好指定。因为一般情况下来说客户端/服务器这样的形式，一般的数据信息都缓存在客户</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">端，这样服务器压力小一些，当然也有弊端，就是每个客户端都是有自己的快照副本，不过由于现在硬件的速度发展迅速，所以这方面的力度可以考虑加大，显而易</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">见，当数据库中的数据发生改变后，如何通知winform程序进行缓存更新也是个重要的问题，毕竟winform程序的缓存策略与web程序的缓存方式有所不同。当然如果</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">说winform也是采用服务器端缓存的话，当然也可以采用上面我们讨论的方式来实现更新策略。</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 下面我们来看看我理解的可操作的winform的缓存策略的更新。</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://images.cnblogs.com/cnblogs_com/hegezhou_hot/WindowsLiveWriter/968663179f69_CA58/image_8.png" rel="nofollow" style="color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);"><img title="image" src="https://images.cnblogs.com/cnblogs_com/hegezhou_hot/WindowsLiveWriter/968663179f69_CA58/image_thumb_3.png" alt="image" width="546" height="404" style="border:0px;"></a></p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 当然上面只是个人愚见，不足之处还请大家多多指点。欢迎大家拍砖，下面我们来讲讲各种策略的实现及优缺点。</p> 
   <h3 style="font-size:16px;line-height:1.5;font-family:Helvetica, Verdana, Arial, sans-serif;">五、缓存过期策略方案</h3> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 上面我们简单的分析了，winform与web应用程序的可能的缓存过期策略。下面我们来讲讲几种可能的解决方案，当然只是个人愚见，还请大家拍砖，这里只是</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">抛砖引玉，没有考虑更复杂的情况。还请大家多多分享自己的经验。</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1、使用微软提供的服务器缓存的过期策略：</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a、相对过期。举个简单例子就是，如果缓存对象在某个时间段内没有被访问过，那么该对象则过期，否则则不过期。</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://images.cnblogs.com/cnblogs_com/hegezhou_hot/WindowsLiveWriter/968663179f69_CA58/image_10.png" rel="nofollow" style="color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);"><img title="image" src="https://images.cnblogs.com/cnblogs_com/hegezhou_hot/WindowsLiveWriter/968663179f69_CA58/image_thumb_4.png" alt="image" width="592" height="436" style="border:0px;"></a></p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; b、绝对过期。举个简单例子就是，不管缓存的对象访问没有访问过，只要到达设置的时间则过期。</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://images.cnblogs.com/cnblogs_com/hegezhou_hot/WindowsLiveWriter/968663179f69_CA58/image_12.png" rel="nofollow" style="color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);"><img title="image" src="https://images.cnblogs.com/cnblogs_com/hegezhou_hot/WindowsLiveWriter/968663179f69_CA58/image_thumb_5.png" alt="image" width="587" height="445" style="border:0px;"></a></p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 具体的实现时，我们可以参考通过配置文件中设置这个过期策略，例如我们参考IBatisNet中的缓存</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;</p> 
   <div class="cnblogs_Highlighter" style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;"> 
    <div> 
     <div class="syntaxhighlighter html" style="font-size:1em;"> 
      <table border="0" style="border-collapse:collapse;border-spacing:0px;border:1px solid rgb(192,192,192);line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;font-size:12px;background:none;">
       <tbody style="border:0px;line-height:2em;vertical-align:baseline;background:none;">
        <tr style="border:0px;line-height:2em;vertical-align:baseline;background:none;">
         <td class="gutter" style="border:1px solid rgb(192,192,192);border-collapse:collapse;line-height:2em;vertical-align:baseline;width:35px;color:rgb(175,175,175);background:none;"> 
          <div class="line number1 index0 alt2" style="border-width:0px medium 0px 0px;border-right-style:none;line-height:1.8em;vertical-align:baseline;background:rgb(248,248,248) none;">
           1
          </div> 
          <div class="line number2 index1 alt1" style="border-width:0px medium 0px 0px;border-right-style:none;line-height:1.8em;vertical-align:baseline;background-image:none;">
           2
          </div> 
          <div class="line number3 index2 alt2" style="border-width:0px medium 0px 0px;border-right-style:none;line-height:1.8em;vertical-align:baseline;background:rgb(248,248,248) none;">
           3
          </div> 
          <div class="line number4 index3 alt1" style="border-width:0px medium 0px 0px;border-right-style:none;line-height:1.8em;vertical-align:baseline;background-image:none;">
           4
          </div> 
          <div class="line number5 index4 alt2" style="border-width:0px medium 0px 0px;border-right-style:none;line-height:1.8em;vertical-align:baseline;background:rgb(248,248,248) none;">
           5
          </div> 
          <div class="line number6 index5 alt1" style="border-width:0px medium 0px 0px;border-right-style:none;line-height:1.8em;vertical-align:baseline;background-image:none;">
           6
          </div> 
          <div class="line number7 index6 alt2" style="border-width:0px medium 0px 0px;border-right-style:none;line-height:1.8em;vertical-align:baseline;background:rgb(248,248,248) none;">
           7
          </div> 
          <div class="line number8 index7 alt1" style="border-width:0px medium 0px 0px;border-right-style:none;line-height:1.8em;vertical-align:baseline;background-image:none;">
           8
          </div> 
          <div class="line number9 index8 alt2" style="border-width:0px medium 0px 0px;border-right-style:none;line-height:1.8em;vertical-align:baseline;background:rgb(248,248,248) none;">
           9
          </div> </td> 
         <td class="code" style="border:1px solid rgb(192,192,192);border-collapse:collapse;line-height:2em;vertical-align:baseline;background:none;"> 
          <div style="border:0px;line-height:2em;vertical-align:baseline;background:none;"> 
           <div class="line number1 index0 alt2" style="border:0px;line-height:1.8em;vertical-align:baseline;background:rgb(248,248,248) none;"> 
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">&lt;</code>
            <code class="html keyword" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;color:rgb(0,0,255);background:none;">cacheModels</code>
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">&gt;//缓存的对象列表 </code> 
           </div> 
           <div class="line number2 index1 alt1" style="border:0px;line-height:1.8em;vertical-align:baseline;background-image:none;"> 
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">&lt;</code>
            <code class="html keyword" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;color:rgb(0,0,255);background:none;">cacheModel</code>&nbsp;
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">id="CacheLRU_Sys_UserRole"&nbsp; implementation="LRU" &gt;//缓存的对象 </code> 
           </div> 
           <div class="line number3 index2 alt2" style="border:0px;line-height:1.8em;vertical-align:baseline;background:rgb(248,248,248) none;"> 
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">&lt;</code>
            <code class="html keyword" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;color:rgb(0,0,255);background:none;">flushInterval</code>&nbsp;
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">minutes="2" /&gt;//设置过期策略 </code> 
           </div> 
           <div class="line number4 index3 alt1" style="border:0px;line-height:1.8em;vertical-align:baseline;background-image:none;"> 
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">&lt;</code>
            <code class="html keyword" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;color:rgb(0,0,255);background:none;">flushOnExecute</code>&nbsp;&nbsp;
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">statement="Insert_Sys_UserRole"/&gt;//刷新的动作 </code> 
           </div> 
           <div class="line number5 index4 alt2" style="border:0px;line-height:1.8em;vertical-align:baseline;background:rgb(248,248,248) none;"> 
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">&lt;</code>
            <code class="html keyword" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;color:rgb(0,0,255);background:none;">flushOnExecute</code>&nbsp;&nbsp;
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">statement="Update_Sys_UserRole"/&gt; </code> 
           </div> 
           <div class="line number6 index5 alt1" style="border:0px;line-height:1.8em;vertical-align:baseline;background-image:none;"> 
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">&lt;</code>
            <code class="html keyword" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;color:rgb(0,0,255);background:none;">flushOnExecute</code>&nbsp;&nbsp;
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">statement="Delete_Sys_UserRole"/&gt; </code> 
           </div> 
           <div class="line number7 index6 alt2" style="border:0px;line-height:1.8em;vertical-align:baseline;background:rgb(248,248,248) none;"> 
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">&lt;</code>
            <code class="html keyword" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;color:rgb(0,0,255);background:none;">property</code>&nbsp;
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">name="CacheSize" value="100"/&gt;//设置缓存对象的大小 </code> 
           </div> 
           <div class="line number8 index7 alt1" style="border:0px;line-height:1.8em;vertical-align:baseline;background-image:none;"> 
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">&lt;/</code>
            <code class="html keyword" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;color:rgb(0,0,255);background:none;">cacheModel</code>
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">&gt; </code> 
           </div> 
           <div class="line number9 index8 alt2" style="border:0px;line-height:1.8em;vertical-align:baseline;background:rgb(248,248,248) none;"> 
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">&lt;/</code>
            <code class="html keyword" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;color:rgb(0,0,255);background:none;">cacheModels</code>
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">&gt;</code> 
           </div> 
          </div> </td> 
        </tr>
       </tbody>
      </table>
     </div> 
    </div> 
   </div> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 显然通过上面提供的方式可以做到缓存对象的自动过期，但是有个情况就是不够灵活，如果缓存对象在指定的时间段内已发生改变，那么必须在过期时间后才能</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">更新缓存对象，那么有些时候显然不能满足我的要求，特别是实时性的系统时这样的缓存策略是不可行的。</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2、当然上面介绍的IBatisNet中已包含设置刷新对象时的操作的设置：</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;</p> 
   <div class="cnblogs_Highlighter" style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;"> 
    <div> 
     <div class="syntaxhighlighter html" style="font-size:1em;"> 
      <table border="0" style="border-collapse:collapse;border-spacing:0px;border:1px solid rgb(192,192,192);line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;font-size:12px;background:none;">
       <tbody style="border:0px;line-height:2em;vertical-align:baseline;background:none;">
        <tr style="border:0px;line-height:2em;vertical-align:baseline;background:none;">
         <td class="gutter" style="border:1px solid rgb(192,192,192);border-collapse:collapse;line-height:2em;vertical-align:baseline;width:35px;color:rgb(175,175,175);background:none;"> 
          <div class="line number1 index0 alt2" style="border-width:0px medium 0px 0px;border-right-style:none;line-height:1.8em;vertical-align:baseline;background:rgb(248,248,248) none;">
           1
          </div> 
          <div class="line number2 index1 alt1" style="border-width:0px medium 0px 0px;border-right-style:none;line-height:1.8em;vertical-align:baseline;background-image:none;">
           2
          </div> 
          <div class="line number3 index2 alt2" style="border-width:0px medium 0px 0px;border-right-style:none;line-height:1.8em;vertical-align:baseline;background:rgb(248,248,248) none;">
           3
          </div> </td> 
         <td class="code" style="border:1px solid rgb(192,192,192);border-collapse:collapse;line-height:2em;vertical-align:baseline;background:none;"> 
          <div style="border:0px;line-height:2em;vertical-align:baseline;background:none;"> 
           <div class="line number1 index0 alt2" style="border:0px;line-height:1.8em;vertical-align:baseline;background:rgb(248,248,248) none;"> 
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">&lt;</code>
            <code class="html keyword" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;color:rgb(0,0,255);background:none;">flushOnExecute</code>&nbsp;&nbsp;
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">statement="Insert_Sys_UserRole"/&gt;//刷新的动作 </code> 
           </div> 
           <div class="line number2 index1 alt1" style="border:0px;line-height:1.8em;vertical-align:baseline;background-image:none;"> 
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">&lt;</code>
            <code class="html keyword" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;color:rgb(0,0,255);background:none;">flushOnExecute</code>&nbsp;&nbsp;
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">statement="Update_Sys_UserRole"/&gt; </code> 
           </div> 
           <div class="line number3 index2 alt2" style="border:0px;line-height:1.8em;vertical-align:baseline;background:rgb(248,248,248) none;"> 
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">&lt;</code>
            <code class="html keyword" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;color:rgb(0,0,255);background:none;">flushOnExecute</code>&nbsp;&nbsp;
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">statement="Delete_Sys_UserRole"/&gt;</code> 
           </div> 
          </div> </td> 
        </tr>
       </tbody>
      </table>
     </div> 
    </div> 
   </div> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 那么体现在程序中的代码如何书写呢，我们来看看。</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;</p> 
   <div class="cnblogs_Highlighter" style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;"> 
    <div> 
     <div class="syntaxhighlighter html" style="font-size:1em;"> 
      <table border="0" style="border-collapse:collapse;border-spacing:0px;border:1px solid rgb(192,192,192);line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;font-size:12px;background:none;">
       <tbody style="border:0px;line-height:2em;vertical-align:baseline;background:none;">
        <tr style="border:0px;line-height:2em;vertical-align:baseline;background:none;">
         <td class="gutter" style="border:1px solid rgb(192,192,192);border-collapse:collapse;line-height:2em;vertical-align:baseline;width:35px;color:rgb(175,175,175);background:none;"> 
          <div class="line number1 index0 alt2" style="border-width:0px medium 0px 0px;border-right-style:none;line-height:1.8em;vertical-align:baseline;background:rgb(248,248,248) none;">
           1
          </div> 
          <div class="line number2 index1 alt1" style="border-width:0px medium 0px 0px;border-right-style:none;line-height:1.8em;vertical-align:baseline;background-image:none;">
           2
          </div> 
          <div class="line number3 index2 alt2" style="border-width:0px medium 0px 0px;border-right-style:none;line-height:1.8em;vertical-align:baseline;background:rgb(248,248,248) none;">
           3
          </div> 
          <div class="line number4 index3 alt1" style="border-width:0px medium 0px 0px;border-right-style:none;line-height:1.8em;vertical-align:baseline;background-image:none;">
           4
          </div> 
          <div class="line number5 index4 alt2" style="border-width:0px medium 0px 0px;border-right-style:none;line-height:1.8em;vertical-align:baseline;background:rgb(248,248,248) none;">
           5
          </div> 
          <div class="line number6 index5 alt1" style="border-width:0px medium 0px 0px;border-right-style:none;line-height:1.8em;vertical-align:baseline;background-image:none;">
           6
          </div> 
          <div class="line number7 index6 alt2" style="border-width:0px medium 0px 0px;border-right-style:none;line-height:1.8em;vertical-align:baseline;background:rgb(248,248,248) none;">
           7
          </div> 
          <div class="line number8 index7 alt1" style="border-width:0px medium 0px 0px;border-right-style:none;line-height:1.8em;vertical-align:baseline;background-image:none;">
           8
          </div> 
          <div class="line number9 index8 alt2" style="border-width:0px medium 0px 0px;border-right-style:none;line-height:1.8em;vertical-align:baseline;background:rgb(248,248,248) none;">
           9
          </div> 
          <div class="line number10 index9 alt1" style="border-width:0px medium 0px 0px;border-right-style:none;line-height:1.8em;vertical-align:baseline;background-image:none;">
           10
          </div> </td> 
         <td class="code" style="border:1px solid rgb(192,192,192);border-collapse:collapse;line-height:2em;vertical-align:baseline;background:none;"> 
          <div style="border:0px;line-height:2em;vertical-align:baseline;background:none;"> 
           <div class="line number1 index0 alt2" style="border:0px;line-height:1.8em;vertical-align:baseline;background:rgb(248,248,248) none;"> 
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">/// &lt;</code>
            <code class="html keyword" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;color:rgb(0,0,255);background:none;">summary</code>
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">&gt;</code> 
           </div> 
           <div class="line number2 index1 alt1" style="border:0px;line-height:1.8em;vertical-align:baseline;background-image:none;">
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">/// 定义委托、用于指向更新缓存的事件</code>
           </div> 
           <div class="line number3 index2 alt2" style="border:0px;line-height:1.8em;vertical-align:baseline;background:rgb(248,248,248) none;"> 
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">/// &lt;/</code>
            <code class="html keyword" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;color:rgb(0,0,255);background:none;">summary</code>
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">&gt;</code> 
           </div> 
           <div class="line number4 index3 alt1" style="border:0px;line-height:1.8em;vertical-align:baseline;background-image:none;"> 
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">/// &lt;</code>
            <code class="html keyword" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;color:rgb(0,0,255);background:none;">returns</code>
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">&gt;返回是否更新缓存&lt;/</code>
            <code class="html keyword" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;color:rgb(0,0,255);background:none;">returns</code>
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">&gt;</code> 
           </div> 
           <div class="line number5 index4 alt2" style="border:0px;line-height:1.8em;vertical-align:baseline;background:rgb(248,248,248) none;">
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">public delegate bool RefreshCache(object sender, EventArgs e);</code>
           </div> 
           <div class="line number6 index5 alt1" style="border:0px;line-height:1.8em;vertical-align:baseline;background-image:none;">
            &nbsp;
           </div> 
           <div class="line number7 index6 alt2" style="border:0px;line-height:1.8em;vertical-align:baseline;background:rgb(248,248,248) none;"> 
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">/// &lt;</code>
            <code class="html keyword" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;color:rgb(0,0,255);background:none;">summary</code>
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">&gt;</code> 
           </div> 
           <div class="line number8 index7 alt1" style="border:0px;line-height:1.8em;vertical-align:baseline;background-image:none;">
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">/// 维护缓存更新策略的委托集合</code>
           </div> 
           <div class="line number9 index8 alt2" style="border:0px;line-height:1.8em;vertical-align:baseline;background:rgb(248,248,248) none;"> 
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">/// &lt;/</code>
            <code class="html keyword" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;color:rgb(0,0,255);background:none;">summary</code>
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">&gt;</code> 
           </div> 
           <div class="line number10 index9 alt1" style="border:0px;line-height:1.8em;vertical-align:baseline;background-image:none;"> 
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">public Dictionary&lt;</code>
            <code class="html keyword" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;color:rgb(0,0,255);background:none;">object</code>
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">, List&lt;RefreshCache&gt;&gt; list;</code> 
           </div> 
          </div> </td> 
        </tr>
       </tbody>
      </table>
     </div> 
    </div> 
   </div> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 那么通过XML配置相关的引发缓存更新的事件来达到更新缓存的目的。</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 那么每次委托列表中维护的对象即是所有的缓存对象的相关刷新动作事件。通过检测事件的执行来更新缓存对象。</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 具体的更新缓存的代码如下：</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;</p> 
   <div class="cnblogs_Highlighter" style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;"> 
    <div> 
     <div class="syntaxhighlighter html" style="font-size:1em;"> 
      <table border="0" style="border-collapse:collapse;border-spacing:0px;border:1px solid rgb(192,192,192);line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;font-size:12px;background:none;">
       <tbody style="border:0px;line-height:2em;vertical-align:baseline;background:none;">
        <tr style="border:0px;line-height:2em;vertical-align:baseline;background:none;">
         <td class="gutter" style="border:1px solid rgb(192,192,192);border-collapse:collapse;line-height:2em;vertical-align:baseline;width:35px;color:rgb(175,175,175);background:none;"> 
          <div class="line number1 index0 alt2" style="border-width:0px medium 0px 0px;border-right-style:none;line-height:1.8em;vertical-align:baseline;background:rgb(248,248,248) none;">
           1
          </div> 
          <div class="line number2 index1 alt1" style="border-width:0px medium 0px 0px;border-right-style:none;line-height:1.8em;vertical-align:baseline;background-image:none;">
           2
          </div> 
          <div class="line number3 index2 alt2" style="border-width:0px medium 0px 0px;border-right-style:none;line-height:1.8em;vertical-align:baseline;background:rgb(248,248,248) none;">
           3
          </div> 
          <div class="line number4 index3 alt1" style="border-width:0px medium 0px 0px;border-right-style:none;line-height:1.8em;vertical-align:baseline;background-image:none;">
           4
          </div> 
          <div class="line number5 index4 alt2" style="border-width:0px medium 0px 0px;border-right-style:none;line-height:1.8em;vertical-align:baseline;background:rgb(248,248,248) none;">
           5
          </div> 
          <div class="line number6 index5 alt1" style="border-width:0px medium 0px 0px;border-right-style:none;line-height:1.8em;vertical-align:baseline;background-image:none;">
           6
          </div> 
          <div class="line number7 index6 alt2" style="border-width:0px medium 0px 0px;border-right-style:none;line-height:1.8em;vertical-align:baseline;background:rgb(248,248,248) none;">
           7
          </div> 
          <div class="line number8 index7 alt1" style="border-width:0px medium 0px 0px;border-right-style:none;line-height:1.8em;vertical-align:baseline;background-image:none;">
           8
          </div> 
          <div class="line number9 index8 alt2" style="border-width:0px medium 0px 0px;border-right-style:none;line-height:1.8em;vertical-align:baseline;background:rgb(248,248,248) none;">
           9
          </div> </td> 
         <td class="code" style="border:1px solid rgb(192,192,192);border-collapse:collapse;line-height:2em;vertical-align:baseline;background:none;"> 
          <div style="border:0px;line-height:2em;vertical-align:baseline;background:none;"> 
           <div class="line number1 index0 alt2" style="border:0px;line-height:1.8em;vertical-align:baseline;background:rgb(248,248,248) none;">
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">public void RefreshCacheObject(object key,bool isSuccess) </code>
           </div> 
           <div class="line number2 index1 alt1" style="border:0px;line-height:1.8em;vertical-align:baseline;background-image:none;">
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">{ </code>
           </div> 
           <div class="line number3 index2 alt2" style="border:0px;line-height:1.8em;vertical-align:baseline;background:rgb(248,248,248) none;"> 
            <code class="html spaces" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">&nbsp;&nbsp;&nbsp;</code>
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">if (!isSuccess) </code> 
           </div> 
           <div class="line number4 index3 alt1" style="border:0px;line-height:1.8em;vertical-align:baseline;background-image:none;"> 
            <code class="html spaces" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">return;</code> 
           </div> 
           <div class="line number5 index4 alt2" style="border:0px;line-height:1.8em;vertical-align:baseline;background:rgb(248,248,248) none;"> 
            <code class="html spaces" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">&nbsp;&nbsp;&nbsp;</code>
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">if (list.ContainsKey(key)) </code> 
           </div> 
           <div class="line number6 index5 alt1" style="border:0px;line-height:1.8em;vertical-align:baseline;background-image:none;"> 
            <code class="html spaces" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">list.Remove(key);</code> 
           </div> 
           <div class="line number7 index6 alt2" style="border:0px;line-height:1.8em;vertical-align:baseline;background:rgb(248,248,248) none;">
            &nbsp;
           </div> 
           <div class="line number8 index7 alt1" style="border:0px;line-height:1.8em;vertical-align:baseline;background-image:none;"> 
            <code class="html spaces" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">&nbsp;&nbsp;&nbsp;&nbsp;</code>
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">//载入缓存 </code> 
           </div> 
           <div class="line number9 index8 alt2" style="border:0px;line-height:1.8em;vertical-align:baseline;background:rgb(248,248,248) none;"> 
            <code class="html spaces" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">&nbsp;</code>
            <code class="html plain" style="border:0px;line-height:2em;vertical-align:baseline;font-family:'Courier New', Consolas, 'Bitstream Vera Sans Mono', Courier, monospace;background:none;">}</code> 
           </div> 
          </div> </td> 
        </tr>
       </tbody>
      </table>
     </div> 
    </div> 
   </div> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;具体的载入缓存的代码请参考：<span style="line-height:42px;font-weight:bold;font-size:12pt;"><a id="ctl04_TitleUrl" class="postTitle2" href="http://www.cnblogs.com/hegezhou_hot/archive/2010/09/09/1822448.html" rel="nofollow" style="color:rgb(0,0,0);border-bottom-width:1px;border-bottom-style:dotted;border-bottom-color:rgb(51,51,51);">网站性能优化之应用程序缓存-初篇</a></span></p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 具体的实现底层通知的代码我还没有想好具体的实现方式(就是比较好的方式)。想好了会把代码贴上，当然IBatisNet已经很优秀了，我这里也许没有造轮子的必</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">要，如果谁有比较好的实现方式，那么可以告诉我，我这里先谢过了，我其实不是很了解底层的实现机制，所以我目前只是采用比较笨的方式来做，虽然也实现了，但</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">是需要在每个事件中都要显示的写一部分代码，这是我不能接受的。</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3、时时更新的方式。</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 这里的时时更新就是指，每次都把数据库中的记录全部取出来，然后循环比较结果集中的记录与缓存的记录是不是相同，如果不同则更新该记录，否则跳过继续</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">处理其他的数据信息，那么保证缓存中的记录始终是最新的。当然这样的方式虽然保证所有的缓存信息是最新的，但是每次都与数据库交互显然不是好的解决方案，当</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">然有些情况下也许也是没有办法的事情。</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 最后，本文只是抛砖引玉，希望大家多多提出宝贵意见。</p> 
   <h3 style="font-size:16px;line-height:1.5;font-family:Helvetica, Verdana, Arial, sans-serif;">六、本章总结</h3> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 本文简单的介绍了web与winform下的缓存策略，分析了几种方式的可行性及优缺点等，还希望大家在实际的项目中根据项目的需要来指定缓存的过期策略，但</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">是可以肯定的是，用缓存肯定比不用缓存的性能要高。当然这里也不是要求我们滥用缓存，也要根据数据信息的更新频度做一个平衡，不经常变的数据一般推荐来缓</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">存。毕竟服务器中有同一副本，不但能提高访问的效率，还能减轻数据库的访问压力，提高并发的速度。还需要大家在实际项目中体会。</p> 
   <h3 style="font-size:16px;line-height:1.5;font-family:Helvetica, Verdana, Arial, sans-serif;">七、下篇预告</h3> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 本篇并没有把IBatis.NET中的缓存策略完整的实现，并且也没有讲到其他的一些winform的缓存策略的实现，下一篇将会详细的讲解这部分的内容，当然这些都</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;">是本人的个人体会与总结，错误之处在所难免，欢迎大家提出不同意见，批评指出错误，谢谢大家！</p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;"><br></p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;"><br></p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;"><br></p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;"><br></p> 
   <p style="font-family:Helvetica, Verdana, Arial, sans-serif;font-size:14px;line-height:21px;"><br></p> 
   <p><font><span style="font-size:14px;line-height:21px;">本文转自何戈洲博客园博客，原文链接：http://www.cnblogs.com/hegezhou_hot/archive/2010/09/19/1831256.html，如需转载请自行联系原作者</span></font></p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
