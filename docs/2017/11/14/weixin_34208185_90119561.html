<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Unity3D游戏开发最佳实践20技能（两） « NotBeCN</title>
  <meta name="description" content="             【扩展和MonoBehaviourBase】21、扩展一个自己的Mono Behaviour基类。然后自己的全部组件都从它派生这能够使你方便的实现一些通用函数。比如类型安全的Invoke。或者是一些更复杂的调用（比如random等等）。22、为Invoke, StartCoroutine...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/14/weixin_34208185_90119561.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">Unity3D游戏开发最佳实践20技能（两）</h1>
    <p class="post-meta">Nov 14, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <p style="margin-left:auto;color:rgb(85,85,85);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;"><span style="line-height:1.8;color:rgb(68,68,68);font-family:Tahoma, 'Microsoft Yahei', Simsun;"><span style="line-height:21px;font-weight:700;color:rgb(105,105,105);font-family:'microsoft yahei';">【扩展和MonoBehaviourBase】</span><br><span style="line-height:21px;font-weight:700;color:rgb(105,105,105);font-family:'microsoft yahei';">21、扩展一个自己的Mono Behaviour基类。然后自己的全部组件都从它派生</span><br><span style="line-height:21px;color:rgb(105,105,105);font-family:'microsoft yahei';">这能够使你方便的实现一些通用函数。比如类型安全的Invoke。或者是一些更复杂的调用（比如random等等）。</span><br><span style="line-height:21px;font-weight:700;color:rgb(105,105,105);font-family:'microsoft yahei';">22、为Invoke, StartCoroutine and Instantiate 定义安全调用方法</span><br><span style="line-height:21px;color:rgb(105,105,105);font-family:'microsoft yahei';">定义一个托付任务（delegate Task），用它来定义须要调用的方法，而不要使用字符串属性方法名称。比如：</span><br><span style="line-height:21px;color:rgb(105,105,105);font-family:'microsoft yahei';">public void Invoke(Task task, float time){&nbsp;&nbsp;&nbsp;Invoke(task.Method.Name, time);}</span><br><span style="line-height:21px;font-weight:700;color:rgb(105,105,105);font-family:'microsoft yahei';">23、为共享接口的组件扩展</span><br><span style="line-height:21px;color:rgb(105,105,105);font-family:'microsoft yahei';">有些时候把获得组件、查找对象实如今一个组件的接口中会非常方便。</span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><br><span style="line-height:21px;color:rgb(105,105,105);font-family:'microsoft yahei';">以下这样的实现方案使用了typeof。而不是泛型版本号的函数。</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">泛型函数无法在接口上工作，而typeof能够。以下这样的方法把泛型方法整洁的包装起来。<br></p> 
   <div style="font-size:13.6364px;line-height:18.1818px;color:rgb(105,105,105);font-family:'microsoft yahei';"> 
    <div style="font-size:12px;">
     [C#]&nbsp;
    </div> 
    <div> 
     <div style="font-size:12px;font-family:Consolas, 'Bitstream Vera sans Mono', 'Courier new', Courier, monospace;"> 
      <div>
       <span style="line-height:18px;"><a href="http://www.unitymanual.com/#" rel="nofollow" style="color:rgb(51,51,51);border-bottom:1px dotted rgb(51,51,51);">?</a></span>
      </div> 
      <table border="0" class="ke-zeroborder" style="border-collapse:collapse;border-spacing:0px;border:0px;">
       <tbody>
        <tr>
         <td style="border-collapse:collapse;border:0px;vertical-align:baseline;color:rgb(175,175,175);"> 
          <div style="text-align:right;vertical-align:baseline;">
           1
          </div> </td> 
         <td style="border-collapse:collapse;border:0px;vertical-align:baseline;"> 
          <div style="border:0px;vertical-align:baseline;"> 
           <div style="border:0px;vertical-align:baseline;">
            //Defined in the common base class for all mono behaviourspublic I GetInterfaceComponent
            <span style="line-height:1.8;">() where I : class{&nbsp;&nbsp;return GetComponent(typeof(I)) as I;} public static List</span>&nbsp;FindObjectsOfInterface
            <span style="line-height:1.8;">() where I : class{&nbsp;&nbsp;MonoBehaviour[] monoBehaviours = FindObjectsOfType();&nbsp;&nbsp;List</span>&nbsp;list = new List
            <span style="line-height:1.8;">();&nbsp;&nbsp;&nbsp;foreach(MonoBehaviour behaviour in monoBehaviours)&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I component = behaviour.GetComponent(typeof(I)) as I;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(component != null)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list.Add(component);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;return list;}</span> 
           </div> 
          </div> </td> 
        </tr>
       </tbody>
      </table>
     </div> 
    </div> 
   </div> 
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="line-height:21px;font-size:13.6364px;font-weight:700;color:rgb(105,105,105);font-family:'microsoft yahei';">24、使用扩展来让代码书写更便捷</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="line-height:21px;font-size:13.6364px;color:rgb(105,105,105);font-family:'microsoft yahei';">比如：</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <div style="font-size:13.6364px;line-height:18.1818px;color:rgb(105,105,105);font-family:'microsoft yahei';"> 
    <div style="font-size:12px;">
     [AppleScript]&nbsp;
    </div> 
    <div> 
     <div style="font-size:12px;font-family:Consolas, 'Bitstream Vera sans Mono', 'Courier new', Courier, monospace;"> 
      <div> 
       <span style="line-height:18px;"><a href="http://www.unitymanual.com/#" rel="nofollow" style="color:rgb(51,51,51);border-bottom:1px dotted rgb(51,51,51);">? </a></span>
       <p><a href="http://www.unitymanual.com/#" rel="nofollow" style="color:rgb(51,51,51);border-bottom:1px dotted rgb(51,51,51);"></a></p> 
       <a href="http://www.unitymanual.com/#" rel="nofollow" style="color:rgb(51,51,51);border-bottom:1px dotted rgb(51,51,51);"> </a> 
       <p><a href="http://www.unitymanual.com/#" rel="nofollow" style="color:rgb(51,51,51);border-bottom:1px dotted rgb(51,51,51);"></a></p> 
      </div> 
      <table border="0" class="ke-zeroborder" style="border-collapse:collapse;border-spacing:0px;border:0px;">
       <tbody>
        <tr>
         <td style="border-collapse:collapse;border:0px;vertical-align:baseline;color:rgb(175,175,175);"> 
          <div style="text-align:right;vertical-align:baseline;">
           1
          </div> </td> 
         <td style="border-collapse:collapse;border:0px;vertical-align:baseline;"> 
          <div style="border:0px;vertical-align:baseline;"> 
           <div style="border:0px;vertical-align:baseline;">
            public staticclassCSTransform{&nbsp;&nbsp;public static void SetX(this Transform transform,float x)&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Vector3newPosition=&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;newVector3(x,transform.position.y,transform.position.z);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transform.position=newPosition;&nbsp;&nbsp;}&nbsp;&nbsp;...}
           </div> 
          </div> </td> 
        </tr>
       </tbody>
      </table>
     </div> 
    </div> 
   </div> 
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="line-height:21px;font-size:13.6364px;font-weight:700;color:rgb(105,105,105);font-family:'microsoft yahei';">25、使用防御性的GetComponent()</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="line-height:21px;"><font color="#696969"><span style="font-size:13.6364px;">有些时候强制性组件依赖（通过RequiredComponent）会让人蛋疼。</span></font> </span>
   <p style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;"></p> 
   <p style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;">比如。非常难在Inspector中改动组件（即使他们有相同的基类）。以下是一种替代方案。当一个必要的组件没有找到时。输出一条错误信息。</p> 
   <p style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;"><br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;"></p> 
   <div style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:18.1818px;"> 
    <div style="font-size:12px;">
     [AppleScript]&nbsp;
    </div> 
    <div> 
     <div style="font-size:12px;font-family:Consolas, 'Bitstream Vera sans Mono', 'Courier new', Courier, monospace;"> 
      <div>
       <span style="line-height:18px;"><a href="http://www.unitymanual.com/#" rel="nofollow" style="color:rgb(51,51,51);border-bottom:1px dotted rgb(51,51,51);">?</a></span>
      </div> 
      <table border="0" class="ke-zeroborder" style="border-collapse:collapse;border-spacing:0px;border:0px;">
       <tbody>
        <tr>
         <td style="border-collapse:collapse;border:0px;vertical-align:baseline;color:rgb(175,175,175);"> 
          <div style="text-align:right;vertical-align:baseline;">
           1
          </div> </td> 
         <td style="border:0px;border-collapse:collapse;font-family:Verdana, '宋体', sans-serif;vertical-align:baseline;"> 
          <div style="border:0px;vertical-align:baseline;"> 
           <div style="font-family:Consolas, 'Bitstream Vera sans Mono', 'Courier new', Courier, monospace;border:0px;vertical-align:baseline;">
            public static T GetSafeComponent&lt;&lt;/code&gt;T&gt;(this GameObject obj)whereT:MonoBehaviour{&nbsp;&nbsp;T component=obj.GetComponent&lt;&lt;/code&gt;T&gt;();&nbsp;&nbsp;&nbsp;if(component==null)&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Debug.LogError("Expected to find component of type "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+typeof(T)+" but found none",obj);&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;returncomponent;}
           </div> 
          </div> </td> 
        </tr>
       </tbody>
      </table>
     </div> 
    </div> 
   </div> 
   <font color="#696969"><span style="font-size:13.6364px;">【风格】</span></font>
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;font-weight:700;">26、避免对同一件事使用不同的处理风格</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;">在非常多情况下，某件事并不仅仅有一个惯用手法。在这样的情况下，在项目中明白选择当中的一个来使用。以下是原因：</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <ul style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:18.1818px;">
    <li style="list-style:disc;">一些做法并不能非常好的一起协作。 <p></p> <p>使用一个。能强制统一设计方向。并明白指出不是其它做法所指的方向。</p> </li> 
    <li style="list-style:disc;">团队成员使用统一的风格。可能方便大家互相的理解。 <p></p> <p>他使得总体结构和代码都更easy理解。这也能够降低错误；<br></p> </li> 
   </ul>
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;">几组风格的样例：</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <ul style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:18.1818px;">
    <li style="list-style:disc;">协程与状态机（Coroutines vs. state machines）；</li> 
    <li style="list-style:disc;">嵌套的Prefab、互相链接的Prefab、超级Prefab（Nested prefabs vs. linked prefabs vs. God prefabs）；</li> 
    <li style="list-style:disc;">数据分离的策略。</li> 
    <li style="list-style:disc;">在2D游戏的使用Sprite的方法；</li> 
    <li style="list-style:disc;">Prefab的结构；</li> 
    <li style="list-style:disc;">对象生成策略；</li> 
    <li style="list-style:disc;">定位对象的方法：使用类型、名称、层、引用关系；</li> 
    <li style="list-style:disc;">对象分组的方法：使用类型、名称、层、引用数组。</li> 
    <li style="list-style:disc;">找到一组对象，还是让它们自己来注冊。</li> 
    <li style="list-style:disc;">控制运行次序（使用Unity的运行次序设置。还是使用Awake/Start/Update/LateUpdate，还是使用纯手动的方法，或者是次序无关的架构）。</li> 
    <li style="list-style:disc;">在游戏中使用鼠标选择对象/位置/目标：SelectionManager或者是对象自主管理；</li> 
    <li style="list-style:disc;">在场景变换时保存数据：通过PlayerPrefs，或者是在新场景载入时不要销毁的对象；</li> 
    <li style="list-style:disc;">组合动画的方法：混合、叠加、分层；<br></li> 
   </ul>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;font-weight:700;">【时间】</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;font-weight:700;">27、维护一个自己的Time类，能够使游戏暂停更easy实现</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;">做一个“Time.DeltaTime”和""Time.TimeSinceLevelLoad"的包装，用来实现暂停和游戏速度缩放。这使用起来略显麻烦，可是当对象执行在不同的时钟速率下的时候就方便多了（比如界面动画和游戏内动画）。</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;font-weight:700;">【生成对象】</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;font-weight:700;">28、不要让游戏执行时生成的对象搞乱场景层次结构</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="line-height:21px;"><font color="#696969"><span style="font-size:13.6364px;">在游戏执行时，为动态生成的对象设置好它们的父对象。能够让你更方便的查找。</span></font> </span>
   <p style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;"></p> 
   <p style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;">你能够使用一个空的对象，或者一个没有行为的单件来简化代码中的訪问。能够给这个对象命名为“DynamicObjects”。<br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;"><br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;"><br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;"><span style="line-height:21px;font-size:13.6364px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;"><span style="line-height:21px;font-size:13.6364px;font-weight:700;">【类设计】</span><br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;"><span style="line-height:21px;font-size:13.6364px;font-weight:700;">29、使用单件（Singleton）模式<br></span><span style="line-height:21px;font-size:13.6364px;">从以下这个类派生的全部类，将自己主动获得单件功能：</span><br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;"></p> 
   <div style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:18.1818px;"> 
    <div style="font-size:12px;">
     [AppleScript]&nbsp;
    </div> 
    <div> 
     <div style="font-size:12px;font-family:Consolas, 'Bitstream Vera sans Mono', 'Courier new', Courier, monospace;"> 
      <div> 
       <span style="line-height:18px;"><a href="http://www.unitymanual.com/#" rel="nofollow" style="color:rgb(51,51,51);border-bottom:1px dotted rgb(51,51,51);">? </a></span>
       <p><a href="http://www.unitymanual.com/#" rel="nofollow" style="color:rgb(51,51,51);border-bottom:1px dotted rgb(51,51,51);"></a></p> 
       <a href="http://www.unitymanual.com/#" rel="nofollow" style="color:rgb(51,51,51);border-bottom:1px dotted rgb(51,51,51);"> </a> 
       <p><a href="http://www.unitymanual.com/#" rel="nofollow" style="color:rgb(51,51,51);border-bottom:1px dotted rgb(51,51,51);"></a></p> 
      </div> 
      <table border="0" class="ke-zeroborder" style="border-collapse:collapse;border-spacing:0px;border:0px;">
       <tbody>
        <tr>
         <td style="border-collapse:collapse;border:0px;vertical-align:baseline;color:rgb(175,175,175);"> 
          <div style="text-align:right;vertical-align:baseline;">
           1
          </div> </td> 
         <td style="border-collapse:collapse;border:0px;vertical-align:baseline;"> 
          <div style="border:0px;vertical-align:baseline;"> 
           <div style="border:0px;vertical-align:baseline;">
            publicclassSingleton&lt;&lt;/code&gt;T&gt;:MonoBehaviourwhereT:MonoBehaviour{&nbsp;&nbsp;protected static T instance;&nbsp;&nbsp;&nbsp;/**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returnstheinstanceofthis singleton.&nbsp;&nbsp;*/&nbsp;&nbsp;public static T Instance&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(instance==null)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instance=(T)FindObjectOfType(typeof(T));&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(instance==null)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Debug.LogError("An instance of "+typeof(T)+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" is needed in the scene, but there is none.");&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;returninstance;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;}}
           </div> 
          </div> </td> 
        </tr>
       </tbody>
      </table>
     </div> 
    </div> 
   </div> 
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;">单件能够作为一些管理器，比如ParticleManager或者AudioManager亦或者GUIManager。</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <ul style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:18.1818px;">
    <li style="list-style:disc;">对于那些非唯一的prefab实例使用单件管理器（比如Player）。不要为了坚持这条原则把类的层次关系复杂化。宁愿在你的GameManager（或其它合适的管理器中）中持有一个它们的引用。</li> 
    <li style="list-style:disc;">对于外部常常使用的共同拥有变量和方法定义为static。这样你能够这样简便的书写“GameManager.Player”。而不用写成“GameManager.Instance.player”。<br></li> 
   </ul>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;font-weight:700;">30、在组件中不要使用public成员变量，除非它须要在inspector中调节<br></span>
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;">除非须要设计师（策划or美术）去调节的变量。特别是它不能明白表明自己是做什么的变量。不要声明为public。假设在这些特殊情况下，无法避免，则可使用两个甚至四个下划线来表明不要从外部调节它，比如：</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;">public float __aVariable;&nbsp;</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;font-weight:700;">31、把界面和游戏逻辑分开</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;">这一条本质上就是指的MVC模式。</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="line-height:21px;"><font color="#696969"><span style="font-size:13.6364px;">全部的输入控制器，仅仅负责向对应的组件发送命令。让它们知道控制器被调用了。举一个控制器逻辑的样例，一个控制器依据玩家的状态来决定发送哪个命令。</span></font> </span>
   <p style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;"></p> 
   <p style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;">可是这样并不好（比如，假设你加入了多个控制器。那将会导致逻辑反复）。相反的，玩家对象应该依据当前状态（比如减速、惊恐）来设置当前的速度。并依据当前的面朝向来计算怎样向前移动。控制器仅仅负责做他们自己状态相关的事情，控制器不改变玩家的状态。因此控制前甚至能够根本不知道玩家的状态。另外一个样例，切换武器。</p> 
   <p style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;">正确的方法是，玩家有一个函数：“SwitchWeapon(Weapon newWeapon)”供GUI调用。GUI不应该维护全部对象的Transform和他们之间的父子关系。<br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;"><br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;"><br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;"><span style="line-height:21px;font-size:13.6364px;">全部界面相关的组件，仅仅负责维护和处理他们自己状态相关的数据。比如，显示一个地图，GUI能够依据玩家的位移计算地图的显示。可是。这是游戏状态数据。它不属于GUI。GUI仅仅是显示游戏状态数据。这些数据应该在其它地方维护。地图数据也应该在其它地方维护（比如GameManager）。</span><br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;"><br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;"><br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;"><span style="line-height:21px;font-size:13.6364px;">游戏玩法对象不应该关心GUI。有一个例外是处理游戏暂停（可能是通过控制Time.timeScale，事实上这并非个好主意）。游戏玩法对象应该知道游戏是否暂停。可是，这就是所有了。</span></p> 
   <p style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;">另外。不要把GUI组件挂到游戏玩法对象上。<br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;"><br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;"><br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;"><span style="line-height:21px;font-size:13.6364px;">这么说吧。假设你把全部的GUI类都删了，游戏应该能够正确编译。</span><br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;"><br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;"><br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;"><span style="line-height:21px;font-size:13.6364px;">你还应该达到：在不须要重写游戏逻辑的前提下，重写GUI和输入控制。</span><br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;"><br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;"><br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;"><br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;"><span style="line-height:21px;font-size:13.6364px;font-weight:700;">32、分离状态控制和簿记变量</span><br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;"><span style="line-height:21px;font-size:13.6364px;">簿记变量仅仅是为了使用起来方便或者提高查找速度。而且能够依据状态控制来覆盖。将两者分离能够简化：</span><br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;"></p> 
   <ul style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:18.1818px;">
    <li style="list-style:disc;">保存游戏状态</li> 
    <li style="list-style:disc;">调试游戏状态<br></li> 
   </ul>
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;">实现方法之中的一个是为每一个游戏逻辑定义一个”SaveData“类，比如：</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <div style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:18.1818px;"> 
    <div style="font-size:12px;">
     [AppleScript]&nbsp;
    </div> 
    <div> 
     <div style="font-size:12px;font-family:Consolas, 'Bitstream Vera sans Mono', 'Courier new', Courier, monospace;"> 
      <div>
       <span style="line-height:18px;"><a href="http://www.unitymanual.com/#" rel="nofollow" style="color:rgb(51,51,51);border-bottom:1px dotted rgb(51,51,51);">?</a></span>
      </div> 
      <table border="0" class="ke-zeroborder" style="border-collapse:collapse;border-spacing:0px;border:0px;">
       <tbody>
        <tr>
         <td style="border-collapse:collapse;border:0px;vertical-align:baseline;color:rgb(175,175,175);"> 
          <div style="text-align:right;vertical-align:baseline;">
           1
          </div> </td> 
         <td style="border-collapse:collapse;border:0px;vertical-align:baseline;"> 
          <div style="border:0px;vertical-align:baseline;"> 
           <div style="border:0px;vertical-align:baseline;">
            [Serializable]PlayerSaveData{&nbsp;&nbsp;public float health;//publicforserialisation,notexposedininspector}&nbsp;Player{&nbsp;&nbsp;//... bookkeeping variables&nbsp;&nbsp;&nbsp;//Don’t exposestateininspector. Stateis nottweakable.&nbsp;&nbsp;private PlayerSaveData playerSaveData;}
           </div> 
          </div> </td> 
        </tr>
       </tbody>
      </table>
     </div> 
    </div> 
   </div> 
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;font-weight:700;">33、分离特殊的配置</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="line-height:21px;"><font color="#696969"><span style="font-size:13.6364px;">如果我们有两个敌人，它们使用同一个Mesh。可是有不同的属性设置（比如不同的力量、不同的速度等等）。有非常多方法来分离数据。以下是我比較喜欢的一种。特别是对于对象生成或者游戏存档时，会非常好用。</span></font> </span>
   <p style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;"></p> 
   <p style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;">（属性设置不是状态数据。而是配置数据。所以我们不须要存档他们。</p> 
   <p style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;">当对象载入或者生成是，属性设置会自己主动载入。）<br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;"></p> 
   <ul style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:18.1818px;">
    <li style="list-style:disc;">为每个游戏逻辑类定义一个模板类。 <p></p> <p>比如。对于敌人。我们来一个“EnemyTemplate”。全部的属性设置变量都保存在这个类中。</p> <p></p> </li> 
    <li style="list-style:disc;">在游戏逻辑的类中，定义一个上述模板类型的变量。</li> 
    <li style="list-style:disc;">制作一个敌人的Prefab。以及两个模板的Prefab：“WeakEnemyTemplate”和"StrongEnemyTemplate"。 <p></p> <p></p> </li> 
    <li style="list-style:disc;">在载入或者生成对象是，把模板变量正确的复制。 <p></p> <p><br></p> </li> 
   </ul>
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;">这样的方法可能有点复杂（在一些情况下，可能不须要这样）。</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;">举个样例，最好使用泛型。我们能够这样定义我们的类：</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <div style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:18.1818px;"> 
    <div style="font-size:12px;">
     [AppleScript]&nbsp;
    </div> 
    <div> 
     <div style="font-size:12px;font-family:Consolas, 'Bitstream Vera sans Mono', 'Courier new', Courier, monospace;"> 
      <div>
       <span style="line-height:18px;"><a href="http://www.unitymanual.com/#" rel="nofollow" style="color:rgb(51,51,51);border-bottom:1px dotted rgb(51,51,51);">?</a></span>
      </div> 
      <table border="0" class="ke-zeroborder" style="border-collapse:collapse;border-spacing:0px;border:0px;">
       <tbody>
        <tr>
         <td style="border-collapse:collapse;border:0px;vertical-align:baseline;color:rgb(175,175,175);"> 
          <div style="text-align:right;vertical-align:baseline;">
           1
          </div> </td> 
         <td style="border-collapse:collapse;border:0px;vertical-align:baseline;"> 
          <div style="border:0px;vertical-align:baseline;"> 
           <div style="border:0px;vertical-align:baseline;">
            publicclassBaseTemplate{&nbsp;&nbsp;...}publicclassActorTemplate:BaseTemplate{&nbsp;&nbsp;...}publicclassEntity&lt;&lt;/code&gt;EntityTemplateType&gt;whereEntityTemplateType:BaseTemplate{&nbsp;&nbsp;EntityTemplateType template;&nbsp;&nbsp;...}publicclassActor:Entity&lt;&lt;/code&gt;ActorTemplate&gt;{&nbsp;&nbsp;...}
           </div> 
          </div> </td> 
        </tr>
       </tbody>
      </table>
     </div> 
    </div> 
   </div> 
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;font-weight:700;">34、除了显示用的文本。不要使用字符串</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;">特别是不要用字符串作为对象或者prefab等等的ID标识。一个非常遗憾的例外是动画系统，须要使用字符串来訪问对应的动画。</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;font-weight:700;">35、避免使用public的数组</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;">举例说明，不要定义一个武器的数组，一个子弹的数组，一个粒子的数组，这样你的代码看起来像这样：</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;">public void SelectWeapon(int index){&nbsp;&nbsp;&nbsp;&nbsp;currentWeaponIndex = index;&nbsp;&nbsp;&nbsp;Player.SwitchWeapon(weapons[currentWeapon]);} public void Shoot(){&nbsp;&nbsp;&nbsp;Fire(bullets[currentWeapon]);&nbsp;&nbsp;FireParticles(particles[currentWeapon]);&nbsp;&nbsp;&nbsp;}</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;">这在代码中还不是什么大问题。可是在Inspector中设置他们的值的时候，就非常难不犯错了。</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;">我们能够定义一个类，来封装这三个变量，然后使用一个它的实例数组：</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;">[Serializable]public class Weapon{&nbsp;&nbsp;&nbsp;public GameObject prefab;&nbsp;&nbsp;&nbsp;public ParticleSystem particles;&nbsp;&nbsp;&nbsp;public Bullet bullet;} 这样代码看起来非常整洁。可是更重要的是，在Inspector中设置时就不easy犯错了。</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;font-weight:700;">36、在结构中避免使用数组</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;">举个样例，一个玩家能够有三种攻击形式，每种使用当前的武器，并发射不同的子弹、产生不同的行为。</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;">你能够把三个子弹作为一个数组。并像以下这样组织逻辑：</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;">public void FireAttack(){&nbsp;&nbsp;&nbsp;/// behaviour&nbsp;&nbsp;&nbsp;Fire(bullets[0]);} public void IceAttack(){&nbsp;&nbsp;&nbsp;/// behaviour&nbsp;&nbsp;&nbsp;Fire(bullets[1]);} public void WindAttack(){&nbsp;&nbsp;&nbsp;/// behaviour&nbsp;&nbsp;&nbsp;Fire(bullets[2]);} 使用枚举值能够让代码看起来更好一点：</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;">public void WindAttack(){&nbsp;&nbsp;&nbsp;/// behaviour&nbsp;&nbsp;&nbsp;Fire(bullets[WeaponType.Wind]);}&nbsp;</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;">可是这对Inspector一点也不好。</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <span style="line-height:21px;"><font color="#696969"><span style="font-size:13.6364px;">最好使用单独的变量，而且起一个好的变量名，可以代表他们的内容的含义。使用以下这个类会更整洁。</span></font> </span>
   <p style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;"></p> 
   <p style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;"><br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;"><span style="line-height:21px;font-size:13.6364px;">[Serializable]public class Bullets{&nbsp;&nbsp;&nbsp;public Bullet FireBullet;&nbsp;&nbsp;&nbsp;public Bullet IceBullet;&nbsp;&nbsp;&nbsp;public Bullet WindBullet;}这里如果没有其它的Fire、Ice、Wind的数据。</span><br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;"><br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;"><span style="line-height:21px;font-size:13.6364px;font-weight:700;">37、把数据组织到可序列化的类中，能够让inspector更整洁</span><br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;"><span style="line-height:21px;font-size:13.6364px;">有些对象有一大堆可调节的变量，这样的情况下在Inspector中找到某个变量简直就成了噩梦。</span></p> 
   <p style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;">为了简化这样的情况，能够使用一下的步骤：<br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;"></p> 
   <ul style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:18.1818px;">
    <li style="list-style:disc;">把这些变量分组定义到不同的类中。并让它们声明为public和serializable。</li> 
    <li style="list-style:disc;">在一个基本的类中，把上述类的实例定义为public成员变量；</li> 
    <li style="list-style:disc;">不用在Awake或者Start中初始化这些变量，由于Unity会处理好它们。</li> 
    <li style="list-style:disc;">你能够定义它们的默认值；<br></li> 
   </ul>
   <span style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;line-height:21px;">这能够把变量分组到Inspector的分组页签中，方便管理。</span>
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <br style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;line-height:18.1818px;">
   <p style="color:rgb(85,85,85);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;margin-left:auto;line-height:18.1818px;"><span style="line-height:21px;color:rgb(105,105,105);font-family:'microsoft yahei';">[Serializable]public class MovementProperties //Not a MonoBehaviour!{&nbsp;&nbsp;&nbsp;public float movementSpeed;&nbsp;&nbsp;&nbsp;public float turnSpeed = 1; //default provided} public class HealthProperties //Not a MonoBehaviour!{&nbsp;&nbsp;&nbsp;public float maxHealth;&nbsp;&nbsp;&nbsp;public float regenerationRate;} public class Player : MonoBehaviour{&nbsp;&nbsp;&nbsp;public MovementProperties movementProeprties;&nbsp;&nbsp;&nbsp;public HealthPorperties healthProeprties;}</span></p> 
   <p style="color:rgb(85,85,85);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:13.6364px;margin-left:auto;line-height:18.1818px;"><br></p> 
   <div> 
    <p style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:12px;">版权声明：本文博客原创文章，博客，未经同意，不得转载。</p> 
    <p style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:12px;"><br></p> 
    <p style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:12px;"><br></p> 
    <p style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:12px;"><br></p> 
    <p style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:12px;"><br></p> 
    <p style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:12px;"><br></p> 
    <p><font color="#696969"><span style="font-size:12px;">本文转自mfrbuaa博客园博客，原文链接http://www.cnblogs.com/mfrbuaa/p/4633299.html，如需转载请自行联系原作者</span></font></p> 
    <div style="color:rgb(105,105,105);font-family:'microsoft yahei';font-size:13.6364px;">
     <br>
    </div> 
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
