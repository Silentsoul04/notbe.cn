<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Elasticsearch之中文分词器插件es-ik的自定义热更新词库 « NotBeCN</title>
  <meta name="description" content="             1： 部署 http 服务 在这使用 tomcat7 作为 web 容器， 先下载一个 tomcat7， 然后上传到某一台服务器上(192.168.80.10)。 再执行以下命令 tar -zxvf apache-tomcat-7.0.73.tar.gz cd apache-tomcat...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/14/weixin_33744141_90121159.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">Elasticsearch之中文分词器插件es-ik的自定义热更新词库</h1>
    <p class="post-meta">Nov 14, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">1： 部署 http 服务<br> 在这使用 tomcat7 作为 web 容器， 先下载一个 tomcat7， 然后上传到某一台服务器上(192.168.80.10)。<br> 再执行以下命令<br> tar -zxvf apache-tomcat-7.0.73.tar.gz<br> cd apache-tomcat-7.0.73/webapp/ROOT<br> vi hot.dic<br> 测试</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;　　在这里，我是为了避免跟我的hadoop和spark集群里的端口冲突，将默认的tomcat8080端口，改为8081端口了。</p> 
   <h1 style="font-size:28px;line-height:1.5;font-family:Verdana, Arial, Helvetica, sans-serif;"><br></h1> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　如果，是3台tomcat集群的话，则对应，比如我的192.168.80.10位8081端口，192.168.80.11位8082端口，192.168.80.12位8083端口</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">验证一下这个文件是否可以正常访问</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　http://192.168.80.10:<span style="color:rgb(0,0,255);">8081</span>/<span style="color:rgb(0,0,255);">zhoulshot</span>.dic</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201702/855959-20170226094946398-1716026714.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201702/855959-20170226095012820-1113917180.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">2： 修改 ik 插件的配置文件<br> cd elasticsearch-2.4.3/plugins/ik/config<br> vi IKAnalyzer.cfg.xml<br> 修改 key=remote_ext_dict 的 entry 中的内容<br> &lt;?xml version="1.0" encoding="UTF-8"?&gt;<br> &lt;!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd"&gt;<br> &lt;properties&gt;<br> &lt;comment&gt;IK Analyzer 扩展配置&lt;/comment&gt;<br> &lt;!--用户可以在这里配置自己的扩展字典 --&gt;<br> &lt;entry key="ext_dict"&gt;custom/mydict.dic;custom/single_word_low_freq.dic;<span style="color:rgb(0,0,255);">custom/zhouls.dic</span>&lt;/entry&gt;<br> &lt;!--用户可以在这里配置自己的扩展停止词字典--&gt;<br> &lt;entry key="ext_stopwords"&gt;custom/ext_stopword.dic&lt;/entry&gt;<br> &lt;!--用户可以在这里配置远程扩展字典 --&gt;<br> &lt;entry key="remote_ext_dict"&gt;<span style="color:rgb(0,0,255);">http://192.168.80.10:8081/zhoulshot.dic</span>&lt;/entry&gt;<br> &lt;!--用户可以在这里配置远程扩展停止词字典--&gt;<br> &lt;!-- &lt;entry key="remote_ext_stopwords"&gt;words_location&lt;/entry&gt; --&gt;<br> &lt;/properties&gt;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　<strong><span style="color:rgb(0,0,255);">注意：（1）</span></strong>默认是words_location，我这里改为我自己的了。http://192.168.80.10:8081/zhoulshot.dic &nbsp; （自定义词库）</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;　　　　 &nbsp;<strong><span style="color:rgb(0,0,255);">（2）</span></strong>默认是custom/mydict.dic;custom/single_word_low_freq.dic，我这里改为我自己的了。 &nbsp; &nbsp;（自定义热更新词库） &nbsp; custom/mydict.dic;custom/single_word_low_freq.dic;custom/zhouls.dic</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;<img src="https://images2015.cnblogs.com/blog/855959/201702/855959-20170225114005007-1736355101.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">3： 验证<br> 重启 es， 会看到如下日志信息， 说明远程的词典加载成功了。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">执行下面命令查看分词效果<br> curl 'http://192.168.80.10:9200/zhouls/_analyze?analyzer=ik_max_word&amp;pretty=true' -d&nbsp;'{"text":"桂林山水"}'<br> 正常情况下桂林山水会分为多个词语， 但是我们希望 es 把[桂林山水]作为一个完整的词， 又不希望重启 es。<br> 这样就需要修改前面的 zhoulshot.dic 文件， 增加一个词语[桂林山水]</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">vi hot.dic<br> 桂林山水<br> 文件保存之后， 查看 es 的日志会看到如下日志信息</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">再执行下面命令查看分词效果<br> curl 'http://192.168.80.10:9200/zhouls/_analyze?analyzer=ik_max_word&amp;pretty=true' -d&nbsp;'{"text":"桂林山水"}'<br> 到这为止， 可以实现动态添加自定义词库实现词库热更新。<br> ==============================================================================<br> 注意： 默认情况下， 最多一分钟之内就可以识别到新增的词语。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><br> 查看 es-ik 插件的源码可以发现</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;<img src="https://images2015.cnblogs.com/blog/855959/201702/855959-20170226102155179-1486819603.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-size:18pt;"><strong>1： 部署 http 服务</strong></span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　第一步：下载tomcat压缩包</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><a href="http://archive.apache.org/dist/tomcat/tomcat-7/v7.0.73/bin/" rel="nofollow" style="color:#000000;">http://archive.apache.org/dist/tomcat/tomcat-7/v7.0.73/bin/</a></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201702/855959-20170225110908710-771160085.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　<img src="https://images2015.cnblogs.com/blog/855959/201702/855959-20170225111436913-1085297493.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　第二步：上传tomcat压缩包</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201702/855959-20170225111621288-1754549546.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">[hadoop@HadoopMaster app]$ ll<br> total 3092<br> drwxrwxr-x. 9 hadoop hadoop 4096 Feb 22 06:05 elasticsearch-2.4.3<br> -rw-r--r--. 1 hadoop hadoop 908862 Jan 10 11:38 elasticsearch-head-master.zip<br> -rw-r--r--. 1 hadoop hadoop 2228252 Jan 10 11:38 elasticsearch-kopf-master.zip<br> drwxr-xr-x. 10 hadoop hadoop 4096 Oct 31 17:15 hadoop-2.6.0<br> drwxr-xr-x. 15 hadoop hadoop 4096 Nov 14 2014 hadoop-2.6.0-src<br> drwxrwxr-x. 8 hadoop hadoop 4096 Nov 2 18:20 hbase-1.2.3<br> drwxr-xr-x. 8 hadoop hadoop 4096 Apr 11 2015 jdk1.7.0_79<br> drwxr-xr-x. 10 hadoop hadoop 4096 Nov 1 23:39 zookeeper-3.4.6<br> [hadoop@HadoopMaster app]$&nbsp;<span style="color:rgb(255,0,0);">rz</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">[hadoop@HadoopMaster app]$ ll<br> total 11824<br> -rw-r--r--. 1 hadoop hadoop 8938514 Feb 25 11:10<span style="color:rgb(0,0,255);">&nbsp;apache-tomcat-7.0.73.tar.gz</span><br> drwxrwxr-x. 9 hadoop hadoop 4096 Feb 22 06:05 elasticsearch-2.4.3<br> -rw-r--r--. 1 hadoop hadoop 908862 Jan 10 11:38 elasticsearch-head-master.zip<br> -rw-r--r--. 1 hadoop hadoop 2228252 Jan 10 11:38 elasticsearch-kopf-master.zip<br> drwxr-xr-x. 10 hadoop hadoop 4096 Oct 31 17:15 hadoop-2.6.0<br> drwxr-xr-x. 15 hadoop hadoop 4096 Nov 14 2014 hadoop-2.6.0-src<br> drwxrwxr-x. 8 hadoop hadoop 4096 Nov 2 18:20 hbase-1.2.3<br> drwxr-xr-x. 8 hadoop hadoop 4096 Apr 11 2015 jdk1.7.0_79<br> drwxr-xr-x. 10 hadoop hadoop 4096 Nov 1 23:39 zookeeper-3.4.6<br> [hadoop@HadoopMaster app]$</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　第三步:解压缩</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201702/855959-20170225111816413-1911051268.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">[hadoop@HadoopMaster app]$&nbsp;<span style="color:rgb(255,0,0);">tar -zxvf apache-tomcat-7.0.73.tar.gz&nbsp;</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　第四步：删除压缩包</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201702/855959-20170225111941929-1817022703.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">[hadoop@HadoopMaster app]$ ll<br> total 11828<br> drwxrwxr-x. 9 hadoop hadoop 4096 Feb 25 19:18 apache-tomcat-7.0.73<br> -rw-r--r--. 1 hadoop hadoop 8938514 Feb 25 11:10 apache-tomcat-7.0.73.tar.gz<br> drwxrwxr-x. 9 hadoop hadoop 4096 Feb 22 06:05 elasticsearch-2.4.3<br> -rw-r--r--. 1 hadoop hadoop 908862 Jan 10 11:38 elasticsearch-head-master.zip<br> -rw-r--r--. 1 hadoop hadoop 2228252 Jan 10 11:38 elasticsearch-kopf-master.zip<br> drwxr-xr-x. 10 hadoop hadoop 4096 Oct 31 17:15 hadoop-2.6.0<br> drwxr-xr-x. 15 hadoop hadoop 4096 Nov 14 2014 hadoop-2.6.0-src<br> drwxrwxr-x. 8 hadoop hadoop 4096 Nov 2 18:20 hbase-1.2.3<br> drwxr-xr-x. 8 hadoop hadoop 4096 Apr 11 2015 jdk1.7.0_79<br> drwxr-xr-x. 10 hadoop hadoop 4096 Nov 1 23:39 zookeeper-3.4.6<br> [hadoop@HadoopMaster app]$&nbsp;<span style="color:rgb(255,0,0);">rm apache-tomcat-7.0.73.tar.gz</span>&nbsp;<br> [hadoop@HadoopMaster app]$ ll<br> total 3096<br> drwxrwxr-x. 9 hadoop hadoop 4096 Feb 25 19:18&nbsp;<span style="color:rgb(0,0,255);">apache-tomcat-7.0.73</span><br> drwxrwxr-x. 9 hadoop hadoop 4096 Feb 22 06:05 elasticsearch-2.4.3<br> -rw-r--r--. 1 hadoop hadoop 908862 Jan 10 11:38 elasticsearch-head-master.zip<br> -rw-r--r--. 1 hadoop hadoop 2228252 Jan 10 11:38 elasticsearch-kopf-master.zip<br> drwxr-xr-x. 10 hadoop hadoop 4096 Oct 31 17:15 hadoop-2.6.0<br> drwxr-xr-x. 15 hadoop hadoop 4096 Nov 14 2014 hadoop-2.6.0-src<br> drwxrwxr-x. 8 hadoop hadoop 4096 Nov 2 18:20 hbase-1.2.3<br> drwxr-xr-x. 8 hadoop hadoop 4096 Apr 11 2015 jdk1.7.0_79<br> drwxr-xr-x. 10 hadoop hadoop 4096 Nov 1 23:39 zookeeper-3.4.6<br> [hadoop@HadoopMaster app]$</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;　　第五步：重命名tomcat安装目录</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201702/855959-20170225112112054-1478408159.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">[hadoop@HadoopMaster app]$ ll<br> total 3096<br> drwxrwxr-x. 9 hadoop hadoop 4096 Feb 25 19:18&nbsp;<span style="color:rgb(0,0,255);">apache-tomcat-7.0.73</span><br> drwxrwxr-x. 9 hadoop hadoop 4096 Feb 22 06:05 elasticsearch-2.4.3<br> -rw-r--r--. 1 hadoop hadoop 908862 Jan 10 11:38 elasticsearch-head-master.zip<br> -rw-r--r--. 1 hadoop hadoop 2228252 Jan 10 11:38 elasticsearch-kopf-master.zip<br> drwxr-xr-x. 10 hadoop hadoop 4096 Oct 31 17:15 hadoop-2.6.0<br> drwxr-xr-x. 15 hadoop hadoop 4096 Nov 14 2014 hadoop-2.6.0-src<br> drwxrwxr-x. 8 hadoop hadoop 4096 Nov 2 18:20 hbase-1.2.3<br> drwxr-xr-x. 8 hadoop hadoop 4096 Apr 11 2015 jdk1.7.0_79<br> drwxr-xr-x. 10 hadoop hadoop 4096 Nov 1 23:39 zookeeper-3.4.6<br> [hadoop@HadoopMaster app]$&nbsp;<span style="color:rgb(255,0,0);">mv apache-tomcat-7.0.73 tomcat-7.0.73</span><br> [hadoop@HadoopMaster app]$ ll<br> total 3096<br> drwxrwxr-x. 9 hadoop hadoop 4096 Feb 22 06:05 elasticsearch-2.4.3<br> -rw-r--r--. 1 hadoop hadoop 908862 Jan 10 11:38 elasticsearch-head-master.zip<br> -rw-r--r--. 1 hadoop hadoop 2228252 Jan 10 11:38 elasticsearch-kopf-master.zip<br> drwxr-xr-x. 10 hadoop hadoop 4096 Oct 31 17:15 hadoop-2.6.0<br> drwxr-xr-x. 15 hadoop hadoop 4096 Nov 14 2014 hadoop-2.6.0-src<br> drwxrwxr-x. 8 hadoop hadoop 4096 Nov 2 18:20 hbase-1.2.3<br> drwxr-xr-x. 8 hadoop hadoop 4096 Apr 11 2015 jdk1.7.0_79<br> drwxrwxr-x. 9 hadoop hadoop 4096 Feb 25 19:18&nbsp;<span style="color:rgb(0,0,255);">tomcat-7.0.73</span><br> drwxr-xr-x. 10 hadoop hadoop 4096 Nov 1 23:39 zookeeper-3.4.6<br> [hadoop@HadoopMaster app]$</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　第六步：进入tomcat安装目录，并初步认识下</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201702/855959-20170225112238976-399801936.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">[hadoop@HadoopMaster app]$ cd tomcat-7.0.73/<br> [hadoop@HadoopMaster tomcat-7.0.73]$ ll<br> total 116<br> drwxr-xr-x. 2 hadoop hadoop 4096 Feb 25 19:18&nbsp;<span style="color:rgb(0,0,255);">bin</span><br> drwxr-xr-x. 2 hadoop hadoop 4096 Nov 8 05:30&nbsp;<span style="color:rgb(0,0,255);">conf</span><br> drwxr-xr-x. 2 hadoop hadoop 4096 Feb 25 19:18&nbsp;<span style="color:rgb(0,0,255);">lib</span><br> -rw-r--r--. 1 hadoop hadoop 56846 Nov 8 05:30&nbsp;<span style="color:rgb(0,0,255);">LICENSE</span><br> drwxr-xr-x. 2 hadoop hadoop 4096 Nov 8 05:27&nbsp;<span style="color:rgb(0,0,255);">logs</span><br> -rw-r--r--. 1 hadoop hadoop 1239 Nov 8 05:30&nbsp;<span style="color:rgb(0,0,255);">NOTICE</span><br> -rw-r--r--. 1 hadoop hadoop 8965 Nov 8 05:30&nbsp;<span style="color:rgb(0,0,255);">RELEASE-NOTES</span><br> -rw-r--r--. 1 hadoop hadoop 16195 Nov 8 05:30&nbsp;<span style="color:rgb(0,0,255);">RUNNING.txt</span><br> drwxr-xr-x. 2 hadoop hadoop 4096 Feb 25 19:18&nbsp;<span style="color:rgb(0,0,255);">temp</span><br> drwxr-xr-x. 7 hadoop hadoop 4096 Nov 8 05:29&nbsp;<span style="color:rgb(0,0,255);">webapps</span><br> drwxr-xr-x. 2 hadoop hadoop 4096 Nov 8 05:27&nbsp;<span style="color:rgb(0,0,255);">work</span><br> [hadoop@HadoopMaster tomcat-7.0.73]$</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　在这里，需要，先事先好，在linux下安装好tomcat。并配置好环境变量。不会的，请移步</p> 
   <h1 style="font-size:28px;line-height:1.5;font-family:Verdana, Arial, Helvetica, sans-serif;"><br></h1> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><a id="homepage1_HomePageDays_DaysList_ctl00_DayList_TitleUrl_0" class="postTitle2" href="http://www.cnblogs.com/zlslch/p/6441447.html" rel="nofollow" style="color:#000000;">&nbsp;</a></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　第七步：进入webapps/ROOT目录下</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201702/855959-20170225112458085-451437819.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">[hadoop@HadoopMaster tomcat-7.0.73]$<span style="color:rgb(255,0,0);">&nbsp;cd webapps/</span><br> [hadoop@HadoopMaster webapps]$ pwd<br> /home/hadoop/app/tomcat-7.0.73/webapps<br> [hadoop@HadoopMaster webapps]$ ll<br> total 20<br> drwxr-xr-x. 14 hadoop hadoop 4096 Feb 25 19:18 docs<br> drwxr-xr-x. 7 hadoop hadoop 4096 Feb 25 19:18 examples<br> drwxr-xr-x. 5 hadoop hadoop 4096 Feb 25 19:18 host-manager<br> drwxr-xr-x. 5 hadoop hadoop 4096 Feb 25 19:18 manager<br> drwxr-xr-x. 3 hadoop hadoop 4096 Feb 25 19:18 ROOT<br> [hadoop@HadoopMaster webapps]$&nbsp;<span style="color:rgb(255,0,0);">cd ROOT/</span><br> [hadoop@HadoopMaster ROOT]$ pwd<br> /home/hadoop/app/<span style="color:rgb(0,0,255);">tomcat-7.0.73/webapps/ROO</span>T<br> [hadoop@HadoopMaster ROOT]$ ll<br> total 196<br> -rw-r--r--. 1 hadoop hadoop 17811 Nov 8 05:29 asf-logo.png<br> -rw-r--r--. 1 hadoop hadoop 5866 Nov 8 05:29 asf-logo-wide.gif<br> -rw-r--r--. 1 hadoop hadoop 713 Nov 8 05:29 bg-button.png<br> -rw-r--r--. 1 hadoop hadoop 1918 Nov 8 05:29 bg-middle.png<br> -rw-r--r--. 1 hadoop hadoop 1392 Nov 8 05:29 bg-nav-item.png<br> -rw-r--r--. 1 hadoop hadoop 1401 Nov 8 05:29 bg-nav.png<br> -rw-r--r--. 1 hadoop hadoop 3103 Nov 8 05:29 bg-upper.png<br> -rw-r--r--. 1 hadoop hadoop 3376 Nov 8 05:30 build.xml<br> -rw-r--r--. 1 hadoop hadoop 21630 Nov 8 05:29 favicon.ico<br> -rw-r--r--. 1 hadoop hadoop 12186 Nov 8 05:30 index.jsp<br> -rw-r--r--. 1 hadoop hadoop 8965 Nov 8 05:30 RELEASE-NOTES.txt<br> -rw-r--r--. 1 hadoop hadoop 5576 Nov 8 05:30 tomcat.css<br> -rw-r--r--. 1 hadoop hadoop 2066 Nov 8 05:29 tomcat.gif<br> -rw-r--r--. 1 hadoop hadoop 5103 Nov 8 05:29 tomcat.png<br> -rw-r--r--. 1 hadoop hadoop 2376 Nov 8 05:29 tomcat-power.gif<br> -rw-r--r--. 1 hadoop hadoop 67198 Nov 8 05:30 tomcat.svg<br> drwxr-xr-x. 2 hadoop hadoop 4096 Feb 25 19:18 WEB-INF<br> [hadoop@HadoopMaster ROOT]$</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　第八步：新建，自定义的热更新词库。如，我这里，是，zhoulshot.dic</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201702/855959-20170225114537023-1667998420.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">[hadoop@HadoopMaster ROOT]$ pwd<br> /home/hadoop/app/tomcat-7.0.73/webapps/ROOT<br> [hadoop@HadoopMaster ROOT]$&nbsp;<span style="color:rgb(255,0,0);">vim zhoulshot.dic</span><br> [hadoop@HadoopMaster ROOT]$ cat zhoulshot.dic&nbsp;<br><span style="color:rgb(0,0,255);">好记性不如烂笔头感叹号博客园热更新词</span><br> [hadoop@HadoopMaster ROOT]$ ll<br> total 200<br> -rw-r--r--. 1 hadoop hadoop 17811 Nov 8 05:29 asf-logo.png<br> -rw-r--r--. 1 hadoop hadoop 5866 Nov 8 05:29 asf-logo-wide.gif<br> -rw-r--r--. 1 hadoop hadoop 713 Nov 8 05:29 bg-button.png<br> -rw-r--r--. 1 hadoop hadoop 1918 Nov 8 05:29 bg-middle.png<br> -rw-r--r--. 1 hadoop hadoop 1392 Nov 8 05:29 bg-nav-item.png<br> -rw-r--r--. 1 hadoop hadoop 1401 Nov 8 05:29 bg-nav.png<br> -rw-r--r--. 1 hadoop hadoop 3103 Nov 8 05:29 bg-upper.png<br> -rw-r--r--. 1 hadoop hadoop 3376 Nov 8 05:30 build.xml<br> -rw-r--r--. 1 hadoop hadoop 21630 Nov 8 05:29 favicon.ico<br> -rw-r--r--. 1 hadoop hadoop 12186 Nov 8 05:30 index.jsp<br> -rw-r--r--. 1 hadoop hadoop 8965 Nov 8 05:30 RELEASE-NOTES.txt<br> -rw-r--r--. 1 hadoop hadoop 5576 Nov 8 05:30 tomcat.css<br> -rw-r--r--. 1 hadoop hadoop 2066 Nov 8 05:29 tomcat.gif<br> -rw-r--r--. 1 hadoop hadoop 5103 Nov 8 05:29 tomcat.png<br> -rw-r--r--. 1 hadoop hadoop 2376 Nov 8 05:29 tomcat-power.gif<br> -rw-r--r--. 1 hadoop hadoop 67198 Nov 8 05:30 tomcat.svg<br> drwxr-xr-x. 2 hadoop hadoop 4096 Feb 25 19:18 WEB-INF<br> -rw-rw-r--. 1 hadoop hadoop 55 Feb 25 19:44 zhoulshot.dic<br> [hadoop@HadoopMaster ROOT]$</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　第九步：验证一下这个zhoulshot热更新词文件是否可以正常访问　</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201702/855959-20170226095355757-877112358.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201702/855959-20170225115246023-1154426772.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201702/855959-20170225115257304-683655138.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-size:18pt;"><strong>2：&nbsp;修改 ik 插件的配置文件</strong></span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;<img src="https://images2015.cnblogs.com/blog/855959/201702/855959-20170226095719976-712042872.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201702/855959-20170226095743570-1107848173.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br> &lt;!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd"&gt;<br> &lt;properties&gt;<br> &lt;comment&gt;IK Analyzer 扩展配置&lt;/comment&gt;<br> &lt;!--用户可以在这里配置自己的扩展字典 --&gt;<br> &lt;entry key="ext_dict"&gt;custom/mydict.dic;custom/single_word_low_freq.dic;custom/zhouls.dic&lt;/entry&gt;<br> &lt;!--用户可以在这里配置自己的扩展停止词字典--&gt;<br> &lt;entry key="ext_stopwords"&gt;custom/ext_stopword.dic&lt;/entry&gt;<br> &lt;!--用户可以在这里配置远程扩展字典 --&gt;<br> &lt;!-- &lt;entry key="remote_ext_dict"&gt;words_location&lt;/entry&gt; --&gt;<br> &lt;!--用户可以在这里配置远程扩展停止词字典--&gt;<br> &lt;!-- &lt;entry key="remote_ext_stopwords"&gt;words_location&lt;/entry&gt; --&gt;<br> &lt;/properties&gt;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">修改为</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201702/855959-20170226095955101-365270636.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br> &lt;!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd"&gt;<br> &lt;properties&gt;<br> &lt;comment&gt;IK Analyzer 扩展配置&lt;/comment&gt;<br> &lt;!--用户可以在这里配置自己的扩展字典 --&gt;<br> &lt;entry key="ext_dict"&gt;custom/mydict.dic;custom/single_word_low_freq.dic;custom/zhouls.dic&lt;/entry&gt;<br> &lt;!--用户可以在这里配置自己的扩展停止词字典--&gt;<br> &lt;entry key="ext_stopwords"&gt;custom/ext_stopword.dic&lt;/entry&gt;<br> &lt;!--用户可以在这里配置远程扩展字典 --&gt;<br> &lt;entry key="remote_ext_dict"&gt;<span style="color:rgb(0,0,255);">http://192.168.80.10:8081/zhoulshot.dic</span>&lt;/entry&gt;<br> &lt;!--用户可以在这里配置远程扩展停止词字典--&gt;<br> &lt;!-- &lt;entry key="remote_ext_stopwords"&gt;words_location&lt;/entry&gt; --&gt;<br> &lt;/properties&gt;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-size:18pt;"><strong>3： 验证</strong></span><br> 重启 es， 会看到如下日志信息， 说明远程的词典加载成功了。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;我这里，为了更好地看出效果，在es的安装目录下，bin/elasticsearch这种方式来启动。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201702/855959-20170226100258898-64457312.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">[hadoop@HadoopMaster elasticsearch-2.4.3]$ jps<br> 2115 Jps<br> 1979 Bootstrap<br> [hadoop@HadoopMaster elasticsearch-2.4.3]$ bin/elasticsearch<br> [2017-02-26 18:02:00,383][WARN ][bootstrap ] unable to install syscall filter: seccomp unavailable: requires kernel 3.5+ with CONFIG_SECCOMP and CONFIG_SECCOMP_FILTER compiled in<br> [2017-02-26 18:02:01,915][INFO ][node ] [Meteor Man] version[2.4.3], pid[2126], build[d38a34e/2016-12-07T16:28:56Z]<br> [2017-02-26 18:02:01,915][INFO ][node ] [Meteor Man] initializing ...<br> [2017-02-26 18:02:06,929][INFO ][plugins ] [Meteor Man] modules [lang-groovy, reindex, lang-expression], plugins [analysis-ik, kopf, head], sites [kopf, head]<br> [2017-02-26 18:02:07,141][INFO ][env ] [Meteor Man] using [1] data paths, mounts [[/home (/dev/sda5)]], net usable_space [23.4gb], net total_space [26.1gb], spins? [possibly], types [ext4]<br> [2017-02-26 18:02:07,141][INFO ][env ] [Meteor Man] heap size [1015.6mb], compressed ordinary object pointers [true]<br> [2017-02-26 18:02:07,142][WARN ][env ] [Meteor Man] max file descriptors [4096] for elasticsearch process likely too low, consider increasing to at least [65536]<br> [2017-02-26 18:02:12,726][INFO ][ik-analyzer ] try load config from /home/hadoop/app/elasticsearch-2.4.3/config/analysis-ik/IKAnalyzer.cfg.xml<br> [2017-02-26 18:02:12,728][INFO ][ik-analyzer ] try load config from /home/hadoop/app/elasticsearch-2.4.3/plugins/ik/config/IKAnalyzer.cfg.xml<br> [2017-02-26 18:02:13,763][INFO ][ik-analyzer ] [Dict Loading] custom/mydict.dic<br> [2017-02-26 18:02:13,799][INFO ][ik-analyzer ] [Dict Loading] custom/single_word_low_freq.dic<br> [2017-02-26 18:02:13,816][INFO ][ik-analyzer ] [Dict Loading] custom/zhouls.dic<br> [2017-02-26 18:02:13,821][INFO ][ik-analyzer ] [Dict Loading] http://192.168.80.10:8081/zhoulshot.dic<br> [2017-02-26 18:02:15,328][INFO ][ik-analyzer ] 好记性不如烂笔头感叹号博客园热更新词<br> [2017-02-26 18:02:15,394][INFO ][ik-analyzer ] [Dict Loading] custom/ext_stopword.dic<br> [2017-02-26 18:02:16,766][INFO ][node ] [Meteor Man] initialized<br> [2017-02-26 18:02:16,766][INFO ][node ] [Meteor Man] starting ...<br> [2017-02-26 18:02:18,221][INFO ][transport ] [Meteor Man] publish_address {192.168.80.10:9300}, bound_addresses {[::]:9300}<br> [2017-02-26 18:02:18,257][INFO ][discovery ] [Meteor Man] elasticsearch/EkiwUFTnTZO4PzCVERAukw<br> [2017-02-26 18:02:21,460][INFO ][cluster.service ] [Meteor Man] new_master {Meteor Man}{EkiwUFTnTZO4PzCVERAukw}{192.168.80.10}{192.168.80.10:9300}, reason: zen-disco-join(elected_as_master, [0] joins received)<br> [2017-02-26 18:02:21,538][INFO ][http ] [Meteor Man] publish_address {192.168.80.10:9200}, bound_addresses {[::]:9200}<br> [2017-02-26 18:02:21,542][INFO ][node ] [Meteor Man] started<br> [2017-02-26 18:02:22,376][INFO ][gateway ] [Meteor Man] recovered [1] indices into cluster_state<br> [2017-02-26 18:02:25,460][INFO ][ik-analyzer ] 重新加载词典...<br> [2017-02-26 18:02:25,462][INFO ][ik-analyzer ] try load config from /home/hadoop/app/elasticsearch-2.4.3/config/analysis-ik/IKAnalyzer.cfg.xml<br> [2017-02-26 18:02:25,468][INFO ][ik-analyzer ] try load config from /home/hadoop/app/elasticsearch-2.4.3/plugins/ik/config/IKAnalyzer.cfg.xml</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">[2017-02-26 18:02:27,090][INFO ][ik-analyzer ] [Dict Loading] custom/mydict.dic<br> [2017-02-26 18:02:27,092][INFO ][ik-analyzer ] [Dict Loading] custom/single_word_low_freq.dic<br> [2017-02-26 18:02:27,097][INFO ][ik-analyzer ] [Dict Loading] custom/zhouls.dic<br> [2017-02-26 18:02:27,098][INFO ][ik-analyzer ] [Dict Loading] http://192.168.80.10:8081/zhoulshot.dic<br> [2017-02-26 18:02:27,134][INFO ][ik-analyzer ] 好记性不如烂笔头感叹号博客园热更新词<br> [2017-02-26 18:02:27,138][INFO ][ik-analyzer ] [Dict Loading] custom/ext_stopword.dic<br> [2017-02-26 18:02:27,140][INFO ][ik-analyzer ] 重新加载词典完毕...</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　执行下面命令查看分词效果</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201702/855959-20170226100924491-1233134971.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">[hadoop@HadoopMaster elasticsearch-2.4.3]$ jps<br> 2283 Jps<br> 2195 Elasticsearch<br> 1979 Bootstrap<br> [hadoop@HadoopMaster elasticsearch-2.4.3]$&nbsp;<span style="color:rgb(255,0,0);">curl 'http://192.168.80.10:9200/zhouls/_analyze?analyzer=ik_max_word&amp;pretty=true' -d '{"text":"桂林不雾霾"}'</span><br> {<br> "tokens" : [ {<br> "token" : "桂林",<br> "start_offset" : 0,<br> "end_offset" : 2,<br> "type" : "CN_WORD",<br> "position" : 0<br> }, {<br> "token" : "桂",<br> "start_offset" : 0,<br> "end_offset" : 1,<br> "type" : "CN_WORD",<br> "position" : 1<br> }, {<br> "token" : "林",<br> "start_offset" : 1,<br> "end_offset" : 2,<br> "type" : "CN_CHAR",<br> "position" : 2<br> }, {<br> "token" : "不",<br> "start_offset" : 2,<br> "end_offset" : 3,<br> "type" : "CN_CHAR",<br> "position" : 3<br> }, {<br> "token" : "雾",<br> "start_offset" : 3,</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">"end_offset" : 4,<br> "type" : "CN_WORD",<br> "position" : 4<br> }, {<br> "token" : "霾",<br> "start_offset" : 4,<br> "end_offset" : 5,<br> "type" : "CN_WORD",<br> "position" : 5<br> } ]<br> }<br> [hadoop@HadoopMaster elasticsearch-2.4.3]$</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　正常情况下桂林不雾霾会分为多个词语， 但是我们希望 es 把[桂林不雾霾]作为一个完整的词， 又不希望重启 es。<br> 这样就需要修改前面的 zhoulshot.dic 文件， 增加一个词语[桂林不雾霾]<br> vim zhoulshot.dic</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201702/855959-20170226101231710-293704281.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">[hadoop@HadoopMaster ROOT]$ pwd<br> /home/hadoop/app/<span style="color:rgb(0,0,255);">tomcat-7.0.73/webapps/ROOT</span><br> [hadoop@HadoopMaster ROOT]$ ll<br> total 200<br> -rw-r--r--. 1 hadoop hadoop 17811 Nov 8 05:29 asf-logo.png<br> -rw-r--r--. 1 hadoop hadoop 5866 Nov 8 05:29 asf-logo-wide.gif<br> -rw-r--r--. 1 hadoop hadoop 713 Nov 8 05:29 bg-button.png<br> -rw-r--r--. 1 hadoop hadoop 1918 Nov 8 05:29 bg-middle.png<br> -rw-r--r--. 1 hadoop hadoop 1392 Nov 8 05:29 bg-nav-item.png<br> -rw-r--r--. 1 hadoop hadoop 1401 Nov 8 05:29 bg-nav.png<br> -rw-r--r--. 1 hadoop hadoop 3103 Nov 8 05:29 bg-upper.png<br> -rw-r--r--. 1 hadoop hadoop 3376 Nov 8 05:30 build.xml<br> -rw-r--r--. 1 hadoop hadoop 21630 Nov 8 05:29 favicon.ico<br> -rw-r--r--. 1 hadoop hadoop 12186 Nov 8 05:30 index.jsp<br> -rw-r--r--. 1 hadoop hadoop 8965 Nov 8 05:30 RELEASE-NOTES.txt<br> -rw-r--r--. 1 hadoop hadoop 5576 Nov 8 05:30 tomcat.css<br> -rw-r--r--. 1 hadoop hadoop 2066 Nov 8 05:29 tomcat.gif<br> -rw-r--r--. 1 hadoop hadoop 5103 Nov 8 05:29 tomcat.png<br> -rw-r--r--. 1 hadoop hadoop 2376 Nov 8 05:29 tomcat-power.gif<br> -rw-r--r--. 1 hadoop hadoop 67198 Nov 8 05:30 tomcat.svg<br> drwxr-xr-x. 2 hadoop hadoop 4096 Feb 25 19:18 WEB-INF<br> -rw-rw-r--. 1 hadoop hadoop 55 Feb 25 19:44 zhoulshot.dic<br> [hadoop@HadoopMaster ROOT]$&nbsp;<span style="color:rgb(255,0,0);">vim zhoulshot.dic</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;<img src="https://images2015.cnblogs.com/blog/855959/201702/855959-20170226101328882-717220816.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201702/855959-20170226101402226-1474934272.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">[hadoop@HadoopMaster ROOT]$ cat zhoulshot.dic&nbsp;<br> 好记性不如烂笔头感叹号博客园热更新词<br> 桂林不雾霾<br> [hadoop@HadoopMaster ROOT]$</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　文件保存之后， 重启es，查看 es 的日志会看到如下日志信息</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201702/855959-20170226101555320-280599280.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">[hadoop@HadoopMaster elasticsearch-2.4.3]$ jps<br> 2353 Jps<br> 1979 Bootstrap<br> [hadoop@HadoopMaster elasticsearch-2.4.3]$ bin/elasticsearch<br> [2017-02-26 18:15:11,538][WARN ][bootstrap ] unable to install syscall filter: seccomp unavailable: requires kernel 3.5+ with CONFIG_SECCOMP and CONFIG_SECCOMP_FILTER compiled in<br> [2017-02-26 18:15:12,476][INFO ][node ] [Andromeda] version[2.4.3], pid[2363], build[d38a34e/2016-12-07T16:28:56Z]<br> [2017-02-26 18:15:12,476][INFO ][node ] [Andromeda] initializing ...<br> [2017-02-26 18:15:14,047][INFO ][plugins ] [Andromeda] modules [lang-groovy, reindex, lang-expression], plugins [analysis-ik, kopf, head], sites [kopf, head]<br> [2017-02-26 18:15:14,093][INFO ][env ] [Andromeda] using [1] data paths, mounts [[/home (/dev/sda5)]], net usable_space [23.4gb], net total_space [26.1gb], spins? [possibly], types [ext4]<br> [2017-02-26 18:15:14,094][INFO ][env ] [Andromeda] heap size [1015.6mb], compressed ordinary object pointers [true]<br> [2017-02-26 18:15:14,094][WARN ][env ] [Andromeda] max file descriptors [4096] for elasticsearch process likely too low, consider increasing to at least [65536]<br> [2017-02-26 18:15:17,940][INFO ][ik-analyzer ] try load config from /home/hadoop/app/elasticsearch-2.4.3/config/analysis-ik/IKAnalyzer.cfg.xml<br> [2017-02-26 18:15:17,942][INFO ][ik-analyzer ] try load config from /home/hadoop/app/elasticsearch-2.4.3/plugins/ik/config/IKAnalyzer.cfg.xml<br> [2017-02-26 18:15:18,804][INFO ][ik-analyzer ] [Dict Loading] custom/mydict.dic<br> [2017-02-26 18:15:18,805][INFO ][ik-analyzer ] [Dict Loading] custom/single_word_low_freq.dic<br> [2017-02-26 18:15:18,809][INFO ][ik-analyzer ] [Dict Loading] custom/zhouls.dic<br> [2017-02-26 18:15:18,809][INFO ][ik-analyzer ] [Dict Loading] http://192.168.80.10:8081/zhoulshot.dic<br> [2017-02-26 18:15:19,962][INFO ][ik-analyzer ] 好记性不如烂笔头感叹号博客园热更新词<br> [2017-02-26 18:15:19,964][INFO ][ik-analyzer ] 桂林不雾霾<br> [2017-02-26 18:15:19,979][INFO ][ik-analyzer ] [Dict Loading] custom/ext_stopword.dic<br> [2017-02-26 18:15:21,455][INFO ][node ] [Andromeda] initialized<br> [2017-02-26 18:15:21,455][INFO ][node ] [Andromeda] starting ...<br> [2017-02-26 18:15:21,557][INFO ][transport ] [Andromeda] publish_address {192.168.80.10:9300}, bound_addresses {[::]:9300}<br> [2017-02-26 18:15:21,565][INFO ][discovery ] [Andromeda] elasticsearch/U318aiv6RTi3dKHaCIRHWw<br> [2017-02-26 18:15:24,761][INFO ][cluster.service ] [Andromeda] new_master {Andromeda}{U318aiv6RTi3dKHaCIRHWw}{192.168.80.10}{192.168.80.10:9300}, reason: zen-disco-join(elected_as_master, [0] joins received)<br> [2017-02-26 18:15:24,914][INFO ][http ] [Andromeda] publish_address {192.168.80.10:9200}, bound_addresses {[::]:9200}<br> [2017-02-26 18:15:24,920][INFO ][node ] [Andromeda] started<br> [2017-02-26 18:15:25,640][INFO ][gateway ] [Andromeda] recovered [1] indices into cluster_state<br> [2017-02-26 18:15:30,044][INFO ][ik-analyzer ] 重新加载词典...<br> [2017-02-26 18:15:30,048][INFO ][ik-analyzer ] try load config from /home/hadoop/app/elasticsearch-2.4.3/config/analysis-ik/IKAnalyzer.cfg.xml</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">[2017-02-26 18:15:30,051][INFO ][ik-analyzer ] try load config from /home/hadoop/app/elasticsearch-2.4.3/plugins/ik/config/IKAnalyzer.cfg.xml<br> [2017-02-26 18:15:31,617][INFO ][ik-analyzer ] [Dict Loading] custom/mydict.dic<br> [2017-02-26 18:15:31,618][INFO ][ik-analyzer ] [Dict Loading] custom/single_word_low_freq.dic<br> [2017-02-26 18:15:31,625][INFO ][ik-analyzer ] [Dict Loading] custom/zhouls.dic<br> [2017-02-26 18:15:31,627][INFO ][ik-analyzer ] [Dict Loading] http://192.168.80.10:8081/zhoulshot.dic<br> [2017-02-26 18:15:31,664][INFO ][ik-analyzer ] 好记性不如烂笔头感叹号博客园热更新词<br> [2017-02-26 18:15:31,665][INFO ][ik-analyzer ] 桂林不雾霾<br> [2017-02-26 18:15:31,666][INFO ][ik-analyzer ] [Dict Loading] custom/ext_stopword.dic<br> [2017-02-26 18:15:31,668][INFO ][ik-analyzer ] 重新加载词典完毕...</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　直接，ctrl + c，终止es进程，再bin/elasticsearch -d</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201702/855959-20170226101652179-730653724.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;　　再执行下面命令查看分词效果</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201702/855959-20170226101731616-115916137.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">[hadoop@HadoopMaster elasticsearch-2.4.3]$&nbsp;<span style="color:rgb(255,0,0);">curl 'http://192.168.80.10:9200/zhouls/_analyze?analyzer=ik_max_word&amp;pretty=true' -d '{"text":"桂林不雾霾"}'</span><br> {<br> "tokens" : [ {<br> "token" : "<span style="color:rgb(0,0,255);">桂林不雾霾</span>",<br> "start_offset" : 0,<br> "end_offset" : 5,<br> "type" : "CN_WORD",<br> "position" : 0<br> }, {<br> "token" : "桂林",<br> "start_offset" : 0,<br> "end_offset" : 2,<br> "type" : "CN_WORD",<br> "position" : 1<br> }, {<br> "token" : "桂",<br> "start_offset" : 0,<br> "end_offset" : 1,<br> "type" : "CN_WORD",<br> "position" : 2<br> }, {<br> "token" : "林",<br> "start_offset" : 1,<br> "end_offset" : 2,<br> "type" : "CN_CHAR",<br> "position" : 3<br> }, {<br> "token" : "不",<br> "start_offset" : 2,<br> "end_offset" : 3,<br> "type" : "CN_CHAR",<br> "position" : 4<br> }, {</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">"token" : "雾",<br> "start_offset" : 3,<br> "end_offset" : 4,<br> "type" : "CN_WORD",<br> "position" : 5<br> }, {<br> "token" : "霾",<br> "start_offset" : 4,<br> "end_offset" : 5,<br> "type" : "CN_WORD",<br> "position" : 6<br> } ]<br> }<br> [hadoop@HadoopMaster elasticsearch-2.4.3]$</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　<span style="font-size:14pt;"><strong><span style="color:rgb(0,0,255);">到这为止， 可以实现动态添加自定义词库实现词库热更新!</span></strong></span><br> ==============================================================================<br> 注意： 默认情况下， 最多一分钟之内就可以识别到新增的词语。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201702/855959-20170226102205351-699252507.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　完毕！</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><br></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><br></p> 
   <p><font><span style="font-size:14px;">本文转自大数据躺过的坑博客园博客，原文链接：http://www.cnblogs.com/zlslch/p/6441315.html，如需转载请自行联系原作者</span></font><br></p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
