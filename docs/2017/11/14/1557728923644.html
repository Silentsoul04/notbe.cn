<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>WebService大讲堂之Axis2(8)：异步调用WebService « NotBeCN</title>
  <meta name="description" content="             &nbsp;   在前面几篇文章中都是使用同步方式来调用   WebService   。也就是说，如果被调用的   WebService   方法长时间不返回，客户端将一直被阻塞，直到该方法返回为止。使用同步方法来调用   WebService   虽然很直观，但当   WebServ...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/14/1557728923644.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">WebService大讲堂之Axis2(8)：异步调用WebService</h1>
    <p class="post-meta">Nov 14, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;">&nbsp;</span>
   <span style="font-family:'宋体';font-size:16px;color:rgb(51,51,51);">在前面几篇文章中都是使用同步方式来调用</span>
   <span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;">WebService</span>
   <span style="font-family:'宋体';font-size:16px;color:rgb(51,51,51);">。也就是说，如果被调用的</span>
   <span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;">WebService</span>
   <span style="font-family:'宋体';font-size:16px;color:rgb(51,51,51);">方法长时间不返回，客户端将一直被阻塞，直到该方法返回为止。使用同步方法来调用</span>
   <span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;">WebService</span>
   <span style="font-family:'宋体';font-size:16px;color:rgb(51,51,51);">虽然很直观，但当</span>
   <span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;">WebService</span>
   <span style="font-family:'宋体';font-size:16px;color:rgb(51,51,51);">方法由于各种原因需要很长时间才能返回的话，就会使客户端程序一直处于等待状态，这样用户是无法忍受的。</span>
   <br style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
   <span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>
   <span style="font-family:'宋体';font-size:16px;color:rgb(51,51,51);">当然，我们很容易就可以想到解决问题的方法，这就是多线程。解决问题的基本方法是将访问</span>
   <span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;">WebService</span>
   <span style="font-family:'宋体';font-size:16px;color:rgb(51,51,51);">的任务交由一个或多个线程来完成，而主线程并不负责访问</span>
   <span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;">WebService</span>
   <span style="font-family:'宋体';font-size:16px;color:rgb(51,51,51);">。这样即使被访问的</span>
   <span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;">WebService</span>
   <span style="font-family:'宋体';font-size:16px;color:rgb(51,51,51);">方法长时间不返回，客户端仍然可以做其他的工作。我们可以管这种通过多线程访问</span>
   <span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;">WebService</span>
   <span style="font-family:'宋体';font-size:16px;color:rgb(51,51,51);">的方式称为异步访问。</span>
   <br style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
   <span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>
   <span style="font-family:'宋体';font-size:16px;color:rgb(51,51,51);">虽然直接使用多线程可以很好地解决这个问题，但比较麻烦。幸好</span>
   <span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;">Axis2</span>
   <span style="font-family:'宋体';font-size:16px;color:rgb(51,51,51);">的客户端提供了异步访问</span>
   <span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;">WebService</span>
   <span style="font-family:'宋体';font-size:16px;color:rgb(51,51,51);">的功能。</span>
   <br style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
   <span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;">&nbsp;&nbsp;&nbsp; RPCServiceClient</span>
   <span style="font-family:'宋体';font-size:16px;color:rgb(51,51,51);">类提供了一个</span>
   <span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;">invokeNonBlocking</span>
   <span style="font-family:'宋体';font-size:16px;color:rgb(51,51,51);">方法可以通过异步的方式来访问</span>
   <span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;">WebService</span>
   <span style="font-family:'宋体';font-size:16px;color:rgb(51,51,51);">。下面先来建立一个</span>
   <span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;">WebService</span>
   <span style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">。<br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>MyService</span>
   <span style="font-family:'宋体';font-size:16px;color:rgb(51,51,51);">是一个</span>
   <span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;">WebService</span>
   <span style="font-family:'宋体';font-size:16px;color:rgb(51,51,51);">类，代码如下：<br style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;"></span>
   <span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;"></span> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:13px;color:rgb(51,51,51);border-width:1px;border-style:solid;"> 
    <span style="font-size:16px;color:rgb(0,0,255);">package</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;service;<br></span>
    <span style="font-size:16px;color:rgb(0,0,255);">public</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">class</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;MyService<br> {<br> &nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">public</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;String&nbsp;getName()<br> &nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">try</span>
    <span style="font-size:16px;color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(</span>
    <span style="font-size:16px;color:rgb(0,0,0);">"</span>
    <span style="font-size:16px;color:rgb(0,0,0);">getName方法正在执行<img alt="" src="http://www.blogjava.net/Images/dot.gif" style="border:none;"></span>
    <span style="font-size:16px;color:rgb(0,0,0);">"</span>
    <span style="font-size:16px;color:rgb(0,0,0);">);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,128,0);">//</span>
    <span style="font-size:16px;color:rgb(0,128,0);">&nbsp;&nbsp;延迟5秒</span>
    <span style="font-size:16px;color:rgb(0,128,0);"><br></span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Thread.sleep(</span>
    <span style="font-size:16px;color:rgb(0,0,0);">5000</span>
    <span style="font-size:16px;color:rgb(0,0,0);">);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">catch</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;(Exception&nbsp;e)<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">return</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,0);">"</span>
    <span style="font-size:16px;color:rgb(0,0,0);">火星</span>
    <span style="font-size:16px;color:rgb(0,0,0);">"</span>
    <span style="font-size:16px;color:rgb(0,0,0);">;<br> &nbsp;&nbsp;&nbsp;&nbsp;}<br> }<br></span> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp;&nbsp;
    <span style="font-family:'宋体';">为了模拟需要一定时间才返回的</span>WebService
    <span style="font-family:'宋体';">方法，在</span>getName
    <span style="font-family:'宋体';">方法中使用了</span>sleep
    <span style="font-family:'宋体';">方法来延迟</span>5
    <span style="font-family:'宋体';">秒。</span>
    <br> &nbsp;&nbsp;&nbsp;&nbsp;
    <span style="font-family:'宋体';">下面是</span>MyService
    <span style="font-family:'宋体';">类的配置代码：<br style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;"></span> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:13px;color:rgb(51,51,51);border-width:1px;border-style:solid;"> 
    <span style="font-size:16px;color:rgb(0,128,0);">&lt;!--</span>
    <span style="font-size:16px;color:rgb(0,128,0);">&nbsp;&nbsp;services.xml&nbsp;&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,128,0);">--&gt;</span>
    <span style="font-size:16px;color:rgb(0,0,0);"><br></span>
    <span style="font-size:16px;color:rgb(0,0,255);">&lt;</span>
    <span style="font-size:16px;color:rgb(128,0,0);">service&nbsp;</span>
    <span style="font-size:16px;color:rgb(255,0,0);">name</span>
    <span style="font-size:16px;color:rgb(0,0,255);">="myService"</span>
    <span style="font-size:16px;color:rgb(0,0,255);">&gt;</span>
    <span style="font-size:16px;color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">&lt;</span>
    <span style="font-size:16px;color:rgb(128,0,0);">description</span>
    <span style="font-size:16px;color:rgb(0,0,255);">&gt;</span>
    <span style="font-size:16px;color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;异步调用演示<br> &nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">&lt;/</span>
    <span style="font-size:16px;color:rgb(128,0,0);">description</span>
    <span style="font-size:16px;color:rgb(0,0,255);">&gt;</span>
    <span style="font-size:16px;color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">&lt;</span>
    <span style="font-size:16px;color:rgb(128,0,0);">parameter&nbsp;</span>
    <span style="font-size:16px;color:rgb(255,0,0);">name</span>
    <span style="font-size:16px;color:rgb(0,0,255);">="ServiceClass"</span>
    <span style="font-size:16px;color:rgb(0,0,255);">&gt;</span>
    <span style="font-size:16px;color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;service.MyService&nbsp;&nbsp;&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">&lt;/</span>
    <span style="font-size:16px;color:rgb(128,0,0);">parameter</span>
    <span style="font-size:16px;color:rgb(0,0,255);">&gt;</span>
    <span style="font-size:16px;color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">&lt;</span>
    <span style="font-size:16px;color:rgb(128,0,0);">messageReceivers</span>
    <span style="font-size:16px;color:rgb(0,0,255);">&gt;</span>
    <span style="font-size:16px;color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">&lt;</span>
    <span style="font-size:16px;color:rgb(128,0,0);">messageReceiver&nbsp;</span>
    <span style="font-size:16px;color:rgb(255,0,0);">mep</span>
    <span style="font-size:16px;color:rgb(0,0,255);">="http://www.w3.org/2004/08/wsdl/in-out"</span>
    <span style="font-size:16px;color:rgb(255,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class</span>
    <span style="font-size:16px;color:rgb(0,0,255);">="org.apache.axis2.rpc.receivers.RPCMessageReceiver"</span>
    <span style="font-size:16px;color:rgb(255,0,0);">&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">/&gt;</span>
    <span style="font-size:16px;color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">&lt;/</span>
    <span style="font-size:16px;color:rgb(128,0,0);">messageReceivers</span>
    <span style="font-size:16px;color:rgb(0,0,255);">&gt;</span>
    <span style="font-size:16px;color:rgb(0,0,0);"><br></span>
    <span style="font-size:16px;color:rgb(0,0,255);">&lt;/</span>
    <span style="font-size:16px;color:rgb(128,0,0);">service</span>
    <span style="font-size:16px;color:rgb(0,0,255);">&gt;</span>
    <span style="font-size:16px;color:rgb(0,0,0);"><br></span> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"></div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp;&nbsp;
    <span style="font-family:'宋体';">从上面的配置代码可以看出，</span>MyService
    <span style="font-family:'宋体';">的配置方式与前几章的</span>WebService
    <span style="font-family:'宋体';">的配置方式完全一样，也就是说，</span>MyService
    <span style="font-family:'宋体';">只是一个普通的</span>WebService
    <span style="font-family:'宋体';">。</span>
    <br> &nbsp;&nbsp;&nbsp;&nbsp;
    <span style="font-family:'宋体';">下面是异步调用</span>MyService
    <span style="font-family:'宋体';">的</span>Java
    <span style="font-family:'宋体';">客户端代码：<br style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;"><br style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;"></span> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:13px;color:rgb(51,51,51);border-width:1px;border-style:solid;"> 
    <span style="font-size:16px;color:rgb(0,0,255);">package</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;client;<br><br></span>
    <span style="font-size:16px;color:rgb(0,0,255);">import</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;javax.xml.namespace.QName;<br></span>
    <span style="font-size:16px;color:rgb(0,0,255);">import</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;org.apache.axis2.addressing.EndpointReference;<br></span>
    <span style="font-size:16px;color:rgb(0,0,255);">import</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;org.apache.axis2.client.Options;<br></span>
    <span style="font-size:16px;color:rgb(0,0,255);">import</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;org.apache.axis2.context.MessageContext;<br></span>
    <span style="font-size:16px;color:rgb(0,0,255);">import</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;org.apache.axis2.rpc.client.RPCServiceClient;<br><br></span>
    <span style="font-size:16px;color:rgb(0,0,255);">public</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">class</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;RPCAsyncClient<br> {<br> &nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">public</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">static</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">void</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;main(String[]&nbsp;args)&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">throws</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;Exception<br> &nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RPCServiceClient&nbsp;serviceClient&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,0);">=</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">new</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;RPCServiceClient();<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options&nbsp;options&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,0);">=</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;serviceClient.getOptions();<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EndpointReference&nbsp;targetEPR&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,0);">=</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">new</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;EndpointReference(<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,0);">"</span>
    <span style="font-size:16px;color:rgb(0,0,0);">http://localhost:8080/axis2/services/myService</span>
    <span style="font-size:16px;color:rgb(0,0,0);">"</span>
    <span style="font-size:16px;color:rgb(0,0,0);">);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;options.setTo(targetEPR);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Object[]&nbsp;opAddEntryArgs&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,0);">=</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">new</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;Object[]{};<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;QName&nbsp;opAddEntry&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,0);">=</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">new</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;QName(</span>
    <span style="font-size:16px;color:rgb(0,0,0);">"</span>
    <span style="font-size:16px;color:rgb(0,0,0);">http://service</span>
    <span style="font-size:16px;color:rgb(0,0,0);">"</span>
    <span style="font-size:16px;color:rgb(0,0,0);">,&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,0);">"</span>
    <span style="font-size:16px;color:rgb(0,0,0);">getName</span>
    <span style="font-size:16px;color:rgb(0,0,0);">"</span>
    <span style="font-size:16px;color:rgb(0,0,0);">);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;serviceClient.invokeNonBlocking(opAddEntry,&nbsp;opAddEntryArgs,<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">new</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;org.apache.axis2.client.async.AxisCallback()<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Override<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">public</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">void</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;onComplete()<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Override<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">public</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">void</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;onError(Exception&nbsp;arg0)<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Override<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">public</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">void</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;onFault(MessageContext&nbsp;arg0)<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Override<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">public</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">void</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;onMessage(MessageContext&nbsp;mc)<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,128,0);">//</span>
    <span style="font-size:16px;color:rgb(0,128,0);">&nbsp;&nbsp;输出返回值</span>
    <span style="font-size:16px;color:rgb(0,128,0);"><br></span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(mc.getEnvelope().getFirstElement()<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.getFirstElement().getFirstElement().getText());<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(</span>
    <span style="font-size:16px;color:rgb(0,0,0);">"</span>
    <span style="font-size:16px;color:rgb(0,0,0);">异步调用！</span>
    <span style="font-size:16px;color:rgb(0,0,0);">"</span>
    <span style="font-size:16px;color:rgb(0,0,0);">);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,128,0);">//</span>
    <span style="font-size:16px;color:rgb(0,128,0);">&nbsp;&nbsp;阻止程序退出</span>
    <span style="font-size:16px;color:rgb(0,128,0);"><br></span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.in.read();<br> &nbsp;&nbsp;&nbsp;&nbsp;}<br> }&nbsp;&nbsp;<br></span> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"></div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp;&nbsp;
    <span style="font-family:'宋体';">从上面的代码可以看出，</span>invokeNonBlocking
    <span style="font-family:'宋体';">方法有三个参数，前两个参数分别指定了要调用的方法及方法参数的相关信息，而最后一个参数并不是方法返回值的类型信息，而是一个实现</span>org.apache.axis2.client.async.AxisCallback
    <span style="font-family:'宋体';">接口的类的对象实例。在本例中隐式实现了</span>AxisCallback
    <span style="font-family:'宋体';">接口。在</span>AxisCallback
    <span style="font-family:'宋体';">接口中有四个方法需要实现，其中当被异步调用的方法返回时</span>onMessage
    <span style="font-family:'宋体';">方法被调用。当运行上面的程序后，将输出如下的信息：</span> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:13px;color:rgb(51,51,51);border-width:1px;border-style:solid;">
    <span style="font-size:16px;color:rgb(0,0,0);">异步调用！<br> 火星</span>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp;&nbsp;
    <span style="font-family:'宋体';">虽然上面的例子可以实现异步调用，但比较麻烦。为了更方便地实现异步调用，可以使用</span>wsdl2java
    <span style="font-family:'宋体';">命令的</span>-a
    <span style="font-family:'宋体';">参数生成可异步调用的</span>Stub
    <span style="font-family:'宋体';">类。下面的命令可生成同步和异步调用的客户端代码（两个类），其中</span>-s
    <span style="font-family:'宋体';">表示生成同步调用代码，</span>-a
    <span style="font-family:'宋体';">表示生成异步调用代码。</span>
    <span><br></span> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:13px;color:rgb(51,51,51);border-width:1px;border-style:solid;"> 
    <span style="font-size:16px;color:rgb(0,0,0);">%AXIS2_HOME%\bin\wsdl2java&nbsp;-uri&nbsp;http://localhost:</span>
    <span style="font-size:16px;color:rgb(0,0,0);">8080</span>
    <span style="font-size:16px;color:rgb(0,0,0);">/axis2/services/myService?wsdl&nbsp;-p&nbsp;client&nbsp;-s&nbsp;-a&nbsp;-o&nbsp;stub</span> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp;&nbsp;
    <span style="font-family:'宋体';">在执行上面的命令后，将生成两个类：</span>MyServiceStub
    <span style="font-family:'宋体';">和</span>MyServiceCallbackHandler
    <span style="font-family:'宋体';">类，其中</span>MyServiceStub
    <span style="font-family:'宋体';">类负责同步和异步调用</span>WebService
    <span style="font-family:'宋体';">，</span>MyServiceCallbackHandler
    <span style="font-family:'宋体';">类是一个抽象类，也是一个回调类，当使用异步方式调用</span>WebService
    <span style="font-family:'宋体';">方法时，如果方法返回，则</span>MyServiceCallbackHandler
    <span style="font-family:'宋体';">类的</span>receiveResultgetName
    <span style="font-family:'宋体';">方法被调用。下面是使用</span>MyServiceStub
    <span style="font-family:'宋体';">类异步访问</span>WebService
    <span style="font-family:'宋体';">的代码：</span>
    <br>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:13px;color:rgb(51,51,51);border-width:1px;border-style:solid;"> 
    <span style="font-size:16px;color:rgb(0,0,255);">package</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;client;<br><br></span>
    <span style="font-size:16px;color:rgb(0,0,255);">import</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;client.MyServiceStub.GetNameResponse;<br><br></span>
    <span style="font-size:16px;color:rgb(0,0,255);">class</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;MyCallback&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">extends</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;MyServiceCallbackHandler<br> {<br> &nbsp;&nbsp;&nbsp;&nbsp;@Override<br> &nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">public</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">void</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;receiveResultgetName(GetNameResponse&nbsp;result)<br> &nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,128,0);">//</span>
    <span style="font-size:16px;color:rgb(0,128,0);">&nbsp;&nbsp;输出getName方法的返回结果</span>
    <span style="font-size:16px;color:rgb(0,128,0);"><br></span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(result.get_return());<br> &nbsp;&nbsp;&nbsp;&nbsp;}<br> }<br></span>
    <span style="font-size:16px;color:rgb(0,0,255);">public</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">class</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;StubClient<br> {<br> &nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">public</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">static</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">void</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;main(String[]&nbsp;args)&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">throws</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;Exception&nbsp;&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MyServiceStub&nbsp;stub&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,0);">=</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">new</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;MyServiceStub();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,128,0);">//</span>
    <span style="font-size:16px;color:rgb(0,128,0);">&nbsp;&nbsp;异步调用WebService</span>
    <span style="font-size:16px;color:rgb(0,128,0);"><br></span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stub.startgetName(</span>
    <span style="font-size:16px;color:rgb(0,0,255);">new</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;MyCallback());<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(</span>
    <span style="font-size:16px;color:rgb(0,0,0);">"</span>
    <span style="font-size:16px;color:rgb(0,0,0);">异步调用！</span>
    <span style="font-size:16px;color:rgb(0,0,0);">"</span>
    <span style="font-size:16px;color:rgb(0,0,0);">);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.in.read();&nbsp;&nbsp;&nbsp;&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<br> }<br></span> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"></div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp;
    <span style="font-family:'宋体';">执行上面的程序后，将输出如下的信息：&nbsp;&nbsp;&nbsp;&nbsp;<br style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;"></span> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:13px;color:rgb(51,51,51);border-width:1px;border-style:solid;">
    <span style="font-size:16px;color:rgb(0,0,0);">异步调用！<br> 火星<br></span>
   </div> 
   <span style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:10.5pt;color:rgb(51,51,51);"><br style="font-size:16px;"> &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;</span>
   <span style="font-family:'宋体';font-size:16px;color:rgb(51,51,51);">在.net中也可以使用异步的方式来调用WebService，如在C#中可使用如下的代码来异步调用getName方法：<br style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;"></span>
   <span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;"></span> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:13px;color:rgb(51,51,51);border-width:1px;border-style:solid;"> 
    <span style="font-size:16px;color:rgb(0,128,0);">//</span>
    <span style="font-size:16px;color:rgb(0,128,0);">&nbsp;&nbsp;回调方法</span>
    <span style="font-size:16px;color:rgb(0,128,0);"><br></span>
    <span style="font-size:16px;color:rgb(0,0,255);">private</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">void</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;getNameCompletedEvent(object&nbsp;sender,&nbsp;WSC.asyn.getNameCompletedEventArgs&nbsp;e)<br> {<br> &nbsp;&nbsp;&nbsp;&nbsp;listBox1.Items.Add(&nbsp;e.Result.@</span>
    <span style="font-size:16px;color:rgb(0,0,255);">return</span>
    <span style="font-size:16px;color:rgb(0,0,0);">);<br> }<br></span>
    <span style="font-size:16px;color:rgb(0,0,255);">private</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">void</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;button1_Click(object&nbsp;sender,&nbsp;EventArgs&nbsp;e)<br> {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;async.myService&nbsp;my&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,0);">=</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">new</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;WSC.async.myService();<br> &nbsp;&nbsp;&nbsp;&nbsp;my.getNameCompleted&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,0);">+=</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">new</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;WSC.async.getNameCompletedEventHandler(getNameCompletedEvent);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my.getNameAsync();<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MessageBox.Show(</span>
    <span style="font-size:16px;color:rgb(0,0,0);">"</span>
    <span style="font-size:16px;color:rgb(0,0,0);">完成调用</span>
    <span style="font-size:16px;color:rgb(0,0,0);">"</span>
    <span style="font-size:16px;color:rgb(0,0,0);">);<br> }<br></span> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp;&nbsp;
    <span style="font-family:'宋体';">其中</span>async
    <span style="font-family:'宋体';">是引用</span>MyService
    <span style="font-family:'宋体';">的服务名。要注意的是，在</span>C#
    <span style="font-family:'宋体';">中不能在同一个</span>WebService
    <span style="font-family:'宋体';">实例的</span>getName
    <span style="font-family:'宋体';">方法未返回之前，再次调用该实例的</span>getName
    <span style="font-family:'宋体';">方法，否则将抛出异常。如下面的代码会抛出一个异常：</span> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:13px;color:rgb(51,51,51);border-width:1px;border-style:solid;"> 
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;async.myService&nbsp;my&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,0);">=</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">new</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;WSC.async.myService();<br> &nbsp;&nbsp;&nbsp;&nbsp;my.getNameCompleted&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,0);">+=</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">new</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;WSC.async.getNameCompletedEventHandler(getNameCompletedEvent);<br> &nbsp;&nbsp;&nbsp; my.getNameAsync();<br> &nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,128,0);">//</span>
    <span style="font-size:16px;color:rgb(0,128,0);">&nbsp;&nbsp;将抛出异常</span>
    <span style="font-size:16px;color:rgb(0,128,0);"><br></span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp; my.getNameAsync();<br></span> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"></div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp;&nbsp;
    <span style="font-family:'宋体';">但不同的</span>WebService
    <span style="font-family:'宋体';">实例的方法可以在方法未返回时调用，如下面的代码是可以正常工作的：</span> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:13px;color:rgb(51,51,51);border-width:1px;border-style:solid;"> 
    <span style="font-size:16px;color:rgb(0,0,0);">asyn.myService&nbsp;my&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,0);">=</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">new</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;WSC.asyn.myService();<br> my.getNameAsync();<br> my.getNameCompleted&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,0);">+=</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">new</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;WSC.asyn.getNameCompletedEventHandler(getNameCompletedEvent);<br> asyn.myService&nbsp;my1&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,0);">=</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">new</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;WSC.asyn.myService();<br> my1.getNameCompleted&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,0);">+=</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;</span>
    <span style="font-size:16px;color:rgb(0,0,255);">new</span>
    <span style="font-size:16px;color:rgb(0,0,0);">&nbsp;WSC.asyn.getNameCompletedEventHandler(getNameCompletedEvent);<br> my1.getNameAsync();</span> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:13px;color:rgb(51,51,51);border-width:1px;border-style:solid;">
    <span style="font-size:16px;color:rgb(0,0,0);"><br></span>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:13px;color:rgb(51,51,51);border-width:1px;border-style:solid;">
    <span style="font-size:16px;color:rgb(0,0,0);"><br></span>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:13px;color:rgb(51,51,51);border-width:1px;border-style:solid;">
    <span style="font-size:16px;color:rgb(0,0,0);"><br></span>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:13px;color:rgb(51,51,51);border-width:1px;border-style:solid;">
    <span style="font-size:16px;color:rgb(0,0,0);"><br></span>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:13px;color:rgb(51,51,51);border-width:1px;border-style:solid;"> 
    <span style="font-size:16px;color:rgb(0,0,0);"> </span>
    <div style="font-size:13px;color:rgb(51,51,51);border-width:1px;border-style:solid;">
     &nbsp;本文转自 androidguy 51CTO博客，原文链接：http://blog.51cto.com/androidguy/215187，如需转载请自行联系原作者
    </div> 
    <div>
     <br>
    </div> 
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
