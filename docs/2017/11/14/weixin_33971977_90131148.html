<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Spring MVC整合Mybatis 入门 « NotBeCN</title>
  <meta name="description" content="             本文记录使用Intellij创建Maven Web工程搭建Spring MVC + Mybatis 的一个非常简单的示例。关于Mybatis的入门使用可参考这篇文章，本文在该文的基础上，引入了Spring MVC功能。首先是创建项目：    打开Intellij，File--&gt;ne...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/14/weixin_33971977_90131148.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">Spring MVC整合Mybatis 入门</h1>
    <p class="post-meta">Nov 14, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">本文记录使用Intellij创建Maven Web工程搭建Spring MVC + Mybatis 的一个非常简单的示例。关于Mybatis的入门使用可参考<a href="http://www.cnblogs.com/hapjin/p/MyBatis%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8%E5%92%8C%E5%85%A5%E9%97%A8%E7%90%86%E8%A7%A3" rel="nofollow" style="color:#000000;">这篇文章</a>，本文在该文的基础上，引入了Spring MVC功能。</span><span style="font-family:'Microsoft YaHei';font-size:16px;">首先是创建项目：</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">打开Intellij，File--&gt;new Project---&gt;选中，Maven---&gt;勾上"Create from archetype"---&gt;选择 Maven web project。如下图：</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;"><img src="https://images2017.cnblogs.com/blog/715283/201708/715283-20170812170500820-950925197.png" alt="" style="border:0px;"></span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">一步步Next，等待工程Build成功，如果右下角有提示“Maven project need to be imported“则点击： import change...”</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">完了之后，整个项目Build Success，会生成如下初始目录：</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;"><img src="https://images2017.cnblogs.com/blog/715283/201708/715283-20170812171120538-2147199496.png" alt="" style="border:0px;"></span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">在src.main下新建一个文件夹 java， 作为源代码目录。CTRL+ALT+SHIFT+S 打开“project structure配置窗口”，将 java 目录关联成 source目录。</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2017.cnblogs.com/blog/715283/201708/715283-20170812171712117-1534806461.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">在 java 目录下创建四个子目录 controller、mapper、pojo、service</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">controller，控制器类。DispatcherServlet将拦截到的HTTP请求交给对应的Controller来处理，Controller调用 Service 完成相应的请求任务。</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">service，业务逻辑实现类。Service 一般都需要DAO类（或者说Mapper类）操作数据库，然后完成相应的业务逻辑处理。</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">mapper，数据库操作类。定义了一些如何操作数据库的方法。</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">pojo，实体类。对应数据库中的表，一般pojo类中的每个属性对应数据库中的一个字段。</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">此外，还有配置文件目录。在 src/main/resources目录下，新建mapper文件夹，与 src/main/java/mapper 对应：一个RoleMapper.java 对应着一个 RoleMapper.xml配置文件，再加上相应的Spring配置就可以实现数据库的操作。在 src/main/resources目录下，新建spring文件夹，里面有三个配置文件：spring-web.xml是web相关配置；spring-dao.xml是数据库相关的配置；spring-service.xml是Service类相关的配置。当然也可以将所有的配置放在一个文件里，比如常见的applicationContext.xml，分开配置的话，可能看起来更清晰。</span><span style="font-family:'Microsoft YaHei';font-size:16px;">大致目录结构如下：</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2017.cnblogs.com/blog/715283/201708/715283-20170812173341898-1961640467.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">POJO类 Role.java代码和数据库表t_role字段，参考<a href="http://www.cnblogs.com/hapjin/p/7290876.html" rel="nofollow" style="color:#000000;">这篇文章前面部分</a>。RoleMapper.java 定义了操作数据库的方法--根据 id字段 来查找 Role，getRole方法配合RoleMapper.xml中定义的数据库操作语句，就可以由Mybatis框架来负责所有的数据库操作事宜了。代码</span><span style="font-family:'Microsoft YaHei';font-size:16px;">如下：</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,0,255);line-height:1.5;">package</span><span style="line-height:1.5;"> mapper;
</span><span style="color:rgb(0,0,255);line-height:1.5;">import</span><span style="line-height:1.5;"> org.springframework.stereotype.Repository;
</span><span style="color:rgb(0,0,255);line-height:1.5;">import</span><span style="line-height:1.5;"> pojo.Role;
@Repository
</span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">interface</span><span style="line-height:1.5;"> RoleMapper {
    </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> Role getRole(<span style="color:rgb(0,0,255);line-height:1.5;">long</span><span style="line-height:1.5;"> id);
}</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">对应的RoleMapper.xml配置如下：</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="font-family:'Microsoft YaHei';line-height:1.5;"><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;?</span><span style="color:rgb(255,0,255);font-family:'Courier New';line-height:1.5;">xml version="1.0" encoding="UTF-8"</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">?&gt;</span>
<span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;!</span><span style="color:rgb(255,0,255);font-family:'Courier New';line-height:1.5;">DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>

<span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">mapper </span><span style="color:rgb(255,0,0);font-family:'Courier New';line-height:1.5;">namespace</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">="mapper.RoleMapper"</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>
    <span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">select </span><span style="color:rgb(255,0,0);font-family:'Courier New';line-height:1.5;">id</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">="getRole"</span><span style="color:rgb(255,0,0);font-family:'Courier New';line-height:1.5;"> parameterType</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">="long"</span><span style="color:rgb(255,0,0);font-family:'Courier New';line-height:1.5;"> resultType</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">="Role"</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span><span style="font-family:'Courier New';line-height:1.5;"> select id, role_name as roleName, note from t_role where id = #{id} </span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">select</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>
<span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">mapper</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span></span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">再来看业务逻辑，很简单：用户从浏览器中发一个查询请求 Role，请求的参数为 id，Service根据 id 去数据库找 Role 记录，返回给用户 id 对应的Role。</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">RoleService.java代码如下：</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,0,255);line-height:1.5;">package</span><span style="line-height:1.5;"> service;
</span><span style="color:rgb(0,0,255);line-height:1.5;">import</span><span style="line-height:1.5;"> pojo.Role;
</span><span style="color:rgb(0,128,0);line-height:1.5;">/**</span><span style="color:rgb(0,128,0);line-height:1.5;">
 * Created by Administrator on 2017/8/10.
 </span><span style="color:rgb(0,128,0);line-height:1.5;">*/</span>
<span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">interface</span><span style="line-height:1.5;"> RoleService {
    </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> Role getRole(<span style="color:rgb(0,0,255);line-height:1.5;">long</span><span style="line-height:1.5;"> id);
}</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">具体的实现类如下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,128,128);line-height:1.5;"> 1</span> <span style="color:rgb(0,0,255);line-height:1.5;">package</span><span style="line-height:1.5;"> service.impl;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 2</span> 
<span style="color:rgb(0,128,128);line-height:1.5;"> 3</span> <span style="color:rgb(0,0,255);line-height:1.5;">import</span><span style="line-height:1.5;"> mapper.RoleMapper;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 4</span> <span style="color:rgb(0,0,255);line-height:1.5;">import</span><span style="line-height:1.5;"> org.springframework.beans.factory.annotation.Autowired;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 5</span> <span style="color:rgb(0,0,255);line-height:1.5;">import</span><span style="line-height:1.5;"> org.springframework.stereotype.Service;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 6</span> <span style="color:rgb(0,0,255);line-height:1.5;">import</span><span style="line-height:1.5;"> pojo.Role;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 7</span> <span style="color:rgb(0,0,255);line-height:1.5;">import</span><span style="line-height:1.5;"> service.RoleService;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 8</span> 
<span style="color:rgb(0,128,128);line-height:1.5;"> 9</span> <span style="color:rgb(0,128,0);line-height:1.5;">/**</span>
<span style="color:rgb(0,128,128);line-height:1.5;">10</span> <span style="color:rgb(0,128,0);line-height:1.5;"> * Created by Administrator on 2017/8/10.
</span><span style="color:rgb(0,128,128);line-height:1.5;">11</span>  <span style="color:rgb(0,128,0);line-height:1.5;">*/</span>
<span style="color:rgb(0,128,128);line-height:1.5;">12</span> <span style="line-height:1.5;">@Service
</span><span style="color:rgb(0,128,128);line-height:1.5;">13</span> <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span> RoleServiceImpl <span style="color:rgb(0,0,255);line-height:1.5;">implements</span><span style="line-height:1.5;"> RoleService {
</span><span style="color:rgb(0,128,128);line-height:1.5;">14</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">15</span> <span style="line-height:1.5;">    @Autowired
</span><span style="color:rgb(0,128,128);line-height:1.5;">16</span>     <span style="color:rgb(0,0,255);line-height:1.5;">private</span><span style="line-height:1.5;"> RoleMapper roleMapper;
</span><span style="color:rgb(0,128,128);line-height:1.5;">17</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">18</span>     <span style="color:rgb(0,0,255);line-height:1.5;">public</span> Role getRole(<span style="color:rgb(0,0,255);line-height:1.5;">long</span><span style="line-height:1.5;"> id){
</span><span style="color:rgb(0,128,128);line-height:1.5;">19</span>         Role role =<span style="line-height:1.5;"> roleMapper.getRole(id);
</span><span style="color:rgb(0,128,128);line-height:1.5;">20</span>         <span style="color:rgb(0,0,255);line-height:1.5;">return</span><span style="line-height:1.5;"> role;
</span><span style="color:rgb(0,128,128);line-height:1.5;">21</span> <span style="line-height:1.5;">    }
</span><span style="color:rgb(0,128,128);line-height:1.5;">22</span> }</pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">第12行，<strong>@Service 以Spring注解的方式将RoleServiceImpl定义成Bean，在spring-service.xml中配置：component-scan，让Spring去扫描 service包下带有注解的类，告诉Spring容器 RoleService(Impl)类 是一个Bean对象。在其它类中就可以用 @Autowired 将RoleService注入。</strong></span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre>    <span style="color:rgb(0,128,0);line-height:1.5;">&lt;!--</span><span style="color:rgb(0,128,0);line-height:1.5;"> 扫描service包下所有使用注解的类型 </span><span style="color:rgb(0,128,0);line-height:1.5;">--&gt;</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">context:component-scan </span><span style="color:rgb(255,0,0);line-height:1.5;">base-package</span><span style="color:rgb(0,0,255);line-height:1.5;">="service"</span> <span style="color:rgb(0,0,255);line-height:1.5;">/&gt;</span></pre>
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">完整spring-sevice.xml配置文件：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.5;">View Code</span> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">RoleController.java代码如下：</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,128,128);line-height:1.5;"> 1</span> <span style="color:rgb(0,0,255);line-height:1.5;">package</span><span style="line-height:1.5;"> controller;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 2</span> 
<span style="color:rgb(0,128,128);line-height:1.5;"> 3</span> <span style="color:rgb(0,0,255);line-height:1.5;">import</span><span style="line-height:1.5;"> org.springframework.beans.factory.annotation.Autowired;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 4</span> <span style="color:rgb(0,0,255);line-height:1.5;">import</span><span style="line-height:1.5;"> org.springframework.stereotype.Controller;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 5</span> <span style="color:rgb(0,0,255);line-height:1.5;">import</span><span style="line-height:1.5;"> org.springframework.web.bind.annotation.RequestMapping;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 6</span> <span style="color:rgb(0,0,255);line-height:1.5;">import</span><span style="line-height:1.5;"> org.springframework.web.bind.annotation.RequestParam;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 7</span> <span style="color:rgb(0,0,255);line-height:1.5;">import</span><span style="line-height:1.5;"> org.springframework.web.bind.annotation.ResponseBody;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 8</span> <span style="color:rgb(0,0,255);line-height:1.5;">import</span><span style="line-height:1.5;"> pojo.Role;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 9</span> <span style="color:rgb(0,0,255);line-height:1.5;">import</span><span style="line-height:1.5;"> service.RoleService;
</span><span style="color:rgb(0,128,128);line-height:1.5;">10</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">11</span> <span style="color:rgb(0,128,0);line-height:1.5;">/**</span>
<span style="color:rgb(0,128,128);line-height:1.5;">12</span> <span style="color:rgb(0,128,0);line-height:1.5;"> * Created by Administrator on 2017/8/10.
</span><span style="color:rgb(0,128,128);line-height:1.5;">13</span>  <span style="color:rgb(0,128,0);line-height:1.5;">*/</span>
<span style="color:rgb(0,128,128);line-height:1.5;">14</span> <span style="line-height:1.5;">@Controller
</span><span style="color:rgb(0,128,128);line-height:1.5;">15</span> <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> RoleController {
</span><span style="color:rgb(0,128,128);line-height:1.5;">16</span> <span style="line-height:1.5;">    @Autowired
</span><span style="color:rgb(0,128,128);line-height:1.5;">17</span>     <span style="color:rgb(0,0,255);line-height:1.5;">private</span><span style="line-height:1.5;"> RoleService roleService;
</span><span style="color:rgb(0,128,128);line-height:1.5;">18</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">19</span>     @RequestMapping("/role/getRole"<span style="line-height:1.5;">)
</span><span style="color:rgb(0,128,128);line-height:1.5;">20</span>     @ResponseBody <span style="color:rgb(0,0,255);line-height:1.5;">public</span> Role getRole(@RequestParam("id") <span style="color:rgb(0,0,255);line-height:1.5;">long</span><span style="line-height:1.5;"> id)
</span><span style="color:rgb(0,128,128);line-height:1.5;">21</span> <span style="line-height:1.5;">    {
</span><span style="color:rgb(0,128,128);line-height:1.5;">22</span>         <span style="color:rgb(0,0,255);line-height:1.5;">long</span> start =<span style="line-height:1.5;"> System.currentTimeMillis();
</span><span style="color:rgb(0,128,128);line-height:1.5;">23</span>         Role role =<span style="line-height:1.5;"> roleService.getRole(id);
</span><span style="color:rgb(0,128,128);line-height:1.5;">24</span>         <span style="color:rgb(0,0,255);line-height:1.5;">long</span> end =<span style="line-height:1.5;"> System.currentTimeMillis();
</span><span style="color:rgb(0,128,128);line-height:1.5;">25</span>         System.out.println(end-<span style="line-height:1.5;">start);
</span><span style="color:rgb(0,128,128);line-height:1.5;">26</span>         <span style="color:rgb(0,0,255);line-height:1.5;">return</span><span style="line-height:1.5;"> role;
</span><span style="color:rgb(0,128,128);line-height:1.5;">27</span> <span style="line-height:1.5;">    }
</span><span style="color:rgb(0,128,128);line-height:1.5;">28</span> }</pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">14行，@Controller 以Spring注解的方式将 RoleController类定义为Spring容器可管理的Bean。</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">19行，在web.xml中配置了 servlet-mapping，当浏览器请求的URL带有"<span style="color:rgb(0,0,255);">role/getRole</span>"时，就会拦截请求将给 RoleController来处理。</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">20行，@ResponseBody定义了 处理之后的返回值，将 Role 对象以 JSON格式封装起来，返回给浏览器。@RequestParam("id")，定义请求参数。</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">比如在浏览器中输入：http://localhost:8000/mvc<span style="color:rgb(0,0,255);">/role/getRole</span>?id=5</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2017.cnblogs.com/blog/715283/201708/715283-20170812174421929-1929601912.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">数据库中记录如下：</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2017.cnblogs.com/blog/715283/201708/715283-20170812181342413-1671305850.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong><span style="font-family:'Microsoft YaHei';font-size:16px;">这一切到底是如何得到的呢？</span></strong></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">①RoleController需要一个RoleService对象，然后在第23行调用 getRole方法，返回一个Role对象。首先第16-17行，使用 @Autowired将 RoleService注入到RoleController中，这样RoleController不需要显示地new RoleService对象，对应的创建过程由Spring容器自动完成----对象的创建 与 “对象的使用” 解耦。“对象的使用其实就是业务逻辑，让开发者不需要关注对象的创建了”</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">②为什么Spring容器知道 将 RoleService 作为一个Bean注入到 RoleController中去呢？</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">因为，RoleService类使用 了@Service 注解，并且在spring-service.xml中配置 了&lt;component-scan....&gt; 见上面RoleService源代码部分。</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">③为什么 roleSevice.getRole(id)就能从数据库中查找相应的记录并返回呢？前面的RoleMapper.java 和 RoleMapper.xml配置文件已经定义好了操作数据库的语句：</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre>select id,role_name as roleName, note from t_role where id = #{id}</pre>
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">然后我们又在spring-dao.xml中配置了访问数据库：详细具体解释如下：</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre><span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">context:component-scan </span><span style="color:rgb(255,0,0);line-height:1.5;">base-package</span><span style="color:rgb(0,0,255);line-height:1.5;">="mapper"</span><span style="color:rgb(0,0,255);line-height:1.5;">/&gt;</span></pre>
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">告诉Spring容器扫描mapper目录下的 带注解的类，这样RoleService就可以自动注入 RoleMapper对象了，有了RoleMapper对象，通过Mybatis框架，就可以访问数据库了。而Spring与Mybatis的整合依赖包，就需要在pom.xml中给出：</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="font-family:'Microsoft YaHei';line-height:1.5;">    <span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">dependency</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>
      <span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">groupId</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>org.mybatis<span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">groupId</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>
      <span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">artifactId</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>mybatis-spring<span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">artifactId</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>
      <span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">version</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>1.3.0<span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">version</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>
    <span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">dependency</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>
    <span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">dependency</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>
      <span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">groupId</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>org.mybatis<span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">groupId</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>
      <span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">artifactId</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>mybatis<span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">artifactId</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>
      <span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">version</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>3.4.0<span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">version</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>
    <span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">dependency</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span></span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre> <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">context:property-placeholder </span><span style="color:rgb(255,0,0);line-height:1.5;">location</span><span style="color:rgb(0,0,255);line-height:1.5;">="classpath:jdbc.properties"</span><span style="color:rgb(0,0,255);line-height:1.5;">/&gt;</span></pre>
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">配置数据库连接信息：访问哪个数据库？数据库地址在哪？访问数据库的端口是什么？用户名和密码是什么？这些信息都在jdbc.properties文件中定义好了，&lt;context:property-placeholder&gt;告诉Spring容器去哪里读取jdbc.properties配置文件。jdbc.properties文件如下：</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre><span style="line-height:1.5;">jdbc.driver=com.mysql.jdbc.Driver
jdbc.url=jdbc:mysql://localhost:3306/test
jdbc.username=root
jdbc.password=xxxxx</span></pre>
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">知道了数据库在哪里了，以何种方式连接数据库呢？一般会配置<a href="http://www.cnblogs.com/JavaSubin/p/5294721.html" rel="nofollow" style="color:#000000;">各种连接池</a></span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="font-family:'Microsoft YaHei';line-height:1.5;">    <span style="color:rgb(0,128,0);font-family:'Courier New';line-height:1.5;">&lt;!--</span><span style="color:rgb(0,128,0);font-family:'Courier New';line-height:1.5;"> 2.数据库连接池 </span><span style="color:rgb(0,128,0);font-family:'Courier New';line-height:1.5;">--&gt;</span>
    <span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">bean </span><span style="color:rgb(255,0,0);font-family:'Courier New';line-height:1.5;">id</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">="dataSource"</span><span style="color:rgb(255,0,0);font-family:'Courier New';line-height:1.5;"> class</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">="com.mchange.v2.c3p0.ComboPooledDataSource"</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>
        <span style="color:rgb(0,128,0);font-family:'Courier New';line-height:1.5;">&lt;!--</span><span style="color:rgb(0,128,0);font-family:'Courier New';line-height:1.5;"> 配置连接池属性 </span><span style="color:rgb(0,128,0);font-family:'Courier New';line-height:1.5;">--&gt;</span>
        <span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">property </span><span style="color:rgb(255,0,0);font-family:'Courier New';line-height:1.5;">name</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">="driverClass"</span><span style="color:rgb(255,0,0);font-family:'Courier New';line-height:1.5;"> value</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">="${jdbc.driver}"</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">/&gt;</span>
        <span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">property </span><span style="color:rgb(255,0,0);font-family:'Courier New';line-height:1.5;">name</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">="jdbcUrl"</span><span style="color:rgb(255,0,0);font-family:'Courier New';line-height:1.5;"> value</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">="${jdbc.url}"</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">/&gt;</span>
        <span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">property </span><span style="color:rgb(255,0,0);font-family:'Courier New';line-height:1.5;">name</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">="user"</span><span style="color:rgb(255,0,0);font-family:'Courier New';line-height:1.5;"> value</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">="${jdbc.username}"</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">/&gt;</span>
        <span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">property </span><span style="color:rgb(255,0,0);font-family:'Courier New';line-height:1.5;">name</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">="password"</span><span style="color:rgb(255,0,0);font-family:'Courier New';line-height:1.5;"> value</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">="${jdbc.password}"</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">/&gt;</span>

        <span style="color:rgb(0,128,0);font-family:'Courier New';line-height:1.5;">&lt;!--</span><span style="color:rgb(0,128,0);font-family:'Courier New';line-height:1.5;"> c3p0连接池的私有属性 </span><span style="color:rgb(0,128,0);font-family:'Courier New';line-height:1.5;">--&gt;</span>
        <span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">property </span><span style="color:rgb(255,0,0);font-family:'Courier New';line-height:1.5;">name</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">="maxPoolSize"</span><span style="color:rgb(255,0,0);font-family:'Courier New';line-height:1.5;"> value</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">="30"</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">/&gt;</span>
        <span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">property </span><span style="color:rgb(255,0,0);font-family:'Courier New';line-height:1.5;">name</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">="minPoolSize"</span><span style="color:rgb(255,0,0);font-family:'Courier New';line-height:1.5;"> value</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">="10"</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">/&gt;</span>
        <span style="color:rgb(0,128,0);font-family:'Courier New';line-height:1.5;">&lt;!--</span><span style="color:rgb(0,128,0);font-family:'Courier New';line-height:1.5;"> 关闭连接后不自动commit </span><span style="color:rgb(0,128,0);font-family:'Courier New';line-height:1.5;">--&gt;</span>
        <span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">property </span><span style="color:rgb(255,0,0);font-family:'Courier New';line-height:1.5;">name</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">="autoCommitOnClose"</span><span style="color:rgb(255,0,0);font-family:'Courier New';line-height:1.5;"> value</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">="false"</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">/&gt;</span>
        <span style="color:rgb(0,128,0);font-family:'Courier New';line-height:1.5;">&lt;!--</span><span style="color:rgb(0,128,0);font-family:'Courier New';line-height:1.5;"> 获取连接超时时间 </span><span style="color:rgb(0,128,0);font-family:'Courier New';line-height:1.5;">--&gt;</span>
        <span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">property </span><span style="color:rgb(255,0,0);font-family:'Courier New';line-height:1.5;">name</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">="checkoutTimeout"</span><span style="color:rgb(255,0,0);font-family:'Courier New';line-height:1.5;"> value</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">="10000"</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">/&gt;</span>
        <span style="color:rgb(0,128,0);font-family:'Courier New';line-height:1.5;">&lt;!--</span><span style="color:rgb(0,128,0);font-family:'Courier New';line-height:1.5;"> 当获取连接失败重试次数 </span><span style="color:rgb(0,128,0);font-family:'Courier New';line-height:1.5;">--&gt;</span>
        <span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">property </span><span style="color:rgb(255,0,0);font-family:'Courier New';line-height:1.5;">name</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">="acquireRetryAttempts"</span><span style="color:rgb(255,0,0);font-family:'Courier New';line-height:1.5;"> value</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">="2"</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">/&gt;</span>
    <span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">bean</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span></span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">连接池的依赖包，又在哪里呢？因为我们使用的是Maven POM管理依赖，在pom.xml文件中就需要配置：</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="font-family:'Microsoft YaHei';line-height:1.5;">    <span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">dependency</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>
      <span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">groupId</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>mysql<span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">groupId</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>
      <span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">artifactId</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>mysql-connector-java<span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">artifactId</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>
      <span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">version</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>5.1.37<span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">version</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>
      <span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">scope</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>runtime<span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">scope</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>
    <span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">dependency</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>
    <span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">dependency</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>
      <span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">groupId</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>c3p0<span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">groupId</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>
      <span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">artifactId</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>c3p0<span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">artifactId</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>
      <span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">version</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>0.9.1.2<span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">version</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span>
    <span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);font-family:'Courier New';line-height:1.5;">dependency</span><span style="color:rgb(0,0,255);font-family:'Courier New';line-height:1.5;">&gt;</span></span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">配置好了访问数据库的环境，还需要访问数据库的具体实例，这就是SqlSession。于是继续在spring-dao.xml添加配置：</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>    <span style="color:rgb(0,128,0);line-height:1.5;">&lt;!--</span><span style="color:rgb(0,128,0);line-height:1.5;"> 3.配置SqlSessionFactory对象 </span><span style="color:rgb(0,128,0);line-height:1.5;">--&gt;</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">bean </span><span style="color:rgb(255,0,0);line-height:1.5;">id</span><span style="color:rgb(0,0,255);line-height:1.5;">="sqlSessionFactory"</span><span style="color:rgb(255,0,0);line-height:1.5;"> class</span><span style="color:rgb(0,0,255);line-height:1.5;">="org.mybatis.spring.SqlSessionFactoryBean"</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
        <span style="color:rgb(0,128,0);line-height:1.5;">&lt;!--</span><span style="color:rgb(0,128,0);line-height:1.5;"> 注入数据库连接池 </span><span style="color:rgb(0,128,0);line-height:1.5;">--&gt;</span>
        <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">property </span><span style="color:rgb(255,0,0);line-height:1.5;">name</span><span style="color:rgb(0,0,255);line-height:1.5;">="dataSource"</span><span style="color:rgb(255,0,0);line-height:1.5;"> ref</span><span style="color:rgb(0,0,255);line-height:1.5;">="dataSource"</span><span style="color:rgb(0,0,255);line-height:1.5;">/&gt;</span>
        <span style="color:rgb(0,128,0);line-height:1.5;">&lt;!--</span><span style="color:rgb(0,128,0);line-height:1.5;"> 配置MyBaties全局配置文件:mybatisConfig.xml </span><span style="color:rgb(0,128,0);line-height:1.5;">--&gt;</span>
        <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">property </span><span style="color:rgb(255,0,0);line-height:1.5;">name</span><span style="color:rgb(0,0,255);line-height:1.5;">="configLocation"</span><span style="color:rgb(255,0,0);line-height:1.5;"> value</span><span style="color:rgb(0,0,255);line-height:1.5;">="classpath:mybatisConfig.xml"</span><span style="color:rgb(0,0,255);line-height:1.5;">/&gt;</span>
        <span style="color:rgb(0,128,0);line-height:1.5;">&lt;!--</span><span style="color:rgb(0,128,0);line-height:1.5;"> 扫描entity包 使用别名 </span><span style="color:rgb(0,128,0);line-height:1.5;">--&gt;</span>
        <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">property </span><span style="color:rgb(255,0,0);line-height:1.5;">name</span><span style="color:rgb(0,0,255);line-height:1.5;">="typeAliasesPackage"</span><span style="color:rgb(255,0,0);line-height:1.5;"> value</span><span style="color:rgb(0,0,255);line-height:1.5;">="pojo"</span><span style="color:rgb(0,0,255);line-height:1.5;">/&gt;</span>
        <span style="color:rgb(0,128,0);line-height:1.5;">&lt;!--</span><span style="color:rgb(0,128,0);line-height:1.5;"> 扫描sql配置文件:mapper需要的xml文件 </span><span style="color:rgb(0,128,0);line-height:1.5;">--&gt;</span>
        <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">property </span><span style="color:rgb(255,0,0);line-height:1.5;">name</span><span style="color:rgb(0,0,255);line-height:1.5;">="mapperLocations"</span><span style="color:rgb(255,0,0);line-height:1.5;"> value</span><span style="color:rgb(0,0,255);line-height:1.5;">="classpath:mapper/*.xml"</span><span style="color:rgb(0,0,255);line-height:1.5;">/&gt;</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">bean</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">接下来再把SqlSession 告诉RoleMapper对象，让它拿着SqlSession去操作数据库。</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>    <span style="color:rgb(0,128,0);line-height:1.5;">&lt;!--</span><span style="color:rgb(0,128,0);line-height:1.5;"> 4.配置扫描Dao接口包，动态实现Dao接口，注入到spring容器中 </span><span style="color:rgb(0,128,0);line-height:1.5;">--&gt;</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">bean </span><span style="color:rgb(255,0,0);line-height:1.5;">class</span><span style="color:rgb(0,0,255);line-height:1.5;">="org.mybatis.spring.mapper.MapperScannerConfigurer"</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
        <span style="color:rgb(0,128,0);line-height:1.5;">&lt;!--</span><span style="color:rgb(0,128,0);line-height:1.5;"> 注入sqlSessionFactory </span><span style="color:rgb(0,128,0);line-height:1.5;">--&gt;</span>
        <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">property </span><span style="color:rgb(255,0,0);line-height:1.5;">name</span><span style="color:rgb(0,0,255);line-height:1.5;">="sqlSessionFactoryBeanName"</span><span style="color:rgb(255,0,0);line-height:1.5;"> value</span><span style="color:rgb(0,0,255);line-height:1.5;">="sqlSessionFactory"</span><span style="color:rgb(0,0,255);line-height:1.5;">/&gt;</span>
        <span style="color:rgb(0,128,0);line-height:1.5;">&lt;!--</span><span style="color:rgb(0,128,0);line-height:1.5;"> 给出需要扫描mapper接口包 </span><span style="color:rgb(0,128,0);line-height:1.5;">--&gt;</span>
        <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">property </span><span style="color:rgb(255,0,0);line-height:1.5;">name</span><span style="color:rgb(0,0,255);line-height:1.5;">="basePackage"</span><span style="color:rgb(255,0,0);line-height:1.5;"> value</span><span style="color:rgb(0,0,255);line-height:1.5;">="mapper"</span><span style="color:rgb(0,0,255);line-height:1.5;">/&gt;</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">bean</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">因此，这也是为什么 我们只需要通过Spring将RoleMapper能够访问数据库的原因。而当 Service需要访问数据库时，只需要将RoleMapper注入进来，就可以执行getRole方法查询数据库了。</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">完整的spring-dao.xml配置文件：</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.5;">View Code</span> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">前面介绍的都是Spring应用上下文，而这里的 HTTP请求牵涉到 web应用上下文，二者是如何结合的呢？在web.xml中进行配置：</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre> <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">servlet</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">servlet-name</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>mvc<span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">servlet-name</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">servlet-class</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>org.springframework.web.servlet.DispatcherServlet<span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">servlet-class</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
    <span style="color:rgb(0,128,0);line-height:1.5;">&lt;!--</span><span style="color:rgb(0,128,0);line-height:1.5;"> 配置springMVC需要加载的配置文件
        spring-dao.xml,spring-service.xml,spring-web.xml
        Mybatis - &gt; spring -&gt; springmvc
     </span><span style="color:rgb(0,128,0);line-height:1.5;">--&gt;</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">init-param</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
      <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">param-name</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>contextConfigLocation<span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">param-name</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
      <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">param-value</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>classpath:spring/spring-*.xml<span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">param-value</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">init-param</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
  <span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">servlet</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">通过contextConfigLocation将 spring上下文中的配置文件加载进来，实现二者的结合。</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">发起请求---&gt;请求拦截---&gt;返回请求 是如何实现的呢？在web.xml中配置了servlet-mapping，其中的&lt;servlet-name&gt;<span style="color:rgb(255,153,0);">mvc</span>&lt;/servlet-name&gt;这也是请求URL中 有 mvc 前缀的原因。&lt;url-pattern&gt;将匹配的请求交给DispatcherServlet，由DispatcherServlet转发给相应的 Controller，在RoleController.java中使用 @RequestMapping配置了 请求的路径<em><span style="color:rgb(0,0,255);">role/getRole</span></em>，这样 http://localhost:8000/<span style="color:rgb(255,153,0);">mvc</span>/<em><span style="color:rgb(0,0,255);">role/getRole</span></em>?id=5 &nbsp;就会交给RoleController来处理了。</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">最后，还需要启动web应用程序，在 pom.xml中配置 jetty 容器，来运行web应用：</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,128,0);line-height:1.5;">&lt;!--</span><span style="color:rgb(0,128,0);line-height:1.5;"> jetty插件 </span><span style="color:rgb(0,128,0);line-height:1.5;">--&gt;</span>
      <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">plugin</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
        <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">groupId</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>org.mortbay.jetty<span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">groupId</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
        <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">artifactId</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>maven-jetty-plugin<span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">artifactId</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
        <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">version</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>6.1.25<span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">version</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
        <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">configuration</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
          <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">connectors</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
            <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">connector </span><span style="color:rgb(255,0,0);line-height:1.5;">implementation</span><span style="color:rgb(0,0,255);line-height:1.5;">="org.mortbay.jetty.nio.SelectChannelConnector"</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
              <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">port</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>8000<span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">port</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
              <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">maxIdleTime</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>60000<span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">maxIdleTime</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
            <span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">connector</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
          <span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">connectors</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
          <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">contextPath</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>/mvc<span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">contextPath</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
          <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">scanIntervalSeconds</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>0<span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">scanIntervalSeconds</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
        <span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">configuration</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
      <span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">plugin</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">就可以在IDEA右侧，maven project中点击 jetty run 来运行了。</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;"><img src="https://images2017.cnblogs.com/blog/715283/201708/715283-20170812192513882-875081666.png" alt="" style="border:0px;"></span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">附完整的：mybatisConfig.xml &nbsp;</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.5;">View Code</span> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'Microsoft YaHei';font-size:16px;">spring-web.xml</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.5;">View Code</span> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">pom.xml配置文件</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.5;">View Code</span> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">RoleService的调试：</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">在src目录下，新建 test 文件夹，用来作测试目录。然后在test目录下，建一个java目录，并将该目录关联为 “测试目录”。然后，在java目录下，src/main/java 一 一 对应的文件夹，作为mapper、controller、service类的测试类存放的文件夹。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2017.cnblogs.com/blog/715283/201708/715283-20170812201954929-892116241.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">比如，对RoleService进行测试如下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,0,255);line-height:1.5;">package</span><span style="line-height:1.5;"> service;

</span><span style="color:rgb(0,0,255);line-height:1.5;">import</span><span style="line-height:1.5;"> org.springframework.context.ApplicationContext;
</span><span style="color:rgb(0,0,255);line-height:1.5;">import</span><span style="line-height:1.5;"> org.springframework.context.support.ClassPathXmlApplicationContext;
</span><span style="color:rgb(0,0,255);line-height:1.5;">import</span><span style="line-height:1.5;"> pojo.Role;

</span><span style="color:rgb(0,128,0);line-height:1.5;">/**</span><span style="color:rgb(0,128,0);line-height:1.5;">
 * Created by Administrator on 2017/8/12.
 </span><span style="color:rgb(0,128,0);line-height:1.5;">*/</span>
<span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> RoleServiceImplTest {
    </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">static</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> main(String[] args) {
        ApplicationContext applicationContext </span>= <span style="color:rgb(0,0,255);line-height:1.5;">new</span> ClassPathXmlApplicationContext("classpath:spring/spring-service.xml"<span style="line-height:1.5;">);
        RoleService roleService </span>= (RoleService) applicationContext.getBean(RoleService.<span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;">);
        Role role </span>= roleService.getRole(5<span style="line-height:1.5;">);
        System.out.println(role);
    }
}</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">或者使用 TestNg等测试工具进行测试。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">参考文献：</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><a href="http://blog.csdn.net/qq_27093465/article/details/63683873" rel="nofollow" style="color:#000000;">IntelliJ IDEA 创建 hello world Java web Maven项目从头到尾都有图有真相2017版本</a></p> 
   <p><font><span style="font-size:14px;">本文转自hapjin博客园博客，原文链接：http://www.cnblogs.com/hapjin/p/7351258.html，如需转载请自行联系原作者</span></font><br></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
