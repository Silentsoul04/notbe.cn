<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>VS 2015 Enterprise第二大坑 « NotBeCN</title>
  <meta name="description" content="             前言    继上篇文章之后，你会继续跌进大坑，这个坑困扰我一上午，同时也会让你大跌眼镜，如果你遇到了，那么恭喜你提升自身能力和解决能力的时机到了，当然你可以通过本文继续少走不必要的弯路【我也是无意中发现的捷径】！    话题    这个问题出现源于你Dnx执行环境的升级，你可以在Powe...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/14/weixin_34033624_90133178.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">VS 2015 Enterprise第二大坑</h1>
    <p class="post-meta">Nov 14, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <h1 style="font-size:28px;line-height:1.5;font-family:'Helvetica Neue', Arial;">前言</h1> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">继上篇文章之后，你会继续跌进大坑，这个坑困扰我一上午，同时也会让你大跌眼镜，如果你遇到了，那么恭喜你提升自身能力和解决能力的时机到了，当然你可以通过本文继续少走不必要的弯路【我也是无意中发现的捷径】！</p> 
   <h1 style="font-size:28px;line-height:1.5;font-family:'Helvetica Neue', Arial;">话题</h1> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">这个问题出现源于你Dnx执行环境的升级，你可以在PowerShell中通过&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">dnvm list</span>&nbsp;查看你版本如下</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><img src="http://images0.cnblogs.com/blog2015/589642/201508/051253344864892.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">这告诉你两件事：（1）你安装了两个版本的Dnx&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;"><span style="color:rgb(128,0,128);line-height:1.5;">1.0</span>.<span style="color:rgb(128,0,128);line-height:1.5;">0</span>-beta5和1.<span style="color:rgb(128,0,128);line-height:1.5;">0.0</span>-beta6</span>&nbsp;（2）看见default（默认）没，意思是你项目中默认启动的是&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;"><span style="color:rgb(128,0,128);line-height:1.5;">1.0</span>.<span style="color:rgb(128,0,128);line-height:1.5;">0</span>-beta6</span>&nbsp;版本，通过下面你也会知道确实是这么回事。</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">好了，我们新建一个项目我起个名叫&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">FirstStudy</span>&nbsp;，通过昨天的学习，现在是生成也没错了，看见新建默认出现的页面，如下：【是不是有点想马上运行的赶脚】</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><img src="http://images0.cnblogs.com/blog2015/589642/201508/051258348763655.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">来吧，走一个，尼玛！！我很想说脏话了，好吧，还是注意点素质！好好就新建一个项目，生成时你给我出错，把你毛病给治好了，现在运行你又来个直接出错，简直了.....错误如下：</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><img src="http://images0.cnblogs.com/blog2015/589642/201508/051301202058445.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">好吧，既然出错就老老实实的解决吧！大概意思就是运行时要匹配确定的framework,你看到什么了？？&nbsp;<span style="font-size:18px;"><span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(255,0,0);font-family:'Courier New';font-size:12px;">Project.json</span>&nbsp;【</span>如果不知道新建项目中各个文件的用途请参照<a href="http://www.cnblogs.com/TomXu/" rel="nofollow" style="text-decoration:none;color:rgb(45,161,45);">汤姆大叔MVC系列即可</a>】，这是程序集进行配置的地方，这是个关键，同时我很纳闷默认添加的Dnx版本是4.5.1和5.0如下</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><img src="http://images0.cnblogs.com/blog2015/589642/201508/051308384398963.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">&nbsp;所以第一个想法就是将Project.json中的Dnx版本改为4.5即可，走你！等待程序包还原，生成解决方案时结果出错：</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><img src="http://images0.cnblogs.com/blog2015/589642/201508/051310481732895.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">&nbsp;这说明在4.5版本中没有这命名空间，同时也说明不是这里的错！上面出错时也有说运行时的版本为&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;"><span style="color:rgb(128,0,128);line-height:1.5;">1.0</span>.<span style="color:rgb(128,0,128);line-height:1.5;">0</span>-beta6</span>&nbsp;，此时我们也应该想到Project.json中有一个&nbsp;<span style="color:rgb(255,0,0);"><span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:18px;">dependencies</span>&nbsp;<span style="color:rgb(0,0,0);">这个节点中的程序集就是Dnx4.5.1或者5.0中下的程序集【当你修改这里面的程序集版本再进行生成时，Dnx4.5.1或者5.0下的版本也会相应进行自动修改】，我发现创建时这里的版本如下：</span></span></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><span style="color:rgb(255,0,0);"><span style="color:rgb(0,0,0);"><img src="http://images0.cnblogs.com/blog2015/589642/201508/051321364709770.png" alt="" style="border:0px;"></span></span></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">&nbsp;通过这图我们知道这里面的版本结尾中都为&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(255,0,0);font-family:'Courier New';font-size:18px;">beta5</span>&nbsp;，同时我们也知道我们通过PowerShell知道创建的版本为<span style="color:rgb(255,0,0);">&nbsp;</span><span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(255,0,0);font-family:'Courier New';font-size:18px;">beta6</span><span style="color:rgb(255,0,0);">&nbsp;<span style="color:rgb(0,0,0);">，如果你还不信我们看看项目中属性创建时Dnx SDK版本，我创建的项目FirstStudy属性为</span></span></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><span style="color:rgb(255,0,0);"><span style="color:rgb(0,0,0);"><img src="http://images0.cnblogs.com/blog2015/589642/201508/051326437835884.png" alt="" style="border:0px;"></span></span></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">&nbsp;通过这我们知道：我们Dnx执行环境为&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(255,0,0);font-family:'Courier New';font-size:18px;">beta6</span>&nbsp;，而当创建项目时程序集的版本却为&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(255,0,0);font-family:'Courier New';font-size:18px;">beta5</span>&nbsp;&nbsp;!!所以说没有一劳永逸的事情，如果你更新了Dnx，VS 2015还没达到完美同步跟着你更新，那它怎么知道你更新了呢！！于是乎，我Project.json中依赖项中的程序集改为beta 6的，结果不太理想，生成出错，应该是有些还未有版本6的吧！！那只能另想他法了，那我反过来将项目中的属性Dnx Sdk改为beta5试试，说做就做如下</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><img src="http://images0.cnblogs.com/blog2015/589642/201508/051337276269519.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">&nbsp;很遗憾生成就出错如下</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><img src="http://images0.cnblogs.com/blog2015/589642/201508/051339258767660.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">&nbsp;就修改一下Dnx SDK版本连命名空间System都找不到了，看来路又走错了！至少我们确定肯定是Dnx版本的问题，到目前为止，我们想想项目下的文件是不是有些还是&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(255,0,0);font-family:'Courier New';font-size:18px;">beta6</span>&nbsp;还没进行修改呢？config.json相当于Web.Config比如进行数据连接排除，bower.json和gulpfile是和前台有关的东东，package.json相关gulp的版本，有一个文件我们忽略了，有没有，那就是global.json，全局什么东西，没准是全局配置呢？打开看看发现还真有关于Dnx版本的配置！<span style="color:rgb(0,0,0);"><br></span></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><img src="http://images0.cnblogs.com/blog2015/589642/201508/051353235013195.png" alt="" style="border:0px;"></p> 
   <h3 style="color:rgb(111,168,51);font-size:16px;line-height:1.5;border-left-width:13px;border-left-style:solid;border-left-color:rgb(111,168,51);font-family:'Helvetica Neue', Arial;">注意</h3> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><strong style="font-size:16px;line-height:normal;"><span style="color:rgb(255,0,0);">这是我之后发现的问题，这里默认是版本是你创建时的版本也就是Dnvm list中default,当你在项目属性中进行更改为beta5生成后这里也会相应的更改为项目属性中的版本，可以说是同步的（global.json中Dnx版本随项目属性版本改变而改变）！</span></strong></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><strong style="font-size:16px;line-height:normal;"><span style="color:rgb(0,0,0);"><br></span></strong><span style="color:rgb(0,0,0);">于是将&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(255,0,0);font-family:'Courier New';font-size:18px;">global.json</span>&nbsp;版本改为beta 5，最后还是错误如下：</span></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><span style="color:rgb(0,0,0);"><img src="http://images0.cnblogs.com/blog2015/589642/201508/051404039551933.png" alt="" style="border:0px;"></span></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">此时已经非常绝望了，能将版本改的都已经进行修改了。想了两分钟，不知道哪来的天马行空的想法！</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre><span style="font-size:18px;color:rgb(255,0,0);line-height:1.5;">将Project.json中节点frameworks下的版本Dnx 4.5.1更改为4.5，等待其程序集还原后，再生成下，此时肯定会有错误，之前已经尝试，接着我将其版本改回Dnx 4.5.1，依然是等待其程序集还原，此时再生成下，结果让你大跌眼镜，全部生成成功！</span></pre>
   </div> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">结果F5运行下试试看，显然成功了！！！出现了仰慕已久而迟迟未出现的Asp.Net 5界面</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><img src="http://images0.cnblogs.com/blog2015/589642/201508/051413054088715.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">&nbsp;</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">至此从安装到生成到运行一切圆满的落下帷幕，so perfect。接下来可以进行愉快的Asp.Net 5之旅了！</p> 
   <h1 style="font-size:28px;line-height:1.5;font-family:'Helvetica Neue', Arial;">总结&nbsp;</h1> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">（1）创建项目运行出现错误的原因：当你将Dnx版本升级为beta6时，此时你创建的项目中程序集版本却是beta5。</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">（2）奇葩解决方案：将项目属性Dnx SDK版本改为beta 5，此时再重新生成下此时global.json将被项目属性版本覆盖，当然你也可以进行手动修改。（将Project.json中程序集版本改为beta 6行不通，也就是说只能讲项目版本进行降级而非升级），接下来就是：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre><span style="font-size:18px;color:rgb(255,0,0);line-height:1.5;">将Project.json中节点frameworks下的版本Dnx 4.5.1更改为4.5，等待其程序集还原后，再生成下，此时肯定会有错误，之前已经尝试，接着我将其版本改回Dnx 4.5.1，依然是等待其程序集还原，此时再生成下，结果让你大跌眼镜，全部生成成功！</span></pre>
   </div> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">上述是我能想到的解决问题的方案，如果你遇见相同问题，用别的方案解决了的话，望告知，让我也能更好的学习！</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><br></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><br></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><br></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><br></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><br></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><br></p> 
   <p><font color="#111111"><span style="font-size:13px;line-height:23.4px;">本文转自Jeffcky博客园博客，原文链接：http://www.cnblogs.com/CreateMyself/p/4704500.html，如需转载请自行联系原作者</span></font><br></p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
