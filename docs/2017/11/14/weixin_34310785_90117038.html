<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>关于浏览器模式和文本模式的困惑 « NotBeCN</title>
  <meta name="description" content="             什么是浏览器模式和文本模式？    经常使用IE开发者工具的同学，肯定见过浏览器模式和文本模式，对于这两个名词，综合相关文档解释如下：    浏览器模式（Browser Mode），用于切换IE针对该网页的默认文本模式、对不同版本浏览器的条件注释解析、决定请求头里userAgent的值。...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/14/weixin_34310785_90117038.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">关于浏览器模式和文本模式的困惑</h1>
    <p class="post-meta">Nov 14, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <h4 style="font-size:14px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;line-height:25.2px;">什么是浏览器模式和文本模式？</h4> 
   <p style="line-height:25.2px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">经常使用IE开发者工具的同学，肯定见过浏览器模式和文本模式，对于这两个名词，综合相关文档解释如下：</p> 
   <p style="line-height:25.2px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"><strong>浏览器模式</strong>（Browser Mode），用于切换IE针对该网页的默认文本模式、对不同版本浏览器的条件注释解析、决定请求头里userAgent的值。它在浏览器发出请求之前就已经确定，网站没有办法修改这个值。它代表的是用户以何种浏览器访问网站。IE9支持下列浏览器模式：</p> 
   <table border="1" style="border:1px solid #C0C0C0;border-collapse:collapse;margin-left:15px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;line-height:25.2px;">
    <tbody>
     <tr>
      <th style="border:1px solid #C0C0C0;border-collapse:collapse;">&nbsp;</th> 
      <th style="border:1px solid #C0C0C0;border-collapse:collapse;">userAgent</th> 
      <th style="border:1px solid #C0C0C0;border-collapse:collapse;">默认文本模式</th> 
     </tr>
     <tr>
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;"><em>IE7</em></td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;">MSIE 7.0</td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;"><em>IE7标准</em></td> 
     </tr>
     <tr>
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;"><em>IE8</em></td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;">MSIE 8.0 &amp;&amp; Trident/4.0</td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;"><em>IE8标准</em></td> 
     </tr>
     <tr>
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;"><em>IE9</em></td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;">MSIE 9.0 &amp;&amp; Trident/5.0</td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;"><em>IE9标准</em></td> 
     </tr>
     <tr>
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;"><em>IE9兼容性</em></td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;">MSIE 7.0 &amp;&amp; Trident/5.0</td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;"><em>IE7标准</em></td> 
     </tr>
    </tbody>
   </table>
   <p style="line-height:25.2px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">（<em>IE9兼容性</em>模式与<em>IE7</em>模式的区别是：前者在UA里加上了Trident版本，后者和IE7完全一致无Trident标识；IE8中，<em>IE9兼容性</em>模式对应为<em>IE8兼容性</em>模式，UA里Trident版本为4.0，其他没变化。另，IE8中没有<em>IE9模式</em>）<span style="line-height:1.8;"></span></p> 
   <p style="line-height:25.2px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"><strong>文本模式</strong>（Document Mode），其实就是经常说的文档模式。不同的文本模式对应不同的排版引擎，不同的JS引擎。上面提到，每一种浏览器模式对应一种默认的文本模式，网站还可以通过一些手段来更改文本模式，它代表的是浏览器以何种模式呈现页面。IE9有下列文本模式：</p> 
   <table border="1" style="border:1px solid #C0C0C0;border-collapse:collapse;margin-left:15px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;line-height:25.2px;">
    <tbody>
     <tr>
      <th style="border:1px solid #C0C0C0;border-collapse:collapse;">&nbsp;</th> 
      <th style="border:1px solid #C0C0C0;border-collapse:collapse;">documentMode</th> 
     </tr>
     <tr>
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;"><em>IE7标准</em></td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;">7</td> 
     </tr>
     <tr>
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;"><em>IE8标准</em></td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;">8</td> 
     </tr>
     <tr>
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;"><em>IE9标准</em></td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;">9</td> 
     </tr>
     <tr>
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;"> <em>怪异</em>（Quirks）</td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;">5</td> 
     </tr>
    </tbody>
   </table>
   <p style="line-height:25.2px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">（需要说明的是，IE8开始支持的渲染机制有：怪异模式（quirks mode）、完全标准模式（standards mode）和近似标准模式（almost standards mode），但开发者工具是无法选择近似标准模式的，实际上我们一般都选择触发完全标准模式）</p> 
   <h4 style="font-size:14px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;line-height:25.2px;">浏览器模式和文本模式有什么用？</h4> 
   <p style="line-height:25.2px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">用来解决IE各版本带来的兼容性问题。根据微软描述的IE兼容性策略，在IE8+访问一个页面要经过这样的流程：</p> 
   <p style="line-height:25.2px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"><strong>一、</strong>首先，浏览器要确定浏览器模式。上面说过，浏览器模式是在请求发送之前就必须确定，默认取最新（IE9为<em>IE9标准</em>，IE8为<em>IE8标准</em>），有两种方式可以更改它：</p> 
   <ul style="list-style:none;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;line-height:25.2px;">
    <li style="list-style-type:disc;background-image:url(&quot;images/icon_miniarrow.gif&quot;);background-position:0px 9px;background-repeat:no-repeat;">通过开发者工具选择（可选项见上表）；</li> 
    <li style="list-style-type:disc;background-image:url(&quot;images/icon_miniarrow.gif&quot;);background-position:0px 9px;background-repeat:no-repeat;">通过点击兼容性视图按钮；</li> 
    <li style="list-style-type:disc;background-image:url(&quot;images/icon_miniarrow.gif&quot;);background-position:0px 9px;background-repeat:no-repeat;">命中兼容性视图列表（微软维护的需要采用兼容性视图的列表。IE8+默认对这个列表和局域网的网址都会采用<em>相应的兼容性</em>模式）；</li> 
   </ul>
   <p style="line-height:25.2px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"><strong>二、</strong>浏览器通过请求头里userAgent的值，告诉服务器当前是何种浏览器模式；</p> 
   <p style="line-height:25.2px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"><strong>三、</strong>服务器可以通过下面方式改变浏览器文本模式：</p> 
   <ul style="list-style:none;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;line-height:25.2px;">
    <li style="list-style-type:disc;background-image:url(&quot;images/icon_miniarrow.gif&quot;);background-position:0px 9px;background-repeat:no-repeat;">doctype；</li> 
    <li style="list-style-type:disc;background-image:url(&quot;images/icon_miniarrow.gif&quot;);background-position:0px 9px;background-repeat:no-repeat;">X-UA-Compatible Meta或对应的响应头；</li> 
   </ul>
   <p style="line-height:25.2px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"><strong>四、</strong>浏览器综合考虑开发者工具设置、第三步服务器返回的设置、兼容性列表设置等等情况，决定页面使用何种文本模式。这个过程有点复杂，放一张Qwrap群里灰大提供的流程图，可以自己点开看大图。</p> 
   <p style="line-height:25.2px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"><a href="http://st.imququ.com/uploads/2012/02/ie9.jpg" rel="nofollow" style="text-decoration:none;color:rgb(61,129,238);border-bottom-width:1px;border-bottom-style:dashed;"><img src="http://st.imququ.com/uploads/2012/02/m_ie9.jpg" alt="" width="500" height="875" style="border:1px solid rgb(204,204,204);"></a></p> 
   <p style="line-height:25.2px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">（上图是IE9选取文本模式的流程图，<a href="http://st.imququ.com/uploads/2012/02/ie8.png" rel="nofollow" style="text-decoration:none;color:rgb(61,129,238);border-bottom-width:1px;border-bottom-style:dashed;">这里还有IE8版本</a>，有一些区别）</p> 
   <h4 style="font-size:14px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;line-height:25.2px;">问题终于来了！</h4> 
   <p style="line-height:25.2px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">回顾下前面的介绍，浏览器模式决定：1）发送给服务端的UA；2）默认的文本模式；3）如何解析条件注释。它在请求发送前就已经确定，且不受服务端控制。文本模式决定：1）排版引擎；2）JS引擎。它在浏览器得到响应后最终确定，服务端可通过doctype或X-UA-Compatible来控制。</p> 
   <p style="line-height:25.2px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"><strong>测试一、</strong>根据前文，如果用户浏览器没有激活兼容性视图；没有开启IE开发者工具。那么IE9的浏览器模式默认为<em>IE9</em>，默认对应的文本模式应该是<em>IE9标准</em>（对于IE8来说，是类似的），我们通过下列代码将它改到<em>IE7标准</em>：</p> 
   <div style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;line-height:25.2px;"> 
    <div class="syntaxhighlighter nogutter html" style="border:1px solid rgb(238,238,238);font-size:1em;"></div> 
   </div> 
   <p style="line-height:25.2px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">下面，我们分别用原生IE8、IE9测试<a href="http://qgy18.imququ.com/file/test0.html" rel="nofollow" style="text-decoration:none;color:rgb(61,129,238);border-bottom-width:1px;border-bottom-style:dashed;">这个页面</a>：</p> 
   <table border="1" style="border:1px solid #C0C0C0;border-collapse:collapse;margin-left:15px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;line-height:25.2px;">
    <tbody>
     <tr>
      <th style="border:1px solid #C0C0C0;border-collapse:collapse;">&nbsp;</th> 
      <th style="border:1px solid #C0C0C0;border-collapse:collapse;">请求头UA</th> 
      <th style="border:1px solid #C0C0C0;border-collapse:collapse;">navigator.userAgent</th> 
      <th style="border:1px solid #C0C0C0;border-collapse:collapse;">条件注释</th> 
      <th style="border:1px solid #C0C0C0;border-collapse:collapse;">documentMode</th> 
      <th style="border:1px solid #C0C0C0;border-collapse:collapse;">JS引擎</th> 
     </tr>
     <tr>
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;">IE8</td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;">MSIE 8.0 &amp;&amp; Trident/4.0</td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;">MSIE 8.0 &amp;&amp; Trident/4.0</td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;"><em>IE7</em></td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;">7</td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;"><em>IE7</em></td> 
     </tr>
     <tr>
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;">IE9</td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;">MSIE 9.0 &amp;&amp; Trident/5.0</td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;">MSIE 7.0 &amp;&amp; Trident/5.0</td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;"><em>IE7</em></td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;">7</td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;"><em>IE7</em></td> 
     </tr>
    </tbody>
   </table>
   <p style="line-height:25.2px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">上表说明，浏览器发送请求时的浏览器模式符合预期（根据请求头UA），X-UA-Compatible确实会将浏览器文本模式改到了<em>IE7标准</em>（根据documentMode和JS引擎）。奇怪的是，文本模式的改变导致了浏览器模式的改变，因为条件注释是由浏览器模式决定的。本例中，文本模式改到<em>IE7标准</em>，条件注释也跟着变成<em>IE7</em>，意味着浏览器模式变到<em>IE9/IE8兼容性</em>（从IE9的测试来看，不能是<em>IE7</em>，因为UA里包含Trident）。至于IE8中JS取到的UA为什么没有变化，可能是bug或者理解不一致。</p> 
   <p style="line-height:25.2px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"><strong>测试二、</strong>那如果把测试地址加到兼容性列表呢？根据前文，这种情况浏览器模式应该是<em>IE9/IE8兼容性</em>，对应的文本模式依然是<em>IE7标准</em>。测试结果如下：</p> 
   <table border="1" style="border:1px solid #C0C0C0;border-collapse:collapse;margin-left:15px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;line-height:25.2px;">
    <tbody>
     <tr>
      <th style="border:1px solid #C0C0C0;border-collapse:collapse;">&nbsp;</th> 
      <th style="border:1px solid #C0C0C0;border-collapse:collapse;">请求头UA</th> 
      <th style="border:1px solid #C0C0C0;border-collapse:collapse;">navigator.userAgent</th> 
      <th style="border:1px solid #C0C0C0;border-collapse:collapse;">条件注释</th> 
      <th style="border:1px solid #C0C0C0;border-collapse:collapse;">documentMode</th> 
      <th style="border:1px solid #C0C0C0;border-collapse:collapse;">JS引擎</th> 
     </tr>
     <tr>
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;">IE8</td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;">MSIE 7.0 &amp;&amp; Trident/4.0</td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;">MSIE 7.0 &amp;&amp; Trident/4.0</td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;"><em>IE7</em></td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;">7</td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;"><em>IE7</em></td> 
     </tr>
     <tr>
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;">IE9</td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;">MSIE 7.0 &amp;&amp; Trident/5.0</td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;">MSIE 7.0 &amp;&amp; Trident/5.0</td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;"><em>IE7</em></td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;">7</td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;"><em>IE7</em></td> 
     </tr>
    </tbody>
   </table>
   <p style="line-height:25.2px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">上表是完全符合预期的。</p> 
   <p style="line-height:25.2px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"><strong>测试三、</strong>如果把X-UA-Compatible改成IE=edge，继续使用兼容性模式测试呢？结论如下：</p> 
   <table border="1" style="border:1px solid #C0C0C0;border-collapse:collapse;margin-left:15px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;line-height:25.2px;">
    <tbody>
     <tr>
      <th style="border:1px solid #C0C0C0;border-collapse:collapse;">&nbsp;</th> 
      <th style="border:1px solid #C0C0C0;border-collapse:collapse;">请求头UA</th> 
      <th style="border:1px solid #C0C0C0;border-collapse:collapse;">navigator.userAgent</th> 
      <th style="border:1px solid #C0C0C0;border-collapse:collapse;">条件注释</th> 
      <th style="border:1px solid #C0C0C0;border-collapse:collapse;">documentMode</th> 
      <th style="border:1px solid #C0C0C0;border-collapse:collapse;">JS引擎</th> 
     </tr>
     <tr>
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;">IE8</td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;">MSIE 7.0 &amp;&amp; Trident/4.0</td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;">MSIE 7.0 &amp;&amp; Trident/4.0</td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;"><em>IE8</em></td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;">8</td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;"><em>IE8</em></td> 
     </tr>
     <tr>
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;">IE9</td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;">MSIE 7.0 &amp;&amp; Trident/5.0</td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;">MSIE 9.0 &amp;&amp; Trident/5.0</td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;"><em>IE9</em></td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;">9</td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;"><em>IE9</em></td> 
     </tr>
    </tbody>
   </table>
   <p style="line-height:25.2px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">这个结论其实跟测试一是一致的：X-UA-Compatible为IE=edge，意味着文本模式会使用最新可用的版本，然而文本模式的更改，又把浏览器模式从<em>IE9/IE8兼容性</em>变成<em>IE9/IE8</em>。IE9会按照新的浏览器模式来设置JS的navigator.userAgent，IE8下JS的UA不变。</p> 
   <p style="line-height:25.2px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"><strong>测试四、</strong>那如果通过开发者工具人为设置浏览器模式和文本模式呢？经过测试，这样测试都是符合预期的。例如IE9下，设置浏览器模式为<em>IE8</em>，文本模式为<em>IE7标准</em>，请求头UA、JS的UA、条件注释都表明浏览器模式是<em>IE8</em>，documentMode和JS引擎都表明文本模式是<em>IE7标准</em>。因为，IE开发者工具的优先级最高，设置了这个，其他条件统统无视！</p> 
   <h3 style="font-size:22px;line-height:1.5;color:rgb(255,255,255);text-indent:10px;font-family:Georgia, 'Times New Roman', Times, sans-serif;background:rgb(128,128,128);">结论</h3> 
   <p style="line-height:25.2px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">IE8/9中X-UA-Compatible对文本模式的改变会导致浏览器模式的改变，也就是说服务端可以间接控制浏览器模式。这与微软文档里这一段描述有出入：</p> 
   <blockquote style="border-left-width:6px;border-style:none none none solid;border-left-color:rgb(219,219,219);color:rgb(102,102,102);font-size:13px;line-height:24px;font-family:Georgia, 'Times New Roman', Times, sans-serif;background:rgb(252,252,252);"> 
    <p style="line-height:1.8;">An important detail to remember is that&nbsp;<strong><em>Browser Mode is chosen before IE requests web content</em></strong>. This means that&nbsp;<strong>sites cannot choose a Browser Mode</strong>.</p> 
   </blockquote> 
   <p style="line-height:25.2px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">对于IE8，如果网站通过X-UA-Compatible meta/header更改文本模式为当前浏览器模式默认文本模式之外的值，那么页面将按照新的文本模式来呈现，条件注释也按照新的文本模式对应的浏览器模式来解析，但是JS获取的UA是浏览器模式初始状态。这样会导致用JS获取UA得到的浏览器版本，与实际渲染的浏览器版本不符，这会对基于UA的浏览器检测造成干扰。</p> 
   <p style="line-height:25.2px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">对于IE9，只有一点与IE8不同：JS获取到的是新文本模式对应的浏览器模式的UA。这会导致用JS获取UA得到的浏览器版本，与请求头发送给服务器UA里标识的浏览器版本不符，这可能对统计有影响。</p> 
   <p style="line-height:25.2px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">对于IE这种兼容性方案，几乎不可能做到理论上的完美。个人感觉还是IE9的策略影响面较小，更好一些。</p> 
   <p style="line-height:25.2px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">PS，上述结论都是我用Windows XP的原生IE8，Windows 7的原生IE9亲自测试得出来的。对于国内那些IE Shell们，实在过于奇葩，不在本文范围内。</p> 
   <p style="line-height:25.2px;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">参考：</p> 
   <ol style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;line-height:25.2px;">
    <li style="list-style-type:decimal;"><a href="http://blogs.msdn.com/b/ie/archive/2010/10/19/testing-sites-with-browser-mode-vs-doc-mode.aspx" rel="nofollow" style="text-decoration:none;color:rgb(61,129,238);">Testing sites with Browser Mode vs. Doc Mode</a></li> 
    <li style="list-style-type:decimal;"><a href="http://www.zachleat.com/web/et-tu-x-ua-compatible/" rel="nofollow" style="text-decoration:none;color:rgb(61,129,238);">X-UA-Compatible header/meta tag is NOT the same as the Internet Explorer 8+ Compatibility View button</a></li> 
   </ol>
   <div>
    <font color="#333333"><span style="font-size:14px;line-height:25.2px;"><br></span></font>
   </div> 
   <div>
    <font color="#333333"><span style="font-size:14px;line-height:25.2px;"><br></span></font>
   </div> 
   <div>
    <font color="#333333"><span style="font-size:14px;line-height:25.2px;"><br></span></font>
   </div> 
   <div>
    <font color="#333333"><span style="font-size:14px;line-height:25.2px;"><br></span></font>
   </div> 
   <div>
    <font color="#333333"><span style="font-size:14px;line-height:25.2px;">本文转自Barret Lee博客园博客，原文链接：http://www.cnblogs.com/hustskyking/archive/2013/06/08/browser-mode-and-doccument-mode.html，如需转载请自行联系原作者</span><br></font>
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
