<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Codeforces Round #270(利用prim算法) « NotBeCN</title>
  <meta name="description" content="                                                                    D. Design Tutorial: Inverse the Problem                                         time limi...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/14/weixin_34198583_90120784.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">Codeforces Round #270(利用prim算法)</h1>
    <p class="post-meta">Nov 14, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <div style="color:rgb(51,51,51);font-size:14px;font-family:verdana, arial, sans-serif;"> 
    <div class="content-with-sidebar" style="line-height:21px;"> 
     <div class="problemindexholder"> 
      <div class="ttypography" style="font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;line-height:21px;color:rgb(34,34,34);"> 
       <div class="problem-statement" style="line-height:1.5em;"> 
        <div class="header" style="text-align:center;"> 
         <div class="title" style="font-size:21px;">
          D. Design Tutorial: Inverse the Problem
         </div> 
         <div class="time-limit"> 
          <div class="property-title">
           time limit per test
          </div> &nbsp;2 seconds
         </div> 
         <div class="memory-limit"> 
          <div class="property-title">
           memory limit per test
          </div> &nbsp;256 megabytes
         </div> 
         <div class="input-file"> 
          <div class="property-title">
           input
          </div> &nbsp;standard input
         </div> 
         <div class="output-file"> 
          <div class="property-title">
           output
          </div> &nbsp;standard output
         </div> 
        </div> 
        <div> 
         <p style="text-indent:2em;font-size:1em;color:rgb(51,51,51);line-height:1.4em;">There is an easy way to obtain a new task from an old one called "Inverse the problem": we give an output of the original task, and ask to generate an input, such that solution to the original problem will produce the output we provided. The hard task of Topcoder Open 2014 Round 2C, InverseRMQ, is a good example.</p> 
         <p style="text-indent:2em;font-size:1em;color:rgb(51,51,51);line-height:1.4em;">Now let's create a task this way. We will use the task: you are given a tree, please calculate the distance between any pair of its nodes. Yes, it is very easy, but the inverse version is a bit harder: you are given an&nbsp;<span class="tex-span" style="line-height:1.8;font-size:18px;font-family:'times new roman', sans-serif;"><em>n</em> × <em>n</em></span>&nbsp;distance matrix. Determine if it is the distance matrix of a weighted tree (all weights must be positive integers).</p> 
        </div> 
        <div class="input-specification"> 
         <div class="section-title" style="font-size:16px;font-weight:bold;">
          Input
         </div> 
         <p style="text-indent:2em;font-size:1em;color:rgb(51,51,51);line-height:1.4em;">The first line contains an integer&nbsp;<span class="tex-span" style="line-height:1.8;font-size:18px;font-family:'times new roman', sans-serif;"><em>n</em></span>&nbsp;(<span class="tex-span" style="line-height:1.8;font-size:18px;font-family:'times new roman', sans-serif;">1 ≤ <em>n</em> ≤ 2000</span>) — the number of nodes in that graph.</p> 
         <p style="text-indent:2em;font-size:1em;color:rgb(51,51,51);line-height:1.4em;">Then next&nbsp;<span class="tex-span" style="line-height:1.8;font-size:18px;font-family:'times new roman', sans-serif;"><em>n</em></span>&nbsp;lines each contains&nbsp;<span class="tex-span" style="line-height:1.8;font-size:18px;font-family:'times new roman', sans-serif;"><em>n</em></span>&nbsp;integers&nbsp;<span class="tex-span" style="line-height:1.8;font-size:18px;font-family:'times new roman', sans-serif;"><em>d</em><span class="lower-index" style="line-height:0;font-size:13px;vertical-align:baseline;"><em>i</em>, <em>j</em></span></span>&nbsp;(<span class="tex-span" style="line-height:1.8;font-size:18px;font-family:'times new roman', sans-serif;">0 ≤ <em>d</em><span class="lower-index" style="line-height:0;font-size:13px;vertical-align:baseline;"><em>i</em>, <em>j</em></span> ≤ 10<span class="upper-index" style="line-height:0;font-size:13px;vertical-align:baseline;">9</span></span>) — the distance between node&nbsp;<span class="tex-span" style="line-height:1.8;font-size:18px;font-family:'times new roman', sans-serif;"><em>i</em></span>&nbsp;and node&nbsp;<span class="tex-span" style="line-height:1.8;font-size:18px;font-family:'times new roman', sans-serif;"><em>j</em></span>.</p> 
        </div> 
        <div class="output-specification"> 
         <div class="section-title" style="font-size:16px;font-weight:bold;">
          Output
         </div> 
         <p style="text-indent:2em;font-size:1em;color:rgb(51,51,51);line-height:1.4em;">If there exists such a tree, output "<span class="tex-font-style-tt" style="line-height:1.8;font-size:15px;font-family:'courier new', monospace;">YES</span>", otherwise output "<span class="tex-font-style-tt" style="line-height:1.8;font-size:15px;font-family:'courier new', monospace;">NO</span>".</p> 
        </div> 
        <div class="sample-tests" style="font-size:.9em;font-family:Consolas, 'Lucida Console', 'Andale Mono', 'Bitstream Vera Sans Mono', 'Courier New', Courier;"> 
         <div class="section-title" style="font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;font-weight:bold;">
          Sample test(s)
         </div> 
         <div class="sample-test"> 
          <div class="input" style="border:1px solid rgb(136,136,136);"> 
           <div class="title" style="font-size:1.3em;border-bottom:1px solid rgb(136,136,136);text-transform:lowercase;font-weight:bold;">
            input
           </div> 
           <pre>3
0 2 7
2 0 9
7 9 0
</pre> 
          </div> 
          <div class="output" style="border:1px solid rgb(136,136,136);"> 
           <div class="title" style="font-size:1.3em;border-bottom:1px solid rgb(136,136,136);text-transform:lowercase;font-weight:bold;">
            output
           </div> 
           <pre>YES
</pre> 
          </div> 
          <div class="input" style="border:1px solid rgb(136,136,136);"> 
           <div class="title" style="font-size:1.3em;border-bottom:1px solid rgb(136,136,136);text-transform:lowercase;font-weight:bold;">
            input
           </div> 
           <pre>3
1 2 7
2 0 9
7 9 0
</pre> 
          </div> 
          <div class="output" style="border:1px solid rgb(136,136,136);"> 
           <div class="title" style="font-size:1.3em;border-bottom:1px solid rgb(136,136,136);text-transform:lowercase;font-weight:bold;">
            output
           </div> 
           <pre>NO
</pre> 
          </div> 
          <div class="input" style="border:1px solid rgb(136,136,136);"> 
           <div class="title" style="font-size:1.3em;border-bottom:1px solid rgb(136,136,136);text-transform:lowercase;font-weight:bold;">
            input
           </div> 
           <pre>3
0 2 2
7 0 9
7 9 0
</pre> 
          </div> 
          <div class="output" style="border:1px solid rgb(136,136,136);"> 
           <div class="title" style="font-size:1.3em;border-bottom:1px solid rgb(136,136,136);text-transform:lowercase;font-weight:bold;">
            output
           </div> 
           <pre>NO
</pre> 
          </div> 
          <div class="input" style="border:1px solid rgb(136,136,136);"> 
           <div class="title" style="font-size:1.3em;border-bottom:1px solid rgb(136,136,136);text-transform:lowercase;font-weight:bold;">
            input
           </div> 
           <pre>3
0 1 1
1 0 1
1 1 0
</pre> 
          </div> 
          <div class="output" style="border:1px solid rgb(136,136,136);"> 
           <div class="title" style="font-size:1.3em;border-bottom:1px solid rgb(136,136,136);text-transform:lowercase;font-weight:bold;">
            output
           </div> 
           <pre>NO
</pre> 
          </div> 
          <div class="input" style="border:1px solid rgb(136,136,136);"> 
           <div class="title" style="font-size:1.3em;border-bottom:1px solid rgb(136,136,136);text-transform:lowercase;font-weight:bold;">
            input
           </div> 
           <pre>2
0 0
0 0
</pre> 
          </div> 
          <div class="output" style="border:1px solid rgb(136,136,136);"> 
           <div class="title" style="font-size:1.3em;border-bottom:1px solid rgb(136,136,136);text-transform:lowercase;font-weight:bold;">
            output
           </div> 
           <pre>NO
</pre> 
          </div> 
         </div> 
        </div> 
        <div class="note"> 
         <div class="section-title" style="font-size:16px;font-weight:bold;">
          Note
         </div> 
         <p style="text-indent:2em;font-size:1em;color:rgb(51,51,51);line-height:1.4em;">In the first example, the required tree exists. It has one edge between nodes 1 and 2 with weight 2, another edge between nodes 1 and 3 with weight 7.</p> 
         <p style="text-indent:2em;font-size:1em;color:rgb(51,51,51);line-height:1.4em;">In the second example, it is impossible because&nbsp;<span class="tex-span" style="line-height:1.8;font-size:18px;font-family:'times new roman', sans-serif;"><em>d</em><span class="lower-index" style="line-height:0;font-size:13px;vertical-align:baseline;">1, 1</span></span>&nbsp;should be 0, but it is 1.</p> 
         <p style="text-indent:2em;font-size:1em;color:rgb(51,51,51);line-height:1.4em;">In the third example, it is impossible because&nbsp;<span class="tex-span" style="line-height:1.8;font-size:18px;font-family:'times new roman', sans-serif;"><em>d</em><span class="lower-index" style="line-height:0;font-size:13px;vertical-align:baseline;">1, 2</span></span>&nbsp;should equal&nbsp;<span class="tex-span" style="line-height:1.8;font-size:18px;font-family:'times new roman', sans-serif;"><em>d</em><span class="lower-index" style="line-height:0;font-size:13px;vertical-align:baseline;">2, 1</span></span>.</p> 
         <p style="text-indent:2em;color:rgb(51,51,51);line-height:1.4em;"><span style="line-height:1.8;font-size:18px;"><span style="line-height:22.4px;color:rgb(73,73,73);">给定一个矩阵，表示每两个节点之间的权值距离，问能否够相应生成一棵树，</span><br style="color:rgb(73,73,73);line-height:22.4px;"><span style="line-height:22.4px;color:rgb(73,73,73);">使得这棵树中的随意两点之间的距离和矩阵中的相应两点的距离相等。</span><br></span></p> 
         <p style="text-indent:2em;color:rgb(51,51,51);line-height:1.4em;"><span style="line-height:1.8;font-size:18px;"><span style="line-height:22.4px;color:rgb(73,73,73);"><span style="line-height:22.4px;">思路：我们将给定的矩阵看成是一个图，a 到 b会有多条路径， 假设存在一棵树。那么</span><br style="line-height:22.4px;"><span style="line-height:22.4px;">这个树中a-&gt;b的距离一定是这个图中全部a-&gt;b中路径长度最短的一条！</span></span></span></p> 
         <p style="text-indent:2em;color:rgb(51,51,51);">所以我们依据边权，<br style="color:rgb(73,73,73);line-height:22.4px;"><span style="line-height:22.4px;color:rgb(73,73,73);">建立一棵MST树！</span></p> 
         <p style="text-indent:2em;color:rgb(51,51,51);">再将MST树中的随意两点之间的距离求出来，看是否和矩阵中的相应的节点<br style="color:rgb(73,73,73);line-height:22.4px;"><span style="line-height:22.4px;color:rgb(73,73,73);">对距离同样,</span><span style="line-height:1.5em;">我们首先构造一个最小生成树,然后比較各各点之间的距离是否与题目给出的距离相等,能够用dfs搜索整张图的每两个点之间的距离.以下给的做法非dfs做的,用一个数组f[][],记录x,y两点之间的距离,算距离的时候是通过眼下点的前驱找,也就是说须要一个数组记录前驱,这样就能够不用dfs了,直接能够算.看完代码就明确了.....</span></p> 
         <div>
          <br>
         </div> 
         <div> 
          <pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;cstring&gt;
#include &lt;algorithm&gt;
using namespace std;
const int maxn = 2010;
const int INF = 0x3f3f3f3f;
int graph[maxn][maxn];
int prior[maxn];
int visit[maxn];
int dis[maxn];
int f[maxn][maxn];
int n;
bool check()
{
    for(int i = 0; i &lt; n; i++)
    {
        dis[i] = INF;
        if(graph[i][i] != 0) return false;
        for(int j = i+1 ; j &lt; n; j++)
        {
            if(graph[i][j] != graph[j][i] || graph[i][j] == 0) return false;
        }
    }

    memset(visit,0,sizeof(visit));
    memset(prior,-1,sizeof(prior));
    memset(f,0,sizeof(f));
    int cent = n;
    dis[0]=0;
    while(cent--)//循环n次是由于要初始化
    {

        int min = -1;
        for(int i = 0; i &lt; n; i++)
        {
            if(!visit[i] &amp;&amp; (min == -1 || dis[i] &lt; dis[min]))
            {
                min = i;
            }
        }
        for(int i = 0; i &lt; n; i++)//在prim算法里面添加这层循环里面的内容算距离
        {
            if(visit[i])//必须是已经訪问过的点,才干算距离
            {
                f[i][min] = f[min][i] = f[i][prior[min]] + dis[min];
            }
        }
        visit[min] = true;
        for(int i = 0; i &lt; n; i++)
        {
            if(dis[i] &gt; graph[min][i] )
            {
                dis[i] = graph[min][i];
                prior[i] = min;//记录前驱
            }
        }
    }

    for(int i = 0; i &lt; n; i++)
    {
        for(int j = 0 ; j &lt; n; j++)
        {
            if(f[i][j] != graph[i][j])
            {
                return false;
            }
        }
    }
      return true;
}
int main()
{
#ifdef xxz
    freopen("in","r",stdin);
#endif // xxz
    while(cin&gt;&gt;n)
    {
        for(int i = 0; i &lt; n; i++)
            for(int j = 0; j &lt; n; j++)
            {
                cin&gt;&gt;graph[i][j];
            }

        if(check()) cout&lt;&lt;"YES"&lt;&lt;endl;
        else cout&lt;&lt;"NO"&lt;&lt;endl;
    }
    return 0;
}


</code></pre> 
          <br>
          <br>
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div> 
    <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:12px;">版权声明：本文博客原创文章，博客，未经同意，不得转载。</p> 
    <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:12px;"><br></p> 
    <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:12px;"><br></p> 
    <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:12px;"><br></p> 
    <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:12px;"><br></p> 
    <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:12px;"><br></p> 
    <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:12px;"><br></p> 
    <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:12px;"><br></p> 
    <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:12px;"><br></p> 
    <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:12px;"><br></p> 
    <p><font color="#333333"><span style="font-size:12px;">本文转自mfrbuaa博客园博客，原文链接：http://www.cnblogs.com/mfrbuaa/p/4752178.html，如需转载请自行联系原作者</span></font></p> 
    <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
     <br>
    </div> 
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
