<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>探索 OpenStack 之（15）：oslo.messaging 和 Cinder 中 MessageQueue 消息的发送和接收 « NotBeCN</title>
  <meta name="description" content="             前言：上一篇文章&nbsp;只是 RabbitMQ 的科普，本文将仔细分析 Cinder 中 RabbitMQ 的各组件的使用、消息的发送和接收等。由于各流程步骤很多，本文只会使用若干流程图来加以阐述，尽量做到图文自解释，不会添加很细的文字说明了。    1. Cinder 中创建卷的端...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/14/weixin_34160277_90125970.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">探索 OpenStack 之（15）：oslo.messaging 和 Cinder 中 MessageQueue 消息的发送和接收</h1>
    <p class="post-meta">Nov 14, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">前言：<a href="http://www.cnblogs.com/sammyliu/p/4293011.html" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;">上一篇文章</a>&nbsp;只是 RabbitMQ 的科普，本文将仔细分析 Cinder 中 RabbitMQ 的各组件的使用、消息的发送和接收等。由于各流程步骤很多，本文只会使用若干流程图来加以阐述，尽量做到图文自解释，不会添加很细的文字说明了。</p> 
   <h2 style="font-size:21px;line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;">1. Cinder 中创建卷的端到端过程</h2> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;"><img src="https://images0.cnblogs.com/blog2015/697113/201503/131550116674464.jpg" alt="" style="border:0px;"></p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">该过程主要包括两部分：</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">第一部分即初始化部分：cinder-api 服务启动过程中 （<a href="http://www.cnblogs.com/sammyliu/p/4272611.html" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;">参见另一篇文章</a>），APIRouter 类被初始化，接着它会初始化 VolumeController 类，最终，SchedulerAPI 类以及 VolumeAPI 类会被初始化，它们分别会调用 get_client 方法获取一个 RPCClient 的实例，其中，target 即发送消息的目的 RabbitMQ exchange，它由 cinder.conf 定义。该&nbsp;RPCClient 实例的方法会分别被 SchedulerAPI 类和 VolumeAPI类来发送。</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">第二部分即流程处理部分：当 cinder-api 的 WSGI server 收到一个卷创建的请求后，APIRouter 会负责把该请求分发到&nbsp;VolumeController 类的 create 方法 （其过程请参考<a href="http://www.cnblogs.com/sammyliu/p/4271239.html" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;">另一篇文章</a>）。该方法会依次：</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">（16）生成一个 task flow，其中的几个 task 依次提取request中的数据、预留 Quota、在 db 中创建 entery、提交 quota，最后调用 VolumeCastTask::exectue 方法。</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">（17）调用 SchedulerAPI 的 create_volume 方法，它会调用 RPCClient 的 cast 方法来发出一个创建volume 的 message。</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">（18 ~ 20）最终 SchedulerManager 的 create_volume 方法会被调用，它会执行 filtering 和 weighting 来选择一个最优的 host。</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">（23）确定好该 host 后，调用 volume.API 的 create_volume 方法。</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">（24 ~ 25）该方法会调用 RPCClient 的 cast 方法发出一个 volume creation 消息给 cinder-volume</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">（26）最终，指定 host 上的 VolumeManager 的 create_volume 方法会被调用，它会调用 cinder driver 来创建 volume。</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">该过程显示了 volume 创建过程中，cinder 的三大组件 cinder-api、cinder-scheduler 和 cinder-volume 使用 RabbitMQ 来传递和接收消息来执行操作的过程。</p> 
   <h2 style="font-size:21px;line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;">2. 消息发送机制 （olso.messaging.RPCClient 的 cast 和 call 方法）</h2> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;"><img src="https://images0.cnblogs.com/blog2015/697113/201503/161040185483724.jpg" alt="" style="border:0px;"></p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">几个要点：</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">（0）cast 方法把消息发出去就算了，不需要返回值；call 方法在消息发出后需要等待消息结果返回，因此它在发消息（步骤 27）之前，会创建一个 waiter （步骤26）来等待消息返回。</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">（3）get_transport 方法会使用&nbsp;<a href="https://github.com/openstack/stevedore" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;">stevedore&nbsp;</a>库来加载特定的 messaging driver 类，默认情况下 conf.rpc_backend 的值为 'rabbit'， 因此其对应的 driver 类&nbsp;oslo.messaging._drivers.impl_rabbit.RabbitDriver会被加载；然后生成一个&nbsp;Transport 实例，该实例实际上只是 driver 实例的一个wrapper。</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">（6）初始化 Target 实例，它实际上表明了 message 的目的地，包括消息被发往的地方或者一个应用需要监听的对象。其属性包括：&nbsp; &nbsp; &nbsp;&nbsp;</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;font-size:12px;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,0,255);line-height:1.5;">def</span> <span style="color:rgb(128,0,128);line-height:1.5;">__init__</span>(self, exchange=None, topic=None, namespace=None, version=None, server=None, fanout=<span style="line-height:1.5;">None):
        self.exchange </span>= exchange <span style="color:rgb(0,0,255);line-height:1.5;">//</span><span style="line-height:1.5;"><span style="color:rgb(0,0,255);line-height:1.5;"> MQ 的exchange，使用 cinder.conf 中的定义，默认是 control_exchange : openstack</span>
        self.topic </span>= topic <span style="color:rgb(0,0,255);line-height:1.5;">//</span><span style="line-height:1.5;"><span style="color:rgb(0,0,255);line-height:1.5;">MQ 的 queue，由 cinder.conf 指定： scheduler_topic = cinder-scheduler，volume_topic = cinder-volume&nbsp;</span>
        self.namespace </span>= namespace <span style="color:rgb(0,0,255);line-height:1.5;">//</span><span style="line-height:1.5;"><span style="color:rgb(0,0,255);line-height:1.5;">消息处理类的方法集合，默认是 null</span>
        self.version </span>=<span style="line-height:1.5;"> version
        self.server </span>= server <span style="color:rgb(0,0,255);line-height:1.5;">//</span><span style="line-height:1.5;"><span style="color:rgb(0,0,255);line-height:1.5;">消息的特定目的consumer application，是 cinder 里面的一个消息处理类</span>
        self.fanout </span>= fanout <span style="color:rgb(0,0,255);line-height:1.5;">//一个flag，设置的话，消息将发给所有queue的consumers</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;font-size:12px;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">（15 ~ 21） cast 方法的实现，最终是使用 RabbitMQ 将消息发出去</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">（20 ~ 35）call 方法的实现，在第 27 步将消息发出去之前先创建一个 waiter 来等待返回的消息，它等到返回的消息后会把结果传回到caller。</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;</p> 
   <h2 style="font-size:21px;line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;">&nbsp;3. 消息接收和分发机制 （olso.messaging.RPCDispatcher）</h2> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;"><img src="https://images0.cnblogs.com/blog2015/697113/201503/131710327926778.jpg" alt="" style="border:0px;"></p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">（2~3）cinder-scheduler 和在各节点上的 cinder-volume 作为 service 启动的时候，会初始化并启动一个RPC server，该 server 会监听 message queu并分发消息。</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">（8，30）RPCDispatcher 负责为接收到的 PRC message 调用一个 endpoint 类 的 method。</p> 
   <ul style="list-style:none;font-size:15px;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;">
    <li style="list-style-type:disc;">endpoint 类： 
     <ul style="list-style:none;font-size:12px;">
      <li style="list-style-type:disc;">对 cinder-scheduler 的 rpcapi 发送的消息来说，endpoint 是类 SchedulerManager；</li> 
      <li style="list-style-type:disc;">对 cinder-volume 的 rpcapi 发出的消息来说，endpoint 是类 VolumeManager。</li> 
     </ul></li> 
    <li style="list-style-type:disc;">endpoint 类的方法：被调用的方法名称会在 cast 方法中作为参数传入，比如厦门 create_volume 方法 cast 这个消息后，它会分发到 SchedulerManager 的&nbsp;create_volume 方法。</li> 
   </ul>
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';">
    <pre><span style="color:rgb(0,0,255);line-height:1.5;">//cinder/scheduler/rpcapi.py<br>
def</span> create_volume(self, ctxt, topic, volume_id, snapshot_id=<span style="line-height:1.5;">None, image_id</span>=None, request_spec=<span style="line-height:1.5;">None, filter_properties</span>=<span style="line-height:1.5;">None):
        cctxt </span>= self.client.prepare(version=<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">1.2</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="line-height:1.5;">)
        request_spec_p </span>=<span style="line-height:1.5;"> jsonutils.to_primitive(request_spec)
        </span><span style="color:rgb(0,0,255);line-height:1.5;">return</span> cctxt.cast(ctxt, <span style="color:rgb(0,0,255);line-height:1.5;">'create_volume'</span><span style="line-height:1.5;">, topic</span>=<span style="line-height:1.5;">topic, volume_id</span>=<span style="line-height:1.5;">volume_id, snapshot_id</span>=<span style="line-height:1.5;">snapshot_id, image_id</span>=<span style="line-height:1.5;">image_id, request_spec</span>=<span style="line-height:1.5;">request_spec_p, filter_properties</span>=filter_properties)</pre>
   </div> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;（11，26 ~ 28）EventletExecutor 会初始化一个大小为&nbsp;conf.rpc_thread_pool_size 的线程池，它调用 AMQPListener 的 poll 方法获取 message 后，会在一个线程中调用&nbsp;RPCDispatcher 的 __call__ 方法来调用消息处理方法。</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">（20， 26）AMQPListener 会无限循环去获取 message，直到它被停止。获取到的 message 会被交给&nbsp;EventletExecutor ，它会调用RCPDispatcher的方法将其分发给某个类的某个方法。</p> 
   <h2 style="font-size:21px;line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;">4. Cinder 所用到的 RabbitMQ 组件</h2> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;"><img src="https://images0.cnblogs.com/blog2015/697113/201503/211708315169322.jpg" alt="" style="border:0px;"></p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;"><img src="https://images0.cnblogs.com/blog2015/697113/201503/211709314846410.jpg" alt="" style="border:0px;"></p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">注：有些组件，比如&nbsp;cinder_scheduler.controller 尚不清楚其用途。</p> 
   <h2 style="font-size:21px;line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;">&nbsp;5. 消息示例</h2> 
   <h3 style="font-size:16px;color:rgb(102,102,102);background-image:none;background-repeat:no-repeat;font-family:Verdana;line-height:1.5;">5.1 每个节点上的 cinder-volume 服务向 cinder-scheduler 服务更新其 capabilities 的消息</h3> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;</p> 
   <table border="0" style="border:1px solid #C0C0C0;border-collapse:collapse;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">
    <thead>
     <tr>
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;">消息发送者</td> 
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;">发送频率</td> 
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;">MQ exchange</td> 
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;">消息接收者类</td> 
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;">备注</td> 
     </tr>
    </thead>
    <tbody>
     <tr>
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;">每个cinder-volume 节点上的cinder-volume 服务</td> 
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;">1 分钟</td> 
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;">cinder-scheduler_fanout</td> 
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;">SchedulerManager::update_service_capabilities</td> 
      <td align="left" style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;">cinder-scheduler 的&nbsp;HostManager 类维护一个数组service_states，每个cinder-volume 节点占该数组的一项，其值为该节点上 cinder-volume 服务的 capabilities，该值通过消息机制定期更新。在发生特定操作比如删除卷时，会进行立刻更新。</td> 
     </tr>
    </tbody>
   </table>
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">消息内容示例：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;font-size:12px;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>{u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">_context_domain</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: None, u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">_context_request_id</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">req-c0a0babc-3fec-41fe-ae6a-45418beec8fc</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>, u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">_context_quota_class</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: None, u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">_context_service_catalog</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: [], u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">_context_auth_token</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: <span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">&lt;SANITIZED&gt;</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>, u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">_context_user</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: None, u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">_context_user_id</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: None, u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">_context_is_admin</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: True, u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">version</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">1.0</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>, u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">_context_project_domain</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: None, u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">_context_timestamp</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">2015-03-16T10:13:14.676590</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>, u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">method</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">update_service_capabilities</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>, u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">_context_remote_address</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: None, u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">_context_roles</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: [u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">admin</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>], u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">args</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: <strong>{u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">service_name</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">volume</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>, u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">host</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">network@lvmdriver-network</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>, u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">capabilities</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: {u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">pools</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: [{u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">pool_name</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">lvmbackend</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>, u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">QoS_support</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: False, u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">allocated_capacity_gb</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: <span style="color:rgb(128,0,128);line-height:1.5;">4</span>, u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">free_capacity_gb</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: <span style="color:rgb(128,0,128);line-height:1.5;">0.36</span>, u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">location_info</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">LVMVolumeDriver:network:system:default:0</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>, u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">total_capacity_gb</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: <span style="color:rgb(128,0,128);line-height:1.5;">9.06</span>, u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">reserved_percentage</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>}], u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">driver_version</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">2.0.0</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>, u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">vendor_name</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">Open Source</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>, u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">volume_backend_name</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">lvmbackend</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>, u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">storage_protocol</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">iSCSI</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>}}</strong>, u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">_unique_id</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">f18ce7979c3148ce933ba93ee77e4f47</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>, u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">_context_project_name</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: None, u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">_context_read_deleted</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">no</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>, u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">_context_user_identity</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">- - - - -</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>, u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">_context_tenant</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: None, u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">_context_project_id</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: None, u<span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">_context_user_domain</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span>: None}</pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;font-size:12px;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <h3 style="font-size:16px;color:rgb(102,102,102);background-image:none;background-repeat:no-repeat;font-family:Verdana;line-height:1.5;">&nbsp;5.2 创建卷时 cinder-api 服务发给 cinder-scheduler 服务的消息</h3> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;font-size:12px;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre></pre> 
    <pre><strong>MQ Exchange:</strong> openstack</pre> 
    <pre></pre> 
    <pre><strong>Message body：</strong></pre> 
    <pre><span style="color:rgb(128,0,0);line-height:1.5;">{"oslo.message": "{"_context_domain": null, "_context_request_id": "req-7bb7ff5b-97e5-481a-97d4-c636b2e0687a", "_context_quota_class": null, "_context_service_catalog": [{"endpoints": [{"adminURL": "http://controller:8774/v2/43f66bb82e684bbe9eb9ef6892bd7fd6", "region": "regionOne", "id": "055951b654364d918aaa37bbe365906e", "internalURL": "hhttp://controller:8774/v2/43f66bb82e684bbe9eb9ef6892bd7fd6", "publicURL": "http://controller:8774/v2/43f66bb82e684bbe9eb9ef6892bd7fd6"}], "endpoints_links": [], "type": "compute", "name": "nova"}], "_context_auth_token": "PKIZ_...==", "_context_user_id": "1dc0db32a936496ebfc50be54924a7cc", "_context_is_admin": true, "version": "1.2", "_context_timestamp": "2015-03-21T07:26:33.337831", "_context_project_domain": null, "_context_user": "1dc0db32a936496ebfc50be54924a7cc", "method": "create_volume", "_context_remote_address": "192.168.1.20", "_context_roles": ["admin", "_member_"], "args": {"request_spec": {"source_replicaid": null, "volume_properties": {"status": "creating", "volume_type_id": null, "display_name": null, "volume_metadata": [], "volume_admin_metadata": [], "reservations": ["881c6dda-bf43-4535-952c-1c30ae24de9e", "b0949e21-f7e6-41ac-a8c1-8314e6b4a13d"], "display_description": null, "availability_zone": "az1", "attach_status": "detached", "source_volid": null, "metadata": {}, "source_replicaid": null, "encryption_key_id": null, "consistencygroup_id": null, "replication_status": "disabled", "snapshot_id": null, "user_id": "1dc0db32a936496ebfc50be54924a7cc", "project_id": "43f66bb82e684bbe9eb9ef6892bd7fd6", "id": "89dd8904-b893-42db-b158-7f14c13bf1cc", "size": 1}, "volume_type": {}, "image_id": null, "snapshot_id": null, "consistencygroup_id": null, "source_volid": null, "volume_id": "89dd8904-b893-42db-b158-7f14c13bf1cc"}, "volume_id": "89dd8904-b893-42db-b158-7f14c13bf1cc", "filter_properties": {}, "topic": "cinder-volume", "image_id": null, "snapshot_id": null}, "_unique_id": "73f2789be1124ac095909d7e4e542d8d", "_context_project_name": "admin", "_context_read_deleted": "no", "_context_user_identity": "1dc0db32a936496ebfc50be54924a7cc 43f66bb82e684bbe9eb9ef6892bd7fd6 - - -", "_context_tenant": "43f66bb82e684bbe9eb9ef6892bd7fd6", "_context_project_id": "43f66bb82e684bbe9eb9ef6892bd7fd6", "_context_user_domain": null}", "oslo.version": "2.0"}<br></span></pre> 
    <pre><strong>Message routing_key: </strong><span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">cinder-scheduler</span><span style="color:rgb(128,0,0);line-height:1.5;">'<br></span></pre> 
    <pre><strong>Endpoint method</strong>: SchedulerManager::create_volume</pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;font-size:12px;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <h3 style="font-size:16px;color:rgb(102,102,102);background-image:none;background-repeat:no-repeat;font-family:Verdana;line-height:1.5;">5.3 创建卷时 cinder-scheduler 服务发给某个节点上 cinder-volume 服务的消息</h3> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;font-size:12px;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><strong>MQ Exchange:</strong> openstack</pre> 
    <pre></pre> 
    <pre><strong>Message body：</strong></pre> 
    <pre><span style="color:rgb(128,0,0);line-height:1.5;">'</span><span style="color:rgb(128,0,0);line-height:1.5;">{"oslo.message": "{"_context_domain": null, "_context_request_id": "req-7bb7ff5b-97e5-481a-97d4-c636b2e0687a", "_context_quota_class": null, "_context_service_catalog": [{"endpoints": [{"adminURL": "http://controller:8774/v2/43f66bb82e684bbe9eb9ef6892bd7fd6", "region": "regionOne", "internalURL": "hhttp://controller:8774/v2/43f66bb82e684bbe9eb9ef6892bd7fd6", "id": "055951b654364d918aaa37bbe365906e", "publicURL": "http://controller:8774/v2/43f66bb82e684bbe9eb9ef6892bd7fd6"}], "endpoints_links": [], "type": "compute", "name": "nova"}], "_context_auth_token": "PKIZ_...==", "_context_user_id": "1dc0db32a936496ebfc50be54924a7cc", "_context_is_admin": true, "version": "1.4", "_context_timestamp": "2015-03-21T07:26:33.337831", "_context_project_domain": null, "_context_user": "1dc0db32a936496ebfc50be54924a7cc", "method": "create_volume", "_context_remote_address": "192.168.1.20", "_context_roles": ["admin", "_member_"], "args": {"request_spec": {"source_replicaid": null, "volume_properties": {"status": "creating", "volume_type_id": null, "display_name": null, "availability_zone": "az1", "consistencygroup_id": null, "reservations": ["881c6dda-bf43-4535-952c-1c30ae24de9e", "b0949e21-f7e6-41ac-a8c1-8314e6b4a13d"], "volume_admin_metadata": [], "attach_status": "detached", "display_description": null, "metadata": {}, "source_replicaid": null, "encryption_key_id": null, "volume_metadata": [], "replication_status": "disabled", "snapshot_id": null, "source_volid": null, "user_id": "1dc0db32a936496ebfc50be54924a7cc", "project_id": "43f66bb82e684bbe9eb9ef6892bd7fd6", "id": "89dd8904-b893-42db-b158-7f14c13bf1cc", "size": 1}, "volume_type": {}, "image_id": null, "snapshot_id": null, "consistencygroup_id": null, "source_volid": null, "volume_id": "89dd8904-b893-42db-b158-7f14c13bf1cc", "resource_properties": {"status": "creating", "volume_type_id": null, "user_id": "1dc0db32a936496ebfc50be54924a7cc", "volume_metadata": [], "volume_admin_metadata": [], "reservations": ["881c6dda-bf43-4535-952c-1c30ae24de9e", "b0949e21-f7e6-41ac-a8c1-8314e6b4a13d"], "display_description": null, "availability_zone": "az1", "attach_status": "detached", "source_volid": null, "metadata": {}, "source_replicaid": null, "encryption_key_id": null, "consistencygroup_id": null, "replication_status": "disabled", "snapshot_id": null, "display_name": null, "project_id": "43f66bb82e684bbe9eb9ef6892bd7fd6", "id": "89dd8904-b893-42db-b158-7f14c13bf1cc", "size": 1}}, "source_replicaid": null, "allow_reschedule": true, "filter_properties": {"config_options": {}, "availability_zone": "az1", "request_spec": {"volume_id": "89dd8904-b893-42db-b158-7f14c13bf1cc", "source_replicaid": null, "volume_properties": {"status": "creating", "volume_type_id": null, "display_name": null, "volume_metadata": [], "reservations": ["881c6dda-bf43-4535-952c-1c30ae24de9e", "b0949e21-f7e6-41ac-a8c1-8314e6b4a13d"], "availability_zone": "az1", "user_id": "1dc0db32a936496ebfc50be54924a7cc", "attach_status": "detached", "display_description": null, "id": "89dd8904-b893-42db-b158-7f14c13bf1cc", "replication_status": "disabled", "snapshot_id": null, "encryption_key_id": null, "source_volid": null, "volume_admin_metadata": [], "source_replicaid": null, "project_id": "43f66bb82e684bbe9eb9ef6892bd7fd6", "consistencygroup_id": null, "size": 1, "metadata": {}}, "volume_type": {}, "image_id": null, "consistencygroup_id": null, "source_volid": null, "snapshot_id": null, "resource_properties": {"status": "creating", "volume_type_id": null, "volume_metadata": [], "reservations": ["881c6dda-bf43-4535-952c-1c30ae24de9e", "b0949e21-f7e6-41ac-a8c1-8314e6b4a13d"], "source_volid": null, "consistencygroup_id": null, "replication_status": "disabled", "snapshot_id": null, "user_id": "1dc0db32a936496ebfc50be54924a7cc", "id": "89dd8904-b893-42db-b158-7f14c13bf1cc", "size": 1, "display_name": null, "source_replicaid": null, "availability_zone": "az1", "attach_status": "detached", "display_description": null, "encryption_key_id": null, "volume_admin_metadata": [], "project_id": "43f66bb82e684bbe9eb9ef6892bd7fd6", "metadata": {}}}, "qos_specs": null, "size": 1, "retry": {"num_attempts": 1, "hosts": ["block2@lvmdriver-b21#lvmbackend"]}, "user_id": "1dc0db32a936496ebfc50be54924a7cc", "volume_type": {}, "resource_type": {}, "metadata": {}}, "source_volid": null, "image_id": null, "snapshot_id": null, "consistencygroup_id": null, "volume_id": "89dd8904-b893-42db-b158-7f14c13bf1cc"}, "_unique_id": "e730b03f68cb426f906e39c64e265956", "_context_project_name": "admin", "_context_read_deleted": "no", "_context_user_identity": "1dc0db32a936496ebfc50be54924a7cc 43f66bb82e684bbe9eb9ef6892bd7fd6 - - -", "_context_tenant": "43f66bb82e684bbe9eb9ef6892bd7fd6", "_context_project_id": "43f66bb82e684bbe9eb9ef6892bd7fd6", "_context_user_domain": null}", "oslo.version": "2.0"}</span><span style="color:rgb(128,0,0);line-height:1.5;">'</span></pre> 
    <pre><strong>Message routing_key: </strong>'cinder-volume.block2@lvmdriver-b21'</pre> 
    <pre><strong>Endpoint method</strong>: VolumerManager::create_volume</pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;font-size:12px;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;</p> 
   <h3 style="font-size:16px;color:rgb(102,102,102);background-image:none;background-repeat:no-repeat;font-family:Verdana;line-height:1.5;">5.4 删除卷时 cinder-api 服务发给目的节点上 cinder-volume 服务的消息</h3> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;font-size:12px;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><strong>MQ Exchange:</strong> openstack</pre> 
    <pre><strong>Message body：</strong><br>
{"oslo.message": "{"_context_domain": null, "_context_request_id": "req-a5297b18-7b87-4ea1-914d-0174790a1ca5", "_context_quota_class": null, "_context_service_catalog": [{"endpoints_links": [], "endpoints": [{"adminURL": "http://controller:8774/v2/43f66bb82e684bbe9eb9ef6892bd7fd6", "region": "regionOne", "publicURL": "http://controller:8774/v2/43f66bb82e684bbe9eb9ef6892bd7fd6", "id": "055951b654364d918aaa37bbe365906e", "internalURL": "hhttp://controller:8774/v2/43f66bb82e684bbe9eb9ef6892bd7fd6"}], "type": "compute", "name": "nova"}], "_context_auth_token": "PKIZ_...", "_context_user_id": "1dc0db32a936496ebfc50be54924a7cc", "_context_is_admin": true, "version": "1.15", "_context_timestamp": "2015-03-21T07:16:02.443178", "_context_project_domain": null, "_context_user": "1dc0db32a936496ebfc50be54924a7cc", <strong>"method": "delete_volume"</strong>, "_context_remote_address": "192.168.1.20", "_context_roles": ["admin", "_member_"], "args": {"unmanage_only": false, <strong>"volume_id": "a8a4bf9b-b233-4bd4-9ec4-d132d3b4b0af"}</strong>, "_unique_id": "370304cba81641ee82e8eaf84b519e25", "_context_project_name": "admin", "_context_read_deleted": "no", "_context_user_identity": "1dc0db32a936496ebfc50be54924a7cc 43f66bb82e684bbe9eb9ef6892bd7fd6 - - -", "_context_tenant": "43f66bb82e684bbe9eb9ef6892bd7fd6", "_context_project_id": "43f66bb82e684bbe9eb9ef6892bd7fd6", "_context_user_domain": null}", "oslo.version": "2.0"}<br><br><strong>Message routing_key: </strong>'cinder-volume.block2@lvmdriver-b21'<br><strong>Endpoint method</strong>: VolumeManager::delete_volume</pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;font-size:12px;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;font-size:12px;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><br></a></span>
    </div> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;font-size:12px;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><br></a></span>
    </div> 
    <div class="cnblogs_code_toolbar"> 
     <span class="cnblogs_code_copy" style="line-height:1.5;font-size:12px;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"> </a></span>
     <div class="cnblogs_code_toolbar">
      <a title="复制代码" style="color:rgb(26,139,200);border:none;">&nbsp; &nbsp; 本文转自SammyLiu博客园博客，原文链接：http://www.cnblogs.com/sammyliu/p/4335339.html，如需转载请自行联系原作者</a>
     </div> 
     <a title="复制代码" style="color:rgb(26,139,200);border:none;"> </a>
     <div>
      <a title="复制代码" style="color:rgb(26,139,200);border:none;"><br></a>
     </div> 
     <a title="复制代码" style="color:rgb(26,139,200);border:none;"> </a> 
    </div> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;font-size:12px;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><br></a></span>
    </div> 
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
