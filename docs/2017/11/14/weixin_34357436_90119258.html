<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>高并发应用场景下的负载均衡与故障转移实践，AgileEAS.NET SOA 负载均衡介绍与实践... « NotBeCN</title>
  <meta name="description" content="             一、前言    &nbsp;&nbsp;&nbsp;&nbsp; AgileEAS.NET SOA 中间件平台是一款基于基于敏捷并行开发思想和Microsoft .Net构件(组件)开发技术而构建的一个快速开发应用平台。用于帮助中小型软件企业建立一条适合市场快速变化的开发团队，以达到节省...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/14/weixin_34357436_90119258.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">高并发应用场景下的负载均衡与故障转移实践，AgileEAS.NET SOA 负载均衡介绍与实践...</h1>
    <p class="post-meta">Nov 14, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <h1 style="font-size:28px;line-height:1.5;font-family:Verdana, Arial, Helvetica, sans-serif;">一、前言</h1> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; AgileEAS.NET SOA 中间件平台是一款基于基于敏捷并行开发思想和Microsoft .Net构件(组件)开发技术而构建的一个快速开发应用平台。用于帮助中小型软件企业建立一条适合市场快速变化的开发团队，以达到节省开发成本、缩短开发时间，快速适应市场变化的目的。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; AgileEAS.NET SOA中间件平台提供了敏捷快速开发软件工程的最佳实践，通过提供大量的基础支撑功能如IOC、ORM、SOA、分布式体系及敏捷并发开发方法所支撑的插件开发体系，以及提供了大量的实体、数据模型设计生成工具、代码生成工具，用于帮助中小软件开发商快速成长。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><img src="https://images.cnblogs.com/cnblogs_com/eastjade/AgileEAS.NET.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; AgileEAS.NET平台充分把握目前软件行业快速发展的新趋势，基于敏捷并行开发、快速适应市场这样淳朴的软件工程实践，采用业界广泛使用的Microsoft .Net构件(组件)开发技术实践了这种开发思想，帮助软件企业实现“敏捷变化、快速适合”的目标，从而帮助软件企业在激烈的市场竞争中赢得先机并获得更高的回报。</p> 
   <h1 style="font-size:28px;line-height:1.5;font-family:Verdana, Arial, Helvetica, sans-serif;">二、关于AgileEAS.NET SOA中间件的分布式结构</h1> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; AgileEAS.NET SOA中间件平台吸吸引人的一个特色就是其分布式架构体系，其可以基于高层的WCF协议和底层的.NET Socket通信建设统一一致的分布式通信服务，如下图所示的分布式结构：</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><a href="https://images0.cnblogs.com/blog/19020/201312/19185611-ca6cc597c87843a8ac7df1048a410847.png" rel="nofollow" style="color:#008000;text-decoration:none;"><img title="image_thumb[5]" src="https://images0.cnblogs.com/blog/19020/201312/19185614-ed6478a5230e4ae58b0091cb6580c1dd.png" alt="image_thumb[5]" width="762" height="458" style="border:0px;background-image:none;"></a></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; 系统中所有的客户端业务处理请求都经由AppServer处理之后返回结果给客户端，这个一个极其经典的SOA架构的分布式结构。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; 当系统的业务运行量大到一台AppServer无法满足情况下，那么我们就要考虑纵向扩展或者横向扩展以满足系统性能和业务响应的问题，最常用的选择是横向扩展，使用负载均衡机制以确保业务请求由多台AppServer完成；以及对系统的可靠性要求很高的时候，因为只有一台AppServer如果AppServer宕机了，那么整个系统都无法运行。我们就必须的考虑整个系统的故障切换能力，以确定系统的高可用性，系统的架构就会衍生为以下结构：</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><a href="https://images0.cnblogs.com/blog/19020/201312/19185615-16cfea2e0d154b29be0acda1084acfd7.png" rel="nofollow" style="color:#008000;text-decoration:none;"><img title="image_thumb[11]" src="https://images0.cnblogs.com/blog/19020/201312/19185617-bcc609396d824a838ea93e7e665bbb7f.png" alt="image_thumb[11]" width="953" height="434" style="border:0px;background-image:none;"></a></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; 可以对比发布，前面架构图之中的AppServer已经由一台NlbServer和多台AppServer组成的服务器组合替换，系统之中不再存在当AppServer宕机之后系统无法服务的问题，也解决了随着业务量增加动态扩容的问题。</p> 
   <h1 style="font-size:28px;line-height:1.5;font-family:Verdana, Arial, Helvetica, sans-serif;">三、AgileEAS.NET SOA平台NLB支持</h1> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; AgileEAS.NET SOA中间件平台的AppServer支持程序为<span style="color:rgb(255,0,0);"><strong>EAS.SOA.Server.exe</strong></span>或<span style="color:rgb(255,0,0);"><strong>EAS.SOA.Server.x64.exe</strong></span>，其中<span style="color:rgb(255,0,0);"><strong>EAS.SOA.Server.exe</strong></span>为32位服务程序，<span style="color:rgb(255,0,0);"><strong>EAS.SOA.Server.x64.exe</strong></span>为64位服务程序。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; AppServer能在同一个进程之内同时支持Socket通信和WCF通信，即能同样的业务同步提供Socket和WCF通信方式，WCF通信提供http和net.tcp通道的访问，客户端应用使用何种通信方式由客户段程序决定。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; AgileEAS.NET SOA中间件平台的在5.0版本之后增加了一个应用负载均衡服务程序<span style="color:rgb(255,0,0);">EAS.NLB.Server</span>，也同样提供了32位与64位的服务应用程序<strong><span style="color:rgb(255,0,0);">EAS.NLB.Server.exe</span></strong>或<strong><span style="color:rgb(255,0,0);">EAS.NLB.Server.x64.exe</span>。</strong></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; 在AgileEAS.NET SOA中间件平台5.0版本之中为AppServer、NLB.Server提供了运行监控程序，NLB.Server的服务监控程序同时提供了NLB.Server的配置管理功能：</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><a href="https://images0.cnblogs.com/blog/19020/201312/19185618-4b386da9b7bb442c8e85b8a3875c0971.jpg" rel="nofollow" style="color:#008000;text-decoration:none;"><img title="EVR~2]%N9Q~23S(CCT3]Q_C_thumb[2]" src="https://images0.cnblogs.com/blog/19020/201312/19185622-0951368483e746dd8afbe19125c11aa6.jpg" alt="EVR~2]%N9Q~23S(CCT3]Q_C_thumb[2]" width="595" height="453" style="border:0px;background-image:none;"></a></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; 负载节点监控，会监控NLBServer后挂接的所有AppServer清单以及各个AppServer服务器的工作状态，是在线还是离线，在线的则能向客户端提供服务，如果离线了则表示不能向客户端提供服务了，在NLBServer负载过程之中，只会在在线的AppServr之间进行负载。</p> 
   <h1 style="font-size:28px;line-height:1.5;font-family:Verdana, Arial, Helvetica, sans-serif;">四、AgileEAS.NET NLBServer配置案例</h1> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; 在第三节我们已经对NLB做过一些简单的介绍，接下来我们以<a href="http://www.smarteas.net/page/DrugShop_Case.aspx" rel="nofollow" style="color:#008000;text-decoration:none;">DrugShop案例</a>环境为基础实例演示一下如何在应用环境之中启用NLBServer支持：</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; 首先我们简单规划一下测试环境：</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><a href="https://images0.cnblogs.com/blog/19020/201312/19185624-ea3d2da5ce5a492d930d2230fa8e01e5.png" rel="nofollow" style="color:#008000;text-decoration:none;"><img title="image_thumb[16]" src="https://images0.cnblogs.com/blog/19020/201312/19185625-6136a48d5cbb44bca497ea9d89994f9e.png" alt="image_thumb[16]" width="930" height="535" style="border:0px;background-image:none;"></a></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; 接下为我们一一配置，首先，我们参考<a href="http://www.cnblogs.com/eastjade/p/3406150.html" rel="nofollow" style="color:#008000;text-decoration:none;">AgileEAS.NET SOA 中间件平台5.2版本下载、配置学习(二)：配置WinClient分布式运行环境</a>一文配置好一个AppServer实例AppServer1，端口号设置Socket：6706,Wcf-tcp:6707,Wcf-http:6708：</p> 
   <div style="font-size:8pt;font-family:'Courier New', courier, monospace;line-height:12pt;border:1px solid #C0C0C0;"> 
    <div style="font-size:8pt;line-height:12pt;border-style:none;"> 
     <pre><span style="color:rgb(96,96,96);">   1:</span> <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">appserver</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   2:</span>   <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">channel</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   3:</span>     <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">wcf</span> <span style="color:rgb(255,0,0);">enable</span><span style="color:rgb(0,0,255);">="true"</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   4:</span>       <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">config</span> <span style="color:rgb(255,0,0);">tcpPort</span><span style="color:rgb(0,0,255);">="6707"</span> <span style="color:rgb(255,0,0);">httpPort</span><span style="color:rgb(0,0,255);">="6708"</span><span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   5:</span>       <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">serviceThrottling</span> <span style="color:rgb(255,0,0);">maxConcurrentCalls</span><span style="color:rgb(0,0,255);">="128"</span> <span style="color:rgb(255,0,0);">maxConcurrentInstances</span><span style="color:rgb(0,0,255);">="128"</span> <span style="color:rgb(255,0,0);">maxConcurrentSessions</span><span style="color:rgb(0,0,255);">="256"</span><span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   6:</span>       <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">wcfServices</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   7:</span>         <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">wcfService</span> <span style="color:rgb(255,0,0);">key</span><span style="color:rgb(0,0,255);">="Key"</span> <span style="color:rgb(255,0,0);">type</span><span style="color:rgb(0,0,255);">="TValue"</span><span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   8:</span>       <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">wcfServices</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   9:</span>     <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">wcf</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  10:</span>     <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">socket</span> <span style="color:rgb(255,0,0);">enable</span> <span style="color:rgb(0,0,255);">="true"</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  11:</span>       <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">config</span> <span style="color:rgb(255,0,0);">tcpPort</span><span style="color:rgb(0,0,255);">="6706"</span><span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  12:</span>       <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">serviceThrottling</span> <span style="color:rgb(255,0,0);">maxConcurrence</span><span style="color:rgb(0,0,255);">="1024"</span><span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  13:</span>       <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">socketServices</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  14:</span>         <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">socketService</span> <span style="color:rgb(255,0,0);">key</span><span style="color:rgb(0,0,255);">="IMSocketService"</span> <span style="color:rgb(255,0,0);">type</span><span style="color:rgb(0,0,255);">="AgileIM.Service.IMSocketService,AgileIM.Service"</span><span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  15:</span>       <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">socketServices</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  16:</span>     <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">socket</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  17:</span>   <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">channel</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  18:</span>   <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">appServices</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  19:</span>     <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">appService</span> <span style="color:rgb(255,0,0);">key</span><span style="color:rgb(0,0,255);">="Key"</span> <span style="color:rgb(255,0,0);">type</span><span style="color:rgb(0,0,255);">="TValue"</span><span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  20:</span>   <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">appServices</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  21:</span> <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">appserver</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; 然后复制配置好的AppServer目录到其他地方建立AppSerer2，端口信息修改为Socket：6706,Wcf-tcp:6707,Wcf-http:6708：</p> 
   <div style="font-size:8pt;font-family:'Courier New', courier, monospace;line-height:12pt;border:1px solid #C0C0C0;"> 
    <div style="font-size:8pt;line-height:12pt;border-style:none;"> 
     <pre><span style="color:rgb(96,96,96);">   1:</span> <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">channel</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   2:</span>   <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">wcf</span> <span style="color:rgb(255,0,0);">enable</span><span style="color:rgb(0,0,255);">="true"</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   3:</span>     <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">config</span> <span style="color:rgb(255,0,0);">tcpPort</span><span style="color:rgb(0,0,255);">="6807"</span> <span style="color:rgb(255,0,0);">httpPort</span><span style="color:rgb(0,0,255);">="6808"</span><span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   4:</span>     <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">serviceThrottling</span> <span style="color:rgb(255,0,0);">maxConcurrentCalls</span><span style="color:rgb(0,0,255);">="128"</span> <span style="color:rgb(255,0,0);">maxConcurrentInstances</span><span style="color:rgb(0,0,255);">="128"</span> <span style="color:rgb(255,0,0);">maxConcurrentSessions</span><span style="color:rgb(0,0,255);">="256"</span><span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   5:</span>     <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">wcfServices</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   6:</span>       <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">wcfService</span> <span style="color:rgb(255,0,0);">key</span><span style="color:rgb(0,0,255);">="Key"</span> <span style="color:rgb(255,0,0);">type</span><span style="color:rgb(0,0,255);">="TValue"</span><span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   7:</span>     <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">wcfServices</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   8:</span>   <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">wcf</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   9:</span>   <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">socket</span> <span style="color:rgb(255,0,0);">enable</span> <span style="color:rgb(0,0,255);">="true"</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  10:</span>     <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">config</span> <span style="color:rgb(255,0,0);">tcpPort</span><span style="color:rgb(0,0,255);">="6806"</span><span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  11:</span>     <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">serviceThrottling</span> <span style="color:rgb(255,0,0);">maxConcurrence</span><span style="color:rgb(0,0,255);">="1024"</span><span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  12:</span>     <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">socketServices</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  13:</span>       <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">socketService</span> <span style="color:rgb(255,0,0);">key</span><span style="color:rgb(0,0,255);">="IMSocketService"</span> <span style="color:rgb(255,0,0);">type</span><span style="color:rgb(0,0,255);">="AgileIM.Service.IMSocketService,AgileIM.Service"</span><span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  14:</span>     <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">socketServices</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  15:</span>   <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">socket</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  16:</span> <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">channel</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  17:</span> <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">appServices</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  18:</span>   <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">appService</span> <span style="color:rgb(255,0,0);">key</span><span style="color:rgb(0,0,255);">="Key"</span> <span style="color:rgb(255,0,0);">type</span><span style="color:rgb(0,0,255);">="TValue"</span><span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  19:</span> <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">appServices</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  20:</span> appserver<span style="color:rgb(0,0,255);">&gt;</span></pre> 
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; 同样复制AppServer目录配置NlbServer，NlbServer服务目前没有配置工具，只能自己修改配置文件EAS.NLB.Server.exe.config或者EAS.NLB.Server.x64.exe.config：</p> 
   <div style="font-size:8pt;font-family:'Courier New', courier, monospace;line-height:12pt;border:1px solid #C0C0C0;"> 
    <div style="font-size:8pt;line-height:12pt;border-style:none;"> 
     <pre><span style="color:rgb(96,96,96);">   1:</span> <span style="color:rgb(0,0,255);">&lt;?</span><span style="color:rgb(128,0,0);">xml</span> <span style="color:rgb(255,0,0);">version</span><span style="color:rgb(0,0,255);">="1.0"</span>?<span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   2:</span> <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">configuration</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   3:</span>   <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">configSections</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   4:</span>     <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">section</span> <span style="color:rgb(255,0,0);">name</span><span style="color:rgb(0,0,255);">="eas"</span> <span style="color:rgb(255,0,0);">type</span><span style="color:rgb(0,0,255);">="EAS.ConfigHandler,EAS.MicroKernel"</span><span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   5:</span>   <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">configSections</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   6:</span>   <span style="color:rgb(0,128,0);">&lt;!--支持混合程序集--&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   7:</span>   <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">startup</span> <span style="color:rgb(255,0,0);">useLegacyV2RuntimeActivationPolicy</span><span style="color:rgb(0,0,255);">="true"</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   8:</span>     <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">supportedRuntime</span> <span style="color:rgb(255,0,0);">version</span><span style="color:rgb(0,0,255);">="v4.0"</span><span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   9:</span>   <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">startup</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  10:</span>   <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">eas</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  11:</span>     <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">configurations</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  12:</span>       <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">item</span> <span style="color:rgb(255,0,0);">name</span><span style="color:rgb(0,0,255);">="Key"</span>  <span style="color:rgb(255,0,0);">value</span><span style="color:rgb(0,0,255);">="Value"</span><span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  13:</span>     <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">configurations</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  14:</span>     <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">nlbserver</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  15:</span>       <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">config</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  16:</span>         <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">keepAlive</span> <span style="color:rgb(255,0,0);">timeSpan</span><span style="color:rgb(0,0,255);">="6"</span> <span style="color:rgb(255,0,0);">chnanel</span><span style="color:rgb(0,0,255);">="WCF"</span><span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  17:</span>       <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">config</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  18:</span>       <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">channel</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  19:</span>         <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">wcf</span> <span style="color:rgb(255,0,0);">enable</span><span style="color:rgb(0,0,255);">="true"</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  20:</span>           <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">config</span> <span style="color:rgb(255,0,0);">tcpPort</span><span style="color:rgb(0,0,255);">="6607"</span> <span style="color:rgb(255,0,0);">httpPort</span><span style="color:rgb(0,0,255);">="6608"</span><span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  21:</span>           <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">serviceThrottling</span> <span style="color:rgb(255,0,0);">maxConcurrentCalls</span><span style="color:rgb(0,0,255);">="128"</span> <span style="color:rgb(255,0,0);">maxConcurrentInstances</span><span style="color:rgb(0,0,255);">="128"</span> <span style="color:rgb(255,0,0);">maxConcurrentSessions</span><span style="color:rgb(0,0,255);">="256"</span><span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  22:</span>           <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">wcfServices</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  23:</span>             <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">wcfService</span> <span style="color:rgb(255,0,0);">key</span><span style="color:rgb(0,0,255);">="Key"</span> <span style="color:rgb(255,0,0);">type</span><span style="color:rgb(0,0,255);">="TValue"</span><span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  24:</span>           <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">wcfServices</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  25:</span>         <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">wcf</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  26:</span>         <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">socket</span> <span style="color:rgb(255,0,0);">enable</span> <span style="color:rgb(0,0,255);">="true"</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  27:</span>           <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">config</span> <span style="color:rgb(255,0,0);">tcpPort</span><span style="color:rgb(0,0,255);">="6606"</span> <span style="color:rgb(255,0,0);">gatewayStyle</span><span style="color:rgb(0,0,255);">="NetPacket"</span><span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  28:</span>           <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">serviceThrottling</span> <span style="color:rgb(255,0,0);">maxConcurrence</span><span style="color:rgb(0,0,255);">="10000"</span><span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  29:</span>         <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">socket</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  30:</span>       <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">channel</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  31:</span>     <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">nlbserver</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  32:</span>     <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">objects</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  33:</span>       <span style="color:rgb(0,128,0);">&lt;!--NLB日志记录--&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  34:</span>       <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">object</span> <span style="color:rgb(255,0,0);">name</span><span style="color:rgb(0,0,255);">="Logger"</span> <span style="color:rgb(255,0,0);">assembly</span><span style="color:rgb(0,0,255);">="EAS.MicroKernel"</span> <span style="color:rgb(255,0,0);">type</span><span style="color:rgb(0,0,255);">="EAS.Loggers.TextLogger"</span> <span style="color:rgb(255,0,0);">LifestyleType</span><span style="color:rgb(0,0,255);">="Singleton"</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  35:</span>         <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">property</span> <span style="color:rgb(255,0,0);">name</span><span style="color:rgb(0,0,255);">="Path"</span> <span style="color:rgb(255,0,0);">type</span><span style="color:rgb(0,0,255);">="string"</span> <span style="color:rgb(255,0,0);">value</span><span style="color:rgb(0,0,255);">="..\logs"</span> <span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  36:</span>       <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">object</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  37:</span>     <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">objects</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  38:</span>   <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">eas</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  39:</span>   <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">startup</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  40:</span>     <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">supportedRuntime</span> <span style="color:rgb(255,0,0);">version</span><span style="color:rgb(0,0,255);">="v4.0"</span> <span style="color:rgb(255,0,0);">sku</span><span style="color:rgb(0,0,255);">=".NETFramework,Version=v4.0"</span><span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  41:</span>   <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">startup</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  42:</span> <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">configuration</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; 配置其端口号为6606,Wcf-tcp:6607,Wcf-http:6608，配置完成后参考<a href="http://www.cnblogs.com/eastjade/p/3406150.html" rel="nofollow" style="color:#008000;text-decoration:none;">AgileEAS.NET SOA 中间件平台5.2版本下载、配置学习(二)：配置WinClient分布式运行环境</a>一文编写AppServer服务的安装、卸载和控制台启动脚本。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; NLBServer的安装卸载和控制台启动脚本类似，都是由EAS.NLB.Server.exe -参数组成，只不过，EAS.NLB.Server只能支持在一台服务器安装一个实例，即同一台服务不充许像AppServer一样安装多个实现，以下是脚本示例：</p> 
   <div style="font-size:8pt;font-family:'Courier New', courier, monospace;line-height:12pt;border:1px solid #C0C0C0;"> 
    <div style="font-size:8pt;line-height:12pt;border-style:none;"> 
     <pre><span style="color:rgb(96,96,96);">   1:</span> @rem 安装NLB服务</pre> 
     <pre><span style="color:rgb(96,96,96);">   2:</span> EAS.NLB.Server.x64.exe -i</pre> 
     <pre><span style="color:rgb(96,96,96);">   3:</span>&nbsp; </pre> 
     <pre><span style="color:rgb(96,96,96);">   4:</span> @rem 卸载NLB服务</pre> 
     <pre><span style="color:rgb(96,96,96);">   5:</span> EAS.NLB.Server.x64.exe -u</pre> 
     <pre><span style="color:rgb(96,96,96);">   6:</span>&nbsp; </pre> 
     <pre><span style="color:rgb(96,96,96);">   7:</span> @rem 控制台启动NLB服务</pre> 
     <pre><span style="color:rgb(96,96,96);">   8:</span> EAS.NLB.Server.x64.exe -run</pre> 
     <pre><span style="color:rgb(96,96,96);">   9:</span> pause</pre> 
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; OK，我们启动NLBServer和AppServer1、AppServer2：</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><a href="https://images0.cnblogs.com/blog/19020/201312/19185627-aecbfeb68b3941daae9510ba77a99b3f.jpg" rel="nofollow" style="color:#008000;text-decoration:none;"><img title="Q%}BF5G[24(YQ5S}WJ5U64N_thumb[2]" src="https://images0.cnblogs.com/blog/19020/201312/19185630-6922233ae986463f934815a444fad362.jpg" alt="Q%}BF5G[24(YQ5S}WJ5U64N_thumb[2]" width="754" height="694" style="border:0px;background-image:none;"></a></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; 接下来我们在客户端文件夹之中启动“<span style="color:rgb(255,0,0);font-size:large;"><strong>负载均衡监控</strong></span>”程序<span style="font-size:large;"><strong>EAS.NLB.Monitor.exe</strong></span>配置负载均衡服务的负载节点:</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><a href="https://images0.cnblogs.com/blog/19020/201312/19185631-f45358abbe944eaf9a5db41473ff3282.jpg" rel="nofollow" style="color:#008000;text-decoration:none;"><img title="1EM465}RP@9MM~Z}1~536WX_thumb[2]" src="https://images0.cnblogs.com/blog/19020/201312/19185632-48ac07be0d8f40eab0f8f2256ef1e482.jpg" alt="1EM465}RP@9MM~Z}1~536WX_thumb[2]" width="562" height="299" style="border:0px;background-image:none;"></a></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp; 在服务连接之中选择新建连接，弹出新建连接对话框：</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><a href="https://images0.cnblogs.com/blog/19020/201312/19185633-4964d843bdc5416fb6cf2b0de048235e.jpg" rel="nofollow" style="color:#008000;text-decoration:none;"><img title="G{M}}~FK}%N]1%U3]91RN)9_thumb[2]" src="https://images0.cnblogs.com/blog/19020/201312/19185634-884772003dc14fd5a45feadd6e669c1a.jpg" alt="G{M}}~FK}%N]1%U3]91RN)9_thumb[2]" width="555" height="302" style="border:0px;background-image:none;"></a></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp; 修改连接名为nlbServer，服务器为127.0.0.1，即连接本机nlbserver，实际情况之中请根据实际情况配置，端口号填入前面配置的NlbServer端口参数，我们此处选择以wcf-tcp连接，端口配置为6607,然后确定保存配置，并且进入“<strong><span style="color:rgb(255,0,0);font-size:large;">负载均衡监控</span></strong>”主界面：</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><a href="https://images0.cnblogs.com/blog/19020/201312/19185636-147be5e0d38441e3ac7c2cae14c1793e.jpg" rel="nofollow" style="color:#008000;text-decoration:none;"><img title="ORHRE8PQAQ_QB$%6P)S3W]O_thumb[2]" src="https://images0.cnblogs.com/blog/19020/201312/19185639-d40706a5dfde44258c5b41de86347957.jpg" alt="ORHRE8PQAQ_QB$%6P)S3W]O_thumb[2]" width="836" height="561" style="border:0px;background-image:none;"></a></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; “<strong><span style="color:rgb(255,0,0);font-size:large;">负载均衡监控</span></strong>”第一个界面为负载均衡服务器的CPU、内存、网络、磁盘等各种资源参数，供管理人员参考，我们切换到负载节点监控：</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><a href="https://images0.cnblogs.com/blog/19020/201312/19185640-a25d6b61062846bf92065775735710d2.jpg" rel="nofollow" style="color:#008000;text-decoration:none;"><img title="KCWX$_PF%U~26QL91(S01@D_thumb[2]" src="https://images0.cnblogs.com/blog/19020/201312/19185641-06ced1272cc24b8f84da90a56130baa0.jpg" alt="KCWX$_PF%U~26QL91(S01@D_thumb[2]" width="708" height="493" style="border:0px;background-image:none;"></a></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; 在空白区域右键打开快捷菜单点=&gt;"添加节点"：</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><a href="https://images0.cnblogs.com/blog/19020/201312/19185642-b9be36e88e334dafa2e6d3c302ae9fb5.jpg" rel="nofollow" style="color:#008000;text-decoration:none;"><img title="67J016R(545M1K`}](F@WQC_thumb[2] " src="https://images0.cnblogs.com/blog/19020/201312/19185643-5a3bb58cdd294b76ad6ae0a5189521a6.jpg" alt="67J016R(545M1K`}](F@WQC_thumb[2] " width="420" height="246" style="border:0px;background-image:none;"></a></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; 根据AppServer参数添加负载节点信息，确定后保存负载节点信息，使用同样的方法添加AppSever2节点，完成后如下图：</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><a href="https://images0.cnblogs.com/blog/19020/201312/19185644-54d5585ff48d441984069f3be8f01e6d.jpg" rel="nofollow" style="color:#008000;text-decoration:none;"><img title="854$8TM3F0@9KHCY29GQ9}X_thumb[2]" src="https://images0.cnblogs.com/blog/19020/201312/19185645-c02ae33d096d4feb9460fd02813b6533.jpg" alt="854$8TM3F0@9KHCY29GQ9}X_thumb[2]" width="617" height="411" style="border:0px;background-image:none;"></a></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; 也可以选择直接修改配置配置负载节点信息，负载节点信息存储在NlbServer工作目录中的“<span style="color:rgb(255,0,0);"><strong>NLB.config”</strong></span>文件：</p> 
   <div style="font-size:8pt;font-family:'Courier New', courier, monospace;line-height:12pt;border:1px solid #C0C0C0;"> 
    <div style="font-size:8pt;line-height:12pt;border-style:none;"> 
     <pre><span style="color:rgb(96,96,96);">   1:</span> <span style="color:rgb(0,0,255);">&lt;?</span><span style="color:rgb(128,0,0);">xml</span> <span style="color:rgb(255,0,0);">version</span><span style="color:rgb(0,0,255);">="1.0"</span> <span style="color:rgb(255,0,0);">encoding</span><span style="color:rgb(0,0,255);">="utf-16"</span>?<span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   2:</span> <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">NLB</span> <span style="color:rgb(255,0,0);">xmlns:xsd</span><span style="color:rgb(0,0,255);">="http://www.w3.org/2001/XMLSchema"</span> <span style="color:rgb(255,0,0);">xmlns:xsi</span><span style="color:rgb(0,0,255);">="http://www.w3.org/2001/XMLSchema-instance"</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   3:</span>   <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">items</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   4:</span>     <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">NlbWorkItem</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   5:</span>       <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">host</span><span style="color:rgb(0,0,255);">&gt;</span>127.0.0.1<span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">host</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   6:</span>       <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">wcfChannel</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   7:</span>         <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">HttpPort</span><span style="color:rgb(0,0,255);">&gt;</span>6708<span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">HttpPort</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   8:</span>         <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">TcpPort</span><span style="color:rgb(0,0,255);">&gt;</span>6707<span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">TcpPort</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   9:</span>       <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">wcfChannel</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  10:</span>       <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">socketChannel</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  11:</span>         <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">TcpPort</span><span style="color:rgb(0,0,255);">&gt;</span>6706<span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">TcpPort</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  12:</span>       <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">socketChannel</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  13:</span>       <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">enabled</span><span style="color:rgb(0,0,255);">&gt;</span>true<span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">enabled</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  14:</span>       <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">runing</span><span style="color:rgb(0,0,255);">&gt;</span>true<span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">runing</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  15:</span>     <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">NlbWorkItem</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  16:</span>     <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">NlbWorkItem</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  17:</span>       <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">host</span><span style="color:rgb(0,0,255);">&gt;</span>127.0.0.1<span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">host</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  18:</span>       <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">wcfChannel</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  19:</span>         <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">HttpPort</span><span style="color:rgb(0,0,255);">&gt;</span>6808<span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">HttpPort</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  20:</span>         <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">TcpPort</span><span style="color:rgb(0,0,255);">&gt;</span>6807<span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">TcpPort</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  21:</span>       <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">wcfChannel</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  22:</span>       <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">socketChannel</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  23:</span>         <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">TcpPort</span><span style="color:rgb(0,0,255);">&gt;</span>6806<span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">TcpPort</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  24:</span>       <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">socketChannel</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  25:</span>       <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">enabled</span><span style="color:rgb(0,0,255);">&gt;</span>true<span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">enabled</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  26:</span>       <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">runing</span><span style="color:rgb(0,0,255);">&gt;</span>false<span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">runing</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  27:</span>     <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">NlbWorkItem</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  28:</span>   <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">items</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  29:</span> <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">NLB</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; OK，现在已经完成了对负载均衡的配置，接下来我们配置客户端程序“DrugShop.Main.exe”的连接信息,可以选择由配置工具生成，也可以选择手工书写，定义为SOA分布式环境下wcf-tcp连接,连接端口为127.0.0.1:6607(NLBServer)，配置文件如下：</p> 
   <div style="font-size:8pt;font-family:'Courier New', courier, monospace;line-height:12pt;border:1px solid #C0C0C0;"> 
    <div style="font-size:8pt;line-height:12pt;border-style:none;"> 
     <pre><span style="color:rgb(96,96,96);">   1:</span> <span style="color:rgb(0,0,255);">&lt;?</span><span style="color:rgb(128,0,0);">xml</span> <span style="color:rgb(255,0,0);">version</span><span style="color:rgb(0,0,255);">="1.0"</span> <span style="color:rgb(255,0,0);">encoding</span><span style="color:rgb(0,0,255);">="utf-8"</span>?<span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   2:</span> <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">configuration</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   3:</span>   <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">configSections</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   4:</span>     <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">section</span> <span style="color:rgb(255,0,0);">name</span><span style="color:rgb(0,0,255);">="eas"</span> <span style="color:rgb(255,0,0);">type</span><span style="color:rgb(0,0,255);">="EAS.ConfigHandler,EAS.MicroKernel"</span> <span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   5:</span>   <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">configSections</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   6:</span>   <span style="color:rgb(0,128,0);">&lt;!--SQLite运行必需--&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   7:</span>   <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">startup</span> <span style="color:rgb(255,0,0);">useLegacyV2RuntimeActivationPolicy</span><span style="color:rgb(0,0,255);">="true"</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   8:</span>     <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">supportedRuntime</span> <span style="color:rgb(255,0,0);">version</span><span style="color:rgb(0,0,255);">="v4.0"</span><span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">   9:</span>   <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">startup</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  10:</span>   <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">eas</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  11:</span>     <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">configurations</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  12:</span>       <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">item</span> <span style="color:rgb(255,0,0);">name</span><span style="color:rgb(0,0,255);">="Key"</span> <span style="color:rgb(255,0,0);">value</span><span style="color:rgb(0,0,255);">="Value"</span> <span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  13:</span>     <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">configurations</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  14:</span>     <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">objects</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  15:</span>       <span style="color:rgb(0,128,0);">&lt;!--分布式通信组件。--&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  16:</span>       <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">object</span> <span style="color:rgb(255,0,0);">name</span><span style="color:rgb(0,0,255);">="ServiceBridger"</span> <span style="color:rgb(255,0,0);">assembly</span><span style="color:rgb(0,0,255);">="EAS.Distributed"</span> <span style="color:rgb(255,0,0);">type</span><span style="color:rgb(0,0,255);">="EAS.Distributed.ServiceBridger"</span> <span style="color:rgb(255,0,0);">LifestyleType</span><span style="color:rgb(0,0,255);">="Thread"</span> <span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  17:</span>         <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">property</span> <span style="color:rgb(255,0,0);">name</span><span style="color:rgb(0,0,255);">="ServiceName"</span> <span style="color:rgb(255,0,0);">type</span><span style="color:rgb(0,0,255);">="string"</span> <span style="color:rgb(255,0,0);">value</span><span style="color:rgb(0,0,255);">="EAS.RMI.Service"</span> <span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  18:</span>       <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">object</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  19:</span>       <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">object</span> <span style="color:rgb(255,0,0);">name</span><span style="color:rgb(0,0,255);">="DataAccessor"</span> <span style="color:rgb(255,0,0);">assembly</span><span style="color:rgb(0,0,255);">="EAS.Distributed"</span> <span style="color:rgb(255,0,0);">type</span><span style="color:rgb(0,0,255);">="EAS.Distributed.DataAccessor"</span> <span style="color:rgb(255,0,0);">LifestyleType</span><span style="color:rgb(0,0,255);">="Thread"</span> <span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  20:</span>         <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">property</span> <span style="color:rgb(255,0,0);">name</span><span style="color:rgb(0,0,255);">="ServiceBridger"</span> <span style="color:rgb(255,0,0);">type</span><span style="color:rgb(0,0,255);">="object"</span> <span style="color:rgb(255,0,0);">value</span><span style="color:rgb(0,0,255);">="ServiceBridger"</span> <span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  21:</span>       <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">object</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  22:</span>       <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">object</span> <span style="color:rgb(255,0,0);">name</span><span style="color:rgb(0,0,255);">="OrmAccessor"</span> <span style="color:rgb(255,0,0);">assembly</span><span style="color:rgb(0,0,255);">="EAS.Distributed"</span> <span style="color:rgb(255,0,0);">type</span><span style="color:rgb(0,0,255);">="EAS.Distributed.OrmAccessor"</span> <span style="color:rgb(255,0,0);">LifestyleType</span><span style="color:rgb(0,0,255);">="Thread"</span> <span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  23:</span>         <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">property</span> <span style="color:rgb(255,0,0);">name</span><span style="color:rgb(0,0,255);">="ServiceBridger"</span> <span style="color:rgb(255,0,0);">type</span><span style="color:rgb(0,0,255);">="object"</span> <span style="color:rgb(255,0,0);">value</span><span style="color:rgb(0,0,255);">="ServiceBridger"</span> <span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  24:</span>         <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">property</span> <span style="color:rgb(255,0,0);">name</span><span style="color:rgb(0,0,255);">="DataAccessor"</span> <span style="color:rgb(255,0,0);">type</span><span style="color:rgb(0,0,255);">="object"</span> <span style="color:rgb(255,0,0);">value</span><span style="color:rgb(0,0,255);">="DataAccessor"</span> <span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  25:</span>       <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">object</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  26:</span>       <span style="color:rgb(0,128,0);">&lt;!--日志管理--&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  27:</span>       <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">object</span> <span style="color:rgb(255,0,0);">name</span><span style="color:rgb(0,0,255);">="Logger"</span> <span style="color:rgb(255,0,0);">assembly</span><span style="color:rgb(0,0,255);">="EAS.MicroKernel"</span> <span style="color:rgb(255,0,0);">type</span><span style="color:rgb(0,0,255);">="EAS.Loggers.TextLogger"</span> <span style="color:rgb(255,0,0);">LifestyleType</span><span style="color:rgb(0,0,255);">="Singleton"</span> <span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  28:</span>       <span style="color:rgb(0,128,0);">&lt;!--资源--&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  29:</span>       <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">object</span> <span style="color:rgb(255,0,0);">name</span><span style="color:rgb(0,0,255);">="EAS.Explorer.Resource"</span> <span style="color:rgb(255,0,0);">assembly</span><span style="color:rgb(0,0,255);">="DrugShop.Res"</span> <span style="color:rgb(255,0,0);">type</span><span style="color:rgb(0,0,255);">="DrugShop.Res.Resources"</span> <span style="color:rgb(255,0,0);">LifestyleType</span><span style="color:rgb(0,0,255);">="Singleton"</span> <span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  30:</span>     <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">objects</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  31:</span>     <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">services</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  32:</span>       <span style="color:rgb(0,0,255);">&lt;</span><span style="color:rgb(128,0,0);">service</span> <span style="color:rgb(255,0,0);">name</span><span style="color:rgb(0,0,255);">="EAS.RMI.Service"</span> <span style="color:rgb(255,0,0);">service-type</span><span style="color:rgb(0,0,255);">="WcfService"</span> <span style="color:rgb(255,0,0);">singleton</span><span style="color:rgb(0,0,255);">="true"</span> <span style="color:rgb(255,0,0);">url</span><span style="color:rgb(0,0,255);">="net.tcp://127.0.0.1:6607/eas/services/EAS.RMIService"</span> <span style="color:rgb(0,0,255);">/&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  33:</span>     <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">services</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  34:</span>   <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">eas</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
     <pre><span style="color:rgb(96,96,96);">  35:</span> <span style="color:rgb(0,0,255);">&lt;/</span><span style="color:rgb(128,0,0);">configuration</span><span style="color:rgb(0,0,255);">&gt;</span></pre> 
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; OK，客户端程序配置完成。</p> 
   <h1 style="font-size:28px;line-height:1.5;font-family:Verdana, Arial, Helvetica, sans-serif;">五、测试验证</h1> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; 启动DrugShop.Main.exe,可以选择启动多个客户端程序实例，可以看到以控制台运行的两个服务实例都有不同程序的请求响应：</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><a href="https://images0.cnblogs.com/blog/19020/201312/19185648-64730050a0da4317acff3590cf220387.jpg" rel="nofollow" style="color:#008000;text-decoration:none;"><img title="0L`$I$6L673RQT~E``F~P7Q_thumb[2] " src="https://images0.cnblogs.com/blog/19020/201312/19185649-a39334bb8f1f4752a5153df7dc11960a.jpg" alt="0L`$I$6L673RQT~E``F~P7Q_thumb[2] " width="673" height="591" style="border:0px;background-image:none;"></a></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; 我们可以看到，客户端的业务请求被<span style="color:rgb(255,0,0);font-size:large;"><em><strong>NLBServer</strong></em></span>进行了有效的负载，当我们随便停止其他任务一个AppServer，我们可以通过“<span style="color:rgb(255,0,0);font-size:large;"><strong>负载均衡监控</strong></span>”程序看到其处于离线状态：</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><a href="https://images0.cnblogs.com/blog/19020/201312/19185650-28092a328ee641d6afd894d9d3c47bfc.jpg" rel="nofollow" style="color:#008000;text-decoration:none;"><img title="3G~)8E1DHD0AKGF1FN4JA(X_thumb[2]" src="https://images0.cnblogs.com/blog/19020/201312/19185654-1d642fec46964c44ad7ab6832cbe20c9.jpg" alt="3G~)8E1DHD0AKGF1FN4JA(X_thumb[2]" width="612" height="358" style="border:0px;background-image:none;"></a></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; 在实际项目之中可以是某一台AppServer宕机了或者人为的进行某种维护升级活动，在这个时间，所有的客户端程序的所有业务操作都是可以的，从这一点我们可以看出，AppServer被<em><strong><span style="color:rgb(255,0,0);">NLBServer</span></strong></em>进行了有效的故障转移，有效的提高了系统的<span style="color:rgb(255,0,0);font-size:large;"><strong>高可用性</strong></span>。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; 如果所有的AppServer都离线了，即所有AppServer都宕机了，如下图：</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><a href="https://images0.cnblogs.com/blog/19020/201312/19185655-bc3ea3fc6eef4ce582cd6dbf8dc8f851.jpg" rel="nofollow" style="color:#008000;text-decoration:none;"><img title="CYD9B}K{0P%`XLC6P~(YV41_thumb[2] " src="https://images0.cnblogs.com/blog/19020/201312/19185656-e3084634fec144eaa2faa58ef950aae2.jpg" alt="CYD9B}K{0P%`XLC6P~(YV41_thumb[2] " width="616" height="349" style="border:0px;background-image:none;"></a></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; 那么这个时间，系统就不能提供任务的服务了，当我们在客户端执行任何操作都会报错：</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><a href="https://images0.cnblogs.com/blog/19020/201312/19185657-91592412453a4706b931666d482e624e.jpg" rel="nofollow" style="color:#008000;text-decoration:none;"><img title="1L_[QARM1]~)5RU9Z%WVEK5_thumb[2]" src="https://images0.cnblogs.com/blog/19020/201312/19185658-2a4deaad9f974e9ab213a4bebe76d53e.jpg" alt="1L_[QARM1]~)5RU9Z%WVEK5_thumb[2]" width="489" height="565" style="border:0px;background-image:none;"></a></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; 当我们恢复负载之中的任务一个节点之后，系统则可以向使用者提供全部的业务服务。</p> 
   <h1 style="font-size:28px;line-height:1.5;font-family:Verdana, Arial, Helvetica, sans-serif;">六、联系我们</h1> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; 为完善、改进和推广AgileEAS.NET而成立了敏捷软件工程实验室，是一家研究、推广和发展新技术，并致力于提供具有自主知识产权的业务基础平台软件，以及基于业务基础平台开发的管理软件的专业软件提供商。主要业务是为客户提供软件企业研发管理解决方案、企业管理软件开发，以及相关的技术支持，管理及技术咨询与培训业务。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; AgileEAS.NET SOA中间件平台自2004年秋呱呱落地一来，我就一直在逐步完善和改进，也被应用于保险、医疗、电子商务、房地产、铁路、教育等多个应用，但一直都是以我个人在推广，2010年因为我辞职休息，我就想到把AgileEAS.NET推向市场，让更多的人使用。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;&nbsp;&nbsp;&nbsp; 我的技术团队成员都是合作多年的老朋友，因为这个平台是免费的，所以也没有什么收入，都是由程序员的那种理想与信念坚持，在此我感谢一起奋斗的朋友。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">团队网站：<a href="http://eastjade.cnblogs.com/" rel="nofollow" style="color:#008000;text-decoration:none;">http://www.agilelab.cn</a>，</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">AgileEAS.NET网站：<a href="http://www.smarteas.net/" rel="nofollow" style="color:#008000;text-decoration:none;">http://www.smarteas.net</a></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">官方博客:<a href="http://eastjade.cnblogs.com/" rel="nofollow" style="color:#008000;text-decoration:none;">http://eastjade.cnblogs.com</a></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">QQ:47920381,AgileEAS.NET</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">QQ群：113723486（AgileEAS SOA 平台）/上限1000人</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">199463175（AgileEAS SOA 交流）/上限1000人</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">212867943（AgileEAS.NET研究）/上限500人</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">147168308（AgileEAS.NET应用）/上限500人</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">172060626（深度AgileEAS.NET平台）/上限500人</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">116773358（AgileEAS.NET 平台）/上限500人</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">125643764（AgileEAS.NET探讨）/上限500人</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">193486983（AgileEAS.NET 平台）/上限500人</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">邮件:james@agilelab.cn,mail.james@qq.com,</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">电话：18629261335。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><br></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><br></p> 
   <p><font><span style="font-size:15px;">&nbsp; &nbsp; 本文转自魏琼东博客园博客，原文链接：http://www.cnblogs.com/eastjade/p/3482717.html</span></font><span style="font-size:15px;font-family:Verdana, Arial, Helvetica, sans-serif;">，如需转载请自行联系原作者</span></p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
