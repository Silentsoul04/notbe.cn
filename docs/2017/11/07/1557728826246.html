<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Android系统中的广播（Broadcast）机制简要介绍和学习计划 « NotBeCN</title>
  <meta name="description" content="                  &nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;在Android系统中，广播（Broadcast）是在组件之间传播数据（Intent）的一种机制；这些组件甚至是可以位于不同的进程中，这样它就像Binder机制一样，起到进程间通信的作用；本文通过一个...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/07/1557728826246.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">Android系统中的广播（Broadcast）机制简要介绍和学习计划</h1>
    <p class="post-meta">Nov 7, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <div> 
    <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;<span style="font-family:Arial;font-size:14px;line-height:26px;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;在Android系统中，广播（Broadcast）是在组件之间传播数据（Intent）的一种机制；这些组件甚至是可以位于不同的进程中，这样它就像Binder机制一样，起到进程间通信的作用；本文通过一个简单的例子来学习Android系统的广播机制，为后续分析广播机制的源代码作准备。</span></p> 
    <p align="left" style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;在Android系统中，为什么需要广播机制呢？广播机制，本质上它就是一种组件间的通信方式，如果是两个组件位于不同的进程当中，那么可以用Binder机制来实现，如果两个组件是在同一个进程中，那么它们之间可以用来通信的方式就更多了，这样看来，广播机制似乎是多余的。然而，广播机制却是不可替代的，它和Binder机制不一样的地方在于，广播的发送者和接收者事先是不需要知道对方的存在的，这样带来的好处便是，系统的各个组件可以松耦合地组织在一起，这样系统就具有高度的可扩展性，容易与其它系统进行集成。</p> 
    <p align="left" style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;在软件工程中，是非常强调模块之间的高内聚低耦合性的，不然的话，随着系统越来越庞大，就会面临着越来越难维护的风险，最后导致整个项目的失败。Android应用程序的组织方式，可以说是把这种高内聚低耦合性的思想贯彻得非常透彻，在任何一个Activity中，都可以使用一个简单的Intent，通过<a href="http://shyluo.blog.51cto.com/5725845/966000" rel="nofollow" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;color:rgb(66,133,244);font-size:16px;">startActivity</a>或者<a href="http://shyluo.blog.51cto.com/5725845/965584" rel="nofollow" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;color:rgb(66,133,244);font-size:16px;">startService</a>，就可以把另外一个Activity或者Service启动起来为它服务，而且它根本上不依赖这个Activity或者Service的实现，只需要知道它的字符串形式的名字即可，而广播机制更绝，它连接收者的名字都不需要知道。</p> 
    <p align="left" style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;不过话又说回来，广播机制在Android系统中，也不算是什么创新的东西。如果读者了解J2EE或者COM，就会知道，在J2EE中，提供了消息驱动Bean（Message-Driven Bean），用来实现应用程序各个组件之间的消息传递；而在COM中，提供了连接点（Connection Point）的概念，也是用来在应用程序各个组间间进行消息传递。无论是J2EE中的消息驱动Bean，还是COM中的连接点，或者Android系统的广播机制，它们的实现机理都是消息发布/订阅模式的事件驱动模型，消息的生产者发布事件，而使用者订阅感兴趣的事件。</p> 
    <p align="left" style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;废话说了一大堆，现在开始进入主题了，和前面的文章一样，我们通过具体的例子来介绍Android系统的广播机制。在这个例子中，有一个Service，它在另外一个线程中实现了一个计数器服务，每隔一秒钟就自动加1，然后将结果不断地反馈给应用程序中的界面线程，而界面线程中的Activity在得到这个反馈后，就会把结果显示在界面上。为什么要把计数器服务放在另外一个线程中进行呢？我们可以把这个计数器服务想象成是一个耗时的计算型逻辑，如果放在界面线程中去实现，那么势必就会导致应用程序不能响应界面事件，最后导致应用程序产生ANR（Application Not Responding）问题。计数器线程为了把加1后的数字源源不断地反馈给界面线程，这时候就可以考虑使用广播机制了。</p> 
    <p align="left" style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;首先在Android源代码工程中创建一个Android应用程序工程，名字就称为Broadcast吧。关于如何获得Android源代码工程，请参考<a href="http://shyluo.blog.51cto.com/5725845/964492" rel="nofollow" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;color:rgb(66,133,244);font-size:16px;">在Ubuntu上下载、编译和安装Android最新源代码</a>一文；关于如何在Android源代码工程中创建应用程序工程，请参考<a href="http://blog.csdn.net/luoshengyang/article/details/6580267" rel="nofollow" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;color:rgb(66,133,244);font-size:16px;">在Ubuntu上为Android系统内置Java应用程序测试Application Frameworks层的硬件服务</a>一文。这个应用程序工程定义了一个名为shy.luo.broadcast的package，这个例子的源代码主要就是实现在这里了。下面，将会逐一介绍这个package里面的文件。&nbsp;</p> 
    <p align="left" style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;首先，我们在src/shy/luo/broadcast/ICounterService.java文件中定义计数器的服务接口：</p> 
    <pre>
</pre> 
    <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">package</span><span style="border:none;">&nbsp;shy.luo.broadcast;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">public</span><span style="border:none;">&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">interface</span><span style="border:none;">&nbsp;ICounterService&nbsp;{&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">public</span><span style="border:none;">&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">void</span><span style="border:none;">&nbsp;startCounter(</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">int</span><span style="border:none;">&nbsp;initVal);&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">public</span><span style="border:none;">&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">void</span><span style="border:none;">&nbsp;stopCounter();&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">}&nbsp;&nbsp;&nbsp;</span></li> 
    </ol>
    <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:Arial;font-size:14px;line-height:26px;">&nbsp; &nbsp; &nbsp; 这个接口很简单，它只有两个成员函数，分别用来启动和停止计数器；启动计数时，还可以指定计数器的初始值。</span></p> 
    <p style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp;</p> 
    <p align="left" style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp;&nbsp; &nbsp; &nbsp; 接着，我们来看一个应用程序的默认Activity的实现，在src/shy/luo/broadcast/MainActivity.java文件中：</p> 
    <pre>
</pre> 
    <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">package</span><span style="border:none;">&nbsp;shy.luo.broadcast;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">import</span><span style="border:none;">&nbsp;android.app.Activity;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">import</span><span style="border:none;">&nbsp;android.content.BroadcastReceiver;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">import</span><span style="border:none;">&nbsp;android.content.ComponentName;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">import</span><span style="border:none;">&nbsp;android.content.Context;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">import</span><span style="border:none;">&nbsp;android.content.Intent;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">import</span><span style="border:none;">&nbsp;android.content.IntentFilter;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">import</span><span style="border:none;">&nbsp;android.content.ServiceConnection;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">import</span><span style="border:none;">&nbsp;android.os.Bundle;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">import</span><span style="border:none;">&nbsp;android.os.IBinder;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">import</span><span style="border:none;">&nbsp;android.util.Log;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">import</span><span style="border:none;">&nbsp;android.view.View;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">import</span><span style="border:none;">&nbsp;android.view.View.OnClickListener;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">import</span><span style="border:none;">&nbsp;android.widget.Button;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">import</span><span style="border:none;">&nbsp;android.widget.TextView;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">public</span><span style="border:none;">&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">class</span><span style="border:none;">&nbsp;MainActivity&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">extends</span><span style="border:none;">&nbsp;Activity&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">implements</span><span style="border:none;">&nbsp;OnClickListener&nbsp;{&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">private</span><span style="border:none;">&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">final</span><span style="border:none;">&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">static</span><span style="border:none;">&nbsp;String&nbsp;LOG_TAG&nbsp;=&nbsp;</span><span class="string" style="border:none;color:#0000FF;">"shy.luo.broadcast.MainActivity"</span><span style="border:none;">;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">private</span><span style="border:none;">&nbsp;Button&nbsp;startButton&nbsp;=&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">null</span><span style="border:none;">;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">private</span><span style="border:none;">&nbsp;Button&nbsp;stopButton&nbsp;=&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">null</span><span style="border:none;">;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">private</span><span style="border:none;">&nbsp;TextView&nbsp;counterText&nbsp;=&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">null</span><span style="border:none;">;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">private</span><span style="border:none;">&nbsp;ICounterService&nbsp;counterService&nbsp;=&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">null</span><span style="border:none;">;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation" style="border:none;color:rgb(100,100,100);">@Override</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">public</span><span style="border:none;">&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">void</span><span style="border:none;">&nbsp;onCreate(Bundle&nbsp;savedInstanceState)&nbsp;{&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">super</span><span style="border:none;">.onCreate(savedInstanceState);&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setContentView(R.layout.main);&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;startButton&nbsp;=&nbsp;(Button)findViewById(R.id.button_start);&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stopButton&nbsp;=&nbsp;(Button)findViewById(R.id.button_stop);&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;counterText&nbsp;=&nbsp;(TextView)findViewById(R.id.textview_counter);&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;startButton.setOnClickListener(<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">this</span><span style="border:none;">);&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stopButton.setOnClickListener(<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">this</span><span style="border:none;">);&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;startButton.setEnabled(<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">true</span><span style="border:none;">);&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stopButton.setEnabled(<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">false</span><span style="border:none;">);&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Intent&nbsp;bindIntent&nbsp;=&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">new</span><span style="border:none;">&nbsp;Intent(MainActivity.</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">this</span><span style="border:none;">,&nbsp;CounterService.</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">class</span><span style="border:none;">);&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bindService(bindIntent,&nbsp;serviceConnection,&nbsp;Context.BIND_AUTO_CREATE);&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Log.i(LOG_TAG,&nbsp;<span class="string" style="border:none;color:#0000FF;">"Main&nbsp;Activity&nbsp;Created."</span><span style="border:none;">);&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation" style="border:none;color:rgb(100,100,100);">@Override</span><span style="border:none;">&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">public</span><span style="border:none;">&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">void</span><span style="border:none;">&nbsp;onResume()&nbsp;{&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">super</span><span style="border:none;">.onResume();&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IntentFilter&nbsp;counterActionFilter&nbsp;=&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">new</span><span style="border:none;">&nbsp;IntentFilter(CounterService.BROADCAST_COUNTER_ACTION);&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;registerReceiver(counterActionReceiver,&nbsp;counterActionFilter);&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation" style="border:none;color:rgb(100,100,100);">@Override</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">public</span><span style="border:none;">&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">void</span><span style="border:none;">&nbsp;onPause()&nbsp;{&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">super</span><span style="border:none;">.onPause();&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unregisterReceiver(counterActionReceiver);&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation" style="border:none;color:rgb(100,100,100);">@Override</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">public</span><span style="border:none;">&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">void</span><span style="border:none;">&nbsp;onDestroy()&nbsp;{&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">super</span><span style="border:none;">.onDestroy();&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unbindService(serviceConnection);&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation" style="border:none;color:rgb(100,100,100);">@Override</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">public</span><span style="border:none;">&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">void</span><span style="border:none;">&nbsp;onClick(View&nbsp;v)&nbsp;{&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">if</span><span style="border:none;">(v.equals(startButton))&nbsp;{&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">if</span><span style="border:none;">(counterService&nbsp;!=&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">null</span><span style="border:none;">)&nbsp;{&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;counterService.startCounter(<span class="number" style="border:none;color:rgb(192,0,0);">0</span><span style="border:none;">);&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;startButton.setEnabled(<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">false</span><span style="border:none;">);&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stopButton.setEnabled(<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">true</span><span style="border:none;">);&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">else</span><span style="border:none;">&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">if</span><span style="border:none;">(v.equals(stopButton))&nbsp;{&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">if</span><span style="border:none;">(counterService&nbsp;!=&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">null</span><span style="border:none;">)&nbsp;{&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;counterService.stopCounter();&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;startButton.setEnabled(<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">true</span><span style="border:none;">);&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stopButton.setEnabled(<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">false</span><span style="border:none;">);&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">private</span><span style="border:none;">&nbsp;BroadcastReceiver&nbsp;counterActionReceiver&nbsp;=&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">new</span><span style="border:none;">&nbsp;BroadcastReceiver(){&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">public</span><span style="border:none;">&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">void</span><span style="border:none;">&nbsp;onReceive(Context&nbsp;context,&nbsp;Intent&nbsp;intent)&nbsp;{&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">int</span><span style="border:none;">&nbsp;counter&nbsp;=&nbsp;intent.getIntExtra(CounterService.COUNTER_VALUE,&nbsp;</span><span class="number" style="border:none;color:rgb(192,0,0);">0</span><span style="border:none;">);&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;text&nbsp;=&nbsp;String.valueOf(counter);&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;counterText.setText(text);&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Log.i(LOG_TAG,&nbsp;<span class="string" style="border:none;color:#0000FF;">"Receive&nbsp;counter&nbsp;event"</span><span style="border:none;">);&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;};&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">private</span><span style="border:none;">&nbsp;ServiceConnection&nbsp;serviceConnection&nbsp;=&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">new</span><span style="border:none;">&nbsp;ServiceConnection()&nbsp;{&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">public</span><span style="border:none;">&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">void</span><span style="border:none;">&nbsp;onServiceConnected(ComponentName&nbsp;className,&nbsp;IBinder&nbsp;service)&nbsp;{&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;counterService&nbsp;=&nbsp;((CounterService.CounterBinder)service).getService();&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Log.i(LOG_TAG,&nbsp;<span class="string" style="border:none;color:#0000FF;">"Counter&nbsp;Service&nbsp;Connected"</span><span style="border:none;">);&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">public</span><span style="border:none;">&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">void</span><span style="border:none;">&nbsp;onServiceDisconnected(ComponentName&nbsp;className)&nbsp;{&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;counterService&nbsp;=&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">null</span><span style="border:none;">;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Log.i(LOG_TAG,&nbsp;<span class="string" style="border:none;color:#0000FF;">"Counter&nbsp;Service&nbsp;Disconnected"</span><span style="border:none;">);&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">}&nbsp;&nbsp;&nbsp;</span></li> 
    </ol>
    <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;</p> 
    <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;</p> 
    <p style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp; &nbsp; &nbsp; &nbsp; MainActivity的实现也很简单，它在创建（onCreate）的时候，会调用bindService函数来把计数器服务（CounterService）启动起来，它的第二个参数serviceConnection是一个ServiceConnection实例。计数器服务启动起来后，系统会调用这个实例的onServiceConnected函数将一个Binder对象传回来，通过调用这个Binder对象的getService函数，就可以获得计数器服务接口。这里，把这个计数器服务接口保存在MainActivity的counterService成员变量中。同样，当我们调用unbindService停止计数器服务时，系统会调用这个实例的onServiceDisconnected函数告诉MainActivity，它与计数器服务的连接断开了。</p> 
    <p style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;注意，这里通过调用bindService函数来启动Service时，这个Service与启动它的Activity是位于同一个进程中，它不像我们在前面一篇文章<a href="http://shyluo.blog.51cto.com/5725845/965584" rel="nofollow" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;color:rgb(66,133,244);font-size:16px;">Android系统在新进程中启动自定义服务过程（startService）的原理分析</a>中所描述那样在新的进程中启动服务，后面我们再写一篇文章来分析bindService启动服务的过程。</p> 
    <p style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp;</p> 
    <p align="left" style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;在MainActivity的onResume函数中，通过调用registerReceiver函数注册了一个广播接收器counterActionReceiver，它是一个BroadcastReceiver实例，并且指定了这个广播接收器只对CounterService.BROADCAST_COUNTER_ACTION类型的广播感兴趣。当CounterService发出一个CounterService.BROADCAST_COUNTER_ACTION类型的广播时，系统就会把这个广播发送到counterActionReceiver实例的onReceiver函数中去。在onReceive函数中，从参数intent中取出计数器当前的值，显示在界面上。</p> 
    <p align="left" style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp;&nbsp; &nbsp; &nbsp; MainActivity界面上有两个按钮，分别是Start Counter和Stop Counter按钮，点击前者开始计数，而点击后者则停止计数。</p> 
    <p align="left" style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp;&nbsp; &nbsp; &nbsp; 计数器服务CounterService实现在src/shy/luo/broadcast/CounterService.java文件中：</p> 
    <pre>
</pre> 
    <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">package</span><span style="border:none;">&nbsp;shy.luo.broadcast;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">import</span><span style="border:none;">&nbsp;android.app.Service;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">import</span><span style="border:none;">&nbsp;android.content.Intent;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">import</span><span style="border:none;">&nbsp;android.os.AsyncTask;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">import</span><span style="border:none;">&nbsp;android.os.Binder;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">import</span><span style="border:none;">&nbsp;android.os.IBinder;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">import</span><span style="border:none;">&nbsp;android.util.Log;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">public</span><span style="border:none;">&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">class</span><span style="border:none;">&nbsp;CounterService&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">extends</span><span style="border:none;">&nbsp;Service&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">implements</span><span style="border:none;">&nbsp;ICounterService&nbsp;{&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">private</span><span style="border:none;">&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">final</span><span style="border:none;">&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">static</span><span style="border:none;">&nbsp;String&nbsp;LOG_TAG&nbsp;=&nbsp;</span><span class="string" style="border:none;color:#0000FF;">"shy.luo.broadcast.CounterService"</span><span style="border:none;">;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">public</span><span style="border:none;">&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">final</span><span style="border:none;">&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">static</span><span style="border:none;">&nbsp;String&nbsp;BROADCAST_COUNTER_ACTION&nbsp;=&nbsp;</span><span class="string" style="border:none;color:#0000FF;">"shy.luo.broadcast.COUNTER_ACTION"</span><span style="border:none;">;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">public</span><span style="border:none;">&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">final</span><span style="border:none;">&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">static</span><span style="border:none;">&nbsp;String&nbsp;COUNTER_VALUE&nbsp;=&nbsp;</span><span class="string" style="border:none;color:#0000FF;">"shy.luo.broadcast.counter.value"</span><span style="border:none;">;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">private</span><span style="border:none;">&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">boolean</span><span style="border:none;">&nbsp;stop&nbsp;=&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">false</span><span style="border:none;">;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">private</span><span style="border:none;">&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">final</span><span style="border:none;">&nbsp;IBinder&nbsp;binder&nbsp;=&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">new</span><span style="border:none;">&nbsp;CounterBinder();&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">public</span><span style="border:none;">&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">class</span><span style="border:none;">&nbsp;CounterBinder&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">extends</span><span style="border:none;">&nbsp;Binder&nbsp;{&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">public</span><span style="border:none;">&nbsp;CounterService&nbsp;getService()&nbsp;{&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">return</span><span style="border:none;">&nbsp;CounterService.</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">this</span><span style="border:none;">;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation" style="border:none;color:rgb(100,100,100);">@Override</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">public</span><span style="border:none;">&nbsp;IBinder&nbsp;onBind(Intent&nbsp;intent)&nbsp;{&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">return</span><span style="border:none;">&nbsp;binder;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation" style="border:none;color:rgb(100,100,100);">@Override</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">public</span><span style="border:none;">&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">void</span><span style="border:none;">&nbsp;onCreate()&nbsp;{&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">super</span><span style="border:none;">.onCreate();&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Log.i(LOG_TAG,&nbsp;<span class="string" style="border:none;color:#0000FF;">"Counter&nbsp;Service&nbsp;Created."</span><span style="border:none;">);&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation" style="border:none;color:rgb(100,100,100);">@Override</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">public</span><span style="border:none;">&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">void</span><span style="border:none;">&nbsp;onDestroy()&nbsp;{&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Log.i(LOG_TAG,&nbsp;<span class="string" style="border:none;color:#0000FF;">"Counter&nbsp;Service&nbsp;Destroyed."</span><span style="border:none;">);&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">public</span><span style="border:none;">&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">void</span><span style="border:none;">&nbsp;startCounter(</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">int</span><span style="border:none;">&nbsp;initVal)&nbsp;{&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AsyncTask&lt;Integer,&nbsp;Integer,&nbsp;Integer&gt;&nbsp;task&nbsp;=&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">new</span><span style="border:none;">&nbsp;AsyncTask&lt;Integer,&nbsp;Integer,&nbsp;Integer&gt;()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation" style="border:none;color:rgb(100,100,100);">@Override</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">protected</span><span style="border:none;">&nbsp;Integer&nbsp;doInBackground(Integer...&nbsp;vals)&nbsp;{&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Integer&nbsp;initCounter&nbsp;=&nbsp;vals[<span class="number" style="border:none;color:rgb(192,0,0);">0</span><span style="border:none;">];&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stop&nbsp;=&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">false</span><span style="border:none;">;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">while</span><span style="border:none;">(!stop)&nbsp;{&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;publishProgress(initCounter);&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">try</span><span style="border:none;">&nbsp;{&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Thread.sleep(<span class="number" style="border:none;color:rgb(192,0,0);">1000</span><span style="border:none;">);&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">catch</span><span style="border:none;">&nbsp;(InterruptedException&nbsp;e)&nbsp;{&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initCounter++;&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">return</span><span style="border:none;">&nbsp;initCounter;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation" style="border:none;color:rgb(100,100,100);">@Override</span><span style="border:none;">&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">protected</span><span style="border:none;">&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">void</span><span style="border:none;">&nbsp;onProgressUpdate(Integer...&nbsp;values)&nbsp;{&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">super</span><span style="border:none;">.onProgressUpdate(values);&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">int</span><span style="border:none;">&nbsp;counter&nbsp;=&nbsp;values[</span><span class="number" style="border:none;color:rgb(192,0,0);">0</span><span style="border:none;">];&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Intent&nbsp;intent&nbsp;=&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">new</span><span style="border:none;">&nbsp;Intent(BROADCAST_COUNTER_ACTION);&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intent.putExtra(COUNTER_VALUE,&nbsp;counter);&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sendBroadcast(intent);&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation" style="border:none;color:rgb(100,100,100);">@Override</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">protected</span><span style="border:none;">&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">void</span><span style="border:none;">&nbsp;onPostExecute(Integer&nbsp;val)&nbsp;{&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">int</span><span style="border:none;">&nbsp;counter&nbsp;=&nbsp;val;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Intent&nbsp;intent&nbsp;=&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">new</span><span style="border:none;">&nbsp;Intent(BROADCAST_COUNTER_ACTION);&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intent.putExtra(COUNTER_VALUE,&nbsp;counter);&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sendBroadcast(intent);&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;task.execute(<span class="number" style="border:none;color:rgb(192,0,0);">0</span><span style="border:none;">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">public</span><span style="border:none;">&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">void</span><span style="border:none;">&nbsp;stopCounter()&nbsp;{&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stop&nbsp;=&nbsp;<span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">true</span><span style="border:none;">;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">}&nbsp;&nbsp;&nbsp;</span></li> 
    </ol>
    <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;</p> 
    <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;</p> 
    <p style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp; &nbsp; &nbsp; &nbsp; 这个计数器服务实现了ICounterService接口。当这个服务被binderService函数启动时，系统会调用它的onBind函数，这个函数返回一个Binder对象给系统。上面我们说到，当MainActivity调用bindService函数来启动计数器服务器时，系统会调用MainActivity的ServiceConnection实例serviceConnection的onServiceConnected函数通知MainActivity，这个服务已经连接上了，并且会通过这个函数传进来一个Binder远程对象，这个Binder远程对象就是来源于这里的onBind的返回值了。</p> 
    <p style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;函数onBind返回的Binder对象是一个自定义的CounterBinder实例，它实现了一个getService成员函数。当系统通知MainActivity，计数器服务已经启动起来并且连接成功后，并且将这个Binder对象传给MainActivity时，MainActivity就会把这个Binder对象强制转换为CounterBinder实例，然后调用它的getService函数获得服务接口。这样，MainActivity就通过这个Binder对象和CounterService关联起来了。</p> 
    <p style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp;</p> 
    <p align="left" style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;当MainActivity调用计数器服务接口的startCounter函数时，计数器服务并不是直接进入计数状态，而是通过使用异步任务（AsyncTask）在后台线程中进行计数。这里为什么要使用异步任务来在后台线程中进行计数呢？前面我们说过，这个计数过程是一个耗时的计算型逻辑，不能把它放在界面线程中进行，因为这里的CounterService启动时，并没有在新的进程中启动，它与MainActivity一样，运行在应用程序的界面线程中，因此，这里需要使用异步任务在在后台线程中进行计数。</p> 
    <p align="left" style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;异步任务AsyncTask的具体用法可以参考官方文档<a href="http://developer.android.com/reference/android/os/AsyncTask.html" rel="nofollow" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;color:rgb(66,133,244);font-size:16px;">http://developer.android.com/reference/android/os/AsyncTask.html</a>。它的大概用法是，当我们调用异步任务实例的execute（task.execute）方法时，当前调用线程就返回了，系统启动一个后台线程来执行这个异步任务实例的doInBackground函数，这个函数就是我们用来执行耗时计算的地方了，它会进入到一个循环中，每隔1秒钟就把计数器加1，然后进入休眠（Thread.sleep），醒过来，再重新这个计算过程。在计算的过程中，可以通过调用publishProgress函数来通知调用者当前计算的进度，好让调用者来更新界面，调用publishProgress函数的效果最终就是直入到这个异步任务实例的onProgressUpdate函数中，这里就可以把这个进度值以广播的形式（sendBroadcast）发送出去了，这里的进度值就定义为当前计数服务的计数值。</p> 
    <p align="left" style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;当MainActivity调用计数器服务接口的stopCounter函数时，会告诉函数doInBackground停止执行计数（stop = true），于是，函数doInBackground就退出计数循环，然后将最终计数结果返回了，返回的结果最后进入到onPostExecute函数中，这个函数同样通过广播的形式（sendBroadcast）把这个计数结果广播出去。</p> 
    <p align="left" style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;计算器服务就介绍到这里了，下面我们看看应用程序的配置文件AndroidManifest.xml：</p> 
    <pre>
</pre> 
    <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;?</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">xml</span><span style="border:none;">&nbsp;</span><span class="attribute" style="border:none;color:#FF0000;">version</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"1.0"</span><span style="border:none;">&nbsp;</span><span class="attribute" style="border:none;color:#FF0000;">encoding</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"utf-8"</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">?&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">manifest</span><span style="border:none;">&nbsp;</span><span class="attribute" style="border:none;color:#FF0000;">xmlns:android</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"http://schemas.android.com/apk/res/android"</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">package</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"shy.luo.broadcast"</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:versionCode</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"1"</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:versionName</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"1.0"</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">application</span><span style="border:none;">&nbsp;</span><span class="attribute" style="border:none;color:#FF0000;">android:icon</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"@drawable/icon"</span><span style="border:none;">&nbsp;</span><span class="attribute" style="border:none;color:#FF0000;">android:label</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"@string/app_name"</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">activity</span><span style="border:none;">&nbsp;</span><span class="attribute" style="border:none;color:#FF0000;">android:name</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">".MainActivity"</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:label</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"@string/app_name"</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">intent-filter</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">action</span><span style="border:none;">&nbsp;</span><span class="attribute" style="border:none;color:#FF0000;">android:name</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"android.intent.action.MAIN"</span><span style="border:none;">&nbsp;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">/&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">category</span><span style="border:none;">&nbsp;</span><span class="attribute" style="border:none;color:#FF0000;">android:name</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"android.intent.category.LAUNCHER"</span><span style="border:none;">&nbsp;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">/&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;/</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">intent-filter</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;/</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">activity</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">service</span><span style="border:none;">&nbsp;</span><span class="attribute" style="border:none;color:#FF0000;">android:name</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">".CounterService"</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:enabled</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"true"</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;/</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">service</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;/</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">application</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;/</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">manifest</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li> 
    </ol>
    <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;</p> 
    <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:Arial;font-size:14px;line-height:26px;">&nbsp;&nbsp;这个配置文件很简单，只是告诉系统，它有一个Activity和一个Service。</span></p> 
    <p style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp;</p> 
    <p align="left" style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;再来看MainActivity的界面文件，它定义在res/layout/main.xml文件中：</p> 
    <pre>
</pre> 
    <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;?</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">xml</span><span style="border:none;">&nbsp;</span><span class="attribute" style="border:none;color:#FF0000;">version</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"1.0"</span><span style="border:none;">&nbsp;</span><span class="attribute" style="border:none;color:#FF0000;">encoding</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"utf-8"</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">?&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">LinearLayout</span><span style="border:none;">&nbsp;</span><span class="attribute" style="border:none;color:#FF0000;">xmlns:android</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"http://schemas.android.com/apk/res/android"</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:orientation</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"vertical"</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:layout_width</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"fill_parent"</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:layout_height</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"fill_parent"</span><span style="border:none;">&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:gravity</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"center"</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">LinearLayout</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:layout_width</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"fill_parent"</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:layout_height</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"wrap_content"</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:layout_marginBottom</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"10px"</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:orientation</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"horizontal"</span><span style="border:none;">&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:gravity</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"center"</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">TextView</span><span style="border:none;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:layout_width</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"wrap_content"</span><span style="border:none;">&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:layout_height</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"wrap_content"</span><span style="border:none;">&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:layout_marginRight</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"4px"</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:gravity</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"center"</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:text</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"@string/counter"</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;/</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">TextView</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">TextView</span><span style="border:none;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:id</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"@+id/textview_counter"</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:layout_width</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"wrap_content"</span><span style="border:none;">&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:layout_height</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"wrap_content"</span><span style="border:none;">&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:gravity</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"center"</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:text</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"0"</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;/</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">TextView</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;/</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">LinearLayout</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">LinearLayout</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:layout_width</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"fill_parent"</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:layout_height</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"wrap_content"</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:orientation</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"horizontal"</span><span style="border:none;">&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:gravity</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"center"</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">Button</span><span style="border:none;">&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:id</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"@+id/button_start"</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:layout_width</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"wrap_content"</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:layout_height</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"wrap_content"</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:gravity</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"center"</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:text</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"@string/start"</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;/</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">Button</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">Button</span><span style="border:none;">&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:id</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"@+id/button_stop"</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:layout_width</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"wrap_content"</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:layout_height</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"wrap_content"</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:gravity</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"center"</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">android:text</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"@string/stop"</span><span style="border:none;">&nbsp;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;/</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">Button</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;/</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">LinearLayout</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;/</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">LinearLayout</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
    </ol>
    <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;</p> 
    <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:Arial;font-size:14px;line-height:26px;">&nbsp;&nbsp; &nbsp;这个界面配置文件也很简单，等一下我们在模拟器把这个应用程序启动起来后，就可以看到它的截图了。</span></p> 
    <p style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp;</p> 
    <p align="left" style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;应用程序用到的字符串资源文件位于res/values/strings.xml文件中：</p> 
    <pre>
</pre> 
    <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;?</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">xml</span><span style="border:none;">&nbsp;</span><span class="attribute" style="border:none;color:#FF0000;">version</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"1.0"</span><span style="border:none;">&nbsp;</span><span class="attribute" style="border:none;color:#FF0000;">encoding</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"utf-8"</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">?&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">resources</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">string</span><span style="border:none;">&nbsp;</span><span class="attribute" style="border:none;color:#FF0000;">name</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"app_name"</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">Broadcast</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;/</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">string</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">string</span><span style="border:none;">&nbsp;</span><span class="attribute" style="border:none;color:#FF0000;">name</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"counter"</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">Counter:&nbsp;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;/</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">string</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">string</span><span style="border:none;">&nbsp;</span><span class="attribute" style="border:none;color:#FF0000;">name</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"start"</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">Start&nbsp;Counter</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;/</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">string</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">string</span><span style="border:none;">&nbsp;</span><span class="attribute" style="border:none;color:#FF0000;">name</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"stop"</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">Stop&nbsp;Counter</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;/</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">string</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;/</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">resources</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;</span></span></li> 
    </ol>
    <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;</p> 
    <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:Arial;font-size:14px;line-height:26px;">最后，我们还要在工程目录下放置一个编译脚本文件Android.mk：</span></p> 
    <pre>
</pre> 
    <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="attribute" style="border:none;color:#FF0000;">LOCAL_PATH:</span><span style="border:none;">=&nbsp;$(call&nbsp;my-dir)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">include&nbsp;$(CLEAR_VARS)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">LOCAL_MODULE_TAGS&nbsp;<span class="attribute" style="border:none;color:#FF0000;">:</span><span style="border:none;">=&nbsp;</span><span class="attribute-value" style="border:none;color:#0000FF;">optional</span><span style="border:none;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">LOCAL_SRC_FILES&nbsp;<span class="attribute" style="border:none;color:#FF0000;">:</span><span style="border:none;">=&nbsp;$(call&nbsp;all-subdir-java-files)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">LOCAL_PACKAGE_NAME&nbsp;<span class="attribute" style="border:none;color:#FF0000;">:</span><span style="border:none;">=&nbsp;</span><span class="attribute-value" style="border:none;color:#0000FF;">Broadcast</span><span style="border:none;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">include&nbsp;$(BUILD_PACKAGE)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
    </ol>
    <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:Arial;font-size:14px;line-height:26px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;接下来就要编译了。有关如何单独编译Android源代码工程的模块，以及如何打包system.img，请参考</span><a href="http://shyluo.blog.51cto.com/5725845/964496" rel="nofollow" style="font-family:Arial;color:rgb(66,133,244);font-size:14px;line-height:26px;">如何单独编译Android源代码中的模块</a><span style="font-family:Arial;font-size:14px;line-height:26px;">一文。</span><br style="font-family:Arial;font-size:14px;line-height:26px;"><span style="font-family:Arial;font-size:14px;line-height:26px;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;执行以下命令进行编译和打包：</span></p> 
    <pre>
</pre> 
    <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">USER-NAME@MACHINE-NAME:~/Android$&nbsp;mmm&nbsp;packages/experimental/Broadcast&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">USER-NAME@MACHINE-NAME:~/Android$&nbsp;make&nbsp;snod&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
    </ol>
    <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:Arial;font-size:14px;line-height:26px;">&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;这样，打包好的Android系统镜像文件system.img就包含我们前面创建的Broadcast应用程序了。</span><br style="font-family:Arial;font-size:14px;line-height:26px;"><span style="font-family:Arial;font-size:14px;line-height:26px;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; 再接下来，就是运行模拟器来运行我们的例子了。关于如何在Android源代码工程中运行模拟器，请参考</span><a href="http://shyluo.blog.51cto.com/5725845/964492" rel="nofollow" style="font-family:Arial;color:rgb(66,133,244);font-size:14px;line-height:26px;">在Ubuntu上下载、编译和安装Android最新源代码</a><span style="font-family:Arial;font-size:14px;line-height:26px;">一文。</span><br style="font-family:Arial;font-size:14px;line-height:26px;"><span style="font-family:Arial;font-size:14px;line-height:26px;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; 执行以下命令启动模拟器：</span></p> 
    <pre>
</pre> 
    <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">USER-NAME@MACHINE-NAME:~/Android$&nbsp;emulator&nbsp;&nbsp;</span></li>
    </ol>
    <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:Arial;font-size:14px;line-height:26px;">&nbsp; &nbsp; &nbsp; &nbsp; 模拟器启动起，就可以App Launcher中找到Broadcast应用程序图标，接着把它启动起来，然后点击界面上的Start Counter按钮，就可以把计数器服务启动起来了，计数器服务又通过广播把计数值反馈给MainActivity，于是，我们就会在MainActivity界面看到计数器的值不断地增加了：</span></p> 
    <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://blog.51cto.com/attachment/201208/110240920.png" rel="nofollow" style="color:rgb(66,133,244);"><img src="http://blog.51cto.com/attachment/201208/110240920.png" alt="" style="border:none;"></a></p> 
    <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;</p> 
    <p align="left" style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp;&nbsp;这样，使用广播的例子就介绍完了。回顾一下，使用广播的两个步骤：</p> 
    <p align="left" style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;1. 广播的接收者需要通过调用registerReceiver函数告诉系统，它对什么样的广播有兴趣，即指定IntentFilter，并且向系统注册广播接收器，即指定BroadcastReceiver：</p> 
    <pre>
</pre> 
    <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span style="border:none;">IntentFilter&nbsp;counterActionFilter&nbsp;=&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">new</span><span style="border:none;">&nbsp;IntentFilter(CounterService.BROADCAST_COUNTER_ACTION);&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">registerReceiver(counterActionReceiver,&nbsp;counterActionFilter);&nbsp;&nbsp;&nbsp;</span></li> 
    </ol>
    <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;</p> 
    <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:Arial;font-size:14px;line-height:26px;">&nbsp;这里，指定感兴趣的广播就是CounterService.BROADCAST_COUNTER_ACTION了，而指定的广播接收器就是counterActonReceiver，它是一个BroadcastReceiver类型的实例。</span></p> 
    <p style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp;</p> 
    <p align="left" style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;2. 广播的发送者通过调用sendBroadcast函数来发送一个指定的广播，并且可以指定广播的相关参数：</p> 
    <pre>
</pre> 
    <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span style="border:none;">Intent&nbsp;intent&nbsp;=&nbsp;</span><span class="keyword" style="border:none;color:rgb(0,102,153);font-weight:bold;">new</span><span style="border:none;">&nbsp;Intent(BROADCAST_COUNTER_ACTION);&nbsp;&nbsp;&nbsp;</span></span></li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">intent.putExtra(COUNTER_VALUE,&nbsp;counter);&nbsp;&nbsp;&nbsp;</span></li> 
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">sendBroadcast(intent)&nbsp;&nbsp;&nbsp;</span></li> 
    </ol>
    <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;</p> 
    <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:Arial;font-size:14px;line-height:26px;">&nbsp;&nbsp; &nbsp; &nbsp;这里，指定的广播为CounterService.BROADCAST_COUNTER_ACTION，并且附带的带参数当前的计数器值counter。调用了sendBroadcast函数之后，所有注册了CounterService.BROADCAST_COUNTER_ACTION广播的接收者便可以收到这个广播了。</span></p> 
    <p style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp;</p> 
    <p align="left" style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;在第1步中，广播的接收者把广播接收器注册到ActivityManagerService中；在第2步中，广播的发送者同样是把广播发送到ActivityManagerService中，由ActivityManagerService去查找注册了这个广播的接收者，然后把广播分发给它们。</p> 
    <p align="left" style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;在第2步的分发的过程，其实就是把这个广播转换成一个消息，然后放入到接收器所在的线程消息队列中去，最后就可以在消息循环中调用接收器的onReceive函数了。这里有一个要非常注意的地方是，由于ActivityManagerService把这个广播放进接收器所在的线程消息队列后，就返回了，它不关心这个消息什么时候会被处理，因此，对广播的处理是异步的，即调用sendBroadcast时，这个函数不会等待这个广播被处理完后才返回。</p> 
    <p align="left" style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;下面，我们以一个序列图来总结一下，广播的注册和发送的过程：</p> 
    <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://blog.51cto.com/attachment/201208/110337302.png" rel="nofollow" style="color:rgb(66,133,244);"><img src="http://blog.51cto.com/attachment/201208/110337302.png" alt="" style="border:none;"></a></p> 
    <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;</p> 
    <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;</p> 
    <p align="left" style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp; &nbsp; &nbsp;虚线上面Step 1到Step 4步是注册广播接收器的过程，其中Step 2通过LoadedApk.getReceiverDispatcher在LoadedApk内部创建了一个IIntentReceiver接口，并且传递给ActivityManagerService；虚线下面的Step 5到Step 11是发送广播的过程，在Step 8中，ActivityManagerService利用上面得到的IIntentReceiver远程接口，调用LoadedApk.performReceiver接口，LoadedApk.performReceiver接口通过ActivityThread.H接口的post函数将这个广播消息放入到ActivityThread的消息队列中去，最后这个消息在LoadedApk的Args.run函数中处理，LoadedApk.Args.run函数接着调用MainActivity.BroadcastReceiver的onReceive函数来最终处理这个广播。</p> 
    <p align="left" style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;文章开始的时候，我们提到，举这个例子的最终目的，是为了进一步学习Android系统的广播机制，因此，在接下来的两篇文章中，我们将详细描述上述注册广播接收器和发送广播的过程：</p> 
    <p align="left" style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;1.<a href="http://blog.csdn.net/luoshengyang/article/details/6737352" rel="nofollow" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;color:rgb(66,133,244);font-size:16px;">&nbsp;Android应用程序注册广播接收器（registerReceiver）的过程分析；</a></p> 
    <p align="left" style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;2.&nbsp;<a href="http://blog.csdn.net/luoshengyang/article/details/6744448" rel="nofollow" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;color:rgb(66,133,244);font-size:16px;">Android应用程序发送广播（sendBroadcast）的过程分析。</a></p> 
   </div> 
   <div>
    <br>
   </div> 
   <div>
    <br>
   </div> 
   <div>
    <br>
   </div> 
   <div>
    <br>
   </div> 
   <div>
    <br>
   </div> 
   <div>
    <br>
   </div> 
   <div>
    本文转自 Luoshengyang 51CTO博客，原文链接：http://blog.51cto.com/shyluo/966167，如需转载请自行联系原作者
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
