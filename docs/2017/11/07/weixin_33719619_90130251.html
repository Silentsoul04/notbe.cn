<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>JS组件系列——BootstrapTable+KnockoutJS实现增删改查解决方案（四）：自定义T4模板快速生成页面... « NotBeCN</title>
  <meta name="description" content="                  阅读目录          一、T4的使用介绍       二、T4代码介绍              1、Controller.cs.t4        2、KoIndex.cs.t4        3、KoEdit.cs.t4             &nbsp;三、sel...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/07/weixin_33719619_90130251.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">JS组件系列——BootstrapTable+KnockoutJS实现增删改查解决方案（四）：自定义T4模板快速生成页面...</h1>
    <p class="post-meta">Nov 7, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <div style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"> 
    <p style="font-size:18px;"><b>阅读目录</b></p> 
    <ul>
     <li><a href="http://www.cnblogs.com/landeanfen/p/5667022.html#_label0" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">一、T4的使用介绍</a></li> 
     <li> <a href="http://www.cnblogs.com/landeanfen/p/5667022.html#_label1" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">二、T4代码介绍</a> 
      <ul>
       <li><a href="http://www.cnblogs.com/landeanfen/p/5667022.html#_label1_0" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">1、Controller.cs.t4</a></li> 
       <li><a href="http://www.cnblogs.com/landeanfen/p/5667022.html#_label1_1" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">2、KoIndex.cs.t4</a></li> 
       <li><a href="http://www.cnblogs.com/landeanfen/p/5667022.html#_label1_2" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">3、KoEdit.cs.t4</a></li> 
      </ul></li> 
     <li><a href="http://www.cnblogs.com/landeanfen/p/5667022.html#_label2" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">&nbsp;三、select组件的绑定</a></li> 
     <li><a href="http://www.cnblogs.com/landeanfen/p/5667022.html#_label3" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">四、总结</a></li> 
    </ul>
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">&nbsp;</p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;line-height:24px;font-size:18px;"><b>正文</b></p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">前言：上篇介绍了下ko增删改查的封装，确实节省了大量的js代码。博主是一个喜欢偷懒的人，总觉得这些基础的增删改查效果能不能通过一个什么工具直接生成页面效果，啥代码都不用写了，那该多爽。于是研究了下T4的语法，虽然没有完全掌握，但是算是有了一个大致的了解，给需要自定义模板的园友们提供一个参考。于是乎有了今天的这篇文章：通过T4模板快速生成页面。</p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">KnockoutJS系列文章：</p> 
   <ul style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">
    <li><a id="homepage1_HomePageDays_DaysList_ctl04_DayList_TitleUrl_0" class="postTitle2" href="http://www.cnblogs.com/landeanfen/p/5400654.html" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">JS组件系列——BootstrapTable+KnockoutJS实现增删改查解决方案（一）</a></li> 
    <li><a id="homepage1_HomePageDays_DaysList_ctl03_DayList_TitleUrl_0" class="postTitle2" href="http://www.cnblogs.com/landeanfen/p/5407221.html" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">JS组件系列——BootstrapTable+KnockoutJS实现增删改查解决方案（二）</a></li> 
    <li><a href="http://www.cnblogs.com/landeanfen/p/5656307.html" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">JS组件系列——BootstrapTable+KnockoutJS实现增删改查解决方案（三）：两个Viewmodel搞定增删改查</a></li> 
    <li>JS组件系列——BootstrapTable+KnockoutJS实现增删改查解决方案（四）：自定义T4模板快速生成页面</li> 
   </ul>
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">本文原创地址：<a href="http://www.cnblogs.com/landeanfen/p/5667022.html" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">http://www.cnblogs.com/landeanfen/p/5667022.html</a></p> 
   <div style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;text-align:right;"> 
    <a href="http://www.cnblogs.com/landeanfen/p/5667022.html#_labelTop" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">回到顶部</a>
    <a name="_label0" style="color:rgb(39,105,192);"></a> 
   </div> 
   <h1 style="font-size:25px;line-height:31px;color:rgb(255,255,255);font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(43,102,0);">一、T4的使用介绍</h1> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">我们知道，MVC里面在添加视图的时候可以自动生成增删改查的页面效果，那是因为MVC为我们内置了基础增删改查的模板，这些模板的语法就是使用T4，那么这些模板在哪里呢？找了下相关文章，发现MVC4及以下的版本模板位置和MVC5及以上模板的位置有很大的不同。</p> 
   <ul style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">
    <li>MVC4及以下版本的模板位置：VS的安装目录+<em><span>\ItemTemplates\CSharp\Web\MVC 2<span>\<span>CodeTemplates。</span></span></span></em><span>比如博主的D:\Program Files (x86)\Microsoft Visual Studio 12.0\Common7\IDE\ItemTemplates\CSharp\Web\MVC 4\CodeTemplates。找到cshtml对应的模板，里面就有相应的增删改查的tt文件<img src="https://images2015.cnblogs.com/blog/459756/201607/459756-20160718161356435-1434414506.png" alt="" style="border:0px;"></span> </li> 
    <li>MVC5及以上版本的模板位置：直接给出博主的模板位置D:\Program Files (x86)\Microsoft Visual Studio 12.0\Common7\IDE\Extensions\Microsoft\Web\Mvc\Scaffolding\Templates<img src="https://images2015.cnblogs.com/blog/459756/201607/459756-20160718161629326-1358591878.png" alt="" style="border:0px;"></li> 
   </ul>
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">知道了这个，那么接下来就是改造模板，添加自己的生成内容了。可以直接将List和Edit模板拷贝到过来自行改造，但是最后想了想，还是别动MVC内置的东西了，我们自己来建自己的模板不是更好。</p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">在当前Web项目的根目录下面新建一个文件夹，命名为CodeTemplates，然后将MVC模板里面的MvcControllerEmpty和MvcView两个模板文件夹拷贝到CodeTemplates文件夹下面，去掉它里面的原始模板，然后新建几个自己的模板，如下图：</p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><img src="https://images2015.cnblogs.com/blog/459756/201607/459756-20160718162138388-1267005345.png" alt="" style="border:0px;"></p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">这样我们在添加新的控制器和新建视图的时候就可以看到我们自定义的模板了：</p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><img src="https://images2015.cnblogs.com/blog/459756/201607/459756-20160718162336404-1047653092.png" alt="" style="border:0px;"></p> 
   <div style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;text-align:right;"> 
    <a href="http://www.cnblogs.com/landeanfen/p/5667022.html#_labelTop" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">回到顶部</a>
    <a name="_label1" style="color:rgb(39,105,192);"></a> 
   </div> 
   <h1 style="font-size:25px;line-height:31px;color:rgb(255,255,255);font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(43,102,0);">二、T4代码介绍</h1> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">上面介绍了如何新建自己的模板，模板建好之后就要开始往里面塞相应的内容了，如果T4的语法展开了说，那一篇是说不完的，有兴趣的园友可以去园子里找找，文章还是挺多的。这里主要还是来看看几个模板内容。<strong>还有一点需要说明下，貌似从MVC5之后，T4的模板文件后缀全部改成了t4，而之前的模板一直是tt结尾的，没有细究它们语法的区别，估计应该差别不大</strong>。</p> 
   <div style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;text-align:right;"> 
    <a href="http://www.cnblogs.com/landeanfen/p/5667022.html#_labelTop" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">回到顶部</a>
    <a name="_label1_0" style="color:rgb(39,105,192);"></a> 
   </div> 
   <h2 style="font-size:15px;line-height:23px;color:rgb(255,255,255);font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(43,102,149);">1、Controller.cs.t4</h2> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">为什么要重写这个空的控制器模板呢？博主觉得增删改查的好多方法都需要手动去写好麻烦，写一个模板直接生成可以省事很多。来看看模板里面的实现代码：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>&lt;#@ template language=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">C#</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> HostSpecific=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">True</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> #&gt;
&lt;#@ output extension=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">cs</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> #&gt;
&lt;#@ parameter type=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">System.String</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> name=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">ControllerName</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> #&gt;
&lt;#@ parameter type=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">System.String</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> name=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">ControllerRootName</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> #&gt;
&lt;#@ parameter type=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">System.String</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> name=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">Namespace</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> #&gt;
&lt;#@ parameter type=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">System.String</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> name=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">AreaName</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> #&gt;
&lt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#
    </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> index = ControllerName.LastIndexOf(<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">Controller</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">);
    </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> ModelName = ControllerName.Substring(<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,128);">0</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">, index);
#</span>&gt;

<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">using</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> System;
</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">using</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> System.Collections.Generic;
</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">using</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> System.Linq;
</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">using</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> System.Web;
</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">using</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> System.Web.Mvc;
</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">using</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> TestKO.Models;

</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">namespace</span> &lt;#= Namespace #&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">
{
    </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">class</span> &lt;#= ControllerName #&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> : Controller
    {
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> ActionResult Index()
        {
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> View();
        }

        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> ActionResult Edit(&lt;#= ModelName #&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> model)
        {
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> View(model);
        }


        [HttpGet]
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> JsonResult Get(<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">int</span> limit, <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">int</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> offset)
        {
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span> Json(<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">new</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> { }, JsonRequestBehavior.AllowGet);
        }

        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">新增实体</span>
<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">        [HttpPost]
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> JsonResult Add(&lt;#= ModelName #&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> oData)
        {
            </span>&lt;#= ModelName #&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">Model.Add(oData);
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span> Json(<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">new</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> { }, JsonRequestBehavior.AllowGet);
        }

        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">更新实体</span>
<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">        [HttpPost]
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> JsonResult Update(&lt;#= ModelName #&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> oData)
        {
            </span>&lt;#= ModelName #&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">Model.Update(oData);
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span> Json(<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">new</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> { }, JsonRequestBehavior.AllowGet);
        }

        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">删除实体</span>
<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">        [HttpPost]
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> JsonResult Delete(List&lt;&lt;#= ModelName #&gt;&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> oData)
        {
            </span>&lt;#= ModelName #&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">Model.Delete(oData);
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span> Json(<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">new</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> { }, JsonRequestBehavior.AllowGet);
        }
    }
}</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">这个内容不难理解，直接查看生成的控制器代码：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">using</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> System;
</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">using</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> System.Collections.Generic;
</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">using</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> System.Linq;
</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">using</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> System.Web;
</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">using</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> System.Web.Mvc;
</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">using</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> TestKO.Models;

</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">namespace</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> TestKO.Controllers
{
    </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> UserController : Controller
    {
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> ActionResult Index()
        {
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> View();
        }

        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> ActionResult Edit(User model)
        {
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> View(model);
        }


        [HttpGet]
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> JsonResult Get(<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">int</span> limit, <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">int</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> offset)
        {
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span> Json(<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">new</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> { }, JsonRequestBehavior.AllowGet);
        }

        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">新增实体</span>
<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">        [HttpPost]
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> JsonResult Add(User oData)
        {
            UserModel.Add(oData);
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span> Json(<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">new</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> { }, JsonRequestBehavior.AllowGet);
        }

        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">更新实体</span>
<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">        [HttpPost]
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> JsonResult Update(User oData)
        {
            UserModel.Update(oData);
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span> Json(<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">new</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> { }, JsonRequestBehavior.AllowGet);
        }

        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">删除实体</span>
<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">        [HttpPost]
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> JsonResult Delete(List&lt;User&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> oData)
        {
            UserModel.Delete(oData);
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span> Json(<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">new</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> { }, JsonRequestBehavior.AllowGet);
        }
    }
}</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <div style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;text-align:right;"> 
    <a href="http://www.cnblogs.com/landeanfen/p/5667022.html#_labelTop" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">回到顶部</a>
    <a name="_label1_1" style="color:rgb(39,105,192);"></a> 
   </div> 
   <h2 style="font-size:15px;line-height:23px;color:rgb(255,255,255);font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(43,102,149);">2、KoIndex.cs.t4</h2> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">这个模板主要用于生成列表页面，大致代码如下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>&lt;#@ template language=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">C#</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> HostSpecific=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">True</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> #&gt;
&lt;#@ output extension=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">.cshtml</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> #&gt;
&lt;#@ include file=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">Imports.include.t4</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> #&gt;
&lt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#
</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);"> The following chained if-statement outputs the file header code and markup for a partial view, a view using a layout page, or a regular view.</span>
<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">if</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">(IsPartialView) {
#</span>&gt;

&lt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#
} </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">else</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">if</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">(IsLayoutPageSelected) {
#</span>&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">
@{
    ViewBag.Title </span>= <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">&lt;#= ViewName#&gt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">;
</span>&lt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#
</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">if</span> (!<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">String.IsNullOrEmpty(LayoutPageFile)) {
#</span>&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">
    Layout </span>= <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">&lt;#= LayoutPageFile#&gt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">;
</span>&lt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#
}
#</span>&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">
}
</span>&lt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#
} </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">else</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> {
#</span>&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">
@{
    Layout </span>= <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">null</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">;
}

</span>&lt;!DOCTYPE html&gt;

&lt;html&gt;
&lt;head&gt;
    &lt;meta name=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">viewport</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> content=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">width=device-width</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> /&gt;
    &lt;title&gt;&lt;#= ViewName #&gt;&lt;/title&gt;
    &lt;link href=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">~/Content/bootstrap/css/bootstrap.min.css</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> rel=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">stylesheet</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> /&gt;
    &lt;link href=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">~/Content/bootstrap-table/bootstrap-table.min.css</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> rel=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">stylesheet</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> /&gt;

    &lt;script src=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">~/scripts/jquery-1.9.1.min.js</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;&lt;/script&gt;
    &lt;script src=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">~/Content/bootstrap/js/bootstrap.min.js</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;&lt;/script&gt;
    &lt;script src=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">~/Content/bootstrap-table/bootstrap-table.min.js</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;&lt;/script&gt;
    &lt;script src=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">~/Content/bootstrap-table/locale/bootstrap-table-zh-CN.js</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;&lt;/script&gt;

    &lt;script src=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">~/scripts/knockout/knockout-3.4.0.min.js</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;&lt;/script&gt;
    &lt;script src=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">~/scripts/knockout/extensions/knockout.mapping-latest.js</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;&lt;/script&gt;
    &lt;script src=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">~/scripts/extensions/knockout.index.js</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;&lt;/script&gt;
    &lt;script src=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">~/scripts/extensions/knockout.bootstraptable.js</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;&lt;/script&gt;
    &lt;script type=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">text/javascript</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">
        $(function () {
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> viewModel =<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> {
                bindId: </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">div_index</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">,
                tableParams :
                {
                    url : </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">/&lt;#=ViewDataTypeShortName#&gt;/Get</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">,
                    pageSize : </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,128);">2</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">,
                },
                urls :
                {
                    del : </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">/&lt;#=ViewDataTypeShortName#&gt;/Delete</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">,
                    edit : </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">/&lt;#=ViewDataTypeShortName#&gt;/Edit</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">,
                    add : </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">/&lt;#=ViewDataTypeShortName#&gt;/Edit</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">,
                },
                queryCondition :
                {
                    
                }
            };
            ko.bindingViewModel(viewModel);
        });
    </span>&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#
    PushIndent(</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">);
}
#</span>&gt;
&lt;div id=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">toolbar</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;
    &lt;button data-bind=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">click:addClick</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> type=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">button</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">class</span>=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">btn btn-default</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;
         &lt;span <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">class</span>=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">glyphicon glyphicon-plus</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> aria-hidden=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">true</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;&lt;/span&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">新增
    </span>&lt;/button&gt;
    &lt;button data-bind=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">click:editClick</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> type=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">button</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">class</span>=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">btn btn-default</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;
        &lt;span <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">class</span>=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">glyphicon glyphicon-pencil</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> aria-hidden=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">true</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;&lt;/span&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">修改
    </span>&lt;/button&gt;
    &lt;button data-bind=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">click:deleteClick</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> type=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">button</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">class</span>=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">btn btn-default</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;
        &lt;span <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">class</span>=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">glyphicon glyphicon-remove</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> aria-hidden=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">true</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;&lt;/span&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">删除
    </span>&lt;/button&gt;
&lt;/div&gt;
&lt;table data-bind=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">bootstrapTable:bootstrapTable</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;
    &lt;thead&gt;
        &lt;tr&gt;
            &lt;th data-checkbox=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">true</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;&lt;/th&gt;
&lt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#
IEnumerable</span>&lt;PropertyMetadata&gt; properties =<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> ModelMetadata.Properties;
</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">foreach</span> (PropertyMetadata property <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">in</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> properties) {
    </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">if</span> (property.Scaffold &amp;&amp; !property.IsPrimaryKey &amp;&amp; !<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">property.IsForeignKey) {
#</span>&gt;
            &lt;th data-field=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">&lt;#= GetValueExpression(property) #&gt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;&lt;#= GetValueExpression(property) #&gt;&lt;/th&gt;
&lt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#
    }
}#</span>&gt;
        &lt;/tr&gt;
    &lt;/thead&gt;
&lt;/table&gt;
&lt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#
</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);"> The following code closes the tag used in the case of a view using a layout page and the body and html tags in the case of a regular view page</span>
#&gt;
&lt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#
</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">if</span>(!IsPartialView &amp;&amp; !<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">IsLayoutPageSelected) {
    ClearIndent();
#</span>&gt;
&lt;/body&gt;
&lt;/html&gt;
&lt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#
}
#</span>&gt;
&lt;#@ include file=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">ModelMetadataFunctions.cs.include.t4</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> #&gt;</pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">添加一个视图Index，然后选择这个模板</p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><img src="https://images2015.cnblogs.com/blog/459756/201607/459756-20160718164108997-426034104.png" alt="" style="border:0px;"></p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">得到的页面内容</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border:1px solid #808080;line-height:1.5;">Index.cshtml</span> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">我们将上篇说的viewmodel搬到页面上面来了，这样每次就不用从controller里面传过来了。稍微改一下表格的列名，页面就可以跑起来了。</p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">这里有待优化的几点：</p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">（1）查询条件没有生成，如果将T4的语法研究深一点，可以在需要查询的字段上面添加特性标识哪些字段需要查询，然后自动生成对应的查询条件。</p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">（2）表格的列名似乎也可以通过属性的字段特性来生成。这点和第一点类似，都需要研究T4的语法。</p> 
   <div style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;text-align:right;"> 
    <a href="http://www.cnblogs.com/landeanfen/p/5667022.html#_labelTop" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">回到顶部</a>
    <a name="_label1_2" style="color:rgb(39,105,192);"></a> 
   </div> 
   <h2 style="font-size:15px;line-height:23px;color:rgb(255,255,255);font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(43,102,149);">3、KoEdit.cs.t4</h2> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">第三个模板页就是编辑的模板了，它的大致代码如下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>&lt;#@ template language=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">C#</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> HostSpecific=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">True</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> #&gt;
&lt;#@ output extension=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">.cshtml</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> #&gt;
&lt;#@ include file=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">Imports.include.t4</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> #&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">
@model </span>&lt;#= ViewDataTypeName #&gt;
&lt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#
</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);"> "form-control" attribute is only supported for all EditorFor() in System.Web.Mvc 5.1.0.0 or later versions, except for checkbox, which uses a div in Bootstrap</span>
<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">string</span> boolType = <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">System.Boolean</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">;
Version requiredMvcVersion </span>= <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">new</span> Version(<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">5.1.0.0</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">);
</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">bool</span> isControlHtmlAttributesSupported = MvcVersion &gt;=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> requiredMvcVersion;
</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);"> The following chained if-statement outputs the file header code and markup for a partial view, a view using a layout page, or a regular view.</span>
<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">if</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">(IsPartialView) {
#</span>&gt;

&lt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#
} </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">else</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">if</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">(IsLayoutPageSelected) {
#</span>&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">

@{
    ViewBag.Title </span>= <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">&lt;#= ViewName#&gt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">;
</span>&lt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#
</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">if</span> (!<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">String.IsNullOrEmpty(LayoutPageFile)) {
#</span>&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">
    Layout </span>= <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">&lt;#= LayoutPageFile#&gt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">;
</span>&lt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#
}
#</span>&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">
}

</span>&lt;h2&gt;&lt;#= ViewName#&gt;&lt;/h2&gt;

&lt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#
} </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">else</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> {
#</span>&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">

@{
    Layout </span>= <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">null</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">;
}

</span>&lt;!DOCTYPE html&gt;

&lt;html&gt;
&lt;head&gt;
    &lt;meta name=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">viewport</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> content=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">width=device-width</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> /&gt;
    &lt;title&gt;&lt;#= ViewName #&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#
    PushIndent(</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">);
}
#</span>&gt;
&lt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#
</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">if</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> (ReferenceScriptLibraries) {
#</span>&gt;
&lt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#
    </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">if</span> (!IsLayoutPageSelected &amp;&amp;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> IsBundleConfigPresent) {
#</span>&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">
@Scripts.Render(</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">~/bundles/jquery</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">)
@Scripts.Render(</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">~/bundles/jqueryval</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">)

</span>&lt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#
    }
#</span>&gt;
&lt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#
    </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">else</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">if</span> (!<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">IsLayoutPageSelected) {
#</span>&gt;
&lt;script src=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">~/Scripts/jquery-&lt;#= JQueryVersion #&gt;.min.js</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;&lt;/script&gt;
&lt;script src=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">~/Scripts/jquery.validate.min.js</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;&lt;/script&gt;
&lt;script src=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">~/Scripts/jquery.validate.unobtrusive.min.js</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;&lt;/script&gt;

&lt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#
    }
#</span>&gt;

&lt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#
}
#</span>&gt;
&lt;form id=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">formEdit</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">class</span>=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">form-horizontal</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">
    @Html.HiddenFor(model </span>=&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> model.Id)
    </span>&lt;div <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">class</span>=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">modal-body</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;
&lt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#
IEnumerable</span>&lt;PropertyMetadata&gt; properties =<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> ModelMetadata.Properties;
</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">foreach</span> (PropertyMetadata property <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">in</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> properties) {
    </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">if</span> (property.Scaffold &amp;&amp; !property.IsPrimaryKey &amp;&amp; !<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">property.IsForeignKey) {
#</span>&gt;
        &lt;div <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">class</span>=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">form-group</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">
            @Html.LabelFor(model </span>=&gt; model.&lt;#= GetValueExpression(property) #&gt;, <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">&lt;#= GetValueExpression(property) #&gt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>, <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">new</span> { @class = <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">control-label col-xs-2</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> })
            </span>&lt;div <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">class</span>=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">col-xs-10</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">
                @Html.TextBoxFor(model </span>=&gt; model.&lt;#= GetValueExpression(property) #&gt;, <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">new</span> { @class = <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">form-control</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>, data_bind = <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">value:editModel.&lt;#= GetValueExpression(property) #&gt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> })
            </span>&lt;/div&gt;
        &lt;/div&gt;
&lt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#
    }
}
#</span>&gt;
    &lt;/div&gt;
    &lt;div <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">class</span>=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">modal-footer</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;
         &lt;button type=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">button</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">class</span>=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">btn btn-default</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> data-dismiss=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">modal</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;&lt;span <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">class</span>=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">glyphicon glyphicon-remove</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> aria-hidden=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">true</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;&lt;/span&gt;关闭&lt;/button&gt;
                &lt;button type=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">submit</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">class</span>=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">btn btn-primary</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;&lt;span <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">class</span>=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">glyphicon glyphicon-floppy-disk</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> aria-hidden=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">true</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;&lt;/span&gt;保存&lt;/button&gt;
    &lt;/div&gt;
&lt;/form&gt;
&lt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#
    </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> index = ViewDataTypeName.LastIndexOf(<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">.</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">);
    </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> ModelName = ViewDataTypeName.Substring(index+<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,128);">1</span>, ViewDataTypeName.Length-index-<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,128);">1</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">);
#</span>&gt;
&lt;script src=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">~/Scripts/extensions/knockout.edit.js</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;&lt;/script&gt;
&lt;script type=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">text/javascript</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">
    $(function () {
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> model =<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> @Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(Model));
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> viewModel =<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> {
            formId: </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">formEdit</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">,
            editModel : model,
            urls :
            {
                submit : model.id </span>== <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,128);">0</span> ? <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">/&lt;#= ModelName #&gt;/Add</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> : <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">/&lt;#= ModelName #&gt;/Update</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">
            },
            validator:{
                fields: { 
                    Name: {
                        validators: {
                            notEmpty: {
                                message: </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">'</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">名称不能为空！</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">'</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">
                            }
                        }
                    }
                }
            }
        };
        ko.bindingEditViewModel(viewModel);  
    });
</span>&lt;/script&gt;
&lt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#
</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">if</span>(IsLayoutPageSelected &amp;&amp; ReferenceScriptLibraries &amp;&amp;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> IsBundleConfigPresent) {
#</span>&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">

@section Scripts {
    @Scripts.Render(</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">~/bundles/jqueryval</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">)
}
</span>&lt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#
}
#</span>&gt;
&lt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#
</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">else</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">if</span>(IsLayoutPageSelected &amp;&amp;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> ReferenceScriptLibraries) {
#</span>&gt;

&lt;script src=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">~/Scripts/jquery-&lt;#= JQueryVersion #&gt;.min.js</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;&lt;/script&gt;
&lt;script src=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">~/Scripts/jquery.validate.min.js</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;&lt;/script&gt;
&lt;script src=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">~/Scripts/jquery.validate.unobtrusive.min.js</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>&gt;&lt;/script&gt;
&lt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#
}
#</span>&gt;
&lt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#
</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);"> The following code closes the tag used in the case of a view using a layout page and the body and html tags in the case of a regular view page</span>
#&gt;
&lt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#
</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">if</span>(!IsPartialView &amp;&amp; !<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">IsLayoutPageSelected) {
    ClearIndent();
#</span>&gt;
&lt;/body&gt;
&lt;/html&gt;
&lt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#
}
#</span>&gt;
&lt;#@ include file=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">ModelMetadataFunctions.cs.include.t4</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span> #&gt;</pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><img src="https://images2015.cnblogs.com/blog/459756/201607/459756-20160718165018716-1262523122.png" alt="" style="border:0px;"></p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">生成的代码：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border:1px solid #808080;line-height:1.5;">Edit.cshtml</span> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">&nbsp;当然，代码也需要做稍许修改。通过添加自定义的模板页，只要后台对应的实体模型建好了，在前端只需要新建两个自定义视图，一个简单的增删改查即可完成，不用写一句js代码。</p> 
   <div style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;text-align:right;"> 
    <a href="http://www.cnblogs.com/landeanfen/p/5667022.html#_labelTop" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">回到顶部</a>
    <a name="_label2" style="color:rgb(39,105,192);"></a> 
   </div> 
   <h1 style="font-size:25px;line-height:31px;color:rgb(255,255,255);font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(43,102,0);">&nbsp;三、select组件的绑定</h1> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">上面介绍了下T4封装增删改查的语法，页面所有的组件基本都是文本框，然而，在实际项目中，很多的查询和编辑页面都会存在下拉框的展示，对于下拉框，我们该如何处理呢？不卖关子了，直接给出解决方案吧，比如编辑页面我们可以在后台将下拉框的数据源放在实体里面。</p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">用户的实体</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">[DataContract]
    </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> User
    {
        [DataMember]
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">int</span> id { <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">get</span>; <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">set</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">; }

        [DataMember]
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">string</span> Name { <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">get</span>; <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">set</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">; }

        [DataMember]
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">string</span> FullName { <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">get</span>; <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">set</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">; }

        [DataMember]
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">int</span> Age { <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">get</span>; <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">set</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">; }

        [DataMember]
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">string</span> Des { <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">get</span>; <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">set</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">; }

        [DataMember]
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> DateTime Createtime { <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">get</span>; <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">set</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">; }

        [DataMember]
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">string</span> strCreatetime { <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">get</span>; <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">set</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">; }

        [DataMember]
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">string</span> DepartmentId { <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">get</span>; <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">set</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">; }

        [DataMember]
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">object</span> Departments { <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">get</span>; <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">set</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">; }
    }</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">然后编辑页面</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;">
    <pre>        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> ActionResult Edit(User model)
        {
            model.Departments </span>=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> DepartmentModel.GetData();
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> View(model);
        }</span></pre>
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">然后前端绑定即可。</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>                <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">div </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="form-group"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">label </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">for</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="txt_des"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>所属部门<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">label</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">select </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">id</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="sel_dept"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="form-control"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> data-bind</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="options: editModel.Departments,
                            optionsText: 'Name',
                            optionsValue: 'Id',
                            value:editModel.DepartmentId"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">select</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">div</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">JS代码不用做任何修改，新增和编辑的时候部门字段就能自动添加到viewmodel里面去。</p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">当然，我们很多项目使用的下拉框都不是单纯的select，因为单纯的select样式实在是难看，于是乎出了很多的select组件，比如博主之前分享的select2、MultiSelect等等。当使用这些组件去初始化select时，审核元素你会发现，这个时候界面上的下拉框已经不是单纯的select标签了，而是由组件自定义的很多其他标签组成。我们就以select2组件为例来看看直接按照上面的这样初始化是否可行。</p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">我们将编辑页面初始化的js代码增加最后一句：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">script </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">type</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="text/javascript"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">
    $(</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> () {
</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> model </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">=</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> @Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(Model));
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> viewModel </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">=</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> {
            formId: </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">formEdit</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">,
            editModel : model,
            urls :
            {
                submit : model.id </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">==</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;">0</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;">?</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">/User/Add</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> : </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">/User/Update</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">
            },
            validator:{
                fields: {
                    Name: {
                        validators: {
                            notEmpty: {
                                message: </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">'</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">名称不能为空！</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">'</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">
                            }
                        }
                    }
                }
            }
        };
        ko.bindingEditViewModel(viewModel);

        $(</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#sel_dept</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">).select2({})</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">;
    });
</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">script</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">通过新增和编辑发现，这样确实可行！分析原因，虽然初始化成select2组件之后，页面的html发生了变化，但是组件最终还是会将选中值呈现在原始的select控件上面。不知道除了select2，其他select初始化组件会不会这样，待验证。但是这里有一点需要说明下，在初始化select2之前，下拉框的options必须先绑定值，也就是说，组件的初始化必须要放在ko.applyBinding()之后。</p> 
   <div style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;text-align:right;"> 
    <a href="http://www.cnblogs.com/landeanfen/p/5667022.html#_labelTop" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">回到顶部</a>
    <a name="_label3" style="color:rgb(39,105,192);"></a> 
   </div> 
   <h1 style="font-size:25px;line-height:31px;color:rgb(255,255,255);font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(43,102,0);">四、总结</h1> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">至此，ko结合bootstrapTable的模板生成以及select控件的使用基本可用，当然，还有待完善。后面如果有时间，博主会整理下其他前端组件和ko的联合使用，比如我们最常见的日期控件。如果你觉得本文对你有帮助，欢迎<strong>推荐</strong>。</p> 
   <div>
    <br>
   </div> 
   <div>
    <br>
   </div> 
   <div>
    <br>
   </div> 
   <div>
    <br>
   </div> 
   <div>
    <br>
   </div> 
   <div>
    <br>
   </div> 
   <div>
    <br>
   </div> 
   <div>
    本文转自懒得安分博客园博客，原文链接：http://www.cnblogs.com/landeanfen/p/5667022.html，如需转载请自行联系原作者
    <br>
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
