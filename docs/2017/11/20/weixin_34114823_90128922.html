<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>EntityFramework 6.x多个上下文迁移实现分布式事务 « NotBeCN</title>
  <meta name="description" content="             前言         自从项目上了.NET Core平台用上了EntityFramework Core就再没碰过EntityFramework 6.x版本，目前而言EntityFramework 6.x是用的最多，无论是找工作而言还是提升自身技术而言皆自身收益，同时呢，大多数时间除了工作...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/20/weixin_34114823_90128922.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">EntityFramework 6.x多个上下文迁移实现分布式事务</h1>
    <p class="post-meta">Nov 20, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <h1 style="font-size:28px;line-height:1.5;font-family:'Helvetica Neue', Arial;">前言</h1> 
   <h1 style="font-size:28px;line-height:1.5;font-family:'Helvetica Neue', Arial;"> </h1> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">自从项目上了.NET Core平台用上了EntityFramework Core就再没碰过EntityFramework 6.x版本，目前而言EntityFramework 6.x是用的最多，无论是找工作而言还是提升自身技术而言皆自身收益，同时呢，大多数时间除了工作之外，还留有一小部分时间在写EntityFramework 6.x和EntityFramework Core的书籍，所以将EntityFramework 6.x相当于是从零学起，EntityFramework 6.x又添加了许多特性，所以花了一些时间去看并整理了下来，本节相当于是自己一直未碰到过的问题，于是花了一点时间在多个上下文迁移到不同数据库并实现分布式事务上，作为基础入口且同步于书籍，供阅读者学习也是我的点滴积累，文章如有错误，请指正。</p> 
   <h2 style="color:rgb(255,255,255);line-height:1.5;font-size:21px;font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(111,168,51);">模型建立</h2> 
   <h1 style="font-size:28px;line-height:1.5;font-family:'Helvetica Neue', Arial;"> </h1> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">在开始EntityFramework 6.x内容叙述之前，我们还是老套路，首先准备模型，我们搞一个预约航班的基本模型，一个是航班实体，另外一个为预约实体，请看如下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-weight:normal;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>    <span style="color:rgb(128,128,128);line-height:1.5;">///</span> <span style="color:rgb(128,128,128);line-height:1.5;">&lt;summary&gt;</span>
    <span style="color:rgb(128,128,128);line-height:1.5;">///</span><span style="color:rgb(0,128,0);line-height:1.5;"> 航班
    </span><span style="color:rgb(128,128,128);line-height:1.5;">///</span> <span style="color:rgb(128,128,128);line-height:1.5;">&lt;/summary&gt;</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> FlightBooking
    {
        </span><span style="color:rgb(128,128,128);line-height:1.5;">///</span> <span style="color:rgb(128,128,128);line-height:1.5;">&lt;summary&gt;</span>
        <span style="color:rgb(128,128,128);line-height:1.5;">///</span><span style="color:rgb(0,128,0);line-height:1.5;"> 航班Id
        </span><span style="color:rgb(128,128,128);line-height:1.5;">///</span> <span style="color:rgb(128,128,128);line-height:1.5;">&lt;/summary&gt;</span>
        <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">int</span> FlightId { <span style="color:rgb(0,0,255);line-height:1.5;">get</span>; <span style="color:rgb(0,0,255);line-height:1.5;">set</span><span style="line-height:1.5;">; }

        </span><span style="color:rgb(128,128,128);line-height:1.5;">///</span> <span style="color:rgb(128,128,128);line-height:1.5;">&lt;summary&gt;</span>
        <span style="color:rgb(128,128,128);line-height:1.5;">///</span><span style="color:rgb(0,128,0);line-height:1.5;"> 航班名称
        </span><span style="color:rgb(128,128,128);line-height:1.5;">///</span> <span style="color:rgb(128,128,128);line-height:1.5;">&lt;/summary&gt;</span>
        <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">string</span> FilghtName { <span style="color:rgb(0,0,255);line-height:1.5;">get</span>; <span style="color:rgb(0,0,255);line-height:1.5;">set</span><span style="line-height:1.5;">; }

        </span><span style="color:rgb(128,128,128);line-height:1.5;">///</span> <span style="color:rgb(128,128,128);line-height:1.5;">&lt;summary&gt;</span>
        <span style="color:rgb(128,128,128);line-height:1.5;">///</span><span style="color:rgb(0,128,0);line-height:1.5;"> 航班号
        </span><span style="color:rgb(128,128,128);line-height:1.5;">///</span> <span style="color:rgb(128,128,128);line-height:1.5;">&lt;/summary&gt;</span>
        <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">string</span> Number { <span style="color:rgb(0,0,255);line-height:1.5;">get</span>; <span style="color:rgb(0,0,255);line-height:1.5;">set</span><span style="line-height:1.5;">; }

        </span><span style="color:rgb(128,128,128);line-height:1.5;">///</span> <span style="color:rgb(128,128,128);line-height:1.5;">&lt;summary&gt;</span>
        <span style="color:rgb(128,128,128);line-height:1.5;">///</span><span style="color:rgb(0,128,0);line-height:1.5;"> 出行日期
        </span><span style="color:rgb(128,128,128);line-height:1.5;">///</span> <span style="color:rgb(128,128,128);line-height:1.5;">&lt;/summary&gt;</span>
        <span style="color:rgb(0,0,255);line-height:1.5;">public</span> DateTime TravellingDate { <span style="color:rgb(0,0,255);line-height:1.5;">get</span>; <span style="color:rgb(0,0,255);line-height:1.5;">set</span><span style="line-height:1.5;">; }
    }</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-weight:normal;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>    <span style="color:rgb(128,128,128);line-height:1.5;">///</span> <span style="color:rgb(128,128,128);line-height:1.5;">&lt;summary&gt;</span>
    <span style="color:rgb(128,128,128);line-height:1.5;">///</span><span style="color:rgb(0,128,0);line-height:1.5;"> 预订
    </span><span style="color:rgb(128,128,128);line-height:1.5;">///</span> <span style="color:rgb(128,128,128);line-height:1.5;">&lt;/summary&gt;</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> Reservation
    {
        </span><span style="color:rgb(128,128,128);line-height:1.5;">///</span> <span style="color:rgb(128,128,128);line-height:1.5;">&lt;summary&gt;</span>
        <span style="color:rgb(128,128,128);line-height:1.5;">///</span><span style="color:rgb(0,128,0);line-height:1.5;"> 预订Id
        </span><span style="color:rgb(128,128,128);line-height:1.5;">///</span> <span style="color:rgb(128,128,128);line-height:1.5;">&lt;/summary&gt;</span>
        <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">int</span> BookingId { <span style="color:rgb(0,0,255);line-height:1.5;">get</span>; <span style="color:rgb(0,0,255);line-height:1.5;">set</span><span style="line-height:1.5;">; }

        </span><span style="color:rgb(128,128,128);line-height:1.5;">///</span> <span style="color:rgb(128,128,128);line-height:1.5;">&lt;summary&gt;</span>
        <span style="color:rgb(128,128,128);line-height:1.5;">///</span><span style="color:rgb(0,128,0);line-height:1.5;"> 预订人
        </span><span style="color:rgb(128,128,128);line-height:1.5;">///</span> <span style="color:rgb(128,128,128);line-height:1.5;">&lt;/summary&gt;</span>
        <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">string</span> Name { <span style="color:rgb(0,0,255);line-height:1.5;">get</span>; <span style="color:rgb(0,0,255);line-height:1.5;">set</span><span style="line-height:1.5;">; }

        </span><span style="color:rgb(128,128,128);line-height:1.5;">///</span> <span style="color:rgb(128,128,128);line-height:1.5;">&lt;summary&gt;</span>
        <span style="color:rgb(128,128,128);line-height:1.5;">///</span><span style="color:rgb(0,128,0);line-height:1.5;"> 预订日期
        </span><span style="color:rgb(128,128,128);line-height:1.5;">///</span> <span style="color:rgb(128,128,128);line-height:1.5;">&lt;/summary&gt;</span>
        <span style="color:rgb(0,0,255);line-height:1.5;">public</span> DateTime BookingDate { <span style="color:rgb(0,0,255);line-height:1.5;">get</span>; <span style="color:rgb(0,0,255);line-height:1.5;">set</span>; } =<span style="line-height:1.5;"> DateTime.Now;
    }</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-weight:normal;font-family:'Courier New';font-size:12px;">
    <pre>    <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> TripReservation
    {
        </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> FlightBooking Filght { <span style="color:rgb(0,0,255);line-height:1.5;">get</span>; <span style="color:rgb(0,0,255);line-height:1.5;">set</span><span style="line-height:1.5;">; }
        </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> Reservation Hotel { <span style="color:rgb(0,0,255);line-height:1.5;">get</span>; <span style="color:rgb(0,0,255);line-height:1.5;">set</span><span style="line-height:1.5;">; }
    }</span></pre>
   </div> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">此类用于维护航班和预约的实体，在创建预约航班时使用。在EntityFramework 6.0+版本上出现了基于代码配置（Code-based Configuration），对于数据库初始化策略和其他等等配置，我们单独建立一个配置类来维护，而无需如我们以往一样放在DbContext上下文派生类构造函数中，这样一来上下文派生类看起来则洁净很多。</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-weight:normal;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>    <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> HotelFlightConfiguration : DbConfiguration
    {
        </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span><span style="line-height:1.5;"> HotelFlightConfiguration()
        {           
            SetDatabaseInitializer(</span><span style="color:rgb(0,0,255);line-height:1.5;">new</span> DropCreateDatabaseIfModelChanges&lt;HotelDBContext&gt;<span style="line-height:1.5;">());
            SetDatabaseInitializer(</span><span style="color:rgb(0,0,255);line-height:1.5;">new</span> DropCreateDatabaseIfModelChanges&lt;FlightDBContext&gt;<span style="line-height:1.5;">());
        }
    }</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">接下来我们再来配置两个DbContext上下文派生类即HotelDbContext和FlightDbContext，并且基本配置信息利用特性来修饰，如下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-weight:normal;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>    [DbConfigurationType(<span style="color:rgb(0,0,255);line-height:1.5;">typeof</span><span style="line-height:1.5;">(HotelFlightConfiguration))]
    </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> FlightDBContext : DbContext
    {
        </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> FlightDBContext() : <span style="color:rgb(0,0,255);line-height:1.5;">base</span>(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">name=flightConnection</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">)
        { }

        </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> DbSet&lt;FlightBooking&gt; FlightBookings { <span style="color:rgb(0,0,255);line-height:1.5;">get</span>; <span style="color:rgb(0,0,255);line-height:1.5;">set</span><span style="line-height:1.5;">; }

        </span><span style="color:rgb(0,0,255);line-height:1.5;">protected</span> <span style="color:rgb(0,0,255);line-height:1.5;">override</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Configurations.Add(</span><span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> FlightBookingMap());
            </span><span style="color:rgb(0,0,255);line-height:1.5;">base</span><span style="line-height:1.5;">.OnModelCreating(modelBuilder);
        }
    }</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-weight:normal;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>    [DbConfigurationType(<span style="color:rgb(0,0,255);line-height:1.5;">typeof</span><span style="line-height:1.5;">(HotelFlightConfiguration))]
    </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> HotelDBContext: DbContext
    {
        </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> HotelDBContext():<span style="color:rgb(0,0,255);line-height:1.5;">base</span>(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">name=reservationConnction</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">)
        { }

        </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> DbSet&lt;Reservation&gt; Reservations { <span style="color:rgb(0,0,255);line-height:1.5;">get</span>; <span style="color:rgb(0,0,255);line-height:1.5;">set</span><span style="line-height:1.5;">; }

        </span><span style="color:rgb(0,0,255);line-height:1.5;">protected</span> <span style="color:rgb(0,0,255);line-height:1.5;">override</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Configurations.Add(</span><span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> ReservationMap());
            </span><span style="color:rgb(0,0,255);line-height:1.5;">base</span><span style="line-height:1.5;">.OnModelCreating(modelBuilder);
        }
    }</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">对应的映射配置已经叙述很多次了，我们不用废话，直接给出。</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-weight:normal;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>    <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span> FlightBookingMap : EntityTypeConfiguration&lt;FlightBooking&gt;<span style="line-height:1.5;">
    {
        </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span><span style="line-height:1.5;"> FlightBookingMap()
        {
            </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">table</span>
            ToTable(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">FlightBookings</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">);

            </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">key</span>
            HasKey(k =&gt;<span style="line-height:1.5;"> k.FlightId);

            </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">property</span>
            Property(p =&gt; p.FilghtName).HasMaxLength(<span style="color:rgb(128,0,128);line-height:1.5;">50</span><span style="line-height:1.5;">);
            Property(p </span>=&gt;<span style="line-height:1.5;"> p.Number);
            Property(p </span>=&gt;<span style="line-height:1.5;"> p.TravellingDate);
        }
    }</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-weight:normal;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>    <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span> ReservationMap : EntityTypeConfiguration&lt;Reservation&gt;<span style="line-height:1.5;">
    {
        </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span><span style="line-height:1.5;"> ReservationMap()
        {
            </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">table</span>
            ToTable(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">Reservations</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">);

            </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">key</span>
            HasKey(k =&gt;<span style="line-height:1.5;"> k.BookingId);

            </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">property</span>
            Property(p =&gt;<span style="line-height:1.5;"> p.BookingId).HasDatabaseGeneratedOption(DatabaseGeneratedOption.None);
            Property(p </span>=&gt; p.Name).HasMaxLength(<span style="color:rgb(128,0,128);line-height:1.5;">20</span><span style="line-height:1.5;">);
            Property(p </span>=&gt;<span style="line-height:1.5;"> p.BookingDate);
        }
    }</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">如上两个上下文我们将迁移到不同数据库，所以连接字符串当然是两个啦。</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-weight:normal;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>&lt;connectionStrings&gt;
    &lt;add name=<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">reservationConnction</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span> connectionString=<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">Data Source=WANGPENG;Initial Catalog=ReservationDb;Integrated Security=true</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span> providerName=<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">System.Data.SqlClient</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span> /&gt;
    &lt;add name=<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">flightConnection</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span> connectionString=<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">Data Source=WANGPENG;Initial Catalog=FlightDb;Integrated Security=true</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span> providerName=<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">System.Data.SqlClient</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span> /&gt;
  &lt;/connectionStrings&gt;</pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">好了，模型和上下文一切都已构建完毕，接下来进入到迁移，请往下看。</p> 
   <h2 style="color:rgb(255,255,255);line-height:1.5;font-size:21px;font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(111,168,51);">多个上下文迁移</h2> 
   <h1 style="font-size:28px;line-height:1.5;font-family:'Helvetica Neue', Arial;"> </h1> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">一个上下文进行迁移已经没有什么可说的了，在大多数场景下，貌似都是一个应用程序中仅仅存在一个上下文，因为幕后对应的只有一个数据库，这个大家是手到擒来，而对于多个上下文迁移对应不同数据库迁移又怎么去操作呢？如果你非常熟悉迁移命令，那么就当做是回顾吧，如若不然，可以此作为基本参考，有点啰嗦了哈，我们进入正文。将模型迁移至数据库并持久化只需要如下三步。</p> 
   <h3 style="color:rgb(111,168,51);font-size:16px;line-height:1.5;border-left-width:13px;border-left-style:solid;border-left-color:rgb(111,168,51);font-family:'Helvetica Neue', Arial;">多个上下文迁移至不同文件夹目录</h3> 
   <h1 style="font-size:28px;line-height:1.5;font-family:'Helvetica Neue', Arial;"> </h1> 
   <ul style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">
    <li style="list-style:disc inside;"><strong style="font-size:16px;line-height:normal;"><span>Enable-Migrations命令</span></strong></li>
   </ul>
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">&nbsp;<img src="https://images2017.cnblogs.com/blog/589642/201709/589642-20170924123709712-419522079.png" alt="" style="border:0px;"></p> 
   <ul style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">
    <li style="list-style:disc inside;"><strong style="font-size:16px;line-height:normal;">Add-Migration命令</strong></li>
   </ul>
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;"><strong style="font-size:16px;line-height:normal;"><img src="https://images2017.cnblogs.com/blog/589642/201709/589642-20170924123738009-295125401.png" alt="" style="border:0px;"></strong></p> 
   <ul style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">
    <li style="list-style:disc inside;"><strong style="font-size:16px;line-height:normal;">Update-database命令</strong></li>
   </ul>
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;"><strong style="font-size:16px;line-height:normal;"><img src="https://images2017.cnblogs.com/blog/589642/201709/589642-20170924123802853-855449882.png" alt="" style="border:0px;"></strong></p> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">当统一应用程序只存在一个上下文时，我们只需要Enabel-Migrations即可，但是若存在多个上下文，若不明确指定上下文很显然会迁移报错，首先我们在NuGet控制台将项目更换到上下文所在项目中。</p> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;"><img src="https://images2017.cnblogs.com/blog/589642/201709/589642-20170924124305634-1088333366.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">接下来运行Enable-Migrations初始化迁移目录，很明显会出现迁移异常。</p> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;"><img src="https://images2017.cnblogs.com/blog/589642/201709/589642-20170924124411993-1151658509.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">由于存在多个上下文，所以我们需要明确指定迁移哪个上下文。通过在其命令后继续添加-ContextTypeName指定上下文，并继续利用-MigrtionsDirectory指定迁移目录，最后则是如下命令（不知道有哪些命令吗，在每个命令后添加一个【-】横杆并按下Tab键则出现你想要的命令）。</p> 
   <ul style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">
    <li style="list-style:disc inside;"><span style="color:rgb(255,102,0);">Enable-Migrations -ContextTypeName FlightDbContext -MigrationsDirectory:FlightMigrations</span></li>
   </ul>
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;"><img src="https://images2017.cnblogs.com/blog/589642/201709/589642-20170924124918728-2000598970.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">接下来利用Add-Migration命令对已挂起模型改变搭建基架，也就是说将上次迁移后我们对模型发生了更改，以此为下一次迁移搭建基架，此时生成的模型状态为挂起状态或者称作为待定状态。我们需要迁移上述生成FlightMigrations目录下的Configuration类，所以此时在Add-Migration命令后指定-ConfigurationTypeName，然后通过-Name指定第一次基架名称。</p> 
   <ul style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">
    <li style="list-style:disc inside;">&nbsp;<span style="color:rgb(255,102,0);">Add-Migration -ConfigurationTypeName EntityFrameworkTransactionScope.Data.FlightMigrations.Configuration -Name Initial</span> </li>
   </ul>
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;"><span style="color:rgb(255,102,0);">或者</span></p> 
   <ul style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">
    <li style="list-style:disc inside;"><span style="color:rgb(255,102,0);">Add-Migration -ConfigurationTypeName EntityFrameworkTransactionScope.Data.FlightMigrations.Configuration "Initial"</span></li>
   </ul>
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;"><img src="https://images2017.cnblogs.com/blog/589642/201709/589642-20170924125514165-378669887.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">&nbsp;最后则只需要通过Update-database来持久化到数据库生成表了。</p> 
   <ul style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">
    <li style="list-style:disc inside;"><span style="color:rgb(255,102,0);">Update-Database -ConfigurationTypeName EntityFrameworkTransactionScope.Data.FlightMigrations.Configuration&nbsp;</span></li>
   </ul>
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;"><strong style="font-size:16px;line-height:normal;"><img src="https://images2017.cnblogs.com/blog/589642/201709/589642-20170924130624196-1713383311.png" alt="" style="border:0px;"></strong></p> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">同理我们对HotelDbContext利用上述三步命令来进行迁移，最后我们能够很清晰的看到，每个上下文迁移在不同目录，如下：</p> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;"><img src="https://images2017.cnblogs.com/blog/589642/201709/589642-20170924131016462-1624771252.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">上述迁移也没任何毛病，将每个上下文单独迁移生成文件夹，那么我们是否有想过将多个上下文迁移到同一目录文件夹下且区分开来呢，在我们只有一个上下文时默认给我们创建的文件夹为Migrations，我们就在Migrtions文件夹下生成不同上下文迁移配置。</p> 
   <h3 style="color:rgb(111,168,51);font-size:16px;line-height:1.5;border-left-width:13px;border-left-style:solid;border-left-color:rgb(111,168,51);font-family:'Helvetica Neue', Arial;">&nbsp;多个上下文迁移至相同文件夹目录</h3> 
   <h1 style="font-size:28px;line-height:1.5;font-family:'Helvetica Neue', Arial;"> </h1> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">&nbsp;这个其实也很简单，我们在-MigrationDirectoty后面可以直接指定某个文件夹生成上下文，例如C:\A\DbContext，EntityFramework也做到了这点，下面我们来看看。</p> 
   <ul style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">
    <li style="list-style:disc inside;"><span style="color:rgb(255,102,0);">Enable-Migrations -ContextTypeName FlightDbContext -MigrationsDirectory Migrations\FlightDbContext</span></li> 
    <li style="list-style:disc inside;"><span style="color:rgb(255,102,0);">Enable-Migrations -ContextTypeName HotelDbContext -MigrationsDirectory Migrations\HotelDbContext</span></li> 
   </ul>
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">&nbsp;其余两步运行方式和迁移不同一样，最终我们会看到想要的结果。</p> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;"><img src="https://images2017.cnblogs.com/blog/589642/201709/589642-20170924133346993-85136445.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">通过上述迁移最终将生成FlightDb和ReservationDb两个数据库并对应FlightBookings和Reservations表。好了到此关于多个上下文迁移两种方式就结束了，我们继续本节的话题。</p> 
   <h2 style="color:rgb(255,255,255);line-height:1.5;font-size:21px;font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(111,168,51);">分布式事务</h2> 
   <h1 style="font-size:28px;line-height:1.5;font-family:'Helvetica Neue', Arial;"> </h1> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">有时候我们需要跨数据库管理事务，例如有这样一个场景，有两个数据库db1和db2，而tb1在db1中，tb2在db2中，同时tb1和tb2是关联的，在上述中我们创建的航班和预订模型，我们需要同时插入航班数据和预约数据到不同数据库中，此时则要求事务一致性，所以为了处理这样的要求，在.NET 2.0，在System.Transaction命名空间下为我们提供了TransactionScope类。 此类提供了一种使代码块参与事务而不需要与事务本身交互的简单方式。强烈建议在using块中创建TransactionScope对象。</p> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">&nbsp;</p> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">当TransactionScope被实例化时，事务管理器需要确定要参与哪个事务。一旦确定，该实例将一直参与到事务中。 在创建TransactionScope对象时，我们需要传递具有以下值的TransactionScopeOption枚举：</p> 
   <ul style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">
    <li style="list-style:disc inside;"><span style="color:rgb(255,102,0);">Required：实例必须需要事务，如果事务已存在，则使用已存在事务，否则将创建新事务。</span></li> 
    <li style="list-style:disc inside;"><span style="color:rgb(255,102,0);">RequiresNew：始终为实例创建一个新的事务。</span></li> 
    <li style="list-style:disc inside;"><span style="color:rgb(255,102,0);">Suppress：创建实例时，其他已存在事务将被抑制，因为该实例内的所有操作的完成而无需其他已存在事务。</span></li> 
   </ul>
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">接下来我们利用上述枚举中第二种方式来实现航班预约，简单逻辑如下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-weight:normal;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>    <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> MakeReservation
    {

        FlightDBContext flight;

        HotelDBContext hotel;

        </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span><span style="line-height:1.5;"> MakeReservation()
        {
            flight </span>= <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> FlightDBContext();
            hotel </span>= <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> HotelDBContext();
        }

        </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">处理事务方法</span>
        <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">bool</span><span style="line-height:1.5;"> ReservTrip(TripReservation trip)
        {
            </span><span style="color:rgb(0,0,255);line-height:1.5;">bool</span> reserved = <span style="color:rgb(0,0,255);line-height:1.5;">false</span><span style="line-height:1.5;">;

            </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">绑定处理事务范围</span>
            <span style="color:rgb(0,0,255);line-height:1.5;">using</span> (<span style="color:rgb(0,0,255);line-height:1.5;">var</span> scope = <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> TransactionScope(TransactionScopeOption.RequiresNew))
            {
                </span><span style="color:rgb(0,0,255);line-height:1.5;">try</span><span style="line-height:1.5;">
                {
                    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">航班信息</span>
<span style="line-height:1.5;">                    flight.FlightBookings.Add(trip.Filght);
                    flight.SaveChanges();

                    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">预约信息</span>
<span style="line-height:1.5;">                    hotel.Reservations.Add(trip.Hotel);
                    hotel.SaveChanges();

                    reserved </span>= <span style="color:rgb(0,0,255);line-height:1.5;">true</span><span style="line-height:1.5;">;

                    </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">完成事务并提交</span>
<span style="line-height:1.5;">                    scope.Complete();
                }
                </span><span style="color:rgb(0,0,255);line-height:1.5;">catch</span><span style="line-height:1.5;"> (Exception ex)
                {
                    </span><span style="color:rgb(0,0,255);line-height:1.5;">throw</span><span style="line-height:1.5;"> ex;
                }
            }
            </span><span style="color:rgb(0,0,255);line-height:1.5;">return</span><span style="line-height:1.5;"> reserved;
        }
    }</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">上述ReservTrip方法接受TripReservation对象。 该方法定义了TransactionScope，并在事务的上下文中捆绑了用于Flight和Hotel的Create操作，并将代码写入try-catch块中。 如果两个实体的SaveChanges方法成功执行，那么事务将被完成，否则回滚。接下来进行控制器调用。</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-weight:normal;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>    <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> TripController : Controller
    {
        MakeReservation reserv;

        </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span><span style="line-height:1.5;"> TripController()
        {
            reserv </span>= <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> MakeReservation();
        }

        </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span><span style="line-height:1.5;"> ActionResult Index()
        {
            </span><span style="color:rgb(0,0,255);line-height:1.5;">return</span><span style="line-height:1.5;"> View();
        }

        </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span><span style="line-height:1.5;"> ActionResult Create()
        {
            </span><span style="color:rgb(0,0,255);line-height:1.5;">return</span> View(<span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> TripReservation());
        }

        [HttpPost]
        </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span><span style="line-height:1.5;"> ActionResult Create(TripReservation tripinfo)
        {
            </span><span style="color:rgb(0,0,255);line-height:1.5;">try</span><span style="line-height:1.5;">
            {
                tripinfo.Filght.TravellingDate </span>=<span style="line-height:1.5;"> DateTime.Now;
                tripinfo.Hotel.BookingDate </span>=<span style="line-height:1.5;"> DateTime.Now;
                </span><span style="color:rgb(0,0,255);line-height:1.5;">var</span> res =<span style="line-height:1.5;"> reserv.ReservTrip(tripinfo);

                </span><span style="color:rgb(0,0,255);line-height:1.5;">if</span> (!<span style="line-height:1.5;">res)
                {
                    </span><span style="color:rgb(0,0,255);line-height:1.5;">return</span> View(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">Error</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">);
                }
            }
            </span><span style="color:rgb(0,0,255);line-height:1.5;">catch</span><span style="line-height:1.5;"> (Exception)
            {
                </span><span style="color:rgb(0,0,255);line-height:1.5;">return</span> View(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">Error</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">);
            }
            </span><span style="color:rgb(0,0,255);line-height:1.5;">return</span> View(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">Success</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">);
        }
    }</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">我们添加航班预约视图：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-weight:normal;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="line-height:1.5;">@model EntityFrameworkTransactionScope.Data.Entity.TripReservation

@{
    ViewBag.Title = "Create";
}

</span><span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">h2 </span><span style="color:rgb(255,0,0);line-height:1.5;">class</span><span style="color:rgb(0,0,255);line-height:1.5;">="text-center"</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>旅游出行<span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">h2</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span><span style="line-height:1.5;">
@using(Html.BeginForm()){


</span><span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">table </span><span style="color:rgb(255,0,0);line-height:1.5;">class</span><span style="color:rgb(0,0,255);line-height:1.5;">="table table-condensed table-striped table-bordered"</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">tr</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
        <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">td</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
            <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">table </span><span style="color:rgb(255,0,0);line-height:1.5;">class</span><span style="color:rgb(0,0,255);line-height:1.5;">="table table-condensed table-striped table-bordered"</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
                <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">tr</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
                    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">td </span><span style="color:rgb(255,0,0);line-height:1.5;">colspan</span><span style="color:rgb(0,0,255);line-height:1.5;">="2"</span><span style="color:rgb(255,0,0);line-height:1.5;"> class</span><span style="color:rgb(0,0,255);line-height:1.5;">="text-center"</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span><span style="line-height:1.5;">
                        航班信息
                    </span><span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">td</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
                <span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">tr</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
                <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">tr</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
                    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">td</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span><span style="line-height:1.5;">
                       航班Id:
                    </span><span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">td</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
                    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">td</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span><span style="line-height:1.5;">
                        @Html.EditorFor(m =&gt; m.Filght.FlightId)
                    </span><span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">td</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
                <span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">tr</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
                <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">tr</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
                    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">td</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span><span style="line-height:1.5;">
                        航班名称:
                    </span><span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">td</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
                    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">td</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span><span style="line-height:1.5;">
                        @Html.EditorFor(m =&gt; m.Filght.FilghtName)
                    </span><span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">td</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
                <span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">tr</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
                <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">tr</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
                    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">td</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span><span style="line-height:1.5;">
                        航班号:
                    </span><span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">td</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
                    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">td</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span><span style="line-height:1.5;">
                        @Html.EditorFor(m =&gt; m.Filght.Number)
                    </span><span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">td</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
                <span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">tr</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
            <span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">table</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
        <span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">td</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
        <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">td</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
            <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">table </span><span style="color:rgb(255,0,0);line-height:1.5;">class</span><span style="color:rgb(0,0,255);line-height:1.5;">="table table-condensed table-striped table-bordered"</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
                <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">tr</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
                    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">td </span><span style="color:rgb(255,0,0);line-height:1.5;">colspan</span><span style="color:rgb(0,0,255);line-height:1.5;">="2"</span><span style="color:rgb(255,0,0);line-height:1.5;"> class</span><span style="color:rgb(0,0,255);line-height:1.5;">="text-center"</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span><span style="line-height:1.5;">
                        预约信息
                    </span><span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">td</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
                <span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">tr</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
                <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">tr</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
                    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">td</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span><span style="line-height:1.5;">
                        预约Id:
                    </span><span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">td</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
                    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">td</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span><span style="line-height:1.5;">
                        @Html.EditorFor(m =&gt; m.Hotel.BookingId)
                    </span><span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">td</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
                <span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">tr</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
                <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">tr</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
                    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">td</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span><span style="line-height:1.5;">
                        客户名称
                    </span><span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">td</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
                    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">td</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span><span style="line-height:1.5;">
                        @Html.EditorFor(m =&gt; m.Hotel.Name)
                    </span><span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">td</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
                <span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">tr</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>

            <span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">table</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
        <span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">td</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">tr</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">tr</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
        <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">td </span><span style="color:rgb(255,0,0);line-height:1.5;">colspan</span><span style="color:rgb(0,0,255);line-height:1.5;">="2"</span><span style="color:rgb(255,0,0);line-height:1.5;"> class</span><span style="color:rgb(0,0,255);line-height:1.5;">="text-center"</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
            <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">input </span><span style="color:rgb(255,0,0);line-height:1.5;">type</span><span style="color:rgb(0,0,255);line-height:1.5;">="submit"</span><span style="color:rgb(255,0,0);line-height:1.5;"> value</span><span style="color:rgb(0,0,255);line-height:1.5;">="提交预约"</span> <span style="color:rgb(0,0,255);line-height:1.5;">/&gt;</span>
        <span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">td</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">tr</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
<span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">table</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span><span style="line-height:1.5;">

}</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">视图展示UI如下：</p> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;"><img src="https://images2017.cnblogs.com/blog/589642/201709/589642-20170924142139040-1661405433.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">要运行应用程序并检查事务，我们需要使用分布式事务处理协调器（DTC）服务。 该服务协调更新两个或多个事务受保护资源的事务，例如数据库，消息队列，文件系统等。首先我们需要确保DTC是否已经开启，在服务中进行查看并启用。</p> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;"><img src="https://images2017.cnblogs.com/blog/589642/201709/589642-20170924142509306-2024828228.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">接下来打开DTC设置，请按照下列步骤操作或者直接运行【dcomcnfg.exe】一步到位打开组件服务。</p> 
   <ul style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">
    <li style="list-style:disc inside;">打开控制面板</li> 
    <li style="list-style:disc inside;">找到管理工具</li> 
    <li style="list-style:disc inside;">找到组件服务</li> 
   </ul>
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;"><img src="https://images2017.cnblogs.com/blog/589642/201709/589642-20170924142902853-66533790.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">接下来我们填写相关信息来进行航班预约。</p> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;"><img src="https://images2017.cnblogs.com/blog/589642/201709/589642-20170924144300321-1939886412.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;"><img src="https://images2017.cnblogs.com/blog/589642/201709/589642-20170924144336978-2054554931.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;"><img src="https://images2017.cnblogs.com/blog/589642/201709/589642-20170924144402634-637093732.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">如上显示已经预约成功，我们看看两个数据库中的数据是否正确插入。</p> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;"><img src="https://images2017.cnblogs.com/blog/589642/201709/589642-20170924144501103-1316447386.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;"><img src="https://images2017.cnblogs.com/blog/589642/201709/589642-20170924144513821-1134993993.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">在DTC服务中，若每次提交未中止则提交数量将增加1，在我们对预约模型进行配置时，我们将主键未设置为标识列，所以在我们对主键重复的情况下再来看看表中数据。我们提交三次而预约主键不重复，在第四次时主键输入为第三次的主键，此时看看结果如下：</p> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;"><img src="https://images2017.cnblogs.com/blog/589642/201709/589642-20170924144909400-1971715243.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;"><img src="https://images2017.cnblogs.com/blog/589642/201709/589642-20170924144918884-765960981.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;"><img src="https://images2017.cnblogs.com/blog/589642/201709/589642-20170924144932821-726269897.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;"><img src="https://images2017.cnblogs.com/blog/589642/201709/589642-20170924144941103-425877911.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">&nbsp;</p> 
   <p style="color:rgb(17,17,17);font-size:13px;font-weight:normal;line-height:23.4px;">我们验证leFlightBookings和Reservations表中的数据，则新添加的记录将不会显示在其中。 这意味着TransactionScope已经通过在单个范围中将连接与Flight和Hotel数据库捆绑在一起来管理Transaction，并监控了Committed和Aborted Transaction。</p> 
   <h2 style="color:rgb(255,255,255);line-height:1.5;font-size:21px;font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(111,168,51);">总结</h2> 
   <h1> </h1> 
   <p style="font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;color:rgb(17,17,17);font-weight:normal;">正如我们在使用EntityFramework实体框架作为概念上的数据访问层时，在ASP.NET MVC应用程序中看到的那样，在执行多个数据库操作以存储与其相关的相关数据时，始终建议使用TransactionScope来管理事务。</p> 
   <p style="font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;color:rgb(17,17,17);font-weight:normal;"><br></p> 
   <p style="font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;color:rgb(17,17,17);font-weight:normal;"><br></p> 
   <p style="font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;color:rgb(17,17,17);font-weight:normal;"><br></p> 
   <p><font color="#111111"><span style="font-size:13px;font-weight:normal;line-height:23.4px;">本文转自Jeffcky博客园博客，原文链接：http://www.cnblogs.com/CreateMyself/p/7579579.html，如需转载请自行联系原作者</span></font><br></p> 
   <p style="font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;color:rgb(17,17,17);font-weight:normal;"><br></p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
