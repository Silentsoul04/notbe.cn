<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Java Spring的IoC和AOP的知识点速记 « NotBeCN</title>
  <meta name="description" content="             Spring简介    Spring解决的最核心的问题就是把对象之间的依赖关系转为用配置文件来管理，这个是通过Spring的依赖注入机制实现的。    Spring Bean装配    1. IOC的概念以及在Spring容器中如何进行IOC的操作。    IOC：Inversion&n...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/20/weixin_34216196_90121226.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">Java Spring的IoC和AOP的知识点速记</h1>
    <p class="post-meta">Nov 20, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><strong>Spring</strong><strong>简介</strong></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">Spring解决的最核心的问题就是把对象之间的依赖关系转为用配置文件来管理，这个是通过Spring的依赖注入机制实现的。</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><strong>Spring Bean</strong><strong>装配</strong></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">1. IOC的概念以及在Spring容器中如何进行IOC的操作。</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">IOC：Inversion&nbsp;of&nbsp;Control，控制反转。在Java开发中，IOC意味着将你设计好的类交给系统去控制，而不是在你的类内部控制，这称为控制反转，就是被调用类的实例由原先的调用类控制创建、销毁现在转变成由Spring的容器管理。</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">2. Spring容器是如何管理Bean的生命周期的（如Bean的初始化方法，Bean的销毁方法）</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">创建：&lt;bean&nbsp;name=””&nbsp;class=””&nbsp;额外属性&gt;</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">初始化：配置init­-method/实现接口InitializingBean</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">调用：context.getBean()，进行方法的调用</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">销毁：配置destroy-­method/实现DisposableBean接口</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">3. DI的概念以及在Spring框架注入有几种方式。使用构造注入对象，必须要注意什么问题？</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">注入方式：</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">构造注入[构造方法注入]</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">属性注入[属性的SET/GET]</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">方法注入[工厂注入]</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">&lt;!--</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;"> 构造函数注入 </span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">--&gt;</span>
<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">bean </span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">id</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="user1"</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;"> class</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="com.spring.test.model.User"</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;</span>
    <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">constructor-arg </span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">index</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="0"</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;"> type</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="String"</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;"> value</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="Lu"</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;&lt;/</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">constructor-arg</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;</span>
    <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">constructor-arg </span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">index</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="1"</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;"> type</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="String"</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;"> value</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="123456"</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;&lt;/</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">constructor-arg</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;</span>
<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">bean</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;</span>

<span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">&lt;!--</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;"> 属性注入 </span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">--&gt;</span>
<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">bean </span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">id</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="user2"</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;"> class</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="com.spring.test.model.User"</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;</span>
    <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">property </span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">name</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="username"</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;"> value</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="Luxx"</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;&lt;/</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">property</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;</span>
    <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">property </span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">name</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="password"</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;"> value</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="56789"</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;&lt;/</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">property</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;</span>
<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">bean</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;</span>

<span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">&lt;!--</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;"> 工厂注入 </span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">--&gt;</span>
<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">bean </span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">id</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="userFactory"</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;"> class</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="com.spring.test.factory.UserFactory"</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">/&gt;</span>
<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">bean </span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">id</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="user3"</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;"> factory-bean</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="userFactory"</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;"> factory-method</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="createUser"</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;&lt;/</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">bean</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;</span>

<span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">&lt;!--</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;"> 静态工厂注入 </span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">--&gt;</span>
<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">bean </span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">id</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="user4"</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;"> class</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="com.spring.test.factory.UserFactoryStatic"</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;"> factory-method</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="createUser"</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;&lt;/</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">bean</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">使用构造函数依赖注入时，Spring保证所有一个对象所有依赖的对象先实例化后，才实例化这个对象。使用set方法依赖注入时，Spring首先实例化对象，然后才实例化所有依赖的对象。</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">4. 使用DI注入时，Property代表什么意思，如果property引用的是其他Bean的话，如何注入，如果引用是字符串的话，如何设置。</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">使用DI注入时，Property代表注入类的属性，如果应用其他的bean用ref属性来表明被引用bean的名称，如果是引用字符串的话，用value属性。如：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';">
    <pre><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">property </span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">name</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">=”userDao” </span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">ref</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">=”被引用bean的名称” </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">/&gt;</span>
<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">property </span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">name</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">=”username” </span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">value </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">= “字符串”/&gt;</span></pre>
   </div> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">5. Bean的作用域</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">所有Spring Bean的默认都是单例，即scope=”singleton”</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">几种作用域：</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">singleton：在每一个Spring容器中，一个Bean定义只有一个对象实例。</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">prototype：Bean的定义可以被实例化任意次（每次调用都创建一个实例）。</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">request：在一次Http 请求中，每个Bean定义对应一个实例。该作用域仅在基于Web的Spring上下文（如Spring MVC）中才有效。</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">Session：在一个Http Session中，每个Bean定义对应一个实例。该作用域仅在基于Web的Spring上下文（如Spring MVC）中才有效。</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">Global-session：在一个全局Http Session中，每个Bean定义对应一个实例。该作用域仅在Portlet上下文中才有效。</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">6. DI自动装配（autowiring）</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;Spring中提供了自动装配依赖对象的机制，但是在实际应用中并不推荐使用自动装配，因为自动装配会产生未知情况，开发人员无法预见最终的装配结果。</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">自动装配是在配置文件中实现的，如下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';">
    <pre><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">bean </span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">id</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="***"</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;"> class</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="***"</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;"> autowire</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="byName"</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;</span></pre>
   </div> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">只需要配置一个@Autowired属性即可完成自动装配，不用再配置文件中写&lt;property&gt;，但是在类中还是要生成依赖对象的setter方法。</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">Autowire的属性值有如下几个：</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">1）byName&nbsp;按名称装配，可以根据属性的名称（或者ID）在容器中查询与该属性名称（或者ID）相同的bean，如果没有找到，则属性值为null；</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">2）byType&nbsp;按类型装配，可以根据属性类型，在容器中寻找该类型匹配的bean，如有多个，则会抛出异常，如果没有找到，则属性值为null；如果有多个，使用bean的primary属性，注意：这个默认就是true，需要把非候选的bean的primary的属性设置为false。排除某些bean，设置某些bean的autowire-candidate属性为false。</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">3）constructor&nbsp;与byType方式相似，不同之处在与它应用于构造器参数，如果在容器中没有找到与构造器参数类型一致的bean，那么将抛出异常；</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">4）autodetect&nbsp;通过bean类的自省机制(introspection)来决定是使用constructor还是byType的方式进行自动装配。首先尝试使用constructor&nbsp;进行自动装配。如果失败，再尝试使用byType的方式。</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">可选的自动装配：默认情况下，@Autowired具有强契约特性，其所标注的属性或参数必须是可装配的，如果没有，则自动装配失败（抛出NoSuchBeanDefinitionException）。属性不一定要装配，null值也是可以接受的，使用@Autowired(required=false)来配置是可选的。</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">限定歧义性的依赖：使用@Qualifier(“bean id”)，通过制定Bean的ID把选择范围缩小到只剩下一个Bean。</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">注意：显式的指定依赖，比如property和constructor-arg元素，总会覆盖自动装配。自动装配的行为可以和依赖检查结合使用，依赖检查会在自动装配完成后发生。</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">7. DI自动检测（autodiscovery）</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">配置Spring自动检测Bean的定义和自动装配Bean：</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&lt;context:component-scan base-package="com.spring.test"/&gt;</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">默认情况下，&lt;context:component-scan&gt;查找使用构造型注解所标注的类，这些注解如下：</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">@Component 通用的构造型注解，标识该类为Spring组件。</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">@Controller 标识该类为Spring MVC controller。</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">@Repository 标识该类为数据仓库，一般作为DAO层的注解。</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">@Service 标识该类为服务，一般作为服务层的注解。</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">使用@Component标注的任意自定义注解。</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><strong>Spring AOP</strong></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">AOP的概念以及使用AOP机制有什么好处。</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">AOP的概念是Aspect&nbsp;Oriented&nbsp;Programming面向切面编程。</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">好处：AOP将程序分解成各个方面或者说关注点，这使得可以模块化，相当横向上分切了。它可以解决OOP和过程化方法不能够很好解决的横切（cross-cutting）问题，如：事务、安全、日志等横切关注。</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">Spring+AspectJ 实现AOP的2种方式：</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">1） 使用注解（@AspectJ）实现AOP：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="font-size:12px;line-height:1.5;">@Aspect
@Component
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">class</span><span style="font-size:12px;line-height:1.5;"> LogAspect {
    @Before(</span>"execution(public * com.spring.test.service.*.*(..))"<span style="font-size:12px;line-height:1.5;">)
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">void</span><span style="font-size:12px;line-height:1.5;"> beforeService(){
        System.out.println(</span>"Before ..."<span style="font-size:12px;line-height:1.5;">);
    }
    
    @After(</span>"execution(public * com.spring.test.service.*.*(..))"<span style="font-size:12px;line-height:1.5;">)
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">void</span><span style="font-size:12px;line-height:1.5;"> afterService(){
        System.out.println(</span>"After ..."<span style="font-size:12px;line-height:1.5;">);
    }
    
    @AfterReturning(</span>"execution(public * com.spring.test.service.UserService.save<span style="font-size:12px;line-height:1.5;">(com.spring.test.model.User)) and args(user)</span>")
    <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">void</span><span style="font-size:12px;line-height:1.5;"> logAfterReturn(User user){
        System.out.println(</span>"After return..."+<span style="font-size:12px;line-height:1.5;">user);
    }
}</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">开启注解扫描：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="font-size:12px;line-height:1.5;">xmlns:aop=http://www.springframework.org/schema/aop
http://www.springframework.org/schema/aop 
http://www.springframework.org/schema/aop/spring-aop-3.2.xsd

</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">context:component-scan </span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">base-package</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="com.spring.test"</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">/&gt;</span>
<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">aop:aspectj-autoproxy </span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">proxy-target-class</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="true"</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">/&gt;</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">注意的是&nbsp;proxy-target-class="true" 属性，它的默认值是 false，默认只能代理接口（使用 JDK 动态代理），当为 true 时，才能代理目标类（使用 CGLib 动态代理）。</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">2）另一种XML配置方式：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">class</span><span style="font-size:12px;line-height:1.5;"> LogAspect {
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">void</span><span style="font-size:12px;line-height:1.5;"> beforeService(){
        System.out.println(</span>"Before ..."<span style="font-size:12px;line-height:1.5;">);
    }
    
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">void</span><span style="font-size:12px;line-height:1.5;"> afterService(){
        System.out.println(</span>"After ..."<span style="font-size:12px;line-height:1.5;">);
    }
    
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">void</span><span style="font-size:12px;line-height:1.5;"> logAfterReturn(User user){
        System.out.println(</span>"After return..."+<span style="font-size:12px;line-height:1.5;">user);
    }
}</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">配置：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">bean </span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">id</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="logAspect"</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;"> class</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="com.spring.test.aop.LogAspect"</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">/&gt;</span>
<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">aop:config</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;</span>
<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">aop:aspectref</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="logAspect"</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;</span>
    <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">aop:pointcut </span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">id</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="serviceAction" </span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">expression</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="execution(public * com.spring.test.service.*.*(..))"</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">/&gt;</span>
    <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">aop:beforepointcut-ref</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="serviceAction" </span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">method</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="beforeService"</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">/&gt;</span>
    <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">aop:afterpointcut-ref</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="serviceAction" </span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">method</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="afterService"</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">/&gt;</span>
    
    <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">aop:pointcutid</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="serviceReturnAction"</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">
    expression</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="execution(public * com.spring.test.service.UserService.save(com.spring.test.model.User)) and args(user)"</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">/&gt;</span>
    <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">aop:after-returningpointcut-ref</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="serviceReturnAction" </span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">method</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="logAfterReturn" </span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">arg-names</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="user"</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">/&gt;</span>
<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">aop:aspect</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;</span>
<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">aop:config</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">使用 &lt;aop:config&gt; 元素来进行 AOP 配置，在其子元素中配置切面，包括增强类型、目标方法、切点等信息。</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">参考：</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">http://docs.spring.io/spring/docs/current/spring-framework-reference/html/index.html</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">http://oss.org.cn/ossdocs/framework/spring/zh-cn/beans.html</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><br></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><br></p> 
   <p><font color="#333333"><span style="font-size:15px;">&nbsp; &nbsp; 本文转自阿凡卢博客园博客，原文链接：http://www.cnblogs.com/luxiaoxun/p/4625238.html</span></font><span style="font-size:15px;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;">，如需转载请自行联系原作者</span></p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
