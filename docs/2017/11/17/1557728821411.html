<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>通过脚本案例学习shell（五） 通过创建DNS脚本一步一步教你将一个普通脚本规范到一个生产环境脚本... « NotBeCN</title>
  <meta name="description" content="             为了能够很好的学习shell脚本的规范书写,这里将搭建过程分为四个步骤,其中每个步骤都是上个步骤的延续,直至创建出生产环境下可以使用的脚本,也就是任何一个人在未知此脚本内容的情况下都可以很好的运行此脚本.    步骤1、先通过手动搭建DNS服务，然后将执行的命令复制到脚本文件中，创建一个...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/17/1557728821411.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">通过脚本案例学习shell（五） 通过创建DNS脚本一步一步教你将一个普通脚本规范到一个生产环境脚本...</h1>
    <p class="post-meta">Nov 17, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'宋体';font-size:11pt;">为了能够很好的学习shell脚本的规范书写,这里将搭建过程分为四个步骤,其中每个步骤都是上个步骤的延续,直至创建出生产环境下可以使用的脚本,也就是任何一个人在未知此脚本内容的情况下都可以很好的运行此脚本.</span></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><b><span style="font-family:'宋体';">步骤1、先通过手动搭建DNS服务，然后将执行的命令复制到脚本文件中，创建一个简单脚本。</span></b></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;"><b></b></p> 
   <b></b> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><b><span style="font-family:'宋体';font-size:7.5pt;">1、安装bind、bind-chroot包</span></b></p> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">yum&nbsp;install&nbsp;bind&nbsp;bind-chroot&nbsp;-y&nbsp;</span></li>
   </ol>
   <br style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;">
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><b><span style="font-family:'宋体';font-size:7.5pt;">2、修改/etc/named.conf文件</span></b></p> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">sed&nbsp;-i&nbsp;&nbsp;‘s/127\.0\.0\.1/any/’&nbsp;/etc/named.conf&nbsp;&nbsp;//替换127.0.0.1为any&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">sed&nbsp;-i&nbsp;&nbsp;'s/::1/any/'&nbsp;/etc/named.conf&nbsp;&nbsp;//替换::1为any&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">sed&nbsp;-i&nbsp;&nbsp;'s/localhost/any/'&nbsp;/etc/named.conf&nbsp;//替换localhost为any&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">#sed&nbsp;-i&nbsp;-e&nbsp;'/listen-on/d'&nbsp;-e&nbsp;'/allow-query/d'&nbsp;-e&nbsp;'/dnssec/d'&nbsp;/etc/named.conf&nbsp;&nbsp;//将以上sed的三行删掉，dns默认为any，也可以实现。&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">sed&nbsp;-i&nbsp;&nbsp;'s/^dnssec/\/\/&amp;/'&nbsp;/etc/named.conf&nbsp;&nbsp;//将以dnssec开头的所有行前面加\\，其中&amp;是引用前面的替换值，\/是转义&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">注意：使用sed命令的时候，先不要-i参数，可以通过-n和p函数先在屏幕上显示是否正常，例：sed&nbsp;-n&nbsp;‘s/127\.0\.0\.1/any/p’&nbsp;/etc/named.conf&nbsp;</span></li> 
   </ol>
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><b><span style="font-family:'宋体';font-size:7.5pt;">3</span></b><b><span style="font-family:'宋体';font-size:7.5pt;">、在</span></b><b><span style="font-family:'宋体';font-size:7.5pt;">/etc/named.rfc1912.zone</span></b><b><span style="font-family:'宋体';font-size:7.5pt;">中创建区域</span></b></p> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span style="border:none;">cat&nbsp;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;/etc/named.rfc1912.zones&nbsp;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span style="border:none;">&nbsp;</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">ENDF</span><span style="border:none;">&nbsp;\\使用cat追加多行信息到文件中&nbsp;</span></span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">zone&nbsp;"rsyslog1.com"&nbsp;IN&nbsp;{&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type&nbsp;master;&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file&nbsp;"rsyslog1.com.zone";&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;allow-update&nbsp;{&nbsp;none;&nbsp;};&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">};&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">ENDF&nbsp;</span></li> 
   </ol>
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><b><span style="font-family:'宋体';font-size:7.5pt;">4</span></b><b><span style="font-family:'宋体';font-size:7.5pt;">、在</span></b><b><span style="font-family:'宋体';font-size:7.5pt;">/var/named/</span></b><b><span style="font-family:'宋体';font-size:7.5pt;">创建</span></b><b><span style="font-family:'宋体';font-size:7.5pt;">zone</span></b><b><span style="font-family:'宋体';font-size:7.5pt;">文件</span></b><b><span style="font-family:'宋体';font-size:7.5pt;">，</span></b><b><span style="font-family:'宋体';font-size:7.5pt;">并设置相应权限</span></b><b><span style="font-family:'宋体';font-size:7.5pt;">（<span style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;">cp -p&nbsp;</span></span></b><b><span style="font-family:'宋体';font-size:7.5pt;">可以继承原有权限</span></b><b><span style="font-family:'宋体';font-size:7.5pt;">）</span></b></p> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">cp&nbsp;-p&nbsp;/var/named/named.localhost&nbsp;/var/named/rsyslog1.com.zone&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">sed&nbsp;-i&nbsp;'/127.0.0.1\|AAAA/d'&nbsp;/var/named/rsyslog1.com.zone&nbsp;&nbsp;//删除不需要的包含127.0.0.1或AAAA的行，其中\|是或的意思&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">cat&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;/var/named/rsyslog1.com.zone&nbsp;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span style="border:none;">&nbsp;</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">ENDF</span><span style="border:none;">&nbsp;&nbsp;//追加A记录&nbsp;</span></span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;192.168.100.109&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">www&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;192.168.100.109&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">ENDF&nbsp;</span></li> 
   </ol>
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><b><span style="font-family:'宋体';font-size:7.5pt;">5</span></b><b><span style="font-family:'宋体';font-size:7.5pt;">、设置DNS，重启</span></b><b><span style="font-family:'宋体';font-size:7.5pt;">named</span></b><b><span style="font-family:'宋体';font-size:7.5pt;">服务并通过</span></b><b><span style="font-family:'宋体';font-size:7.5pt;">nslookup</span></b><b><span style="font-family:'宋体';font-size:7.5pt;">进行本地解析</span></b></p> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">sed -i '1inameserver 192.168.100.109' /etc/resolv.conf //在resolv.conf首行添加nameserver语句，其中1i i是变量当前行上插入一行的意思，1i是在第一行前加入一行</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">/etc/rc.d/init.d/named&nbsp;restart&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">nslookup&nbsp;www.rsyslog1.com&nbsp;</span></li> 
   </ol>
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><b><span style="font-family:'宋体';font-size:7.5pt;">将以上命令统一放到文件当中就形成了一个简单脚本如下</span></b><b><span style="font-family:'宋体';font-size:7.5pt;">（</span></b><b><span style="font-family:'宋体';font-size:7.5pt;">解释如上</span></b><b><span style="font-family:'宋体';font-size:7.5pt;">）</span></b></p> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">#!/bin/bash&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">yum&nbsp;install&nbsp;bind&nbsp;bind-chroot&nbsp;-y&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">sed&nbsp;-i&nbsp;'s/127\.0\.0\.1/any/'&nbsp;/etc/named.conf&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">sed&nbsp;-i&nbsp;'s/::1/any/'&nbsp;/etc/named.conf&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">sed&nbsp;-i&nbsp;'s/localhost/any/'&nbsp;/etc/named.conf&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">sed&nbsp;-i&nbsp;'s/dnssec/\/\/&amp;/g'&nbsp;/etc/named.conf&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">#sed&nbsp;-i&nbsp;-e&nbsp;'/listen-on/d'&nbsp;-e&nbsp;'/allow-query/d'&nbsp;-e&nbsp;'/dnssec/d'&nbsp;/etc/named.conf&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">cat&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;/etc/named.rfc1912.zones&nbsp;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span style="border:none;">&nbsp;</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">ENDF</span><span style="border:none;">&nbsp;</span></span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">zone&nbsp;"rsyslog1.com"&nbsp;IN&nbsp;{&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type&nbsp;master;&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file&nbsp;"rsyslog1.com.zone";&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;allow-update&nbsp;{&nbsp;none;&nbsp;};&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">};&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">ENDF&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">cp&nbsp;-p&nbsp;/var/named/named.localhost&nbsp;/var/named/rsyslog1.com.zone&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">sed&nbsp;-i&nbsp;'/127.0.0.1\|AAAA/d'&nbsp;/var/named/rsyslog1.com.zone&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">cat&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;/var/named/rsyslog1.com.zone&nbsp;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span style="border:none;">&nbsp;</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">ENDF</span><span style="border:none;">&nbsp;</span></span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;192.168.100.109&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">www&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;192.168.100.109&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">ENDF&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">sed&nbsp;-i&nbsp;'1inameserver&nbsp;192.168.100.109'&nbsp;/etc/resolv.conf&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">/etc/rc.d/init.d/named&nbsp;restart&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">nslookup&nbsp;www.rsyslog1.com&nbsp;</span></li> 
   </ol>
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><b><span style="font-family:'宋体';font-size:7.5pt;">脚本运行结果如下</span></b><b><span style="font-family:'宋体';font-size:7.5pt;">：</span></b></p> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">[root@RHEL6U3-9&nbsp;named.sh]#&nbsp;./named1.sh&nbsp;&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">......//省略&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Server:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;192.168.100.109&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Address:&nbsp;&nbsp;&nbsp;&nbsp;192.168.100.109#53&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Name:&nbsp;&nbsp;&nbsp;www.rsyslog1.com&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Address:&nbsp;192.168.100.109&nbsp;</span></li> 
   </ol>
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'宋体';font-size:7.5pt;">以上正确解析，说明脚本运行OK</span></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'宋体';font-size:7.5pt;"></span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;"></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;</p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><b><span style="font-family:'宋体';">步骤2、将一些常用到的路径以及会变的内容通过变量引用</span></b></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;"><b></b></p> 
   <b></b> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'宋体';font-size:7.5pt;">脚本使用过程中很多部分内容都会在不同的环境下有所变动，为了修改方便，引入变量，每次只需要修改变量的值，脚本中所有引用变量的地方都会自动取定义的变量。（<b style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;">可在vim下使用 :.,$%A%B%g 将光标以下内容中的A全部替换成B）</b></span></p> 
   <p><b style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;"></b></p> 
   <b style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;"></b> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><b><span style="font-family:'宋体';font-size:7.5pt;">修改部分：</span></b></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;"><b></b></p> 
   <b></b> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;margin-left:12.75pt;font-size:16px;color:rgb(51,51,51);text-indent:-12.75pt;"><b><span style="font-family:'宋体';font-size:7.5pt;">1、</span></b><b><span style="font-family:'宋体';font-size:7.5pt;">定义安装包变量、配置文件路径变量、域名变量、IP地址变量</span></b></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;"><b></b></p> 
   <b></b> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'宋体';font-size:7.5pt;">脚本修改后如下：</span></p> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">#!/bin/bash&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="attribute" style="border:none;color:#FF0000;">PKG</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"bind&nbsp;bind-chroot"</span><span style="border:none;">&nbsp;&nbsp;//定义安装的包，不同版本包可能不一样&nbsp;</span></span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="attribute" style="border:none;color:#FF0000;">M_CONF</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"/etc/named.conf"</span><span style="border:none;">&nbsp;//定义主配置文件named.conf路径&nbsp;</span></span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="attribute" style="border:none;color:#FF0000;">R_CONF</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"/etc/named.rfc1912.zones"</span><span style="border:none;">&nbsp;//定义named.rfc1912.zones文件路径&nbsp;</span></span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="attribute" style="border:none;color:#FF0000;">DOMAIN_N</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"rsyslog2.com"</span><span style="border:none;">&nbsp;//定义域名&nbsp;</span></span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="attribute" style="border:none;color:#FF0000;">MYIP</span><span style="border:none;">="$(ifconfig&nbsp;eth0&nbsp;|&nbsp;grep&nbsp;"</span><span class="attribute-value" style="border:none;color:#0000FF;">inet</span><span style="border:none;">&nbsp;addr:"&nbsp;|&nbsp;awk&nbsp;-F[:"&nbsp;"]+&nbsp;'{print&nbsp;$4}')"&nbsp;&nbsp;//取eth0的IP地址&nbsp;–F[:”&nbsp;”]+表示以:或者空格分隔，’{print&nbsp;$4}’表示打印第四列&nbsp;</span></span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">#<span class="attribute" style="border:none;color:#FF0000;">MYIP</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"$(ifconfig&nbsp;eth0&nbsp;|&nbsp;sed&nbsp;–n&nbsp;&nbsp;&nbsp;<strong>'<span style="border:none;color:rgb(255,0,0);">s/</span></strong>.*addr:\([0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}\).*<span style="border:none;color:rgb(255,0,0);"><strong>/</strong></span>\1<span style="border:none;color:rgb(255,0,0);"><strong>/</strong></span><span style="border:none;color:rgb(255,0,0);"><strong>p'</strong></span>)"</span><span style="border:none;">&nbsp;//也是取eth0的IP地址，解析如下：&nbsp;</span></span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">sed&nbsp;–n&nbsp;‘s///p’&nbsp;&nbsp;sed标准写法&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">\(\)&nbsp;保存被匹配的字符&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\1&nbsp;引用第一个保存匹配的字符&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">.*&nbsp;表示所有&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">[0-9]\{1,3\}&nbsp;表示至少1个最多3个数字组合&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">\.&nbsp;表示转义&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">#<span class="attribute" style="border:none;color:#FF0000;">MYIP</span><span style="border:none;">="$(ifconfig&nbsp;eth0&nbsp;|&nbsp;grep&nbsp;"</span><span class="attribute-value" style="border:none;color:#0000FF;">inet</span><span style="border:none;">&nbsp;addr:"&nbsp;|&nbsp;cut&nbsp;-d":"&nbsp;-f2&nbsp;|&nbsp;cut&nbsp;-d&nbsp;"&nbsp;"&nbsp;-f1)"&nbsp;&nbsp;//取eth0的IP地址，-d:&nbsp;以:分隔，-d”&nbsp;“&nbsp;以空格分隔，-f1&nbsp;打印:分隔的第一部分&nbsp;</span></span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <span style="border:none;color:#000000;">#MYIP="$(</span>ifconfig eth0 | grep "inet addr" |sed -e 's/.*addr://' -e 's/Bcast.*//') //将IP地址两边的多余部分替换成空即可。</li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;">#MYIP="$("ifconfig eth0 | grep "inet addr" |awk -F: '{print $2}' |awk '{print $1}') //先以:分割过滤，然后以空格分割过滤</li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">yum&nbsp;install&nbsp;$PKG&nbsp;-y&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">sed&nbsp;-i&nbsp;'s/127\.0\.0\.1/any/'&nbsp;$M_CONF&nbsp;&nbsp;&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">sed&nbsp;-i&nbsp;'s/::1/any/'&nbsp;$M_CONF&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">sed&nbsp;-i&nbsp;'s/localhost/any/'&nbsp;$M_CONF&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">sed&nbsp;-i&nbsp;'s/dnssec/\/\/&amp;/'&nbsp;$M_CONF&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">cat&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;$R_CONF&nbsp;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span style="border:none;">&nbsp;</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">ENDF</span><span style="border:none;">&nbsp;</span></span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">zone&nbsp;"$DOMAIN_N"&nbsp;IN&nbsp;{&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type&nbsp;master;&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file&nbsp;"$DOMAIN_N.zone";&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;allow-update&nbsp;{&nbsp;none;&nbsp;};&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">};&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">ENDF&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">cp&nbsp;-p&nbsp;/var/named/named.localhost&nbsp;/var/named/$DOMAIN_N.zone&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">sed&nbsp;-i&nbsp;'/127.0.0.1\|AAAA/d'&nbsp;/var/named/$DOMAIN_N.zone&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">cat&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;/var/named/$DOMAIN_N.zone&nbsp;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span style="border:none;">&nbsp;</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">ENDF</span><span style="border:none;">&nbsp;</span></span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$MYIP&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">www&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$MYIP&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">ENDF&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">sed&nbsp;-i&nbsp;"1inameserver&nbsp;$MYIP"&nbsp;/etc/resolv.conf&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">service&nbsp;named&nbsp;restart&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">nslookup&nbsp;www.$DOMAIN_N&nbsp;</span></li> 
   </ol>
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><b><span style="font-family:'宋体';font-size:7.5pt;">脚本运行结果</span></b><b><span style="font-family:'宋体';font-size:7.5pt;">：</span></b></p> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">[root@RHEL6U3-9&nbsp;named.sh]#&nbsp;./named2.sh&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">......&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Server:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;192.168.100.109&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Address:&nbsp;&nbsp;&nbsp;&nbsp;192.168.100.109#53&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Name:&nbsp;&nbsp;&nbsp;www.rsyslog2.com&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Address:&nbsp;192.168.100.109&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">脚本运行正常&nbsp;</span></li> 
   </ol>
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><b><span style="font-family:'宋体';">步骤</span></b><b><span style="font-family:'宋体';">3</span></b><b><span style="font-family:'宋体';">、将各个部分模块化</span></b><b><span style="font-family:'宋体';">（</span></b><b><span style="font-family:'宋体';">函数化</span></b><b><span style="font-family:'宋体';">）<span style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;"></span></span></b></p> 
   <p><b></b></p> 
   <b></b> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><b><span style="font-family:'宋体';">修改部分：<span style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;"></span></span></b></p> 
   <p><b></b></p> 
   <b></b> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;margin-left:18pt;font-size:16px;color:rgb(51,51,51);text-indent:-18pt;">1、&nbsp; 各模块函数化，后面调用函数即可</p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;margin-left:18pt;font-size:16px;color:rgb(51,51,51);text-indent:-18pt;">2、&nbsp; 安装包函数定义for循环判断是否安装过</p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;margin-left:18pt;font-size:16px;color:rgb(51,51,51);text-indent:-18pt;">3、&nbsp; 创建的域名通过在脚本后面跟上域名进行传递到脚本里面$1里</p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;margin-left:18pt;font-size:16px;color:rgb(51,51,51);text-indent:-18pt;">4、&nbsp; 多行sed命令写入文件中，然后通过-f参数进行引用</p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;margin-left:18pt;font-size:16px;color:rgb(51,51,51);text-indent:-18pt;">5、&nbsp; 函数部分如果比较大可以单独写一个文件，然后在脚本中通过source或者.进行调用。例：source /etc/install.sh或 . /etc/install.sh&nbsp; （以下脚本未举例可自行测试）<br></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><b><span style="font-family:'宋体';font-size:7.5pt;">脚本修改后如下</span></b></p> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">#!/bin/bash&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="attribute" style="border:none;color:#FF0000;">PKG</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"bind&nbsp;bind-chroot"</span><span style="border:none;">&nbsp;</span></span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="attribute" style="border:none;color:#FF0000;">M_CONF</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"/etc/named.conf"</span><span style="border:none;">&nbsp;</span></span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="attribute" style="border:none;color:#FF0000;">R_CONF</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"/etc/named.rfc1912.zones"</span><span style="border:none;">&nbsp;</span></span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="attribute" style="border:none;color:#FF0000;">DOMAIN_N</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"$1"</span><span style="border:none;">&nbsp;</span></span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="attribute" style="border:none;color:#FF0000;">MYIP</span><span style="border:none;">="$(ifconfig&nbsp;eth0&nbsp;|&nbsp;grep&nbsp;"</span><span class="attribute-value" style="border:none;color:#0000FF;">inet</span><span style="border:none;">&nbsp;addr:"&nbsp;|&nbsp;awk&nbsp;-F[:"&nbsp;"]+&nbsp;'{print&nbsp;$4}')"&nbsp;</span></span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">INSTALL_PKG()&nbsp;//安装包定义一个函数&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">{&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yum&nbsp;install&nbsp;$PKG&nbsp;-y&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;in&nbsp;$PKG&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rpm&nbsp;-q&nbsp;$i&nbsp;&amp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;/dev/null&nbsp;</span></span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;$?&nbsp;-ne&nbsp;0&nbsp;]&nbsp;&amp;&amp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">UNPKG</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"$UNPKG&nbsp;$i"</span><span style="border:none;">&nbsp;//将所有检测出来未安装的包保存到变量UPPKG中，也可以保存到文件中，不过变量是临时存储在内存中的，速度要比文件快的多，其次可以减少磁盘I/O性能。&nbsp;</span></span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;done&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;-n&nbsp;"$UNPKG"&nbsp;]&nbsp;&amp;&amp;&nbsp;yum&nbsp;install&nbsp;$UNPKG&nbsp;–y&nbsp;//判断变量UNPKG是否为空，如果不为空就安装里面包含的包&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">}&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">MAIN_CONF()&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">{&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">sed&nbsp;-i&nbsp;-f&nbsp;/root/shell/sed.txt&nbsp;$M_CONF&nbsp;&nbsp;//将之前那四行sed内容写到一个文件中，然后通过-f参数进行调用即可，其实四行命令也可以通过-e命令连接，不建议这么操作。&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cat&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;$R_CONF&nbsp;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span style="border:none;">&nbsp;</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">ENDF</span><span style="border:none;">&nbsp;</span></span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">zone&nbsp;"$DOMAIN_N"&nbsp;IN&nbsp;{&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type&nbsp;master;&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file&nbsp;"$DOMAIN_N.zone";&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;allow-update&nbsp;{&nbsp;none;&nbsp;};&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">};&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">ENDF&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cp&nbsp;-p&nbsp;/var/named/named.localhost&nbsp;/var/named/$DOMAIN_N.zone&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sed&nbsp;-i&nbsp;'/127.0.0.1\|AAAA/d'&nbsp;/var/named/$DOMAIN_N.zone&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cat&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;/var/named/$DOMAIN_N.zone&nbsp;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span style="border:none;">&nbsp;</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">ENDF</span><span style="border:none;">&nbsp;</span></span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$MYIP&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">www&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$MYIP&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">ENDF&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">}&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">MYTEST()&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">{&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sed&nbsp;-i&nbsp;"1inameserver&nbsp;$MYIP"&nbsp;/etc/resolv.conf&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;service&nbsp;named&nbsp;restart&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nslookup&nbsp;www.$DOMAIN_N&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">}&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">INSTALL_PKG&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">MAIN_CONF&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">MYTEST&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">[root@RHEL6U3-9&nbsp;shell]#&nbsp;cat&nbsp;/root/shell/sed.txt&nbsp;&nbsp;//引用的四条sed写入的文件格式如下。注意没有’’符号。&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">s/127\.0\.0\.1/any&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">s/::1/any/&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">s/localhost/any/&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">s/dnssec/\/\/&amp;/&nbsp;</span></li> 
   </ol>
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><b><span style="font-family:'宋体';font-size:7.5pt;">脚本运行结果如下</span></b><b><span style="font-family:'宋体';font-size:7.5pt;">：</span></b></p> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">[root@RHEL6U3-9&nbsp;named.sh]#&nbsp;./named3.sh&nbsp;rsyslog3.org&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Stopping&nbsp;named:&nbsp;.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;&nbsp;OK&nbsp;&nbsp;]&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Starting&nbsp;named:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;&nbsp;OK&nbsp;&nbsp;]&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Server:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;192.168.100.109&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Address:&nbsp;&nbsp;&nbsp;&nbsp;192.168.100.109#53&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Name:&nbsp;&nbsp;&nbsp;www.rsyslog3.org&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Address:&nbsp;192.168.100.109&nbsp;</span></li> 
   </ol>
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-size:18px;"><b style="font-size:16px;"><span style="font-family:'宋体';">步骤</span></b><b style="font-size:16px;"><span style="font-family:'宋体';">4</span></b><b style="font-size:16px;"><span style="font-family:'宋体';">、完善脚本中存在的各种情况</span></b><b style="font-size:16px;"><span style="font-family:'宋体';">，初步</span></b><b style="font-size:16px;"><span style="font-family:'宋体';">达到生产环境基本要求</span></b></span></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-size:18px;"><b style="font-size:16px;"><span style="font-family:'宋体';">修改部分：</span></b></span></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-size:12px;"><span style="font-family:'宋体';font-size:16px;">1、定义错误函数，方便他人传递参数错误报错。</span></span></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-size:12px;"><span style="font-family:'宋体';font-size:16px;">2、传递参数加上-d 增强书写规范</span></span></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-size:12px;"><span style="font-family:'宋体';font-size:16px;">4、定义测试函数，测试传递参数是否有效</span></span></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-size:12px;"><span style="font-family:'宋体';font-size:16px;">5、定义case语句，内含测试函数，将传递参数一一验证，如果正确报错所有域名参数为后面所用，如果不正确，调用错误函数输出结束。</span></span></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><b><span style="font-family:'宋体';font-size:7.5pt;"></span></b></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;"><b></b></p> 
   <b></b> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-size:14px;"><b style="font-size:16px;"><span style="font-family:'宋体';">脚本修改后如下</span></b></span></p> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">#!/bin/bash&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="attribute" style="border:none;color:#FF0000;">PKG</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"bind&nbsp;bind-chroot"</span><span style="border:none;">&nbsp;</span></span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="attribute" style="border:none;color:#FF0000;">M_CONF</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"/etc/named.conf"</span><span style="border:none;">&nbsp;</span></span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="attribute" style="border:none;color:#FF0000;">R_CONF</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"/etc/named.rfc1912.zones"</span><span style="border:none;">&nbsp;</span></span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="attribute" style="border:none;color:#FF0000;">MYIP</span><span style="border:none;">="$(ifconfig&nbsp;eth0&nbsp;|&nbsp;grep&nbsp;"</span><span class="attribute-value" style="border:none;color:#0000FF;">inet</span><span style="border:none;">&nbsp;addr:"&nbsp;|&nbsp;awk&nbsp;-F[:"&nbsp;"]+&nbsp;'{print&nbsp;$4}')"&nbsp;</span></span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">MYHELP()&nbsp;//定义输出错误方便他人尤其是开发人员正确运行脚本，这也能体现出来一个大牛写脚本是否规范地方，同时也能体现出来团队协作精神，方便他人使用。&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">{&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">cat&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span style="border:none;">&nbsp;</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">ENDF</span><span style="border:none;">&nbsp;</span></span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">usage:&nbsp;$0&nbsp;[option]&nbsp;//&nbsp;$0&nbsp;表示第一个参数&nbsp;也就是脚本名称&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">option:&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">-d&nbsp;dn1&nbsp;dn2&nbsp;...&nbsp;&nbsp;:input&nbsp;your&nbsp;domain&nbsp;names&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">ENDF&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">exit&nbsp;1&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">}&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">TEST_D()&nbsp;//定义测试函数，测试输入域名格式是否有效，以下只列出了两种域名格式有效，分别为***.***或者***.***.***&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">{&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;$1&nbsp;|&nbsp;grep&nbsp;'.\..\|.*\..*\..*'&nbsp;&amp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">/dev/null&nbsp;&nbsp;// <strong>\|</strong>或的意思&nbsp;</span></span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;$?&nbsp;-ne&nbsp;0&nbsp;]&nbsp;&amp;&amp;&nbsp;MYHELP&nbsp;\\如果执行没有结果或者报错，则显示错误帮助&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">}&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">INSTALL_PKG()&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">{&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yum&nbsp;install&nbsp;$PKG&nbsp;-y&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;in&nbsp;$PKG&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rpm&nbsp;-q&nbsp;$i&nbsp;&amp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;/dev/null&nbsp;</span></span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;$?&nbsp;-ne&nbsp;0&nbsp;]&nbsp;&amp;&amp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">UNPKG</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"$UNPKG&nbsp;$i"</span><span style="border:none;">&nbsp;</span></span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;done&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;-n&nbsp;"$UNPKG"&nbsp;]&nbsp;&amp;&amp;&nbsp;yum&nbsp;install&nbsp;$UNPKG&nbsp;-y&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">}&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">MAIN_CONF()&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">{&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sed&nbsp;-i&nbsp;-f&nbsp;/root/shell/sed.txt&nbsp;$M_CONF&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cat&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;$R_CONF&nbsp;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span style="border:none;">&nbsp;</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">ENDF</span><span style="border:none;">&nbsp;</span></span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zone&nbsp;"$DOMAIN_N"&nbsp;IN&nbsp;{&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type&nbsp;master;&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file&nbsp;"$DOMAIN_N.zone";&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;allow-update&nbsp;{&nbsp;none;&nbsp;};&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">ENDF&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cp&nbsp;-p&nbsp;/var/named/named.localhost&nbsp;/var/named/$DOMAIN_N.zone&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sed&nbsp;-i&nbsp;'/127.0.0.1\|AAAA/d'&nbsp;/var/named/$DOMAIN_N.zone&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cat&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;/var/named/$DOMAIN_N.zone&nbsp;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span style="border:none;">&nbsp;</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">ENDF</span><span style="border:none;">&nbsp;</span></span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$MYIP&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">www&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$MYIP&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">ENDF&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">}&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">MYTEST()&nbsp;//由于是可以传递多个域名参数，使用for循环将多个域名进行解析&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">{&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sed&nbsp;-i&nbsp;"1inameserver&nbsp;$MYIP"&nbsp;/etc/resolv.conf&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;service&nbsp;named&nbsp;restart&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;in&nbsp;$DOMAIN_N_ALL&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nslookup&nbsp;$i&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;done&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">}&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">[&nbsp;-z&nbsp;"$1"&nbsp;]&nbsp;&amp;&amp;&nbsp;MYHELP&nbsp;&nbsp;//如果脚本不跟任何传递参数，则退出显示帮助信息&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">case&nbsp;$1&nbsp;in&nbsp;&nbsp;//定义case语句，判断脚本后所有域名是否有效，如果有效全部写入变量DOMAIN_N_ALL中，后面再通过for循环读取变量获取的值，如果无效则退出显示帮助错误，&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-d)&nbsp;&nbsp;//加入&nbsp;–d&nbsp;参数后，域名部分从$2开始&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shift&nbsp;&nbsp;向左移动一位，将$2的值传递给$1,后面依次类推&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TEST_D&nbsp;$1&nbsp;//判断第一个域名是否有效&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">DOMAIN_N_ALL</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"$1"</span><span style="border:none;">&nbsp;将域名保存到变量DOMAIN_N_ALL变量中&nbsp;</span></span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shift&nbsp;继续左移动，将第二个域名传递给$1&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;[&nbsp;$#&nbsp;-gt&nbsp;0&nbsp;]&nbsp;//判断位置参数个数是否为0，也就是是否还有域名存在&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TEST_D&nbsp;$1&nbsp;//如果有继续判断是否有效&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="border:none;color:#FF0000;">DOMAIN_N_ALL</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">"$DOMAIN_N_ALL&nbsp;$1"</span><span style="border:none;">&nbsp;//如果有效，将域名追加到DOMAIN_N_ALL变量中，注意中间是有空格的&nbsp;</span></span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shift&nbsp;\\传递之后，位置参数继续左移&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;done&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;;&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MYHELP&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;;&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">esac&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">INSTALL_PKG&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">for&nbsp;DOMAIN_N&nbsp;in&nbsp;$DOMAIN_N_ALL&nbsp;&nbsp;//使用for循环添加传递的所有域名&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">do&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MAIN_CONF&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">done&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">MYTEST&nbsp;</span></li> 
   </ol>
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><b><span style="font-family:'宋体';font-size:7.5pt;">脚本执行结果如下</span></b><b><span style="font-family:'宋体';font-size:7.5pt;">：</span></b></p> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">[root@RHEL6U3-9&nbsp;named.sh]#&nbsp;./named4.sh&nbsp;&nbsp;//不传递任何参数报错&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">usage:&nbsp;./named4.sh&nbsp;[option]&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">option:&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">-d&nbsp;dn1&nbsp;dn2&nbsp;...&nbsp;&nbsp;:input&nbsp;your&nbsp;domain&nbsp;names&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">[root@RHEL6U3-9&nbsp;named.sh]#&nbsp;./named4.sh&nbsp;–d&nbsp;&nbsp;//传递参数有问题报错&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">usage:&nbsp;./named4.sh&nbsp;[option]&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">option:&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">-d&nbsp;dn1&nbsp;dn2&nbsp;...&nbsp;&nbsp;:input&nbsp;your&nbsp;domain&nbsp;names&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">[root@RHEL6U3-9&nbsp;named.sh]#&nbsp;./named4.sh&nbsp;-d&nbsp;rsyslog1&nbsp;//传递的参数不符合域名格式报错&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">usage:&nbsp;./named4.sh&nbsp;[option]&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">option:&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">-d&nbsp;dn1&nbsp;dn2&nbsp;...&nbsp;&nbsp;:input&nbsp;your&nbsp;domain&nbsp;names&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">[root@RHEL6U3-9&nbsp;named.sh]#&nbsp;./named4.sh&nbsp;-d&nbsp;rsyslog1.net&nbsp;rsyslog2&nbsp;&nbsp;//传递的第二个域名不符合格式报错&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">usage:&nbsp;./named4.sh&nbsp;[option]&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">option:&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">-d&nbsp;dn1&nbsp;dn2&nbsp;...&nbsp;&nbsp;:input&nbsp;your&nbsp;domain&nbsp;names&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">[root@RHEL6U3-9&nbsp;named.sh]#&nbsp;./named4.sh&nbsp;-d&nbsp;rsyslog1.net&nbsp;rsyslog2.net&nbsp;&nbsp;//正确传递两个域名，后面还可以跟域名&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Stopping&nbsp;named:&nbsp;.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;&nbsp;OK&nbsp;&nbsp;]&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Starting&nbsp;named:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;&nbsp;OK&nbsp;&nbsp;]&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Server:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;192.168.100.109&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Address:&nbsp;&nbsp;&nbsp;&nbsp;192.168.100.109#53&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Name:&nbsp;&nbsp;&nbsp;rsyslog1.net&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Address:&nbsp;192.168.100.109&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Server:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;192.168.100.109&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Address:&nbsp;&nbsp;&nbsp;&nbsp;192.168.100.109#53&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Name:&nbsp;&nbsp;&nbsp;rsyslog2.net&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Address:&nbsp;192.168.100.109&nbsp;</span></li> 
   </ol>
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;</p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span><b><span style="font-family:'宋体';">步骤</span></b><b><span style="font-family:'宋体';">5</span></b><b><span style="font-family:'宋体';">、继续完善脚本中存在的各种情况</span></b><b><span style="font-family:'宋体';">，最终</span></b><b><span style="font-family:'宋体';">达到生产环境要求</span></b></span><b><span style="font-family:'宋体';font-size:7.5pt;"></span></b></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;"><b></b></p> 
   <b></b> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;margin-left:21.75pt;font-size:16px;color:rgb(51,51,51);text-indent:-18pt;">1、&nbsp;&nbsp; 加复杂文件锁，防止脚本被重复执行或者系统宕机再次被执行</p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;margin-left:21.75pt;font-size:16px;color:rgb(51,51,51);text-indent:-18pt;">2、&nbsp;&nbsp; ……………..</p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;margin-left:21.75pt;font-size:16px;color:rgb(51,51,51);text-indent:-18pt;">待续.......................</p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;margin-left:3.75pt;font-size:16px;color:rgb(51,51,51);"><span style="font-family:Arial, sans-serif;font-size:7.5pt;"></span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;"></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;</p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><br></p> 
   <p><font color="#333333">本文转自凌激冰51CTO博客，原文链接：http://blog.51cto.com/dreamfire/1156189，如需转载请自行联系原作者</font><br></p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
