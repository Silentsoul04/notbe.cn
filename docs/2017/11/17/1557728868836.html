<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Nginx实战进阶篇一 Nginx反向代理及负载均衡实现过程部署 « NotBeCN</title>
  <meta name="description" content="             Ningx作为负载均衡器的同时也是反向代理服器，配置语法相当简单，可以按轮询、IP_hash、url_hash、权重等多种方法对后端的服务器作负载均衡，同时还支持后端服务器的健康检查。另外，它相对于LVS比较有优势的一点，由于它是基于第七层的负载均衡，是根据报头内的信息来执行负载均衡任务...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/17/1557728868836.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">Nginx实战进阶篇一 Nginx反向代理及负载均衡实现过程部署</h1>
    <p class="post-meta">Nov 17, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:song, Verdana;font-size:14px;line-height:22px;">Ningx作为负载均衡器的同时也是反向代理服器，配置语法相当简单，可以按轮询、IP_hash、url_hash、权重等多种方法对后端的服务器作负载均衡，同时还支持后端服务器的健康检查。另外，它相对于LVS比较有优势的一点，由于它是基于第七层的负载均衡，是根据报头内的信息来执行负载均衡任务，所以对网络的依赖比较小，理论上只要ping得通就能够实现负载均衡；在国内，Nginx不仅作为一款性能优异的负载均衡器，它同时也是一款适用于高并发环境的WEB应用软件，在新浪、金山、迅雷在线等大型网站都得到了应用，其作为负载均衡器的优点如下：&nbsp;</span><br style="font-family:song, Verdana;font-size:14px;line-height:22px;"><span style="font-family:song, Verdana;font-size:14px;line-height:22px;">1.配置文件非常简单：风格跟程序一样通俗易懂。&nbsp;</span><br style="font-family:song, Verdana;font-size:14px;line-height:22px;"><span style="font-family:song, Verdana;font-size:14px;line-height:22px;">2.成本低廉：Nginx为开源软件，可以免费使用。而购买F5 BIG-IP、NetScaler等硬件负载均衡交换机则需要十多万至几十万人民币。&nbsp;</span><br style="font-family:song, Verdana;font-size:14px;line-height:22px;"><span style="font-family:song, Verdana;font-size:14px;line-height:22px;">3.支持Rewrite重写规则：能够根据域名、URL的不同，将 HTTP 请求分到不同的后端服务器群组。&nbsp;</span><br style="font-family:song, Verdana;font-size:14px;line-height:22px;"><span style="font-family:song, Verdana;font-size:14px;line-height:22px;">4.内置的健康检查功能：如果 Nginx Proxy 后端的某台 Web 服务器宕机了，不会影响前端访问。&nbsp;</span><br style="font-family:song, Verdana;font-size:14px;line-height:22px;"><span style="font-family:song, Verdana;font-size:14px;line-height:22px;">5.节省带宽：支持 GZIP 压缩，可以添加浏览器本地缓存的 Header 头。&nbsp;</span><br style="font-family:song, Verdana;font-size:14px;line-height:22px;"><span style="font-family:song, Verdana;font-size:14px;line-height:22px;">6.稳定性高：用于反向代理，宕机的概率微乎其微。特别是通过跟踪一些已上线的项目，发现在高并发的情况下，Nginx作为负器均衡器/反向代理宕机的次数几乎是零。</span><br style="font-family:song, Verdana;font-size:14px;line-height:22px;"><br style="font-family:song, Verdana;font-size:14px;line-height:22px;"><span style="font-family:song, Verdana;font-size:14px;line-height:22px;">缺点就是目前仅仅只支持http和mail的负载均衡，不过我们可以取长被短，主要用它的支持Rewrite重写规则和稳定性高的特点，将其中间层的负载均衡.</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:song, Verdana;font-size:14px;line-height:22px;">以上引用抚琴煮酒语录!</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">--------------------------------------------------------------</p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://blog.51cto.com/attachment/201303/170119973.jpg" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img alt="" src="http://blog.51cto.com/attachment/201303/170119973.jpg" style="border:none;"></a></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;</p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><strong>实验目的：</strong></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">1、通过Nginx反向代理服务器实现后台web服务器的快速访问。</p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">2、通过Nginx反向代理服务器实现后台web服务器群的负载均衡及冗余备份</p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><b><span style="font-family:'宋体';">前期准备工作：</span></b><b><span style="font-family:Arial, sans-serif;"></span></b></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;"><b></b></p> 
   <b></b> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;margin-left:18pt;font-size:16px;color:rgb(51,51,51);text-indent:-18pt;"><span style="font-family:Arial, sans-serif;">1、<span style="font-family:'Times New Roman';font-size:7pt;">&nbsp;</span></span><span style="font-family:'宋体';">单独在</span><span style="font-family:Arial, sans-serif;">Apache</span><span style="font-family:'宋体';">上部署</span><span style="font-family:Arial, sans-serif;">web</span><span style="font-family:'宋体';">（</span><span style="font-family:Arial, sans-serif;">www1.rsyslog.org</span><span style="font-family:'宋体';">）服务器，并实现访问（简单介绍）</span><span style="font-family:Arial, sans-serif;"></span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;"></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-size:7.5pt;color:rgb(85,85,85);">Apache</span><span style="font-family:'宋体';font-size:7.5pt;color:rgb(85,85,85);">下域名虚拟主机在个人主页目录上实现过程</span><span style="font-family:Arial, sans-serif;font-size:7.5pt;">&nbsp;<span style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;"><a href="http://dreamfire.blog.51cto.com/418026/163612" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);">http://dreamfire.blog.51cto.com/418026/163612</a></span></span></p> 
   <p></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'宋体';font-size:7.5pt;color:rgb(85,85,85);">通过交互式脚本自动创建</span><span style="font-size:7.5pt;color:rgb(85,85,85);">Apache</span><span style="font-family:'宋体';font-size:7.5pt;color:rgb(85,85,85);">虚拟主机</span><span style="font-family:Arial, sans-serif;font-size:7.5pt;"><a href="http://dreamfire.blog.51cto.com/418026/1152672" rel="nofollow" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;text-decoration:none;color:rgb(66,133,244);font-size:16px;">http://dreamfire.blog.51cto.com/418026/1152672</a></span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;"></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'宋体';font-size:7.5pt;color:rgb(85,85,85);">通过</span><span style="font-size:7.5pt;color:rgb(85,85,85);">DNS View</span><span style="font-family:'宋体';font-size:7.5pt;color:rgb(85,85,85);">实现不同区域访问域名解析</span><span style="font-family:Arial, sans-serif;font-size:7.5pt;"><a href="http://dreamfire.blog.51cto.com/418026/1133159" rel="nofollow" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;text-decoration:none;color:rgb(66,133,244);font-size:16px;">http://dreamfire.blog.51cto.com/418026/1133159</a></span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;"></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-size:7.5pt;color:rgb(85,85,85);">DNS</span><span style="font-family:'宋体';font-size:7.5pt;color:rgb(85,85,85);">配置详解一</span><span style="font-size:7.5pt;color:rgb(85,85,85);">&nbsp;DNS</span><span style="font-family:'宋体';font-size:7.5pt;color:rgb(85,85,85);">相关概念理解及配置基础</span><span style="font-size:7.5pt;color:rgb(85,85,85);"><a href="http://dreamfire.blog.51cto.com/418026/1091943" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);font-size:16px;">http://dreamfire.blog.51cto.com/418026/1091943</a></span><span style="font-family:Arial, sans-serif;font-size:7.5pt;"></span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;"></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'宋体';font-size:7.5pt;">配置一个简单的</span><span style="font-family:Arial, sans-serif;font-size:7.5pt;">Apache</span><span style="font-family:'宋体';font-size:7.5pt;">虚拟主机：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;</p> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">[root@rhel6u3-4&nbsp;~]#sed&nbsp;-i&nbsp;'s/#NameVirtualHost/NameVirtualHost/'&nbsp;/etc/httpd/conf/httpd.conf&nbsp;//将#去掉，启动虚拟主机功能&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">[root@rhel6u3-4&nbsp;~]#&nbsp;cat&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;/etc/httpd/conf/httpd.conf&nbsp;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">endf</span><span style="border:none;">&nbsp;//添加一台虚拟主机&nbsp;</span></span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">VirtualHost</span><span style="border:none;">&nbsp;*:80</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;</span></span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DocumentRoot&nbsp;/var/local/www&nbsp;</span></span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ServerName&nbsp;www1.rsyslog.org&nbsp;</span></span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&lt;/</span><span class="tag-name" style="border:none;color:rgb(0,102,153);font-weight:bold;">VirtualHost</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;</span></span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;"><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">&nbsp;endf&nbsp;</span></span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">[root@rhel6u3-4&nbsp;~]#&nbsp;mkdir&nbsp;/var/local/www1&nbsp;//创建虚拟主机目录&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">[root@rhel6u3-4&nbsp;~]#&nbsp;echo&nbsp;"This&nbsp;is&nbsp;www1.rsyslog.org&nbsp;website"&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">/var/local/www1/index.html&nbsp;//创建虚拟主机测试页&nbsp;</span></span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">[root@rhel6u3-4&nbsp;~]#&nbsp;cat&nbsp;/var/local/www1/index.html&nbsp;&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">This&nbsp;is&nbsp;www1.rsyslog.org&nbsp;website&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">[root@rhel6u3-4&nbsp;~]#&nbsp;/etc/rc.d/init.d/httpd&nbsp;restart&nbsp;//重启httpd服务&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Stopping&nbsp;httpd:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;&nbsp;OK&nbsp;&nbsp;]&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Starting&nbsp;httpd:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;&nbsp;OK&nbsp;&nbsp;]&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">[root@rhel6u3-4&nbsp;~]#&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">[root@rhel6u3-2&nbsp;~]#&nbsp;vim&nbsp;/var/named/view/zone/Others.rsyslog.org.zone&nbsp;//在DNS服务器上添加A记录&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">www1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;192.168.100.104&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">[root@rhel6u3-2&nbsp;~]#&nbsp;/etc/rc.d/init.d/named&nbsp;restart&nbsp;//重启DNS服务器，使记录生效&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Stopping&nbsp;named:&nbsp;.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;&nbsp;OK&nbsp;&nbsp;]&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Starting&nbsp;named:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;&nbsp;OK&nbsp;&nbsp;]&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">[root@rhel6u3-4&nbsp;~]#&nbsp;cat&nbsp;/etc/resolv.conf&nbsp;&nbsp;//在web服务器上添加DNS地址，进行测试&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">nameserver&nbsp;192.168.100.102&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">[root@rhel6u3-4&nbsp;~]#&nbsp;nslookup&nbsp;www1.rsyslog.org&nbsp;//通过nslookup先解析域名是否OK&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Server:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;192.168.100.102&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Address:&nbsp;&nbsp;&nbsp;&nbsp;192.168.100.102#53&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Name:&nbsp;&nbsp;&nbsp;www1.rsyslog.org&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Address:&nbsp;192.168.100.104&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">[root@rhel6u3-4&nbsp;~]#&nbsp;links&nbsp;-dump&nbsp;http://www1.rsyslog.org&nbsp;//通过links命令测试网站是否能够正常访问&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;This&nbsp;is&nbsp;www1.rsyslog.org&nbsp;website&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">[root@rhel6u3-4&nbsp;~]#&nbsp;</span></li> 
   </ol>
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;</p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:Arial, sans-serif;">2</span><span style="font-family:'宋体';">、单独在</span><span style="font-family:Arial, sans-serif;">Nginx</span><span style="font-family:'宋体';">上部署</span><span style="font-family:Arial, sans-serif;">web</span><span style="font-family:'宋体';">（</span><span style="font-family:Arial, sans-serif;">www2.rsyslog.org</span><span style="font-family:'宋体';">）服务器，并实现访问（简单介绍）</span><span style="font-family:Arial, sans-serif;"></span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;"></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-size:7.5pt;color:rgb(85,85,85);">Nginx</span><span style="font-family:'宋体';font-size:7.5pt;color:rgb(85,85,85);">实战基础篇一</span><span style="font-size:7.5pt;color:rgb(85,85,85);">&nbsp;</span><span style="font-family:'宋体';font-size:7.5pt;color:rgb(85,85,85);">源码包编译安装部署</span><span style="font-size:7.5pt;color:rgb(85,85,85);">web</span><span style="font-family:'宋体';font-size:7.5pt;color:rgb(85,85,85);">服务器</span><span style="font-family:Arial, sans-serif;font-size:7.5pt;"><a href="http://dreamfire.blog.51cto.com/418026/1140965" rel="nofollow" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;text-decoration:none;color:rgb(66,133,244);font-size:16px;">http://dreamfire.blog.51cto.com/418026/1140965</a></span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;"></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-size:7.5pt;color:rgb(85,85,85);">Nginx</span><span style="font-family:'宋体';font-size:7.5pt;color:rgb(85,85,85);">上虚拟主机的实现过程</span><span style="font-size:7.5pt;color:rgb(85,85,85);"><a href="http://dreamfire.blog.51cto.com/418026/1141018" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);font-size:16px;">http://dreamfire.blog.51cto.com/418026/1141018</a></span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;</p> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">//nginx搭建过程略&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">[root@rhel6u3-5&nbsp;~]#&nbsp;vim&nbsp;/usr/local/nginx/conf/nginx.conf&nbsp;//在nginx.conf中添加一台虚拟主机&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">http&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">………&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">{&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">server&nbsp;{&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;listen&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;80;&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server_name&nbsp;&nbsp;www1.rsyslog.org&nbsp;&nbsp;;&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;location&nbsp;/&nbsp;{&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root&nbsp;&nbsp;&nbsp;www1;&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;index&nbsp;&nbsp;index.html&nbsp;index.htm;&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">}&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">…….&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">}&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">[root@rhel6u3-5&nbsp;~]#&nbsp;mkdir&nbsp;/usr/local/nginx/www2&nbsp;//创建虚拟主机目录&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">[root@rhel6u3-5&nbsp;~]#&nbsp;echo&nbsp;"This&nbsp;is&nbsp;www2.rsyslog.org&nbsp;website"&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span style="border:none;">/usr/local/nginx/www2/index.html&nbsp;//创建测试页&nbsp;</span></span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">[root@rhel6u3-5&nbsp;~]#&nbsp;/etc/rc.d/init.d/nginx&nbsp;restart&nbsp;//重启nginx服务器&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">nginx:&nbsp;the&nbsp;configuration&nbsp;file&nbsp;/usr/local/nginx/conf/nginx.conf&nbsp;syntax&nbsp;is&nbsp;ok&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">nginx:&nbsp;configuration&nbsp;file&nbsp;/usr/local/nginx/conf/nginx.conf&nbsp;test&nbsp;is&nbsp;successful&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Stopping&nbsp;nginx:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;&nbsp;OK&nbsp;&nbsp;]&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Starting&nbsp;nginx:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;&nbsp;OK&nbsp;&nbsp;]&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">[root@rhel6u3-2&nbsp;~]#&nbsp;vim&nbsp;/var/named/view/zone/Others.rsyslog.org.zone&nbsp;//dns服务器上添加A记录&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">www2&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;192.168.100.105&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">[root@rhel6u3-4&nbsp;~]#&nbsp;nslookup&nbsp;www2.rsyslog.org&nbsp;//测试域名是否能够正确解析&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Server:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;192.168.100.102&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Address:&nbsp;&nbsp;&nbsp;&nbsp;192.168.100.102#53&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Name:&nbsp;&nbsp;&nbsp;www2.rsyslog.org&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Address:&nbsp;192.168.100.105&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">[root@rhel6u3-4&nbsp;~]#&nbsp;links&nbsp;-dump&nbsp;http://www2.rsyslog.org&nbsp;&nbsp;//通过links命令测试网站是否能够正常访问&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;This&nbsp;is&nbsp;www2.rsyslog.org&nbsp;website&nbsp;</span></li> 
   </ol>
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;</p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;margin-left:18pt;font-size:16px;color:rgb(51,51,51);text-indent:-18pt;"><b><span style="font-family:Arial, sans-serif;">1、<span style="font-family:'Times New Roman';font-size:7pt;font-weight:normal;">&nbsp;</span></span></b><b><span style="font-family:'宋体';">部署</span></b><b><span style="font-family:Arial, sans-serif;">Nginx</span></b><b><span style="font-family:'宋体';">反向代理服务器，实现代理和负载均衡</span></b><b><span style="font-family:Arial, sans-serif;"></span></b></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;"><b></b></p> 
   <b></b> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:Arial, sans-serif;">&nbsp;</span></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><b><span style="font-family:Arial, sans-serif;">Nginx</span></b><b><span style="font-family:'宋体';">的</span></b><b><span style="font-family:Arial, sans-serif;">upstream</span></b><b><span style="font-family:'宋体';">目前支持</span></b><b><span style="font-family:Arial, sans-serif;">5</span></b><b><span style="font-family:'宋体';">种方式的分配</span></b><b><span style="font-family:Arial, sans-serif;"></span></b></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;"><b></b></p> 
   <b></b> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:Arial, sans-serif;">1</span><span style="font-family:'宋体';">　轮询（默认）</span><span style="font-family:Arial, sans-serif;"></span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;"></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'宋体';">每个请求按时间顺序逐一分配到不同的后端服务器，如果后端服务器</span><span style="font-family:Arial, sans-serif;">down</span><span style="font-family:'宋体';">掉，能自动剔除。</span><span style="font-family:Arial, sans-serif;"></span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;"></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:Arial, sans-serif;">2</span><span style="font-family:'宋体';">　</span><span style="font-family:Arial, sans-serif;">weight</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;"></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'宋体';">指定轮询几率，</span><span style="font-family:Arial, sans-serif;">weight</span><span style="font-family:'宋体';">和访问比率成正比，用于后端服务器性能不均的情况。</span><span style="font-family:Arial, sans-serif;"></span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;"></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'宋体';font-size:10.5pt;">例如：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;</p> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">upstream&nbsp;bakend&nbsp;{&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">server&nbsp;192.168.100.104&nbsp;<span class="attribute" style="border:none;color:#FF0000;">weight</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">10</span><span style="border:none;">;&nbsp;</span></span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">server&nbsp;192.168.100.105&nbsp;<span class="attribute" style="border:none;color:#FF0000;">weight</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">10</span><span style="border:none;">;&nbsp;</span></span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">}&nbsp;</span></li> 
   </ol>
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;</p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:Arial, sans-serif;">3</span><span style="font-family:'宋体';">　</span><span style="font-family:Arial, sans-serif;">ip_hash</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;"></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'宋体';">每个请求按访问</span><span style="font-family:Arial, sans-serif;">ip</span><span style="font-family:'宋体';">的</span><span style="font-family:Arial, sans-serif;">hash</span><span style="font-family:'宋体';">结果分配，这样每个访客固定访问一个后端服务器，可以</span><span style="font-family:Arial, sans-serif;"></span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;"></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'宋体';">解决</span><span style="font-family:Arial, sans-serif;">session</span><span style="font-family:'宋体';">的问题。</span><span style="font-family:Arial, sans-serif;"></span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;"></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'宋体';">例如：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;</p> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">upstream&nbsp;bakend&nbsp;{&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">ip_hash;&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">server&nbsp;192.168.100.104:80;&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">server&nbsp;192.168.100.105:80;&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">}&nbsp;</span></li> 
   </ol>
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;</p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:Arial, sans-serif;">4</span><span style="font-family:'宋体';">　</span><span style="font-family:Arial, sans-serif;">fair</span><span style="font-family:'宋体';">（第三方）</span><span style="font-family:Arial, sans-serif;"></span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;"></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'宋体';">按后端服务器的响应时间来分配请求，响应时间短的优先分配。</span><span style="font-family:Arial, sans-serif;"></span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;"></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'宋体';">例如：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;</p> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">upstream&nbsp;bakend&nbsp;{&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">server&nbsp;192.168.100.104:80;&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">server&nbsp;192.168.100.105:80;&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">fair;&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">}&nbsp;</span></li> 
   </ol>
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;</p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:Arial, sans-serif;">5</span><span style="font-family:'宋体';">　</span><span style="font-family:Arial, sans-serif;">url_hash</span><span style="font-family:'宋体';">（第三方）</span><span style="font-family:Arial, sans-serif;"></span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;"></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'宋体';">按</span><span style="font-family:'宋体';">访问</span><span style="font-family:Arial, sans-serif;">url</span><span style="font-family:'宋体';">的</span><span style="font-family:Arial, sans-serif;">hash</span><span style="font-family:'宋体';">结果来分配请求，使每个</span><span style="font-family:Arial, sans-serif;">url</span><span style="font-family:'宋体';">定向到同一个后端服务器，后端服务</span><span style="font-family:Arial, sans-serif;"></span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;"></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'宋体';">器为缓存时比较有效。</span><span style="font-family:Arial, sans-serif;"></span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;"></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'宋体';">例如：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;</p> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">upstream&nbsp;backend&nbsp;{&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">server&nbsp;192.168.100.104:3128;&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">server&nbsp;192.168.100.105:3128;&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">hash&nbsp;$request_uri;&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">hash_method&nbsp;crc32;&nbsp;</span></li> 
   </ol>
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;</p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><b><span style="font-family:'宋体';">每个设备的状态设置为</span></b><b><span style="font-family:Arial, sans-serif;">:</span></b></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;"><b></b></p> 
   <b></b> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:Arial, sans-serif;">1. down&nbsp;</span><span style="font-family:'宋体';">表示单前的</span><span style="font-family:Arial, sans-serif;">server</span><span style="font-family:'宋体';">暂时不参与负载</span><span style="font-family:Arial, sans-serif;"></span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;"></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:Arial, sans-serif;">2. weight&nbsp;</span><span style="font-family:'宋体';">默认为</span><span style="font-family:Arial, sans-serif;">1.weight</span><span style="font-family:'宋体';">越大，负载的权重就越大，根据服务器性能而定</span><span style="font-family:Arial, sans-serif;"></span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;"></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:Arial, sans-serif;">3. max_fail</span><span style="font-family:Arial, sans-serif;">s&nbsp;</span><span style="font-family:'宋体';">：允许请求失败的次数默认为</span><span style="font-family:Arial, sans-serif;">1.</span><span style="font-family:'宋体';">当超过最大次数时，返回</span><span style="font-family:Arial, sans-serif;">proxy_next_upstream&nbsp;</span><span style="font-family:'宋体';">模块定义的错误</span><span style="font-family:Arial, sans-serif;"></span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;"></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:Arial, sans-serif;">4. fail_timeout:max_fails</span><span style="font-family:'宋体';">次失败后，暂停的时间。</span><span style="font-family:Arial, sans-serif;"></span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;"></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:Arial, sans-serif;">5. backup</span><span style="font-family:'宋体';">：</span><span style="font-family:Arial, sans-serif;">&nbsp;</span><span style="font-family:'宋体';">其它所有的非</span><span style="font-family:Arial, sans-serif;">backup</span><span style="font-family:'宋体';">机器</span><span style="font-family:Arial, sans-serif;">down</span><span style="font-family:'宋体';">或者忙的时候，请求</span><span style="font-family:Arial, sans-serif;">backup</span><span style="font-family:'宋体';">机器。所以这台机器压力会最轻。</span><span style="font-family:Arial, sans-serif;"></span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;"></p> 
   <p align="left" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:Arial, sans-serif;">Nginx</span><span style="font-family:'宋体';">支持同时设置多组的负载均衡，用来给不用的</span><span style="font-family:Arial, sans-serif;">server</span><span style="font-family:'宋体';">来使用。</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;</p> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">安装nginx过程略&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">[root@rhel6u3&nbsp;~]#&nbsp;vim&nbsp;/usr/local/nginx/conf/nginx.conf&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">………&nbsp;//内容略&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">http&nbsp;{&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">……..&nbsp;//内容略&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;client_max_body_size&nbsp;300m;&nbsp;&nbsp;//允许客户端请求的最大单个文件字节数，它出现在请求头部的Content-Length字段。（可以更改此参数达到限制用户上传文件大小的目的）&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;client_body_buffer_size&nbsp;128k;&nbsp;\\缓冲区代理缓冲客户端请求的最大字节数，可以理解为先保存到本地再传给用户。&nbsp;这个指令可以指定连接请求使用的缓冲区大小，默认值：8k/16k&nbsp;。如果客户端请求一个文件大于128k，则Nginx会尝试在硬盘上创建临时文件。如果硬盘满了，则会报错。&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;client_body_temp_path&nbsp;/dev/shm/client_body_temp;&nbsp;\\这个指令指定连接请求试图写入缓存文件的目录路径。&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_connect_timeout&nbsp;600;&nbsp;\\跟后端服务器连接的超时时间，发起握手等候响应超时时间&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_read_timeout&nbsp;600;&nbsp;\\连接成功&nbsp;_等候后端服务器的响应时间_其实已经进入后端的排队中等候处理。默认值：&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_send_timeout&nbsp;600;&nbsp;\\后端服务器回传时间_就是在规定时间内后端服务器必须传完所有的数据。设置代理服务器转发请求的超时时间，同样指完成两次握手后的时间，如果超过这个时间代理服务器没有数据转发到后端服务器，nginx将关闭连接。&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_buffer_size&nbsp;16k;&nbsp;\\代理请求缓存区_这个缓存区间会保存用户的头信息来提供Nginx进行规则处理。一般只要能保存下头信息即可。默认值：proxy_buffer_size&nbsp;4k/8k&nbsp;。设置从后端服务器读取的第一部分应答的缓&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">冲区大小，通常情况下这部分应答中包含一个小的应答头。&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_buffers&nbsp;4&nbsp;32k;&nbsp;\\设置用于读取应答（来自后端服务器）的缓冲区数目和大小，告诉Nginx保存单个用的几个&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">Buffer，最大用多大空间&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_busy_buffers_size&nbsp;64k;&nbsp;\\如果系统很忙的时候可以申请更大的proxy_buffers，官方推荐*2&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_temp_file_write_size&nbsp;64k;&nbsp;\\设置在写入proxy_temp_path时缓存临文件数据的大小，在预防一个工作进程在传递文件时阻塞太长。&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_temp_path&nbsp;/dev/shm/proxy_temp;&nbsp;\\类似于http核心模块中的client_body_temp_path指令，指定一个目录来缓冲比较大的被代理请求。&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">upstream&nbsp;&nbsp;&nbsp;rsyslog.org_pool&nbsp;{&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server&nbsp;192.168.100.104:80&nbsp;<span class="attribute" style="border:none;color:#FF0000;">weight</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">4</span><span style="border:none;">&nbsp;</span><span class="attribute" style="border:none;color:#FF0000;">max_fails</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">2</span><span style="border:none;">&nbsp;</span><span class="attribute" style="border:none;color:#FF0000;">fail_timeout</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">30s</span><span style="border:none;">;&nbsp;&nbsp;//为了做测试两台服务器默认性能都一样，平均负载&nbsp;</span></span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server&nbsp;192.168.100.105:80&nbsp;<span class="attribute" style="border:none;color:#FF0000;">weight</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">4</span><span style="border:none;">&nbsp;</span><span class="attribute" style="border:none;color:#FF0000;">max_fails</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">2</span><span style="border:none;">&nbsp;</span><span class="attribute" style="border:none;color:#FF0000;">fail_timeout</span><span style="border:none;">=</span><span class="attribute-value" style="border:none;color:#0000FF;">30s</span><span style="border:none;">;&nbsp;</span></span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;\\HTTP负载均衡模块。upstream这个字段设置一群服务器，可以将这个字段放在proxy_pass和fastcgi_pass指令中作为一个单独的实体，它们可以是监听不同端口的服务器，并且也可以是同时监听TCP和Unix&nbsp;socket的服务器。&nbsp;服务器可以指定不同的权重，默认为1。&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server&nbsp;{&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;listen&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;80;&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server_name&nbsp;&nbsp;www.rsyslog.org;&nbsp;&nbsp;//设置所有web服务器负载的共同域名&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;index&nbsp;&nbsp;index.html&nbsp;index.htm;&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;location&nbsp;/&nbsp;&nbsp;{&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_pass&nbsp;http://rsyslog.org_pool/;&nbsp;//确定需要代理的URL，端口或socket。&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_set_header&nbsp;Host&nbsp;$host;&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_redirect&nbsp;off;&nbsp;\\如果需要修改从后端服务器传来的应答头中的"Location"和"Refresh"字段，可以用这个指令设置。&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_set_header&nbsp;X-Real-IP&nbsp;$remote_addr;&nbsp;\\这个指令允许将发送到后端服务器的请求头重新定义或者增加一些字段。&nbsp;这个值可以是一个文本，变量或者它们的组合。&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_set_header&nbsp;X-Forwarded-For&nbsp;$proxy_add_x_forwarded_for;&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_next_upstream&nbsp;error&nbsp;timeout&nbsp;invalid_header&nbsp;http_500&nbsp;http_502&nbsp;http_503&nbsp;http_504&nbsp;http_404;&nbsp;\\当后端服务器遇到500、502、503、504、404错误与超时，自动将请求转发给rsyslog.org_pool组的另一台服务器，达到故障转移 </span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">\\#确定在何种情况下请求将转发到下一个服务器：&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">#error&nbsp;-&nbsp;在连接到一个服务器，发送一个请求，或者读取应答时发生错误。&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">#timeout&nbsp;-&nbsp;在连接到服务器，转发请求或者读取应答时发生超时。&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">#invalid_header&nbsp;-&nbsp;服务器返回空的或者错误的应答。&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">#http_500&nbsp;-&nbsp;服务器返回500代码。&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">#http_502&nbsp;-&nbsp;服务器返回502代码。&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">#http_503&nbsp;-&nbsp;服务器返回503代码。&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">#http_504&nbsp;-&nbsp;服务器返回504代码。&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">#http_404&nbsp;-&nbsp;服务器返回404代码。&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">#off&nbsp;-&nbsp;禁止转发请求到下一台服务器。&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">}&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">&nbsp;</span></li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">[root@rhel6u3-2&nbsp;~]#&nbsp;vim&nbsp;/var/named/view/zone/Others.rsyslog.org.zone&nbsp;</span></li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"><span style="border:none;color:#000000;">www&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;192.168.100.106&nbsp;</span></li> 
   </ol>
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;</p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><strong><span style="font-family:'宋体';">测试效果</span></strong></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;</p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://blog.51cto.com/attachment/201303/170523302.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img alt="" src="http://blog.51cto.com/attachment/201303/170523302.png" style="border:none;"></a></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;</p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://blog.51cto.com/attachment/201303/170538729.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img alt="" src="http://blog.51cto.com/attachment/201303/170538729.png" style="border:none;"></a></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;</p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://blog.51cto.com/attachment/201303/170549230.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img alt="" src="http://blog.51cto.com/attachment/201303/170549230.png" style="border:none;"></a></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">&nbsp;</p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://blog.51cto.com/attachment/201303/170601931.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img alt="" src="http://blog.51cto.com/attachment/201303/170601931.png" style="border:none;"></a></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><br></p> 
   <p><font color="#333333">本文转自凌激冰51CTO博客，原文链接：http://blog.51cto.com/dreamfire/1158301，如需转载请自行联系原作者</font><br></p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
