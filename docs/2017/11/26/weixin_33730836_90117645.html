<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>SQL Server编程（06）触发器 « NotBeCN</title>
  <meta name="description" content="                             SQL Server 通过触发器用来保证业务逻辑和数据的完整性。在SQL Server中，触发器是一种特殊类型的存储过程，可在执行语言事件时自动触发。SQL Server中触发器包括三种：DML触发器、DDL触发器和登录触发器。          DML触...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/26/weixin_33730836_90117645.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">SQL Server编程（06）触发器</h1>
    <p class="post-meta">Nov 26, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <div>
    <br>
   </div> 
   <div> 
    <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;">SQL Server 通过触发器用来保证业务逻辑和数据的完整性。在SQL Server中，触发器是一种特殊类型的存储过程，可在执行语言事件时自动触发。SQL Server中触发器包括三种：DML触发器、DDL触发器和登录触发器。</p> 
    <ul style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;">
     <li style="list-style:disc;">DML触发器：执行DML语句触发执行，例如操作数据表或视图的insert、update、delete语句，不包含select。</li> 
     <li style="list-style:disc;">DDL触发器：执行DDL语句时触发执行，例如create table等语句。</li> 
     <li style="list-style:disc;">登录触发器：在用户登录SQL Server实例创建会话时触发。</li> 
    </ul>
    <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;">SQL Server将触发器和触发它的语句放在一个可回滚事务中，如果触发器发生异常，则与该触发器相关的语句自动回滚。</p> 
    <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;">DML的功能（优点）：</p> 
    <ul style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;">
     <li style="list-style:disc;">实现表的级联更改，实现与外键约束相似的功能（如果外键可以约束，则不推荐使用触发器）</li> 
     <li style="list-style:disc;">防止恶意或错误的insert、update、delete操作。触发器比check约束更加强大，触发器可以引用其它数据表，执行更加复杂的限制，而check约束不能引用其它表。</li> 
     <li style="list-style:disc;">可以获取到更改前和修改后的数据，根据差异采取措施，决定是commit，还是rollback</li> 
     <li style="list-style:disc;">一个表支持创建多个同类型的DML触发器</li> 
    </ul>
    <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;">注意：<strong>有日志操作的行为才会激活触发器。</strong>例如truncate table删除表中所有数据，并没有执行日志操作，所以不会激活delete触发器。</p> 
    <h2 style="font-size:21px;line-height:1.5;font-family:Verdana, Arial, Helvetica, sans-serif;">创建触发器</h2> 
    <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;">DML触发器分为：</p> 
    <ul style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;">
     <li style="list-style:disc;">after触发器（之后触发） 
      <ol>
       <li style="list-style:disc;">insert触发器</li> 
       <li style="list-style:disc;">update触发器</li> 
       <li style="list-style:disc;">delete触发器</li> 
      </ol></li> 
     <li style="list-style:disc;">instead of 触发器 （之前触发）</li> 
    </ul>
    <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;">其中after触发器要求只有执行某一操作insert、update、delete之后触发器才被触发，且只能定义在表上。而instead of触发器表示并不执行其定义的操作（insert、update、delete）而仅是执行触发器本身。既可以在表上定义instead of触发器，也可以在视图上定义。</p> 
    <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;">触发器有两个特殊的表：插入表（instered表）和删除表（deleted表）。这两张是逻辑表也是虚表。有系统在内存中创建者两张表，不会存储在数据库中。而且两张表的都是只读的，只能读取数据而不能修改数据。这两张表的结果总是与被改触发器应用的表的结构相同。当触发器完成工作后，这两张表就会被删除。Inserted表的数据是插入或是修改后的数据，而deleted表的数据是更新前的或是删除的数据。</p> 
    <table border="1" style="border:1px solid #C0C0C0;border-collapse:collapse;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;">
     <tbody>
      <tr>
       <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;">&nbsp;</td> 
       <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;">Inserted逻辑表</td> 
       <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;">Deleted逻辑表</td> 
      </tr>
      <tr>
       <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;">增加记录（insert）</td> 
       <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;">存放增加的记录</td> 
       <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;">无</td> 
      </tr>
      <tr>
       <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;">删除记录（delete）</td> 
       <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;">无</td> 
       <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;">存放被删除的记录</td> 
      </tr>
      <tr>
       <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;">修改记录（update）</td> 
       <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;">存放更新后的记录</td> 
       <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;">存放更新前的记录</td> 
      </tr>
     </tbody>
    </table>
    <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;">Update数据的时候就是先删除表记录，然后增加一条记录。这样在inserted和deleted表就都有update后的数据记录了。注意的是：触发器本身就是一个事务，所以在触发器里面可以对修改数据进行一些特殊的检查。如果不满足可以利用事务回滚，撤销操作。</p> 
    <h4 style="font-size:14px;font-family:Verdana, Arial, Helvetica, sans-serif;">创建触发器的语法：</h4> 
    <pre class="code"><span style="color:#0000FF;">create trigger </span><span style="color:#008080;">tgr_name
</span><span style="color:#0000FF;">on </span><span style="color:#008080;">table_name
</span><span style="color:#0000FF;">with </span><span style="color:#008080;">encrypion </span><span style="color:#FF0000;">–</span><span style="color:#008080;">加密触发器
    </span><span style="color:#0000FF;">for </span><span>update</span><span style="color:#808080;">...
</span><span style="color:#0000FF;">as
    </span><span style="color:#008080;">Transact</span><span style="color:#808080;">-</span><span style="color:#0000FF;">SQL
</span></pre> 
    <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;">&nbsp;</p> 
    <h4 style="font-size:14px;font-family:Verdana, Arial, Helvetica, sans-serif;">创建insert类型触发器</h4> 
    <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;">insert触发器，会在inserted表中添加一条刚插入的记录。</p> 
    <pre class="code"><span style="color:#008000;">--创建insert插入类型触发器
</span><span style="color:#0000FF;">if </span><span style="color:#808080;">(</span><span>object_id</span><span style="color:#808080;">(</span><span style="color:#FF0000;">'tgr_classes_insert'</span><span style="color:#808080;">, </span><span style="color:#FF0000;">'tr'</span><span style="color:#808080;">) is not null)
    </span><span style="color:#0000FF;">drop trigger </span><span style="color:#008080;">tgr_classes_insert
</span><span style="color:#0000FF;">go
create trigger </span><span style="color:#008080;">tgr_classes_insert
</span><span style="color:#0000FF;">on </span><span style="color:#008080;">classes
    </span><span style="color:#0000FF;">for insert </span><span style="color:#008000;">--插入触发
</span><span style="color:#0000FF;">as
    </span><span style="color:#008000;">--定义变量
    </span><span style="color:#0000FF;">declare </span><span style="color:#008080;">@id </span><span style="color:#0000FF;">int</span><span style="color:#808080;">, </span><span style="color:#008080;">@name </span><span style="color:#0000FF;">varchar</span><span style="color:#808080;">(</span>20<span style="color:#808080;">), </span><span style="color:#008080;">@temp </span><span style="color:#0000FF;">int</span><span style="color:#808080;">;
    </span><span style="color:#008000;">--在inserted表中查询已经插入记录信息
    </span><span style="color:#0000FF;">select </span><span style="color:#008080;">@id </span><span style="color:#808080;">= </span><span style="color:#008080;">id</span><span style="color:#808080;">, </span><span style="color:#008080;">@name </span><span style="color:#808080;">= </span><span style="color:#008080;">name </span><span style="color:#0000FF;">from </span><span style="color:#008080;">inserted</span><span style="color:#808080;">;
    </span><span style="color:#0000FF;">set </span><span style="color:#008080;">@name </span><span style="color:#808080;">= </span><span style="color:#008080;">@name </span><span style="color:#808080;">+ </span><span>convert</span><span style="color:#808080;">(</span><span style="color:#0000FF;">varchar</span><span style="color:#808080;">, </span><span style="color:#008080;">@id</span><span style="color:#808080;">);
    </span><span style="color:#0000FF;">set </span><span style="color:#008080;">@temp </span><span style="color:#808080;">= </span><span style="color:#008080;">@id </span><span style="color:#808080;">/ </span>2<span style="color:#808080;">;    
    </span><span style="color:#0000FF;">insert into </span><span style="color:#008080;">student </span><span style="color:#0000FF;">values</span><span style="color:#808080;">(</span><span style="color:#008080;">@name</span><span style="color:#808080;">, </span>18 <span style="color:#808080;">+ </span><span style="color:#008080;">@id</span><span style="color:#808080;">, </span><span style="color:#008080;">@temp</span><span style="color:#808080;">, </span><span style="color:#008080;">@id</span><span style="color:#808080;">);
    </span><span style="color:#0000FF;">print </span><span style="color:#FF0000;">'添加学生成功！'</span><span style="color:#808080;">;
</span><span style="color:#0000FF;">go
</span><span style="color:#008000;">--插入数据
</span><span style="color:#0000FF;">insert into </span><span style="color:#008080;">classes </span><span style="color:#0000FF;">values</span><span style="color:#808080;">(</span><span style="color:#FF0000;">'5班'</span><span style="color:#808080;">, </span><span>getDate</span><span style="color:#808080;">());
</span><span style="color:#008000;">--查询数据
</span><span style="color:#0000FF;">select </span><span style="color:#808080;">* </span><span style="color:#0000FF;">from </span><span style="color:#008080;">classes</span><span style="color:#808080;">;
</span><span style="color:#0000FF;">select </span><span style="color:#808080;">* </span><span style="color:#0000FF;">from </span><span style="color:#008080;">student </span><span style="color:#0000FF;">order by </span><span style="color:#008080;">id</span><span style="color:#808080;">;
</span></pre> 
    <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;">&nbsp;</p> 
    <h4 style="font-size:14px;font-family:Verdana, Arial, Helvetica, sans-serif;">创建delete类型触发器</h4> 
    <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;">delete触发器会在删除数据的时候，将刚才删除的数据保存在deleted表中。</p> 
    <pre class="code"><span style="color:#008000;">--delete删除类型触发器
</span><span style="color:#0000FF;">if </span><span style="color:#808080;">(</span><span>object_id</span><span style="color:#808080;">(</span><span style="color:#FF0000;">'tgr_classes_delete'</span><span style="color:#808080;">, </span><span style="color:#FF0000;">'TR'</span><span style="color:#808080;">) is not null)
    </span><span style="color:#0000FF;">drop trigger </span><span style="color:#008080;">tgr_classes_delete
</span><span style="color:#0000FF;">go
create trigger </span><span style="color:#008080;">tgr_classes_delete
</span><span style="color:#0000FF;">on </span><span style="color:#008080;">classes
    </span><span style="color:#0000FF;">for delete </span><span style="color:#008000;">--删除触发
</span><span style="color:#0000FF;">as
    print </span><span style="color:#FF0000;">'备份数据中……'</span><span style="color:#808080;">;    
    </span><span style="color:#0000FF;">if </span><span style="color:#808080;">(</span><span>object_id</span><span style="color:#808080;">(</span><span style="color:#FF0000;">'classesBackup'</span><span style="color:#808080;">, </span><span style="color:#FF0000;">'U'</span><span style="color:#808080;">) is not null)
        </span><span style="color:#008000;">--存在classesBackup，直接插入数据
        </span><span style="color:#0000FF;">insert into </span><span style="color:#008080;">classesBackup </span><span style="color:#0000FF;">select </span><span style="color:#008080;">name</span><span style="color:#808080;">, </span><span style="color:#008080;">createDate </span><span style="color:#0000FF;">from </span><span style="color:#008080;">deleted</span><span style="color:#808080;">;
    </span><span style="color:#0000FF;">else
        </span><span style="color:#008000;">--不存在classesBackup创建再插入
        </span><span style="color:#0000FF;">select </span><span style="color:#808080;">* </span><span style="color:#0000FF;">into </span><span style="color:#008080;">classesBackup </span><span style="color:#0000FF;">from </span><span style="color:#008080;">deleted</span><span style="color:#808080;">;
    </span><span style="color:#0000FF;">print </span><span style="color:#FF0000;">'备份数据成功！'</span><span style="color:#808080;">;
</span><span style="color:#0000FF;">go
</span><span style="color:#008000;">--
--不显示影响行数
--set nocount on;
</span><span style="color:#0000FF;">delete </span><span style="color:#008080;">classes </span><span style="color:#0000FF;">where </span><span style="color:#008080;">name </span><span style="color:#808080;">= </span><span style="color:#FF0000;">'5班'</span><span style="color:#808080;">;
</span><span style="color:#008000;">--查询数据
</span><span style="color:#0000FF;">select </span><span style="color:#808080;">* </span><span style="color:#0000FF;">from </span><span style="color:#008080;">classes</span><span style="color:#808080;">;
</span><span style="color:#0000FF;">select </span><span style="color:#808080;">* </span><span style="color:#0000FF;">from </span><span style="color:#008080;">classesBackup</span><span style="color:#808080;">;
</span></pre> 
    <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;">&nbsp;</p> 
    <h4 style="font-size:14px;font-family:Verdana, Arial, Helvetica, sans-serif;">创建update类型触发器</h4> 
    <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;">update触发器会在更新数据后，将更新前的数据保存在deleted表中，更新后的数据保存在inserted表中。</p> 
    <pre class="code"><span style="color:#008000;">--update更新类型触发器
</span><span style="color:#0000FF;">if </span><span style="color:#808080;">(</span><span>object_id</span><span style="color:#808080;">(</span><span style="color:#FF0000;">'tgr_classes_update'</span><span style="color:#808080;">, </span><span style="color:#FF0000;">'TR'</span><span style="color:#808080;">) is not null)
    </span><span style="color:#0000FF;">drop trigger </span><span style="color:#008080;">tgr_classes_update
</span><span style="color:#0000FF;">go
create trigger </span><span style="color:#008080;">tgr_classes_update
</span><span style="color:#0000FF;">on </span><span style="color:#008080;">classes
    </span><span style="color:#0000FF;">for </span><span>update
</span><span style="color:#0000FF;">as
    declare </span><span style="color:#008080;">@oldName </span><span style="color:#0000FF;">varchar</span><span style="color:#808080;">(</span>20<span style="color:#808080;">), </span><span style="color:#008080;">@newName </span><span style="color:#0000FF;">varchar</span><span style="color:#808080;">(</span>20<span style="color:#808080;">);
    </span><span style="color:#008000;">--更新前的数据
    </span><span style="color:#0000FF;">select </span><span style="color:#008080;">@oldName </span><span style="color:#808080;">= </span><span style="color:#008080;">name </span><span style="color:#0000FF;">from </span><span style="color:#008080;">deleted</span><span style="color:#808080;">;
    </span><span style="color:#0000FF;">if </span><span style="color:#808080;">(exists (</span><span style="color:#0000FF;">select </span><span style="color:#808080;">* </span><span style="color:#0000FF;">from </span><span style="color:#008080;">student </span><span style="color:#0000FF;">where </span><span style="color:#008080;">name </span><span style="color:#808080;">like </span><span style="color:#FF0000;">'%'</span><span style="color:#808080;">+ </span><span style="color:#008080;">@oldName </span><span style="color:#808080;">+ </span><span style="color:#FF0000;">'%'</span><span style="color:#808080;">))
        </span><span style="color:#0000FF;">begin
            </span><span style="color:#008000;">--更新后的数据
            </span><span style="color:#0000FF;">select </span><span style="color:#008080;">@newName </span><span style="color:#808080;">= </span><span style="color:#008080;">name </span><span style="color:#0000FF;">from </span><span style="color:#008080;">inserted</span><span style="color:#808080;">;
            </span><span>update </span><span style="color:#008080;">student </span><span style="color:#0000FF;">set </span><span style="color:#008080;">name </span><span style="color:#808080;">= </span><span>replace</span><span style="color:#808080;">(</span><span style="color:#008080;">name</span><span style="color:#808080;">, </span><span style="color:#008080;">@oldName</span><span style="color:#808080;">, </span><span style="color:#008080;">@newName</span><span style="color:#808080;">) </span><span style="color:#0000FF;">where </span><span style="color:#008080;">name </span><span style="color:#808080;">like </span><span style="color:#FF0000;">'%'</span><span style="color:#808080;">+ </span><span style="color:#008080;">@oldName </span><span style="color:#808080;">+ </span><span style="color:#FF0000;">'%'</span><span style="color:#808080;">;
            </span><span style="color:#0000FF;">print </span><span style="color:#FF0000;">'级联修改数据成功！'</span><span style="color:#808080;">;
        </span><span style="color:#0000FF;">end
    else
        print </span><span style="color:#FF0000;">'无需修改student表！'</span><span style="color:#808080;">;
</span><span style="color:#0000FF;">go
</span><span style="color:#008000;">--查询数据
</span><span style="color:#0000FF;">select </span><span style="color:#808080;">* </span><span style="color:#0000FF;">from </span><span style="color:#008080;">student </span><span style="color:#0000FF;">order by </span><span style="color:#008080;">id</span><span style="color:#808080;">;
</span><span style="color:#0000FF;">select </span><span style="color:#808080;">* </span><span style="color:#0000FF;">from </span><span style="color:#008080;">classes</span><span style="color:#808080;">;
</span><span>update </span><span style="color:#008080;">classes </span><span style="color:#0000FF;">set </span><span style="color:#008080;">name </span><span style="color:#808080;">= </span><span style="color:#FF0000;">'五班' </span><span style="color:#0000FF;">where </span><span style="color:#008080;">name </span><span style="color:#808080;">= </span><span style="color:#FF0000;">'5班'</span><span style="color:#808080;">;
</span></pre> 
    <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;">&nbsp;</p> 
    <h4 style="font-size:14px;font-family:Verdana, Arial, Helvetica, sans-serif;">update更新列级触发器</h4> 
    <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;">更新列级触发器可以用update是否判断更新列记录；</p> 
    <pre class="code"><span style="color:#0000FF;">if </span><span style="color:#808080;">(</span><span>object_id</span><span style="color:#808080;">(</span><span style="color:#FF0000;">'tgr_classes_update_column'</span><span style="color:#808080;">, </span><span style="color:#FF0000;">'TR'</span><span style="color:#808080;">) is not null)
    </span><span style="color:#0000FF;">drop trigger </span><span style="color:#008080;">tgr_classes_update_column
</span><span style="color:#0000FF;">go
create trigger </span><span style="color:#008080;">tgr_classes_update_column
</span><span style="color:#0000FF;">on </span><span style="color:#008080;">classes
    </span><span style="color:#0000FF;">for </span><span>update
</span><span style="color:#0000FF;">as
    </span><span style="color:#008000;">--列级触发器：是否更新了班级创建时间
    </span><span style="color:#0000FF;">if </span><span style="color:#808080;">(</span><span>update</span><span style="color:#808080;">(</span><span style="color:#008080;">createDate</span><span style="color:#808080;">))
    </span><span style="color:#0000FF;">begin
        raisError</span><span style="color:#808080;">(</span><span style="color:#FF0000;">'系统提示：班级创建时间不能修改！'</span><span style="color:#808080;">, </span>16<span style="color:#808080;">, </span>11<span style="color:#808080;">);
        </span><span style="color:#0000FF;">rollback tran</span><span style="color:#808080;">;
    </span><span style="color:#0000FF;">end
go
</span><span style="color:#008000;">--测试
</span><span style="color:#0000FF;">select </span><span style="color:#808080;">* </span><span style="color:#0000FF;">from </span><span style="color:#008080;">student </span><span style="color:#0000FF;">order by </span><span style="color:#008080;">id</span><span style="color:#808080;">;
</span><span style="color:#0000FF;">select </span><span style="color:#808080;">* </span><span style="color:#0000FF;">from </span><span style="color:#008080;">classes</span><span style="color:#808080;">;
</span><span>update </span><span style="color:#008080;">classes </span><span style="color:#0000FF;">set </span><span style="color:#008080;">createDate </span><span style="color:#808080;">= </span><span>getDate</span><span style="color:#808080;">() </span><span style="color:#0000FF;">where </span><span style="color:#008080;">id </span><span style="color:#808080;">= </span>3<span style="color:#808080;">;
</span><span>update </span><span style="color:#008080;">classes </span><span style="color:#0000FF;">set </span><span style="color:#008080;">name </span><span style="color:#808080;">= </span><span style="color:#FF0000;">'四班' </span><span style="color:#0000FF;">where </span><span style="color:#008080;">id </span><span style="color:#808080;">= </span>7<span style="color:#808080;">;

</span></pre> 
    <h4 style="font-size:14px;font-family:Verdana, Arial, Helvetica, sans-serif;">instead of 类型触发器</h4> 
    <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;">instead of 触发器表示并不执行其定义的操作（insert、update、delete）而仅是执行触发器本身的内容。</p> 
    <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;">语法：</p> 
    <pre class="code"><span style="color:#0000FF;">create trigger </span><span style="color:#008080;">tgr_name
</span><span style="color:#0000FF;">on </span><span style="color:#008080;">table_name
</span><span style="color:#0000FF;">with encryption
    instead of </span><span>update</span><span style="color:#808080;">...
</span><span style="color:#0000FF;">as
    </span><span style="color:#008080;">T</span><span style="color:#808080;">-</span><span style="color:#0000FF;">SQL

</span></pre> 
    <h4 style="font-size:14px;font-family:Verdana, Arial, Helvetica, sans-serif;">创建instead of触发器</h4> 
    <pre class="code"><span style="color:#0000FF;">if </span><span style="color:#808080;">(</span><span>object_id</span><span style="color:#808080;">(</span><span style="color:#FF0000;">'tgr_classes_inteadOf'</span><span style="color:#808080;">, </span><span style="color:#FF0000;">'TR'</span><span style="color:#808080;">) is not null)
    </span><span style="color:#0000FF;">drop trigger </span><span style="color:#008080;">tgr_classes_inteadOf
</span><span style="color:#0000FF;">go
create trigger </span><span style="color:#008080;">tgr_classes_inteadOf
</span><span style="color:#0000FF;">on </span><span style="color:#008080;">classes
    </span><span style="color:#0000FF;">instead of delete</span><span style="color:#008000;">/*, update, insert*/
</span><span style="color:#0000FF;">as
    declare </span><span style="color:#008080;">@id </span><span style="color:#0000FF;">int</span><span style="color:#808080;">, </span><span style="color:#008080;">@name </span><span style="color:#0000FF;">varchar</span><span style="color:#808080;">(</span>20<span style="color:#808080;">);
    </span><span style="color:#008000;">--查询被删除的信息，病赋值
    </span><span style="color:#0000FF;">select </span><span style="color:#008080;">@id </span><span style="color:#808080;">= </span><span style="color:#008080;">id</span><span style="color:#808080;">, </span><span style="color:#008080;">@name </span><span style="color:#808080;">= </span><span style="color:#008080;">name </span><span style="color:#0000FF;">from </span><span style="color:#008080;">deleted</span><span style="color:#808080;">;
    </span><span style="color:#0000FF;">print </span><span style="color:#FF0000;">'id: ' </span><span style="color:#808080;">+ </span><span>convert</span><span style="color:#808080;">(</span><span style="color:#0000FF;">varchar</span><span style="color:#808080;">, </span><span style="color:#008080;">@id</span><span style="color:#808080;">) + </span><span style="color:#FF0000;">', name: ' </span><span style="color:#808080;">+ </span><span style="color:#008080;">@name</span><span style="color:#808080;">;
    </span><span style="color:#008000;">--先删除student的信息
    </span><span style="color:#0000FF;">delete </span><span style="color:#008080;">student </span><span style="color:#0000FF;">where </span><span style="color:#008080;">cid </span><span style="color:#808080;">= </span><span style="color:#008080;">@id</span><span style="color:#808080;">;
    </span><span style="color:#008000;">--再删除classes的信息
    </span><span style="color:#0000FF;">delete </span><span style="color:#008080;">classes </span><span style="color:#0000FF;">where </span><span style="color:#008080;">id </span><span style="color:#808080;">= </span><span style="color:#008080;">@id</span><span style="color:#808080;">;
    </span><span style="color:#0000FF;">print </span><span style="color:#FF0000;">'删除[ id: ' </span><span style="color:#808080;">+ </span><span>convert</span><span style="color:#808080;">(</span><span style="color:#0000FF;">varchar</span><span style="color:#808080;">, </span><span style="color:#008080;">@id</span><span style="color:#808080;">) + </span><span style="color:#FF0000;">', name: ' </span><span style="color:#808080;">+ </span><span style="color:#008080;">@name </span><span style="color:#808080;">+ </span><span style="color:#FF0000;">' ] 的信息成功！'</span><span style="color:#808080;">;
</span><span style="color:#0000FF;">go
</span><span style="color:#008000;">--test
</span><span style="color:#0000FF;">select </span><span style="color:#808080;">* </span><span style="color:#0000FF;">from </span><span style="color:#008080;">student </span><span style="color:#0000FF;">order by </span><span style="color:#008080;">id</span><span style="color:#808080;">;
</span><span style="color:#0000FF;">select </span><span style="color:#808080;">* </span><span style="color:#0000FF;">from </span><span style="color:#008080;">classes</span><span style="color:#808080;">;
</span><span style="color:#0000FF;">delete </span><span style="color:#008080;">classes </span><span style="color:#0000FF;">where </span><span style="color:#008080;">id </span><span style="color:#808080;">= </span>7<span style="color:#808080;">;

</span></pre> 
    <h4 style="font-size:14px;font-family:Verdana, Arial, Helvetica, sans-serif;">显示错误信息（raiserror）</h4> 
    <pre class="code"><span style="color:#0000FF;">if </span><span style="color:#808080;">(</span><span>object_id</span><span style="color:#808080;">(</span><span style="color:#FF0000;">'tgr_message'</span><span style="color:#808080;">, </span><span style="color:#FF0000;">'TR'</span><span style="color:#808080;">) is not null)
    </span><span style="color:#0000FF;">drop trigger </span><span style="color:#008080;">tgr_message
</span><span style="color:#0000FF;">go
create trigger </span><span style="color:#008080;">tgr_message
</span><span style="color:#0000FF;">on </span><span style="color:#008080;">student
    </span><span style="color:#0000FF;">after insert</span><span style="color:#808080;">, </span><span>update
</span><span style="color:#0000FF;">as raisError</span><span style="color:#808080;">(</span><span style="color:#FF0000;">'tgr_message触发器被触发'</span><span style="color:#808080;">, </span>16<span style="color:#808080;">, </span>10<span style="color:#808080;">);
</span><span style="color:#0000FF;">go
</span><span style="color:#008000;">--test
</span><span style="color:#0000FF;">insert into </span><span style="color:#008080;">student </span><span style="color:#0000FF;">values</span><span style="color:#808080;">(</span><span style="color:#FF0000;">'lily'</span><span style="color:#808080;">, </span>22<span style="color:#808080;">, </span>1<span style="color:#808080;">, </span>7<span style="color:#808080;">);
</span><span>update </span><span style="color:#008080;">student </span><span style="color:#0000FF;">set </span><span style="color:#008080;">sex </span><span style="color:#808080;">= </span>0 <span style="color:#0000FF;">where </span><span style="color:#008080;">name </span><span style="color:#808080;">= </span><span style="color:#FF0000;">'lucy'</span><span style="color:#808080;">;
</span><span style="color:#0000FF;">select </span><span style="color:#808080;">* </span><span style="color:#0000FF;">from </span><span style="color:#008080;">student </span><span style="color:#0000FF;">order by </span><span style="color:#008080;">id</span><span style="color:#808080;">;

</span></pre> 
    <h4 style="font-size:14px;font-family:Verdana, Arial, Helvetica, sans-serif;">修改触发器</h4> 
    <pre class="code"><span style="color:#0000FF;">alter trigger </span><span style="color:#008080;">tgr_message
</span><span style="color:#0000FF;">on </span><span style="color:#008080;">student
</span><span style="color:#0000FF;">after delete
as raisError</span><span style="color:#808080;">(</span><span style="color:#FF0000;">'tgr_message触发器被触发'</span><span style="color:#808080;">, </span>16<span style="color:#808080;">, </span>10<span style="color:#808080;">);
</span><span style="color:#0000FF;">go
</span><span style="color:#008000;">--test
</span><span style="color:#0000FF;">delete from </span><span style="color:#008080;">student </span><span style="color:#0000FF;">where </span><span style="color:#008080;">name </span><span style="color:#808080;">= </span><span style="color:#FF0000;">'lucy'</span><span style="color:#808080;">;
</span></pre> 
    <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;">&nbsp;</p> 
    <h4 style="font-size:14px;font-family:Verdana, Arial, Helvetica, sans-serif;">启用、禁用触发器</h4> 
    <pre class="code"><span style="color:#008000;">--禁用触发器
</span><span style="color:#0000FF;">disable trigger </span><span style="color:#008080;">tgr_message </span><span style="color:#0000FF;">on </span><span style="color:#008080;">student</span><span style="color:#808080;">;
</span><span style="color:#008000;">--启用触发器
</span><span style="color:#0000FF;">enable trigger </span><span style="color:#008080;">tgr_message </span><span style="color:#0000FF;">on </span><span style="color:#008080;">student</span><span style="color:#808080;">;
</span></pre> 
    <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;">&nbsp;</p> 
    <h4 style="font-size:14px;font-family:Verdana, Arial, Helvetica, sans-serif;">查询创建的触发器信息</h4> 
    <pre class="code"><span style="color:#008000;">--查询已存在的触发器
</span><span style="color:#0000FF;">select </span><span style="color:#808080;">* </span><span style="color:#0000FF;">from </span><span style="color:#00FF00;">sys</span><span style="color:#808080;">.</span><span style="color:#00FF00;">triggers</span><span style="color:#808080;">;
</span><span style="color:#0000FF;">select </span><span style="color:#808080;">* </span><span style="color:#0000FF;">from </span><span style="color:#00FF00;">sys</span><span style="color:#808080;">.</span><span style="color:#00FF00;">objects </span><span style="color:#0000FF;">where type </span><span style="color:#808080;">= </span><span style="color:#FF0000;">'TR'</span><span style="color:#808080;">;

</span><span style="color:#008000;">--查看触发器触发事件
</span><span style="color:#0000FF;">select </span><span style="color:#008080;">te</span><span style="color:#808080;">.* </span><span style="color:#0000FF;">from </span><span style="color:#00FF00;">sys</span><span style="color:#808080;">.</span><span style="color:#00FF00;">trigger_events </span><span style="color:#008080;">te </span><span style="color:#808080;">join </span><span style="color:#00FF00;">sys</span><span style="color:#808080;">.</span><span style="color:#00FF00;">triggers </span><span style="color:#008080;">t
</span><span style="color:#0000FF;">on </span><span style="color:#008080;">t</span><span style="color:#808080;">.</span><span>object_id </span><span style="color:#808080;">= </span><span style="color:#008080;">te</span><span style="color:#808080;">.</span><span>object_id
</span><span style="color:#0000FF;">where </span><span style="color:#008080;">t</span><span style="color:#808080;">.</span><span style="color:#008080;">parent_class </span><span style="color:#808080;">= </span>0 <span style="color:#808080;">and </span><span style="color:#008080;">t</span><span style="color:#808080;">.</span><span style="color:#008080;">name </span><span style="color:#808080;">= </span><span style="color:#FF0000;">'tgr_valid_data'</span><span style="color:#808080;">;

</span><span style="color:#008000;">--查看创建触发器语句
</span><span style="color:#0000FF;">exec </span><span style="color:#800000;">sp_helptext </span><span style="color:#FF0000;">'tgr_message'</span><span style="color:#808080;">;
</span></pre> 
    <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13.3333px;">&nbsp;</p> 
    <h4 style="font-size:14px;font-family:Verdana, Arial, Helvetica, sans-serif;">示例，验证插入数据</h4> 
    <pre class="code"><span style="color:#0000FF;">if </span><span style="color:#808080;">((</span><span>object_id</span><span style="color:#808080;">(</span><span style="color:#FF0000;">'tgr_valid_data'</span><span style="color:#808080;">, </span><span style="color:#FF0000;">'TR'</span><span style="color:#808080;">) is not null))
    </span><span style="color:#0000FF;">drop trigger </span><span style="color:#008080;">tgr_valid_data
</span><span style="color:#0000FF;">go
create trigger </span><span style="color:#008080;">tgr_valid_data
</span><span style="color:#0000FF;">on </span><span style="color:#008080;">student
</span><span style="color:#0000FF;">after insert
as
    declare </span><span style="color:#008080;">@age </span><span style="color:#0000FF;">int</span><span style="color:#808080;">,
            </span><span style="color:#008080;">@name </span><span style="color:#0000FF;">varchar</span><span style="color:#808080;">(</span>20<span style="color:#808080;">);
    </span><span style="color:#0000FF;">select </span><span style="color:#008080;">@name </span><span style="color:#808080;">= </span><span style="color:#008080;">s</span><span style="color:#808080;">.</span><span style="color:#008080;">name</span><span style="color:#808080;">, </span><span style="color:#008080;">@age </span><span style="color:#808080;">= </span><span style="color:#008080;">s</span><span style="color:#808080;">.</span><span style="color:#008080;">age </span><span style="color:#0000FF;">from </span><span style="color:#008080;">inserted s</span><span style="color:#808080;">;
    </span><span style="color:#0000FF;">if </span><span style="color:#808080;">(</span><span style="color:#008080;">@age </span><span style="color:#808080;">&lt; </span>18<span style="color:#808080;">)
    </span><span style="color:#0000FF;">begin
        raisError</span><span style="color:#808080;">(</span><span style="color:#FF0000;">'插入新数据的age有问题'</span><span style="color:#808080;">, </span>16<span style="color:#808080;">, </span>1<span style="color:#808080;">);
        </span><span style="color:#0000FF;">rollback tran</span><span style="color:#808080;">;
    </span><span style="color:#0000FF;">end
go
</span><span style="color:#008000;">--test
</span><span style="color:#0000FF;">insert into </span><span style="color:#008080;">student </span><span style="color:#0000FF;">values</span><span style="color:#808080;">(</span><span style="color:#FF0000;">'forest'</span><span style="color:#808080;">, </span>2<span style="color:#808080;">, </span>0<span style="color:#808080;">, </span>7<span style="color:#808080;">);
</span><span style="color:#0000FF;">insert into </span><span style="color:#008080;">student </span><span style="color:#0000FF;">values</span><span style="color:#808080;">(</span><span style="color:#FF0000;">'forest'</span><span style="color:#808080;">, </span>22<span style="color:#808080;">, </span>0<span style="color:#808080;">, </span>7<span style="color:#808080;">);
</span><span style="color:#0000FF;">select </span><span style="color:#808080;">* </span><span style="color:#0000FF;">from </span><span style="color:#008080;">student </span><span style="color:#0000FF;">order by </span><span style="color:#008080;">id</span><span style="color:#808080;">;

</span></pre> 
    <h4 style="font-size:14px;font-family:Verdana, Arial, Helvetica, sans-serif;">示例，操作日志</h4> 
    <pre class="code"><span style="color:#0000FF;">if </span><span style="color:#808080;">(</span><span>object_id</span><span style="color:#808080;">(</span><span style="color:#FF0000;">'log'</span><span style="color:#808080;">, </span><span style="color:#FF0000;">'U'</span><span style="color:#808080;">) is not null)
    </span><span style="color:#0000FF;">drop table </span><span>log
</span><span style="color:#0000FF;">go
create table </span><span>log</span><span style="color:#808080;">(
    </span><span style="color:#008080;">id </span><span style="color:#0000FF;">int identity</span><span style="color:#808080;">(</span>1<span style="color:#808080;">, </span>1<span style="color:#808080;">) </span><span style="color:#0000FF;">primary key</span><span style="color:#808080;">,
    </span><span style="color:#0000FF;">action varchar</span><span style="color:#808080;">(</span>20<span style="color:#808080;">),
    </span><span style="color:#008080;">createDate </span><span style="color:#0000FF;">datetime default </span><span>getDate</span><span style="color:#808080;">()
)
</span><span style="color:#0000FF;">go
if </span><span style="color:#808080;">(exists (</span><span style="color:#0000FF;">select </span><span style="color:#808080;">* </span><span style="color:#0000FF;">from </span><span style="color:#00FF00;">sys</span><span style="color:#808080;">.</span><span style="color:#00FF00;">objects </span><span style="color:#0000FF;">where </span><span style="color:#008080;">name </span><span style="color:#808080;">= </span><span style="color:#FF0000;">'tgr_student_log'</span><span style="color:#808080;">))
    </span><span style="color:#0000FF;">drop trigger </span><span style="color:#008080;">tgr_student_log
</span><span style="color:#0000FF;">go
create trigger </span><span style="color:#008080;">tgr_student_log
</span><span style="color:#0000FF;">on </span><span style="color:#008080;">student
</span><span style="color:#0000FF;">after insert</span><span style="color:#808080;">, </span><span>update</span><span style="color:#808080;">, </span><span style="color:#0000FF;">delete
as
    if </span><span style="color:#808080;">((exists (</span><span style="color:#0000FF;">select </span>1 <span style="color:#0000FF;">from </span><span style="color:#008080;">inserted</span><span style="color:#808080;">)) and (exists (</span><span style="color:#0000FF;">select </span>1 <span style="color:#0000FF;">from </span><span style="color:#008080;">deleted</span><span style="color:#808080;">)))
    </span><span style="color:#0000FF;">begin
        insert into </span><span>log</span><span style="color:#808080;">(</span><span style="color:#0000FF;">action</span><span style="color:#808080;">) </span><span style="color:#0000FF;">values</span><span style="color:#808080;">(</span><span style="color:#FF0000;">'updated'</span><span style="color:#808080;">);
    </span><span style="color:#0000FF;">end
    else if </span><span style="color:#808080;">(exists (</span><span style="color:#0000FF;">select </span>1 <span style="color:#0000FF;">from </span><span style="color:#008080;">inserted</span><span style="color:#808080;">) and not exists (</span><span style="color:#0000FF;">select </span>1 <span style="color:#0000FF;">from </span><span style="color:#008080;">deleted</span><span style="color:#808080;">))
    </span><span style="color:#0000FF;">begin
        insert into </span><span>log</span><span style="color:#808080;">(</span><span style="color:#0000FF;">action</span><span style="color:#808080;">) </span><span style="color:#0000FF;">values</span><span style="color:#808080;">(</span><span style="color:#FF0000;">'inserted'</span><span style="color:#808080;">);
    </span><span style="color:#0000FF;">end
    else if </span><span style="color:#808080;">(not exists (</span><span style="color:#0000FF;">select </span>1 <span style="color:#0000FF;">from </span><span style="color:#008080;">inserted</span><span style="color:#808080;">) and exists (</span><span style="color:#0000FF;">select </span>1 <span style="color:#0000FF;">from </span><span style="color:#008080;">deleted</span><span style="color:#808080;">))
    </span><span style="color:#0000FF;">begin
        insert into </span><span>log</span><span style="color:#808080;">(</span><span style="color:#0000FF;">action</span><span style="color:#808080;">) </span><span style="color:#0000FF;">values</span><span style="color:#808080;">(</span><span style="color:#FF0000;">'deleted'</span><span style="color:#808080;">);
    </span><span style="color:#0000FF;">end
go
</span><span style="color:#008000;">--test
</span><span style="color:#0000FF;">insert into </span><span style="color:#008080;">student </span><span style="color:#0000FF;">values</span><span style="color:#808080;">(</span><span style="color:#FF0000;">'king'</span><span style="color:#808080;">, </span>22<span style="color:#808080;">, </span>1<span style="color:#808080;">, </span>7<span style="color:#808080;">);
</span><span>update </span><span style="color:#008080;">student </span><span style="color:#0000FF;">set </span><span style="color:#008080;">sex </span><span style="color:#808080;">= </span>0 <span style="color:#0000FF;">where </span><span style="color:#008080;">name </span><span style="color:#808080;">= </span><span style="color:#FF0000;">'king'</span><span style="color:#808080;">;
</span><span style="color:#0000FF;">delete </span><span style="color:#008080;">student </span><span style="color:#0000FF;">where </span><span style="color:#008080;">name </span><span style="color:#808080;">= </span><span style="color:#FF0000;">'king'</span><span style="color:#808080;">;
</span><span style="color:#0000FF;">select </span><span style="color:#808080;">* </span><span style="color:#0000FF;">from </span><span>log</span><span style="color:#808080;">;
</span><span style="color:#0000FF;">select </span><span style="color:#808080;">* </span><span style="color:#0000FF;">from </span><span style="color:#008080;">student </span><span style="color:#0000FF;">order by </span><span style="color:#008080;">id</span><span style="color:#808080;">;


本文转自齐师傅博客园博客，原文链接：http://www.cnblogs.com/youring2/p/4929149.html，如需转载请自行联系原作者</span></pre> 
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
