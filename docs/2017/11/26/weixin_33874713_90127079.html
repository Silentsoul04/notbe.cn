<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>IsPostBack深入探讨 « NotBeCN</title>
  <meta name="description" content="                                   1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IsPostBack介绍      IsPostBack是Page类有一个bool类型的属性，用来判断针对当前Form的请求是第一次还...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/26/weixin_33874713_90127079.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">IsPostBack深入探讨</h1>
    <p class="post-meta">Nov 26, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <div>
    <br>
   </div> 
   <div> 
    <div class="blogpost-body"> 
     <p style="text-indent:-21.25pt;"><strong><span style="font-size:14pt;">1<span style="font-weight:normal;font-size:7pt;line-height:normal;font-family:'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></strong><strong><span style="font-size:14pt;">IsPostBack</span></strong><strong><span style="font-family:'宋体';font-size:14pt;">介绍</span></strong></p> 
     <p>IsPostBack<span style="font-family:'宋体';">是</span>Page<span style="font-family:'宋体';">类有一个</span>bool<span style="font-family:'宋体';">类型的属性，用来判断针对当前</span>Form<span style="font-family:'宋体';">的请求是第一次还是非第一次请求。当</span>IsPostBack<span style="font-family:'宋体';">＝</span>true<span style="font-family:'宋体';">时表示非第一次请求，我们称为</span>PostBack<span style="font-family:'宋体';">，当</span>IsPostBack<span style="font-family:'宋体';">＝</span>false<span style="font-family:'宋体';">时表示第一次请求。在</span>asp.net<span style="font-family:'宋体';">框架内部有很多的场景需要判断</span>IsPostBack<span style="font-family:'宋体';">，比如</span>LoadAllState<span style="font-family:'宋体';">等操作就需要在</span>PostBack<span style="font-family:'宋体';">的时候进行。对于我们自己使用</span>WebForm<span style="font-family:'宋体';">进行开发时，经常会在</span>Page_Load<span style="font-family:'宋体';">中对</span>IsPostBack<span style="font-family:'宋体';">进行判断，因为第一次请求的时候会执行</span>Page_Load<span style="font-family:'宋体';">，在非第一次请求的时候也会执行</span>Page_Load<span style="font-family:'宋体';">。为什么对同一个</span>Form<span style="font-family:'宋体';">有多次请求呢？</span>asp.net<span style="font-family:'宋体';">中引入了服务器端事件，支持服务器端事件的控件，会发出对当前</span>Form<span style="font-family:'宋体';">的请求，这样在很多情形下我们就需要区别是否是对这个</span>Form<span style="font-family:'宋体';">的第一次请求。</span></p> 
     <p style="text-indent:-21.25pt;"><strong><span style="font-size:14pt;">2<span style="font-weight:normal;font-size:7pt;line-height:normal;font-family:'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></strong><strong><span style="font-size:14pt;">IsPostBack</span></strong><strong><span style="font-family:'宋体';font-size:14pt;">结论</span></strong></p> 
     <p><span style="font-family:'宋体';">本人对</span>.Net<span style="font-family:'宋体';">的源代码中相关的处理进行的分析得到如下的结论：</span></p> 
     <p style="text-indent:-21pt;">结论①<span style="font-size:7pt;line-height:normal;font-family:'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family:'宋体';">对于使用</span>Server.Transfer<span style="font-family:'宋体';">进行迁移时迁移到的页面其</span>IsPostBack<span style="font-family:'宋体';">＝</span>false<span style="font-family:'宋体';">。</span></p> 
     <p style="text-indent:-21pt;">结论②<span style="font-size:7pt;line-height:normal;font-family:'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;</span>Post<span style="font-family:'宋体';">方式如果</span>Request<span style="font-family:'宋体';">中没有请求值，即</span>Request.Form =null<span style="font-family:'宋体';">则</span>IsPostBack<span style="font-family:'宋体';">＝</span>false<span style="font-family:'宋体';">；</span>Get<span style="font-family:'宋体';">方式如果</span>Request<span style="font-family:'宋体';">中没有请求值，即</span>Request.QueryString =null<span style="font-family:'宋体';">则</span>IsPostBack<span style="font-family:'宋体';">＝</span>false<span style="font-family:'宋体';">。</span></p> 
     <p style="text-indent:-21pt;">结论③<span style="font-size:7pt;line-height:normal;font-family:'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family:'宋体';">如果QueryString或Form虽然有请求值，但是QueryString或Form中的Key没有“__VIEWSTATE”和“__EVENTTARGET”和“__VIEWSTATEFIELDCOUNT”，并且没有键为“null”，值以“__VIEWSTATE”开头并且也没有值为“__EVENTTARGET”的键值对，则IsPostBack＝false。</span></p> 
     <p style="text-indent:-21pt;">结论④<span style="font-size:7pt;line-height:normal;font-family:'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family:'宋体';">使用</span>Response.Redirect<span style="font-family:'宋体';">方式向自画面迁移时，此时</span><span style="font-family:'新宋体';">IsPostBack</span><span style="font-family:'新宋体';">＝false。</span></p> 
     <p style="text-indent:-21pt;">结论⑤<span style="font-size:7pt;line-height:normal;font-family:'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family:'宋体';">发生跨页提交（</span>CrossPagePostBack<span style="font-family:'宋体';">），当访问</span>PreviousPage<span style="font-family:'宋体';">属性的时候，对于源</span>Page<span style="font-family:'宋体';">，</span>IsPostBack=true<span style="font-family:'宋体';">。</span></p> 
     <p style="text-indent:-21pt;">结论⑥<span style="font-size:7pt;line-height:normal;font-family:'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family:'宋体';">发生跨页提交（</span>CrossPagePostBack<span style="font-family:'宋体';">）时目标页面是</span>IsPostBack<span style="font-family:'宋体';">＝</span>false</p> 
     <p style="text-indent:-21pt;">结论⑦<span style="font-size:7pt;line-height:normal;font-family:'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family:'宋体';">使用</span>Server.Execute<span style="font-family:'宋体';">迁移到的页面其</span>IsPostBack<span style="font-family:'宋体';">＝</span>false<span style="font-family:'宋体';">。</span></p> 
     <p style="text-indent:-21pt;">结论⑧<span style="font-size:7pt;line-height:normal;font-family:'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family:'宋体';">在</span>Page<span style="font-family:'宋体';">运行期间其对应的</span>DLL<span style="font-family:'宋体';">被更新了并且</span>Page<span style="font-family:'宋体';">的树结构发生过变化，这种情况下请求时</span>IsPostBack<span style="font-family:'宋体';">＝</span>false<span style="font-family:'宋体';">。</span></p> 
     <p><span style="font-family:'宋体';">可以这样来理解这些结论：一般情况判断</span>Request<span style="font-family:'宋体';">中如果没有请求值则</span>IsPostBack<span style="font-family:'宋体';">＝</span>false<span style="font-family:'宋体';">。如果有请求值但是不包括</span><span style="font-family:'新宋体';">“__VIEWSTATE”等一些特殊的键或值，则</span>IsPostBack<span style="font-family:'宋体';">＝</span>false<span style="font-family:'宋体';">（每次请求后</span>.Net<span style="font-family:'宋体';">框架会将一些特殊的隐藏域“</span><span style="font-family:'新宋体';">__VIEWSTATE</span><span style="font-family:'宋体';">”等返回给客户端）。还有一些特殊的情形是上面的规则不能正确判断的需要特殊处理的，这些情形包括</span>Server.Transfer<span style="font-family:'宋体';">，</span>Response.Redirect<span style="font-family:'宋体';">，</span>CrossPagePostBack<span style="font-family:'宋体';">，</span>Server.Execute<span style="font-family:'宋体';">，发生了页面元素变化及重新编译。</span></p> 
     <p><span style="font-family:'宋体';">一般来说记住上面的结论就可以，如果您有兴趣，或者怀疑请继续看下面的</span>IsPostBack<span style="font-family:'宋体';">推论过程。</span></p> 
     <p style="text-indent:-21.25pt;"><strong><span style="font-size:14pt;">3<span style="font-weight:normal;font-size:7pt;line-height:normal;font-family:'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></strong><strong><span style="font-size:14pt;">IsPostBack</span></strong><strong><span style="font-family:'宋体';font-size:14pt;">推论过程</span></strong></p> 
     <p><span style="font-family:'宋体';">下面是根据</span>.Net<span style="font-family:'宋体';">框架中的源代码，来分析</span>IsPostBack<span style="font-family:'宋体';">是如何判断出来的。对于这些结论的推断本人做了相关的试验来证明推论的正确性，由于篇幅的原因没有将这些试验代码体现出来。另外不可能将全部的</span>.Net<span style="font-family:'宋体';">框架的代码都体现出来，只是将相关的代码片段列出，说明推断的依据。另外由于本人水平有限对</span>.Net<span style="font-family:'宋体';">框架的代码理解还存在的不足的地方，请发现后进行指正，谢谢。</span></p> 
     <p><span style="color:rgb(16,0,160);">public</span><span style="font-family:'新宋体';color:#0000FF;">bool</span>&nbsp;IsPostBack</p> 
     <p>{</p> 
     <p>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(16,0,160);">get</span></p> 
     <p>&nbsp;&nbsp;&nbsp; {</p> 
     <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(16,0,160);">if (this._requestValueCollection&nbsp;==&nbsp;<span style="color:#800000;">null</span>)</span></p> 
     <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p> 
     <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(16,0,160);">return&nbsp;<span style="color:#800000;">false</span>;</span></p> 
     <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p> 
     <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(16,0,160);">if (this.<span style="color:rgb(0,96,24);">_</span>isCrossPagePostBack)</span></p> 
     <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p> 
     <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(16,0,160);">return&nbsp;<span style="color:#800000;">true</span>;</span></p> 
     <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p> 
     <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(16,0,160);">if (this</span><span style="font-family:'新宋体';">_pageFlags</span>[<span style="color:#800000;">8])</span></p> 
     <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p> 
     <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(16,0,160);">return&nbsp;<span style="color:#800000;">false</span>;</span></p> 
     <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p> 
     <p style="text-indent:-13.5pt;">&nbsp;&nbsp;&nbsp;<span style="color:rgb(16,0,160);">return (</span></p> 
     <p style="text-indent:40.5pt;">(</p> 
     <p style="text-indent:49.5pt;">(<span style="color:rgb(16,0,160);">this.Context.ServerExecuteDepth&nbsp;&lt;=&nbsp;<span style="color:#800000;">0</span>) ||</span></p> 
     <p style="text-indent:49.5pt;">((<span style="color:rgb(16,0,160);">this.Context.Handler&nbsp;!=&nbsp;<span style="color:#800000;">null</span>) &amp;&amp;</span></p> 
     <p style="text-indent:49.5pt;">(<span style="color:rgb(16,0,160);">base.GetType() ==&nbsp;this.Context.Handler.GetType()))</span></p> 
     <p>) &amp;&amp; !<span style="color:rgb(16,0,160);">this.<span style="color:rgb(0,96,24);">_</span>fPageLayoutChanged</span></p> 
     <p style="text-indent:67.5pt;">);</p> 
     <p>&nbsp;&nbsp;&nbsp; }</p> 
     <p>}</p> 
     <p><span style="font-family:'宋体';">我们将每一个</span>if<span style="font-family:'宋体';">判断作为一个小节，作如下的分析。</span></p> 
     <p style="text-indent:-27pt;"><strong>3.1<span style="font-weight:normal;font-size:7pt;line-height:normal;font-family:'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></strong><strong>&nbsp;this._requestValueCollection == null</strong></p> 
     <p><span style="color:rgb(16,0,160);">if</span>&nbsp;(<span style="color:rgb(16,0,160);">this._requestValueCollection ==&nbsp;<span style="color:#800000;">null</span>)</span></p> 
     <p>{</p> 
     <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(16,0,160);">return&nbsp;<span style="color:#800000;">false</span>;</span></p> 
     <p>}</p> 
     <p><span style="font-family:'宋体';">可以看出</span>_requestValueCollection<span style="font-family:'宋体';">等于</span>null<span style="font-family:'宋体';">时</span>IsPostBack<span style="font-family:'宋体';">就等于</span>false<span style="font-family:'宋体';">。</span></p> 
     <p><span style="font-family:'宋体';">在</span>Page.<span>ProcessRequestMain(<span>bool</span>,&nbsp;<span>bool</span>)</span><span style="font-family:'宋体';">中有如下的代码：</span></p> 
     <p align="left"><span style="font-family:'新宋体';color:#0000FF;font-size:9pt;">if</span><span style="font-family:'新宋体';font-size:9pt;">&nbsp;(<span style="color:#0000FF;">this</span>.PageAdapter !=&nbsp;<span style="color:#0000FF;">null</span>)</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">{</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">this</span>._requestValueCollection =&nbsp;<span style="color:#0000FF;">this</span>.PageAdapter.DeterminePostBackMode();</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">}</span></p> 
     <p align="left"><span style="font-family:'新宋体';color:#0000FF;font-size:9pt;">else</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">{</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">this</span>._requestValueCollection =&nbsp;<span style="color:#0000FF;">this</span>.DeterminePostBackMode();</span></p> 
     <p><span style="font-family:'新宋体';font-size:9pt;">}</span></p> 
     <p><span>PageAdapter.<span>DeterminePostBackMode</span></span><span style="font-family:'宋体';">最终还是调用了</span>Page.<span>DeterminePostBackMode</span><span style="font-family:'宋体';">，下面我们看</span>Page.<span>DeterminePostBackMode</span><span style="font-family:'宋体';">如何实现。</span></p> 
     <p align="left"><span style="font-family:'新宋体';color:#0000FF;font-size:9pt;">protected</span><span style="font-family:'新宋体';font-size:9pt;">&nbsp;<span style="color:#0000FF;">internal</span>&nbsp;<span style="color:#0000FF;">virtual</span>&nbsp;<span style="color:#008080;">NameValueCollection</span>&nbsp;DeterminePostBackMode()</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">{</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">if</span>&nbsp;(<span style="color:#0000FF;">this</span>.Context.Request ==&nbsp;<span style="color:#0000FF;">null</span>)</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp; {</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">return</span>&nbsp;<span style="color:#0000FF;">null</span>;</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp; }</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">if</span>&nbsp;(<span style="color:#0000FF;">this</span>.Context.PreventPostback)</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp; {</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">return</span>&nbsp;<span style="color:#0000FF;">null</span>;</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp; }</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008080;">NameValueCollection</span>&nbsp;collectionBasedOnMethod =&nbsp;<span style="color:#0000FF;">this</span>.GetCollectionBasedOnMethod(<span style="color:#0000FF;">false</span>);</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">if</span>&nbsp;(collectionBasedOnMethod ==&nbsp;<span style="color:#0000FF;">null</span>)</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp; {</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">return</span>&nbsp;<span style="color:#0000FF;">null</span>;</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp; }</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">bool</span>&nbsp;flag =&nbsp;<span style="color:#0000FF;">false</span>;</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">string</span>[] values = collectionBasedOnMethod.GetValues((<span style="color:#0000FF;">string</span>)&nbsp;<span style="color:#0000FF;">null</span>);</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">if</span>&nbsp;(values !=&nbsp;<span style="color:#0000FF;">null</span>)</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp; {</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">int</span>&nbsp;length = values.Length;</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">for</span>&nbsp;(<span style="color:#0000FF;">int</span>&nbsp;i = 0; i &lt; length; i++)</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">if</span>&nbsp;(values[i].StartsWith(<span style="color:#800000;">"__VIEWSTATE"</span>,&nbsp;<span style="color:#008080;">StringComparison</span>.Ordinal) ||</span></p> 
     <p align="left" style="text-indent:21pt;"><span style="font-family:'新宋体';font-size:9pt;">(values[i] ==&nbsp;<span style="color:#800000;">"__EVENTTARGET"</span>))</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; flag =&nbsp;<span style="color:#0000FF;">true</span>;</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">break</span>;</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp; }</span></p> 
     <p align="left"><span style="font-family:'新宋体';color:#0000FF;font-size:9pt;">if</span><span style="font-family:'新宋体';font-size:9pt;">&nbsp;(((collectionBasedOnMethod[<span style="color:#800000;">"__VIEWSTATE"</span>] ==&nbsp;<span style="color:#0000FF;">null</span>) &amp;&amp; (collectionBasedOnMethod[<span style="color:#800000;">"__VIEWSTATEFIELDCOUNT"</span>] ==&nbsp;<span style="color:#0000FF;">null</span>)) &amp;&amp; ((collectionBasedOnMethod[<span style="color:#800000;">"__EVENTTARGET"</span>] ==&nbsp;<span style="color:#0000FF;">null</span>) &amp;&amp; !flag))</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp; {</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">return</span>&nbsp;<span style="color:#0000FF;">null</span>;</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp; }</span></p> 
     <p align="left" style="text-indent:18pt;"><span style="font-family:'新宋体';color:#0000FF;font-size:9pt;">if</span><span style="font-family:'新宋体';font-size:9pt;">&nbsp;(<span style="color:#0000FF;">this</span>.Request.QueryStringText.IndexOf(</span></p> 
     <p align="left" style="text-indent:21pt;"><span style="font-family:'新宋体';color:#008080;font-size:9pt;">HttpResponse</span><span style="font-family:'新宋体';font-size:9pt;">.RedirectQueryStringAssignment,&nbsp;<span style="color:#008080;">StringComparison</span>.Ordinal) != -1)</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp; {</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; collectionBasedOnMethod =&nbsp;<span style="color:#0000FF;">null</span>;</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp; }</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">return</span>&nbsp;collectionBasedOnMethod;</span></p> 
     <p><span style="font-family:'新宋体';font-size:9pt;">}</span></p> 
     <p><span style="font-family:'宋体';">这个函数中返回</span>null<span style="font-family:'宋体';">就意味者</span>IsPostBack<span style="font-family:'宋体';">＝</span>false<span style="font-family:'宋体';">，将上面函数中每个返回为</span>null<span style="font-family:'宋体';">的地方作如下的分析。</span></p> 
     <p style="text-indent:-36pt;"><strong>3.1.1<span style="font-weight:normal;font-size:7pt;line-height:normal;font-family:'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></strong><strong>this.<span>Context.<span>Request</span>&nbsp;== null</span></strong></p> 
     <pre>&nbsp;&nbsp;&nbsp; <span style="color:rgb(16,0,160);">if (this.</span><span style="font-family:'新宋体';">Context.Request</span> == <span style="color:#800000;">null)</span></pre> 
     <pre>&nbsp;&nbsp;&nbsp; {</pre> 
     <pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color:rgb(16,0,160);">return <span style="color:#800000;">null</span>;</span></pre> 
     <pre>&nbsp;&nbsp;&nbsp; }</pre> 
     <p>this.<span>Context.<span>Request</span>&nbsp;== null</span><span style="font-family:'宋体';">应该只有在异常的情况下会发生，正常情况下会在</span>HttpRuntime.ProcessRequestInternal<span style="font-family:'宋体';">中创建</span>HttpContext<span style="font-family:'宋体';">及</span>HttpRequest<span style="font-family:'宋体';">对象。</span></p> 
     <p style="text-indent:-36pt;"><strong>3.1.2<span style="font-weight:normal;font-size:7pt;line-height:normal;font-family:'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></strong><strong>this.<span>Context.<span>PreventPostback</span></span></strong></p> 
     <pre>&nbsp;&nbsp;&nbsp; <span style="color:rgb(16,0,160);">if (this.</span><span style="font-family:'新宋体';">Context</span>.PreventPostback)</pre> 
     <pre>&nbsp;&nbsp;&nbsp; {</pre> 
     <pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color:rgb(16,0,160);">return <span style="color:#800000;">null</span>;</span></pre> 
     <pre>&nbsp;&nbsp;&nbsp; }</pre> 
     <p><span style="font-size:12pt;">在</span><span style="font-family:'Times New Roman';font-size:12pt;">HttpServerUtility.Transfer</span><span style="font-size:12pt;">中会使用</span><span style="font-family:'Times New Roman';font-size:12pt;">PreventPostback</span><span style="font-size:12pt;">，其代码如下：</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">public</span>&nbsp;<span style="color:#0000FF;">void</span>&nbsp;Transfer(<span style="color:#0000FF;">string</span>&nbsp;path)</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">bool</span>&nbsp;preventPostback =&nbsp;<span style="color:#0000FF;">this</span>._context.PreventPostback;</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">this</span>._context.PreventPostback =&nbsp;<span style="color:#0000FF;">true</span>;</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">this</span>.Transfer(path,&nbsp;<span style="color:#0000FF;">true</span>);</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">this</span>._context.PreventPostback = preventPostback;</span></p> 
     <p><span style="font-family:'新宋体';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p> 
     <p><span style="font-family:'宋体';">在调用</span>Server.Transfer<span style="font-family:'宋体';">进行画面迁移时设置</span><span>Context.<span>PreventPostback</span></span><span style="font-family:'宋体';">＝</span>ture<span style="font-family:'宋体';">。此处得出结论①：对于使用</span>Server.Transfer<span style="font-family:'宋体';">进行迁移时迁移到的页面其</span>IsPostBack<span style="font-family:'宋体';">＝</span>false<span style="font-family:'宋体';">。</span></p> 
     <p style="text-indent:-36pt;"><strong>3.1.3<span style="font-weight:normal;font-size:7pt;line-height:normal;font-family:'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></strong><strong>collectionBasedOnMethod == null</strong></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008080;">NameValueCollection</span>&nbsp;collectionBasedOnMethod =&nbsp;<span style="color:#0000FF;">this</span>.GetCollectionBasedOnMethod(<span style="color:#0000FF;">false</span>);</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">if</span>&nbsp;(collectionBasedOnMethod ==&nbsp;<span style="color:#0000FF;">null</span>)</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp; {</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">return</span>&nbsp;<span style="color:#0000FF;">null</span>;</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp; &nbsp;}</span></p> 
     <p><span style="font-size:12pt;">调用了</span><span style="font-family:'Times New Roman';font-size:12pt;">Page.GetCollectionBasedOnMethod</span><span style="font-size:12pt;">后其返回值进行判断。如果其返回值为</span><span style="font-family:'Times New Roman';font-size:12pt;">null</span><span style="font-size:12pt;">则</span><span style="font-family:'Times New Roman';font-size:12pt;">IsPostBack</span><span style="font-size:12pt;">为</span><span style="font-family:'Times New Roman';font-size:12pt;">false</span><span style="font-size:12pt;">。</span><span style="font-family:'Times New Roman';font-size:12pt;">Page.GetCollectionBasedOnMethod</span><span style="font-size:12pt;">的定义如下：</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">internal</span>&nbsp;<span style="color:#008080;">NameValueCollection</span>&nbsp;GetCollectionBasedOnMethod(<span style="color:#0000FF;">bool</span>&nbsp;dontReturnNull)</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">if</span>&nbsp;(<span style="color:#0000FF;">this</span>._request.HttpVerb ==&nbsp;<span style="color:#008080;">HttpVerb</span>.POST)</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">if</span>&nbsp;(!dontReturnNull &amp;&amp; !<span style="color:#0000FF;">this</span>._request.HasForm)</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">return</span>&nbsp;<span style="color:#0000FF;">null</span>;</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">return</span>&nbsp;<span style="color:#0000FF;">this</span>._request.Form;</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">if</span>&nbsp;(!dontReturnNull &amp;&amp; !<span style="color:#0000FF;">this</span>._request.HasQueryString)</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">return</span>&nbsp;<span style="color:#0000FF;">null</span>;</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">return</span>&nbsp;<span style="color:#0000FF;">this</span>._request.QueryString;</span></p> 
     <p><span style="font-family:'新宋体';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p> 
     <p><span style="font-family:'宋体';">从上面的代码可以看出返回值为</span>null<span style="font-family:'宋体';">的情形是</span>_request.HasForm<span style="font-family:'宋体';">＝</span>null<span style="font-family:'宋体';">或</span>_request.HasQueryString<span style="font-family:'宋体';">＝</span>null<span style="font-family:'宋体';">。此处得出结论②：</span>Post<span style="font-family:'宋体';">方式如果</span>Request<span style="font-family:'宋体';">中没有请求值，即</span>Request.Form =null<span style="font-family:'宋体';">则</span>IsPostBack<span style="font-family:'宋体';">＝</span>false<span style="font-family:'宋体';">；</span>Get<span style="font-family:'宋体';">方式如果</span>Request<span style="font-family:'宋体';">中没有请求值，即</span>Request.QueryString =null<span style="font-family:'宋体';">则</span>IsPostBack<span style="font-family:'宋体';">＝</span>false<span style="font-family:'宋体';">。</span></p> 
     <p style="text-indent:-36pt;"><strong>3.1.4<span style="font-weight:normal;font-size:7pt;line-height:normal;font-family:'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></strong><strong>((collectionBasedOnMethod["__VIEWSTATE"] == null) &amp;&amp; (collectionBasedOnMethod["__VIEWSTATEFIELDCOUNT"] == null)) &amp;&amp; ((collectionBasedOnMethod["__EVENTTARGET"] == null) &amp;&amp; !flag)</strong></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">bool</span>&nbsp;flag =&nbsp;<span style="color:#0000FF;">false</span>;</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">string</span>[] values = collectionBasedOnMethod.GetValues((<span style="color:#0000FF;">string</span>)&nbsp;<span style="color:#0000FF;">null</span>);</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">if</span>&nbsp;(values !=&nbsp;<span style="color:#0000FF;">null</span>)</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp; {</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">int</span>&nbsp;length = values.Length;</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">for</span>&nbsp;(<span style="color:#0000FF;">int</span>&nbsp;i = 0; i &lt; length; i++)</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">if</span>&nbsp;(values[i].StartsWith(<span style="color:#800000;">"__VIEWSTATE"</span>,&nbsp;<span style="color:#008080;">StringComparison</span>.Ordinal) ||</span></p> 
     <p align="left" style="text-indent:21pt;"><span style="font-family:'新宋体';font-size:9pt;">(values[i] ==&nbsp;<span style="color:#800000;">"__EVENTTARGET"</span>))</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; flag =&nbsp;<span style="color:#0000FF;">true</span>;</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">break</span>;</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp; }</span></p> 
     <p><span style="font-family:'宋体';font-size:12pt;">上面这段代码的意思是判断请求的键值对中是否存在没有键，其值以“__VIEWSTATE”开头或者其值为“__EVENTTARGET”。例如如下的Get请求方式会使得flag＝true。</span></p> 
     <p>…<span style="font-family:'新宋体';">/defalt.aspx?__VIEWSTATE</span></p> 
     <p>…<span style="font-family:'新宋体';">/defalt.aspx?__EVENTTARGET</span></p> 
     <p><span style="font-family:'新宋体';font-size:12pt;">对于Get方式“?__VIEWSTATE＝”会将__VIEWSTATE作为请求的键，其值为“”，但是“?__VIEWSTATE”会认为其键为“null”，其值为“__VIEWSTATE”</span></p> 
     <p><span style="font-family:'新宋体';color:#0000FF;">if</span><span style="font-family:'新宋体';">&nbsp;(</span></p> 
     <p><span style="font-family:'新宋体';">((collectionBasedOnMethod["__VIEWSTATE"] ==&nbsp;<span style="color:#0000FF;">null</span>) &amp;&amp; (collectionBasedOnMethod["__VIEWSTATEFIELDCOUNT"] ==&nbsp;<span style="color:#0000FF;">null</span>)) &amp;&amp; ((collectionBasedOnMethod["__EVENTTARGET"] ==&nbsp;<span style="color:#0000FF;">null</span>) &amp;&amp; !flag))</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">{</span></p> 
     <p align="left" style="text-indent:21pt;"><span style="font-family:'新宋体';color:#0000FF;font-size:9pt;">return</span><span style="font-family:'新宋体';font-size:9pt;">&nbsp;<span style="color:#0000FF;">null</span>;</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">}</span></p> 
     <p><span style="font-family:'新宋体';"><span style="font-family:'宋体';">如上的条件意味着请求的键中同时没有“__VIEWSTATE”，“__EVENTTARGET”，“__VIEWSTATEFIELDCOUNT”，并且flag为false则返回null。flag为false意味着没有键为“null”值以“__VIEWSTATE”开头并且也没有值为“__EVENTTARGET”的键值对。</span></span></p> 
     <p><span style="font-family:'新宋体';"><span style="font-family:'宋体';"><span style="font-size:12pt;">此处得出结论③如果QueryString或Form虽然有请求值，但是QueryString或Form中的Key没有“__VIEWSTATE”和“__EVENTTARGET”和“__VIEWSTATEFIELDCOUNT”，并且没有键为“null”值以“__VIEWSTATE”开头并且也没有值为“__EVENTTARGET”的键值对，则IsPostBack＝false。</span></span></span></p> 
     <p style="text-indent:-36pt;"><strong>3.1.5<span style="font-weight:normal;font-size:7pt;line-height:normal;font-family:'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></strong><strong>this.Request.QueryStringText.IndexOf(HttpResponse.RedirectQueryStringAssignment, StringComparison.Ordinal) != -1</strong></p> 
     <p align="left"><span style="font-family:'新宋体';color:#0000FF;font-size:9pt;">if</span><span style="font-family:'新宋体';font-size:9pt;">&nbsp;(<span style="color:#0000FF;">this</span>.Request.QueryStringText.IndexOf(<span style="color:#008080;">HttpResponse</span>.RedirectQueryStringAssignment,<span style="color:#008080;">StringComparison</span>.Ordinal) != -1)</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">{</span></p> 
     <p align="left" style="text-indent:21pt;"><span style="font-family:'新宋体';font-size:9pt;">collectionBasedOnMethod =&nbsp;<span style="color:#0000FF;">null</span>;</span></p> 
     <p><span style="font-family:'新宋体';font-size:9pt;">}</span></p> 
     <p style="font-family:'宋体';font-size:12pt;"><span style="font-family:'新宋体';">HttpResponse.RedirectQueryStringAssignment</span><span style="font-family:'新宋体';">的值为“__redir＝1”，上面的代码的意思是如果QueryStringText中包括包括“__redir＝1”则返回null。在HttpRequest.Redirect中会判断如果IsPostBack为true，并且URL中不包含有“__redir＝1”时，会给URL中增加“__redir＝1”。一般情况下我们使用request.Redirect迁移到的页面都应该是IsPostBack＝false，有一种特殊的情形是使用request.Redirect迁移到当前页，此时IsPostBack为true。此种情况发生时在request.Redirect中给URL中增加“__redir＝1”。执行到page. ProcessRequestMain时会重新将IsPostBack判断为fales。</span></p> 
     <p><span style="font-family:'宋体';"><span style="font-size:12pt;"><span style="font-family:'新宋体';">此处得出结论④</span>使用Response.Redirect方式向自画面迁移时，此时<span style="font-family:'新宋体';">IsPostBack</span><span style="font-family:'新宋体';">＝false。</span></span></span></p> 
     <p><span style="font-family:'宋体';"><span style="font-size:12pt;"><span style="font-family:'新宋体';">此时大家可能会有疑问为什么</span>使用Response.Redirect方式向自画面迁移时要特殊处理，使用Response.Redirect向其他画面迁移为什么不要。使用<span style="font-family:'新宋体';">Response.Redirect</span><span style="font-family:'新宋体';">向其他画面迁移时Response.Form=null，Response.QueryString=null，所以可以判断是IsPostBack＝false。但是使用Response.Redirect方式向自画面迁移时Response.QueryString&lt;&gt;null,所以要特殊判断。</span></span></span></p> 
     <p style="text-indent:-27pt;"><strong>3.2<span style="font-weight:normal;font-size:7pt;line-height:normal;font-family:'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></strong><strong>this._isCrossPagePostBack</strong></p> 
     <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(16,0,160);">if (this.<span style="color:rgb(0,96,24);">_isCrossPagePostBack</span>)</span></p> 
     <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p> 
     <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(16,0,160);">return&nbsp;<span style="color:#800000;">true</span>;</span></p> 
     <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p> 
     <p style="font-family:'宋体';font-size:12pt;"><span style="font-family:'新宋体';">在Page的PreviousPage属性中会对_isCrossPagePostBack进行设置，具体代码如下：</span></p> 
     <p align="left"><span style="font-family:'新宋体';color:#0000FF;font-size:9pt;">public</span><span style="font-family:'新宋体';font-size:9pt;">&nbsp;<span style="color:#008080;">Page</span>&nbsp;PreviousPage</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">{</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">get</span></span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp; {</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-size:9pt;">…</span></p> 
     <p align="left"><span style="font-family:'新宋体';color:#008080;font-size:9pt;">ITypedWebObjectFactory</span><span style="font-family:'新宋体';font-size:9pt;">&nbsp;vPathBuildResult = (<span style="color:#008080;">ITypedWebObjectFactory</span>)<span style="color:#008080;">BuildManager</span>.GetVPathBuildResult(<span style="color:#0000FF;">this</span>.Context,&nbsp;<span style="color:#0000FF;">this</span>._previousPagePath);</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">if</span>&nbsp;(<span style="color:#0000FF;">typeof</span>(<span style="color:#008080;">Page</span>).IsAssignableFrom(vPathBuildResult.InstantiatedType))</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">this</span>._previousPage = (<span style="color:#008080;">Page</span>) vPathBuildResult.CreateInstance();</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">this</span>._previousPage._isCrossPagePostBack =&nbsp;<span style="color:#0000FF;">true</span>;</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">this</span>.Server.Execute(<span style="color:#0000FF;">this</span>._previousPage,&nbsp;<span style="color:#008080;">TextWriter</span>.Null,&nbsp;<span style="color:#0000FF;">true</span>,&nbsp;<span style="color:#0000FF;">false</span>);</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">return</span>&nbsp;<span style="color:#0000FF;">this</span>._previousPage;</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp; }</span></p> 
     <p><span style="font-family:'新宋体';font-size:9pt;">}</span></p> 
     <p><span style="font-family:'新宋体';"><span style="font-family:'宋体';font-size:12pt;">在发生跨页面提交的时候，当访问PreviousPage属性的时候源Page的IsCrossPagePostBack会被设置true。此处得出结论⑤发生跨页提交（CrossPagePostBack），当访问PreviousPage属性的时候，对于源Page，IsPostBack=true。</span></span></p> 
     <p style="text-indent:-27pt;"><strong>3.3<span style="font-weight:normal;font-size:7pt;line-height:normal;font-family:'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></strong><strong>this.<span>_pageFlags[8]</span></strong></p> 
     <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(16,0,160);">if (this.</span><span style="font-family:'新宋体';">_pageFlags</span>[<span style="color:#800000;">8])</span></p> 
     <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p> 
     <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(16,0,160);">return&nbsp;<span style="color:#800000;">false</span>;</span></p> 
     <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p> 
     <p><span style="font-family:'新宋体';">在Page. ProcessRequestMain中有如下的代码片断对_pageFlags[8]进行赋值。</span></p> 
     <p align="left"><span style="font-family:'新宋体';color:#0000FF;font-size:9pt;">else</span><span style="font-family:'新宋体';font-size:9pt;">&nbsp;<span style="color:#0000FF;">if</span>&nbsp;(!<span style="color:#0000FF;">this</span>.IsCrossPagePostBack)</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">{</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008080;">VirtualPath</span>&nbsp;path =&nbsp;<span style="color:#0000FF;">null</span>;</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">if</span>&nbsp;(<span style="color:#0000FF;">this._requestValueCollection</span>[<span style="color:#800000;">"__PREVIOUSPAGE"</span>] !=&nbsp;<span style="color:#0000FF;">null</span>)</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp; {</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">try</span></span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; path =&nbsp;<span style="color:#008080;">VirtualPath</span>.CreateNonRelativeAllowNull(</span></p> 
     <p align="left" style="text-indent:21pt;"><span style="font-family:'新宋体';font-size:9pt;">DecryptString(<span style="color:#0000FF;">this._requestValueCollection</span>[<span style="color:#800000;">"__PREVIOUSPAGE"</span>]));</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">catch</span>&nbsp;(<span style="color:#008080;">CryptographicException</span>)</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">this</span>._pageFlags[8] =&nbsp;<span style="color:#0000FF;">true</span>;</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">if</span>&nbsp;((path !=&nbsp;<span style="color:#0000FF;">null</span>) &amp;&amp; (path !=&nbsp;<span style="color:#0000FF;">this</span>.Request.CurrentExecutionFilePathObject))</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">this</span>._pageFlags[8] =&nbsp;<span style="color:#0000FF;">true</span>;</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000FF;">this</span>._previousPagePath = path;</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">&nbsp;&nbsp;&nbsp; }</span></p> 
     <p><span style="font-family:'新宋体';font-size:9pt;">}</span></p> 
     <p><span style="font-family:'宋体';"><span style="font-family:'新宋体';">解密发生异常时_pageFlags[8]为true这种异常发生的可能性比较小我们忽略，重点看另外一种情形，将这种情形的所有条件结合起来就是IsCrossPagePostBack＝false &amp;&amp; _requestValueCollection["__PREVIOUSPAGE"] != null &amp;&amp; path != null &amp;&amp; (path != this.Request.CurrentExecutionFilePathObject)。</span>发生跨页提交时对于目标页面<span style="font-family:'新宋体';">IsCrossPagePostBack</span><span style="font-family:'新宋体';">＝false，此时源页面的"__PREVIOUSPAGE"等信息会提交给目标页面，所以_requestValueCollection["__PREVIOUSPAGE"] != null。此时当前请求的CurrentExecutionFilePathObject是根据目标页的路径生成的，与使用_requestValueCollection["__PREVIOUSPAGE"]生成的path对象不同。</span></span></p> 
     <p><span style="font-family:'宋体';"><span style="font-size:12pt;"><span style="font-family:'新宋体';">此处得出结论⑥</span>发生跨页提交（CrossPagePostBack）时目标页面是IsPostBack＝false。为什么需要对CrossPagePostBack的目标页面做这样的处理呢？发生CrossPagePostBack时，会将源页面的信息提交给目标页面此时Request.Form！＝null，而且包括<span style="font-family:'新宋体';">__VIEWSTATE</span><span style="font-family:'新宋体';">等键按照其他的规则会判断为</span>IsPostBack＝true，所以需要对CrossPagePostBack的目标页面做特殊的判断。</span></span></p> 
     <p style="text-indent:-27pt;"><strong>3.4<span style="font-weight:normal;font-size:7pt;line-height:normal;font-family:'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></strong><strong>(this.Context.ServerExecuteDepth &lt;= 0) || ((this.Context.Handler != null) &amp;&amp; (base.GetType() == this.Context.Handler.GetType()))</strong></p> 
     <p align="left"><span style="font-family:'宋体';">在</span>HttpServerUtility<span style="font-family:'宋体';">中有如下的代码对</span>Context. ServerExecuteDepth<span style="font-family:'宋体';">进行了操作。</span></p> 
     <p align="left"><span style="font-family:'新宋体';color:#0000FF;font-size:9pt;">public</span><span style="font-family:'新宋体';font-size:9pt;">&nbsp;<span style="color:#0000FF;">void</span>&nbsp;Execute(<span style="color:#0000FF;">string</span>&nbsp;path,&nbsp;<span style="color:#008080;">TextWriter</span>&nbsp;writer,&nbsp;<span style="color:#0000FF;">bool</span>&nbsp;preserveForm)</span></p> 
     <p><span style="font-family:'新宋体';font-size:9pt;">{</span></p> 
     <p><span style="font-size:9pt;">…</span></p> 
     <p align="left" style="text-indent:21pt;"><span style="font-family:'新宋体';color:#0000FF;font-size:9pt;">try</span></p> 
     <p align="left" style="text-indent:21pt;"><span style="font-family:'新宋体';font-size:9pt;">{</span></p> 
     <p align="left" style="text-indent:21pt;"><span style="font-family:'新宋体';color:#0000FF;font-size:9pt;">this</span><span style="font-family:'新宋体';font-size:9pt;">._context.ServerExecuteDepth++;</span></p> 
     <p align="left" style="text-indent:-39pt;"><span style="font-family:'新宋体';font-size:9pt;">handler =&nbsp;<span style="color:#0000FF;">this</span>._context.ApplicationInstance.MapHttpHandler(<span style="color:#0000FF;">this</span>._context, request.RequestType, path3, filename, useAppConfig);</span></p> 
     <p align="left" style="text-indent:21pt;"><span style="font-family:'新宋体';font-size:9pt;">}</span></p> 
     <p align="left" style="text-indent:21pt;"><span style="font-family:'新宋体';color:#0000FF;font-size:9pt;">finally</span></p> 
     <p align="left" style="text-indent:21pt;"><span style="font-family:'新宋体';font-size:9pt;">{</span></p> 
     <p align="left" style="text-indent:21pt;"><span style="font-family:'新宋体';color:#0000FF;font-size:9pt;">this</span><span style="font-family:'新宋体';font-size:9pt;">._context.ServerExecuteDepth--;</span></p> 
     <p align="left" style="text-indent:21pt;"><span style="font-family:'新宋体';font-size:9pt;">}</span></p> 
     <p>…</p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">}</span></p> 
     <p align="left"><span style="font-family:'宋体';">在</span>HttpServerUtility.ExecuteInternal<span style="font-family:'宋体';">中也有一处对</span>Context.ServerExecuteDepth<span style="font-family:'宋体';">类似的操作。</span>HttpServerUtility.Execute<span style="font-family:'宋体';">会调用</span>HttpServerUtility.ExecuteInternal<span style="font-family:'宋体';">。从此可以看出</span>Context.ServerExecuteDepth<span style="font-family:'宋体';">是表示</span>Server.Execute<span style="font-family:'宋体';">中的执行深度。在调用</span>Server.Execute<span style="font-family:'宋体';">时</span>Context.ServerExecuteDepth&gt;0<span style="font-family:'宋体';">。另外调用</span>Server.Execute<span style="font-family:'宋体';">后</span>Context.Handle<span style="font-family:'宋体';">中存储的还是原来的页对象，也就是说</span>base.GetType()!= this.Context.Handler.GetType()<span style="font-family:'宋体';">。这样对于</span>Server.Execute<span style="font-family:'宋体';">来说</span>this.Context.ServerExecuteDepth &lt;= 0) || ((this.Context.Handler != null)<span style="font-family:'宋体';">这个条件为</span>false<span style="font-family:'宋体';">。</span><span style="font-family:'新宋体';">此处得出结论⑦</span><span style="font-family:'宋体';">使用</span>Server.Execute<span style="font-family:'宋体';">迁移到的页面其</span>IsPostBack<span style="font-family:'宋体';">＝</span>false<span style="font-family:'宋体';">。此处我们会有疑问，为什么需要对</span>Server.Execute<span style="font-family:'宋体';">进行特殊的判断呢？理由是使用</span>Server.Execute<span style="font-family:'宋体';">时会将源</span>Page<span style="font-family:'宋体';">中的隐含域提交，此时</span>Request.Form!=null<span style="font-family:'宋体';">，而且包括</span><span style="font-family:'新宋体';">__VIEWSTATE</span><span style="font-family:'新宋体';">等键按照其他的规则会判断为</span>IsPostBack<span style="font-family:'宋体';">＝</span>true<span style="font-family:'宋体';">。</span></p> 
     <p style="text-indent:-27pt;"><strong>3.5<span style="font-weight:normal;font-size:7pt;line-height:normal;font-family:'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></strong><strong>this._fPageLayoutChanged</strong></p> 
     <p>fPageLayoutChanged<span style="font-family:'宋体';">从这个变量的字面意思来看是</span>Page<span style="font-family:'宋体';">的</span>Layout<span style="font-family:'宋体';">发生了变化。</span></p> 
     <p><span style="font-family:'宋体';">在</span>Page.LaodAllState<span style="font-family:'宋体';">中代码片断如下：</span></p> 
     <p align="left"><span style="font-family:'新宋体';color:#0000FF;font-size:9pt;">private</span><span style="font-family:'新宋体';font-size:9pt;">&nbsp;<span style="color:#0000FF;">void</span>&nbsp;LoadAllState()</span></p> 
     <p><span style="font-family:'新宋体';font-size:9pt;">{</span></p> 
     <p align="left" style="text-indent:21pt;"><span style="color:#0000FF;font-size:9pt;">…</span></p> 
     <p align="left" style="text-indent:21pt;"><span style="font-family:'新宋体';color:#0000FF;font-size:9pt;">string</span><span style="font-family:'新宋体';font-size:9pt;">&nbsp;s = (<span style="color:#0000FF;">string</span>) second.First;</span></p> 
     <p align="left" style="text-indent:21pt;"><span style="font-family:'新宋体';color:#0000FF;font-size:9pt;">int</span><span style="font-family:'新宋体';font-size:9pt;">&nbsp;num =&nbsp;<span style="color:#0000FF;">int</span>.Parse(s,&nbsp;<span style="color:#008080;">NumberFormatInfo</span>.InvariantInfo);</span></p> 
     <p align="left" style="text-indent:21pt;"><span style="font-family:'新宋体';color:#0000FF;font-size:9pt;">this</span><span style="font-family:'新宋体';font-size:9pt;">._fPageLayoutChanged = num !=&nbsp;<span style="color:#0000FF;">this</span>.GetTypeHashCode();</span></p> 
     <p align="left" style="text-indent:21pt;"><span style="font-size:9pt;">…</span></p> 
     <p align="left"><span style="font-family:'新宋体';font-size:9pt;">}</span></p> 
     <span style="font-family:'宋体';font-size:12pt;">其意思是现在得到的</span>
     <span style="font-family:'Times New Roman';font-size:12pt;">HashCode</span>
     <span style="font-family:'宋体';font-size:12pt;">和存储在</span>
     <span style="font-family:'Times New Roman';font-size:12pt;">ViewState</span>
     <span style="font-family:'宋体';font-size:12pt;">中的</span>
     <span style="font-family:'Times New Roman';font-size:12pt;">HashCode</span>
     <span style="font-family:'宋体';font-size:12pt;">不一致时</span>
     <span style="font-family:'Times New Roman';font-size:12pt;">fPageLayoutChanged</span>
     <span style="font-family:'宋体';font-size:12pt;">＝</span>
     <span style="font-family:'Times New Roman';font-size:12pt;">true</span>
     <span style="font-family:'宋体';font-size:12pt;">。</span>
     <span style="font-family:'Times New Roman';font-size:12pt;">GetTypeHashCode()</span>
     <span style="font-family:'宋体';font-size:12pt;">会返回一个</span>
     <span style="font-family:'Times New Roman';font-size:12pt;">HashCode</span>
     <span style="font-family:'宋体';font-size:12pt;">，而且这个方法是对</span>
     <span style="font-family:'Times New Roman';font-size:12pt;">aspx</span>
     <span style="font-family:'宋体';font-size:12pt;">进行编译的时候产生的，只有在页面上的元素发生了变化的时候其返回的值会发生变化。</span>
     <span style="font-family:'新宋体';font-size:12pt;">此处得出结论⑧</span>
     <span style="font-family:'宋体';font-size:12pt;">在</span>
     <span style="font-family:'Times New Roman';font-size:12pt;">Page</span>
     <span style="font-family:'宋体';font-size:12pt;">运行期间其对应的</span>
     <span style="font-family:'Times New Roman';font-size:12pt;">DLL</span>
     <span style="font-family:'宋体';font-size:12pt;">被更新了并且</span>
     <span style="font-family:'Times New Roman';font-size:12pt;">Page</span>
     <span style="font-family:'宋体';font-size:12pt;">的树<span style="font-size:12pt;">结构发生过变化，这种情况下请求时</span><span style="font-family:'Times New Roman';font-size:12pt;">IsPostBack</span><span style="font-size:12pt;">＝</span><span style="font-family:'Times New Roman';font-size:12pt;">false</span><span style="font-size:12pt;">。</span></span> 
    </div> 
    <div> 
     <div>
      <font><br></font>
     </div> 
     <div>
      <font><br></font>
     </div> 
     <div>
      <font><br></font>
     </div> 
     <div>
      <font>本文转自94cool博客园博客，原文链接：http://www.cnblogs.com/94cool/articles/1532608.html，如需转载请自行联系原作者</font>
     </div> 
     <div style="font-family:'宋体';font-size:12pt;">
      <br>
     </div> 
    </div> 
    <div class="clear" style="clear:both;"></div> 
    <div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"></div> 
     <div style="font-size:15px;color:#808080;font-family:Verdana, Arial, Helvetica, sans-serif;"></div> 
     <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"></div> 
    </div> 
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
