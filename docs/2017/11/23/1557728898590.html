<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>烂泥：apache虚拟主机的学习与应用 « NotBeCN</title>
  <meta name="description" content="             要配置apache的虚拟主机，我们需要分以下几步进行：    1、 检查apache虚拟主机模块    2、 开启apache虚拟主机功能    3、 httpd-vhosts.conf文件详解    4、 根据IP配置虚拟主机    5、 根据端口配置虚拟主机    6、 根据域名配置...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/23/1557728898590.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">烂泥：apache虚拟主机的学习与应用</h1>
    <p class="post-meta">Nov 23, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">要配置apache的虚拟主机，我们需要分以下几步进行：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">1、 检查apache虚拟主机模块</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">2、 开启apache虚拟主机功能</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">3、 httpd-vhosts.conf文件详解</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">4、 根据IP配置虚拟主机</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">5、 根据端口配置虚拟主机</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">6、 根据域名配置虚拟主机</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><strong><span style="font-family:'微软雅黑';">一、检查apache虚拟主机模块</span></strong></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">apache要配置虚拟主机，就需要先查看apache是否编译vhost_alias_module模块。当然apache默认是已经编译该模块的，我们可以通过以下命令查看是否已经编译模块，如下：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">/usr/local/apache2/bin/apachectl -M</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://s3.51cto.com/wyfs02/M02/57/17/wKiom1SRGx7jZkoSAAGlsMDcxoQ653.jpg" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><span style="font-family:'微软雅黑';"><img title="clip_image001" alt="clip_image001" src="http://s3.51cto.com/wyfs02/M00/57/14/wKioL1SRG7-yuXKGAAGtOcb_pTg505.jpg" width="596" height="145" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:0px none;border-right:0px none;border-bottom:0px none;border-left:none;background-image:none;"></span></a></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><strong><span style="font-family:'微软雅黑';">二、开启apache虚拟主机功能</span></strong></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">要开启apache虚拟主机功能，我们需要修改apache配置文件http.conf。打开apache的安装目录，找到httpd.conf文件，<span style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;color:rgb(255,0,0);">去掉Include conf/extra/httpd-vhosts.conf前的#</span>。如下：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">vi httpd.conf</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://s3.51cto.com/wyfs02/M00/57/17/wKiom1SRGx7zojVFAAEJMhlfDN8790.jpg" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><span style="font-family:'微软雅黑';"><img title="clip_image002" alt="clip_image002" src="http://s3.51cto.com/wyfs02/M01/57/17/wKiom1SRGx6yOYnfAAESzMwZIME391.jpg" width="388" height="202" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:0px none;border-right:0px none;border-bottom:0px none;border-left:none;background-image:none;"></span></a></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">该行的作用是，把conf/extra/目录下的httpd-vhosts.conf文件导入虚拟主机配置</span><a name="t1" style="color:rgb(66,133,244);"></a><span style="font-family:'微软雅黑';">中。</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://s3.51cto.com/wyfs02/M01/57/14/wKioL1SRG7-ARYEJAAIJgl1o-Ww573.jpg" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><span style="font-family:'微软雅黑';"><img title="clip_image003" alt="clip_image003" src="http://s3.51cto.com/wyfs02/M01/57/17/wKiom1SRGx_xW0eyAAISCmSFcVA995.jpg" width="521" height="278" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:0px none;border-right:0px none;border-bottom:0px none;border-left:none;background-image:none;"></span></a></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">下面我们所有有关虚拟主机的配置都在httpd-vhosts.conf文件中进行。如下：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://s3.51cto.com/wyfs02/M02/57/14/wKioL1SRG8CQXYz0AAPu3lYh-Zw840.jpg" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><span style="font-family:'微软雅黑';"><img title="clip_image004" alt="clip_image004" src="http://s3.51cto.com/wyfs02/M02/57/17/wKiom1SRGx-yQOeTAAP_SY0VIP8005.jpg" width="540" height="682" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:0px none;border-right:0px none;border-bottom:0px none;border-left:none;background-image:none;"></span></a></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">apache虚拟主机配置主要分为三种，分别是根据IP地址、根据端口、根据域名。</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">这三种虚拟主机，我们主要讲解基于域名的虚拟主机。基于IP与基于端口在生产环境中使用的比较少，我们在此只大致讲解其配置。</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">注意在此之前，我们还要修改httpd.conf文件把有关目录访问权限的配置选项去掉。否则在访问虚拟主机时，会报403错误。如下：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://s3.51cto.com/wyfs02/M00/57/14/wKioL1SRG8DAwCtHAAEkRUIz0H4504.jpg" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><span style="font-family:'微软雅黑';"><img title="clip_image005" alt="clip_image005" src="http://s3.51cto.com/wyfs02/M00/57/17/wKiom1SRGyDycXK4AAEsUoFPPSc650.jpg" width="446" height="228" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:0px none;border-right:0px none;border-bottom:0px none;border-left:none;background-image:none;"></span></a></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">httpd.conf文件去掉Order deny,allow和Deny from all行，修改如下：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">&lt;Directory /&gt;</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">Options FollowSymLinks</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">AllowOverride None</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">&lt;/Directory&gt;</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://s3.51cto.com/wyfs02/M01/57/14/wKioL1SRG8HBTkcGAAEKl575Gz8719.jpg" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><span style="font-family:'微软雅黑';"><img title="clip_image006" alt="clip_image006" src="http://s3.51cto.com/wyfs02/M01/57/17/wKiom1SRGyCw_9RWAAESMiDhxOg869.jpg" width="501" height="215" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:0px none;border-right:0px none;border-bottom:0px none;border-left:none;background-image:none;"></span></a></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">值得注意的是，当我们为apache启用虚拟主机之后，那么所有的用户请求都会交由对应的虚拟主机来处理。如果apache找不到对应的虚拟主机，则会把该请求交给配置文件中排在最前面的虚拟主机来处理。</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';"><span style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;color:rgb(255,0,0);"><strong>同时如果配置基于域名的虚拟主机，我们必须要启用</strong><strong>NameVirtualHost *:80</strong><strong>行。如下：</strong></span></span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://s3.51cto.com/wyfs02/M02/57/14/wKioL1SRG8HA6RLjAAKEPnj35ZU276.jpg" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><span style="font-family:'微软雅黑';"><img title="clip_image007" alt="clip_image007" src="http://s3.51cto.com/wyfs02/M02/57/17/wKiom1SRGyHAz7d1AAKNGjBKx0E733.jpg" width="550" height="340" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:0px none;border-right:0px none;border-bottom:0px none;border-left:none;background-image:none;"></span></a></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><strong><span style="font-family:'微软雅黑';">三、httpd-vhosts.conf文件详解</span></strong></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">httpd-vhosts.conf文件内容大致如下：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">NameVirtualHost *:80</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">&lt;VirtualHost *:80&gt;</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">ServerAdmin webmaster@dummy-host.example.com</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">DocumentRoot "@@ServerRoot@@/docs/dummy-host.example.com"</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">ServerName dummy-host.example.com</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">ServerAlias www.dummy-host.example.com</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">ErrorLog "logs/dummy-host.example.com-error_log"</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">CustomLog "logs/dummy-host.example.com-access_log" common</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">&lt;/VirtualHost&gt;</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">NameVirtualHost指定虚拟主机所使用的IP地址或域名，但是最好是IP地址。<span style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;color:rgb(255,0,0);">使用基于域名的虚拟主机时，NameVirtualHost是必要的指令。</span>NameVirtualHost可以定义多个。所有符合NameVirtualHost或&lt;VirtualHost&gt;标签定义的请求，都会被作为虚拟主机处理，而主服务器将不理会。NameVirtualHost定义了而&lt;VirtualHost&gt;标签没有定义的的请求，服务器会找不到相应的虚拟主机而将无法处理。所以每个NameVirtualHost定义的参数至少要有一个&lt;VirtualHost&gt;相匹配。</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">如果设置NameVirtualHost或&lt;VirtualHost&gt;为*:80的话，所有针对80端口的请求，都会被虚拟主机处理，请求会根据域名指向某个虚拟主机。如果有来自80端口的请求，而所请求的域名没有被配置为虚拟主机，那将指向第一个虚拟主机。这样主服务器将无法收到来自80端口的任何请求。为此也要为主服务器配置一个虚拟主机。</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">想要配置基于域名的虚拟主机，则必须使用NameVirtualHost指令，该指令用于指定对于当前服务器的哪些IP地址和端口可以接受虚拟主机的相关访问请求，而且这些IP地址和端口必须包含在服务器监听的地址和端口之中。</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">如果你希望用到服务器上所有的IP地址，你可以使用指令：NameVirtualHost *。</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">如果apache监听了多个端口(例如：常规的80端口和SSL的443端口)，那么必须在NameVirtualHost指令中指定一个端口，例如：NameVirtualHost *:80。</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">我们可以使用VirtualHost配置段来添加一个虚拟主机，如果有多个虚拟主机，我们可以添加多个这样的配置段。</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">在VirtualHost配置段中，我们可以使用配置指令来对该虚拟主机进行设置，除了诸如创建进程等少数特殊的指令外，几乎所有的指令都可以出现在VirtualHost配置段中。如果没有设置某些指令，则该虚拟主机将采用主服务器范围内相同的全局指令作为默认设置。当然，VirtualHost配置段至少应该包含ServerName和DocumentRoot这两个配置指令，用以指定虚拟主机的域名和站点文档目录的路径。如下：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">&lt;VirtualHost *:80&gt;</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">DocumentRoot "/www/a.ilanni.com"</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">ServerName a.ilanni.com</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">&lt;/VirtualHost&gt;</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">ServerAdmin管理员邮箱。</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">DocumentRoot网站目录（注意：如果网站目录中的路径有空格，请在路径两端加上双引号）。</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">ServerName要绑定的域名（必填）。</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">ServerAlias要绑定的虚拟主机的别名。（可选，如果多个域名，中间以空格分隔，如果没有，则去掉该行）。支持*，?两种通配符，比如*.abc.com，表示任意一个abc.com的二级域名都可访问。</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">CustomLog用户日志文件（可选，如果不需要，则去掉该行）。</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">ErrorLog 错误日志（可选，如果不需要，则去掉该行）。</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><strong><span style="font-family:'微软雅黑';">四、根据IP配置虚拟主机</span></strong></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">apache基于IP虚拟主机在实际的生产环境中使用比较少，主要是使用在单网卡多IP的情况下。</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">我们要测试此功能，需要给服务器的网卡增加一个IP。首先查看服务器的IP地址，如下：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">ifconfig eth0|grep "inet addr"|awk '{print $2}'|cut -d: -f2</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">ifconfig eth2|grep "inet addr"|awk '{print $2}'|sed 's/addr://g'</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://s3.51cto.com/wyfs02/M00/57/14/wKioL1SRG8LyA0-zAAEgdBL7myY252.jpg" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><span style="font-family:'微软雅黑';"><img title="clip_image008" alt="clip_image008" src="http://s3.51cto.com/wyfs02/M00/57/17/wKiom1SRGyGC8YiyAAEpZ0vpYR0395.jpg" width="671" height="125" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:0px none;border-right:0px none;border-bottom:0px none;border-left:none;background-image:none;"></span></a></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">可以看到目前服务器的IP是192.168.1.213，再增加一个IP地址为192.168.1.215。eth0网卡增加IP地址，可以通过网卡配置文件实现。如下：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">cp /etc/sysconfig/network-scripts/ifcfg-eth0 /etc/sysconfig/network-scripts/ifcfg-eth0:0</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">cat /etc/sysconfig/network-scripts/ifcfg-eth0:0</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">/etc/init.d/network restart</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">ping 192.168.1.215</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://s3.51cto.com/wyfs02/M02/57/14/wKioL1SRG8LTk-5HAASw7qMTCWE553.jpg" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><span style="font-family:'微软雅黑';"><img title="clip_image009" alt="clip_image009" src="http://s3.51cto.com/wyfs02/M01/57/14/wKioL1SRG8KTqDU8AAS-IKIgVWs737.jpg" width="751" height="548" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:0px none;border-right:0px none;border-bottom:0px none;border-left:none;background-image:none;"></span></a></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">IP地址增加完毕后，我们现在来修改虚拟主机的配置文件httpd-vhosts.conf。如下：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">cat httpd-vhosts.conf|grep -v ^$|grep -v ^#</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://s3.51cto.com/wyfs02/M01/57/17/wKiom1SRGyKCkquTAAFggqMew54851.jpg" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><span style="font-family:'微软雅黑';"><img title="clip_image010" alt="clip_image010" src="http://s3.51cto.com/wyfs02/M02/57/14/wKioL1SRG8PC5gQ7AAFnPtV0ca0763.jpg" width="501" height="160" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:0px none;border-right:0px none;border-bottom:0px none;border-left:none;background-image:none;"></span></a></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">httpd-vhosts.conf修改完毕后，我们需要检查该虚拟主机配置是否正确，使用-S命令。如下：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">/etc/init.d/httpd –S</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://s3.51cto.com/wyfs02/M02/57/17/wKiom1SRGyLApgXwAASTY012jYg837.jpg" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><span style="font-family:'微软雅黑';"><img title="clip_image011" alt="clip_image011" src="http://s3.51cto.com/wyfs02/M00/57/14/wKioL1SRG8OhMvaFAASeGdR3BDk242.jpg" width="641" height="504" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:0px none;border-right:0px none;border-bottom:0px none;border-left:none;background-image:none;"></span></a></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">通过上图可以看到该虚拟主机的配置是正确。</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">为虚拟主机192.168.1.215创建主页文件，如下：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">mkdir /www/192.168.1.215</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">echo "this is web-server 192.168.1.215"&gt;/www/192.168.1.215/index.html</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">cat /www/192.168.1.215/index.html</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://s3.51cto.com/wyfs02/M00/57/17/wKiom1SRGyORu0TsAAEathj_eFA801.jpg" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><span style="font-family:'微软雅黑';"><img title="clip_image012" alt="clip_image012" src="http://s3.51cto.com/wyfs02/M02/57/17/wKiom1SRGyPBuJJYAAEiYNwlIao274.jpg" width="663" height="96" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:0px none;border-right:0px none;border-bottom:0px none;border-left:none;background-image:none;"></span></a></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">访问192.168.1.215虚拟主机。如下：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://s3.51cto.com/wyfs02/M01/57/14/wKioL1SRG8TBRmfEAAD6QrjJ6BA448.jpg" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><span style="font-family:'微软雅黑';"><img title="clip_image013" alt="clip_image013" src="http://s3.51cto.com/wyfs02/M01/57/17/wKiom1SRGyPz9z2xAAECGIbIKVw104.jpg" width="419" height="201" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:0px none;border-right:0px none;border-bottom:0px none;border-left:none;background-image:none;"></span></a></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">或者通过elinks进行测试，如下：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">elinks -dump http://192.168.1.215</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://s3.51cto.com/wyfs02/M02/57/14/wKioL1SRG8TxTnCHAACNPU2xT3c551.jpg" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><span style="font-family:'微软雅黑';"><img title="clip_image014" alt="clip_image014" src="http://s3.51cto.com/wyfs02/M02/57/17/wKiom1SRGySQ_v1OAACSLtvQ5uc885.jpg" width="420" height="78" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:0px none;border-right:0px none;border-bottom:0px none;border-left:none;background-image:none;"></span></a></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">可以看到虚拟主机192.168.1.215，已经可以正常访问了。</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">现在访问192.168.1.213，看看实际效果。如下：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://s3.51cto.com/wyfs02/M00/57/14/wKioL1SRG8WgHShqAAG2p12i01w683.jpg" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><span style="font-family:'微软雅黑';"><img title="clip_image015" alt="clip_image015" src="http://s3.51cto.com/wyfs02/M00/57/17/wKiom1SRGyTjIqb3AAHD4lA-_Fk125.jpg" width="772" height="487" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:0px none;border-right:0px none;border-bottom:0px none;border-left:none;background-image:none;"></span></a></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><strong><span style="font-family:'微软雅黑';">五、根据端口配置虚拟主机</span></strong></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">apache默认是监听80端口，这个可以通过apache配置文件httpd.conf进行查看。如下：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">cat /usr/local/apache2/conf/httpd.conf|grep 80</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://s3.51cto.com/wyfs02/M01/57/14/wKioL1SRG8WSLf7dAADjc6suF6w489.jpg" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><span style="font-family:'微软雅黑';"><img title="clip_image016" alt="clip_image016" src="http://s3.51cto.com/wyfs02/M01/57/17/wKiom1SRGyTjJueyAADpbiH-zQ0408.jpg" width="492" height="120" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:0px none;border-right:0px none;border-bottom:0px none;border-left:none;background-image:none;"></span></a></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">apache基于端口虚拟主机在实际生产环境中也不多见，一般是为公司内部人员提供访问的，如页面的后台、CMS发布、phpmyadmin等。</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">现在我们开始配置基于端口的虚拟主机，在此之前我们需要修改两个文件一是apache的配置文件httpd.conf，二是apache虚拟主机配置文件httpd-vhosts.conf。</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">现在我们使用8088这个端口来设置虚拟主机。修改httpd.conf。如下：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">vim /usr/local/apache2/conf/httpd.conf</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://s3.51cto.com/wyfs02/M02/57/15/wKioL1SRG8Xw5R8IAACjywFUYsI386.jpg" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><span style="font-family:'微软雅黑';"><img title="clip_image017" alt="clip_image017" src="http://s3.51cto.com/wyfs02/M02/57/17/wKiom1SRGyWDi6q_AACoweF2vIs715.jpg" width="380" height="147" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:0px none;border-right:0px none;border-bottom:0px none;border-left:none;background-image:none;"></span></a></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">此文件修改完毕后，我们再来修改httpd-vhosts.conf。如下：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">cat httpd-vhosts.conf|grep -v ^$|grep -v ^#</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://s3.51cto.com/wyfs02/M00/57/15/wKioL1SRG8mjBVcsAAG9wRfZUlk913.jpg" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><span style="font-family:'微软雅黑';"><img title="clip_image018" alt="clip_image018" src="http://s3.51cto.com/wyfs02/M00/57/17/wKiom1SRGyiSStVGAAHGaK7HAz0691.jpg" width="485" height="271" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:0px none;border-right:0px none;border-bottom:0px none;border-left:none;background-image:none;"></span></a></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">为虚拟主机192.168.1.215:8088创建主页文件，如下：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">mkdir 192.168.1.215:8088</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">echo "his is web-server 192.168.1.215:8088"&gt;index.php</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">cat index.php</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://s3.51cto.com/wyfs02/M00/57/15/wKioL1SRG8mALf16AADqxKPK0dM449.jpg" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><span style="font-family:'微软雅黑';"><img title="clip_image019" alt="clip_image019" src="http://s3.51cto.com/wyfs02/M00/57/17/wKiom1SRGymgxlmRAAD2GnJYiOE150.jpg" width="547" height="107" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:0px none;border-right:0px none;border-bottom:0px none;border-left:none;background-image:none;"></span></a></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">现在访问虚拟主机192.168.1.215:8088，如下：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://s3.51cto.com/wyfs02/M01/57/15/wKioL1SRG8mAr4FRAAEBhoI7vwk599.jpg" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><span style="font-family:'微软雅黑';"><img title="clip_image020" alt="clip_image020" src="http://s3.51cto.com/wyfs02/M01/57/17/wKiom1SRGynTaQhPAAEJDc4i2rw865.jpg" width="484" height="246" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:0px none;border-right:0px none;border-bottom:0px none;border-left:none;background-image:none;"></span></a></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">或者使用elinks，如下：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">elinks -dump http://192.168.1.215:8088</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://s3.51cto.com/wyfs02/M02/57/15/wKioL1SRG8qzMIxpAADT_3iQCFo188.jpg" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><span style="font-family:'微软雅黑';"><img title="clip_image021" alt="clip_image021" src="http://s3.51cto.com/wyfs02/M02/57/17/wKiom1SRGynCkr-6AADaJ1EjEWQ196.jpg" width="534" height="97" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:0px none;border-right:0px none;border-bottom:0px none;border-left:none;background-image:none;"></span></a></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><strong><span style="font-family:'微软雅黑';">六、根据域名配置虚拟主机</span></strong></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">apache基于域名的虚拟主机是我们经常使用的，也是在生产环境中最常见的。</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">配置基于域名的虚拟主机，我们还是要编辑httpd-vhosts.conf文件。如下：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">vim httpd-vhosts.conf</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">:45,48s/192.168.1.215:8088/a.ilanni.com/g</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://s3.51cto.com/wyfs02/M00/57/15/wKioL1SRG8qBBejpAAG0bFK-uTc202.jpg" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><span style="font-family:'微软雅黑';"><img title="clip_image022" alt="clip_image022" src="http://s3.51cto.com/wyfs02/M00/57/17/wKiom1SRGyqypeYGAAG3N9ZXBmw826.jpg" width="524" height="199" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:0px none;border-right:0px none;border-bottom:0px none;border-left:none;background-image:none;"></span></a></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://s3.51cto.com/wyfs02/M01/57/15/wKioL1SRG8uDUAiJAAD3ZxPZook762.jpg" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><span style="font-family:'微软雅黑';"><img title="clip_image023" alt="clip_image023" src="http://s3.51cto.com/wyfs02/M01/57/17/wKiom1SRGyqDXqh2AAD9JJ80Okc413.jpg" width="412" height="142" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:0px none;border-right:0px none;border-bottom:0px none;border-left:none;background-image:none;"></span></a></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">以上修改完毕后，我们来创建虚拟主机a.ilanni.com默认主页。如下：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">mkdir /www/a.ilanni.com</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">echo "&lt;?php phpinfo();?&gt;"&gt;/www/a.ilanni.com/index.php</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">cat /www/a.ilanni.com/index.php</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://s3.51cto.com/wyfs02/M02/57/15/wKioL1SRG8vwu0NmAADpNHeqP_E484.jpg" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><span style="font-family:'微软雅黑';"><img title="clip_image024" alt="clip_image024" src="http://s3.51cto.com/wyfs02/M02/57/17/wKiom1SRGyqRSokYAAD1gMOzslc746.jpg" width="577" height="114" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:0px none;border-right:0px none;border-bottom:0px none;border-left:none;background-image:none;"></span></a></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">以上配置完毕后，重新加载apache的配置文件，即优雅重启apache。如下：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">/etc/init.d/httpd graceful</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://s3.51cto.com/wyfs02/M00/57/15/wKioL1SRG8uSrwztAAB_y8V24uQ398.jpg" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><span style="font-family:'微软雅黑';"><img title="clip_image025" alt="clip_image025" src="http://s3.51cto.com/wyfs02/M00/57/17/wKiom1SRGyuwK6AYAACFzTZ2uCA198.jpg" width="417" height="103" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:0px none;border-right:0px none;border-bottom:0px none;border-left:none;background-image:none;"></span></a></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">访问虚拟主机a.ilanni.com，如下：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://s3.51cto.com/wyfs02/M01/57/15/wKioL1SRG8zSLqh_AAJJSRXEWwM390.jpg" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><span style="font-family:'微软雅黑';"><img title="clip_image026" alt="clip_image026" src="http://s3.51cto.com/wyfs02/M01/57/15/wKioL1SRG8yjZztoAAJa4MfA3u0627.jpg" width="746" height="420" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:0px none;border-right:0px none;border-bottom:0px none;border-left:none;background-image:none;"></span></a></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">或者使用elinks，如下：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">elinks -dump http://a.ilanni.com</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://s3.51cto.com/wyfs02/M01/57/17/wKiom1SRGyvhC9alAAJchxWWJDU353.jpg" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><span style="font-family:'微软雅黑';"><img title="clip_image027" alt="clip_image027" src="http://s3.51cto.com/wyfs02/M02/57/15/wKioL1SRG8yzF2-GAAJkuSdXpew989.jpg" width="533" height="385" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:0px none;border-right:0px none;border-bottom:0px none;border-left:none;background-image:none;"></span></a></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">通过上图，可以看到目前虚拟主机a.ilanni.com，已经可以正常访问了。</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><strong><span style="font-family:'微软雅黑';">七、混合配置虚拟主机</span></strong></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">以上我们介绍了apache基于IP、基于端口和基于域名的虚拟主机配置。下面我们给出apache混合虚拟主机配置，配置文件如下：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">&lt;VirtualHost b.ilanni.com:8088&gt;</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">ServerAdmin webmaster@dummy-host.example.com</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">DocumentRoot "/www/b.ilanni.com:8088"</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">ServerName b.ilanni.com:8088</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">ErrorLog "logs/b.ilanni.com:8088-error_log"</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">CustomLog "logs/b.ilanni.com:8088-access_log" common</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';color:rgb(255,0,0);">&lt;/VirtualHost&gt;</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://s3.51cto.com/wyfs02/M02/57/17/wKiom1SRGyyxhs6HAAM5fn3Pfhk530.jpg" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><span style="font-family:'微软雅黑';"><img title="clip_image028" alt="clip_image028" src="http://s3.51cto.com/wyfs02/M00/57/15/wKioL1SRG83TgQI3AANKbKdfCjg232.jpg" width="435" height="605" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:0px none;border-right:0px none;border-bottom:0px none;border-left:none;background-image:none;"></span></a></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a name="t4" style="color:rgb(66,133,244);"></a><span style="font-family:'微软雅黑';">虚拟主机混用时的问题：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">1、虚拟主机混用可以这样理解:一行NameVirtualHost指令定义的所有虚拟主机为一组;该组与一个基于IP的虚拟主机平级。即把一行NameVirtualHost定义的整个组看作是一个基于IP的虚拟主机。</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">2、虚拟主机指定的端口必须是Listen定义的。如果虚拟主机没有指定端口，则认为是80端口。如果NameVirtualHost * 这样定义，是指所有地址的所有已定义端口。</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">3、更具体的地址定义优先。比如NameVirtualHost指令定义了*:80，而某个基于IP的虚拟主机定义为192.168.0.1:80，那么此时如有对192.168.0.1:80的请求，那请求会被优先指向192.168.0.1:80定义的虚拟主机。所以为了避免混乱，不要定义相互有交叉或包含的地址区间。</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">4、一个虚拟主机，可以同时为基于域名和基于IP的。如上一例中最后一个虚拟主机。这样符合两种定义的请求都会被指同一个虚拟主机。有时要区别内外网对虚拟主机的访问时可以这样，因为来自内网的请求可能和来自外网的请求可能不一样，但是它们需要指向同一个虚拟主机。</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a name="t5" style="color:rgb(66,133,244);"></a><span style="font-family:'微软雅黑';">使用"_default_"虚拟主机，这个虚拟主机可以理解成基于IP的虚拟主机。如下：</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">&lt;VirtualHost _default_:*&gt;</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">&nbsp;&nbsp;&nbsp; DocumentRoot /www/default</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">&lt;/VirtualHost&gt;</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';">这个虚拟主机将接管与其它虚拟主机IP和端口不匹配的请求。不过如此一来，主服务器将不会处理任何请求。因此把主服务器配置成一个虚拟主机是必要的。</span></p> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><span style="font-family:'微软雅黑';"><br></span></p> 
   <p><span><font color="#333333">本文转自 烂泥行天下 51CTO博客，原文链接：http://blog.51cto.com/ilanni/1591015</font><br></span></p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
