<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>【强转】总结的相当详细的内存管理 « NotBeCN</title>
  <meta name="description" content="             版权声明    此文版权归作者Vince Yuan (vince.yuan#gmail.com)所有。欢迎非营利性转载，转载时必须包含原始链接http://vinceyuan.cnblogs.com/，且必须包含此版权声明的完整内容。    &nbsp;    版本&nbsp;1.1&n...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/23/weixin_34342905_90134765.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">【强转】总结的相当详细的内存管理</h1>
    <p class="post-meta">Nov 23, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">版权声明</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">此文版权归作者Vince Yuan (vince.yuan#gmail.com)所有。欢迎非营利性转载，转载时必须包含原始链接<a href="http://vinceyuan.cnblogs.com/" rel="nofollow" style="color:rgb(68,68,68);">http://vinceyuan.cnblogs.com/</a>，且必须包含此版权声明的完整内容。</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">版本<span style="font-family:Calibri;">&nbsp;1.1&nbsp;&nbsp;</span>发表于<span style="font-family:Calibri;">2010-03-08</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">前言</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">初学objectice-C的朋友都有一个困惑，总觉得对objective-C的内存管理机制琢磨不透，程序经常内存泄漏或莫名其妙的崩溃。我在这里总结了自己对objective-C内存管理机制的研究成果和经验，写了这么一个由浅入深的教程。希望对大家有所帮助，也欢迎大家一起探讨。</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">此文涉及的内存管理是针对于继承于NSObject的Class。</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">一&nbsp;基本原理</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">Objective-C的内存管理机制与.Net/Java那种全自动的垃圾回收机制是不同的，它本质上还是C语言中的手动管理方式，只不过稍微加了一些自动方法。</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Objective-C的对象生成于堆之上，生成之后，需要一个指针来指向它。</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">ClassA *obj1 = [[ClassA alloc] init];</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Objective-C的对象在使用完成之后不会自动销毁，需要执行dealloc来释放空间（销毁），否则内存泄露。</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">[obj1 dealloc];</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这带来了一个问题。下面代码中obj2是否需要调用dealloc？</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">ClassA *obj1 = [[ClassA alloc] init];</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">ClassA *obj2 = obj1;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">[obj1 hello]; //输出hello</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">[obj1 dealloc];</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">[obj2 hello]; //能够执行这一行和下一行吗？</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">[obj2 dealloc];</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;不能，因为obj1和obj2只是指针，它们指向同一个对象，[obj1 dealloc]已经销毁这个对象了，不能再调用[obj2 hello]和[obj2 dealloc]。obj2实际上是个无效指针。</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;如何避免无效指针？请看下一条。</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Objective-C采用了引用计数(ref count或者retain count)。对象的内部保存一个数字，表示被引用的次数。例如，某个对象被两个指针所指向（引用）那么它的retain count为2。需要销毁对象的时候，不直接调用dealloc，而是调用release。release会让retain count减1，只有retain count等于0，系统才会调用dealloc真正销毁这个对象。</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">ClassA *obj1 = [[ClassA alloc] init]; //对象生成时，retain count = 1</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">[obj1 release]; //release使retain count减1，retain count = 0，dealloc自动被调用,对象被销毁</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">我们回头看看刚刚那个无效指针的问题，把dealloc改成release解决了吗？</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">ClassA *obj1 = [[ClassA alloc] init]; //retain count = 1</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">ClassA *obj2 = obj1; //retain count = 1</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">[obj1 hello]; //输出hello</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">[obj1 release]; //retain count = 0，对象被销毁</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">[obj2 hello];</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">[obj2 release];</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [obj1 release]之后，obj2依然是个无效指针。问题依然没有解决。解决方法见下一条。</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Objective-C指针赋值时，retain count不会自动增加，需要手动retain。</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">ClassA *obj1 = [[ClassA alloc] init]; //retain count = 1</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">ClassA *obj2 = obj1; //retain count = 1</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">[obj2 retain]; //retain count = 2</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">[obj1 hello]; //输出hello</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">[obj1 release]; //retain count = 2 – 1 = 1</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">[obj2 hello]; //输出hello</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">[obj2 release]; //retain count = 0，对象被销毁</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">问题解决！注意，如果没有调用[obj2 release]，这个对象的retain count始终为1，不会被销毁，内存泄露。(1-4可以参考附件中的示例程序memman-no-pool.m)</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">这样的确不会内存泄露，但似乎有点麻烦，有没有简单点的方法？见下一条。</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Objective-C中引入了autorelease pool（自动释放对象池），在遵守一些规则的情况下，可以自动释放对象。（autorelease pool依然不是.Net/Java那种全自动的垃圾回收机制）</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">5.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;新生成的对象，只要调用autorelease就行了，无需再调用release！</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">ClassA *obj1 = [[[ClassA alloc] init] autorelease]; //retain count = 1&nbsp;但无需调用release</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">5.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;对于存在指针赋值的情况，代码与前面类似。</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">ClassA *obj1 = [[[ClassA alloc] init] autorelease]; //retain count = 1</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">ClassA *obj2 = obj1; //retain count = 1</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">[obj2 retain]; //retain count = 2</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">[obj1 hello]; //输出hello</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">//对于obj1，无需调用（实际上不能调用）release</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">[obj2 hello]; //输出hello</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">[obj2 release]; //retain count = 2-1 = 1</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">细心的读者肯定能发现这个对象没有被销毁，何时销毁呢？谁去销毁它？（可以参考附件中的示例程序memman-with-pool.m）请看下一条。</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255,0,0);">&nbsp;autorelease pool原理剖析。（其实很简单的，一定要坚持看下去，否则还是不能理解Objective-C的内存管理机制。）</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">6.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;autorelease pool不是天生的，需要手动创立。只不过在新建一个iphone项目时，xcode会自动帮你写好。autorelease pool的真名是NSAutoreleasePool。</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">6.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="text-decoration:underline;"><strong><span style="color:rgb(255,0,0);">NSAutoreleasePool内部包含一个数组（NSMutableArray），用来保存声明为autorelease的所有对象。如果一个对象声明为autorelease，系统所做的工作就是把这个对象加入到这个数组中去。 &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="color:rgb(0,255,255);">这就是autorelease的精华之处</span></strong></span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">ClassA *obj1 = [[[ClassA alloc] init] autorelease]; //retain count = 1，把此对象加入autorelease pool中</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">6.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NSAutoreleasePool自身在销毁的时候，会遍历一遍这个数组，release数组中的每个成员。如果此时数组中成员的retain count为1，那么release之后，retain count为0，对象正式被销毁。如果此时数组中成员的retain count大于1，那么release之后，retain count大于0，此对象依然没有被销毁，内存泄露。</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">6.4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;默认只有一个autorelease pool，通常类似于下面这个例子。</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">int main (int argc, c*****t char *argv[])</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">{</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">NSAutoreleasePool *pool;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">pool = [[NSAutoreleasePool alloc] init];</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">// do something</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="color:rgb(255,0,0);">[pool release];</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">return (0);</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">} // main</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">所有标记为autorelease的对象都只有在这个pool销毁时才被销毁。如果你有大量的对象标记为autorelease，这显然不能很好的利用内存，在iphone这种内存受限的程序中是很容易造成内存不足的。例如：</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">int main (int argc, c*****t char *argv[])</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">{</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">int i, j;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">for (i = 0; i &lt; 100; i++ )</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">{</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;for (j = 0; j &lt; 100000; j++ )</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;&nbsp;&nbsp; [NSString stringWithFormat:@"1234567890"];//产生的对象是autorelease的。</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">}</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">[pool release];</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">return (0);</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">} // main</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">（可以参考附件中的示例程序memman-many-objs-one-pool.m，运行时通过监控工具可以发现使用的内存在急剧增加，直到pool销毁时才被释放）你需要考虑下一条。</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Objective-C程序中可以嵌套创建多个autorelease pool。在需要大量创建局部变量的时候，可以创建内嵌的autorelease pool来及时释放内存。（感谢网友hhyytt和neogui的提醒，某些情况下，系统会自动创建autorelease pool,&nbsp;请参见第四章）</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">int main (int argc, c*****t char *argv[])</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">{</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">int i, j;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">for (i = 0; i &lt; 100; i++ )</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">{</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="color:rgb(255,0,0);">&nbsp;NSAutoreleasePool *loopPool = [[NSAutoreleasePool alloc] init];</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="color:rgb(255,0,0);">&nbsp;for (j = 0; j &lt; 100000; j++ )</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="color:rgb(255,0,0);">&nbsp;&nbsp;&nbsp; [NSString stringWithFormat:@"1234567890"];//产生的对象是autorelease的。</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="color:rgb(255,0,0);">&nbsp;[loopPool release];//看到这样子处理，就知道写改程序的人已经懂了autorelease的本质了。这种方式占用内存极小</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">}</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">[pool release];</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">return (0);</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">} // main</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">（可以参考附件中的示例程序memman-many-objs-many-pools.m，占用内存的变化极小）</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="text-decoration:underline;color:rgb(255,0,0);"><strong>二<span style="font-family:Calibri;">&nbsp;</span>口诀与范式 &nbsp;//好用的范式</strong></span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;口诀。</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">1.1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;谁创建，谁释放（类似于“谁污染，谁治理”）。如果你通过<span style="font-family:Calibri;">alloc</span>、<span style="font-family:Calibri;">new</span>或<span style="font-family:Calibri;">copy</span>来创建一个对象，那么你必须调用<span style="font-family:Calibri;">release</span>或<span style="font-family:Calibri;">autorelease</span>。换句话说，不是你创建的，就不用你去释放。<br> 例如，你在一个函数中<span style="font-family:Calibri;">alloc</span>生成了一个对象，且这个对象只在这个函数中被使用，那么你必须在这个函数中调用<span style="font-family:Calibri;">release</span>或<span style="font-family:Calibri;">autorelease</span>。如果你在一个<span style="font-family:Calibri;">class</span>的某个方法中<span style="font-family:Calibri;">alloc</span>一个成员对象，且没有调用<span style="font-family:Calibri;">autorelease</span>，那么你需要在这个类的<span style="font-family:Calibri;">dealloc</span>方法中调用<span style="font-family:Calibri;">release</span>；如果调用了<span style="font-family:Calibri;">autorelease</span>，那么在<span style="font-family:Calibri;">dealloc</span>方法中什么都不需要做。</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">1.2</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;除了<span style="font-family:Calibri;">alloc</span>、<span style="font-family:Calibri;">new</span>或<span style="font-family:Calibri;">copy</span>之外的方法创建的对象都被声明了<span style="font-family:Calibri;">autorelease</span>。</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">1.3</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;谁<span style="font-family:Calibri;">retain</span>，谁<span style="font-family:Calibri;">release</span>。只要你调用了<span style="font-family:Calibri;">retain</span>，无论这个对象是如何生成的，你都要调用<span style="font-family:Calibri;">release</span>。有时候你的代码中明明没有<span style="font-family:Calibri;">retain</span>，可是系统会在默认实现中加入<span style="font-family:Calibri;">retain</span>。不知道为什么苹果公司的文档没有强调这个非常重要的一点，请参考范式<span style="font-family:Calibri;">2.7</span>和第三章。</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">2</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;范式。<br> 范式就是模板，就是依葫芦画瓢。由于不同人有不同的理解和习惯，我总结的范式不一定适合所有人，但我能保证照着这样做不会出问题。</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">2.1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;创建一个对象。</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">ClassA *obj1 = [[ClassA alloc] init];</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">2.2</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;创建一个<span style="font-family:Calibri;">autorelease</span>的对象。</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">ClassA *obj1 = [[[ClassA alloc] init] autorelease];</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">2.3</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family:Calibri;">Release</span>一个对象后，立即把指针清空。（顺便说一句，<span style="font-family:Calibri;">release</span>一个空指针是合法的，但不会发生任何事情）</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">[obj1 release];</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">obj1 = nil;</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="color:rgb(255,0,0);"><span style="font-family:Calibri;">2.4</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;指针赋值给另一个指针。</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;color:rgb(255,0,0);">ClassA *obj2 = obj1;</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;color:rgb(255,0,0);">[obj2 retain];</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;color:rgb(255,0,0);">//do something</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;color:rgb(255,0,0);">[obj2 release];</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;color:rgb(255,0,0);">obj2 = nil;</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">2.5</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在一个函数中创建并返回对象，需要把这个对象设置为<span style="font-family:Calibri;">autorelease</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">ClassA *Func1()</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">{</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;ClassA *obj = [[[ClassA alloc]init]autorelease];</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;return obj;</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">}</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">2.6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在子类的<span style="font-family:Calibri;">dealloc</span>方法中调用基类的<span style="font-family:Calibri;">dealloc</span>方法</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">-(void) dealloc</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">{</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;…</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[super dealloc];</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">}</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">2.7</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在一个<span style="font-family:Calibri;">class</span>中创建和使用<span style="font-family:Calibri;">property</span>。</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">2.7.1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;声明一个成员变量。</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">ClassB *objB;</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">2.7.2</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;声明<span style="font-family:Calibri;">property</span>，加上<span style="font-family:Calibri;">retain</span>参数。</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">@property (retain) ClassB* objB;</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">2.7.3</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;定义<span style="font-family:Calibri;">property</span>。（<span style="font-family:Calibri;">property</span>的默认实现请看第三章）</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">@synthesize objB;</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">2.7.4</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;除了<span style="font-family:Calibri;">dealloc</span>方法以外，始终用<span style="font-family:Calibri;">.</span>操作符的方式来调用<span style="font-family:Calibri;">property</span>。</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">self.objB&nbsp;</span>或者<span style="font-family:Calibri;">objA.objB</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">2.7.5</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在<span style="font-family:Calibri;">dealloc</span>方法中<span style="font-family:Calibri;">release</span>这个成员变量。</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">[objB release];</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">示例代码如下（详细代码请参考附件中的<span style="font-family:Calibri;">memman-property.m</span>，你需要特别留意对象是在何时被销毁的。）：</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">@interface ClassA : NSObject</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">{</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ClassB* objB;</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">}</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">@property (retain) ClassB* objB;</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">@end</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">@implementation ClassA</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">@synthesize objB;</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">-(void) dealloc</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">{</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[objB release];</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[super dealloc];</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">}</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">@end</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">2.7.6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;给这个<span style="font-family:Calibri;">property</span>赋值时，有手动<span style="font-family:Calibri;">release</span>和<span style="font-family:Calibri;">autorelease</span>两种方式。</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">void funcNoAutorelease()</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">{</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ClassB *objB1 = [[ClassB alloc]init];</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ClassA *objA = [[ClassA alloc]init];</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;objA.objB = objB1;</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[objB1 release];</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[objA release];</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">}</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">void funcAutorelease()</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">{</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ClassB *objB1 = [[[ClassB alloc]init] autorelease];</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ClassA *objA = [[[ClassA alloc]init] autorelease];</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;objA.objB = objB1;</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">}</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="color:rgb(255,0,0);">三<strong><span style="font-family:Calibri;">&nbsp;@property (retain)</span>和<span style="font-family:Calibri;">@synthesize</span>的默认实现</strong></span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">在这里解释一下<span style="font-family:Calibri;">@property (retain) ClassB* objB;</span>和<span style="font-family:Calibri;">@synthesize objB;</span>背后到底发生了什么<span style="font-family:Calibri;">(retain property</span>的默认实现<span style="font-family:Calibri;">)</span>。<span style="color:rgb(255,0,0);"><span style="font-family:Calibri;">property</span>实际上是<span style="font-family:Calibri;">getter</span>和</span><span style="font-family:Calibri;"><span style="color:rgb(255,0,0);">sette</span>r</span>，针对有<span style="font-family:Calibri;">retain</span>参数的<span style="font-family:Calibri;">property</span>，背后的实现如下（请参考附件中的<span style="font-family:Calibri;">memman-getter-setter.m</span>，你会发现，结果和<span style="font-family:Calibri;">memman-property.m</span>一样）：</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">@interface ClassA : NSObject</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">{</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ClassB *objB;</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">}</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">-(ClassB *) getObjB;</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">-(void) setObjB:(ClassB *) value;</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">@end</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">@implementation ClassA</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">-(ClassB*) getObjB</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">{</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return objB;</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">}</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">-(void) setObjB:(ClassB*) value</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">{</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (objB != value)</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[objB release];</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;objB = [value&nbsp;<strong><span style="color:rgb(255,0,0);">retain</span></strong>];</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">}</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">在<span style="font-family:Calibri;">setObjB</span>中，如果新设定的值和原值不同的话，必须要把原值对象<span style="font-family:Calibri;">release</span>一次，这样才能保证<span style="font-family:Calibri;">retain count</span>是正确的。</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">由于我们在<span style="font-family:Calibri;">class</span>内部<span style="font-family:Calibri;">retain</span>了一次（虽然是默认实现的），所以我们要在<span style="font-family:Calibri;">dealloc</span>方法中<span style="font-family:Calibri;">release</span>这个成员变量。</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">-(void) dealloc</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">{</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[objB release];</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[super dealloc];</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">}</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">四<span style="font-family:Calibri;">&nbsp;</span>系统自动创建新的<span style="font-family:Calibri;">autorelease pool</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">在生成新的<span style="font-family:Calibri;">Run Loop</span>的时候，系统会自动创建新的<span style="font-family:Calibri;">autorelease pool</span>（非常感谢网友<span style="font-family:Calibri;">hhyytt</span>和<span style="font-family:Calibri;">neogui</span>的提醒）。注意，此处不同于<span style="font-family:Calibri;">xcode</span>在新建项目时自动生成的代码中加入的<span style="font-family:Calibri;">autorelease pool</span>，<span style="font-family:Calibri;">xcode</span>生成的代码可以被删除，但系统自动创建的新的<span style="font-family:Calibri;">autorelease pool</span>是无法删除的（对于无<span style="font-family:Calibri;">Garbage Collection</span>的环境来说）。<span style="font-family:Calibri;">Objective-C</span>没有给出实现代码，官方文档也没有说明，但我们可以通过小程序来证明。</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">在这个小程序中，我们先生成了一个<span style="font-family:Calibri;">autorelease pool</span>，然后生成一个<span style="font-family:Calibri;">autorelease</span>的<span style="font-family:Calibri;">ClassA</span>的实例，再在一个新的<span style="font-family:Calibri;">run loop</span>中生成一个<span style="font-family:Calibri;">autorelease</span>的<span style="font-family:Calibri;">ClassB</span>的对象（注意，我们并没有手动在新<span style="font-family:Calibri;">run loop</span>中生成<span style="font-family:Calibri;">autorelease pool</span>）。精简的示例代码如下，详细代码请见附件中的<span style="font-family:Calibri;">memman-run-loop-with-pool.m</span>。</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">int main(int argc, char**argv)&nbsp;</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">{</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NSLog(@"create an autorelasePool\n");</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];&nbsp;&nbsp;&nbsp;</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NSLog(@"create an instance of ClassA and autorelease\n");</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ClassA *obj1 = [[[ClassA alloc] init] autorelease];</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NSDate *now = [[NSDate alloc] init];</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NSTimer *timer = [[NSTimer alloc] initWithFireDate:now</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;interval:0.0</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;target:obj1</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;selector:@selector(createClassB)</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;userInfo:nil</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;repeats:NO];</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NSRunLoop *runLoop = [NSRunLoop currentRunLoop];</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[runLoop addTimer:timer forMode:NSDefaultRunLoopMode];</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[timer release];</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[now release];</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[runLoop run]; //</span>在新<span style="font-family:Calibri;">loop</span>中调用一函数，生成<span style="font-family:Calibri;">ClassB</span>的<span style="font-family:Calibri;">autorelease</span>实例</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NSLog(@"releasing autorelasePool\n");</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[pool release];</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NSLog(@"autorelasePool is released\n");</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 0;</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">}&nbsp;</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">输出如下：</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">create an autorelasePool</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">create an instance of ClassA and autorelease</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">create an instance of ClassB and autorelease</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">ClassB destroyed</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">releasing autorelasePool</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">ClassA destroyed</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">autorelasePool is released</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">注意在我们销毁<span style="font-family:Calibri;">autorelease pool</span>之前，<span style="font-family:Calibri;">ClassB</span>的<span style="font-family:Calibri;">autorelease</span>实例就已经被销毁了。</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">有人可能会说，这并不能说明新的<span style="font-family:Calibri;">run loop</span>自动生成了一个新的<span style="font-family:Calibri;">autorelease pool</span>，说不定还只是用了老的<span style="font-family:Calibri;">autorelease pool</span>，只不过后来<span style="font-family:Calibri;">drain</span>了一次而已。我们可以在<span style="font-family:Calibri;">main</span>函数中不生成<span style="font-family:Calibri;">autorelease pool</span>。精简的示例代码如下，详细代码请见附件中的<span style="font-family:Calibri;">memman-run-loop-without-pool.m</span>。</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">int main(int argc, char**argv)&nbsp;</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">{</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NSLog(@"No autorelasePool created\n");</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NSLog(@"create an instance of ClassA\n");</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ClassA *obj1 = [[ClassA alloc] init];</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NSDate *now = [[NSDate alloc] init];</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NSTimer *timer = [[NSTimer alloc] initWithFireDate:now</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;interval:0.0</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;target:obj1</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;selector:@selector(createClassB)</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;userInfo:nil</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;repeats:NO];</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NSRunLoop *runLoop = [NSRunLoop currentRunLoop];</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[runLoop addTimer:timer forMode:NSDefaultRunLoopMode];</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[timer release];</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[now release];</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[runLoop run]; //</span>在新<span style="font-family:Calibri;">loop</span>中调用一函数，生成<span style="font-family:Calibri;">ClassB</span>的<span style="font-family:Calibri;">autorelease</span>实例</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NSLog(@"Manually release the instance of ClassA\n");</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[obj1 release];</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 0;</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">}&nbsp;</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">输出如下：</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">No autorelasePool created</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">create an instance of ClassA</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">create an instance of ClassB and autorelease</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">ClassB destroyed</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">Manually release the instance of ClassA</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">ClassA destroyed</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">我们可以看出来，我们并没有创建任何<span style="font-family:Calibri;">autorelease pool</span>，可是<span style="font-family:Calibri;">ClassB</span>的实例依然被自动销毁了，这说明新的<span style="font-family:Calibri;">run loop</span>自动创建了一个<span style="font-family:Calibri;">autorelease pool</span>，这个<span style="font-family:Calibri;">pool</span>在新的<span style="font-family:Calibri;">run loop</span>结束的时候会销毁自己（并自动<span style="font-family:Calibri;">release</span>所包含的对象）。</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">补充说明</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">在研究<span style="font-family:Calibri;">retain count</span>的时候，我不建议用<span style="font-family:Calibri;">NSString</span>。因为在下面的语句中，</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">NSString *str1 = @”c*****tant string”;</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">str1</span>的<span style="font-family:Calibri;">retain count</span>是个很大的数字。<span style="font-family:Calibri;">Objective-C</span>对常量字符串做了特殊处理。</p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">当然，如果你这样创建<span style="font-family:Calibri;">NSString</span>，得到的<span style="font-family:Calibri;">retain count</span>依然为<span style="font-family:Calibri;">1</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">&nbsp;</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">NSString *str2 = [NSString stringWithFormat:@”123”];</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">涉及的示例程序代码（已去除隐藏，觉得有用的话请顶一下此文）：<a href="http://files.cnblogs.com/VinceYuan/objective-c-memman.zip" rel="nofollow" style="color:rgb(68,68,68);">http://files.cnblogs.com/VinceYuan/objective-c-memman.zip</a><br></span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;">&nbsp;</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;"><a href="http://www.cocoachina.com/bbs/read.php?tid-15963.html.com%E5%8E%9F" rel="nofollow" style="color:rgb(68,68,68);">http://www.cocoachina.com/bbs/read.php?tid-15963.html.com原</a>文链接</span></p> 
   <p align="left" style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-family:Calibri;"><br></span></p> 
   <p align="left" style="line-height:1.5;"><span><font color="#444444"><span style="font-size:12px;">本文转自编程小翁博客园博客，原文链接：http://www.cnblogs.com/wengzilin/archive/2012/06/29/2569701.html，如需转载请自行联系原作者</span></font><br></span></p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
