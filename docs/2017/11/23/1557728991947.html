<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>WCF分布式开发步步为赢(2)自定义托管宿主WCF解决方案开发配置过程详解 « NotBeCN</title>
  <meta name="description" content="                 上一节《    WCF分布式框架基础概念》我们介绍了WCF服务的概念和通信框架模型，并给出了基于自定义托管服务的WCF程序的实现代码。考虑到WCF分布式开发项目中关于托管宿主服务配置和客户端添加引用。两个环节最容易出错。对于大部分想学习WCF分布式开发的人来说，成功开发、配置、部...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/23/1557728991947.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">WCF分布式开发步步为赢(2)自定义托管宿主WCF解决方案开发配置过程详解</h1>
    <p class="post-meta">Nov 23, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    上一节《
    <a id="homepage1_HomePageDays_DaysList_ctl00_DayItem_DayList_ctl01_TitleUrl" href="http://frankxulei.blog.51cto.com/1596834/320400" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><font color="#1d58d1">WCF分布式框架基础概念</font></a>》我们介绍了WCF服务的概念和通信框架模型，并给出了基于自定义托管服务的WCF程序的实现代码。考虑到WCF分布式开发项目中关于托管宿主服务配置和客户端添加引用。两个环节最容易出错。对于大部分想学习WCF分布式开发的人来说，成功开发、配置、部署第一个自己的WCF服务困难重重。很多资料都介绍了WCF的基本概念。但是对于实际的项目开发过程介绍粗略，给入门者带来诸多不便。今天我们就来补充一节WCF分布式开发一个完整解决方案的开发和配置过程。本节基本结构是：首先介绍【1】WCF服务解决方案的项目组成【2】WCF服务的开发和配置过程，【3】自定义宿主的开发和配置过程【4】客户端的服务引用和配置过程。【总结】算是为各位WCF分布式技术开发的爱好者，提供的一个开发参考。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    【1】WCF服务解决方案的项目组成：
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    1.1】WCF服务：
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp; 通常来说，WCF服务由三个部分构成：
   </div> 
   <ul style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <li> 
     <div>
      服务类：包含服务契约、操作契约和数据契约的定义和实现；
     </div> </li> 
    <li> 
     <div>
      宿主：一种应用程序域和进程，服务将在该环境中运行；
     </div> </li> 
    <li> 
     <div>
      终结点：由客户端用于访问服务。
     </div> </li> 
   </ul>
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    我们这里的解决方案包括服务类项目、托管宿主、和简单的客户端程序，结构如图：
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <img alt="" src="http://blog.51cto.com/attachment/201005/201005241274699834671.gif" style="border:none;">
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    1.2】客户端应用程序：
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp;&nbsp; 上一节我们介绍了WCF的基本概念，WCF基本通信机制是基于SOAP消息，SOAP消息基于XML语言，因此WCF应用程序可与运行于各种上下文环境的其他进程进行通信，当然也支持跨系统、跨平台的应用程序之间的数据交互。基于WCF构建的分布式应用程序可与下列所有程序进行交互：
   </div> 
   <ul style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <li> 
     <div>
      同一 Windows 计算机上不同进程中的WCF应用程序。
     </div> </li> 
    <li> 
     <div>
      另一 Windows 计算机上的WCF应用程序。
     </div> </li> 
    <li> 
     <div>
      基于其他技术构建的应用程序，如基于 Java 2 企业版 (J2EE) 构建的、支持标准 Web 服务的应用程序服务器。这些应用程序可以运行在 Windows 计算机上，也可以运行在其他操作系统（如 Sun Solaris、IBM 的 z/OS 或 Linux）上。
     </div> </li> 
   </ul>
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp; 因此可以作为客户端的应用程序，并不限制其类型，只要可以解析基于XML的SOAP消息，都可以与WCF的服务端进行通信。.NET平台上我们可以创建控制台应用程序、WinForm、Windows服务、ASP.NET应用程序等，来访问和调用WCF服务。下面我们就来具体介绍自定义托管服务，WCF解决方案的开发配置的详细过程。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    【2】WCF服务类的开发过程：
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp; 要创建WCF服务解决方案，首先应该定义服务类，并编写服务类的相关的代码。我们这里把服务类创建类单独的类库项目，托管宿主程序项目引用服务类的程序集。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    2.0】创建WCF服务类库项目：
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp; WCF服务类库项目的创建非常简单，Visual Studio 2008为我们提供了便捷的方式，选择新建项目，选择--WCF服务类库项目项目，输入项目名称，选择保存位置就可以。如图：
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <img alt="" src="http://blog.51cto.com/attachment/201005/201005241274699861906.gif" style="border:none;">
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp;&nbsp; 当然我们也可以建立空项目，但是程序集引用等操作要手动完整，过程相对复杂。这里我们选择的使用创建向导方式。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font>System.ServiceModel和System.Runtime.Serialization程序集对WCF服务至关重要，因为后续服务契约、操作契约和数据契约等特性定义都在这两个程序集中。我们在新建的项目引用中可以看到：</font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <img alt="" src="http://blog.51cto.com/attachment/201005/201005241274699884250.gif" style="border:none;">
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp; 使用WCF契约相关的属性，必须显示引用这两个命名空间.语句如下：
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font>using System.ServiceModel;<br> using System.Runtime.Serialization;</font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp; 如果不添加命名空间引用程序集，编写的代码会出现错误，无法通过。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    2.1】服务契约和操作契约：
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp; WCF服务类库创建完毕后，我们可以来进行代码的实际编写。我们知道，每个WCF服务类均需实现一些方法，以供其客户端使用。服务类的创建者通过将这些方法包含在某个服务契约中，来决定将哪些方法公开为客户可调用的操作。服务契约就是显示指定的服务必须实现的用户可以使用的操作。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp; ServiceContract 属性以及 WCF使用的所有其他属性均在 System.ServiceModel 命名空间中定义，类声明使用 using 语句来引用该命名空间。服务类中可被客户端调用的每个方法都必须使用名为 OperationContract 的另一个属性加以标记。服务类中带有前置 OperationContract 属性的所有方法都将自动被WCF公开为 SOAP 可调用操作。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp; WCF中最基本的属性是 ServiceContract。实际上，WCF服务类本身就是标记有 ServiceContract 属性的类或者是实现了标记有该属性的接口的类。我们使用的还是上次的代码：
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp; 首先是服务契约
    <font>IWCFService，定义了连个操作，添加<font>[OperationContract]</font>属性标记</font>：
   </div> 
   <div class="cnblogs_code" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">1.服务契约</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;[ServiceContract(Namespace&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">http://www.cnblogs.com/frank_xl/</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">)]<br> &nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">public</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">interface</span>
    <span style="color:rgb(0,0,0);">&nbsp;IWCFService<br> &nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">操作契约</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[OperationContract]<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">string</span>
    <span style="color:rgb(0,0,0);">&nbsp;SayHello(</span>
    <span style="color:rgb(0,0,255);">string</span>
    <span style="color:rgb(0,0,0);">&nbsp;name);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">操作契约</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[OperationContract]<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">string</span>
    <span style="color:rgb(0,0,0);">&nbsp;SayHelloToUser(User&nbsp;user);<br><br> &nbsp;&nbsp;&nbsp;&nbsp;}</span> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp; 其次定义WCF服务类，继承服务契约，实现服务契约中声明的操作，具体代码如下：
   </div> 
   <div class="cnblogs_code" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">2.服务类，继承接口。实现服务契约定义的操作</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">public</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">class</span>
    <span style="color:rgb(0,0,0);">&nbsp;WCFService&nbsp;:&nbsp;IWCFService<br> &nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">实现接口定义的方法</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">public</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">string</span>
    <span style="color:rgb(0,0,0);">&nbsp;SayHello(</span>
    <span style="color:rgb(0,0,255);">string</span>
    <span style="color:rgb(0,0,0);">&nbsp;name)<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Console.WriteLine(</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">Hello!&nbsp;{0},Using&nbsp;string&nbsp;<img alt="" src="http://www.cnblogs.com/Images/dot.gif" style="border:none;"></span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">,&nbsp;name);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">return</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">Hello!&nbsp;</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,0);">+</span>
    <span style="color:rgb(0,0,0);">&nbsp;name;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">实现接口定义的方法</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">public</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">string</span>
    <span style="color:rgb(0,0,0);">&nbsp;SayHelloToUser(User&nbsp;user)<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Console.WriteLine(</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">Hello!&nbsp;{0}&nbsp;&nbsp;&nbsp;&nbsp;{1},Using&nbsp;DataContract&nbsp;<img alt="" src="http://www.cnblogs.com/Images/dot.gif" style="border:none;"></span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">,&nbsp;user.FirstName,&nbsp;user.LastName);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">return</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">Hello!&nbsp;</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,0);">+</span>
    <span style="color:rgb(0,0,0);">&nbsp;user.FirstName&nbsp;</span>
    <span style="color:rgb(0,0,0);">+</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">&nbsp;</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,0);">+</span>
    <span style="color:rgb(0,0,0);">&nbsp;user.LastName;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br> &nbsp;&nbsp;&nbsp;&nbsp;}</span> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp; 服务类里给出了服务契约里声明的方法，也就是操作，这里都给出了具体的实现。SayHello()和
    <font>SayHelloToUser(User user)</font>方法都将自动被WCF公开为 SOAP 可调用操作。客户端可以调用相应的操作。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    2.2】数据契约：
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp; 数据契约定义类型如何转换为适合标准信息格式，即“序列化”过程。实际上，数据契约是控制数据如何序列化的一种机制。&nbsp;在&nbsp;WCF 服务类中，数据契约使用 DataContract 属性来定义。标记有 DataContract 的数据类、结构或其他类型都可以拥有一个或多个带有前置 DataMember 属性的成员，指示该成员必须被包含在此类型的序列化值中。不显示指定的成员不被包含在序列化数据中。这里我们定义的数据类，包含三个成员，代码如下：
   </div> 
   <div class="cnblogs_code" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">3.数据契约</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">序列化为XML，作为元数据封装到服务里</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;[DataContract]<br> &nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">public</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">struct</span>
    <span style="color:rgb(0,0,0);">&nbsp;User<br> &nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[DataMember]<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">public</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">string</span>
    <span style="color:rgb(0,0,0);">&nbsp;FirstName;<br><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">public</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">string</span>
    <span style="color:rgb(0,0,0);">&nbsp;MiddleName;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">不会被传递</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[DataMember]<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">public</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">string</span>
    <span style="color:rgb(0,0,0);">&nbsp;LastName;<br> &nbsp;&nbsp;&nbsp;&nbsp;}</span> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp;&nbsp; 由于是类库项目，所以主要涉及的内容是契约的定义和服务类的实现过程。配置的关键部分也是契约属性的标记。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    不涉及配置文件的使用和定制，如果是应用程序，需要配置对应的Config文件。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    【3】自定义宿主的开发和配置过程：
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp; 我们这里使用的控制台程序为托管宿主，我们这里讲解托管宿主的代码编写和配置文件的设置过程。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    3.1】托管宿主程序的创建：
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp; 使用VS2008新建控制台应用程序，非常简单，选择新建项目-控制台程序，即可。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <img alt="" src="http://blog.51cto.com/attachment/201005/201005241274699916343.gif" style="border:none;">
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    3.2】托管宿主代码编写：
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp; 这里要添加对WCF服务类库项目的引用，另外要引用ServiceModel程序集。
    <font>ServiceHost</font>类位于ServiceModel命名空间下。这里比较重要的步骤就是，定义一个
    <font>ServiceHost实例，定义地址，定义终结点使用ABC地址、契约、绑定。</font> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    代码如下：
   </div> 
   <div class="cnblogs_code" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">反射方式创建服务实例，<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">Using方式生命实例，可以在对象生命周期结束时候，释放非托管资源</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">using</span>
    <span style="color:rgb(0,0,0);">&nbsp;(ServiceHost&nbsp;host&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">new</span>
    <span style="color:rgb(0,0,0);">&nbsp;ServiceHost(</span>
    <span style="color:rgb(0,0,255);">typeof</span>
    <span style="color:rgb(0,0,0);">(WCFService.WCFService)))<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">相同的服务注册多个基地址<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">添加服务和URI，用户资源标识符</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Uri&nbsp;tcpAddress&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">new</span>
    <span style="color:rgb(0,0,0);">&nbsp;Uri(</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">net.tcp://localhost:8001/WCFService</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Uri&nbsp;httpAddress&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">new</span>
    <span style="color:rgb(0,0,0);">&nbsp;Uri(</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">http://localhost:8002/WCFService</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Uri&nbsp;pipeAddress&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">new</span>
    <span style="color:rgb(0,0,0);">&nbsp;Uri(</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">net.pipe://localhost:8002/WCFService</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;host.AddServiceEndpoint(</span>
    <span style="color:rgb(0,0,255);">typeof</span>
    <span style="color:rgb(0,0,0);">(WCFService.IWCFService),&nbsp;</span>
    <span style="color:rgb(0,0,255);">new</span>
    <span style="color:rgb(0,0,0);">&nbsp;NetTcpBinding()&nbsp;,&nbsp;tcpAddress);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;host.AddServiceEndpoint(</span>
    <span style="color:rgb(0,0,255);">typeof</span>
    <span style="color:rgb(0,0,0);">(WCFService.IWCFService),&nbsp;</span>
    <span style="color:rgb(0,0,255);">new</span>
    <span style="color:rgb(0,0,0);">&nbsp;WSHttpBinding(),&nbsp;httpAddress);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;host.AddServiceEndpoint(</span>
    <span style="color:rgb(0,0,255);">typeof</span>
    <span style="color:rgb(0,0,0);">(WCFService.IWCFService),&nbsp;</span>
    <span style="color:rgb(0,0,255);">new</span>
    <span style="color:rgb(0,0,0);">&nbsp;NetNamedPipeBinding(),&nbsp;pipeAddress);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">判断是否以及打开连接，如果尚未打开，就打开侦听端口</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">if</span>
    <span style="color:rgb(0,0,0);">&nbsp;(host.State&nbsp;</span>
    <span style="color:rgb(0,0,0);">!=</span>
    <span style="color:rgb(0,0,0);">CommunicationState.Opening)<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;host.Open();<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">显示运行状态</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Console.WriteLine(</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">Host&nbsp;is&nbsp;runing!&nbsp;and&nbsp;state&nbsp;is&nbsp;{0}</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">,host.State);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">等待输入即停止服务</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Console.Read();<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;值得注意的是
    <font>定义终结点的代码可以由配置文件的定制来实现。<font>&nbsp;if (host.State !=CommunicationState.Opening)语句是为了判断是否以及打开连接，如果尚未打开，host.Open(); 就打开侦听端口。<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font>Console.Read()语句是阻塞进程，使得宿主程序可以一直运行下去。直到用户输入数据。</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font></font> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    3.3】配置文件的定制：
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp; 要使WCF宿主程序能够正确运行，还需要编辑配置文件信息。所有的WCF服务相关的配置信息都处于app.config文件的
    <font>&nbsp; &lt;system.serviceModel&gt;</font>节点内。下面我们就来详细介绍一下详细的配置过程。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp; 3.3.1【服务结点配置】
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;service behaviorConfiguration="WCFService.WCFServiceBehavior" name="WCFService.WCFService"&gt;</font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp; 指定公布服务的类型和行为。服务的行为要在配置文件中给出，我们下面会给出详细的说明。这里的WCF服务就是我们实现服务契约的WCF服务的类名WCFService。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp; 服务的终结点包含ABC，地址、绑定（通信协议，其实很拗口）、契约三个部分。地址包括：通信协议、机器地址、端口、服务名。契约就是服务契约。我们这里配置了连个终结点，分别使用HTTP协议和TCP协议。端口分别是8001和8002。服务地址必须不同，所以设置了两个不同的端口。具体的配置代码如下：
   </div> 
   <div class="cnblogs_code" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">endpoint&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;address</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">http://localhost:8001/WCFService</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binding</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">wsHttpBinding</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;contract</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">WCFService.IWCFService</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;/</span>
    <span style="color:rgb(0,0,0);">endpoint</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br></span>
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">endpoint&nbsp;adress</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">net.tcp://localhost:8002/WCFService</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binding</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">netTcpBinding</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;contract</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">WCFService.IWCFService</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br></span>
    <span style="color:rgb(0,0,0);">&lt;/</span>
    <span style="color:rgb(0,0,0);">endpoint</span>
    <span style="color:rgb(0,0,0);">&gt;</span> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp; 如果终结点里不设置地址，我们必须配置文件里给出相应的基地址配置，基地址包括：通信协议（绑定）、机器名或IP、端口。这样WCF服务的托管宿主启动后，状态才能成功打开。配置信息如下：
   </div> 
   <div class="cnblogs_code" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">host</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">baseAddresses</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">add&nbsp;baseAddress</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">http://localhost:8001/</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">/&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">add&nbsp;baseAddress</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">net.tcp://localhost:8002/</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">/&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;/</span>
    <span style="color:rgb(0,0,0);">baseAddresses</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br></span>
    <span style="color:rgb(0,0,0);">&lt;/</span>
    <span style="color:rgb(0,0,0);">host</span>
    <span style="color:rgb(0,0,0);">&gt;</span> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp; 3.3.2【原数据终结点配置】
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp; 如果我们希望WCF可以被客户端查找和引用，我们就要设置相应的元素据交换节点，来约束WCF服务的元数据交换行为。绑定（通信协议）和我们上面设置的服务终结点对应，这样客户端可以以不同的方式获得元素据，数据交换契约为
    <font>IMetadataExchange，</font>具体代码如下：
   </div> 
   <div class="cnblogs_code" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">endpoint&nbsp;address</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">mex</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;binding</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">mexHttpBinding</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;contract</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">IMetadataExchange</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,0);">/&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">endpoint&nbsp;address</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">mex</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;binding</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">mexTcpBinding</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;contract</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">IMetadataExchange</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,0);">/&gt;</span> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;这样客户端可以通过服务地址获得我们公布的WCF服务的元素据信息，反序列化创建本地的对应的数据类、服务等类。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp; 3.3.3【行为结点配置】
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp; 另外我们可以在这里配置服务的行文，在配置文件里的&lt;
    <font>serviceBehaviors&gt;</font>节点下。定义行为名称，方便服务引用。是否可以通过
    <font>httpGet方式获取</font>服务元素据，是否显示服务异常的详细信息，在这里都可以进行设置。
   </div> 
   <div class="cnblogs_code" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">behaviors</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">serviceBehaviors</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">behavior&nbsp;name</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">WCFService.WCFServiceBehavior</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">serviceMetadata&nbsp;httpGetEnabled</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">true</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,0);">/&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">serviceDebug&nbsp;includeExceptionDetailInFaults</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">false</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,0);">/&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;/</span>
    <span style="color:rgb(0,0,0);">behavior</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;/</span>
    <span style="color:rgb(0,0,0);">serviceBehaviors</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;/</span>
    <span style="color:rgb(0,0,0);">behaviors</span>
    <span style="color:rgb(0,0,0);">&gt;</span> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp; 这里定义的服务行为就是在上面被服务节点引用的，记住名称一定要匹配。否则会出现找不到服务行为的异常，程序将无法运行。以上的方式可以通过编程方式实现，但是相对来说配置文件使用简单，编程方式复杂，需要代码，但是功能强大，我们可以编程动态控制服务运行的状态。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp; 配置完全后就可以编译，运行托管服务宿主程序。托管宿主启动正常：
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <img alt="" src="http://blog.51cto.com/attachment/201005/201005241274699947296.gif" style="border:none;">
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    【4】客户端的服务引用、配置和开发过程：
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp; 服务类和服务宿主已经配置完毕，下面我们来讲述客户端添加WCF服务的引用、配置和服务调用过程。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    首先要运行宿主程序，这样才能在客户端添加服务引用，从元数据获取服务类的相关信息，生成本地类。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    4.1】添加WCF服务引用：
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp; 服务浏览器，单击客户端项目，添加Services Reference.在弹出的窗口地址里输入服务的基地址，首先查找TCP服务。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    保持地址和配置文件里服务的基地址相同，：查找成功后的窗口如下：
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <img alt="" src="http://blog.51cto.com/attachment/201005/201005241274699971078.gif" style="border:none;">
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp; 我们可以看到WCF服务类公布的操作，输入命名空间的名字为
    <font>ServiceReferenceTcp。同样的方式添加对HTTP服务的引用。添加成功后我们可以查看所有文件，在客户端项目的服务引用的窗口看到所有的服务引用的文件信息如图：</font> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font><img alt="" src="http://blog.51cto.com/attachment/201005/201005241274699996343.gif" style="border:none;"></font>
   </div> 
   <font style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> </font>
   <div>
    证明我们添加WCF服务成功。客户端app.config文件里会生成相应的服务代理的相关信息，包括客户端终结点的信息：
   </div> 
   <div class="cnblogs_code"> 
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">client</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">endpoint&nbsp;address</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">http://localhost:8001/WCFService</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;binding</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">wsHttpBinding</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bindingConfiguration</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">WSHttpBinding_IWCFService</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;contract</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">ServiceReferenceTcp.IWCFService</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">WSHttpBinding_IWCFService</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">identity</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">userPrincipalName&nbsp;value</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">FRANK\Administrator</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,0);">/&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;/</span>
    <span style="color:rgb(0,0,0);">identity</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;/</span>
    <span style="color:rgb(0,0,0);">endpoint</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">endpoint&nbsp;address</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">net.tcp://localhost:8002/WCFService</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;binding</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">netTcpBinding</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bindingConfiguration</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">NetTcpBinding_IWCFService</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;contract</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">ServiceReferenceTcp.IWCFService</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">NetTcpBinding_IWCFService</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">identity</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">userPrincipalName&nbsp;value</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">FRANK\Administrator</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,0);">/&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;/</span>
    <span style="color:rgb(0,0,0);">identity</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;/</span>
    <span style="color:rgb(0,0,0);">endpoint</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">endpoint&nbsp;address</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">http://localhost:8001/WCFService</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;binding</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">wsHttpBinding</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bindingConfiguration</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">WSHttpBinding_IWCFService1</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;contract</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">ServiceReferenceHttp.IWCFService</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">WSHttpBinding_IWCFService1</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">identity</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">userPrincipalName&nbsp;value</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">FRANK\Administrator</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,0);">/&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;/</span>
    <span style="color:rgb(0,0,0);">identity</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;/</span>
    <span style="color:rgb(0,0,0);">endpoint</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">endpoint&nbsp;address</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">net.tcp://localhost:8002/WCFService</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;binding</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">netTcpBinding</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bindingConfiguration</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">NetTcpBinding_IWCFService1</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;contract</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">ServiceReferenceHttp.IWCFService</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">NetTcpBinding_IWCFService1</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">identity</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;</span>
    <span style="color:rgb(0,0,0);">userPrincipalName&nbsp;value</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">FRANK\Administrator</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,0);">/&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;/</span>
    <span style="color:rgb(0,0,0);">identity</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;/</span>
    <span style="color:rgb(0,0,0);">endpoint</span>
    <span style="color:rgb(0,0,0);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,0);">&lt;/</span>
    <span style="color:rgb(0,0,0);">client</span>
    <span style="color:rgb(0,0,0);">&gt;</span> 
   </div> 
   <div>
    &nbsp;&nbsp; 客户端的配置方式和宿主托管方式非常类似，同样包括地址、绑定、契约等信息。
   </div> 
   <div>
    4.2】调用服务：
   </div> 
   <div>
    &nbsp;&nbsp;&nbsp;&nbsp; 要调用相应的服务，需要实例化服务代理类的实例，首先添加命名空间的引用
    <font>using ServiceReferenceHttp;<br> using ServiceReferenceTcp;</font>这样可以使用本地反序列化生成的类和其他配置的信息。我们分别实例化HTTP和TCP代理的类，非别调用服务的不同操作，USER的实例也分别为不同的命名空间中的类型，需要分别指定命名空间。
   </div> 
   <div>
    具体测试代码如下：
   </div> 
   <div>
    &nbsp;
   </div> 
   <div>
    &nbsp;
   </div> 
   <div class="cnblogs_code"> 
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">HTTP&nbsp;WSHttpBinding_IWCFService1</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ServiceReferenceHttp.WCFServiceClient&nbsp;wcfServiceProxyHttp&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">new</span>
    <span style="color:rgb(0,0,0);">&nbsp;ServiceReferenceHttp.WCFServiceClient(</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">WSHttpBinding_IWCFService1</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">通过代理调用SayHello服务</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Console.WriteLine(wcfServiceProxyHttp.SayHello(</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">Frank&nbsp;Xu&nbsp;Lei&nbsp;WSHttpBinding</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">));<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(128,128,128);">///</span>
    <span style="color:rgb(0,128,0);">/通过代理调用调用SayHelloToUser,传递对象</span>
    <span style="color:rgb(128,128,128);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ServiceReferenceHttp.User&nbsp;user&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">new</span>
    <span style="color:rgb(0,0,0);">&nbsp;ServiceReferenceHttp.User();<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;user.FirstName&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">WSHttpBinding</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;user.LastName&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">Frank</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Console.WriteLine(wcfServiceProxyHttp.SayHelloToUser(user));<br><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">TCP&nbsp;NetTcpBinding_IWCFService</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ServiceReferenceTcp.WCFServiceClient&nbsp;wcfServiceProxyTcp&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">new</span>
    <span style="color:rgb(0,0,0);">&nbsp;ServiceReferenceTcp.WCFServiceClient(</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">NetTcpBinding_IWCFService</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">);<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,128,0);">//</span>
    <span style="color:rgb(0,128,0);">通过代理调用SayHello服务</span>
    <span style="color:rgb(0,128,0);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Console.WriteLine(wcfServiceProxyTcp.SayHello(</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">Frank&nbsp;Xu&nbsp;Lei&nbsp;NetTcpBinding</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">));<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(128,128,128);">///</span>
    <span style="color:rgb(0,128,0);">/通过代理调用调用SayHelloToUser,传递对象</span>
    <span style="color:rgb(128,128,128);"><br></span>
    <span style="color:rgb(0,0,0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ServiceReferenceTcp.User&nbsp;userTcp&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">new</span>
    <span style="color:rgb(0,0,0);">&nbsp;ServiceReferenceTcp.User();<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;userTcp.FirstName&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">NetTcpBinding</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;userTcp.LastName&nbsp;</span>
    <span style="color:rgb(0,0,0);">=</span>
    <span style="color:rgb(0,0,0);">&nbsp;</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(128,0,0);">Frank</span>
    <span style="color:rgb(128,0,0);">"</span>
    <span style="color:rgb(0,0,0);">;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Console.WriteLine(wcfServiceProxyTcp.SayHelloToUser(userTcp));<br></span> 
   </div> 
   <div>
    &nbsp; 运行结果如图：
   </div> 
   <div>
    <img alt="" src="http://blog.51cto.com/attachment/201005/201005241274700026609.gif" style="border:none;">
   </div> 
   <div>
    &nbsp;&nbsp; 两者不同的协议服务调用都成功执行，并且返回正确的结果。
   </div> 
   <div>
    【总结】：
   </div> 
   <div>
    &nbsp;&nbsp;&nbsp; 以上就是本节关于自定义托管宿主WCF服务解决方案开发与配置的详细过程，包括服务代码的编写、宿主程序的开发与配置、客户端服务的引用和调用。我们这里托管宿主服务使用了配置文件，来配置WCF服务的信息，这里也可以编码实现。
   </div> 
   <div>
    另外客户端要想通过原数据交换来反序列换生成本地的WCF服务类等相关代码，就需要在托管宿主里配置可以使用的原数据交换节点，这里缺少设置，就会出现获取服务元数据的异常，导致客户端添加服务出错。（最近论文答辩有点忙，所以这个文章更新的比较慢，不好意思）另外给出本文的参考代码：
    <a href="http://files.cnblogs.com/frank_xl/WCFServiceConfigFrankXuLei.rar" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><font color="#1d58d1">/Files/frank_xl/WCFServiceConfigFrankXuLei.rar</font></a> 
   </div> 
   <div>
    希望本篇文章能给大家WCF分布式开发项目的配置带来一些帮助。~
   </div> 
   <div>
    <br>
   </div> 
   <div>
    <br>
   </div> 
   <div>
    <br>
   </div> 
   <div> 
    <div>
     &nbsp;本文转自 frankxulei 51CTO博客，原文链接：http://blog.51cto.com/frankxulei/320404，如需转载请自行联系原作者
    </div> 
    <div>
     <br>
    </div> 
   </div> 
   <div>
    <br>
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
