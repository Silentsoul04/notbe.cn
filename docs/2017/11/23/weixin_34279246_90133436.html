<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>解析如何改善和优化 Web 服务器性能 « NotBeCN</title>
  <meta name="description" content="             Web服务器概述&nbsp; Web系统在现在网络中广泛使用，而Web服务器则是Web系统的一个重要组成部分。完整的Web结构应包括：HTTP协议，Web服务器，通用网关接口CGI、Web应用程序接口、Web浏览器。&nbsp; Web服务器是指驻留在因特网上某种类型计算机的程序。它是在...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/23/weixin_34279246_90133436.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">解析如何改善和优化 Web 服务器性能</h1>
    <p class="post-meta">Nov 23, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <p style="line-height:1.5;font-size:13px;font-family:Verdana, Arial, Helvetica, sans-serif;"><strong>Web服务器概述</strong>&nbsp;<br> Web系统在现在网络中广泛使用，而Web服务器则是Web系统的一个重要组成部分。完整的Web结构应包括：HTTP协议，Web服务器，通用网关接口CGI、Web应用程序接口、Web浏览器。&nbsp;<br> Web服务器是指驻留在因特网上某种类型计算机的程序。它是在网络中信息提供者基干HTTP的为实现信息发布、资料查询、数据处理等诸多应用搭建基本平台的服务器，其主要功能是提供网上信息浏览服务。当Web浏览器（客户端）连到服务器并请求文件时，服务器将处理该请求并将文件发送到该浏览器上，附带的信息会告诉浏览器如何查看该文件（即文件类型）。&nbsp;<br> Web服务器在web页面处理中大致可分为三个步骤：第一步，web浏览器向一个特定的服务器发出Web页面请求；第二步，Web服务器接收到web页面请求后，寻找所请求的web页面，并将所请求的Web页面传送给Web浏览器；第三步，Web服务器接收到所请求的web页面，并将它显示出来。&nbsp;<br> web服务器不仅能够存储信息，还能在用户通过Web浏览器提供的信息的基础上运行脚本和程序。在Web上，常见的大多数表单核搜索引擎上都是用的是CGI脚本。</p> 
   <p style="line-height:1.5;font-size:13px;font-family:Verdana, Arial, Helvetica, sans-serif;"><br> &nbsp;<strong>影响web应用服务器性能的因素</strong>&nbsp;<br> Web服务器的性能就是指一个Web服务器响应用户请求的能力，服务器的性能对于一个Web系统来说至关重要。为了提高Web服务器的性能人们进行了许多尝试，也采用了许多技术和方法，但是<a title="div+css教程" href="http://www.webyuanma.com/" rel="nofollow" style="color:rgb(7,93,179);">div+css教程</a>这些技术和方法往往缺乏适用性。</p> 
   <p style="line-height:1.5;font-size:13px;font-family:Verdana, Arial, Helvetica, sans-serif;"><br> &nbsp;　　通过对前人的研究分析可以发现，在web服务器的优化方而存在这种问题的原因主要有两个：一方面是服务器性能评测造成的，一方面是选用优化方案时考虑不全面造成的。&nbsp;<br> 现行的服务器性能评测工具在对Web服务器进行评测时，其实是由一台或几台计算机模拟客户机，与被测的Web服务器进行通信，它们其实组成的只是一个局域网的环境，这与真正的广域网的环境有一定的差别。</p> 
   <p style="line-height:1.5;font-size:13px;font-family:Verdana, Arial, Helvetica, sans-serif;"><br> &nbsp;　　另外，评测工具在选择网络负载时，虽然已经尽可能的接近真实负载，但是与持续的高频率负载要求仍有差距；再者，在性能测试指标的选择与分析上也不够合理，造成了分析结果不够公正、可靠。而在选用优化Web服务器的方法时，往往只是考虑Web服务器这一个方面，很少结合具体的应用环境。所以就造成了评测结果不够科学，应用环境考虑不够全面，Web服务器性能优化缺乏针对性。因此在具体的应用环境下优化Web服务器的性能需要另外考虑以下两个主要因素：网络特性和Web负载特点。&nbsp;<br> 网络特性是指web服务器所在网络情况，是广域网还是局域网，是高速网络（传输速率在1OOMb/s以上的网络就叫做高速网络）还是低速网络，在不同的网络中相关的传输数据的类型、网络相应时间、吞吐量，利用率等网络特性不尽相同，所以要加以区分，具体情况具体分析。</p> 
   <p style="line-height:1.5;font-size:13px;font-family:Verdana, Arial, Helvetica, sans-serif;"><br> &nbsp;而在Web负载特点方面，由于在对Web服务器进行评测时，一个非常关键的因素就是Web负载的选择。评测工具虽然有多种，但是它们都在选择负载上做足了功课。关于Web负载特点的研究主要目的就在于对Web服务器性能进行评测时，可以根据这些特点，选择模拟最真实的Web负载的评测工具以便获得最贴近事实的Web服务器性能评测数据，以便更好的对其进行分析和得出优化方案。</p> 
   <p style="line-height:1.5;font-size:13px;font-family:Verdana, Arial, Helvetica, sans-serif;"><br> &nbsp;<strong>Web应用服务器优化方法</strong>&nbsp;<br> 在对Web服务器进行优化时要根据真实的Web应用系统的情况和特征来采取有针对性地优化方案。首先根据不同的网络特性来看：在局域网中，降低M T U （最大传输单位）值对可以避免复制数据和求校验，而通过优化select系统调用或在Socket事件处理器中执行计算可以优化请求并发管理，利用HTTP1.1持续连接等都可以使系统性能得到相应的改善，但在广域网的环境下却没有什么大的作用，有的甚至恰恰相反。</p> 
   <p style="line-height:1.5;font-size:13px;font-family:Verdana, Arial, Helvetica, sans-serif;"><br> &nbsp;　　例如：减少用户连接的MTU会增加服务器处理开销，采用网络延迟、带宽限制和使用HTTP1.1的持续连接在广域网中不会对服务器性能有什么大的影响。在广域网中，终端用户的请求的等待时间依赖于与网络延迟的程度，连接带宽限制情况。对于广域网，软硬中断在网络处理中占有很大的分量，所以采用适应的中断处理机制将会给服务器的响应能力带来很大的好处；将服务器定位在内核和将基于进程设计改为基于事务处理也可以不同程度的提高服务器的性能。</p> 
   <p style="line-height:1.5;font-size:13px;font-family:Verdana, Arial, Helvetica, sans-serif;"><br> &nbsp;　　关于Web负载，除了对Web负载的特征进行分析以便在评测时更好地再现真实负载之外，还要考虑Web服务器所在的网络环境下负载的情况。人们不仅要求服务器满足正常的工作负载要求，而且在高峰时期依然要保持较高的吞吐量。但是，服务器在高负载的情况下的性能表现往往低于人们的期望。</p> 
   <p style="line-height:1.5;font-size:13px;font-family:Verdana, Arial, Helvetica, sans-serif;"><br> &nbsp;　　服务器过载的情况分为两种：一种为瞬间过载，即服务器暂时的、短时间的超载，这种情况主要是由服务器负载的特点引起的。大量的研究表明，Web请求的网络通信量分布是自相似的web开发技术，即Web请求的通信量可以在很大范围内有显着的变化。这就造成服务器常常短时间的超载，但这样情况持续的时间一般很短。一种是服务器长时间的超载，这种情况一般是由某一特殊事件引起的，例如服务器受到拒绝服务攻击或者发生了“活锁”现象。</p> 
   <p style="line-height:1.5;font-size:13px;font-family:Verdana, Arial, Helvetica, sans-serif;"><br> &nbsp;　　第一种服务器超载情况是不可避免的，但第二种情况则可以通过对服务器改进来改善。抛开恶意的攻击不算，仔细分析服务器处理信息包的过程可以发现，造成系统在超载情况下性能下降的根本原因是高优先级处理阶段对CPU的不公平抢占。</p> 
   <p style="line-height:1.5;font-size:13px;font-family:Verdana, Arial, Helvetica, sans-serif;"><br> &nbsp;因此，如果限制高优先级处理阶段对CPU的占用率，或者限制处理高优先级的CPU个数，都可以减轻或者消除收包活锁现象。具体的可以采用以下的方法：&nbsp;<br><strong>一、采用轮询机制。<br></strong>为了减少中断对系统性能的影响，在负载正常的情况下采用“下半处理” 的方法就非常有效，而在高负荷情况下，采用这个方法仍然会造成活锁现象，这时可以采用轮询机制。虽然这个方法在负载正常的情况下会造成资源的浪费和响应速度降低，但在网络数据频繁到达服务器时就要比中断驱动技术有效的多。</p> 
   <p style="line-height:1.5;font-size:13px;font-family:Verdana, Arial, Helvetica, sans-serif;"><br> &nbsp;<strong>二、减少上下文切换。<br></strong>这种方法不管服务器在什么情况下对性能改善都很有效，这时可以采用引入核心级（kerne1-leve1）或硬件级数据流的方法来达到这个目的。核心级数据流是将数据从源通过系统总线进行转发而不需要使数据经过应用程序进程，这个过程中因为数据在内存中，因此需要CPU操作数据。&nbsp;<br> 硬件级数据流则是将数据从源通过私有数据总线或是虽等DMA通过系统总线进行转发而不需要使数据经过应用程序进程，这个过程不需要CPU操作数据。这样在数据传输过程中不需要用户线程的介入，减少了数据被拷贝的次数，减少了上下文切换的开销。</p> 
   <p style="line-height:1.5;font-size:13px;font-family:Verdana, Arial, Helvetica, sans-serif;"><br> &nbsp;<strong>三、减低中断的频率</strong>（主要是针对高负荷情况的方法）。<br> 这里主要有两种方法：批中断和暂时关闭中断。批中断可以在超载时有效的抑制活锁现象，但对服务器的性能没有什么根本性的改进；当系统出现接收活锁迹象时，可以采用暂时关闭中断的方法来缓和系统的负担，当系统缓存再次可用时可以再打开中断，但这种方法在接收缓存不够大的情况下会造成数据包丢失。&nbsp;<br> Web服务器性能是整个Web系统的关键环节，提高Web服务器的性能也是长久以来人们一直关注的课题。这里通过对Web服务器的工作原理和现有的优化方法和技术的分析，得出了对待Web服务器性能的提高也应该具体问题具体分析，要在具体的应用环境中，根据其特点来采取相应的优化措施。</p> 
   <p style="line-height:1.5;font-size:13px;font-family:Verdana, Arial, Helvetica, sans-serif;"><br></p> 
   <p style="line-height:1.5;"><font><span style="font-size:13px;">本文转自寒意博客园博客，原文链接：http://www.cnblogs.com/hnyei/archive/2012/03/14/2395328.html，如需转载请自行联系原作者</span></font><br></p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
