<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>C++Directx11开发笔记二：Direct3D基础设备的初始化 « NotBeCN</title>
  <meta name="description" content="             最近正在学习Directx 11的开发，上一次记录了Win32应用程序的基础，主要是注册窗体类，加载图标和鼠标，处理事件循环等，链接为：C++Directx11开发笔记一：Win32应用程序窗体创建。今天我们要介绍的是Direct3D基础，其中包括Direct3D 11的设备初始化等等来...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/23/weixin_34109408_90130834.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">C++Directx11开发笔记二：Direct3D基础设备的初始化</h1>
    <p class="post-meta">Nov 23, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <p style="color:rgb(57,57,57);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">最近正在学习Directx 11的开发，上一次记录了Win32应用程序的基础，主要是注册窗体类，加载图标和鼠标，处理事件循环等，链接为：<a id="homepage1_HomePageDays_DaysList_DayItem_0_DayList_0_TitleUrl_0" class="postTitle2" href="http://www.cnblogs.com/xdotnet/archive/2011/07/07/directx11_win32_winform.html" rel="nofollow" style="color:rgb(100,102,179);"><font color="#56b6e9">C++Directx11开发笔记一：Win32应用程序窗体创建</font></a>。今天我们要介绍的是Direct3D基础，其中包括Direct3D 11的设备初始化等等来初步认识Direct3D这个神秘的面纱。由于要用到Directx11所以需要在项目中引入一些库，为了便于后面操作，这里列举了所需要的常见的库名称：d3d11.lib（d3d11d.lib调试下），d3dcompiler.lib（HLSL编译器，<a class="postTitle2" href="http://www.cnblogs.com/xdotnet/archive/2011/07/14/directx_hlsl_basic.html" rel="nofollow" style="color:rgb(100,102,179);"><font color="#56b6e9">HLSL开发一：语言基础</font></a>），dxerr.lib（错误库），dxguid.lib（这个库定义了Direct3D中所需要的GUID，即COM需要引用的，由于Directx是一个COM组建哦，所以如果不引入会出现问题的哦）。以上这些就是常见的Direct3D在C++编程中需要引入的库，可以在解决方案中的链接输入中引入，这个是C++基础这里就不多说了哦。</p> 
   <p style="color:rgb(57,57,57);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="color:rgb(57,57,57);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong style="color:#FF0000;">设备（Device）：</strong>即是用于创建资源和计算显示接口性能的东东，大家知道这个东东和显卡有关系，不一样的显卡支持的也有所不同，在Direct3D中使用ID3D11Device【注：在Direct3D 11中的命名都是以D3D11开头，其中I表示接口的意思】接口来表示。每个应用程序必须有最少一个设备实例，即依赖于你机子上安装的显卡设备。ID3D11Device由D3D11CreateDevice或D3D11CreateDeviceAndSwapChain来创建，当然指定那个驱动程序，Direct3D是直接和驱动打交道的，如果硬件不支持，Direct3D将会虚拟（即通过软件）而得到支持。就需要D3D_DRIVER_TYPE来指定，具体代码可以在D3Dcommon.h中找到，代码如下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(100,102,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <div> 
     <span style="color:rgb(0,128,128);line-height:1.5;">1</span>&nbsp;
     <span style="line-height:1.5;">typedef&nbsp;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">2</span>&nbsp;
     <span style="line-height:1.5;"></span>
     <span style="color:rgb(0,0,255);line-height:1.5;">enum</span>
     <span style="line-height:1.5;">&nbsp;D3D_DRIVER_TYPE<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">3</span>&nbsp;
     <span style="line-height:1.5;">{&nbsp;&nbsp;&nbsp;D3D_DRIVER_TYPE_UNKNOWN&nbsp;&nbsp;&nbsp;&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;</span>
     <span style="color:rgb(128,0,128);line-height:1.5;">0</span>
     <span style="line-height:1.5;">,<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">4</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;D3D_DRIVER_TYPE_HARDWARE&nbsp;&nbsp;&nbsp;&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;(&nbsp;D3D_DRIVER_TYPE_UNKNOWN&nbsp;</span>
     <span style="line-height:1.5;">+</span>
     <span style="line-height:1.5;">&nbsp;</span>
     <span style="color:rgb(128,0,128);line-height:1.5;">1</span>
     <span style="line-height:1.5;">&nbsp;)&nbsp;,<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">5</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;D3D_DRIVER_TYPE_REFERENCE&nbsp;&nbsp;&nbsp;&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;(&nbsp;D3D_DRIVER_TYPE_HARDWARE&nbsp;</span>
     <span style="line-height:1.5;">+</span>
     <span style="line-height:1.5;">&nbsp;</span>
     <span style="color:rgb(128,0,128);line-height:1.5;">1</span>
     <span style="line-height:1.5;">&nbsp;)&nbsp;,<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">6</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;D3D_DRIVER_TYPE_NULL&nbsp;&nbsp;&nbsp;&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;(&nbsp;D3D_DRIVER_TYPE_REFERENCE&nbsp;</span>
     <span style="line-height:1.5;">+</span>
     <span style="line-height:1.5;">&nbsp;</span>
     <span style="color:rgb(128,0,128);line-height:1.5;">1</span>
     <span style="line-height:1.5;">&nbsp;)&nbsp;,<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">7</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;D3D_DRIVER_TYPE_SOFTWARE&nbsp;&nbsp;&nbsp;&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;(&nbsp;D3D_DRIVER_TYPE_NULL&nbsp;</span>
     <span style="line-height:1.5;">+</span>
     <span style="line-height:1.5;">&nbsp;</span>
     <span style="color:rgb(128,0,128);line-height:1.5;">1</span>
     <span style="line-height:1.5;">&nbsp;)&nbsp;,<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">8</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;D3D_DRIVER_TYPE_WARP&nbsp;&nbsp;&nbsp;&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;(&nbsp;D3D_DRIVER_TYPE_SOFTWARE&nbsp;</span>
     <span style="line-height:1.5;">+</span>
     <span style="line-height:1.5;">&nbsp;</span>
     <span style="color:rgb(128,0,128);line-height:1.5;">1</span>
     <span style="line-height:1.5;">&nbsp;)&nbsp;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">9&nbsp;</span>
     <span style="line-height:1.5;">}&nbsp;&nbsp;&nbsp;D3D_DRIVER_TYPE;</span> 
    </div> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(100,102,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(57,57,57);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">其中：</p> 
   <ol style="color:rgb(57,57,57);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <li style="list-style:decimal;">D3D_DRIVER_TYPE_UNKNOWN：未知驱动类型；</li> 
    <li style="list-style:decimal;">D3D_DRIVER_TYPE_HARDWARE：硬件驱动类型，这个是性能最好的，因为得到硬件显卡的支持，可以使用硬件加速器，可以在主程序中使用这个类型，但是也有些管道不支持硬件需要软件的支持（即显卡不可能支持Directx11中所有的东东，不过可以使用软件驱动类型来帮忙）。这种类型的驱动主要应用于HAL（Hardware Abstraction Layer），美其名曰硬件抽象层；</li> 
    <li style="list-style:decimal;">D3D_DRIVER_TYPE_REFERENCE：引用驱动类型，这个支持所有Direct3D接口，因为这个驱动通过DirectX SDK进行安装。这个设计主要是为了进行测试，检验性能，调试以及验证BUG等而存活的；</li> 
    <li style="list-style:decimal;">D3D_DRIVER_TYPE_NULL：空驱动类型，这个主要是用来调试没有呈现的APIs调用，即不需要显示，这个驱动也是有DirectX SDK进行安装；</li> 
    <li style="list-style:decimal;">D3D_DRIVER_TYPE_SOFTWARE：软件驱动类型，这个类型的驱动完全有软件模拟来实现Direct3D，性能比较差，但是有时候显卡不支持的情况下需要这个来完成进行模拟；</li> 
    <li style="list-style:decimal;">D3D_DRIVER_TYPE_WARP：WARP驱动类型，是一个性能强的软件光栅化器，这个光栅化器支持9_1到10.1版本，具有比较强的性能，【注：这个比较难理解，以后可能会专门研究一下！】</li> 
   </ol>
   <p style="color:rgb(57,57,57);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;在上面提到的9_x等应该就是DirectX的版本，我们学习的当然是11_0，这个在编程中也有一个枚举，具体代码如下，估计以后的12,13出来也会加到SDK中。</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(100,102,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <div> 
     <span style="line-height:1.5;">typedef&nbsp;<br></span>
     <span style="color:rgb(0,0,255);line-height:1.5;">enum</span>
     <span style="line-height:1.5;">&nbsp;D3D_FEATURE_LEVEL<br> &nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;D3D_FEATURE_LEVEL_9_1&nbsp;&nbsp;&nbsp;&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;</span>
     <span style="color:rgb(128,0,128);line-height:1.5;">0x9100</span>
     <span style="line-height:1.5;">,<br> &nbsp;&nbsp;&nbsp;&nbsp;D3D_FEATURE_LEVEL_9_2&nbsp;&nbsp;&nbsp;&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;</span>
     <span style="color:rgb(128,0,128);line-height:1.5;">0x9200</span>
     <span style="line-height:1.5;">,<br> &nbsp;&nbsp;&nbsp;&nbsp;D3D_FEATURE_LEVEL_9_3&nbsp;&nbsp;&nbsp;&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;</span>
     <span style="color:rgb(128,0,128);line-height:1.5;">0x9300</span>
     <span style="line-height:1.5;">,<br> &nbsp;&nbsp;&nbsp;&nbsp;D3D_FEATURE_LEVEL_10_0&nbsp;&nbsp;&nbsp;&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;</span>
     <span style="color:rgb(128,0,128);line-height:1.5;">0xa000</span>
     <span style="line-height:1.5;">,<br> &nbsp;&nbsp;&nbsp;&nbsp;D3D_FEATURE_LEVEL_10_1&nbsp;&nbsp;&nbsp;&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;</span>
     <span style="color:rgb(128,0,128);line-height:1.5;">0xa100</span>
     <span style="line-height:1.5;">,<br> &nbsp;&nbsp;&nbsp;&nbsp;D3D_FEATURE_LEVEL_11_0&nbsp;&nbsp;&nbsp;&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;</span>
     <span style="color:rgb(128,0,128);line-height:1.5;">0xb000</span>
     <span style="line-height:1.5;"><br> &nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D3D_FEATURE_LEVEL;</span> 
    </div> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(100,102,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(57,57,57);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">DirectX SDK中支持DirectX 9.x和DirectX 10.x以及我们学习的DirectX 11，根据市面上的显卡基本可以支持DirectX10了，所以我们可以在代码中定义一下可能用到的驱动类型和SDK支持版本等级（这个定义是为了可以迭代进行解决一些麻烦，这个和网页AJAX编程中创建REQUEST一样，因为各个浏览器支持的XML东东是不一样的），代码如下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(100,102,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <div> 
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;1</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;D3D_DRIVER_TYPE&nbsp;driverTypes[]&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;"><br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;2</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;{<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;3</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D3D_DRIVER_TYPE_HARDWARE,<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;4</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D3D_DRIVER_TYPE_WARP,<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;5</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D3D_DRIVER_TYPE_REFERENCE,<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;6</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;};<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;7</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;UINT&nbsp;numDriverTypes&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;ARRAYSIZE(&nbsp;driverTypes&nbsp;);<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;8</span>&nbsp;
     <span style="line-height:1.5;"><br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;9</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;D3D_FEATURE_LEVEL&nbsp;featureLevels[]&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;"><br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">10</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;{<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">11</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D3D_FEATURE_LEVEL_11_0,<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">12</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D3D_FEATURE_LEVEL_10_1,<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">13</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D3D_FEATURE_LEVEL_10_0,<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">14</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;};<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">15</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;UINT&nbsp;numFeatureLevels&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;ARRAYSIZE(&nbsp;featureLevels&nbsp;);</span> 
    </div> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(100,102,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(57,57,57);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="color:rgb(57,57,57);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;<span style="color:#FF0000;"><strong>设备上下文(Device Context)：</strong></span>主要包括当前设备的环境以及一些设定信息【注：如果你是ASP.NET的开发人员，一定知道网页HTTP请求的上下文HttpContext吧】。设备上下文主要用于设置管道状态和通过所拥有的资源运行呈现命令。在Direct3D中包含了两种设备上下文，一种为立即呈现（显示）[Immediate Context]，还有一种就是延迟显示[Deferred Context]。两种上下文都通过ID3D11DeviceContext接口来描述，下面我们分别看一下这两种的设备上下文信息。</p> 
   <ol style="color:rgb(57,57,57);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <li style="list-style:decimal;">ImmediateContext：立即呈现器直接和驱动打交道，每一个设备有且仅有一个立即显示设备上下文，他可以直接从GPU中检索得到数据。</li> 
    <li style="list-style:decimal;">DeferredContext：延迟显示主要用于多线程应用程序中，将GPU的命令添加到一个队列中，在单线程应用程序中是没有必要这么做的，直接显示就好了。使用延迟显示将不会继承立即呈现的状态信息，而是通过一个工作线程（worker thread）来呈现执行命令。</li> 
   </ol>
   <p style="color:rgb(57,57,57);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>注意：</strong>在DirectX11中所有ID3D11Device以及ID3D11DeviceChild(包括它衍生出来的ID3D11Buffer，ID3D11Query等等)都是线程安全的。即多个线程可以同时调用它们，而不会出现冲突状态。但是设备上下文不一样，无论是那个设备上下文都可以工作在任何线程中，但是每一次只能有一个线程进行工作，因此如果需要在多线程中使用就需要记得“锁”和“解锁”。</p> 
   <p style="color:rgb(57,57,57);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="color:rgb(57,57,57);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="color:#FF0000;"><strong>初始化设备：</strong></span></p> 
   <p style="color:rgb(57,57,57);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">在创建设备以及设备上下文时我们还需要了解一个DXGI_SWAP_CHAIN_DESC结构体，应该叫做DXGI交换链描述信息，其具体结构代码如下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(100,102,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <div> 
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;1</span>&nbsp;
     <span style="line-height:1.5;">typedef&nbsp;</span>
     <span style="color:rgb(0,0,255);line-height:1.5;">struct</span>
     <span style="line-height:1.5;">&nbsp;DXGI_SWAP_CHAIN_DESC<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;2</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;{<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;3</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;DXGI_MODE_DESC&nbsp;BufferDesc;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;4</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;DXGI_SAMPLE_DESC&nbsp;SampleDesc;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;5</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;DXGI_USAGE&nbsp;BufferUsage;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;6</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;UINT&nbsp;BufferCount;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;7</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;HWND&nbsp;OutputWindow;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;8</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;BOOL&nbsp;Windowed;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;9</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;DXGI_SWAP_EFFECT&nbsp;SwapEffect;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">10</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;UINT&nbsp;Flags;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">11</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DXGI_SWAP_CHAIN_DESC;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">12</span>&nbsp;
     <span style="line-height:1.5;">typedef&nbsp;</span>
     <span style="color:rgb(0,0,255);line-height:1.5;">struct</span>
     <span style="line-height:1.5;">&nbsp;DXGI_MODE_DESC<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">13</span>&nbsp;
     <span style="line-height:1.5;">{<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">14</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;UINT&nbsp;Width;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">15</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;UINT&nbsp;Height;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">16</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;DXGI_RATIONAL&nbsp;RefreshRate;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">17</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;DXGI_FORMAT&nbsp;Format;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">18</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;DXGI_MODE_SCANLINE_ORDER&nbsp;ScanlineOrdering;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">19</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;DXGI_MODE_SCALING&nbsp;Scaling;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">20</span>&nbsp;
     <span style="line-height:1.5;">}&nbsp;DXGI_MODE_DESC;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">21</span>&nbsp;
     <span style="line-height:1.5;"><br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">22</span>&nbsp;
     <span style="line-height:1.5;">typedef&nbsp;</span>
     <span style="color:rgb(0,0,255);line-height:1.5;">struct</span>
     <span style="line-height:1.5;">&nbsp;DXGI_SAMPLE_DESC<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">23</span>&nbsp;
     <span style="line-height:1.5;">{<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">24</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;UINT&nbsp;Count;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">25</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;UINT&nbsp;Quality;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">26</span>&nbsp;
     <span style="line-height:1.5;">}&nbsp;DXGI_SAMPLE_DESC;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">27</span>&nbsp;
     <span style="line-height:1.5;">typedef&nbsp;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">28</span>&nbsp;
     <span style="line-height:1.5;"></span>
     <span style="color:rgb(0,0,255);line-height:1.5;">enum</span>
     <span style="line-height:1.5;">&nbsp;DXGI_SWAP_EFFECT<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">29</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;DXGI_SWAP_EFFECT_DISCARD&nbsp;&nbsp;&nbsp;&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;</span>
     <span style="color:rgb(128,0,128);line-height:1.5;">0</span>
     <span style="line-height:1.5;">,<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">30</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;DXGI_SWAP_EFFECT_SEQUENTIAL&nbsp;&nbsp;&nbsp;&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;</span>
     <span style="color:rgb(128,0,128);line-height:1.5;">1</span>
     <span style="line-height:1.5;"><br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">31</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DXGI_SWAP_EFFECT;</span> 
    </div> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(100,102,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(57,57,57);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">这个结构体的相关信息将在后面进行描述，因为这个属于DXGI范畴，我想也应该相应了解它们的具体情况（在我暂时学习的情况了解到学习DirectX11肯定要解决HLSL，DXGI等）。这里我们只要知道如何初始化即可，其代码如下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(100,102,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <div> 
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;1</span>&nbsp;
     <span style="line-height:1.5;">DXGI_SWAP_CHAIN_DESC&nbsp;sd;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;2</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;ZeroMemory(&nbsp;</span>
     <span style="line-height:1.5;">&amp;</span>
     <span style="line-height:1.5;">sd,&nbsp;</span>
     <span style="color:rgb(0,0,255);line-height:1.5;">sizeof</span>
     <span style="line-height:1.5;">(&nbsp;sd&nbsp;)&nbsp;);<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;3</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;sd.BufferCount&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;</span>
     <span style="color:rgb(128,0,128);line-height:1.5;">1</span>
     <span style="line-height:1.5;">;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;4</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;sd.BufferDesc.Width&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;width;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;5</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;sd.BufferDesc.Height&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;height;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;6</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;sd.BufferDesc.Format&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;DXGI_FORMAT_R8G8B8A8_UNORM;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;7</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;sd.BufferDesc.RefreshRate.Numerator&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;</span>
     <span style="color:rgb(128,0,128);line-height:1.5;">60</span>
     <span style="line-height:1.5;">;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;8</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;sd.BufferDesc.RefreshRate.Denominator&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;</span>
     <span style="color:rgb(128,0,128);line-height:1.5;">1</span>
     <span style="line-height:1.5;">;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;9</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;sd.BufferUsage&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;DXGI_USAGE_RENDER_TARGET_OUTPUT;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">10</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;sd.OutputWindow&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;g_hWnd;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">11</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;sd.SampleDesc.Count&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;</span>
     <span style="color:rgb(128,0,128);line-height:1.5;">1</span>
     <span style="line-height:1.5;">;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">12</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;sd.SampleDesc.Quality&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;</span>
     <span style="color:rgb(128,0,128);line-height:1.5;">0</span>
     <span style="line-height:1.5;">;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">13</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;sd.Windowed&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;TRUE;</span> 
    </div> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(100,102,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(57,57,57);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">其中width和height表示窗口（游戏窗口）的宽和高，而g_hWnd表示窗体的句柄，60应该就是表示帧频率（FPS），即每秒显示60帧。这样就可以通过D3D11CreateDevice或D3D11CreateDeviceAndSwapChain来得到设备和设备上下文了，具体代码如下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(100,102,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <div> 
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;1</span>&nbsp;
     <span style="line-height:1.5;">HINSTANCE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g_hInst&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;NULL;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;2</span>&nbsp;
     <span style="line-height:1.5;">HWND&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g_hWnd&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;NULL;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;3</span>&nbsp;
     <span style="line-height:1.5;">D3D_DRIVER_TYPE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g_driverType&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;D3D_DRIVER_TYPE_NULL;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;4</span>&nbsp;
     <span style="line-height:1.5;">D3D_FEATURE_LEVEL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g_featureLevel&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;D3D_FEATURE_LEVEL_11_0;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;5</span>&nbsp;
     <span style="line-height:1.5;">ID3D11Device</span>
     <span style="line-height:1.5;">*</span>
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g_pd3dDevice&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;NULL;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;6</span>&nbsp;
     <span style="line-height:1.5;">ID3D11DeviceContext</span>
     <span style="line-height:1.5;">*</span>
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;g_pImmediateContext&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;NULL;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;7</span>&nbsp;
     <span style="line-height:1.5;">IDXGISwapChain</span>
     <span style="line-height:1.5;">*</span>
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g_pSwapChain&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;NULL;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;8</span>&nbsp;
     <span style="line-height:1.5;">ID3D11RenderTargetView</span>
     <span style="line-height:1.5;">*</span>
     <span style="line-height:1.5;">&nbsp;g_pRenderTargetView&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;NULL;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;9</span>&nbsp;
     <span style="line-height:1.5;"></span>
     <span style="color:rgb(0,128,0);line-height:1.5;">//</span>
     <span style="color:rgb(0,128,0);line-height:1.5;">上面为我们定义的一些全局变量，下面代码在初始化设备中进行调用</span>
     <span style="color:rgb(0,128,0);line-height:1.5;"><br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">10</span>&nbsp;
     <span style="color:rgb(0,128,0);line-height:1.5;"></span>
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;</span>
     <span style="color:rgb(0,0,255);line-height:1.5;">for</span>
     <span style="line-height:1.5;">(&nbsp;UINT&nbsp;driverTypeIndex&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;</span>
     <span style="color:rgb(128,0,128);line-height:1.5;">0</span>
     <span style="line-height:1.5;">;&nbsp;driverTypeIndex&nbsp;</span>
     <span style="line-height:1.5;">&lt;</span>
     <span style="line-height:1.5;">&nbsp;numDriverTypes;&nbsp;driverTypeIndex</span>
     <span style="line-height:1.5;">++</span>
     <span style="line-height:1.5;">&nbsp;)<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">11</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;{<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">12</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g_driverType&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;driverTypes[driverTypeIndex];<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">13</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hr&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;D3D11CreateDeviceAndSwapChain(&nbsp;NULL,&nbsp;g_driverType,&nbsp;NULL,&nbsp;createDeviceFlags,&nbsp;featureLevels,&nbsp;numFeatureLevels,<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">14</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D3D11_SDK_VERSION,&nbsp;</span>
     <span style="line-height:1.5;">&amp;</span>
     <span style="line-height:1.5;">sd,&nbsp;</span>
     <span style="line-height:1.5;">&amp;</span>
     <span style="line-height:1.5;">g_pSwapChain,&nbsp;</span>
     <span style="line-height:1.5;">&amp;</span>
     <span style="line-height:1.5;">g_pd3dDevice,&nbsp;</span>
     <span style="line-height:1.5;">&amp;</span>
     <span style="line-height:1.5;">g_featureLevel,&nbsp;</span>
     <span style="line-height:1.5;">&amp;</span>
     <span style="line-height:1.5;">g_pImmediateContext&nbsp;);<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">15</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
     <span style="color:rgb(0,0,255);line-height:1.5;">if</span>
     <span style="line-height:1.5;">(&nbsp;SUCCEEDED(&nbsp;hr&nbsp;)&nbsp;)<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">16</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
     <span style="color:rgb(0,0,255);line-height:1.5;">break</span>
     <span style="line-height:1.5;">;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">17</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;}<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">18</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;</span>
     <span style="color:rgb(0,0,255);line-height:1.5;">if</span>
     <span style="line-height:1.5;">(&nbsp;FAILED(&nbsp;hr&nbsp;)&nbsp;)<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">19</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
     <span style="color:rgb(0,0,255);line-height:1.5;">return</span>
     <span style="line-height:1.5;">&nbsp;hr;</span> 
    </div> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(100,102,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(57,57,57);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="color:rgb(57,57,57);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="color:#FF0000;"><strong>创建目标程序区域（访问端口ViewPort）：</strong></span></p> 
   <p style="color:rgb(57,57,57);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">初始化设备后就需要创建我们需要进行呈现区域，包括它的大小等等，首先我们先看一下代码，然后我们再进行分析，这样有助于我们对他的了解，具体代码如下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(100,102,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <div> 
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;1</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;</span>
     <span style="color:rgb(0,128,0);line-height:1.5;">//</span>
     <span style="color:rgb(0,128,0);line-height:1.5;">&nbsp;Create&nbsp;a&nbsp;render&nbsp;target&nbsp;view</span>
     <span style="color:rgb(0,128,0);line-height:1.5;"><br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;2</span>&nbsp;
     <span style="color:rgb(0,128,0);line-height:1.5;"></span>
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;ID3D11Texture2D</span>
     <span style="line-height:1.5;">*</span>
     <span style="line-height:1.5;">&nbsp;pBackBuffer&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;NULL;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;3</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;hr&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;g_pSwapChain</span>
     <span style="line-height:1.5;">-&gt;</span>
     <span style="line-height:1.5;">GetBuffer(&nbsp;</span>
     <span style="color:rgb(128,0,128);line-height:1.5;">0</span>
     <span style="line-height:1.5;">,&nbsp;__uuidof(&nbsp;ID3D11Texture2D&nbsp;),&nbsp;(&nbsp;LPVOID</span>
     <span style="line-height:1.5;">*</span>
     <span style="line-height:1.5;">&nbsp;)</span>
     <span style="line-height:1.5;">&amp;</span>
     <span style="line-height:1.5;">pBackBuffer&nbsp;);<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;4</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;</span>
     <span style="color:rgb(0,0,255);line-height:1.5;">if</span>
     <span style="line-height:1.5;">(&nbsp;FAILED(&nbsp;hr&nbsp;)&nbsp;)<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;5</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
     <span style="color:rgb(0,0,255);line-height:1.5;">return</span>
     <span style="line-height:1.5;">&nbsp;hr;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;6</span>&nbsp;
     <span style="line-height:1.5;"><br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;7</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;hr&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;g_pd3dDevice</span>
     <span style="line-height:1.5;">-&gt;</span>
     <span style="line-height:1.5;">CreateRenderTargetView(&nbsp;pBackBuffer,&nbsp;NULL,&nbsp;</span>
     <span style="line-height:1.5;">&amp;</span>
     <span style="line-height:1.5;">g_pRenderTargetView&nbsp;);<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;8</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;pBackBuffer</span>
     <span style="line-height:1.5;">-&gt;</span>
     <span style="line-height:1.5;">Release();<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">&nbsp;9</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;</span>
     <span style="color:rgb(0,0,255);line-height:1.5;">if</span>
     <span style="line-height:1.5;">(&nbsp;FAILED(&nbsp;hr&nbsp;)&nbsp;)<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">10</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
     <span style="color:rgb(0,0,255);line-height:1.5;">return</span>
     <span style="line-height:1.5;">&nbsp;hr;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">11</span>&nbsp;
     <span style="line-height:1.5;"><br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">12</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;g_pImmediateContext</span>
     <span style="line-height:1.5;">-&gt;</span>
     <span style="line-height:1.5;">OMSetRenderTargets(&nbsp;</span>
     <span style="color:rgb(128,0,128);line-height:1.5;">1</span>
     <span style="line-height:1.5;">,&nbsp;</span>
     <span style="line-height:1.5;">&amp;</span>
     <span style="line-height:1.5;">g_pRenderTargetView,&nbsp;NULL&nbsp;);<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">13</span>&nbsp;
     <span style="line-height:1.5;"><br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">14</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;</span>
     <span style="color:rgb(0,128,0);line-height:1.5;">//</span>
     <span style="color:rgb(0,128,0);line-height:1.5;">&nbsp;Setup&nbsp;the&nbsp;viewport</span>
     <span style="color:rgb(0,128,0);line-height:1.5;"><br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">15</span>&nbsp;
     <span style="color:rgb(0,128,0);line-height:1.5;"></span>
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;D3D11_VIEWPORT&nbsp;vp;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">16</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;vp.Width&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;(FLOAT)width;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">17</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;vp.Height&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;(FLOAT)height;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">18</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;vp.MinDepth&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;</span>
     <span style="color:rgb(128,0,128);line-height:1.5;">0.0f</span>
     <span style="line-height:1.5;">;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">19</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;vp.MaxDepth&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;</span>
     <span style="color:rgb(128,0,128);line-height:1.5;">1.0f</span>
     <span style="line-height:1.5;">;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">20</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;vp.TopLeftX&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;</span>
     <span style="color:rgb(128,0,128);line-height:1.5;">0</span>
     <span style="line-height:1.5;">;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">21</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;vp.TopLeftY&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;</span>
     <span style="color:rgb(128,0,128);line-height:1.5;">0</span>
     <span style="line-height:1.5;">;<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">22</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;g_pImmediateContext</span>
     <span style="line-height:1.5;">-&gt;</span>
     <span style="line-height:1.5;">RSSetViewports(&nbsp;</span>
     <span style="color:rgb(128,0,128);line-height:1.5;">1</span>
     <span style="line-height:1.5;">,&nbsp;</span>
     <span style="line-height:1.5;">&amp;</span>
     <span style="line-height:1.5;">vp&nbsp;);</span> 
    </div> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(100,102,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(57,57,57);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">由于我们是在单线程中，所以使用立即显示的上下文，首先通过交换链的GetBuffer方法来分配一个2D纹理缓存区，从而创建并设置立即呈现上下文访问目标区域，最后设置访问区域大小。这样设备初始化到此就基本结束了，接下来我们在消息循环中就可以呈现了。如下代码：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(100,102,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <div> 
     <span style="color:rgb(0,128,128);line-height:1.5;">1</span>&nbsp;
     <span style="color:rgb(0,0,255);line-height:1.5;">void</span>
     <span style="line-height:1.5;">&nbsp;Render()<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">2</span>&nbsp;
     <span style="line-height:1.5;">{<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">3</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;</span>
     <span style="color:rgb(0,128,0);line-height:1.5;">//</span>
     <span style="color:rgb(0,128,0);line-height:1.5;">&nbsp;Just&nbsp;clear&nbsp;the&nbsp;backbuffer</span>
     <span style="color:rgb(0,128,0);line-height:1.5;"><br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">4</span>&nbsp;
     <span style="color:rgb(0,128,0);line-height:1.5;"></span>
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;</span>
     <span style="color:rgb(0,0,255);line-height:1.5;">float</span>
     <span style="line-height:1.5;">&nbsp;ClearColor[</span>
     <span style="color:rgb(128,0,128);line-height:1.5;">4</span>
     <span style="line-height:1.5;">]&nbsp;</span>
     <span style="line-height:1.5;">=</span>
     <span style="line-height:1.5;">&nbsp;{&nbsp;</span>
     <span style="color:rgb(128,0,128);line-height:1.5;">0.0f</span>
     <span style="line-height:1.5;">,&nbsp;</span>
     <span style="color:rgb(128,0,128);line-height:1.5;">0.125f</span>
     <span style="line-height:1.5;">,&nbsp;</span>
     <span style="color:rgb(128,0,128);line-height:1.5;">0.3f</span>
     <span style="line-height:1.5;">,&nbsp;</span>
     <span style="color:rgb(128,0,128);line-height:1.5;">1.0f</span>
     <span style="line-height:1.5;">&nbsp;};&nbsp;</span>
     <span style="color:rgb(0,128,0);line-height:1.5;">//</span>
     <span style="color:rgb(0,128,0);line-height:1.5;">red,green,blue,alpha</span>
     <span style="color:rgb(0,128,0);line-height:1.5;"><br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">5</span>&nbsp;
     <span style="color:rgb(0,128,0);line-height:1.5;"></span>
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;g_pImmediateContext</span>
     <span style="line-height:1.5;">-&gt;</span>
     <span style="line-height:1.5;">ClearRenderTargetView(&nbsp;g_pRenderTargetView,&nbsp;ClearColor&nbsp;);<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">6</span>&nbsp;
     <span style="line-height:1.5;">&nbsp;&nbsp;&nbsp;&nbsp;g_pSwapChain</span>
     <span style="line-height:1.5;">-&gt;</span>
     <span style="line-height:1.5;">Present(&nbsp;</span>
     <span style="color:rgb(128,0,128);line-height:1.5;">0</span>
     <span style="line-height:1.5;">,&nbsp;</span>
     <span style="color:rgb(128,0,128);line-height:1.5;">0</span>
     <span style="line-height:1.5;">&nbsp;);<br></span>
     <span style="color:rgb(0,128,128);line-height:1.5;">7</span>&nbsp;
     <span style="line-height:1.5;">}</span> 
    </div> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(100,102,179);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(57,57,57);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">通过交换链来呈现图形，更复杂的程序等等将在后面跟着例子慢慢学习，希望这次我也可以系统的学习一下C++DirectX11编程。由于我学习C++是由.NET转过来的，以前也做了很多.NET项目，最近也有在弄MVC所以当中可能会涉及到一些.NET的影子。在最后要注意的是DirectX是COM，在使用后要记得Release就OK了。由于本人也是半路出家，程序都是自学的，所以难免有些错误，再加上英文又不好，希望各位博友能够批评指正，大家共同进步。</p> 
   <p style="color:rgb(57,57,57);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;本文转自网魂小兵博客园博客，原文链接：http://www.cnblogs.com/xdotnet/archive/2011/07/15/directx11_cpp_device.html，如需转载请自行联系原作者</p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
