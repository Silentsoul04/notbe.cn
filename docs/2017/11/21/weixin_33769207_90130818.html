<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>【数据结构与算法】搜索之BFS « NotBeCN</title>
  <meta name="description" content="             1、目标    通过本文，希望可以达到以下目标，当遇到任意问题时，可以：    　　1、很快建立状态空间；    　　2、提出一个合理算法；    　　3、简单估计时空性能；    2、搜索分类    2.1、盲目搜索    　　按照预定的控制策略进行搜索，在搜索过程中获得的中间信息不用...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/21/weixin_33769207_90130818.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">【数据结构与算法】搜索之BFS</h1>
    <p class="post-meta">Nov 21, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <h1 style="font-size:28px;line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;">1、目标</h1> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">通过本文，希望可以达到以下目标，当遇到任意问题时，可以：</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　1、很快建立状态空间；</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　2、提出一个合理算法；</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　3、简单估计时空性能；</p> 
   <h1 style="font-size:28px;line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;">2、搜索分类</h1> 
   <h2 style="font-size:21px;line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;">2.1、盲目搜索</h2> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　按照预定的控制策略进行搜索，在搜索过程中获得的中间信息不用来改进控制策略；</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　常见算法：</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　1、广度优先搜索（Breadth First Search）；</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　2、深度优先搜索（Depth First Search）；</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　3、纯随机搜索、重复式搜索、迭代加深搜索、迭代加宽搜索、柱形搜索；</p> 
   <h2 style="font-size:21px;line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;">2.2、启发式搜索</h2> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　在搜索中加入了与问题有关的启发性信息，用以指导搜索朝着最有希望的方向发展，加速问题的求解过程并达到最优解。</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　常见算法：</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　1、A*算法；</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　2、IDA*算法；</p> 
   <h1 style="font-size:28px;line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;">3、状态空间</h1> 
   <h2 style="font-size:21px;line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;">状态</h2> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　问题在某一时刻进展状况的数学描述；</p> 
   <h2 style="font-size:21px;line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;">状态转移</h2> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">问题从一种状态转移到另一种或几种状态的操作；</p> 
   <h2 style="font-size:21px;line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;">状态空间</h2> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">一个“图”，图结点对应于状态，点之间的边对应于状态转移；</p> 
   <h2 style="font-size:21px;line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;">搜索</h2> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">寻找一种可行的操作序列，从起始状态经过一系列状态转移，达到目标状态；</p> 
   <h1 style="font-size:28px;line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;">4、过河问题</h1> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">某人带一条狗、一只鸡、一筐米过河，但小船除了需要人划动外，最多可以带一个物品，而人不在场时，狗要吃鸡，鸡要吃米。问此人应该如何过河？</p> 
   <h2 style="font-size:21px;line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;">4.1、问题分析</h2> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">状态：建立四元组（人，狗，鸡，米）。0表示在左岸，1表示在右岸。</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">起始状态：（0，0，0，0）</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">终止状态：（1，1，1，1）</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">状态转移规则（操作，用1-x来表示过一次河，无论是到左岸还是到右岸都可以）：</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">（a，b，c，d）</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　→（1-a，1-b，c，d）（当a=b）【人带狗过河】</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　→（1-a，b，1-c，d）（当a=c）【人带鸡过河】</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　→（1-a，b，c，1-d）（当a=d）【人带米过河】</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　→（1-a，b，c，d）&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 【人自己过河】</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">约束条件：</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">（a，b，c，d）中，a≠b时b≠c，a≠c时c≠d</p> 
   <h2 style="font-size:21px;line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;">4.2、直观的搜索过程</h2> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">首先从初始状态开始：</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images0.cnblogs.com/blog2015/323808/201506/040922140555795.jpg" alt="" width="387" height="123" style="border:none;"></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">然后再对两个可能状态进行进一步搜索：</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images0.cnblogs.com/blog2015/323808/201506/040922281172693.jpg" alt="" width="519" height="200" style="border:none;"></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">搜索在“图”中进行，但是图不需要事先建立（“隐式图”）；</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">搜索过程就是对图的遍历过程，可以得到一课“搜索树”；</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">搜索树的结点个数、分支数、深度，决定着搜索的效率；</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images0.cnblogs.com/blog2015/323808/201506/040931091484638.jpg" alt="" style="border:none;"></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">存储和算法</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　普通状态可以用4个整数表示；</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　压缩状态可以用4个bit表示；</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　用BFS或DFS；</p> 
   <h1 style="font-size:28px;line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;">5、BFS基本结构</h1> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">BFS搜索过程没有回溯，是一种牺牲空间换取时间的方法。时间复杂度：O（V+E）</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">1</span> <span style="font-size:12px;line-height:1.5;">定义一个队列；
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">2</span> <span style="font-size:12px;line-height:1.5;">起始点加入队列；
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">3</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">while</span><span style="font-size:12px;line-height:1.5;">(队列不空){
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">4</span> <span style="font-size:12px;line-height:1.5;">    取出队头结点；
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">5</span> <span style="font-size:12px;line-height:1.5;">    若它是所求的目标状态，跳出循环；
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">6</span> <span style="font-size:12px;line-height:1.5;">    否则，从它扩展出子节点，全都添加到队尾；
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">7</span> <span style="font-size:12px;line-height:1.5;">}
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">8</span> <span style="font-size:12px;line-height:1.5;">若循环中找到目标，输出结果；
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">9</span> 否则输出无解；</pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <h1 style="font-size:28px;line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;">6、BFS例题</h1> 
   <h2 style="font-size:21px;line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;">6.1 HDOJ1242 Rescue</h2> 
   <h3 style="font-size:16px;line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;">Description：</h3> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">Angel was caught by the MOLIGPY! He was put in prison by Moligpy. The prison is described as a N * M (N, M &lt;= 200) matrix. There are WALLs, ROADs, and GUARDs in the prison.<br> Angel's friends want to save Angel. Their task is: approach Angel. We assume that "approach Angel" is to get to the position where Angel stays. When there's a guard in the grid, we must kill him (or her?) to move into the grid. We assume that we moving up, down, right, left takes us 1 unit time, and killing a guard takes 1 unit time, too. And we are strong enough to kill all the guards.<br> You have to calculate the minimal time to approach Angel. (We can move only UP, DOWN, LEFT and RIGHT, to the neighbor grid within bound, of course.)</p> 
   <h3 style="font-size:16px;line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;">Input：</h3> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">First line contains two integers stand for N and M.<br> Then N lines follows, every line has M characters. "." stands for road, "a" stands for Angel, and "r" stands for each of Angel's friend.&nbsp;<br> Process to the end of the file.</p> 
   <h3 style="font-size:16px;line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;">Output：</h3> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">For each test case, your program should output a single integer, standing for the minimal time needed. If such a number does no exist, you should output a line containing "Poor ANGEL has to stay in the prison all his life."</p> 
   <h3 style="font-size:16px;line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;">Sample Input：</h3> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">1</span> <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">7</span> <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">8</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">2</span> <span style="font-size:12px;line-height:1.5;">#.#####.
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">3</span> <span style="font-size:12px;line-height:1.5;">#.a#..r.
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">4</span> <span style="font-size:12px;line-height:1.5;">#..#x...
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">5</span> <span style="font-size:12px;line-height:1.5;">..#..#.#
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">6</span> <span style="font-size:12px;line-height:1.5;">#...##..
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">7</span> <span style="font-size:12px;line-height:1.5;">.#......
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">8</span> ........</pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <h3 style="font-size:16px;line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;">Sample Output：</h3> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">1</span> <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">13</span></pre>
   </div> 
   <h3 style="font-size:16px;line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;">Code 1:</h3> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">  1</span> <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">这是一个比较标准的bfs，没有经过任何优化，但是思路比较清晰，容易看懂。</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">  2</span> #include &lt;iostream&gt;
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">  3</span> #include &lt;cstdio&gt;
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">  4</span> #include &lt;queue&gt;
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">  5</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">namespace</span><span style="font-size:12px;line-height:1.5;"> std;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">  6</span> <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">node结构体</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">  7</span> typedef <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">struct</span>  
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">  8</span> <span style="font-size:12px;line-height:1.5;">{
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">  9</span>     <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> x;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 10</span>     <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> y;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 11</span>     <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> len;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 12</span> <span style="font-size:12px;line-height:1.5;">}node;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 13</span> <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">全局变量定义</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 14</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">#define</span> M 202
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 15</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">char</span> Map[M][M];<span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">地图</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 16</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> mask[M][M];<span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">访问标志</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 17</span> queue&lt;node&gt; q;<span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">队列，只在bfs中用到</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 18</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> bx,by,ex,ey,w,h;<span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">起点、终点、宽、高</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 19</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> step[<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">4</span>][<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">2</span>] = {<span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">四个方向
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 20</span>     <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">0-up</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 21</span>     <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span>,-<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span><span style="font-size:12px;line-height:1.5;">,
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 22</span>     <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">1-right</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 23</span>     <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span>,<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span><span style="font-size:12px;line-height:1.5;">,
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 24</span>     <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">2-down</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 25</span>     <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span>,<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span><span style="font-size:12px;line-height:1.5;">,
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 26</span>     <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">3-left</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 27</span>     -<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span>,<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 28</span> <span style="font-size:12px;line-height:1.5;">};
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 29</span> 
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 30</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">void</span> readMap(<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> m,<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> n);<span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">读取地图</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 31</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">void</span> bfs();<span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">bfs</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 32</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> tryXY(<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> x,<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> y);<span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">尝试x、y点</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 33</span> 
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 34</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">void</span><span style="font-size:12px;line-height:1.5;"> main()
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 35</span> <span style="font-size:12px;line-height:1.5;">{
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 36</span>     <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">while</span> (scanf(<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">%d %d</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span>,&amp;h,&amp;w)==<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">2</span><span style="font-size:12px;line-height:1.5;">)
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 37</span> <span style="font-size:12px;line-height:1.5;">    {
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 38</span> <span style="font-size:12px;line-height:1.5;">        readMap(h,w);
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 39</span> <span style="font-size:12px;line-height:1.5;">        bfs();
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 40</span>         cout&lt;&lt;mask[ex][ey]&lt;&lt;<span style="font-size:12px;line-height:1.5;">endl;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 41</span> <span style="font-size:12px;line-height:1.5;">    }
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 42</span> <span style="font-size:12px;line-height:1.5;">}
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 43</span> 
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 44</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">void</span> readMap(<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> m,<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> n)<span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">m-h,n-w</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 45</span> <span style="font-size:12px;line-height:1.5;">{
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 46</span>     <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> i,j;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 47</span>     <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">for</span> (i=<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span>;i&lt;m;i++<span style="font-size:12px;line-height:1.5;">)
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 48</span> <span style="font-size:12px;line-height:1.5;">    {
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 49</span>         <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">for</span> (j=<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span>;j&lt;n;j++<span style="font-size:12px;line-height:1.5;">)
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 50</span> <span style="font-size:12px;line-height:1.5;">        {
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 51</span>             cin&gt;&gt;<span style="font-size:12px;line-height:1.5;">Map[i][j];
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 52</span>             mask[i][j] = -<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span>;<span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">标志为未访问</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 53</span>             <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span> (Map[i][j] == <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">r</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">)
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 54</span>             {<span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">friend为起点，且化为road</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 55</span>                 Map[i][j] = <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">.</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 56</span>                 bx = i;    by =<span style="font-size:12px;line-height:1.5;"> j;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 57</span> <span style="font-size:12px;line-height:1.5;">            }
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 58</span>             <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span> (Map[i][j] == <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">a</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">)
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 59</span>             {<span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">angel为终点，且化为road</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 60</span>                 Map[i][j] = <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">.</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 61</span>                 ex = i;    ey =<span style="font-size:12px;line-height:1.5;"> j;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 62</span> <span style="font-size:12px;line-height:1.5;">            }
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 63</span> <span style="font-size:12px;line-height:1.5;">        }
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 64</span> <span style="font-size:12px;line-height:1.5;">    }
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 65</span> <span style="font-size:12px;line-height:1.5;">}
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 66</span> 
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 67</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">void</span><span style="font-size:12px;line-height:1.5;"> bfs()
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 68</span> <span style="font-size:12px;line-height:1.5;">{
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 69</span>     node n,m;<span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">m为队头，n为m衍生的测试点</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 70</span>     <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> i,ret;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 71</span>     <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">起点</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 72</span>     m.x =<span style="font-size:12px;line-height:1.5;"> bx;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 73</span>     m.y =<span style="font-size:12px;line-height:1.5;"> by;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 74</span>     m.len = <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span>;<span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">len</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 75</span>     mask[bx][by] = <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span>;<span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">ask</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 76</span>     q.push(m);<span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">push
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 77</span>     <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">处理</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 78</span>     <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">while</span><span style="font-size:12px;line-height:1.5;"> (q.size())
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 79</span> <span style="font-size:12px;line-height:1.5;">    {
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 80</span>         <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">get front</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 81</span>         m =<span style="font-size:12px;line-height:1.5;"> q.front();
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 82</span> <span style="font-size:12px;line-height:1.5;">        q.pop();
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 83</span>         <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">test node m</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 84</span>         <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">for</span> (i=<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span> ; i&lt;<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">4</span> ; i++<span style="font-size:12px;line-height:1.5;">)
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 85</span> <span style="font-size:12px;line-height:1.5;">        {
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 86</span>             n.x = m.x+step[i][<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span>]; n.y = m.y+step[i][<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span>];    n.len = m.len+<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span><span style="font-size:12px;line-height:1.5;">;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 87</span>             ret =<span style="font-size:12px;line-height:1.5;"> tryXY(n.x,n.y);
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 88</span>             <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">switch</span><span style="font-size:12px;line-height:1.5;">(ret)
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 89</span> <span style="font-size:12px;line-height:1.5;">            {
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 90</span>             <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">case</span> -<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span>:<span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 91</span>                 <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">break</span><span style="font-size:12px;line-height:1.5;">;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 92</span>             <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">case</span> <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span><span style="font-size:12px;line-height:1.5;">:
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 93</span>             <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">case</span> <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span><span style="font-size:12px;line-height:1.5;">:
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 94</span>                 n.len +=<span style="font-size:12px;line-height:1.5;"> ret;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 95</span>                 <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">如果未访问，保存花销；如果已经访问，保存花销最少。</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 96</span>                 <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span> (mask[n.x][n.y] == -<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span> || n.len&lt;<span style="font-size:12px;line-height:1.5;">mask[n.x][n.y])
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 97</span> <span style="font-size:12px;line-height:1.5;">                {
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 98</span>                     mask[n.x][n.y] = n.len;<span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">已经访问且保存的是最小花销</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 99</span> <span style="font-size:12px;line-height:1.5;">                    q.push(n);
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">100</span> <span style="font-size:12px;line-height:1.5;">                }
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">101</span>                 <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">break</span><span style="font-size:12px;line-height:1.5;">;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">102</span> <span style="font-size:12px;line-height:1.5;">            }
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">103</span> <span style="font-size:12px;line-height:1.5;">        }
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">104</span> 
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">105</span> <span style="font-size:12px;line-height:1.5;">    }
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">106</span> <span style="font-size:12px;line-height:1.5;">}
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">107</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> tryXY(<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> x,<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> y)
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">108</span> <span style="font-size:12px;line-height:1.5;">{
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">109</span>     <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> ret;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">110</span>     <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">越界或遇到墙</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">111</span>     <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span> (!(x&gt;=<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span> &amp;&amp; x&lt;w &amp;&amp; y&gt;=<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span> &amp;&amp; y&lt;h) || (Map[x][y] == <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">#</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">))
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">112</span>         ret = -<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span><span style="font-size:12px;line-height:1.5;">;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">113</span>     <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">road or angel</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">114</span>     <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span> (Map[x][y] == <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">.</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">)
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">115</span>         ret = <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span><span style="font-size:12px;line-height:1.5;">;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">116</span>     <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">guard</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">117</span>     <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span> (Map[x][y] == <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">x</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">)
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">118</span>         ret = <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span><span style="font-size:12px;line-height:1.5;">;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">119</span>     <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span><span style="font-size:12px;line-height:1.5;"> ret;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">120</span> }</pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <h4 style="font-size:14px;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;">然而这个代码还有一些不足~~</h4> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">1、82行代码之后应该判断是否到了目标点，达到目标则return，<span style="color:rgb(255,0,0);">此时就是花销最少的路径，而不需要全部遍历结束</span>；</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">2、96行的代码中“&lt;”判断是多余的，因为如果之前已经访问过了，那么现在的一定比之前的路径长；</p> 
   <h3 style="font-size:16px;line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;">Code 2：</h3> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">  1</span> #include&lt;iostream&gt;
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">  2</span> #include&lt;cstdio&gt;
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">  3</span> #include&lt;queue&gt;
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">  4</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">namespace</span><span style="font-size:12px;line-height:1.5;"> std;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">  5</span> 
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">  6</span> <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">定义结点结构体</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">  7</span> typedef <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">struct</span><span style="font-size:12px;line-height:1.5;">{
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">  8</span>     <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> x;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">  9</span>     <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> y;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 10</span>     <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> len;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 11</span> <span style="font-size:12px;line-height:1.5;">}node;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 12</span> <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">定义全局变量</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 13</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">#define</span> M 202
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 14</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">char</span> Map[M][M];     <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">地图</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 15</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> visited[M][M];     <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">地图访问标识</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 16</span> queue&lt;node&gt; q;      <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">队列，在bfs中用到</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 17</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> bx,by,ex,ey,w,h;<span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">起点、终点、地图宽、地图高</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 18</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> step[<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">4</span>][<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">2</span>] =<span style="font-size:12px;line-height:1.5;"> {
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 19</span>     <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span>,-<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span>,   <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">move up</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 20</span>     <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span>,<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span>,    <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">move right</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 21</span>     <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span>,<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span>,    <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">move down</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 22</span>     -<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span>,<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span>    <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">move left</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 23</span> <span style="font-size:12px;line-height:1.5;">};
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 24</span> 
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 25</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">void</span> readMap(<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> m,<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> n);  <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">读取地图</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 26</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">void</span> bfs();                 <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">bfs搜索路径</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 27</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> costXY(<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> x,<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> y);     <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">尝试x，y是否可行</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 28</span> 
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 29</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">void</span><span style="font-size:12px;line-height:1.5;"> main(){
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 30</span>     <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">while</span>(scanf(<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">%d %d</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span>,&amp;w,&amp;h) == <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">2</span><span style="font-size:12px;line-height:1.5;">){
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 31</span> <span style="font-size:12px;line-height:1.5;">        readMap(w,h);
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 32</span> <span style="font-size:12px;line-height:1.5;">        bfs();
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 33</span>         <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span>(visited[ex][ey]!=-<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span><span style="font-size:12px;line-height:1.5;">){
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 34</span>             cout&lt;&lt;visited[ex][ey]&lt;&lt;<span style="font-size:12px;line-height:1.5;">endl;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 35</span>         }<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">else</span><span style="font-size:12px;line-height:1.5;">{
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 36</span>             cout&lt;&lt;<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">Poor ANGEL has to stay in the prison all his life.</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span>&lt;&lt;<span style="font-size:12px;line-height:1.5;">endl;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 37</span> <span style="font-size:12px;line-height:1.5;">        }
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 38</span> <span style="font-size:12px;line-height:1.5;">    }
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 39</span> <span style="font-size:12px;line-height:1.5;">}
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 40</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">void</span> readMap(<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> m,<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> n){
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 41</span>     <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> i,j;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 42</span>     <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">for</span>(i=<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span>;i&lt;m;i++<span style="font-size:12px;line-height:1.5;">){
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 43</span>         <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">for</span>(j=<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span>;j&lt;n;j++<span style="font-size:12px;line-height:1.5;">){
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 44</span>             cin&gt;&gt;<span style="font-size:12px;line-height:1.5;">Map[i][j];
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 45</span>             visited[i][j] = -<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span>;<span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">-1表示未访问</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 46</span>             <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span>(Map[i][j] == <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">r</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span>){<span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">store the start point</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 47</span>                 Map[i][j] = <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">.</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 48</span>                 bx =<span style="font-size:12px;line-height:1.5;"> i;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 49</span>                 by =<span style="font-size:12px;line-height:1.5;"> j;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 50</span> <span style="font-size:12px;line-height:1.5;">            }
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 51</span>             <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span>(Map[i][j] == <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">a</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span>){<span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">store the end point</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 52</span>                 Map[i][j] = <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">.</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 53</span>                 ex =<span style="font-size:12px;line-height:1.5;"> i;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 54</span>                 ey =<span style="font-size:12px;line-height:1.5;"> j;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 55</span> <span style="font-size:12px;line-height:1.5;">            }
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 56</span> <span style="font-size:12px;line-height:1.5;">        }
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 57</span> <span style="font-size:12px;line-height:1.5;">    }
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 58</span> <span style="font-size:12px;line-height:1.5;">}
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 59</span> 
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 60</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">void</span><span style="font-size:12px;line-height:1.5;"> bfs(){
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 61</span>     node n,m;<span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">m is queue head, n is a copied m for test;</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 62</span>     <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> ret;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 63</span>     <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">save start point into the queue</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 64</span>     m.x =<span style="font-size:12px;line-height:1.5;"> bx;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 65</span>     m.y =<span style="font-size:12px;line-height:1.5;"> by;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 66</span>     m.len = <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span><span style="font-size:12px;line-height:1.5;">;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 67</span>     visited[bx][by] = <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span><span style="font-size:12px;line-height:1.5;">;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 68</span> <span style="font-size:12px;line-height:1.5;">    q.push(m);
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 69</span>     <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">bfs</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 70</span>     <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">while</span><span style="font-size:12px;line-height:1.5;">(q.size()){
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 71</span>         <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">get the head point</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 72</span>         m =<span style="font-size:12px;line-height:1.5;"> q.front();
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 73</span> <span style="font-size:12px;line-height:1.5;">        q.pop();
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 74</span>         <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">if arrive end point return</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 75</span>         <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span>(m.x == ex &amp;&amp; m.y ==<span style="font-size:12px;line-height:1.5;"> ey){
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 76</span>             visited[ex][ey] =<span style="font-size:12px;line-height:1.5;"> m.len;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 77</span>             <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span><span style="font-size:12px;line-height:1.5;"> ;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 78</span> <span style="font-size:12px;line-height:1.5;">        }
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 79</span>         <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">test node m</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 80</span>         <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">for</span>(<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> i=<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span>;i&lt;<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">4</span>;i++<span style="font-size:12px;line-height:1.5;">){
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 81</span>             n.x = m.x + step[i][<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span><span style="font-size:12px;line-height:1.5;">];
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 82</span>             n.y = m.y + step[i][<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span><span style="font-size:12px;line-height:1.5;">];
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 83</span>             n.len = m.len + <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span><span style="font-size:12px;line-height:1.5;">;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 84</span>             ret =<span style="font-size:12px;line-height:1.5;"> costXY(n.x,n.y);
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 85</span>             <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">switch</span><span style="font-size:12px;line-height:1.5;">(ret){
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 86</span>             <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">case</span> -<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span><span style="font-size:12px;line-height:1.5;">:
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 87</span>                 <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">break</span><span style="font-size:12px;line-height:1.5;">;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 88</span>             <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">case</span> <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span><span style="font-size:12px;line-height:1.5;">:
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 89</span>             <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">case</span> <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span><span style="font-size:12px;line-height:1.5;">:
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 90</span>                 n.len +=<span style="font-size:12px;line-height:1.5;"> ret;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 91</span>                 <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">if first time visit, save the cost
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 92</span>                 <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">if has been visited, save the minimum cost</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 93</span>                 <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span>(visited[n.x][n.y] == -<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span><span style="font-size:12px;line-height:1.5;">){
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 94</span>                     visited[n.x][n.y] =<span style="font-size:12px;line-height:1.5;"> n.len;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 95</span> <span style="font-size:12px;line-height:1.5;">                    q.push(n);
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 96</span> <span style="font-size:12px;line-height:1.5;">                }
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 97</span>                 <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">break</span><span style="font-size:12px;line-height:1.5;">;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 98</span> <span style="font-size:12px;line-height:1.5;">            }
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 99</span> <span style="font-size:12px;line-height:1.5;">        }
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">100</span> <span style="font-size:12px;line-height:1.5;">    }
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">101</span> <span style="font-size:12px;line-height:1.5;">}
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">102</span> 
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">103</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> costXY(<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> x,<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> y){
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">104</span>     <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> ret;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">105</span>     <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">out of map or a wall</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">106</span>     <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span>(!(x&gt;=<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span> &amp;&amp; x&lt;=w &amp;&amp; y&gt;=<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span> &amp;&amp; y&lt;=h) || Map[x][y] == <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">#</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">){
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">107</span>         ret = -<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span><span style="font-size:12px;line-height:1.5;">;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">108</span> <span style="font-size:12px;line-height:1.5;">    }
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">109</span>     <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">road or angel</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">110</span>     <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span>(Map[x][y] == <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">.</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">){
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">111</span>         ret = <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span><span style="font-size:12px;line-height:1.5;">;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">112</span> <span style="font-size:12px;line-height:1.5;">    }
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">113</span>     <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">guard, need one more unit time</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">114</span>     <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span>(Map[x][y] == <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">x</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="font-size:12px;line-height:1.5;">){
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">115</span>         ret = <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span><span style="font-size:12px;line-height:1.5;">;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">116</span> <span style="font-size:12px;line-height:1.5;">    }
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">117</span>     <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span><span style="font-size:12px;line-height:1.5;"> ret;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">118</span> }</pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <h2 style="font-size:21px;line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;">6.2 HDOJ1372 Knight Moves</h2> 
   <h3 style="font-size:16px;line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;">Description:</h3> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">A friend of you is doing research on the Traveling Knight Problem (TKP) where you are to find the shortest closed tour of knight moves that visits each square of a given set of n squares on a chessboard exactly once. He thinks that the most difficult part of the problem is determining the smallest number of knight moves between two given squares and that, once you have accomplished this, finding the tour would be easy.<br> Of course you know that it is vice versa. So you offer him to write a program that solves the "difficult" part.&nbsp;<br> Your job is to write a program that takes two squares a and b as input and then determines the number of knight moves on a shortest route from a to b.</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images0.cnblogs.com/blog2015/323808/201506/041205508169940.jpg" alt="" style="border:none;"></p> 
   <h3 style="font-size:16px;line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;">Input:</h3> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">The input file will contain one or more test cases. Each test case consists of one line containing two squares separated by one space. A square is a string consisting of a letter (a-h) representing the column and a digit (1-8) representing the row on the chessboard.</p> 
   <h3 style="font-size:16px;line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;">Output:</h3> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">For each test case, print one line saying "To get from xx to yy takes n knight moves.".</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">Sample Input:</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">1</span> <span style="font-size:12px;line-height:1.5;">e2 e4
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">2</span> <span style="font-size:12px;line-height:1.5;">a1 b2
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">3</span> <span style="font-size:12px;line-height:1.5;">b2 c3
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">4</span> <span style="font-size:12px;line-height:1.5;">a1 h8
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">5</span> <span style="font-size:12px;line-height:1.5;">a1 h7
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">6</span> <span style="font-size:12px;line-height:1.5;">h8 a1
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">7</span> <span style="font-size:12px;line-height:1.5;">b1 c3
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">8</span> f6 f6</pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">Sample Output:</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">1</span> To <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">get</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">from</span> e2 to e4 takes <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">2</span><span style="font-size:12px;line-height:1.5;"> knight moves.
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">2</span> To <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">get</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">from</span> a1 to b2 takes <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">4</span><span style="font-size:12px;line-height:1.5;"> knight moves.
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">3</span> To <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">get</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">from</span> b2 to c3 takes <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">2</span><span style="font-size:12px;line-height:1.5;"> knight moves.
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">4</span> To <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">get</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">from</span> a1 to h8 takes <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">6</span><span style="font-size:12px;line-height:1.5;"> knight moves.
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">5</span> To <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">get</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">from</span> a1 to h7 takes <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">5</span><span style="font-size:12px;line-height:1.5;"> knight moves.
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">6</span> To <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">get</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">from</span> h8 to a1 takes <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">6</span><span style="font-size:12px;line-height:1.5;"> knight moves.
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">7</span> To <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">get</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">from</span> b1 to c3 takes <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span><span style="font-size:12px;line-height:1.5;"> knight moves.
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">8</span> To <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">get</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">from</span> f6 to f6 takes <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span> knight moves.</pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">Code:</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 1</span> #include&lt;iostream&gt;
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 2</span> #include&lt;cstdio&gt;
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 3</span> #include&lt;queue&gt;
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 4</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">namespace</span><span style="font-size:12px;line-height:1.5;"> std;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 5</span> 
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 6</span> <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">定义node结构体</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 7</span> typedef <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">struct</span><span style="font-size:12px;line-height:1.5;">{
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 8</span>     <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> x,y,len;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;"> 9</span> <span style="font-size:12px;line-height:1.5;">}node;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">10</span> <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">八个方向</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">11</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> step[<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">8</span>][<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">2</span>] =<span style="font-size:12px;line-height:1.5;"> {
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">12</span>     -<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">2</span>,-<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span>,  <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">left2-up1</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">13</span>     -<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span>,-<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">2</span>,  <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">left1-up2</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">14</span>     <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span>,-<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">2</span>,   <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">right1-up2</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">15</span>     <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">2</span>,-<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span>,   <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">right2-up1</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">16</span>     <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">2</span>,<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span>,    <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">right2-down1</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">17</span>     <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span>,<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">2</span>,    <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">right2-down2</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">18</span>     -<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span>,<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">2</span>,   <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">left1-down2</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">19</span>     -<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">2</span>,<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span>   <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">left2-down1</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">20</span> <span style="font-size:12px;line-height:1.5;">};
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">21</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">#define</span> M 10
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">22</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> Map[M][M];<span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">chessboard</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">23</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> bx,by,ex,ey;<span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">begin point,end point</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">24</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">char</span> a[<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">3</span>],b[<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">3</span><span style="font-size:12px;line-height:1.5;">];
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">25</span> 
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">26</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">void</span> bfs(<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> x,<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> y);
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">27</span> 
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">28</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">void</span><span style="font-size:12px;line-height:1.5;"> main(){
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">29</span>     <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">while</span>(scanf(<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">%s%s</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span>,a,b)!=<span style="font-size:12px;line-height:1.5;">EOF){
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">30</span>         bx = a[<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span>]-<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">a</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span>+<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span>;    <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">the range of index is from 1 to 8</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">31</span>         by = a[<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span>]-<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">0</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span>;      <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">the range of index is from 1 to 8</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">32</span>         ex = b[<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span>]-<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">a</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span>+<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span>;    <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">the range of index is from 1 to 8</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">33</span>         ey = b[<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span>]-<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">0</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">'</span>;      <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">the range of index is from 1 to 8</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">34</span> <span style="font-size:12px;line-height:1.5;">        bfs(bx,by);
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">35</span> <span style="font-size:12px;line-height:1.5;">    }
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">36</span>     <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span> <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span><span style="font-size:12px;line-height:1.5;">;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">37</span> <span style="font-size:12px;line-height:1.5;">}
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">38</span> 
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">39</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">void</span> bfs(<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> x,<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;"> y){
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">40</span> <span style="font-size:12px;line-height:1.5;">    node t,p;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">41</span>     queue&lt;node&gt;<span style="font-size:12px;line-height:1.5;"> q;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">42</span>     <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">BFS Step1:push first node t into queue q</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">43</span>     t.x =<span style="font-size:12px;line-height:1.5;"> x;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">44</span>     t.y =<span style="font-size:12px;line-height:1.5;"> y;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">45</span>     t.len = <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span><span style="font-size:12px;line-height:1.5;">;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">46</span> <span style="font-size:12px;line-height:1.5;">    q.push(t);
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">47</span>     <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">while(!q.empty())</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">48</span>     <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">while</span><span style="font-size:12px;line-height:1.5;">(q.size()){
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">49</span>         <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">BFS Step2:get the head of queue</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">50</span>         t =<span style="font-size:12px;line-height:1.5;"> q.front();
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">51</span> <span style="font-size:12px;line-height:1.5;">        q.pop();
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">52</span>         <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">BFS Step3:arrive the end point,return. first time arriving is the minimum.</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">53</span>         <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span>(t.x == ex &amp;&amp; t.y ==<span style="font-size:12px;line-height:1.5;"> ey){
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">54</span>             printf(<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">To get from %s to %s takes %d knight moves.\n</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">,a,b,t.num);
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">55</span>             <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">return</span><span style="font-size:12px;line-height:1.5;">;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">56</span> <span style="font-size:12px;line-height:1.5;">        }
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">57</span>         <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">BFS Step4:push the next steps into queue q</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">58</span>         <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">for</span>(<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span> i=<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span>;i&lt;<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">8</span>;i++<span style="font-size:12px;line-height:1.5;">){
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">59</span> <span style="font-size:12px;line-height:1.5;">            node next;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">60</span>             next.x = t.x + step[i][<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span><span style="font-size:12px;line-height:1.5;">];
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">61</span>             next.y = t.y + step[i][<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span><span style="font-size:12px;line-height:1.5;">];
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">62</span>             <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">no out of range and not been visited</span>
<span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">63</span>             <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span>(!(next.x&gt;<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span> &amp;&amp; next.x&lt;<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">9</span> &amp;&amp; next.y&gt;<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">0</span> &amp;&amp; next.y&lt;<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">9</span>) &amp;&amp; !<span style="font-size:12px;line-height:1.5;">Map[next.x][next.y]){
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">64</span>                 next.len = t.len+<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">1</span><span style="font-size:12px;line-height:1.5;">;
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">65</span> <span style="font-size:12px;line-height:1.5;">                q.push(next);
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">66</span> <span style="font-size:12px;line-height:1.5;">            }
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">67</span> <span style="font-size:12px;line-height:1.5;">        }
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">68</span> <span style="font-size:12px;line-height:1.5;">    }
</span><span style="color:rgb(0,128,128);font-size:12px;line-height:1.5;">69</span> }</pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><br></p> 
   <p><font color="#333333"><span style="font-size:14px;">本文转自ZH奶酪博客园博客，原文链接：http://www.cnblogs.com/CheeseZH/p/4550602.html，如需转载请自行联系原作者</span></font><br></p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
