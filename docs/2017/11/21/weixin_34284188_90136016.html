<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>C#组件系列——又一款日志组件：Elmah的学习和分享 « NotBeCN</title>
  <meta name="description" content="                  阅读目录          &nbsp;一、组件介绍       二、组件安装使用              1、安装组件        2、配置组件        3、测试效果              三、功能介绍              1、将日志信息保存到数据库   ...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/21/weixin_34284188_90136016.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">C#组件系列——又一款日志组件：Elmah的学习和分享</h1>
    <p class="post-meta">Nov 21, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <div style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"> 
    <p style="font-size:18px;"><b>阅读目录</b></p> 
    <ul>
     <li><a href="http://www.cnblogs.com/landeanfen/p/6221403.html#_label0" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">&nbsp;一、组件介绍</a></li> 
     <li> <a href="http://www.cnblogs.com/landeanfen/p/6221403.html#_label1" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">二、组件安装使用</a> 
      <ul>
       <li><a href="http://www.cnblogs.com/landeanfen/p/6221403.html#_label1_0" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">1、安装组件</a></li> 
       <li><a href="http://www.cnblogs.com/landeanfen/p/6221403.html#_label1_1" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">2、配置组件</a></li> 
       <li><a href="http://www.cnblogs.com/landeanfen/p/6221403.html#_label1_2" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">3、测试效果</a></li> 
      </ul></li> 
     <li> <a href="http://www.cnblogs.com/landeanfen/p/6221403.html#_label2" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">三、功能介绍</a> 
      <ul>
       <li><a href="http://www.cnblogs.com/landeanfen/p/6221403.html#_label2_0" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">1、将日志信息保存到数据库</a></li> 
       <li><a href="http://www.cnblogs.com/landeanfen/p/6221403.html#_label2_1" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">2、程序“吃掉”异常</a></li> 
       <li><a href="http://www.cnblogs.com/landeanfen/p/6221403.html#_label2_2" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">3、组件权限问题</a></li> 
      </ul></li> 
     <li><a href="http://www.cnblogs.com/landeanfen/p/6221403.html#_label3" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">四、总结</a></li> 
    </ul>
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">&nbsp;</p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;line-height:24px;font-size:18px;"><b>正文</b></p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">前言：好久没动笔了，都有点生疏，12月都要接近尾声，可是这月连一篇的产出都没有，不能坏了“规矩”，今天还是来写一篇。最近个把月确实很忙，不过每天早上还是会抽空来园子里逛逛。一如既往，园子里每年这个时候都有大把的年终总结、回忆过去展望未来之类的文章。博主是没时间写总结了，要学的东西太多。关于Vue的系列一定要抽时间补上。最近刚用了一个日志组件Elmah，比较适合开发阶段异常信息的快速定位与追溯，有兴趣的跟着博主一起来看看吧。</p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">本文原创地址：<a href="http://www.cnblogs.com/landeanfen/p/6221403.html" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">http://www.cnblogs.com/landeanfen/p/6221403.html</a></p> 
   <div style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;text-align:right;"> 
    <a href="http://www.cnblogs.com/landeanfen/p/6221403.html#_labelTop" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">回到顶部</a>
    <a name="_label0" style="color:rgb(39,105,192);"></a> 
   </div> 
   <h1 style="font-size:25px;line-height:31px;color:rgb(255,255,255);font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(43,102,0);">&nbsp;一、组件介绍</h1> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><strong>ELMAH</strong>的全称是The Error Logging Modules And Handlers，翻译过来是错误日志模块和处理。顾名思义，就是一个日志的拦截和处理组件，说到.net的日志组件，大家的第一反应该是Log4Net、NLog等这些东西，关于Log4Net和NLog，可以说是.net日志组件里面使用最为广泛的组件了，它们功能强大、使用方便。相比它们：</p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><strong>1、ELMAH的使用更加简单，它甚至不用写一句代码，只需要引入dll，然后在Web.config里面配置相应的节点即可；</strong></p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><strong>2、按照网上的说法，ELMAH是一种“可拔插式”的组件，即在一个运行的项目里面我们可以随意轻松加入日志功能，或者移除日志功能；</strong></p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><strong>3、ELMAH组件自带界面，不用写任何代码，即可查看异常日志的界面，轻松找到当前异常的详细信息；和web的结合更加紧密；</strong></p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><strong>4、组件提供了一个用于集中记录和通知错误日志的机制，通过邮件的机制通知错误信息给相关人员。</strong></p> 
   <div style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;text-align:right;"> 
    <a href="http://www.cnblogs.com/landeanfen/p/6221403.html#_labelTop" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">回到顶部</a>
    <a name="_label1" style="color:rgb(39,105,192);"></a> 
   </div> 
   <h1 style="font-size:25px;line-height:31px;color:rgb(255,255,255);font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(43,102,0);">二、组件安装使用</h1> 
   <div style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;text-align:right;"> 
    <a href="http://www.cnblogs.com/landeanfen/p/6221403.html#_labelTop" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">回到顶部</a>
    <a name="_label1_0" style="color:rgb(39,105,192);"></a> 
   </div> 
   <h2 style="font-size:15px;line-height:23px;color:rgb(255,255,255);font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(43,102,149);">1、安装组件</h2> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">&nbsp;Elmah的安装使用同样也很简单，我们万能的Nuget帮我们一键搞定。</p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><img src="https://images2015.cnblogs.com/blog/459756/201612/459756-20161227101629664-1826241477.png" alt="" style="border:0px;"></p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">安装如上图的两个组件即可在MVC项目里面应用起来。注意这里有一个依赖关系Elmah.MVC依赖Elmah.corelibrary组件。</p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">安装成功后，项目中会添加如下两个dll的引用。</p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><img src="https://images2015.cnblogs.com/blog/459756/201612/459756-20161227101919820-1168356548.png" alt="" style="border:0px;"></p> 
   <div style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;text-align:right;"> 
    <a href="http://www.cnblogs.com/landeanfen/p/6221403.html#_labelTop" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">回到顶部</a>
    <a name="_label1_1" style="color:rgb(39,105,192);"></a> 
   </div> 
   <h2 style="font-size:15px;line-height:23px;color:rgb(255,255,255);font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(43,102,149);">2、配置组件</h2> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">组件安装成功之后，会自动在我们MVC项目的Web.config里面添加如下节点：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">sectionGroup </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">name</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="elmah"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
      <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">section </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">name</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="security"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> requirePermission</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="false"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> type</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="Elmah.SecuritySectionHandler, Elmah"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">/&gt;</span>
      <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">section </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">name</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="errorLog"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> requirePermission</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="false"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> type</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="Elmah.ErrorLogSectionHandler, Elmah"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">/&gt;</span>
      <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">section </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">name</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="errorMail"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> requirePermission</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="false"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> type</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="Elmah.ErrorMailSectionHandler, Elmah"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">/&gt;</span>
      <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">section </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">name</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="errorFilter"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> requirePermission</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="false"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> type</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="Elmah.ErrorFilterSectionHandler, Elmah"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">/&gt;</span>
<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">sectionGroup</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">

......

</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">appSettings</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
   <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">add </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">key</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="elmah.mvc.disableHandler"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> value</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="false"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">/&gt;</span>
   <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">add </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">key</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="elmah.mvc.disableHandleErrorFilter"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> value</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="false"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">/&gt;</span>      
   <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">add </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">key</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="elmah.mvc.requiresAuthentication"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> value</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="false"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">/&gt;</span>
   <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">add </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">key</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="elmah.mvc.IgnoreDefaultRoute"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> value</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="false"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">/&gt;</span>
   <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">add </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">key</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="elmah.mvc.allowedRoles"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> value</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="*"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">/&gt;</span>
   <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">add </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">key</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="elmah.mvc.allowedUsers"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> value</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="*"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">/&gt;</span>
   <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">add </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">key</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="elmah.mvc.route"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> value</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="elmah"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">/&gt;</span>
   <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">add </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">key</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="elmah.mvc.UserAuthCaseSensitive"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> value</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="true"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">/&gt;<br>
&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">appSettings</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">

......

</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">httpModules</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">add </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">name</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="ErrorLog"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> type</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="Elmah.ErrorLogModule, Elmah"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">/&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">add </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">name</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="ErrorMail"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> type</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="Elmah.ErrorMailModule, Elmah"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">/&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">add </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">name</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="ErrorFilter"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> type</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="Elmah.ErrorFilterModule, Elmah"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">/&gt;</span>
<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">httpModules</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">

......

</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">system.webServer</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
  <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">modules</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">add </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">name</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="ErrorLog"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> type</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="Elmah.ErrorLogModule, Elmah"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> preCondition</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="managedHandler"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">/&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">add </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">name</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="ErrorMail"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> type</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="Elmah.ErrorMailModule, Elmah"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> preCondition</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="managedHandler"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">/&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">add </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">name</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="ErrorFilter"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> type</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="Elmah.ErrorFilterModule, Elmah"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> preCondition</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="managedHandler"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">/&gt;</span>
  <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">modules</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">system.webServer</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">

......

</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">elmah</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">elmah</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">除此之外，还需要手动在Web.config里面加入如下配置节点：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">elmah</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">security </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">allowRemoteAccess</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="false"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">/&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">&lt;!--</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">三种存储方式：内存、xml、数据库。存储到xml里面格式如下行</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">--&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">&lt;!--</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">&lt;errorLog type="Elmah.XmlFileErrorLog, Elmah" logPath="~/Static/Log/" /&gt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">--&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">&lt;!--</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">&lt;errorLog type="Elmah.SqlErrorLog, Elmah" connectionStringName="ElmahConn" /&gt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">--&gt;</span>
<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">elmah</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
  <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">location </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">path</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="elmah.axd"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> inheritInChildApplications</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="false"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">system.web</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
      <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">httpHandlers</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">add </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">verb</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="POST,GET,HEAD"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> path</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="elmah.axd"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> type</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="Elmah.ErrorLogPageFactory, Elmah"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">/&gt;</span>
      <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">httpHandlers</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">system.web</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">system.webServer</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
      <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">handlers</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">add </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">name</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="ELMAH"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> verb</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="POST,GET,HEAD"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> path</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="elmah.axd"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> type</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="Elmah.ErrorLogPageFactory, Elmah"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> preCondition</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="integratedMode"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">/&gt;</span>
      <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">handlers</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">system.webServer</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
  <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">location</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">需要说明的是在elmah节点里面可以配置组件支持的三种日志存储方式：</p> 
   <ul style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">
    <li>如果elmah节点不配置任何任何东西，表示默认组件是将日志信息保存到内存中，这种方式的弊端在于一旦系统重启，所有的异常信息都会丢失；</li> 
    <li>&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"><span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">errorLog&nbsp;</span><span style="color:rgb(255,0,0);line-height:1.5;">type</span><span style="color:rgb(0,0,255);line-height:1.5;">="Elmah.XmlFileErrorLog, Elmah"</span><span style="color:rgb(255,0,0);line-height:1.5;">&nbsp;logPath</span><span style="color:rgb(0,0,255);line-height:1.5;">="~/Static/Log/"</span>&nbsp;<span style="color:rgb(0,0,255);line-height:1.5;">/&gt;</span></span>&nbsp;表示日志保存到xml文件里面，第二个属性配置保存xml的路径；</li> 
    <li>&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"><span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">errorLog&nbsp;</span><span style="color:rgb(255,0,0);line-height:1.5;">type</span><span style="color:rgb(0,0,255);line-height:1.5;">="Elmah.SqlErrorLog, Elmah"</span><span style="color:rgb(255,0,0);line-height:1.5;">&nbsp;connectionStringName</span><span style="color:rgb(0,0,255);line-height:1.5;">="ElmahConn"</span>&nbsp;<span style="color:rgb(0,0,255);line-height:1.5;">/&gt;</span></span>&nbsp;表示日志保存到数据库里面，第二个参数对应数据库的链接字符串的name，也就是说如果配置保存到数据库，则必须要在web.config里面配置连接字符串，这里的connectionStringName就对应我们配置的连接字符串的name，并且这个时候还需要使用脚本在数据库里面新建需要的表和存储过程，这个放在后面说。</li> 
   </ul>
   <div style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;text-align:right;"> 
    <a href="http://www.cnblogs.com/landeanfen/p/6221403.html#_labelTop" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">回到顶部</a>
    <a name="_label1_2" style="color:rgb(39,105,192);"></a> 
   </div> 
   <h2 style="font-size:15px;line-height:23px;color:rgb(255,255,255);font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(43,102,149);">3、测试效果</h2> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">通过以上安装和配置，我们即可记录异常。首先我们采用内存的方式来记录异常，先来看看效果：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> HomeController : Controller
{
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> ActionResult Index()
        {
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> View();
        }
        
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">测试异常</span>
        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> JsonResult Get()
        {
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> a = <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,128);">0</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">;
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> b = <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,128);">5</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">;
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> c = b /<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> a;
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> Json(a, JsonRequestBehavior.AllowGet);
        }
}</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">然后我们前端ajax来调用</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">html</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">head</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">title</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>Index<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">title</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">script </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">src</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="~/Scripts/jquery-1.9.1.min.js"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">script</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">script </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">type</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="text/javascript"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">
        $(</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> () {
            $(</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">#btn</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">).click(</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> () {
                $.ajax({
                    type: </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">'</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">get</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">'</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">,
                    url: </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">'</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">/Home/Get</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">'</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">,
                    data: {},
                });
            });
        });
    </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">script</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">head</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">body</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">h1</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>首页<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">h1</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">div</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span> 
        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">button </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">type</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="button"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> id</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="btn"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>测试异常<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">button</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">div</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">body</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">html</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">点击按钮出现异常，然后我们通过地址http://localhost:51230/elmah.axd来查看异常信息。</p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><img src="https://images2015.cnblogs.com/blog/459756/201612/459756-20161228105615632-542176010.png" alt="" style="border:0px;"></p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">点击展开详细信息如下</p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><img src="https://images2015.cnblogs.com/blog/459756/201612/459756-20161228105741226-1328707581.png" alt="" style="border:0px;"></p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">&nbsp;到这一步，我们的组件就可以生效了。但是看到这个elmah.axd这个路径太恶心了，我们想要改一下，用我们自己的路径，呵呵，这个确实是可以配置的。我们再来看看web.config里面的location节点，在location节点里面其实就配置一个东西——<strong>HttpHandler，</strong>虽然有&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">system.web</span>&nbsp;和&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">system.webServer</span>&nbsp;两个节点，如果你仔细观察，其实它们是一个东西，只不过是为了兼容不同的IIS版本而写了两个配置，这一点和我们HttpHandler的配置是相同的，对于这个配置不熟悉的，可以看看博主之前的文章<a href="http://www.cnblogs.com/landeanfen/p/6000978.html" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">http://www.cnblogs.com/landeanfen/p/6000978.html</a>。我们将location的节点改成这样：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>  <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">location </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">path</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="log.axd"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> inheritInChildApplications</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="false"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">&lt;!--</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">&lt;system.web&gt;
      &lt;httpHandlers&gt;
        &lt;add verb="POST,GET,HEAD" path="log.axd" type="Elmah.ErrorLogPageFactory, Elmah" /&gt;
      &lt;/httpHandlers&gt;
    &lt;/system.web&gt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">--&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">system.webServer</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
      <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">handlers</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">add </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">name</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="ELMAH"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> verb</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="POST,GET,HEAD"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> path</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="log.axd"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> type</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="Elmah.ErrorLogPageFactory, Elmah"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> preCondition</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="integratedMode"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">/&gt;</span>
      <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">handlers</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">system.webServer</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
  <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">location</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">然后我们通过http://localhost:51230/log.axd这个地址来访问，能达到同样的效果。博主本地使用的是IIS经典模式，所以使用的是system.webServer里面的配置，注释掉或者删掉system.web节点都不会有任何问题。</p> 
   <div style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;text-align:right;"> 
    <a href="http://www.cnblogs.com/landeanfen/p/6221403.html#_labelTop" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">回到顶部</a>
    <a name="_label2" style="color:rgb(39,105,192);"></a> 
   </div> 
   <h1 style="font-size:25px;line-height:31px;color:rgb(255,255,255);font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(43,102,0);">三、功能介绍</h1> 
   <div style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;text-align:right;"> 
    <a href="http://www.cnblogs.com/landeanfen/p/6221403.html#_labelTop" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">回到顶部</a>
    <a name="_label2_0" style="color:rgb(39,105,192);"></a> 
   </div> 
   <h2 style="font-size:15px;line-height:23px;color:rgb(255,255,255);font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(43,102,149);">1、将日志信息保存到数据库</h2> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">上述使用在内存中保存日志信息的方式，在实际项目中基本上很少会用到。除此之外，还有保存到xml和数据库两种方式。保存到xml文件这个没什么好说的，就是配置一下保存路径即可。下面就以保存到数据库的方式来看看想想介绍下。</p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">首先我们在web.config里面加入连接字符串节点。</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>  <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">connectionStrings</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">add </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">name</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="ElmahConn"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> connectionString</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="Data source=127.0.0.1;Initial Catalog=PowerMangent;Persist Security Info=True;User ID=sa;Password=123456"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> providerName</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="System.Data.EntityClient"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">/&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">add </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">name</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="ElmahContainer"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> connectionString</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="metadata=res://*/Elmah.csdl|res://*/Elmah.ssdl|res://*/Elmah.msl;provider=System.Data.SqlClient;provider connection string=&amp;quot;data source=127.0.0.1;initial catalog=PowerMangent;user id=sa;password=123456;MultipleActiveResultSets=True;App=EntityFramework&amp;quot;"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> providerName</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="System.Data.EntityClient"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">/&gt;</span>
  <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">connectionStrings</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">然后配置elmah节点</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;">
    <pre>  <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">elmah</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">security </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">allowRemoteAccess</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="false"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">/&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">errorLog </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">type</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="Elmah.SqlErrorLog, Elmah"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> connectionStringName</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="ElmahConn"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">/&gt;</span>
  <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">elmah</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span></pre>
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">最后就是在数据库创建需要的表和存储过程，官方提供了脚本，这个不用我们担心，脚本如下</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border:1px solid #808080;line-height:1.5;">CreateElmah.sql</span> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">&nbsp;做了以上三步之后，程序里面的异常就能记录到数据库里面，程序再次启动的时候会自动从数据库里面去取对应的信息。</p> 
   <div style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;text-align:right;"> 
    <a href="http://www.cnblogs.com/landeanfen/p/6221403.html#_labelTop" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">回到顶部</a>
    <a name="_label2_1" style="color:rgb(39,105,192);"></a> 
   </div> 
   <h2 style="font-size:15px;line-height:23px;color:rgb(255,255,255);font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(43,102,149);">2、程序“吃掉”异常</h2> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">如果你反编译elmah组件，你会它的原理其实就是通过配置的方式通过HttpModule注册应用程序的Error事件，然后统一处理记录。既然是注册的Application_Error事件，那么肯定就存在某些情况会吃掉异常。</p> 
   <h3 style="font-size:16px;line-height:24px;font-family:'微软雅黑', PTSans, Arial, sans-serif;">（1）在程序里面try...catch...</h3> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">这种情况很好理解，如果你再代码里面显示的声明了try...catch那么异常肯定不会进到Application_Error事件里面去，组件也不会记录异常。</p> 
   <h3 style="font-size:16px;line-height:24px;font-family:'微软雅黑', PTSans, Arial, sans-serif;">（2）在异常捕获器里面处理了异常</h3> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">除了使用try吃掉异常之外，很多系统里面都会使用异常捕获器去统一捕获异常，如果再异常捕获器里面设置过异常已经处理，组件也不会记录异常。比如：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">　　　　protected</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">override</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">void</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> OnException(ExceptionContext filterContext)
        {
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">如果加了这一句，表示异常已经处理，不会尽到应用程序的Error事件里面去</span>
            filterContext.ExceptionHandled = <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">true</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">;
 
           </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">........</span>

            <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">base</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">.OnException(filterContext);
        }</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">这就是异常捕获器统一处理异常，既然这里标识了异常已经处理过，那么组件肯定不会再次处理。可是有些情况下，我们需要处理某些自定义异常，而对于系统异常我们还是希望组件能够记录，这种情况下怎么办呢？其实很简单，这里只需要判断一下，如果是自定义异常信息，这里就加上&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">filterContext.ExceptionHandled =&nbsp;<span style="color:rgb(0,0,255);line-height:1.5;">true</span>;</span>&nbsp;这一句，而对于其他系统异常，则统一加上这一句即可。这里还是做一个简单的演示供需要的园友参考。</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;">
    <pre>    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> MyException : Exception
    {
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> MyException(<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">string</span> message) : <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">base</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">(message)
        { }
    }</span></pre>
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">满足一定条件则抛出自定义异常</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> JsonResult Get()
        {
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">if</span> (DateTime.Now &gt; Convert.ToDateTime(<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">2016-12-15 10:00:00</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">))
            {
                </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">如果满足某些条件则抛出异常</span>
                <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">throw</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">new</span> MyException(<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">当前时间已过期</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">);
            }

            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span> Json(<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">OK</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">, JsonRequestBehavior.AllowGet);
        }</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">然后再全局异常处理里面</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">protected</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">override</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">void</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> OnException(ExceptionContext filterContext)
        {
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">if</span> (filterContext.Exception <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">is</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> MyException)
            {
                </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">如果加了这一句，表示异常已经处理，不会进到应用程序的Error事件里面去</span>
                filterContext.ExceptionHandled = <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">true</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">;
            }

            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">base</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">.OnException(filterContext);
        }</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">这样就能达到我们系统异常记录，自定义异常不记录的目的了。</p> 
   <div style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;text-align:right;"> 
    <a href="http://www.cnblogs.com/landeanfen/p/6221403.html#_labelTop" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">回到顶部</a>
    <a name="_label2_2" style="color:rgb(39,105,192);"></a> 
   </div> 
   <h2 style="font-size:15px;line-height:23px;color:rgb(255,255,255);font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(43,102,149);">3、组件权限问题</h2> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">&nbsp;关于elmah组件，被人诟病的一个重要原因就是其安全问题，如果控制不好很容易招到他人入侵。大神汤姆大叔有篇文章记录这个，有兴趣可以<a href="http://www.cnblogs.com/TomXu/archive/2012/01/13/2321456.html" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">看看</a>。关于我们/elmah.axd路径，我们肯定是需要做一些限制，不能允许每个人都去查看，下面从以下几个方面来完善。</p> 
   <h3 style="font-size:16px;line-height:24px;font-family:'微软雅黑', PTSans, Arial, sans-serif;">（1）拒绝远程访问</h3> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">在web.config里面有一个节点配置不允许远程访问。</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;">
    <pre>  <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">elmah</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">security </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">allowRemoteAccess</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="false"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">/&gt;</span>
  <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">elmah</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span></pre>
   </div> 
   <h3 style="font-size:16px;line-height:24px;font-family:'微软雅黑', PTSans, Arial, sans-serif;">（2）拒绝匿名用户访问</h3> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">对于没有登录到系统的用户，拒绝访问。这个可以在IIS上面配置，当然，我们在web.config里面也要做相应的配置</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">location </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">path</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="log.axd"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> inheritInChildApplications</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="false"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">system.web</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
      <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">authorization</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
           <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">deny </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">users</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="?"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">/&gt;</span>
        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">authorization</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">system.web</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
  <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">location</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <h3 style="font-size:16px;line-height:24px;font-family:'微软雅黑', PTSans, Arial, sans-serif;">（3）指定角色或用户访问</h3> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">&nbsp;可以在应用程序全局配置文件Global.asax里面的认证事件里面去做判断。</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">protected</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">void</span> Application_AuthenticateRequest(<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">object</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> sender, EventArgs e)
        {
            HttpApplication app </span>=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> (HttpApplication)sender;
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);"> 处理日志权限问题</span>
            <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">if</span> (Request.Url.ToString().Contains(<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">elmah.axd</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">))
            {
                </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> user =<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> app.Context.User;
                </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">if</span> (user == <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">null</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">)
                {
                    Response.Write(</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">无权限访问</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">);
                    Response.End();
                }
                </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> userData =<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> (UserInfo)user;
                </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">管理员角色才能查看</span>
                <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">if</span> (!<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">userData.UserData.IsAdmin)
                {
                    Response.Write(</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">无权限访问</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">);
                    Response.End();
                }
  
                </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">或者指定用户才能访问
               </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">if (userData.UserData.UserName!="administrator")
                </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">{
                   </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);"> Response.Write("无权限访问");
                   </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">Response.End();
                </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">}</span>
<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">            }
        }</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <div style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;text-align:right;"> 
    <a href="http://www.cnblogs.com/landeanfen/p/6221403.html#_labelTop" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">回到顶部</a>
    <a name="_label3" style="color:rgb(39,105,192);"></a> 
   </div> 
   <h1 style="font-size:25px;line-height:31px;color:rgb(255,255,255);font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(43,102,0);">四、总结</h1> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">以上总结了组件Elmah组件的使用和一些常见问题的处理。有兴趣的可以看看。欢迎<strong>推荐</strong>！</p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><br></p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><br></p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><br></p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><br></p> 
   <p><font><span style="line-height:24px;">本文转自懒得安分博客园博客，原文链接：http://www.cnblogs.com/landeanfen/p/6221403.html，如需转载请自行联系原作者</span></font><br></p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
