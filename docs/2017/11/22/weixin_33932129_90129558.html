<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>POJ - 2828 Buy Tickets (段树单点更新) « NotBeCN</title>
  <meta name="description" content="                  Description                  Railway tickets were difficult to buy around the Lunar New Year in China, so we must get up early and join a l...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/22/weixin_33932129_90129558.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">POJ - 2828 Buy Tickets (段树单点更新)</h1>
    <p class="post-meta">Nov 22, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <div class="hiddable" style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"> 
    <p>Description</p> 
    <div class="textBG"> 
     <div class="ptx"> 
      <p><em>Railway tickets were difficult to buy around the Lunar New Year in China, so we must get up early and join a long queue…</em></p> 
      <p>The Lunar New Year was approaching, but unluckily the Little Cat still had schedules going here and there. Now, he had to travel by train to Mianyang, Sichuan Province for the winter camp selection of the national team of Olympiad in Informatics.</p> 
      <p>It was one o’clock a.m. and dark outside. Chill wind from the northwest did not scare off the people in the queue. The cold night gave the Little Cat a shiver. Why not find a problem to think about?</p> 
      <p>That was none the less better than freezing to death!</p> 
      <p>People kept jumping the queue. Since it was too dark around, such moves would not be discovered even by the people adjacent to the queue-jumpers. “If every person in the queue is assigned an integral value and all the information about those who have jumped the queue and where they stand after queue-jumping is given, can I find out the final order of people in the queue?” Thought the Little Cat.</p> 
     </div> 
    </div> 
   </div> 
   <div class="hiddable" style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"> 
    <p>Input</p> 
    <div class="textBG"> 
     <div class="ptx"> 
      <p>There will be several test cases in the input. Each test case consists of&nbsp;<em>N</em>&nbsp;+ 1 lines where&nbsp;<em>N</em>&nbsp;(1 ≤&nbsp;<em>N</em>&nbsp;≤ 200,000) is given in the first line of the test case. The next<em>N</em>&nbsp;lines contain the pairs of values&nbsp;<em>Pos<sub>i</sub></em>&nbsp;and&nbsp;<em>Val<sub>i</sub></em>&nbsp;in the increasing order of&nbsp;<em>i</em>&nbsp;(1 ≤&nbsp;<em>i</em>&nbsp;≤&nbsp;<em>N</em>). For each&nbsp;<em>i</em>, the ranges and meanings of&nbsp;<em>Pos<sub>i</sub></em>&nbsp;and&nbsp;<em>Val<sub>i</sub></em>&nbsp;are as follows:</p> 
      <ul>
       <li style="list-style:disc;"> <em>Pos<sub>i</sub></em>&nbsp;∈ [0,&nbsp;<em>i</em>&nbsp;− 1] — The&nbsp;<em>i</em>-th person came to the queue and stood right behind the&nbsp;<em>Pos<sub>i</sub></em>-th person in the queue. The booking office was considered the 0th person and the person at the front of the queue was considered the first person in the queue.</li> 
       <li style="list-style:disc;"> <em>Val<sub>i</sub></em>&nbsp;∈ [0, 32767] — The&nbsp;<em>i</em>-th person was assigned the value&nbsp;<em>Val<sub>i</sub></em>.</li> 
      </ul>
      <p>There no blank lines between test cases. Proceed to the end of input.</p> 
     </div> 
    </div> 
   </div> 
   <div class="hiddable" style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"> 
    <p>Output</p> 
    <div class="textBG"> 
     <div class="ptx"> 
      <p>For each test cases, output a single line of space-separated integers which are the values of people in the order they stand in the queue.</p> 
     </div> 
    </div> 
   </div> 
   <div class="hiddable" style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"> 
    <p>Sample Input</p> 
    <div class="textBG">
     <pre class="sio">4
0 77
1 51
1 33
2 69
4
0 20523
1 19243
1 3890
0 31492</pre>
    </div> 
   </div> 
   <div class="hiddable" style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"> 
    <p>Sample Output</p> 
    <div class="textBG">
     <pre class="sio">77 33 69 51
31492 20523 3890 19243</pre>
    </div> 
   </div> 
   <div class="hiddable" style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"> 
    <p>Hint</p> 
    <div class="textBG"> 
     <div class="ptx"> 
      <p>The figure below shows how the Little Cat found out the final order of people in the queue described in the first test case of the sample input.</p> 
      <img src="http://poj.org/images/2828.gif" alt="" style="border:0px;">
     </div> 
    </div> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:24px;"><span style="line-height:1.8;font-size:18px;">题意：求插入完后顺序</span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:24px;"><span style="line-height:1.8;font-size:18px;">思路：我们能够反着想,最后一个插入的时候。假如值是0，那么他一定能找到位置。但这个0我们须要这么理解：他希望的是他的前面是0个空位，假设这么理解的话，那么我们倒序插入就会得到结果</span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:24px;"><span style="line-height:1.8;font-size:18px;"></span></span></p> 
   <pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;cstring&gt;
#include &lt;cstdio&gt;
#include &lt;algorithm&gt;
#define lson(x) ((x) &lt;&lt; 1)
#define rson(x) ((x) &lt;&lt; 1 | 1)
using namespace std;
const int maxn = 200005;

struct Node {
	int pos, val;
} node[maxn&lt;&lt;2];
int Index[maxn&lt;&lt;2], num[maxn&lt;&lt;2];

void update(int l, int r, int pos, int k, int val) {
	if (l == r) {
		num[pos]++;
		Index[l] = val;
		return;
	}
	int m = l + r &gt;&gt; 1;
	int tmp = m - l + 1 - num[lson(pos)];
	if (tmp &gt; k)
		update(l, m, lson(pos), k, val);
	else update(m+1, r, rson(pos), k-tmp, val);
	num[pos] = num[lson(pos)] + num[rson(pos)];
}

int main() {
	int n;
	while (scanf("%d", &amp;n) != EOF) {
		memset(num, 0, sizeof(num));
		for (int i = 1; i &lt;= n; i++) 
			scanf("%d%d", &amp;node[i].pos, &amp;node[i].val);
		for (int i = n; i &gt;= 1; i--)
			update(1, n, 1, node[i].pos, node[i].val);
		for (int i = 1; i &lt;= n; i++)
			printf("%d%c", Index[i], i==n?'\n':' ');
	}
	return 0;
}</code></pre> 
   <br style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
   <br style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"></p> 
   <br style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
   <div> 
    <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:12px;">版权声明：本文博客原创文章，博客，未经同意，不得转载。</p> 
    <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:12px;"><br></p> 
    <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:12px;"><br></p> 
    <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:12px;"><br></p> 
    <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:12px;"><br></p> 
    <p><font color="#333333"><span style="font-size:12px;">本文转自mfrbuaa博客园博客，原文链接：http://www.cnblogs.com/mfrbuaa/p/4644718.html，如需转载请自行联系原作者</span></font></p> 
    <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
     <br>
    </div> 
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
