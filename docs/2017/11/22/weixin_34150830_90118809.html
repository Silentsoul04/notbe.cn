<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>基本线程机制 « NotBeCN</title>
  <meta name="description" content="             基本线程机制    一个程序可以被划分为多个独立的任务，每个独立的任务可以由线程来驱动执行；    一个进程可以包含若干个线程，即拥有若干个并发执行的任务，在程序运行时，CPU时间被划分成片段分配给所有的线程；    在单处理器的机器上使用多线程可以提高性能的原因在于任务阻塞；    为...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/22/weixin_34150830_90118809.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">基本线程机制</h1>
    <p class="post-meta">Nov 22, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <h1 style="font-size:18px;line-height:1.5;background:rgb(19,131,213) none repeat scroll 0% 0%;color:rgb(255,255,255);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;">基本线程机制</h1> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">一个程序可以被划分为多个独立的任务，每个独立的任务可以由线程来驱动执行；</p> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">一个进程可以包含若干个线程，即拥有若干个并发执行的任务，在程序运行时，CPU时间被划分成片段分配给所有的线程；</p> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">在单处理器的机器上使用多线程可以提高性能的原因在于任务阻塞；</p> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">为机器增加处理器可以显著加快使用多线程程序的运行速度；</p> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">使用线程机制使程序更加透明、可扩展，代码不需要知道它是运行在单处理器还是多处理器上；</p> 
   <div style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;text-align:right;"> 
    <a href="http://www.cnblogs.com/chenpi/p/5306710.html#_labelTop" rel="nofollow" style="color:#000000;"></a>
    <a name="_label1"></a> 
   </div> 
   <h1 style="font-size:18px;line-height:1.5;background:rgb(19,131,213) none repeat scroll 0% 0%;color:rgb(255,255,255);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;">创建线程方式</h1> 
   <h2 style="font-size:16px;line-height:1.5;color:rgb(0,66,255);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;">方式一、创建一个任务类实现Runnable接口，并将其具体对象提交给Thread构造器</h2> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">创建一个发射类LiftOff实现Runnable接口：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.5;">View Code</span> 
   </div> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">以上代码中调用了Thread.yield()方法，该方法的作用是建议线程调度器切换到其它线程执行任务，注意，只是建议，不保证采纳；</p> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">创建完任务类之后，可以在Main函数中使用LiftOff对象创建一个Thread对象，并调用其start方法启动该线程，如下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,0,255);line-height:1.5;">package</span><span style="line-height:1.5;"> concurrency;

</span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> BasicThreads {
    </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">static</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> main(String[] args) {
        Thread t </span>= <span style="color:rgb(0,0,255);line-height:1.5;">new</span> Thread(<span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> LiftOff());
        t.start();
        System.out.println(Thread.currentThread() </span>+ "Waiting for LiftOff"<span style="line-height:1.5;">);
    }
} </span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">打印结果如下，注意该程序中是同时存在两个线程<span>(main和<span>Thread-0</span>)</span>在运行的；</p> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">另外关于Thread对象的打印形式为<span>[Thread-0,5,main]</span>，其中依次代表[线程名，线程优先级、线程组名], 具体可查看<span>Thread</span>类的toString方法；</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>Thread[main,5,main]Waiting <span style="line-height:1.5;">for</span><span style="line-height:1.5;"> LiftOff
Thread[Thread</span>-0,5,main]#0(9<span style="line-height:1.5;">), 
Thread[Thread</span>-0,5,main]#0(8<span style="line-height:1.5;">), 
Thread[Thread</span>-0,5,main]#0(7<span style="line-height:1.5;">), 
Thread[Thread</span>-0,5,main]#0(6<span style="line-height:1.5;">), 
Thread[Thread</span>-0,5,main]#0(5<span style="line-height:1.5;">), 
Thread[Thread</span>-0,5,main]#0(4<span style="line-height:1.5;">), 
Thread[Thread</span>-0,5,main]#0(3<span style="line-height:1.5;">), 
Thread[Thread</span>-0,5,main]#0(2<span style="line-height:1.5;">), 
Thread[Thread</span>-0,5,main]#0(1<span style="line-height:1.5;">), 
Thread[Thread</span>-0,5,main]#0(Liftoff!), </pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">最后，提个醒，有些人在创建完任务类后，直接在main函数中新建一个任务类对象，并调用其run方法，如下代码，运行正常，也看到了run方法中的运行结果，以为创建了线程，其实这种使用方式是错误的，并没有创建任何新线程，只是在main线程里调用执行了一个普通对象的方法而已；</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,0,255);line-height:1.5;">package</span><span style="line-height:1.5;"> concurrency;

</span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> MainThread {
    </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">static</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> main(String[] args) {
        LiftOff launch </span>= <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> LiftOff();
        launch.run();
    }
} </span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <h2 style="font-size:16px;line-height:1.5;color:rgb(0,66,255);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;">方式二、继承Thread类，调用其具体对象的start方法</h2> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.5;">View Code</span> 
   </div> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">对比通过实现Runnable接口的方式，该方式不建议使用，因为java的单继承机制，通常通过实现接口比继承会更好点；</p> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">另外还可以通过内部内部类将线程代码隐藏在类中，如下写法；</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.5;">View Code</span> 
   </div> 
   <h2 style="font-size:16px;line-height:1.5;color:rgb(0,66,255);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;">方式三、创建一个任务类实现Runnable接口，并将其具体对象提交给Executors【推荐】</h2> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">java.util.concurrent包中的执行器Executors可以帮助我们管理<span>Thread</span>对象，简化并发编程，如下，可以使用Executors类中的newCachedThreadPool静态方法创建一个可缓存的线程池，并用其执行相关任务；</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,0,255);line-height:1.5;">package</span><span style="line-height:1.5;"> concurrency;

</span><span style="color:rgb(0,0,255);line-height:1.5;">import</span> java.util.concurrent.*<span style="line-height:1.5;">;

</span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> CachedThreadPool {
    </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">static</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> main(String[] args) {
        ExecutorService exec </span>=<span style="line-height:1.5;"> Executors.newCachedThreadPool();
        </span><span style="color:rgb(0,0,255);line-height:1.5;">for</span> (<span style="color:rgb(0,0,255);line-height:1.5;">int</span> i = 0; i &lt; 5; i++<span style="line-height:1.5;">)
            exec.execute(</span><span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> LiftOff());
        exec.shutdown();
    }
}</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">在Executors类中，除了通过newCachedThreadPool创建线程池外，还可以创建通过以下方法创建其它种类的线程池：</p> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">newFixedThreadPool：固定大小度的线程池</p> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">newSingleThreadExecutor：单线程线程池</p> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">newScheduledThreadPool：执行定时和周期性任务</p> 
   <h2 style="font-size:16px;line-height:1.5;color:rgb(0,66,255);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;">方式四、创建一个任务类实现Callable接口，并将其具体对象提交给Executors【推荐】</h2> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">实现Callable接口的类同样是一个任务类，与实现Runnable接口的区别是该方式可以有返回值；</p> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">在实现Callable接口的类中，线程执行的方法是call方法(有返回值)，而不是run方法；</p> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">在main方法中可以通过调用ExecutorService的submit方法，返回一个Future对象，通过该对象可以获取线程运行的返回值，注意需要等Future完成后才能取得结果，可以通过isDone方法来查询Future是否已完成，或者直接调用get方法来获取(会阻塞，直到结果准备就绪)。</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,0,255);line-height:1.5;">package</span><span style="line-height:1.5;"> concurrency;

</span><span style="color:rgb(0,0,255);line-height:1.5;">import</span> java.util.concurrent.*<span style="line-height:1.5;">;
</span><span style="color:rgb(0,0,255);line-height:1.5;">import</span> java.util.*<span style="line-height:1.5;">;

</span><span style="color:rgb(0,0,255);line-height:1.5;">class</span> TaskWithResult <span style="color:rgb(0,0,255);line-height:1.5;">implements</span> Callable&lt;String&gt;<span style="line-height:1.5;"> {
    </span><span style="color:rgb(0,0,255);line-height:1.5;">private</span> <span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> id;

    </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> TaskWithResult(<span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> id) {
        </span><span style="color:rgb(0,0,255);line-height:1.5;">this</span>.id =<span style="line-height:1.5;"> id;
    }

    </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span><span style="line-height:1.5;"> String call() {
        </span><span style="color:rgb(0,0,255);line-height:1.5;">return</span> "result of TaskWithResult " +<span style="line-height:1.5;"> id;
    }
}

</span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> CallableDemo {
    </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">static</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> main(String[] args) {
        ExecutorService exec </span>=<span style="line-height:1.5;"> Executors.newCachedThreadPool();
        ArrayList</span>&lt;Future&lt;String&gt;&gt; results = <span style="color:rgb(0,0,255);line-height:1.5;">new</span> ArrayList&lt;Future&lt;String&gt;&gt;<span style="line-height:1.5;">();
        </span><span style="color:rgb(0,0,255);line-height:1.5;">for</span> (<span style="color:rgb(0,0,255);line-height:1.5;">int</span> i = 0; i &lt; 10; i++<span style="line-height:1.5;">)
            results.add(exec.submit(</span><span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> TaskWithResult(i)));
        </span><span style="color:rgb(0,0,255);line-height:1.5;">for</span> (Future&lt;String&gt;<span style="line-height:1.5;"> fs : results)
            </span><span style="color:rgb(0,0,255);line-height:1.5;">try</span><span style="line-height:1.5;"> {
                System.out.println(fs.get());
            } </span><span style="color:rgb(0,0,255);line-height:1.5;">catch</span><span style="line-height:1.5;"> (InterruptedException e) {
                System.out.println(e);
                </span><span style="color:rgb(0,0,255);line-height:1.5;">return</span><span style="line-height:1.5;">;
            } </span><span style="color:rgb(0,0,255);line-height:1.5;">catch</span><span style="line-height:1.5;"> (ExecutionException e) {
                System.out.println(e);
            } </span><span style="color:rgb(0,0,255);line-height:1.5;">finally</span><span style="line-height:1.5;"> {
                exec.shutdown();
            }
    }
} </span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <h2 style="font-size:16px;line-height:1.5;color:rgb(0,66,255);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;">小结</h2> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">其实，更普遍的，我觉得创建线程就两种形式：</p> 
   <ul style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">
    <li style="list-style:none;"><span style="color:rgb(0,0,255);"><strong>直接通过new Thread创建线程(可传入任务对象)；</strong></span></li> 
    <li style="list-style:none;"><span style="color:rgb(0,0,255);"><strong>创建任务对象提交给Executors去创建（其实内部的线程工厂也是通过new Thread创建）；</strong></span></li> 
   </ul>
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">另外，<span>这里的任务对象也有两种方式创建，通过实现Runnable接口和实现Callable接口；</span></p> 
   <div style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;text-align:right;"> 
    <a href="http://www.cnblogs.com/chenpi/p/5306710.html#_labelTop" rel="nofollow" style="color:#000000;"></a>
    <a name="_label2"></a> 
   </div> 
   <h1 style="font-size:18px;line-height:1.5;background:rgb(19,131,213) none repeat scroll 0% 0%;color:rgb(255,255,255);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;">&nbsp;守护线程(后台线程)</h1> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;"><span>daemon线程是指在程序运行的时候，在后台提供一种通用服务的线程，这种线程的优先级非常低；</span></p> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;"><span>当所有其他线程结束时，会杀死进程中的所有守护线程；</span></p> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;"><span>可以在线程启动之前通过setDaemon(true)方法将线程设置为守护线程，注意只能在启动之前设置；</span></p> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;"><span>通过守护线程创建的线程会被自动设置为守护线程；</span></p> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;"><span>可以通过isDaemon方法来判断一个线程是否是守护线程；</span></p> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;"><span>举个守护线程的例子，代码如下，当main线程运行结束后，所有的守护线程也被终止：</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,0,255);line-height:1.5;">package</span><span style="line-height:1.5;"> concurrency;

</span><span style="color:rgb(0,0,255);line-height:1.5;">import</span> java.util.concurrent.*<span style="line-height:1.5;">;

</span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span> SimpleDaemons <span style="color:rgb(0,0,255);line-height:1.5;">implements</span><span style="line-height:1.5;"> Runnable {
    </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> run() {
        </span><span style="color:rgb(0,0,255);line-height:1.5;">try</span><span style="line-height:1.5;"> {
            </span><span style="color:rgb(0,0,255);line-height:1.5;">while</span> (<span style="color:rgb(0,0,255);line-height:1.5;">true</span><span style="line-height:1.5;">) {
                TimeUnit.MILLISECONDS.sleep(</span>100<span style="line-height:1.5;">);
                System.out.println(Thread.currentThread() </span>+ " " + <span style="color:rgb(0,0,255);line-height:1.5;">this</span><span style="line-height:1.5;">);
            }
        } </span><span style="color:rgb(0,0,255);line-height:1.5;">catch</span><span style="line-height:1.5;"> (InterruptedException e) {
            System.out.println(</span>"sleep() interrupted"<span style="line-height:1.5;">);
        }
    }

    </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">static</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span> main(String[] args) <span style="color:rgb(0,0,255);line-height:1.5;">throws</span><span style="line-height:1.5;"> Exception {
        </span><span style="color:rgb(0,0,255);line-height:1.5;">for</span> (<span style="color:rgb(0,0,255);line-height:1.5;">int</span> i = 0; i &lt; 10; i++<span style="line-height:1.5;">) {
            Thread daemon </span>= <span style="color:rgb(0,0,255);line-height:1.5;">new</span> Thread(<span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> SimpleDaemons());
            daemon.setDaemon(</span><span style="color:rgb(0,0,255);line-height:1.5;">true</span>); <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> Must call before start()</span>
<span style="line-height:1.5;">            daemon.start();
            
        }
        System.out.println(</span>"All daemons started"<span style="line-height:1.5;">);
        TimeUnit.MILLISECONDS.sleep(</span>175<span style="line-height:1.5;">);
    }
}</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <div style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;text-align:right;"> 
    <a href="http://www.cnblogs.com/chenpi/p/5306710.html#_labelTop" rel="nofollow" style="color:#000000;"></a>
    <a name="_label3"></a> 
   </div> 
   <h1 style="font-size:18px;line-height:1.5;background:rgb(19,131,213) none repeat scroll 0% 0%;color:rgb(255,255,255);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;">加入一个线程Thread.join方法</h1> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">一个线程（T1）可以在其它线程（T2）之上调用join方法，结果是T1线程被挂起，等待T2线程执行完毕（T2.isAlive()==false），然后继续执行T1线程；</p> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">也可以在join方法上加一个超时参数，保证join方法在指定时间内总能返回；</p> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">join方法可以被中断，如调用T2.interrupt()方法，中断后，join方法可以立即返回；</p> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">代码实例：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,0,255);line-height:1.5;">package</span><span style="line-height:1.5;"> concurrency;

</span><span style="color:rgb(0,0,255);line-height:1.5;">class</span> Sleeper <span style="color:rgb(0,0,255);line-height:1.5;">extends</span><span style="line-height:1.5;"> Thread {
    </span><span style="color:rgb(0,0,255);line-height:1.5;">private</span> <span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> duration;

    </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> Sleeper(String name, <span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> sleepTime) {
        </span><span style="color:rgb(0,0,255);line-height:1.5;">super</span><span style="line-height:1.5;">(name);
        duration </span>=<span style="line-height:1.5;"> sleepTime;
        start();
    }

    </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> run() {
        </span><span style="color:rgb(0,0,255);line-height:1.5;">try</span><span style="line-height:1.5;"> {
            sleep(duration);
        } </span><span style="color:rgb(0,0,255);line-height:1.5;">catch</span><span style="line-height:1.5;"> (InterruptedException e) {
            System.out.println(getName() </span>+ " was interrupted. "
                    + "isInterrupted(): " +<span style="line-height:1.5;"> isInterrupted());
            </span><span style="color:rgb(0,0,255);line-height:1.5;">return</span><span style="line-height:1.5;">;
        }
        System.out.println(getName() </span>+ " has awakened"<span style="line-height:1.5;">);
    }
}

</span><span style="color:rgb(0,0,255);line-height:1.5;">class</span> Joiner <span style="color:rgb(0,0,255);line-height:1.5;">extends</span><span style="line-height:1.5;"> Thread {
    </span><span style="color:rgb(0,0,255);line-height:1.5;">private</span><span style="line-height:1.5;"> Sleeper sleeper;

    </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span><span style="line-height:1.5;"> Joiner(String name, Sleeper sleeper) {
        </span><span style="color:rgb(0,0,255);line-height:1.5;">super</span><span style="line-height:1.5;">(name);
        </span><span style="color:rgb(0,0,255);line-height:1.5;">this</span>.sleeper =<span style="line-height:1.5;"> sleeper;
        start();
    }

    </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> run() {
        </span><span style="color:rgb(0,0,255);line-height:1.5;">try</span><span style="line-height:1.5;"> {
            sleeper.join();
        } </span><span style="color:rgb(0,0,255);line-height:1.5;">catch</span><span style="line-height:1.5;"> (InterruptedException e) {
            System.out.println(</span>"Interrupted"<span style="line-height:1.5;">);
        }
        System.out.println(getName() </span>+ " join completed"<span style="line-height:1.5;">);
    }
}

</span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> Joining {
    </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">static</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> main(String[] args) {
        Sleeper sleepy </span>= <span style="color:rgb(0,0,255);line-height:1.5;">new</span> Sleeper("Sleepy", 1500), grumpy = <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> Sleeper(
                </span>"Grumpy", 1500<span style="line-height:1.5;">);
        Joiner dopey </span>= <span style="color:rgb(0,0,255);line-height:1.5;">new</span> Joiner("Dopey", sleepy), doc = <span style="color:rgb(0,0,255);line-height:1.5;">new</span> Joiner("Doc"<span style="line-height:1.5;">,
                grumpy);
        grumpy.interrupt();
        
        </span><span style="color:rgb(0,0,255);line-height:1.5;">try</span><span style="line-height:1.5;"> {
            sleepy.join();
        } </span><span style="color:rgb(0,0,255);line-height:1.5;">catch</span><span style="line-height:1.5;"> (InterruptedException e) {
            
            e.printStackTrace();
        }
        System.out.println(</span>"main thread continue until sleepy thread over"<span style="line-height:1.5;">);
    }
} </span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">在该示例中，我们把dopey、main线程加入到sleepy线程，doc线程加入到grumpy线程，结果如下：</p> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">grumpy线程被中断，然后join方法立即返回，打印Doc join completed，在grumpy线程中，isInterrupted()之所以打印false是因为异常捕获时把该标志清理了；</p> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">sleepy线程执行完毕后，join方法返回，继续执行dopey线程和main线程未完成部分，打印“main thread continue until sleepy thread over”和“Dopey join completed”；</p> 
   <div style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;text-align:right;"> 
    <a href="http://www.cnblogs.com/chenpi/p/5306710.html#_labelTop" rel="nofollow" style="color:#000000;"></a>
    <a name="_label4"></a> 
   </div> 
   <h1 style="font-size:18px;line-height:1.5;background:rgb(19,131,213) none repeat scroll 0% 0%;color:rgb(255,255,255);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;">捕获线程异常</h1> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">在main方法中使用try-catch不能捕获其它线程产生的异常，如下示例，RuntimeException未被处理：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,0,255);line-height:1.5;">package</span><span style="line-height:1.5;"> concurrency;

</span><span style="color:rgb(0,0,255);line-height:1.5;">import</span> java.util.concurrent.*<span style="line-height:1.5;">;

</span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span> ExceptionThread <span style="color:rgb(0,0,255);line-height:1.5;">implements</span><span style="line-height:1.5;"> Runnable {
    </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> run() {
        </span><span style="color:rgb(0,0,255);line-height:1.5;">throw</span> <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> RuntimeException();
    }

    </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">static</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> main(String[] args) {
        </span><span style="color:rgb(0,0,255);line-height:1.5;">try</span><span style="line-height:1.5;"> {
            ExecutorService exec </span>=<span style="line-height:1.5;"> Executors.newCachedThreadPool();
            exec.execute(</span><span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> ExceptionThread());
        } </span><span style="color:rgb(0,0,255);line-height:1.5;">catch</span><span style="line-height:1.5;"> (RuntimeException ue) {

            System.out.println(</span>"Exception has been handled!"<span style="line-height:1.5;">);
        }
    }
}</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">在JAVA SE5之前，可以使用线程组捕获异常，在JAVA SE5之后可以用Executor来解决这个问题；</p> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">只需要写一个异常处理类并实现Thread.UncaughtExceptionHandler接口，然后在创建线程的时候，设置该线程的未捕获异常处理器为该类实例，通过setUncaughtExceptionHandler方法设置，如下代码；</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.5;">View Code</span> 
   </div> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">除了为每个线程设置专门的未捕获异常处理器外，还可以设置默认的未捕获异常处理器，当系统检查到某个线程没有专门的未捕获异常处理器的时候，会使用默认的未捕获异常处理器；</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,0,255);line-height:1.5;">package</span><span style="line-height:1.5;"> concurrency;

</span><span style="color:rgb(0,0,255);line-height:1.5;">import</span> java.util.concurrent.*<span style="line-height:1.5;">;

</span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> SettingDefaultHandler {
  </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">static</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> main(String[] args) {
    Thread.setDefaultUncaughtExceptionHandler(</span><span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> MyUncaughtExceptionHandler());
    ExecutorService exec </span>=<span style="line-height:1.5;"> Executors.newCachedThreadPool();
    exec.execute(</span><span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> ExceptionThread());
  }
} </span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;">本文转自风一样的码农博客园博客，原文链接：http://www.cnblogs.com/chenpi/p/5306710.html，如需转载请自行联系原作者</p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
