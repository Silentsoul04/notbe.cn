<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Spring + SpringMVC + Druid + MyBatis 给你一个灵活的后端解决方案 « NotBeCN</title>
  <meta name="description" content="             &nbsp;&nbsp;生命不息，折腾不止。    &nbsp; &nbsp;折腾能遇到很多坑，填坑我理解为成长。    &nbsp; &nbsp;两个月前自己倒腾了一套用开源框架构建的 JavaWeb 后端解决方案。    &nbsp; &nbsp;Spring + SpringMVC...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/22/weixin_33856370_90127329.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">Spring + SpringMVC + Druid + MyBatis 给你一个灵活的后端解决方案</h1>
    <p class="post-meta">Nov 22, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp;&nbsp;生命不息，折腾不止。</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp; &nbsp;折腾能遇到很多坑，填坑我理解为成长。</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp; &nbsp;两个月前自己倒腾了一套用开源框架构建的 JavaWeb 后端解决方案。</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp; &nbsp;<a href="http://www.cnblogs.com/java-class/p/5951738.html" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom:1px dotted rgb(51,51,51);">Spring + SpringMVC + Druid + JPA(Hibernate impl) 给你一个稳妥的后端解决方案</a></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp; &nbsp;引入到项目组后经过几番打磨，现在也出落的有模有样。</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp; &nbsp;最近将工程中的 Hibernate 换了换 Mybatis 试试，毕竟人都需要新鲜感。</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp; &nbsp;我 Hibernate 接触的要比 MyBatis 早，作为最流行的两 ORM 框架，个人认为其中很多思想都相通。</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp; &nbsp;但 MyBatis 特有的&nbsp;ResultMap 构想，能进行更为细致的 SQL 调整和优化。</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp; &nbsp;在开发社区、版本更新速度、支持的工具上，Hibernate 比 MyBatis 更胜一筹。</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp; &nbsp;项目 Git 地址：<a href="https://git.oschina.net/LanboEx/sdm" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom:1px dotted rgb(51,51,51);">https://git.oschina.net/LanboEx/sdm</a></span></p> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;text-align:right;"> 
    <a href="http://www.cnblogs.com/java-class/p/6229920.html#_labelTop" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom:1px dotted rgb(51,51,51);">回到顶部</a>
    <a name="_label0" style="color:rgb(0,0,0);border-bottom:1px dotted rgb(51,51,51);"></a> 
   </div> 
   <h3 style="font-size:16px;line-height:1.5;font-family:verdana, Arial, Helvetica, sans-serif;">1.方案整体一览</h3> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/362169/201612/362169-20161228144935023-61563167.png" alt="" width="372" height="631" style="border:0px;"></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp; &nbsp;由 &nbsp;Controller 层接受前端参数并响应请求，携带数据跳转页面。</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp; &nbsp;Controller 层注入 ServiceInter，&nbsp;ServiceImpl 层组织业务数据。</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp; &nbsp;ServiceImpl 层注入 Mybatis Mapper, Mapper 进行数据的访问。</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp; &nbsp;和 Hibernate 类似整个 dao 层，都可以由工具生成，工程中使用的是&nbsp;org.mybatis.generator 插件。</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.8;">web.xml</span> 
   </div> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.8;">pom.xml</span> 
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;text-align:right;"> 
    <a href="http://www.cnblogs.com/java-class/p/6229920.html#_labelTop" rel="nofollow" style="text-decoration:none;color:rgb(0,0,0);border-bottom:1px dotted rgb(51,51,51);">回到顶部</a>
    <a name="_label1" style="color:rgb(0,0,0);border-bottom:1px dotted rgb(51,51,51);"></a> 
   </div> 
   <h3 style="font-size:16px;line-height:1.5;font-family:verdana, Arial, Helvetica, sans-serif;"><span style="line-height:1.5;font-size:15px;">2.遇到的坑</span></h3> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp; &nbsp;浅坑这里就不说了，下面梳理比较深的几个坑。</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp; &nbsp;如果你以前遇到过这些问题，并且有比我还完美的解决方法，请赐教。</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">a.&nbsp;MapperScannerConfigurer 提前初始化导致 spring 注入配置文件失效</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre><span style="font-size:15px;line-height:1.8;"><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;"> &lt;</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">bean </span><span style="line-height:1.8;color:rgb(255,0,0);font-size:12px;">class</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">="org.mybatis.spring.mapper.MapperScannerConfigurer"</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span>
        <span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">property </span><span style="line-height:1.8;color:rgb(255,0,0);font-size:12px;">name</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">="basePackage"</span><span style="line-height:1.8;color:rgb(255,0,0);font-size:12px;"> value</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">="com.rambo.sdm.dao.inter"</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">/&gt;</span>
        <span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">property </span><span style="line-height:1.8;color:rgb(255,0,0);font-size:12px;">name</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">="sqlSessionFactory "</span><span style="line-height:1.8;color:rgb(255,0,0);font-size:12px;"> ref</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">="sessionFactory"</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">/&gt;</span>
    <span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">bean</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span></span></pre>
   </div> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp;&nbsp;<span style="line-height:1.8;">因为希望 Spring 能扫描 Mapper 接口类加载 Mapper.xml 并自动生成实现代理类，注入到相应的 ServiceImpl 中。</span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp; 刚开始配置如上，但是发现 Spring 无法正常加载配置文件中的信息。</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp;&nbsp;也就是用 ${jdbc.username} 这样之类的表达式，无法获取到 properties 文件里的内容。</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp; 几次尝试未果之后，发现&nbsp;MapperScannerConigurer 实际是在解析加载 bean 定义阶段，这个时候设置 sqlSessionFactory 的话。</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp; 会导致提前初始化一些类，PropertyPlaceholderConfigurer 还没来得及替换定义中的变量，导致把表达式当作字符串复制了。</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp; 将&nbsp;sqlSessionFactory 替换为 sqlSessionFactoryBeanName 问题解决，配置如下：</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre><span style="font-size:15px;line-height:1.8;"><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;"> &lt;</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">bean </span><span style="line-height:1.8;color:rgb(255,0,0);font-size:12px;">class</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">="org.mybatis.spring.mapper.MapperScannerConfigurer"</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span>
        <span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">property </span><span style="line-height:1.8;color:rgb(255,0,0);font-size:12px;">name</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">="basePackage"</span><span style="line-height:1.8;color:rgb(255,0,0);font-size:12px;"> value</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">="com.rambo.sdm.dao.inter"</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">/&gt;</span>
        <span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">property </span><span style="line-height:1.8;color:rgb(255,0,0);font-size:12px;">name</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">="sqlSessionFactoryBeanName"</span><span style="line-height:1.8;color:rgb(255,0,0);font-size:12px;"> value</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">="sessionFactory"</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">/&gt;</span>
    <span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">bean</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span></span></pre>
   </div> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">b. dao 层数据表主键自动生成</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp; &nbsp;在编写工程例子运行后，发现提示错误 UUID&nbsp;不为 NUll。</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp; &nbsp;<span style="line-height:1.8;">自动生成的 mapper.xml 中，对于主键(自增序列/uuid)需要自己配置，这点确实有点 low。</span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp; &nbsp;自己配置就自己配置吧，mapper.xml 中&nbsp;UUID 配置如下:</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre><span style="font-size:15px;line-height:1.8;">    <span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">selectKey </span><span style="line-height:1.8;color:rgb(255,0,0);font-size:12px;">keyProperty</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">="uuid"</span><span style="line-height:1.8;color:rgb(255,0,0);font-size:12px;"> resultType</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">="String"</span><span style="line-height:1.8;color:rgb(255,0,0);font-size:12px;"> order</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">="BEFORE"</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span><span style="line-height:1.8;font-size:12px;"> select replace(uuid(),'-','') UUID </span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">selectKey</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span></span></pre>
   </div> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp; 假设项目推进中，生成数据表配置文件后需要研发手动在 mapper.xml 的新增方法中添加主键生成策略，不仅繁琐而且出问题的概率极大。</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp; 试着摸索有没有什么统一配置的地方，发现了一种但还是不够完美。统一配置在&nbsp;generatorConfig.xml 生成表的地方：</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre><span style="font-size:15px;line-height:1.8;"><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;"> &lt;</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">table </span><span style="line-height:1.8;color:rgb(255,0,0);font-size:12px;">tableName</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">="user"</span><span style="line-height:1.8;color:rgb(255,0,0);font-size:12px;"> domainObjectName</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">="UserPO"</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span>
            <span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">generatedKey </span><span style="line-height:1.8;color:rgb(255,0,0);font-size:12px;">column</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">="uuid"</span><span style="line-height:1.8;color:rgb(255,0,0);font-size:12px;"> sqlStatement</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">="SELECT REPLACE(UUID(),'-','') UUID FROM DUAL"</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">/&gt;</span>
        <span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">table</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span></span></pre>
   </div> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp; &nbsp;<span style="line-height:1.8;">主键生成策略使用 SQL 语句这点，就注定&nbsp;Mybatis&nbsp;在数据库移植方面无法尽善尽美。</span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">c. maven 编译后未将 xml 文件编译到 class文件夹下</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp; &nbsp;工程中需要输出到编译目录的配置文件有两部分，各数据表 mapper.xml 和 框架之间的各种各种的 .xml/.properties。</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp; &nbsp;编译运行时报错：org.apache.ibatis.binding.BindingException: Invalid bound statement (not found)</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp; &nbsp;说是未绑定？ 辗转半天，发现 mapper.xml 没有被编译到对应的文件夹下。</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp; &nbsp;maven build --&gt; resources&nbsp;节点下新增子 resource 子节点：</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="font-size:15px;line-height:1.8;">            <span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">resource</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span>
                <span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">directory</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span>src/main/java<span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">directory</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span>
                <span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">includes</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span>
                    <span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">include</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span>**/*.xml<span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">include</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span>
                <span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">includes</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span>
                <span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">filtering</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span>true<span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">filtering</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span>
            <span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">resource</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span></span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp; &nbsp;添加子节点后，mapper.xml 确实编译到对应的文件夹下了，但工程中原 Resources 下的文件没有像以前一样编译到 classes 下。</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp; &nbsp;maven build --&gt; resources&nbsp;节点下继续新增子&nbsp;resource 子节点后解决：</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="font-size:15px;line-height:1.8;">            <span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">resource</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span>
                <span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">directory</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span>src/main/resources<span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">directory</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span>
                <span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">includes</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span>
                    <span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">include</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span>**/*.xml<span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">include</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span>
                    <span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">include</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span>**/*.properties<span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">include</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span>
                <span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">includes</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span>
                <span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">filtering</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span>true<span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">filtering</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span>
            <span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">resource</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span></span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.8;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">d.&nbsp;jetty 插件启动web 项目时，会同时启动 mybatis 逆向工程插件</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp; &nbsp;当使用 jetty:run 启动 web 项目后，总会有莫名其妙的问题。</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp; &nbsp;报错君是这样的：java.lang.IllegalArgumentException: Result Maps collection already contains value for com.rambo.sdm.dao.inter.UserPOMapper.BaseResultMap</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp; &nbsp;顺着启动日志发现，每次 jetty:run 时，mybatis.generator 插件会先运行，并逆向数据库工程。</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp; &nbsp;逆向生成就逆向生成吧，按道理需要生成的东西已经存在的话，跳过即可。</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp; &nbsp;generator 插件运行机制还是有点问题的，生成的类它跳过，但配置文件会将内容追加进去，所以才有了上述那个报错。</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp; &nbsp;移除 generator 插件&nbsp;executions --&gt; execution 下 goals 子节点问题得以解决。</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre><span style="font-size:15px;line-height:1.8;">                <span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">executions</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span>
                    <span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">execution</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span>
                        <span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">id</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span>Generate MyBatis Artifacts<span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">id</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span>
                    <span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">execution</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span>
                <span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&lt;/</span><span style="line-height:1.8;color:rgb(128,0,0);font-size:12px;">executions</span><span style="line-height:1.8;color:rgb(0,0,255);font-size:12px;">&gt;</span></span></pre>
   </div> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:15px;">&nbsp; 需要逆向工程时，手动启动插件即可。</span></p> 
   <p><span style="line-height:1.8;"><font color="#333333"><span style="font-size:15px;">本文转自Orson博客园博客，原文链接：http://www.cnblogs.com/java-class/p/6229920.html，如需转载请自行联系原作者</span></font><br></span></p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
