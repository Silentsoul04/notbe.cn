<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>JS组件系列——BootstrapTable+KnockoutJS实现增删改查解决方案（二） « NotBeCN</title>
  <meta name="description" content="                  阅读目录          一、效果预览       二、代码示例              1、表格初始化        2、按钮操作             三、总结            &nbsp;    正文    前言：上篇&nbsp;JS组件系列——Bootstr...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/22/weixin_34326179_90127729.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">JS组件系列——BootstrapTable+KnockoutJS实现增删改查解决方案（二）</h1>
    <p class="post-meta">Nov 22, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <div style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"> 
    <p style="font-size:18px;"><b>阅读目录</b></p> 
    <ul>
     <li><a href="http://www.cnblogs.com/landeanfen/p/5407221.html#_label0" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">一、效果预览</a></li> 
     <li> <a href="http://www.cnblogs.com/landeanfen/p/5407221.html#_label1" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">二、代码示例</a> 
      <ul>
       <li><a href="http://www.cnblogs.com/landeanfen/p/5407221.html#_label1_0" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">1、表格初始化</a></li> 
       <li><a href="http://www.cnblogs.com/landeanfen/p/5407221.html#_label1_1" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">2、按钮操作</a></li> 
      </ul></li> 
     <li><a href="http://www.cnblogs.com/landeanfen/p/5407221.html#_label2" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">三、总结</a></li> 
    </ul>
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">&nbsp;</p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;line-height:24px;font-size:18px;"><b>正文</b></p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">前言：上篇&nbsp;<a id="homepage1_HomePageDays_DaysList_ctl00_DayList_TitleUrl_0" class="postTitle2" href="http://www.cnblogs.com/landeanfen/p/5400654.html" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">JS组件系列——BootstrapTable+KnockoutJS实现增删改查解决方案（一）</a>&nbsp;介绍了下knockout.js的一些基础用法，由于篇幅的关系，所以只能分成两篇，望见谅！昨天就觉得应该快点完成下篇，要不然有点标题党的感觉，思及此，博主心有不安，于是加班赶出了下篇。如果你也打算用ko去做项目，且看看吧！</p> 
   <div style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;text-align:right;"> 
    <a href="http://www.cnblogs.com/landeanfen/p/5407221.html#_labelTop" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">回到顶部</a>
    <a name="_label0" style="color:rgb(39,105,192);"></a> 
   </div> 
   <h1 style="font-size:25px;line-height:31px;color:rgb(255,255,255);font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(43,102,0);">一、效果预览</h1> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">其实也没啥效果，就是简单的增删改查，重点还是在代码上面，使用ko能够大量节省界面DOM数据绑定的操作。下面是整个整个增删改查逻辑的js代码：</p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><img src="https://images2015.cnblogs.com/blog/459756/201604/459756-20160419104434945-1923647801.png" alt="" style="border:0px;"></p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">页面效果：</p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><img src="https://images2015.cnblogs.com/blog/459756/201604/459756-20160419104700460-1078025222.png" alt="" style="border:0px;"></p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><img src="https://images2015.cnblogs.com/blog/459756/201604/459756-20160419104709366-1586373518.png" alt="" style="border:0px;"></p> 
   <div style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;text-align:right;"> 
    <a href="http://www.cnblogs.com/landeanfen/p/5407221.html#_labelTop" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">回到顶部</a>
    <a name="_label1" style="color:rgb(39,105,192);"></a> 
   </div> 
   <h1 style="font-size:25px;line-height:31px;color:rgb(255,255,255);font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(43,102,0);">二、代码示例</h1> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">好了，进入重点吧！博主打算分两块介绍，第一部分是表格初始化部分，第二部分是按钮操作增删改部分。</p> 
   <div style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;text-align:right;"> 
    <a href="http://www.cnblogs.com/landeanfen/p/5407221.html#_labelTop" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">回到顶部</a>
    <a name="_label1_0" style="color:rgb(39,105,192);"></a> 
   </div> 
   <h2 style="font-size:15px;line-height:23px;color:rgb(255,255,255);font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(43,102,149);">1、表格初始化</h2> 
   <h3 style="font-size:16px;line-height:24px;font-family:'微软雅黑', PTSans, Arial, sans-serif;">1.1、准备工作</h3> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">首先看看需要引用的js和css文件</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">link </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">href</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="~/Content/bootstrap/css/bootstrap.min.css"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> rel</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="stylesheet"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">/&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">link </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">href</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="~/Content/bootstrap-table/bootstrap-table.min.css"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> rel</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="stylesheet"</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">/&gt;</span>

    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">script </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">src</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="~/scripts/jquery-1.9.1.min.js"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">script</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">script </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">src</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="~/Content/bootstrap/js/bootstrap.min.js"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">script</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">script </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">src</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="~/Content/bootstrap-table/bootstrap-table.min.js"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">script</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">script </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">src</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="~/Content/bootstrap-table/locale/bootstrap-table-zh-CN.js"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">script</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>

    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">script </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">src</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="~/scripts/knockout/knockout-3.4.0.min.js"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">script</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">script </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">src</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="~/scripts/knockout/extensions/knockout.mapping-latest.js"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">script</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">script </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">src</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="~/Content/bootstrap-table/knockout.bootstraptable.js"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">script</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">script </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">src</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="~/scripts/Department.js"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">script</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">都是一些常用的css和js文件，我们自定义的js文件主要有两个:&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">knockout.bootstraptable.js</span>&nbsp;和&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">Department.js</span>&nbsp;。上篇我们介绍过使用ko可以自定义我们的data-bind。同样，这里对于table的绑定，我们也定义一个自定义的绑定，代码&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">knockout.bootstraptable.js</span>&nbsp;里面。</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">添加ko自定义绑定</span>
ko.bindingHandlers.myBootstrapTable =<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> {
    init: </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> (element, valueAccessor, allBindingsAccessor, viewModel) {
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">这里的oParam就是绑定的viewmodel</span>
        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> oViewModel =<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> valueAccessor();
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> $ele =<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> $(element).bootstrapTable(oViewModel.params);
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">给viewmodel添加bootstrapTable方法</span>
        oViewModel.bootstrapTable = <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> () {
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> $ele.bootstrapTable.apply($ele, arguments);
        }
    },
    update: </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> (element, valueAccessor, allBindingsAccessor, viewModel) {}
};

</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">初始化</span>
(<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> ($) {
    </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">向ko里面新增一个bootstrapTableViewModel方法</span>
    ko.bootstrapTableViewModel = <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> (options) {
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> that = <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">this</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">;

        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">this</span>.<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">default</span> =<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> {
            search: </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">true</span>,                       <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">是否显示表格搜索，此搜索是客户端搜索，不会进服务端，所以，个人感觉意义不大</span>
            strictSearch: <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">true</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">,
            showColumns: </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">true</span>,                  <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">是否显示所有的列</span>
            cache:<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">false</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">,
            showRefresh: </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">true</span>,                  <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">是否显示刷新按钮</span>
            minimumCountColumns: 2,             <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">最少允许的列数</span>
            clickToSelect: <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">true</span>,                <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">是否启用点击选中行</span>
            showToggle: <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">true</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">,
        };
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">this</span>.params = $.extend({}, <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">this</span>.<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">default</span>, options ||<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> {});

        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">得到选中的记录</span>
        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">this</span>.getSelections = <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> () {
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> arrRes = that.bootstrapTable("getSelections"<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">)
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> arrRes;
        };

        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">刷新</span>
        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">this</span>.refresh = <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> () {
            that.bootstrapTable(</span>"refresh"<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">);
        };
    };
})(jQuery);</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><strong>代码释疑：这个js文件主要做了两件事</strong></p> 
   <ol style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">
    <li style="list-style:decimal;"><strong>自定义data-bind属性myBootstrapTable。对于ko.bindingHandlers.myBootstrapTable里面的update方法，如非必须，可以不用定义。</strong></li> 
    <li style="list-style:decimal;"><strong><strong>通过向ko对象里面添加</strong>bootstrapTableViewModel来封装bootstrapTable。</strong></li> 
   </ol>
   <h3 style="font-size:16px;line-height:24px;font-family:'微软雅黑', PTSans, Arial, sans-serif;"><strong>1.2、html标签启动绑定</strong></h3> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">table </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">id</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="tb_dept"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> data-bind</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="myBootstrapTable:$root"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
            <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">thead</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">tr</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">th </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">data-checkbox</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="true"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">th</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">th </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">data-field</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="Name"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>部门名称<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">th</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">th </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">data-field</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="Level"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>部门级别<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">th</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">th </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">data-field</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="Des"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>描述<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">th</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">th </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">data-field</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="strCreatetime"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>创建时间<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">th</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">tr</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
            <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">thead</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">table</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><strong>代码释疑：定义一个table标签，使用自定义绑定myBootstrapTable，上篇说过，$root可以理解为初始化的意思。为了简单，所有的colums就直接在&lt;th&gt;里面写了。</strong></p> 
   <h3 style="font-size:16px;line-height:24px;font-family:'微软雅黑', PTSans, Arial, sans-serif;"><strong>1.3、激活ko的绑定</strong></h3> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">在页面加载完成之后，启动ko的绑定：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">初始化</span>
$(<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> () {
    </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">1、初始化表格</span>
<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">    tableInit.Init();

    </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">2、注册增删改事件</span>
<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">    operate.operateInit();
});

</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">初始化表格</span>
<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> tableInit =<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> {
    Init: </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> () {
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">绑定table的viewmodel</span>
        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">this</span>.myViewModel = <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">new</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> ko.bootstrapTableViewModel({
            url: </span>'/Department/GetDepartment',         <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">请求后台的URL（*）</span>
            method: 'get',                      <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">请求方式（*）</span>
            toolbar: '#toolbar',                <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">工具按钮用哪个容器</span>
            queryParams: <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> (param) {
                </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> { limit: param.limit, offset: param.offset };
            },</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">传递参数（*）</span>
            pagination: <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">true</span>,                   <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">是否显示分页（*）</span>
            sidePagination: "server",           <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">分页方式：client客户端分页，server服务端分页（*）</span>
            pageNumber: 1,                      <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">初始化加载第一页，默认第一页</span>
            pageSize: 10,                       <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">每页的记录行数（*）</span>
            pageList: [10, 25, 50, 100],        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">可供选择的每页的行数（*）</span>
<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">        });
        ko.applyBindings(</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">this</span>.myViewModel, document.getElementById("tb_dept"<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">));
    }
};</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><strong>代码释疑：页面加载完成之后，调用上面封装的bootstrapTableViewModel对象合并传递的参数，最后激活绑定，将this.myViewModel作为绑定的viewmodel激活。调试代码可知，当执行到&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">ko.applyBindings(<span style="color:rgb(0,0,255);line-height:1.5;">this</span>.myViewModel, document.getElementById("tb_dept"));</span>&nbsp;这一句的时候，自定义绑定才会生效，程序才会进入到&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">ko.bindingHandlers.myBootstrapTable</span>&nbsp;对象的init方法去初始化bootstrapTable。这里需要说明一点：</strong></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>    init: <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> (element, valueAccessor, allBindingsAccessor, viewModel) {
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">这里的oParam就是绑定的viewmodel</span>
        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> oViewModel =<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> valueAccessor();
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> $ele =<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> $(element).bootstrapTable(oViewModel.params);
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">给viewmodel添加bootstrapTable方法</span>
        oViewModel.bootstrapTable = <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> () {
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> $ele.bootstrapTable.apply($ele, arguments);
        }
    }</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><strong>上文中的init方法，通过第二个参数valueAccessor，我们得到的是当前绑定的viewmodel，也就是我们上面的this.myViewModel这个对象，博主觉得这一点有利于你理解自定义绑定的逻辑。基本上执行到&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"><span style="color:rgb(0,0,255);line-height:1.5;">var</span>&nbsp;$ele = $(element).bootstrapTable(oViewModel.params);</span>&nbsp;这一句的时候，我们表格的初始化就完成了。后台对应的方法博主随便定义了一个集合，为了完整，这里还是贴出来：</strong></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border:1px solid #808080;line-height:1.5;">DepartmentController</span> 
   </div> 
   <div style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;text-align:right;"> 
    <a href="http://www.cnblogs.com/landeanfen/p/5407221.html#_labelTop" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">回到顶部</a>
    <a name="_label1_1" style="color:rgb(39,105,192);"></a> 
   </div> 
   <h2 style="font-size:15px;line-height:23px;color:rgb(255,255,255);font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(43,102,149);">2、按钮操作</h2> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">上面通过bootstrapTable的初始化完成了我们的自定义data-bind的使用。下面的按钮操作我们来体验一把使用监控属性的“爽歪歪”。</p> 
   <h3 style="font-size:16px;line-height:24px;font-family:'微软雅黑', PTSans, Arial, sans-serif;">2.1、view页面</h3> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">首先在view页面上面定义我们的增删改按钮</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">div </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">id</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="toolbar"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="btn-group"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
            <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">button </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">id</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="btn_add"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> type</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="button"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="btn btn-default"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">span </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="glyphicon glyphicon-plus"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> aria-hidden</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="true"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">span</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">新增
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">button</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
            <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">button </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">id</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="btn_edit"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> type</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="button"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="btn btn-default"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">span </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="glyphicon glyphicon-pencil"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> aria-hidden</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="true"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">span</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">修改
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">button</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
            <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">button </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">id</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="btn_delete"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> type</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="button"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="btn btn-default"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">span </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="glyphicon glyphicon-remove"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> aria-hidden</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="true"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">span</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">删除
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">button</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">div</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">为了简便，博主使用了一个隐藏的弹出框用来包含新增和编辑的文本框。当然，一般情况下，可能这里用的是部分视图，你的项目里面可能会有一个Edit.cshtml，但这里博主将这些都放在一个页面上面，因为这不是文本的重点。</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>       <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">div </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="modal fade"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> id</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="myModal"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> tabindex</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="-1"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> role</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="dialog"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> aria-labelledby</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="myModalLabel"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
            <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">div </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="modal-dialog"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> role</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="document"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">div </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="modal-content"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">div </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="modal-header"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">button </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">type</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="button"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="close"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> data-dismiss</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="modal"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> aria-label</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="Close"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">span </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">aria-hidden</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="true"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">&amp;times;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">span</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">button</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">h4 </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="modal-title"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> id</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="myModalLabel"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>操作<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">h4</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">div</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">div </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="modal-body"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>

                        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">div </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="form-group"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                            <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">label </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">for</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="txt_departmentname"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>部门名称<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">label</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                            <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">input </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">type</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="text"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> name</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="txt_departmentname"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> data-bind</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="value:Name"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="form-control"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> id</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="txt_departmentname"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> placeholder</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="部门名称"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">div</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">div </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="form-group"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                            <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">label </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">for</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="txt_departmentlevel"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>部门级别<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">label</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                            <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">input </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">type</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="text"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> name</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="txt_departmentlevel"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> data-bind</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="value:Level"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="form-control"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> id</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="txt_departmentlevel"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> placeholder</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="部门级别"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">div</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">div </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="form-group"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                            <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">label </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">for</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="txt_des"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>描述<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">label</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                            <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">input </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">type</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="text"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> name</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="txt_des"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> data-bind</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="value:Des"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="form-control"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> id</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="txt_des"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> placeholder</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="描述"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">div</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">div</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">div </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="modal-footer"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">button </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">type</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="button"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="btn btn-default"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> data-dismiss</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="modal"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">span </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="glyphicon glyphicon-remove"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> aria-hidden</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="true"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">span</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>关闭<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">button</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">button </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">type</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="button"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> id</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="btn_submit"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="btn btn-primary"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> data-dismiss</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="modal"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;&lt;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">span </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);">class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="glyphicon glyphicon-floppy-disk"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(255,0,0);"> aria-hidden</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">="true"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">span</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>保存<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">button</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">div</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
                <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">div</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
            <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">div</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span>
        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&lt;/</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">div</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">&gt;</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <h3 style="font-size:16px;line-height:24px;font-family:'微软雅黑', PTSans, Arial, sans-serif;">2.2、JS初始化按钮操作</h3> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">操作</span>
<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> operate =<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> {
    </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">初始化按钮事件</span>
    operateInit: <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> () {
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">this</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">.operateAdd();
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">this</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">.operateUpdate();
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">this</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">.operateDelete();
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">this</span>.DepartmentModel =<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> {
            id: ko.observable(),
            Name: ko.observable(),
            Level: ko.observable(),
            Des: ko.observable(),
            CreateTime: ko.observable()
        };
    },
    </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">新增</span>
    operateAdd: <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">(){
        $(</span>'#btn_add').on("click", <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> () {
            $(</span>"#myModal").modal().on("shown.bs.modal", <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> () {
                </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> oEmptyModel =<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> {
                    id: ko.observable(),
                    Name: ko.observable(),
                    Level: ko.observable(),
                    Des: ko.observable(),
                    CreateTime: ko.observable()
                };
                ko.utils.extend(operate.DepartmentModel, oEmptyModel);
                ko.applyBindings(operate.DepartmentModel, document.getElementById(</span>"myModal"<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">));
                operate.operateSave();
            }).on(</span>'hidden.bs.modal', <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> () {
                ko.cleanNode(document.getElementById(</span>"myModal"<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">));
            });
        });
    },
    </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">编辑</span>
    operateUpdate: <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> () {
        $(</span>'#btn_edit').on("click", <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> () {
            $(</span>"#myModal").modal().on("shown.bs.modal", <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> () {
                </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> arrselectedData =<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> tableInit.myViewModel.getSelections();
                </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">if</span> (!operate.operateCheck(arrselectedData)) { <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">; }
                </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">将选中该行数据有数据Model通过Mapping组件转换为viewmodel</span>
                ko.utils.extend(operate.DepartmentModel, ko.mapping.fromJS(arrselectedData[0<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">]));
                ko.applyBindings(operate.DepartmentModel, document.getElementById(</span>"myModal"<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">));
                operate.operateSave();
            }).on(</span>'hidden.bs.modal', <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> () {
                </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">关闭弹出框的时候清除绑定(这个清空包括清空绑定和清空注册事件)</span>
                ko.cleanNode(document.getElementById("myModal"<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">));
            });
        });
    },
    </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">删除</span>
    operateDelete: <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> () {
        $(</span>'#btn_delete').on("click", <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> () {
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> arrselectedData =<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> tableInit.myViewModel.getSelections();
            $.ajax({
                url: </span>"/Department/Delete"<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">,
                type: </span>"post"<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">,
                contentType: </span>'application/json'<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">,
                data: JSON.stringify(arrselectedData),
                success: </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> (data, status) {
                    alert(status);
                    </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">tableInit.myViewModel.refresh();</span>
<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">                }
            });
        });
    },
    </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">保存数据</span>
    operateSave: <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> () {
        $(</span>'#btn_submit').on("click", <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> () {
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">取到当前的viewmodel</span>
            <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> oViewModel =<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> operate.DepartmentModel;
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">将Viewmodel转换为数据model</span>
            <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> oDataModel =<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> ko.toJS(oViewModel);</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> funcName = oDataModel.id?"Update":"Add"<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">
            $.ajax({
                url: </span>"/Department/"+<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">funcName,
                type: </span>"post"<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">,
                data: oDataModel,
                success: </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> (data, status) {
                    alert(status);
                    tableInit.myViewModel.refresh();
                }
            });
        });
    },
    </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">数据校验</span>
    operateCheck:<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">(arr){
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">if</span> (arr.length &lt;= 0<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">) {
            alert(</span>"请至少选择一行数据"<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">);
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">false</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">;
        }
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">if</span> (arr.length &gt; 1<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">) {
            alert(</span>"只能编辑一行数据"<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">);
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">false</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">;
        }
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">true</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">;
    }
}</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><strong>代码释疑：说说这里的执行逻辑，</strong><strong>首先在$(function(){})方法里面调用&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">operate.operateInit();</span>&nbsp;。在operateInit()方法里面注册页面上面按钮的点击事件，同时也定义&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"><span style="color:rgb(0,0,255);line-height:1.5;">this</span>.DepartmentModel</span>&nbsp;作为我们新增编辑的viewmodel，这个viewmodel里面定义了和页面元素对应的监控属性。还记得上面隐藏的弹出框里面的一些data-bind吗，没错，里面对应的value值就是和这里的监控属性对应，这样设置绑定之后，js里面所有的导致&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"><span style="color:rgb(0,0,255);line-height:1.5;">this</span>.DepartmentModel</span>&nbsp;里面监控的变化，都会触发界面上面这些绑定标签的value值变化，反之，界面上面的所有标签的Value值的变化，也势必会引起它的监控属性值的变化，此之所谓双向绑定。下面具体看看双向绑定的执行。</strong></p> 
   <h3 style="font-size:16px;line-height:24px;font-family:'微软雅黑', PTSans, Arial, sans-serif;"><strong>2.3、新增操作</strong></h3> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre> 　　　　$('#btn_add').on("click", <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> () {
            $(</span>"#myModal").modal().on("shown.bs.modal", <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> () {
                </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> oEmptyModel =<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> {
                    id: ko.observable(),
                    Name: ko.observable(),
                    Level: ko.observable(),
                    Des: ko.observable(),
                    CreateTime: ko.observable()
                };
                ko.utils.extend(operate.DepartmentModel, oEmptyModel);
                ko.applyBindings(operate.DepartmentModel, document.getElementById(</span>"myModal"<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">));
                operate.operateSave();
            }).on(</span>'hidden.bs.modal', <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> () {
                ko.cleanNode(document.getElementById(</span>"myModal"<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">));
            });
        });</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">当我们界面触发新增操作的时候，首先会弹出上面说的隐藏模态框。在模态框显示的时候，首先定义一个空的viewmodel，然后调用&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">ko.utils.extend(operate.DepartmentModel, oEmptyModel);</span>&nbsp;这一句，将全局的operate.DepartmentModel被空的viewmodel覆盖。ko.utils.extend()这个方法的作用和jquery里面的$.extend()作用类似，都是根据后面对象合并前面对象，合并之后，使用新的viewmodel激活绑定。激活绑定之后，注册保存按钮的click事件。这样新增的时候，弹出模态框，由于viewmodel里面的监控属性都是空的，对应界面元素的value也会被清空，所以新增我们看到是这样：</p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><img src="https://images2015.cnblogs.com/blog/459756/201604/459756-20160419120938741-71744900.png" alt="" style="border:0px;"></p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">当弹出框关闭后，我们通过关闭的事件，执行&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">ko.cleanNode(document.getElementById("myModal"));</span>&nbsp;这一句，这个很重要，因为对于同一个dom，ko只能绑定一次，如果需要再次绑定，需要先清空绑定，并且cleanNode()这个方法，它不仅会清空绑定，还是会dom里面注册的事件也会清空，使用的时候需要注意下！</p> 
   <h3 style="font-size:16px;line-height:24px;font-family:'微软雅黑', PTSans, Arial, sans-serif;">2.4、编辑操作</h3> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>　　　　$('#btn_edit').on("click", <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> () {
            $(</span>"#myModal").modal().on("shown.bs.modal", <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> () {
                </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> arrselectedData =<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> tableInit.myViewModel.getSelections();
                </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">if</span> (!operate.operateCheck(arrselectedData)) { <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">; }
                </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">将选中该行数据有数据Model通过Mapping组件转换为viewmodel</span>
                ko.utils.extend(operate.DepartmentModel, ko.mapping.fromJS(arrselectedData[0<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">]));
                ko.applyBindings(operate.DepartmentModel, document.getElementById(</span>"myModal"<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">));
                operate.operateSave();
            }).on(</span>'hidden.bs.modal', <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> () {
                </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">关闭弹出框的时候清除绑定(这个清空包括清空绑定和清空注册事件)</span>
                ko.cleanNode(document.getElementById("myModal"<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">));
            });
        });</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">当我们触发编辑操作的时候，界面还是弹出框。在弹出框的弹出事件里面，我们取到当前选中的行，然后校验是否选中了一行。最好通过&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">ko.mapping.fromJS(arrselectedData[0])</span>&nbsp;这一句，将普通的Json对象转换为带有监控属性的viewmodel，上篇说过，这个方法需要&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">knockout.mapping-latest.js</span>&nbsp;这个js文件的支持。转换之后，还是通过ko.utils.extend()方法更新viewmodel，然后激活绑定。由于viewmodel被当前选中行的数据更新了，所以得到结果：</p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><img src="https://images2015.cnblogs.com/blog/459756/201604/459756-20160419122006085-909721714.png" alt="" style="border:0px;"></p> 
   <h3 style="font-size:16px;line-height:24px;font-family:'微软雅黑', PTSans, Arial, sans-serif;">2.5、保存操作</h3> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">在新增和编辑弹出框之后，修改相关信息后点击保存，就会触发保存事件。</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>        $('#btn_submit').on("click", <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> () {
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">取到当前的viewmodel</span>
            <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> oViewModel =<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> operate.DepartmentModel;
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">将Viewmodel转换为数据model</span>
            <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> oDataModel =<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> ko.toJS(oViewModel);
</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> funcName = oDataModel.id?"Update":"Add"<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">;</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">
            $.ajax({
                url: </span>"/Department/"+<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">funcName,
                type: </span>"post"<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">,
                data: oDataModel,
                success: </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">function</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> (data, status) {
                    alert(status);
                    tableInit.myViewModel.refresh();
                }
            });
        });</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">当触发保存事件的时候，我们首先取到页面绑定的viewmodel，即operate.DepartmentModel，然后使用ko.toJS()方法将带有监控属性的viewmodel转换为纯数据的Json对象，这个方法是ko内置的，不需要其他js支持。得到json对象之后，发送ajax请求，去新增或者编辑数据。这样就很好地体现了双向绑定，界面上面所有文本框的value发生了变化之后，也会触发operate.DepartmentModel的变化。</p> 
   <h3 style="font-size:16px;line-height:24px;font-family:'微软雅黑', PTSans, Arial, sans-serif;">2.6、删除操作</h3> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">删除操作没什么好说的，和ko关系不大。</p> 
   <div style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;text-align:right;"> 
    <a href="http://www.cnblogs.com/landeanfen/p/5407221.html#_labelTop" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">回到顶部</a>
    <a name="_label2" style="color:rgb(39,105,192);"></a> 
   </div> 
   <h1 style="font-size:25px;line-height:31px;color:rgb(255,255,255);font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(43,102,0);">三、总结</h1> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">以上通过一个简单的增删改查操作，介绍了下ko和bootstrapTable的联合使用。ko可以让你从DOM中解放出来，把关注点放在viewmodel上面。纵观整个js代码，几乎看不到jquery的val()、text()等对界面dom做取值和赋值的操作，是不是看着干净清爽，并且高大上了呢~~当然，这或许只是ko的一些比较基础的用法，毕竟博主学习ko才3天，更多高级用法还有待摸索，等过段时间用熟了，再将它的一些高级用法分享给大家。如果你觉得本文能够帮助你理解ko的原理以及它的一些用法，不妨<strong>推荐</strong>下，博主一定继续努力！</p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">&nbsp;</p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><br></p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><br></p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><br></p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><br></p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><br></p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><br></p> 
   <p><font><span style="line-height:24px;">本文转自懒得安分博客园博客，原文链接：http://www.cnblogs.com/landeanfen/p/5407221.html，如需转载请自行联系原作者</span></font><br></p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
