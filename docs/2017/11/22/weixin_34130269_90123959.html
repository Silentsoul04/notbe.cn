<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>重建控制文件具体解释 « NotBeCN</title>
  <meta name="description" content="                 http://note.youdao.com/share/?id=d3991566cad33723db8b92183dcd9161&amp;type=note           完整图文最新版            &nbsp;            创造“重建控制文件脚本”须...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/22/weixin_34130269_90123959.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">重建控制文件具体解释</h1>
    <p class="post-meta">Nov 22, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <span style="line-height:1.8;"><a href="http://note.youdao.com/share/?id=d3991566cad33723db8b92183dcd9161&amp;type=note" rel="nofollow" style="color:rgb(0,0,0);border-bottom:1px dotted rgb(51,51,51);">http://note.youdao.com/share/?id=d3991566cad33723db8b92183dcd9161&amp;type=note</a></span>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <span style="line-height:1.8;">完整图文最新版</span>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"> 
    <span style="line-height:1.8;"></span>&nbsp;
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"> 
    <span style="line-height:1.8;">创造“重建控制文件脚本”须要在mount或open下进行。 </span>
    <p></p> 
    <p></p> 
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <span style="line-height:1.8;">alter database backup controlfile to trace as '/tmp/ctl..sql';</span>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <span style="line-height:1.8;"><br></span>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <span style="line-height:1.8;">运行“重建控制文件脚本”须要在nomount的时候。</span>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"> 
    <span style="line-height:1.8;"></span>&nbsp;
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"> 
    <p>-- The following are current System-scope REDO Log Archival related<br> -- parameters and can be included in the database initialization file.<br> --<br> -- LOG_ARCHIVE_DEST=''<br> -- LOG_ARCHIVE_DUPLEX_DEST=''<br> --<br> -- LOG_ARCHIVE_FORMAT=%t_%s_%r.dbf<br> --<br> -- DB_UNIQUE_NAME="gs01ehis"<br> --<br> -- LOG_ARCHIVE_CONFIG='SEND, RECEIVE, NODG_CONFIG'<br> -- LOG_ARCHIVE_MAX_PROCESSES=2<br> -- STANDBY_FILE_MANAGEMENT=MANUAL<br> -- STANDBY_ARCHIVE_DEST=?/dbs/arch<br> -- FAL_CLIENT=''<br> -- FAL_SERVER=''<br> --<br> -- LOG_ARCHIVE_DEST_1='LOCATION=/paic/stg/oracle/10g/app102056/oracle/product/10.2.0/dbs/arch'<br> -- LOG_ARCHIVE_DEST_1='MANDATORY NOREOPEN NODELAY'<br> -- LOG_ARCHIVE_DEST_1='ARCH NOAFFIRM EXPEDITE NOVERIFY SYNC'<br> -- LOG_ARCHIVE_DEST_1='NOREGISTER NOALTERNATE NODEPENDENCY'<br> -- LOG_ARCHIVE_DEST_1='NOMAX_FAILURE NOQUOTA_SIZE NOQUOTA_USED NODB_UNIQUE_NAME'<br> -- LOG_ARCHIVE_DEST_1='VALID_FOR=(PRIMARY_ROLE,ONLINE_LOGFILES)'<br> -- LOG_ARCHIVE_DEST_STATE_1=ENABLE<br> --<br> -- Below are two sets of SQL statements, each of which creates a new<br> -- control file and uses it to open the database. The first set opens<br> -- the database with the NORESETLOGS option and should be used only if<br> -- the current versions of all online logs are available. The second<br> -- set opens the database with the RESETLOGS option and should be used<br> -- if online logs are unavailable.<br> -- The appropriate set of statements can be copied from the trace into<br> -- a script file, edited as necessary, and executed when there is a<br> -- need to re-create the control file.<br> --<br> --&nbsp;&nbsp;&nbsp;&nbsp; Set #1. NORESETLOGS case<br> --<br> -- The following commands will create a new control file and use it<br> -- to open the database.<br> -- Data used by Recovery Manager will be lost.<br> -- Additional logs may be required for media recovery of offline<br> -- Use this only if the current versions of all online logs are<br> -- available.</p> 
    <p>-- After mounting the created controlfile, the following SQL<br> -- statement will place the database in the appropriate<br> -- protection mode:<br> --&nbsp; ALTER DATABASE SET STANDBY DATABASE TO MAXIMIZE PERFORMANCE</p> 
    <p>STARTUP NOMOUNT<br> CREATE CONTROLFILE REUSE DATABASE "GS01EHIS" NORESETLOGS FORCE LOGGING NOARCHIVELOG<br> &nbsp;&nbsp;&nbsp; MAXLOGFILES 32<br> &nbsp;&nbsp;&nbsp; MAXLOGMEMBERS 3<br> &nbsp;&nbsp;&nbsp; MAXDATAFILES 800<br> &nbsp;&nbsp;&nbsp; MAXINSTANCES 8<br> &nbsp;&nbsp;&nbsp; MAXLOGHISTORY 18696<br> LOGFILE<br> &nbsp; GROUP 1 '/paic/drsh101/stg/ehis/data/oradata/gs01ehis/redo01.log'&nbsp; SIZE 100M,<br> &nbsp; GROUP 2 '/paic/drsh101/stg/ehis/data/oradata/gs01ehis/redo02.log'&nbsp; SIZE 100M,<br> &nbsp; GROUP 3 '/paic/drsh101/stg/ehis/data/oradata/gs01ehis/redo03.log'&nbsp; SIZE 100M<br> -- STANDBY LOGFILE</p> 
    <p>DATAFILE<br> &nbsp; '/paic/drsh101/stg/ehis/data/oradata/gs01ehis/system01.dbf',<br> &nbsp; '/paic/drsh101/stg/ehis/data/oradata/gs01ehis/undotbs01.dbf',<br> &nbsp;&nbsp; '/paic/drsh101/stg/ehis/data/oradata/gs01ehis/system01.dbf',<br> &nbsp; '/paic/drsh101/stg/ehis/data/oradata/gs01ehis/undotbs01.dbf',<br> &nbsp; '/paic/drsh101/stg/ehis/data/oradata/gs01ehis/sysaux01.dbf',<br> &nbsp; '/paic/drsh101/stg/ehis/data/oradata/gs01ehis/users01.dbf',<br> &nbsp; '/paic/drsh101/stg/ehis/data/oradata/gs01ehis/auddata01.dbf',<br> &nbsp; '/paic/drsh101/stg/ehis/data/oradata/gs01ehis/dbadata01.dbf'<br> CHARACTER SET ZHS16GBK<br> ;</p> 
    <p>- Commands to re-create incarnation table<br> -- Below log names MUST be changed to existing filenames on<br> -- disk. Any one log file from each branch can be used to<br> -- re-create incarnation records.<br> -- ALTER DATABASE REGISTER LOGFILE '/paic/stg/oracle/10g/app102056/oracle/product/10.2.0/dbs/arch1_1_807985002.dbf';<br> -- ALTER DATABASE REGISTER LOGFILE '/paic/stg/oracle/10g/app102056/oracle/product/10.2.0/dbs/arch1_1_807987054.dbf';<br> -- Recovery is required if any of the datafiles are restored backups,<br> -- or if the last shutdown was not normal or immediate.<br> RECOVER DATABASE</p> 
    <p>-- Set Database Guard and/or Supplemental Logging<br> ALTER DATABASE ADD SUPPLEMENTAL LOG DATA;<br> -- Database can now be opened normally.<br> ALTER DATABASE OPEN;</p> 
    <p>-- Files in read-only tablespaces are now named.<br> ALTER DATABASE RENAME FILE 'MISSING00030'<br> &nbsp; TO '/paic/drsh101/stg/ehis/data/oradata/gs01ehis/fwy01.dbf';</p> 
    <p>-- Online the files in read-only tablespaces.<br> ALTER TABLESPACE "FWY01" ONLINE;<br> -- Commands to add tempfiles to temporary tablespaces.<br> -- Online tempfiles have complete space information.<br> -- Other tempfiles may require adjustment.<br> ALTER TABLESPACE TEMP ADD TEMPFILE '/paic/drsh101/stg/ehis/data/oradata/gs01ehis/temp01.dbf' REUSE;<br> -- End of tempfile additions.<br> --<br> --&nbsp;&nbsp;&nbsp;&nbsp; Set #2. RESETLOGS case<br> --<br> -- The following commands will create a new control file and use it<br> -- to open the database.<br> -- Data used by Recovery Manager will be lost.<br> -- The contents of online logs will be lost and all backups will<br> -- be invalidated. Use this only if online logs are damaged.</p> 
    <p>-- After mounting the created controlfile, the following SQL<br> -- statement will place the database in the appropriate<br> -- protection mode:<br> --&nbsp; ALTER DATABASE SET STANDBY DATABASE TO MAXIMIZE PERFORMANCE</p> 
    <p>STARTUP NOMOUNT<br> CREATE CONTROLFILE REUSE DATABASE "GS01EHIS" RESETLOGS FORCE LOGGING NOARCHIVELOG<br> &nbsp;&nbsp;&nbsp; MAXLOGFILES 32<br> &nbsp;&nbsp;&nbsp; MAXLOGMEMBERS 3<br> &nbsp;&nbsp;&nbsp; MAXDATAFILES 800<br> &nbsp;&nbsp;&nbsp; MAXINSTANCES 8<br> &nbsp;&nbsp;&nbsp; MAXLOGHISTORY 18696<br> LOGFILE<br> &nbsp; GROUP 1 '/paic/drsh101/stg/ehis/data/oradata/gs01ehis/redo01.log'&nbsp; SIZE 100M,<br> &nbsp; GROUP 2 '/paic/drsh101/stg/ehis/data/oradata/gs01ehis/redo02.log'&nbsp; SIZE 100M,<br> &nbsp; GROUP 3 '/paic/drsh101/stg/ehis/data/oradata/gs01ehis/redo03.log'&nbsp; SIZE 100M<br> -- STANDBY LOGFILE</p> 
    <p>DATAFILE<br> &nbsp; '/paic/drsh101/stg/ehis/data/oradata/gs01ehis/system01.dbf',<br> &nbsp; '/paic/drsh101/stg/ehis/data/oradata/gs01ehis/undotbs01.dbf',<br> &nbsp;&nbsp;&nbsp;&nbsp; '/paic/drsh101/stg/ehis/data/oradata/gs01ehis/system01.dbf',<br> &nbsp; '/paic/drsh101/stg/ehis/data/oradata/gs01ehis/undotbs01.dbf',<br> &nbsp; '/paic/drsh101/stg/ehis/data/oradata/gs01ehis/sysaux01.dbf',<br> &nbsp; '/paic/drsh101/stg/ehis/data/oradata/gs01ehis/users01.dbf',<br> &nbsp; '/paic/drsh101/stg/ehis/data/oradata/gs01ehis/auddata01.dbf',<br> &nbsp; '/paic/drsh101/stg/ehis/data/oradata/gs01ehis/dbadata01.dbf'<br> CHARACTER SET ZHS16GBK<br> ;<br> -- Commands to re-create incarnation table<br> -- Below log names MUST be changed to existing filenames on<br> -- disk. Any one log file from each branch can be used to<br> -- re-create incarnation records.<br> -- re-create incarnation records.<br> -- ALTER DATABASE REGISTER LOGFILE '/paic/stg/oracle/10g/app102056/oracle/product/10.2.0/dbs/arch1_1_807985002.dbf';<br> -- ALTER DATABASE REGISTER LOGFILE '/paic/stg/oracle/10g/app102056/oracle/product/10.2.0/dbs/arch1_1_807987054.dbf';<br> -- Recovery is required if any of the datafiles are restored backups,<br> -- or if the last shutdown was not normal or immediate.<br> RECOVER DATABASE USING BACKUP CONTROLFILE</p> 
    <p>-- Set Database Guard and/or Supplemental Logging<br> ALTER DATABASE ADD SUPPLEMENTAL LOG DATA;<br> -- Database can now be opened zeroing the online logs.<br> ALTER DATABASE OPEN RESETLOGS;</p> 
    <p>-- Files in read-only tablespaces are now named.<br> ALTER DATABASE RENAME FILE 'MISSING00030'<br> &nbsp; TO '/paic/drsh101/stg/ehis/data/oradata/gs01ehis/fwy01.dbf';</p> 
    <p>-- Online the files in read-only tablespaces.<br> ALTER TABLESPACE "FWY01" ONLINE;<br> -- Commands to add tempfiles to temporary tablespaces.<br> -- Online tempfiles have complete space information.<br> -- Other tempfiles may require adjustment.<br> ALTER TABLESPACE TEMP ADD TEMPFILE '/paic/drsh101/stg/ehis/data/oradata/gs01ehis/temp01.dbf' REUSE;<br> -- End of tempfile additions.</p> 
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"> 
    <span style="line-height:1.8;"></span>&nbsp;
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <span style="line-height:1.8;">主要分为两部分，resetlogs也有noresetlogs的重建控制文件脚本。假设想单独要某部分，分别运行下面语句就可以。</span>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <span style="line-height:1.8;">alter database backup controlfile to trace as '/tmp/ctl_1.sql' noresetlogs;</span>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <span style="line-height:1.8;">alter database backup controlfile to trace as '/tmp/ctl_1.sql' resetlogs;</span>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"></div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <span style="line-height:1.8;"></span>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <span style="line-height:1.8;"><br></span>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <span style="line-height:1.8;">以下分别来解说。红框的几种选项。</span>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <span style="line-height:1.8;">重建控制文件的时候会去数据文件头读db_name。reuse是会參考数据文件头的db_name，而set会将数据文件头的db_name都改成脚本中指定的database "ZXRRIN"</span>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"> 
    <div>
     <span style="line-height:1.8;">。</span>
    </div> 
    <div>
     <span style="line-height:1.8;"><br></span>
    </div> 
    <div>
     <span style="line-height:1.8;">SET还是REUSE</span>
    </div> 
    <div>
     <span style="line-height:1.8;">假如我选reuse database "ZXRRIN2",而数据文件头是ZXRRIN2，那么会报例如以下错误。</span>
    </div> 
    <div>
     <span style="line-height:1.8;">ORA-01503: CREATE CONTROLFILE failed</span>
    </div> 
    <div>
     <span style="line-height:1.8;">ORA-01161: database name ZXRRIN in file header does not match given name of</span>
    </div> 
    <div>
     <span style="line-height:1.8;">ZXRRIN2</span>
    </div> 
    <div>
     <span style="line-height:1.8;">ORA-01110: data file 1: '/oradata/zxrrin/zxrrin/system01.dbf'</span>
    </div> 
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"> 
    <span style="line-height:1.8;">所以。仅仅有数据文件头的database name与參数文件的db_name一致。才干在重建控制文件时用reuse。 </span>
    <p></p> 
    <p>当然，用set也没关系。仅仅是将数据文件头的db_name重写成同样的。就如update t set i=3 where i=3一样。假设想改变数据文件头的db_name使他们与起库參数的db_name一致，就当然得用set咯。</p> 
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <span style="line-height:1.8;"><br></span>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <span style="line-height:1.8;">database "ZXRRIN"</span>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"> 
    <div>
     <span style="line-height:1.8;">database "ZXRRIN"指定的db_name。要跟起库參数文件的db_name一致。重建控制文件才干成功。</span>
    </div> 
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"> 
    <span style="line-height:1.8;">这是必须的。而跟REUSE还是SET等没关系。所以不能用A1起库，然后重建控制文件成A2的db_name哦。 </span>
    <p></p> 
    <p></p> 
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <span style="line-height:1.8;"><br></span>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <span style="line-height:1.8;">noresetlogs还是resetlogs</span>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"> 
    <div> 
     <span style="line-height:1.8;">重建conrolfile时，假如用的是noresetlogs的选项。那么controlfile里面的系统scn号。以及controlfile里面记录的数据文件scn号。来自Online logs中的Current log头。 </span>
     <p></p> 
     <p>&nbsp;所以这个操作的前提是。在线日志完善没有损坏。而且，不会擦除redo log file中的内容与重置redo头的scn号。起库的时候，仅仅能alter database open，而不能alter database open resetlogs。否则会报这个错。</p> 
    </div> 
    <div>
     <span style="line-height:1.8;">SQL&gt; alter database open noresetlogs;</span>
    </div> 
    <div>
     <span style="line-height:1.8;">alter database open noresetlogs</span>
    </div> 
    <div>
     <span style="line-height:1.8;">*</span>
    </div> 
    <div>
     <span style="line-height:1.8;">ERROR at line 1:</span>
    </div> 
    <div>
     <span style="line-height:1.8;">ORA-01139: RESETLOGS option only valid after an incomplete database recovery</span>
    </div> 
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <span style="line-height:1.8;">所以，在重建控制文件时选择noresetlogs，oracle就会觉得你想告诉他。“我非常可能是不一致关闭的”，既然是不一致关闭。那怎么能alter database open resetlogs呢。所以会报上面的错。</span>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <span style="line-height:1.8;">在运行”重建控制文件脚本“的时候假设不须要在线重做日志的话能够用resetlogs选项。选择resetlogs，会将redo log file中的内容清空。sequence#由1算起。重建过程中，控制文件里datafile Checkpoint来自各数据文件头。而<span style="line-height:1.8;font-family:Simsun;">controlfile中记录的系统scn，会被设为0.能够通过</span><span style="line-height:1.8;font-family:Simsun;">select checkpoint_change# &nbsp;from v$database;看出来。</span></span>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <span style="line-height:1.8;"><br></span>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <span style="line-height:1.8;"><span style="line-height:1.8;">NOARCHIVELOG还是ARCHIVELOG</span></span>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"> 
    <span style="line-height:1.8;">重建控制文件脚本中，NOARCHIVELOG与ARCHIVELOG字段，选择重建的控制文件是使库不归档或者归档的。 </span>
    <p></p> 
    <p></p> 
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"> 
    <span style="line-height:1.8;">一个数据库是否开启归档。是在控制文件中面辨析的。 </span>
    <p></p> 
    <p></p> 
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <span style="line-height:1.8;"><br></span>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <span style="line-height:1.8;">几者之间的关系</span>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <span style="line-height:1.8;">假设要用set，那么一定要跟resetlogs那一part。由于set会改数据文件头的db_name。那么redo log file中的日志已经没用了，由于应用日志时必须匹配db_name的。</span>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <span style="line-height:1.8;">假如用set配noresetlogs会出现报错：</span>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <span style="line-height:1.8;">ORA-01223: RESETLOGS must be specified to set a new database name</span>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <span style="line-height:1.8;"><br></span>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <span style="line-height:1.8;">关于tempfile</span>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"> 
    <div> 
     <div>
      <span style="line-height:1.8;">重建的控制文件不包括temp文件。所以重建控制文件脚本中有例如以下语句。</span>
     </div> 
    </div> 
    <div> 
     <span style="line-height:1.8;">ALTER TABLESPACE TEMP ADD TEMPFILE '/paic/drsh101/stg/ehis/d</span>
     <span style="line-height:1.8;">ata/oradata/gs01ehis/temp01.dbf' REUSE;</span> 
    </div> 
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"> 
    <span style="line-height:1.8;">我们也能够拷贝出来，等open库后再运行。 </span>
    <p></p> 
    <p></p> 
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"> 
    <div>
     <span style="line-height:1.8;">重建控制文件的时候。对应的redo与datafile文件必须已经存在，datafile文件必须是一致的。</span>
    </div> 
    <div> 
     <span style="line-height:1.8;">而tempfile是不必要存在的，</span>
     <span style="line-height:1.8;">起库后，要为temp表空间加入tempfile。否则temp表空间里面空空如也。</span> 
    </div> 
    <div>
     <span style="line-height:1.8;">ALTER TABLESPACE TEMP ADD TEMPFILE '/oradata/zxrrin/zxrrin/temp01.dbf' size 100m reuse autoextend on;</span>
    </div> 
    <div>
     <span style="line-height:1.8;">加上reuse是非常好的，假设已经存在就覆盖掉，假设不存在就新建上。</span>
    </div> 
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <span style="line-height:1.8;"><br></span>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <span style="line-height:1.8;"><br></span>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"> 
    <span style="line-height:1.8;">这个命令能够备份控制文件成二进制文件。</span>
    <br>
    <span style="line-height:1.8;">ALTER DATABASE BACKUP CONTROLFILE TO '/tmp/fwy.ctl';</span> 
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <span style="line-height:1.8;"><br></span>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <br>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <span style="line-height:1.8;"><br></span>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <br>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <br>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <span style="line-height:1.8;"><br></span>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <br>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <span style="line-height:1.8;"><br></span>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <span style="line-height:1.8;"><br></span>
   </div> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <br>
   </div> 
   <div> 
    <div> 
     <span style="line-height:1.8;"> </span>
     <div>
      <font color="#333333"><span style="font-size:14px;"><br></span></font>
     </div> 
     <div>
      <font color="#333333"><span style="font-size:14px;">本文转自mfrbuaa博客园博客，原文链接：http://www.cnblogs.com/mfrbuaa/p/5099959.html，如需转载请自行联系原作者</span></font>
     </div> 
     <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
      <br>
     </div> 
    </div> 
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
