<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>【原】Github系列之一：一起做仿天气类应用中的实时模糊效果LiveBlur « NotBeCN</title>
  <meta name="description" content="             从本文开始，我将专门开辟一个Github Code系列，开源自己写的一部分有意思而且实用的demo，共同学习。以前都发布在git OSChina上，后面有空会陆陆续续整理到Github上。OSChina最大的优点是可以免费托管私有项目，服务器在国内速度快，这些是Github所比不了的。不...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/22/weixin_33828101_90126763.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">【原】Github系列之一：一起做仿天气类应用中的实时模糊效果LiveBlur</h1>
    <p class="post-meta">Nov 22, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-size:16px;">从本文开始，我将专门开辟一个Github Code系列，开源自己写的一部分有意思而且实用的demo，共同学习。以前都发布在git OSChina上，后面有空会陆陆续续整理到Github上。OSChina最大的优点是可以免费托管私有项目，服务器在国内速度快，这些是Github所比不了的。不过Github优势在于开源氛围浓烈，有利于向各位开源大牛学习交流。长话短说，just do it!</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-size:16px;">本文只要实现随滚动实时模糊(或称为动态模糊)的效果(请见文章末尾处)，这种效果被广泛应用于各大天气类APP中，如墨迹天气、黄历天气、雅虎天气等。随着scrollView向上滚动，背景逐渐模糊，二者是相互联动的，实现起来很简单。在文章的后半部分我们尝试用两种方法实现这种效果。不过我要强调的一点是，我的一些文章的方法思路虽简单，但我更注重这个过程中对一些“坑”的处理，这是个融汇贯通的过程。比如预告一下，本文提到了几个坑：<span style="color:rgb(255,0,0);">KVO陷阱、autoRelease坑、drawRect坑</span>...</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="line-height:1.5;font-size:16px;">首先，我们利用KVO将scrollView的contentOffset与Image的模糊度进行绑定，这样我们就能实时检测到scrollview(本文为tableview)的滚动偏移量，从而改变image的模糊度。</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-size:16px;">在此之前，我们从UIImageView派生出子类WZLLiveBlurImageView来实现图像的模糊改变，先看头文件不管实现：</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:12px;font-family:'Courier New';line-height:1.5;"> 
    <div class="cnblogs_code_toolbar" style="line-height:1.5;">
     <span class="cnblogs_code_copy" style="font-size:18px;line-height:1.5;"><a title="复制代码" style="color:rgb(68,68,68);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,128,128);line-height:1.5;"> 1</span> <span style="color:rgb(0,0,255);line-height:1.5;">#import</span> &lt;UIKit/UIKit.h&gt;
<span style="color:rgb(0,128,128);line-height:1.5;"> 2</span> <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">default initial blur level</span>
<span style="color:rgb(0,128,128);line-height:1.5;"> 3</span> <span style="color:rgb(0,0,255);line-height:1.5;">#define</span> kImageBlurLevelDefault          0.9f
<span style="color:rgb(0,128,128);line-height:1.5;"> 4</span> <span style="color:rgb(0,0,255);line-height:1.5;">@interface</span><span style="line-height:1.5;"> WZLLiveBlurImageView : UIImageView
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 5</span> 
<span style="color:rgb(0,128,128);line-height:1.5;"> 6</span> <span style="color:rgb(0,128,0);line-height:1.5;">/*</span><span style="color:rgb(0,128,0);line-height:1.5;">*
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 7</span> <span style="color:rgb(0,128,0);line-height:1.5;"> *  set blur level
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 8</span> <span style="color:rgb(0,128,0);line-height:1.5;"> *
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 9</span> <span style="color:rgb(0,128,0);line-height:1.5;"> *  @param level blur level
</span><span style="color:rgb(0,128,128);line-height:1.5;">10</span>  <span style="color:rgb(0,128,0);line-height:1.5;">*/</span>
<span style="color:rgb(0,128,128);line-height:1.5;">11</span> - (<span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;">)setBlurLevel:(CGFloat)level;
</span><span style="color:rgb(0,128,128);line-height:1.5;">12</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">13</span> <span style="color:rgb(0,0,255);line-height:1.5;">@end</span></pre> 
    <div class="cnblogs_code_toolbar" style="line-height:1.5;">
     <span class="cnblogs_code_copy" style="font-size:18px;line-height:1.5;"><a title="复制代码" style="color:rgb(68,68,68);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-size:16px;">setBlurLevel:是唯一的方法接口给调用者调用。接着我们在一个ViewController中把这个WZLLiveBlurImageView显示出来。在ViewController中还应该有一个tableView用于模拟天气类应用的使用场景。那WZLLiveBlurImageView要放在哪里比较合适呢？tableView有一个subView叫做backgroundView，就选它了。以下是初始化代码，放在ViewController的viewDidLoad方法中：</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:12px;font-family:'Courier New';line-height:1.5;"> 
    <div class="cnblogs_code_toolbar" style="line-height:1.5;">
     <span class="cnblogs_code_copy" style="font-size:18px;line-height:1.5;"><a title="复制代码" style="color:rgb(68,68,68);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,128,128);line-height:1.5;"> 1</span>    <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">generate item content for tableView</span>
<span style="color:rgb(0,128,128);line-height:1.5;"> 2</span>     _items =<span style="line-height:1.5;"> [self items];
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 3</span>     self.tableView.dataSource =<span style="line-height:1.5;"> self;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 4</span>     self.tableView.<span style="color:rgb(0,0,255);line-height:1.5;">delegate</span> =<span style="line-height:1.5;"> self;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 5</span>     self.tableView.separatorStyle =<span style="line-height:1.5;"> UITableViewCellSeparatorStyleNone;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 6</span>     self.tableView.separatorColor =<span style="line-height:1.5;"> [UIColor clearColor];
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 7</span>     _blurImgView = [[WZLLiveBlurImageView alloc] initWithImage:[UIImage imageNamed:<span style="color:rgb(128,0,0);line-height:1.5;">@"</span><span style="color:rgb(128,0,0);line-height:1.5;">bg.jpg</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">]];
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 8</span>     _blurImgView.frame =<span style="line-height:1.5;"> self.tableView.frame;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 9</span>     self.tableView.backgroundView =<span style="line-height:1.5;"> _blurImgView;
</span><span style="color:rgb(0,128,128);line-height:1.5;">10</span>     self.tableView.backgroundColor =<span style="line-height:1.5;"> [UIColor clearColor];
</span><span style="color:rgb(0,128,128);line-height:1.5;">11</span>     self.tableView.contentInset = UIEdgeInsetsMake(CGRectGetHeight(self.tableView.bounds) - <span style="color:rgb(128,0,128);line-height:1.5;">100</span>, <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, <span style="color:rgb(128,0,128);line-height:1.5;">0</span>);</pre> 
    <div class="cnblogs_code_toolbar" style="line-height:1.5;">
     <span class="cnblogs_code_copy" style="font-size:18px;line-height:1.5;"><a title="复制代码" style="color:rgb(68,68,68);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-size:16px;">那我们怎么知道tableview到底滚动了多少呢？答案是KVO。KVO的使用当中是有坑的，<span style="color:rgb(255,0,0);">写出一个健壮稳定的KVO需要注意很多细节</span>，比如要小心崩溃问题，要防止KVO链断开等...对KVO不熟的同学请移步我的另一篇博文：《<a href="http://www.cnblogs.com/wengzilin/p/4346775.html" rel="nofollow" style="color:rgb(68,68,68);">KVO使用中的陷阱</a>》。 紧接着上面的代码，我们继续配置KVO，"contentOffset"字符串必须与tableview的属性值完全一致才有效</span>：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:12px;font-family:'Courier New';line-height:1.5;"> 
    <div class="cnblogs_code_toolbar" style="line-height:1.5;">
     <span class="cnblogs_code_copy" style="font-size:18px;line-height:1.5;"><a title="复制代码" style="color:rgb(68,68,68);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,128,128);line-height:1.5;">1</span>     <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">setup kvo on tableview`s contentoffset</span>
<span style="color:rgb(0,128,128);line-height:1.5;">2</span>     [self.tableView addObserver:self forKeyPath:<span style="color:rgb(128,0,0);line-height:1.5;">@"</span><span style="color:rgb(128,0,0);line-height:1.5;">contentOffset</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>
<span style="color:rgb(0,128,128);line-height:1.5;">3</span> <span style="line-height:1.5;">                        options:NSKeyValueObservingOptionNew
</span><span style="color:rgb(0,128,128);line-height:1.5;">4</span>                         context:(__bridge <span style="color:rgb(0,0,255);line-height:1.5;">void</span> *)(kWZLLiveBlurImageViewContext)];//kWZLLiveBlurImageViewContext是一个全局的字符串</pre> 
    <div class="cnblogs_code_toolbar" style="line-height:1.5;">
     <span class="cnblogs_code_copy" style="font-size:18px;line-height:1.5;"><a title="复制代码" style="color:rgb(68,68,68);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-size:16px;">注册与注销要成对出现，尽管是ARC，但在dealloc也要清理现场：</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:12px;font-family:'Courier New';line-height:1.5;"> 
    <div class="cnblogs_code_toolbar" style="line-height:1.5;">
     <span class="cnblogs_code_copy" style="font-size:18px;line-height:1.5;"><a title="复制代码" style="color:rgb(68,68,68);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,128,128);line-height:1.5;">1</span> - (<span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;">)dealloc
</span><span style="color:rgb(0,128,128);line-height:1.5;">2</span> <span style="line-height:1.5;">{
</span><span style="color:rgb(0,128,128);line-height:1.5;">3</span>     [self.tableView removeObserver:self forKeyPath:<span style="color:rgb(128,0,0);line-height:1.5;">@"</span><span style="color:rgb(128,0,0);line-height:1.5;">contentOffset</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>
<span style="color:rgb(0,128,128);line-height:1.5;">4</span>                            context:(__bridge <span style="color:rgb(0,0,255);line-height:1.5;">void</span> *<span style="line-height:1.5;">)kWZLLiveBlurImageViewContext];
</span><span style="color:rgb(0,128,128);line-height:1.5;">5</span> }</pre> 
    <div class="cnblogs_code_toolbar" style="line-height:1.5;">
     <span class="cnblogs_code_copy" style="font-size:18px;line-height:1.5;"><a title="复制代码" style="color:rgb(68,68,68);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-size:16px;">添加KVO的默认回调函数，当前类的所有KVO都走的这里，建议KVO都写成如下这样，注意对super以及context的处理</span>：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:12px;font-family:'Courier New';line-height:1.5;"> 
    <div class="cnblogs_code_toolbar" style="line-height:1.5;">
     <span class="cnblogs_code_copy" style="font-size:18px;line-height:1.5;"><a title="复制代码" style="color:rgb(68,68,68);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,128,128);line-height:1.5;"> 1</span> <span style="color:rgb(0,0,255);line-height:1.5;">#pragma</span> mark - KVO configuration
<span style="color:rgb(0,128,128);line-height:1.5;"> 2</span> - (<span style="color:rgb(0,0,255);line-height:1.5;">void</span>)observeValueForKeyPath:(NSString *)keyPath ofObject:(<span style="color:rgb(0,0,255);line-height:1.5;">id</span>)<span style="color:rgb(0,0,255);line-height:1.5;">object</span> change:(NSDictionary *)change context:(<span style="color:rgb(0,0,255);line-height:1.5;">void</span> *<span style="line-height:1.5;">)context
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 3</span> <span style="line-height:1.5;">{
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 4</span>     <span style="color:rgb(0,0,255);line-height:1.5;">if</span> (context == (__bridge <span style="color:rgb(0,0,255);line-height:1.5;">void</span> *<span style="line-height:1.5;">)(kWZLLiveBlurImageViewContext)) {
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 5</span>         CGFloat blurLevel = (self.tableView.contentInset.top + self.tableView.contentOffset.y) /<span style="line-height:1.5;"> CGRectGetHeight(self.tableView.bounds);
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 6</span> <span style="line-height:1.5;">        [_blurImgView setBlurLevel:blurLevel];
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 7</span>     } <span style="color:rgb(0,0,255);line-height:1.5;">else</span><span style="line-height:1.5;"> {
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 8</span>         [super observeValueForKeyPath:keyPath ofObject:<span style="color:rgb(0,0,255);line-height:1.5;">object</span><span style="line-height:1.5;"> change:change context:context];
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 9</span> <span style="line-height:1.5;">    }
</span><span style="color:rgb(0,128,128);line-height:1.5;">10</span> }</pre> 
    <div class="cnblogs_code_toolbar" style="line-height:1.5;">
     <span class="cnblogs_code_copy" style="font-size:18px;line-height:1.5;"><a title="复制代码" style="color:rgb(68,68,68);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-size:16px;">以上代码基本就形成了实时模糊的整体框架了，现在还差WZLLiveBlurImageView中对模糊图像的实现。对UIImage进行模糊处理的代码网上有很多，基本都是同一个版本，这里我们就站在巨人的肩膀上，用一下这个算法，使用&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">- (UIImage *)applyBlurWithRadius:(CGFloat)blurRadius;</span>&nbsp;方法对image进行模糊处理：</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:12px;font-family:'Courier New';line-height:1.5;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;font-size:18px;line-height:1.5;">UIImage+Blur.h</span> 
   </div> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:12px;font-family:'Courier New';line-height:1.5;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;font-size:18px;line-height:1.5;">UIImage+Blur.m</span> 
   </div> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-size:16px;">接下来有两种思路可供参考：（1）直接法；（2）间接法</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-size:16px;">（1）直接法</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-size:16px;">从字面上看直接法可以理解为直接改变图片的模糊度，也就是在KVO响应函数中根据tableView偏移量算出一个模糊目标值，每次目标值更新了，就做一次图像模糊处理算法。这种方法简单粗暴，思路直接。由于滚动过程中对模糊处理调用非常频繁，这个时候要特别注意性能问题。在这里影响性能问题主要有两个因素：内存跟绘图。如果内存在短时间内不能及时释放，则在小内存设备上将显得很脆弱！在内存问题上，注意到上述图像模糊算法返回的是一个autoRelease类型的对象，<span style="color:rgb(255,0,0);">但是autoRelease对象并不会在作用域之外就自动释放的</span>(what?如果你觉得惊讶，说明你对autoRelease认识还不够，建议你看看我的另一篇文章：《<a href="http://www.cnblogs.com/wengzilin/p/4351187.html" rel="nofollow" style="color:rgb(68,68,68);">你真的懂autoRelease吗？</a>》)。解决办法就是使用autoReleasePool手动干预对象的释放时机。内存问题解决了，接着是绘图问题。很多文章都说使用比UIKIt更底层的CGGraphy绘图可以达到更高的效率，于是我们写出如下代码：(函数内的单元检测是必须的)</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:12px;font-family:'Courier New';line-height:1.5;"> 
    <div class="cnblogs_code_toolbar" style="line-height:1.5;">
     <span class="cnblogs_code_copy" style="font-size:18px;line-height:1.5;"><a title="复制代码" style="color:rgb(68,68,68);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,128,128);line-height:1.5;"> 1</span> <span style="color:rgb(0,0,255);line-height:1.5;">#import</span> <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">WZLLiveBlurImageView.h</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>
<span style="color:rgb(0,128,128);line-height:1.5;"> 2</span> <span style="color:rgb(0,0,255);line-height:1.5;">#import</span> <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">UIImage+Blur.h</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>
<span style="color:rgb(0,128,128);line-height:1.5;"> 3</span> 
<span style="color:rgb(0,128,128);line-height:1.5;"> 4</span> <span style="color:rgb(0,0,255);line-height:1.5;">@interface</span><span style="line-height:1.5;"> WZLLiveBlurImageView ()
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 5</span> <span style="line-height:1.5;">{
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 6</span>     UIImage *<span style="line-height:1.5;">_originImage;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 7</span> <span style="line-height:1.5;">    CGFloat _blurLevel;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 8</span> <span style="line-height:1.5;">}
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 9</span> <span style="color:rgb(0,0,255);line-height:1.5;">@end</span>
<span style="color:rgb(0,128,128);line-height:1.5;">11</span> <span style="color:rgb(0,0,255);line-height:1.5;">@implementation</span><span style="line-height:1.5;"> WZLLiveBlurImageView</span>
<span style="color:rgb(0,128,128);line-height:1.5;">18</span> - (<span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;">)setBlurLevel:(CGFloat)level
</span><span style="color:rgb(0,128,128);line-height:1.5;">19</span> <span style="line-height:1.5;">{
</span><span style="color:rgb(0,128,128);line-height:1.5;">20</span>     <span style="color:rgb(0,0,255);line-height:1.5;">if</span> (!<span style="line-height:1.5;">self.image) {
</span><span style="color:rgb(0,128,128);line-height:1.5;">21</span>         NSLog(<span style="color:rgb(128,0,0);line-height:1.5;">@"</span><span style="color:rgb(128,0,0);line-height:1.5;">image is empty!</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">);
</span><span style="color:rgb(0,128,128);line-height:1.5;">22</span>         <span style="color:rgb(0,0,255);line-height:1.5;">return</span><span style="line-height:1.5;">;
</span><span style="color:rgb(0,128,128);line-height:1.5;">23</span> <span style="line-height:1.5;">    }
</span><span style="color:rgb(0,128,128);line-height:1.5;">24</span>     _blurLevel =<span style="line-height:1.5;"> level;
</span><span style="color:rgb(0,128,128);line-height:1.5;">25</span> <span style="line-height:1.5;">    [self setNeedsDisplay];
</span><span style="color:rgb(0,128,128);line-height:1.5;">26</span> <span style="line-height:1.5;">}
</span><span style="color:rgb(0,128,128);line-height:1.5;">27</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">28</span> <span style="color:rgb(0,0,255);line-height:1.5;">#pragma</span> mark - private apis
<span style="color:rgb(0,128,128);line-height:1.5;">29</span> - (<span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;">)drawRect:(CGRect)rect
</span><span style="color:rgb(0,128,128);line-height:1.5;">30</span> <span style="line-height:1.5;">{
</span><span style="color:rgb(0,128,128);line-height:1.5;">31</span> <span style="line-height:1.5;">    @autoreleasepool {
</span><span style="color:rgb(0,128,128);line-height:1.5;">32</span>         <span style="color:rgb(0,0,255);line-height:1.5;">if</span><span style="line-height:1.5;"> (_originImage) {
</span><span style="color:rgb(0,128,128);line-height:1.5;">33</span>             UIImage *blurImg =<span style="line-height:1.5;"> [_originImage applyBlurWithRadius:_blurLevel];
</span><span style="color:rgb(0,128,128);line-height:1.5;">34</span> <span style="line-height:1.5;">            [blurImg drawInRect:self.bounds];
</span><span style="color:rgb(0,128,128);line-height:1.5;">35</span> <span style="line-height:1.5;">        }
</span><span style="color:rgb(0,128,128);line-height:1.5;">36</span> <span style="line-height:1.5;">    }
</span><span style="color:rgb(0,128,128);line-height:1.5;">37</span> <span style="line-height:1.5;">}
</span><span style="color:rgb(0,128,128);line-height:1.5;">38</span> <span style="color:rgb(0,0,255);line-height:1.5;">@end</span></pre> 
    <div class="cnblogs_code_toolbar" style="line-height:1.5;">
     <span class="cnblogs_code_copy" style="font-size:18px;line-height:1.5;"><a title="复制代码" style="color:rgb(68,68,68);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-size:16px;">是不是觉得很完美，该考虑的都考虑到了。运行一下发现，图像模糊度没发生改变。为啥？因为drawRect函数根本没调用到！按command+shift+0打开APPLE文档查看UIImageVIew发现以下的描述：</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-size:16px;"><img src="https://images0.cnblogs.com/blog2015/374539/201503/241541175366431.png" alt="" style="border:0px;"></span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-size:16px;">苹果说的很清楚了，<span style="color:rgb(255,0,0);">意思是UIImageView类已经做了优化，如果你子类化UIImageView是不会调用drawRect的</span>！只有从UIView派生的类才允许走drawRect。虽然遇到了坑，不过我们可以放心地直接使用&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">self.image = xxxBlurImage;</span>&nbsp;这样的方法来更新模糊图像了。同时，为了避免&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">self.image = [_originImage applyBlurWithRadius:level];</span>&nbsp;方法太耗时从而阻塞UI，我们使用GCD去处理模糊操作，处理结束后回到主线程更新image。使用GCD过程中要防止循环引用(<a href="http://www.cnblogs.com/wengzilin/p/4347974.html" rel="nofollow" style="color:rgb(68,68,68);">点我点我</a>)，下面就是完整的代码：</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:12px;font-family:'Courier New';line-height:1.5;"> 
    <div class="cnblogs_code_toolbar" style="line-height:1.5;">
     <span class="cnblogs_code_copy" style="font-size:18px;line-height:1.5;"><a title="复制代码" style="color:rgb(68,68,68);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,128,128);line-height:1.5;"> 1</span> <span style="color:rgb(0,0,255);line-height:1.5;">#import</span> <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">WZLLiveBlurImageView.h</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>
<span style="color:rgb(0,128,128);line-height:1.5;"> 2</span> <span style="color:rgb(0,0,255);line-height:1.5;">#import</span> <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">UIImage+Blur.h</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>
<span style="color:rgb(0,128,128);line-height:1.5;"> 3</span> 
<span style="color:rgb(0,128,128);line-height:1.5;"> 4</span> <span style="color:rgb(0,0,255);line-height:1.5;">@interface</span><span style="line-height:1.5;"> WZLLiveBlurImageView ()
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 5</span> @property (nonatomic, strong) UIImage *<span style="line-height:1.5;">originImage;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 6</span> <span style="color:rgb(0,0,255);line-height:1.5;">@end</span>
<span style="color:rgb(0,128,128);line-height:1.5;"> 7</span> 
<span style="color:rgb(0,128,128);line-height:1.5;"> 8</span> <span style="color:rgb(0,0,255);line-height:1.5;">@implementation</span><span style="line-height:1.5;"> WZLLiveBlurImageView
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 9</span> <span style="color:rgb(0,128,0);line-height:1.5;">/*</span><span style="color:rgb(0,128,0);line-height:1.5;">*
</span><span style="color:rgb(0,128,128);line-height:1.5;">10</span> <span style="color:rgb(0,128,0);line-height:1.5;"> *  set blur level
</span><span style="color:rgb(0,128,128);line-height:1.5;">11</span> <span style="color:rgb(0,128,0);line-height:1.5;"> *
</span><span style="color:rgb(0,128,128);line-height:1.5;">12</span> <span style="color:rgb(0,128,0);line-height:1.5;"> *  @param level blur level
</span><span style="color:rgb(0,128,128);line-height:1.5;">13</span>  <span style="color:rgb(0,128,0);line-height:1.5;">*/</span>
<span style="color:rgb(0,128,128);line-height:1.5;">14</span> - (<span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;">)setBlurLevel:(CGFloat)level
</span><span style="color:rgb(0,128,128);line-height:1.5;">15</span> <span style="line-height:1.5;">{
</span><span style="color:rgb(0,128,128);line-height:1.5;">16</span>     <span style="color:rgb(0,0,255);line-height:1.5;">if</span> (!<span style="line-height:1.5;">self.image) {
</span><span style="color:rgb(0,128,128);line-height:1.5;">17</span>         NSLog(<span style="color:rgb(128,0,0);line-height:1.5;">@"</span><span style="color:rgb(128,0,0);line-height:1.5;">image is empty!</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">);
</span><span style="color:rgb(0,128,128);line-height:1.5;">18</span>         <span style="color:rgb(0,0,255);line-height:1.5;">return</span><span style="line-height:1.5;">;
</span><span style="color:rgb(0,128,128);line-height:1.5;">19</span> <span style="line-height:1.5;">    }
</span><span style="color:rgb(0,128,128);line-height:1.5;">20</span>     level = (level &gt; <span style="color:rgb(128,0,128);line-height:1.5;">1</span> ? <span style="color:rgb(128,0,128);line-height:1.5;">1</span> : (level &lt; <span style="color:rgb(128,0,128);line-height:1.5;">0</span> ? <span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;"> : level));
</span><span style="color:rgb(0,128,128);line-height:1.5;">21</span>     NSLog(<span style="color:rgb(128,0,0);line-height:1.5;">@"</span><span style="color:rgb(128,0,0);line-height:1.5;">level:%@</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">, @(level));
</span><span style="color:rgb(0,128,128);line-height:1.5;">22</span>     <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">self.realBlurImageView.alpha = level;</span>
<span style="color:rgb(0,128,128);line-height:1.5;">23</span> <span style="line-height:1.5;">    @autoreleasepool {
</span><span style="color:rgb(0,128,128);line-height:1.5;">24</span>         <span style="color:rgb(0,0,255);line-height:1.5;">if</span><span style="line-height:1.5;"> (_originImage) {
</span><span style="color:rgb(0,128,128);line-height:1.5;">25</span>             __weak <span style="color:rgb(0,0,255);line-height:1.5;">typeof</span>(WZLLiveBlurImageView*) weakSelf =<span style="line-height:1.5;"> self;
</span><span style="color:rgb(0,128,128);line-height:1.5;">26</span>             __block UIImage *blurImage =<span style="line-height:1.5;"> nil;
</span><span style="color:rgb(0,128,128);line-height:1.5;">27</span>             dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span style="color:rgb(128,0,128);line-height:1.5;">0</span>), ^<span style="line-height:1.5;">{
</span><span style="color:rgb(0,128,128);line-height:1.5;">28</span>                 blurImage =<span style="line-height:1.5;"> [weakSelf.originImage applyBlurWithRadius:level];
</span><span style="color:rgb(0,128,128);line-height:1.5;">29</span>                 <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">get back to main thread to update UI</span>
<span style="color:rgb(0,128,128);line-height:1.5;">30</span>                 dispatch_async(dispatch_get_main_queue(), ^<span style="line-height:1.5;">{
</span><span style="color:rgb(0,128,128);line-height:1.5;">31</span>                     weakSelf.image =<span style="line-height:1.5;"> blurImage;
</span><span style="color:rgb(0,128,128);line-height:1.5;">32</span> <span style="line-height:1.5;">                });
</span><span style="color:rgb(0,128,128);line-height:1.5;">33</span> <span style="line-height:1.5;">            });
</span><span style="color:rgb(0,128,128);line-height:1.5;">34</span> <span style="line-height:1.5;">        }
</span><span style="color:rgb(0,128,128);line-height:1.5;">35</span> <span style="line-height:1.5;">    }
</span><span style="color:rgb(0,128,128);line-height:1.5;">36</span> }</pre> 
    <div class="cnblogs_code_toolbar" style="line-height:1.5;">
     <span class="cnblogs_code_copy" style="font-size:18px;line-height:1.5;"><a title="复制代码" style="color:rgb(68,68,68);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-size:16px;">缺点是：在低性能设备上虽然可以实现滚动流畅，但由于CPU性能捉急，导致tableView已经滚动了，image才慢慢模糊，这种延时给人很差的体验。如果去掉GCD，则延时消失，但滚动卡顿严重。在写这篇文章时最新设备是iphone6p，iphone4基本淘汰。用iphone4s真机调试时，直接法hold不住。当然，模拟器无压力妥妥的，不过那又怎样！附直接法在模拟器的效果，录制过程失真了导致模糊效果看起来不自然：</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><img src="https://images0.cnblogs.com/blog2015/374539/201503/241612583175431.gif" alt="" width="172" height="307" style="border:0px;"></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">========================</p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-size:16px;">（2）间接法</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-size:16px;">既然直接法暂时做不了，那我们可以考虑曲线救国。我的策略是在<span class="s1">WZLLiveBlurImageView上添加一个UIImageVIew，称为&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">realBlurImageView</span>&nbsp;，用&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">realBlurImageView</span>&nbsp;来实现真的模糊，但是只模糊一次。在tableview滚动过程中只改变&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">realBlurImageView</span>&nbsp;的透明度alpha。此法可谓移花接木。</span></span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:12px;font-family:'Courier New';line-height:1.5;"> 
    <div class="cnblogs_code_toolbar" style="line-height:1.5;">
     <span class="cnblogs_code_copy" style="font-size:18px;line-height:1.5;"><a title="复制代码" style="color:rgb(68,68,68);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,128,128);line-height:1.5;"> 1</span> <span style="color:rgb(0,0,255);line-height:1.5;">#import</span> <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">WZLLiveBlurImageView.h</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>
<span style="color:rgb(0,128,128);line-height:1.5;"> 2</span> <span style="color:rgb(0,0,255);line-height:1.5;">#import</span> <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">UIImage+Blur.h</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>
<span style="color:rgb(0,128,128);line-height:1.5;"> 3</span> 
<span style="color:rgb(0,128,128);line-height:1.5;"> 4</span> <span style="color:rgb(0,0,255);line-height:1.5;">@interface</span><span style="line-height:1.5;"> WZLLiveBlurImageView ()
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 5</span> @property (nonatomic, strong) UIImage *<span style="line-height:1.5;">originImage;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 6</span> @property (nonatomic, strong) UIImageView *<span style="line-height:1.5;">realBlurImageView;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 7</span> <span style="color:rgb(0,0,255);line-height:1.5;">@end</span>
<span style="color:rgb(0,128,128);line-height:1.5;"> 8</span> 
<span style="color:rgb(0,128,128);line-height:1.5;"> 9</span> <span style="color:rgb(0,0,255);line-height:1.5;">@implementation</span><span style="line-height:1.5;"> WZLLiveBlurImageView
</span><span style="color:rgb(0,128,128);line-height:1.5;">10</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">11</span> - (<span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;">)setBlurLevel:(CGFloat)level
</span><span style="color:rgb(0,128,128);line-height:1.5;">12</span> <span style="line-height:1.5;">{
</span><span style="color:rgb(0,128,128);line-height:1.5;">13</span>     <span style="color:rgb(0,0,255);line-height:1.5;">if</span> (!self.image || !<span style="line-height:1.5;">self.realBlurImageView) {
</span><span style="color:rgb(0,128,128);line-height:1.5;">14</span>         NSLog(<span style="color:rgb(128,0,0);line-height:1.5;">@"</span><span style="color:rgb(128,0,0);line-height:1.5;">image is empty!</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">);
</span><span style="color:rgb(0,128,128);line-height:1.5;">15</span>         <span style="color:rgb(0,0,255);line-height:1.5;">return</span><span style="line-height:1.5;">;
</span><span style="color:rgb(0,128,128);line-height:1.5;">16</span> <span style="line-height:1.5;">    }
</span><span style="color:rgb(0,128,128);line-height:1.5;">17</span>     level = (level &gt; <span style="color:rgb(128,0,128);line-height:1.5;">1</span> ? <span style="color:rgb(128,0,128);line-height:1.5;">1</span> : (level &lt; <span style="color:rgb(128,0,128);line-height:1.5;">0</span> ? <span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;"> : level));
</span><span style="color:rgb(0,128,128);line-height:1.5;">18</span>     NSLog(<span style="color:rgb(128,0,0);line-height:1.5;">@"</span><span style="color:rgb(128,0,0);line-height:1.5;">level:%@</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">, @(level));
</span><span style="color:rgb(0,128,128);line-height:1.5;">19</span>     self.realBlurImageView.alpha =<span style="line-height:1.5;"> level;
</span><span style="color:rgb(0,128,128);line-height:1.5;">20</span> <span style="line-height:1.5;">}
</span><span style="color:rgb(0,128,128);line-height:1.5;">21</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">22</span> <span style="color:rgb(0,0,255);line-height:1.5;">#pragma</span> mark - private apis
<span style="color:rgb(0,128,128);line-height:1.5;">23</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">24</span> - (<span style="color:rgb(0,0,255);line-height:1.5;">void</span>)setImage:(UIImage *<span style="line-height:1.5;">)image
</span><span style="color:rgb(0,128,128);line-height:1.5;">25</span> <span style="line-height:1.5;">{
</span><span style="color:rgb(0,128,128);line-height:1.5;">26</span> <span style="line-height:1.5;">    [super setImage:image];
</span><span style="color:rgb(0,128,128);line-height:1.5;">27</span>     <span style="color:rgb(0,0,255);line-height:1.5;">if</span> (_originImage == nil &amp;&amp;<span style="line-height:1.5;"> image) {
</span><span style="color:rgb(0,128,128);line-height:1.5;">28</span>         _originImage =<span style="line-height:1.5;"> image;
</span><span style="color:rgb(0,128,128);line-height:1.5;">29</span> <span style="line-height:1.5;">    }
</span><span style="color:rgb(0,128,128);line-height:1.5;">30</span>     <span style="color:rgb(0,0,255);line-height:1.5;">if</span> (!<span style="line-height:1.5;">self.realBlurImageView) {
</span><span style="color:rgb(0,128,128);line-height:1.5;">31</span>         UIImage *blurImage =<span style="line-height:1.5;"> [image applyBlurWithRadius:kImageBlurLevelDefault];
</span><span style="color:rgb(0,128,128);line-height:1.5;">32</span>         self.realBlurImageView =<span style="line-height:1.5;"> [[UIImageView alloc] initWithImage:blurImage];
</span><span style="color:rgb(0,128,128);line-height:1.5;">33</span>         self.realBlurImageView.backgroundColor =<span style="line-height:1.5;"> [UIColor clearColor];
</span><span style="color:rgb(0,128,128);line-height:1.5;">34</span>         self.realBlurImageView.frame =<span style="line-height:1.5;"> self.bounds;
</span><span style="color:rgb(0,128,128);line-height:1.5;">35</span>         self.realBlurImageView.alpha = <span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;">;
</span><span style="color:rgb(0,128,128);line-height:1.5;">36</span> <span style="line-height:1.5;">        [self addSubview:self.realBlurImageView];
</span><span style="color:rgb(0,128,128);line-height:1.5;">37</span> <span style="line-height:1.5;">    }
</span><span style="color:rgb(0,128,128);line-height:1.5;">38</span> }</pre> 
    <div class="cnblogs_code_toolbar" style="line-height:1.5;">
     <span class="cnblogs_code_copy" style="font-size:18px;line-height:1.5;"><a title="复制代码" style="color:rgb(68,68,68);text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-size:16px;">间接法虽然引入了新的对象，但换来了性能上的完美折中，我认为是值得的。不管是模拟器还是低性能真机，调试都OK，实时性很好：</span></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><img src="https://images0.cnblogs.com/blog2015/374539/201503/241621089426153.gif" alt="" width="163" height="291" style="border:0px;"></p> 
   <p style="line-height:1.5;font-size:12px;font-family:tahoma, arial, sans-serif;color:rgb(68,68,68);"><br></p> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="font-size:16px;">我们抛出的问题都完美解决了，也顺带解决了一些坑。方法虽简单，但过程还是比较有意义的。最后附上整个demo的<a href="https://github.com/weng1250/WZLLiveBlurImageView" rel="nofollow" style="color:rgb(68,68,68);">github地址</a>.</span></p> 
   <p style="line-height:1.5;"><span><font color="#444444">本文转自编程小翁博客园博客，原文链接：http://www.cnblogs.com/wengzilin/p/4362100.html，如需转载请自行联系原作者</font><br></span></p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
