<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>iBATIS In Action：使用映射语句（二） « NotBeCN</title>
  <meta name="description" content="                             为IDictionary，则property是相应key的名称。同一property值可以出现多次，这取决于它在语句中出现的次数。                   column          用于定义存储过程的参数名称。              ...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/22/weixin_34257076_90129614.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">iBATIS In Action：使用映射语句（二）</h1>
    <p class="post-meta">Nov 22, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <table class="MsoNormalTable" border="1" style="border:medium none;border-collapse:collapse;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;margin-left:5.4pt;">
    <tbody>
     <tr>
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:297.7pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;font-family:'宋体';">为</span><span style="line-height:1.8;">IDictionary</span><span style="line-height:1.8;font-family:'宋体';">，则</span><span style="line-height:1.8;">property</span><span style="line-height:1.8;font-family:'宋体';">是相应</span><span style="line-height:1.8;">key</span><span style="line-height:1.8;font-family:'宋体';">的名称。同一</span><span style="line-height:1.8;">property</span><span style="line-height:1.8;font-family:'宋体';">值可以出现多次，这取决于它在语句中出现的次数。</span><span style="line-height:1.8;"></span></p> <p></p> </td>
     </tr>
     <tr>
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:4cm;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">column</span></p> <p></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:297.7pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;font-family:'宋体';">用于定义<strong><span style="line-height:1.8;color:rgb(79,129,189);">存储过程</span></strong>的参数名称。</span><span style="line-height:1.8;"></span></p> <p></p> </td> 
     </tr>
     <tr>
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:4cm;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">direction</span></p> <p></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:297.7pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;font-family:'宋体';">可用于指定<strong><span style="line-height:1.8;color:rgb(79,129,189);">存储过程</span></strong>参数的方向。其值可以是</span><span style="line-height:1.8;">Input</span><span style="line-height:1.8;font-family:'宋体';">，</span><span style="line-height:1.8;">Output</span><span style="line-height:1.8;font-family:'宋体';">或</span><span style="line-height:1.8;">InputOutput</span><span style="line-height:1.8;font-family:'宋体';">。</span><span style="line-height:1.8;"></span></p> <p></p> </td> 
     </tr>
     <tr>
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:4cm;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">dbType</span></p> <p></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:297.7pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;font-family:'宋体';">用于显式地指定参数对应的列类型。对于某些操作，一些</span><span style="line-height:1.8;">ADO.NET provider</span><span style="line-height:1.8;font-family:'宋体';">不能判断列的类型，此时</span><span style="line-height:1.8;">dbType</span><span style="line-height:1.8;font-family:'宋体';">必须指定。</span><span style="line-height:1.8;"></span></p> <p></p> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;font-family:'宋体';">此特性仅在列为</span><span style="line-height:1.8;">nullable</span><span style="line-height:1.8;font-family:'宋体';">时是必需的。此外，在显式指定日期类型时也需要此特性。尽管</span><span style="line-height:1.8;">.NET</span><span style="line-height:1.8;font-family:'宋体';">仅有一种日期值类型（</span><span style="line-height:1.8;">System.DateTime</span><span style="line-height:1.8;font-family:'宋体';">），大多数数据库却不止一个。通常情况下，数据库至少有三种不同的日期类型（</span><span style="line-height:1.8;">Date</span><span style="line-height:1.8;font-family:'宋体';">，</span><span style="line-height:1.8;">DateTime</span><span style="line-height:1.8;font-family:'宋体';">，</span><span style="line-height:1.8;">TimeStamp</span><span style="line-height:1.8;font-family:'宋体';">）。为使映射过程能够正确，我们可能需要指定列的</span><span style="line-height:1.8;">dbType</span><span style="line-height:1.8;font-family:'宋体';">。</span><span style="line-height:1.8;"></span></p> <p></p> </td> 
     </tr>
     <tr>
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:4cm;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">type</span></p> <p></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:297.7pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;font-family:'宋体';">用于指定前面的</span><span style="line-height:1.8;">property</span><span style="line-height:1.8;font-family:'宋体';">的</span><span style="line-height:1.8;">CLR</span><span style="line-height:1.8;font-family:'宋体';">类型。在向存储过程传入</span><span style="line-height:1.8;">InputOput</span><span style="line-height:1.8;font-family:'宋体';">和</span><span style="line-height:1.8;">Output</span><span style="line-height:1.8;font-family:'宋体';">类型的参数时，该特性很有用。</span><span style="line-height:1.8;"></span></p> <p></p> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;font-family:'宋体';">正常情况下，</span><span style="line-height:1.8;">property</span><span style="line-height:1.8;font-family:'宋体';">的类型可通过反射获得，但对于</span><span style="line-height:1.8;">IDictionary</span><span style="line-height:1.8;font-family:'宋体';">类型的参数就无能为力了，此时类型被假定为</span><span style="line-height:1.8;">Object</span><span style="line-height:1.8;font-family:'宋体';">。</span><span style="line-height:1.8;"></span></p> <p></p> </td> 
     </tr>
     <tr>
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:4cm;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">nullValue</span></p> <p></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:297.7pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">nullValue</span><span style="line-height:1.8;font-family:'宋体';">可以设置为任何的有效值（这取决于</span><span style="line-height:1.8;">property</span><span style="line-height:1.8;font-family:'宋体';">的类型）。</span><span style="line-height:1.8;"></span></p> <p></p> <p align="left" style="line-height:1.8;font-size:13px;"><strong><span style="line-height:1.8;font-family:'宋体';">注意</span></strong><span style="line-height:1.8;font-family:'宋体';">：对于值类型（</span><span style="line-height:1.8;">int</span><span style="line-height:1.8;font-family:'宋体';">，</span><span style="line-height:1.8;">double</span><span style="line-height:1.8;font-family:'宋体';">，</span><span style="line-height:1.8;">datetime</span><span style="line-height:1.8;font-family:'宋体';">等）的属性，它们是不能为</span><span style="line-height:1.8;">null</span><span style="line-height:1.8;font-family:'宋体';">的，那如何向数据库中插入</span><span style="line-height:1.8;">null</span><span style="line-height:1.8;font-family:'宋体';">值呢？可以采用</span><span style="line-height:1.8;">nullValue</span><span style="line-height:1.8;font-family:'宋体';">，比如对于</span><span style="line-height:1.8;">Age</span><span style="line-height:1.8;font-family:'宋体';">列（</span><span style="line-height:1.8;">int</span><span style="line-height:1.8;font-family:'宋体';">类型），我们可以指定</span><span style="line-height:1.8;">nullValue</span><span style="line-height:1.8;font-family:'宋体';">为</span><span style="line-height:1.8;">0</span><span style="line-height:1.8;font-family:'宋体';">，这意味着如果该属性未设置（</span><span style="line-height:1.8;">C#</span><span style="line-height:1.8;font-family:'宋体';">中，</span><span style="line-height:1.8;">int</span><span style="line-height:1.8;font-family:'宋体';">属性的默认值为</span><span style="line-height:1.8;">0</span><span style="line-height:1.8;font-family:'宋体';">），那么会向数据库插入</span><span style="line-height:1.8;">NULL</span><span style="line-height:1.8;font-family:'宋体';">。在</span><span style="line-height:1.8;">.NET2.0</span><span style="line-height:1.8;font-family:'宋体';">中也可以使用</span><span style="line-height:1.8;">nullable</span><span style="line-height:1.8;font-family:'宋体';">类型，此时更为方便。请参考我的</span><span style="line-height:1.8;"><a href="http://www.cnblogs.com/anderslly/archive/2007/11/archive/2007/06/28/ibatisnullabletype.html" rel="nofollow" style="text-decoration:none;color:rgb(61,129,238);border-bottom-width:1px;border-bottom-style:dashed;"><span style="line-height:1.8;font-family:'宋体';"><span style="line-height:1.8;">小文</span></span></a></span><span style="line-height:1.8;font-family:'宋体';">。</span><span style="line-height:1.8;"></span></p> <p></p> </td> 
     </tr>
     <tr>
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:4cm;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">size</span></p> <p></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:297.7pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;font-family:'宋体';">设置列的最大尺寸。</span><span style="line-height:1.8;"></span></p> <p></p> </td> 
     </tr>
     <tr>
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:4cm;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">precision</span></p> <p></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:297.7pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;font-family:'宋体';">设置数字值的精度。</span><span style="line-height:1.8;"></span></p> <p></p> </td> 
     </tr>
     <tr>
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:4cm;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">scale</span></p> <p></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:297.7pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;font-family:'宋体';">设置小数的位数。</span><span style="line-height:1.8;"></span></p> <p></p> </td> 
     </tr>
     <tr>
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:4cm;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">typeHandler</span></p> <p></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:297.7pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;font-family:'宋体';">用于自定义类型处理器（</span><span style="line-height:1.8;">Custom Type Handler</span><span style="line-height:1.8;font-family:'宋体';">）。</span><span style="line-height:1.8;"></span></p> <p></p> </td> 
     </tr>
    </tbody>
   </table>
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">内联参数在多数情况下效果不错。如果您希望改善性能，或者遇到了意外的情况，外部参数可能就用得上了。在第5章中，我们会更全面地讨论外部参数，在这里，暂不需要。</p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"><strong>4.3.2&nbsp;</strong><strong>重温内联参数</strong></p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">如果您更喜欢使用内联参数，同样可以为参数指定更多的信息，如属性的类型，类的类型以及null值替换（即nullValue特性）。看下面四个例子：</p> 
   <div style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;border:1px solid rgb(204,204,204);font-size:13px;"> 
    <span style="color:rgb(0,0,255);">&lt;</span>
    <span style="color:rgb(128,0,0);">statement&nbsp;</span>
    <span style="color:rgb(255,0,0);">id</span>
    <span style="color:rgb(0,0,255);">="insertProduct"</span>
    <span style="color:rgb(255,0,0);">&nbsp;parameterClass</span>
    <span style="color:rgb(0,0,255);">="Product"</span>
    <span style="color:rgb(0,0,255);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;insert&nbsp;into&nbsp;PRODUCT&nbsp;(PRD_ID,&nbsp;PRD_DESCRIPTION)<br> &nbsp;&nbsp;&nbsp;&nbsp;values&nbsp;(#id#,&nbsp;#description#)<br></span>
    <span style="color:rgb(0,0,255);">&lt;/</span>
    <span style="color:rgb(128,0,0);">statement</span>
    <span style="color:rgb(0,0,255);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br></span> 
   </div> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">这是最简单的情况，下面这个例子指定了dbType：</p> 
   <div style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;border:1px solid rgb(204,204,204);font-size:13px;"> 
    <span style="color:rgb(0,0,255);">&lt;</span>
    <span style="color:rgb(128,0,0);">statement&nbsp;</span>
    <span style="color:rgb(255,0,0);">id</span>
    <span style="color:rgb(0,0,255);">="insertProduct"</span>
    <span style="color:rgb(255,0,0);">&nbsp;parameterClass</span>
    <span style="color:rgb(0,0,255);">="Product"</span>
    <span style="color:rgb(0,0,255);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;insert&nbsp;into&nbsp;PRODUCT&nbsp;(PRD_ID,&nbsp;PRD_DESCRIPTION)<br> &nbsp;&nbsp;&nbsp;&nbsp;values&nbsp;(#id:int#,&nbsp;#description:VarChar#)<br></span>
    <span style="color:rgb(0,0,255);">&lt;/</span>
    <span style="color:rgb(128,0,0);">statement</span>
    <span style="color:rgb(0,0,255);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br></span> 
   </div> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">下面这个例子指定了nullValue：</p> 
   <div style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;border:1px solid rgb(204,204,204);font-size:13px;"> 
    <span style="color:rgb(0,0,255);">&lt;</span>
    <span style="color:rgb(128,0,0);">statement&nbsp;</span>
    <span style="color:rgb(255,0,0);">id</span>
    <span style="color:rgb(0,0,255);">="insertProduct"</span>
    <span style="color:rgb(255,0,0);">&nbsp;parameterClass</span>
    <span style="color:rgb(0,0,255);">="Product"</span>
    <span style="color:rgb(0,0,255);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;insert&nbsp;into&nbsp;PRODUCT&nbsp;(PRD_ID,&nbsp;PRD_DESCRIPTION)<br> &nbsp;&nbsp;&nbsp;&nbsp;values&nbsp;(#<strong>id:int:-999999</strong>#,&nbsp;#description:VarChar#)<br></span>
    <span style="color:rgb(0,0,255);">&lt;/</span>
    <span style="color:rgb(128,0,0);">statement</span>
    <span style="color:rgb(0,0,255);">&gt;</span> 
   </div> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"></p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">类似于Java中的DataMapper，内联参数还有另外一种语法，使用逗号。</p> 
   <div style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;border:1px solid rgb(204,204,204);font-size:13px;"> 
    <span style="color:rgb(0,0,255);">&lt;</span>
    <span style="color:rgb(128,0,0);">update&nbsp;</span>
    <span style="color:rgb(255,0,0);">id</span>
    <span style="color:rgb(0,0,255);">="UpdateAccountViaInlineParameters"</span>
    <span style="color:rgb(255,0,0);">&nbsp;parameterClass</span>
    <span style="color:rgb(0,0,255);">="Account"</span>
    <span style="color:rgb(0,0,255);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;update&nbsp;Accounts&nbsp;set<br> &nbsp;&nbsp;&nbsp;&nbsp;Account_FirstName&nbsp;=&nbsp;#FirstName#,<br> &nbsp;&nbsp;&nbsp;&nbsp;Account_LastName&nbsp;=&nbsp;#LastName#,<br> &nbsp;&nbsp;&nbsp;&nbsp;Account_Email&nbsp;=&nbsp;#EmailAddress,type=string,dbType=Varchar,nullValue=no_email@provided.com#<br> &nbsp;&nbsp;&nbsp;&nbsp;where<br> &nbsp;&nbsp;&nbsp;&nbsp;Account_ID&nbsp;=&nbsp;#Id#<br></span>
    <span style="color:rgb(0,0,255);">&lt;/</span>
    <span style="color:rgb(128,0,0);">update</span>
    <span style="color:rgb(0,0,255);">&gt;</span> 
   </div> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"><strong>4.3.3&nbsp;</strong><strong>标准类型的参数（standard type parameter</strong><strong>）</strong></p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">在实际开发中，我们会发现很多语句只接受单个参数，通常为int或string。此时并不需要将其封装在另一个对象中，直接使用标准库对象（string, int等）就可以了，下面是一个例子：&nbsp;<br></p> 
   <div style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;border:1px solid rgb(204,204,204);font-size:13px;"> 
    <span style="color:rgb(0,0,255);">&lt;</span>
    <span style="color:rgb(128,0,0);">statement&nbsp;</span>
    <span style="color:rgb(255,0,0);">id</span>
    <span style="color:rgb(0,0,255);">="getProduct"</span>
    <span style="color:rgb(255,0,0);">&nbsp;parameterClass</span>
    <span style="color:rgb(0,0,255);">="System.Int32"</span>
    <span style="color:rgb(0,0,255);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;select&nbsp;*&nbsp;from&nbsp;PRODUCT&nbsp;where&nbsp;PRD_ID&nbsp;=&nbsp;#value#<br></span>
    <span style="color:rgb(0,0,255);">&lt;/</span>
    <span style="color:rgb(128,0,0);">statement</span>
    <span style="color:rgb(0,0,255);">&gt;</span> 
   </div> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">假定PRD_ID为数字类型，在调用该语句时，可以传入一个标准的int对象。#value#参数会替换为传入的int值。此处的value仅仅是一个占位符，您可以根据需要将其替换为其它名称。</p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">为方便起见，iBATIS框架提供了基元类型的别名，比如，int可用于代替System.Int32。要了解这些别名的完整内容，请参考iBATIS.NET的官方文档。</p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"><strong>4.3.4 IDictionary</strong><strong>类型的参数</strong></p> 
   <div style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;border:1px solid rgb(204,204,204);font-size:13px;"> 
    <span style="color:rgb(0,0,255);">&lt;</span>
    <span style="color:rgb(128,0,0);">statement&nbsp;</span>
    <span style="color:rgb(255,0,0);">id</span>
    <span style="color:rgb(0,0,255);">="getProduct"</span>
    <span style="color:rgb(255,0,0);">&nbsp;parameterClass</span>
    <span style="color:rgb(0,0,255);">="System.Collections.IDictionary"</span>
    <span style="color:rgb(0,0,255);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;select&nbsp;*&nbsp;from&nbsp;PRODUCT<br> &nbsp;&nbsp;&nbsp;&nbsp;where&nbsp;PRD_CAT_ID&nbsp;=&nbsp;#catId#<br> &nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;PRD_CODE&nbsp;=&nbsp;#code#<br></span>
    <span style="color:rgb(0,0,255);">&lt;/</span>
    <span style="color:rgb(128,0,0);">statement</span>
    <span style="color:rgb(0,0,255);">&gt;</span> 
   </div> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">我们也可以使用IDictionary类型的对象作为参数。通常可以使用Hashtable。看下面的例子：</p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">看看这条语句，跟前面出现的没有什么不同。如果传入的对象是Hashtable类型，它必须要包含有名称为catId和code的键，而键所对应的值必须要适合于列的类型，这些要求与使用普通的对象是一样的。</p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">为方便起见，iBATIS框架也提供了IDictionary类型的别名。因此，可以用map或hashtable来代替System.Collections.Hashtable。要了解这些别名的完整内容，请参考iBATIS.NET的官方文档。</p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">OK，至此我们已经知道了如何输入参数了，下面就来看看如何获取输出值了。</p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"><strong>4.4</strong><strong>结果映射（result map</strong><strong>）</strong></p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">Result Map将从数据库查询所得的结果映射到对象的属性。在使用映射语句时，Result Map是我们要理解的最常用也是最重要的特性之一。</p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">通过Result Map我们可以控制如何从查询结果中获取数据，以及列是如何映射到对象的属性的。Result Map可以描述列的类型、null值的替换以及复杂属性（包括集合）的映射。</p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"><strong>4.4.1&nbsp;</strong><strong>扩展Result Map</strong></p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">可选的extends特性值可以设置为另一个Result Map的名称，这样就可以复用指定Result Map的映射方式了。“父级”Result Map的所有属性都将作为当前Result Map的一部分，“父级”Result Map的值在当前Result Map之前进行设置，其效果类似于类的继承。</p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"><strong>提示</strong>：“父级”Result Map必须在“子级”Result Map之前定义。</p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"><strong>4.4.2 &lt;resultMap&gt;</strong><strong>的特性</strong></p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&lt;resultMap&gt;接受三个特性：</p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"></p> 
   <table class="MsoNormalTable" border="1" style="border:medium none;border-collapse:collapse;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;margin-left:5.4pt;">
    <tbody>
     <tr>
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;background:rgb(217,217,217) none repeat scroll 0% 50%;width:127.6pt;"> <p align="center" style="line-height:1.8;font-size:13px;text-align:center;"><strong><span style="line-height:1.8;font-family:'宋体';">特性</span><span style="line-height:1.8;"></span></strong></p> <p><strong></strong></p> <strong></strong> </td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;background:rgb(217,217,217) none repeat scroll 0% 50%;width:10cm;"> <p align="center" style="line-height:1.8;font-size:13px;text-align:center;"><strong><span style="line-height:1.8;font-family:'宋体';">描述</span><span style="line-height:1.8;"></span></strong></p> <p><strong></strong></p> <strong></strong> </td> 
     </tr>
     <tr>
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:127.6pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">id</span></p> <p></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:10cm;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;font-family:'宋体';">必需的，为</span><span style="line-height:1.8;">Result Map</span><span style="line-height:1.8;font-family:'宋体';">提供唯一标识。</span><span style="line-height:1.8;"></span></p> <p></p> </td> 
     </tr>
     <tr>
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:127.6pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">class</span></p> <p></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:10cm;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;font-family:'宋体';">可选的，指定当前</span><span style="line-height:1.8;">Result Map</span><span style="line-height:1.8;font-family:'宋体';">使用的类。可以设置为类的完整名称或别名。</span><span style="line-height:1.8;"></span></p> <p></p> </td> 
     </tr>
     <tr>
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:127.6pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">extends</span></p> <p></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:10cm;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;font-family:'宋体';">可选的，指定要进行“继承”的</span><span style="line-height:1.8;">Result Map</span><span style="line-height:1.8;font-family:'宋体';">。</span><span style="line-height:1.8;"></span></p> <p></p> </td> 
     </tr>
    </tbody>
   </table>
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"></p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"><strong>4.4.3 &lt;constructor&gt;</strong><strong>元素</strong></p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&lt;constructor&gt;元素必须与result class的构造函数签名相匹配。如果指定了此元素，iBATIS用它来实例化结果对象（result object）。</p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"><strong>4.4.4 &lt;result&gt;</strong><strong>元素</strong></p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">&lt;resultMap&gt;元素包含一个或多个&lt;result&gt;子元素，用以将执行SQL的结果集映射至对象的属性。</p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"></p> 
   <table class="MsoNormalTable" border="1" style="border:medium none;border-collapse:collapse;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;margin-left:5.4pt;">
    <tbody>
     <tr>
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;background:rgb(217,217,217) none repeat scroll 0% 50%;width:127.6pt;"> <p align="center" style="line-height:1.8;font-size:13px;text-align:center;"><strong><span style="line-height:1.8;font-family:'宋体';">特性</span><span style="line-height:1.8;"></span></strong></p> <p><strong></strong></p> <strong></strong> </td> 
      <td style="border:1px solid #C0C0C0;border-collapse:collapse;background:rgb(217,217,217) none repeat scroll 0% 50%;width:10cm;"> <p align="center" style="line-height:1.8;font-size:13px;text-align:center;"><strong><span style="line-height:1.8;font-family:'宋体';">描述</span><span style="line-height:1.8;"></span></strong></p> <p><strong></strong></p> <strong></strong> </td> 
     </tr>
     <tr>
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:127.6pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">property</span></p> <p></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:10cm;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;font-family:'宋体';">必需的，表示结果对象的属性名称。</span><span style="line-height:1.8;"></span></p> <p></p> </td> 
     </tr>
     <tr>
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:127.6pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">column</span></p> <p></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:10cm;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;font-family:'宋体';">必需的，指定结果集中的列名称，使用该列来产生当前属性。</span><span style="line-height:1.8;"></span></p> <p></p> </td> 
     </tr>
     <tr>
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:127.6pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">columnIndex</span></p> <p></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:10cm;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;font-family:'宋体';">可选的，指定列的索引，该特性对性能会有<strong>轻微的帮助</strong>。</span><span style="line-height:1.8;">99%</span><span style="line-height:1.8;font-family:'宋体';">的应用程序中是不需要的，而且它还会牺牲可维护性和可读性。另外一些</span><span style="line-height:1.8;">provider</span><span style="line-height:1.8;font-family:'宋体';">中，该特性可能对性能没有任何帮助。</span><span style="line-height:1.8;"></span></p> <p></p> </td> 
     </tr>
     <tr>
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:127.6pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">dbType</span></p> <p></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:10cm;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;font-family:'宋体';">用于显式地指定列的类型。由于</span><span style="line-height:1.8;">CLR</span><span style="line-height:1.8;font-family:'宋体';">和数据库中类型的不一致，该特性比较有用，尤其是对</span><span style="line-height:1.8;">datetime</span><span style="line-height:1.8;font-family:'宋体';">和</span><span style="line-height:1.8;">string</span><span style="line-height:1.8;font-family:'宋体';">类型。</span><span style="line-height:1.8;"></span></p> <p></p> </td> 
     </tr>
     <tr>
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:127.6pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">type</span></p> <p></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:10cm;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;font-family:'宋体';">用于显式地指定结果对象属性的</span><span style="line-height:1.8;">CLR</span><span style="line-height:1.8;font-family:'宋体';">类型。通常属性的类型可通过反射获得，但在映射到</span><span style="line-height:1.8;">Hashtable</span><span style="line-height:1.8;font-family:'宋体';">之类的对象时就无能为力了。</span><span style="line-height:1.8;"></span></p> <p></p> </td> 
     </tr>
     <tr>
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:127.6pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">resultMapping</span></p> <p></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:10cm;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;font-family:'宋体';">该特性的值可以设置为另一个</span><span style="line-height:1.8;">Result Map</span><span style="line-height:1.8;font-family:'宋体';">的名称，借助后者来填充属性。如果使用的</span><span style="line-height:1.8;">Result Map</span><span style="line-height:1.8;font-family:'宋体';">位于另一个文件中，则必须要使用它的完全限定名称（加上命名空间）。</span><span style="line-height:1.8;"></span></p> <p></p> </td> 
     </tr>
     <tr>
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:127.6pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">nullValue</span></p> <p></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:10cm;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;font-family:'宋体';">用于指定</span><span style="line-height:1.8;">null</span><span style="line-height:1.8;font-family:'宋体';">值的替代值，该特性可以设置为任何有效的值（取决于属性的类型）。如果属性类型为值类型，则其值不可能为</span><span style="line-height:1.8;">null</span><span style="line-height:1.8;font-family:'宋体';">，如果列的值为</span><span style="line-height:1.8;">null</span><span style="line-height:1.8;font-family:'宋体';">，那么通过该特性可以将属性设定为某个常量值。另一方面，如果属性可以为</span><span style="line-height:1.8;">null</span><span style="line-height:1.8;font-family:'宋体';">，我们可能想用某个常量值而不是</span><span style="line-height:1.8;">null</span><span style="line-height:1.8;font-family:'宋体';">来表示它，这个时候</span><span style="line-height:1.8;">nullValue</span><span style="line-height:1.8;font-family:'宋体';">特性也是有用的。</span><span style="line-height:1.8;"></span></p> <p></p> </td> 
     </tr>
     <tr>
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:127.6pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">select</span></p> <p></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:10cm;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;font-family:'宋体';">用于描述对象间的关系，并自动加载复杂类型（即用户定义类型）。其值必须为另一映射语句的名称。</span><span style="line-height:1.8;"></span></p> <p></p> </td> 
     </tr>
     <tr>
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:127.6pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">lazyLoad</span></p> <p></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:10cm;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;font-family:'宋体';">联合使用</span><span style="line-height:1.8;">lazyLoad</span><span style="line-height:1.8;font-family:'宋体';">和</span><span style="line-height:1.8;">select</span><span style="line-height:1.8;font-family:'宋体';">特性，可以指定</span><span style="line-height:1.8;">select</span><span style="line-height:1.8;font-family:'宋体';">特性所指定语句的结果是否要延迟加载。延迟加载对</span><span style="line-height:1.8;">IList</span><span style="line-height:1.8;font-family:'宋体';">和</span><span style="line-height:1.8;">IList&lt;&gt;</span><span style="line-height:1.8;font-family:'宋体';">的支持是透明的，对强类型的集合类的支持则需要</span><span style="line-height:1.8;">Castle.DynamicProxy</span><span style="line-height:1.8;font-family:'宋体';">组件。</span><span style="line-height:1.8;"></span></p> <p></p> </td> 
     </tr>
     <tr>
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:127.6pt;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;">typeHandler</span></p> <p></p> </td> 
      <td valign="top" style="border:1px solid #C0C0C0;border-collapse:collapse;width:10cm;"> <p align="left" style="line-height:1.8;font-size:13px;"><span style="line-height:1.8;font-family:'宋体';">允许使用自定义类型处理器（</span><span style="line-height:1.8;">Custom Type Handler</span><span style="line-height:1.8;font-family:'宋体';">）。这样就可以扩展</span><span style="line-height:1.8;">DataMapper</span><span style="line-height:1.8;font-family:'宋体';">的能力，来处理那些</span><span style="line-height:1.8;">provider</span><span style="line-height:1.8;font-family:'宋体';">特定的类型或者是</span><span style="line-height:1.8;">provider</span><span style="line-height:1.8;font-family:'宋体';">不支持的类型。</span><span style="line-height:1.8;"></span></p> <p></p> </td> 
     </tr>
    </tbody>
   </table>
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">代码示例：nullValue的使用</p> 
   <div style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;border:1px solid rgb(204,204,204);font-size:13px;"> 
    <span style="color:rgb(0,0,255);">&lt;</span>
    <span style="color:rgb(128,0,0);">resultMap&nbsp;</span>
    <span style="color:rgb(255,0,0);">id</span>
    <span style="color:rgb(0,0,255);">="get-product-result"</span>
    <span style="color:rgb(255,0,0);">&nbsp;class</span>
    <span style="color:rgb(0,0,255);">="product"</span>
    <span style="color:rgb(0,0,255);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">&lt;</span>
    <span style="color:rgb(128,0,0);">result&nbsp;</span>
    <span style="color:rgb(255,0,0);">property</span>
    <span style="color:rgb(0,0,255);">="id"</span>
    <span style="color:rgb(255,0,0);">&nbsp;column</span>
    <span style="color:rgb(0,0,255);">="PRD_ID"</span>
    <span style="color:rgb(0,0,255);">/&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">&lt;</span>
    <span style="color:rgb(128,0,0);">result&nbsp;</span>
    <span style="color:rgb(255,0,0);">property</span>
    <span style="color:rgb(0,0,255);">="description"</span>
    <span style="color:rgb(255,0,0);">&nbsp;column</span>
    <span style="color:rgb(0,0,255);">="PRD_DESCRIPTION"</span>
    <span style="color:rgb(0,0,255);">/&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">&lt;</span>
    <span style="color:rgb(128,0,0);">result&nbsp;</span>
    <span style="color:rgb(255,0,0);">property</span>
    <span style="color:rgb(0,0,255);">="subCode"</span>
    <span style="color:rgb(255,0,0);">&nbsp;column</span>
    <span style="color:rgb(0,0,255);">="PRD_SUB_CODE"</span>
    <span style="color:rgb(255,0,0);">&nbsp;nullValue</span>
    <span style="color:rgb(0,0,255);">="-9999"</span>
    <span style="color:rgb(255,0,0);">&nbsp;</span>
    <span style="color:rgb(0,0,255);">/&gt;</span>
    <span style="color:rgb(0,0,0);"><br></span>
    <span style="color:rgb(0,0,255);">&lt;/</span>
    <span style="color:rgb(128,0,0);">resultMap</span>
    <span style="color:rgb(0,0,255);">&gt;</span> 
   </div> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"><strong>注意</strong>：如果PRD_SUB_CODE列的值为null，则subCode属性的值将设置为-9999。记住，在插入/更新数据时，Parameter Map的nullValue特性也要进行设置，这样才能一致。实际上有了nullable类型后，该特性可以不使用了。</p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"><strong>4.4.5&nbsp;</strong><strong>隐式的结果映射</strong></p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">如果SQL语句返回的列与结果对象的属性相匹配，那么显式的Result Map就不再必要了。在下面的例子中，列的名称和属性的名称已然匹配，因此无需声明Result Map。</p> 
   <div style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;border:1px solid rgb(204,204,204);font-size:13px;"> 
    <span style="color:rgb(0,0,255);">&lt;</span>
    <span style="color:rgb(128,0,0);">statement&nbsp;</span>
    <span style="color:rgb(255,0,0);">id</span>
    <span style="color:rgb(0,0,255);">="selectProduct"</span>
    <span style="color:rgb(255,0,0);">&nbsp;resultClass</span>
    <span style="color:rgb(0,0,255);">="Product"</span>
    <span style="color:rgb(0,0,255);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;select<br> &nbsp;&nbsp;&nbsp;&nbsp;id,<br> &nbsp;&nbsp;&nbsp;&nbsp;description<br> &nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;PRODUCT<br> &nbsp;&nbsp;&nbsp;&nbsp;where&nbsp;id&nbsp;=&nbsp;#value#<br></span>
    <span style="color:rgb(0,0,255);">&lt;/</span>
    <span style="color:rgb(128,0,0);">statement</span>
    <span style="color:rgb(0,0,255);">&gt;</span> 
   </div> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">但是，如果列的名称和属性名称不一致，而列名不可能修改（比如使用其它公司开发的数据库），那该怎么办呢？可以使用列的别名，看下例：</p> 
   <div style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;border:1px solid rgb(204,204,204);font-size:13px;"> 
    <span style="color:rgb(0,0,255);">&lt;</span>
    <span style="color:rgb(128,0,0);">statement&nbsp;</span>
    <span style="color:rgb(255,0,0);">id</span>
    <span style="color:rgb(0,0,255);">="selectProduct"</span>
    <span style="color:rgb(255,0,0);">&nbsp;resultClass</span>
    <span style="color:rgb(0,0,255);">="Product"</span>
    <span style="color:rgb(0,0,255);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;select<br> &nbsp;&nbsp;&nbsp;&nbsp;PRD_ID&nbsp;as&nbsp;id,<br> &nbsp;&nbsp;&nbsp;&nbsp;PRD_DESCRIPTION&nbsp;as&nbsp;description<br> &nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;PRODUCT<br> &nbsp;&nbsp;&nbsp;&nbsp;where&nbsp;PRD_ID&nbsp;=&nbsp;#value#<br></span>
    <span style="color:rgb(0,0,255);">&lt;/</span>
    <span style="color:rgb(128,0,0);">statement</span>
    <span style="color:rgb(0,0,255);">&gt;</span> 
   </div> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"></p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">当然，此时就不能指定dbType、nullValue或者其它的特性了（不要太贪心…）。</p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">区分大小写是隐式Result Map的另一个问题。诚然，我们可为一个类同时定义“FirstName”和“Firstname”两个属性，在iBATIS进行映射时，它就不能保证是匹配哪个属性了（当然了，没几个开发人员会定义这样相近的两个属性）。</p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">最后，隐式Result Map会有性能损失，如果我们使用第三方的.NET数据库provider，而它又对ResultSetMetaData支持很差，那损失就更明显了。</p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"><strong>4.4.6&nbsp;</strong><strong>返回基元类型的结果（如string</strong><strong>，int</strong><strong>等）</strong></p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">很多时候，并不需要返回一个具有多个属性的对象，我们需要的仅仅是单个的string，int，bool等类型的值。这时，您可以指定标准类型作为结果类型，如：</p> 
   <div style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;border:1px solid rgb(204,204,204);font-size:13px;"> 
    <span style="color:rgb(0,0,255);">&lt;</span>
    <span style="color:rgb(128,0,0);">select&nbsp;</span>
    <span style="color:rgb(255,0,0);">id</span>
    <span style="color:rgb(0,0,255);">="selectProductCount"</span>
    <span style="color:rgb(255,0,0);">&nbsp;resultClass</span>
    <span style="color:rgb(0,0,255);">="System.Int32"</span>
    <span style="color:rgb(0,0,255);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;select&nbsp;count(*)&nbsp;from&nbsp;PRODUCT<br></span>
    <span style="color:rgb(0,0,255);">&lt;/</span>
    <span style="color:rgb(128,0,0);">select</span>
    <span style="color:rgb(0,0,255);">&gt;</span> 
   </div> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">结果类型也可使用iBATIS框架提供的别名，比如，int可用于代替System.Int32。要了解这些别名的完整内容，请参考iBATIS.NET的官方文档。</p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"><strong>4.4.7&nbsp;</strong><strong>返回IDictionary</strong><strong>类型的结果</strong></p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">有些时候我们需要的只是包含数据的键/值列表。Result Map可以生成一个IDictionary类型的实例，其语法与普通的POCO对象一样：</p> 
   <div style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;border:1px solid rgb(204,204,204);font-size:13px;"> 
    <span style="color:rgb(0,0,255);">&lt;</span>
    <span style="color:rgb(128,0,0);">resultMap&nbsp;</span>
    <span style="color:rgb(255,0,0);">id</span>
    <span style="color:rgb(0,0,255);">="select-product-result"</span>
    <span style="color:rgb(255,0,0);">&nbsp;class</span>
    <span style="color:rgb(0,0,255);">="hashtable"</span>
    <span style="color:rgb(0,0,255);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">&lt;</span>
    <span style="color:rgb(128,0,0);">result&nbsp;</span>
    <span style="color:rgb(255,0,0);">property</span>
    <span style="color:rgb(0,0,255);">="id"</span>
    <span style="color:rgb(255,0,0);">&nbsp;column</span>
    <span style="color:rgb(0,0,255);">="PRD_ID"</span>
    <span style="color:rgb(0,0,255);">/&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">&lt;</span>
    <span style="color:rgb(128,0,0);">result&nbsp;</span>
    <span style="color:rgb(255,0,0);">property</span>
    <span style="color:rgb(0,0,255);">="code"</span>
    <span style="color:rgb(255,0,0);">&nbsp;column</span>
    <span style="color:rgb(0,0,255);">="PRD_CODE"</span>
    <span style="color:rgb(0,0,255);">/&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">&lt;</span>
    <span style="color:rgb(128,0,0);">result&nbsp;</span>
    <span style="color:rgb(255,0,0);">property</span>
    <span style="color:rgb(0,0,255);">="description"</span>
    <span style="color:rgb(255,0,0);">&nbsp;column</span>
    <span style="color:rgb(0,0,255);">="PRD_DESCRIPTION"</span>
    <span style="color:rgb(0,0,255);">/&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span style="color:rgb(0,0,255);">&lt;</span>
    <span style="color:rgb(128,0,0);">result&nbsp;</span>
    <span style="color:rgb(255,0,0);">property</span>
    <span style="color:rgb(0,0,255);">="suggestedPrice"</span>
    <span style="color:rgb(255,0,0);">&nbsp;column</span>
    <span style="color:rgb(0,0,255);">="PRD_SUGGESTED_PRICE"</span>
    <span style="color:rgb(0,0,255);">/&gt;</span>
    <span style="color:rgb(0,0,0);"><br></span>
    <span style="color:rgb(0,0,255);">&lt;/</span>
    <span style="color:rgb(128,0,0);">resultMap</span>
    <span style="color:rgb(0,0,255);">&gt;</span> 
   </div> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">在这个例子中，iBATIS会为每一行创建一个Hashtable实例，这个实例包含了返回的数据，属性名id、code等均作为Hashtable的key，列的值则作为Hashtable的值。</p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">也可以使用IDictionary类型作为隐式的Result Map：</p> 
   <div style="color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;border:1px solid rgb(204,204,204);font-size:13px;"> 
    <span style="color:rgb(0,0,255);">&lt;</span>
    <span style="color:rgb(128,0,0);">statement&nbsp;</span>
    <span style="color:rgb(255,0,0);">id</span>
    <span style="color:rgb(0,0,255);">="selectProductCount"</span>
    <span style="color:rgb(255,0,0);">&nbsp;resultClass</span>
    <span style="color:rgb(0,0,255);">="hashtable"</span>
    <span style="color:rgb(0,0,255);">&gt;</span>
    <span style="color:rgb(0,0,0);"><br> &nbsp;&nbsp;&nbsp;&nbsp;select&nbsp;*&nbsp;from&nbsp;PRODUCT<br></span>
    <span style="color:rgb(0,0,255);">&lt;/</span>
    <span style="color:rgb(128,0,0);">statement</span>
    <span style="color:rgb(0,0,255);">&gt;</span> 
   </div> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">Hashtable包含的值取决于列的值。如果列发生了变化（比如添加或删除了列），返回的结果也会随之发生变化。</p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"><strong>注意</strong>：某些provider可能将返回的列名称定为大写或小写，此时要注意使用正确的key名称。</p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"><strong>4.5&nbsp;</strong><strong>小结</strong></p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">在本章中，我们探讨了POCO，SQL Map的API，映射语句。随着您对这些内容的熟悉，创建映射语句也会越来越简单，就像其它任何事情一样，熟能生巧。</p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">如果您希望尽可能地减少运行时的错误，就要显式声明！使用显式的参数和结果映射，并且要使用强类型的对象。这样，您的程序会启动更快（因为iBATIS会尝试推导所有内容），运行更快，使用的内存更少。</p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">在下章中，我们将研究iBATIS支持的非查询语句，届时，我们就能够了解数据库维护所需的各种基本操作了。</p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:10.5pt;font-family:'宋体';">点击<a href="http://files.cnblogs.com/anderslly/IBatisInActionCh04.zip" rel="nofollow" style="text-decoration:none;color:rgb(61,129,238);border-bottom-width:1px;border-bottom-style:dashed;">这里</a>下载示例代码（数据库为Northwind，请修改SqlMap.config中的配置）。</span></p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;">下一篇：<a href="http://www.cnblogs.com/anderslly/archive/2007/11/05/executingnonquerystatement01.html" rel="nofollow" style="text-decoration:none;color:rgb(61,129,238);border-bottom-width:1px;border-bottom-style:dashed;">iBATIS In Action：执行非查询语句（一）</a>；</p> 
   <p style="line-height:1.8;color:rgb(51,51,51);font-family:Georgia, 'Times New Roman', Times, sans-serif;font-size:14px;"><br></p> 
   <p style="line-height:1.8;"><font color="#333333"><span style="font-size:14px;">本文转自一个程序员的自省博客园博客，原文链接：http://www.cnblogs.com/anderslly/archive/2007/11/04/ibatisusingmappedstatement02.html，如需转载请自行联系原作者。</span></font><br></p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
