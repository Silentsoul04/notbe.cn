<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>POJ 1860 - Currency Exchange « NotBeCN</title>
  <meta name="description" content="                 Currency Exchange                               Time Limit:&nbsp;1000MS        &nbsp;         Memory Limit:&nbsp;30000K                     ...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/15/weixin_33894640_90135025.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">POJ 1860 - Currency Exchange</h1>
    <p class="post-meta">Nov 15, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <div class="ptt" style="font-family:verdana, Arial, Helvetica, sans-serif;text-align:center;font-size:18pt;font-weight:bold;color:#0000FF;">
    Currency Exchange
   </div> 
   <div class="plm" style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;text-align:center;"> 
    <table style="border:1px solid #C0C0C0;border-collapse:collapse;">
     <tbody>
      <tr>
       <td style="border:1px solid #C0C0C0;border-collapse:collapse;"> <strong>Time Limit:</strong>&nbsp;1000MS</td> 
       <td style="border:1px solid #C0C0C0;border-collapse:collapse;">&nbsp;</td> 
       <td style="border:1px solid #C0C0C0;border-collapse:collapse;"> <strong>Memory Limit:</strong>&nbsp;30000K</td> 
      </tr>
      <tr>
       <td style="border:1px solid #C0C0C0;border-collapse:collapse;"> <strong>Total Submissions:</strong>&nbsp;18899</td> 
       <td style="border:1px solid #C0C0C0;border-collapse:collapse;">&nbsp;</td> 
       <td style="border:1px solid #C0C0C0;border-collapse:collapse;"> <strong>Accepted:</strong>&nbsp;6743</td> 
      </tr>
     </tbody>
    </table>
   </div> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:18pt;font-weight:bold;color:#0000FF;">Description</p> 
   <div class="ptx" style="color:rgb(51,51,51);font-size:14px;font-family:'Times New Roman', Times, serif;">
    Several currency exchange points are working in our city. Let us suppose that each point specializes in two particular currencies and performs exchange operations only with these currencies. There can be several points specializing in the same pair of currencies. Each point has its own exchange rates, exchange rate of A to B is the quantity of B you get for 1A. Also each exchange point has some commission, the sum you have to pay for your exchange operation. Commission is always collected in source currency.&nbsp;
    <br> For example, if you want to exchange 100 US Dollars into Russian Rubles at the exchange point, where the exchange rate is 29.75, and the commission is 0.39 you will get (100 - 0.39) * 29.75 = 2963.3975RUR.&nbsp;
    <br> You surely know that there are N different currencies you can deal with in our city. Let us assign unique integer number from 1 to N to each currency. Then each exchange point can be described with 6 numbers: integer A and B - numbers of currencies it exchanges, and real R
    <sub>AB</sub>, C
    <sub>AB</sub>, R
    <sub>BA</sub>&nbsp;and C
    <sub>BA</sub>&nbsp;- exchange rates and commissions when exchanging A to B and B to A respectively.&nbsp;
    <br> Nick has some money in currency S and wonders if he can somehow, after some exchange operations, increase his capital. Of course, he wants to have his money in currency S in the end. Help him to answer this difficult question. Nick must always have non-negative sum of money while making his operations.&nbsp;
    <br>
   </div> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:18pt;font-weight:bold;color:#0000FF;">Input</p> 
   <div class="ptx" style="color:rgb(51,51,51);font-size:14px;font-family:'Times New Roman', Times, serif;">
    The first line of the input contains four numbers: N - the number of currencies, M - the number of exchange points, S - the number of currency Nick has and V - the quantity of currency units he has. The following M lines contain 6 numbers each - the description of the corresponding exchange point - in specified above order. Numbers are separated by one or more spaces. 1&lt;=S&lt;=N&lt;=100, 1&lt;=M&lt;=100, V is real number, 0&lt;=V&lt;=10
    <sup>3</sup>.&nbsp;
    <br> For each point exchange rates and commissions are real, given with at most two digits after the decimal point, 10
    <sup>-2</sup>&lt;=rate&lt;=10
    <sup>2</sup>, 0&lt;=commission&lt;=10
    <sup>2</sup>.&nbsp;
    <br> Let us call some sequence of the exchange operations simple if no exchange point is used more than once in this sequence. You may assume that ratio of the numeric values of the sums at the end and at the beginning of any simple sequence of the exchange operations will be less than 10
    <sup>4</sup>.&nbsp;
    <br>
   </div> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:18pt;font-weight:bold;color:#0000FF;">Output</p> 
   <div class="ptx" style="color:rgb(51,51,51);font-size:14px;font-family:'Times New Roman', Times, serif;">
    If Nick can increase his wealth, output YES, in other case output NO to the output file.
   </div> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:18pt;font-weight:bold;color:#0000FF;">Sample Input</p> 
   <pre class="sio">3 2 1 20.0
1 2 1.00 1.00 1.00 1.00
2 3 1.10 1.00 1.10 1.00
</pre> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:18pt;font-weight:bold;color:#0000FF;">Sample Output</p> 
   <pre class="sio">YES</pre> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:18pt;font-weight:bold;color:#0000FF;">Source</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;font-weight:bold;"><span style="line-height:1.8;font-size:18px;">解释一下基本题意，SB—hypo有s货币，价值为V，他想获得很多其它的货币。身为一个妻管严，该怎么办？╮(╯▽╰)╭，无奈。。。货币交换公式 (B货币) &nbsp;= （A货币总量-佣金）*汇率。</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;font-weight:bold;"><span style="line-height:1.8;font-size:18px;">输入N,M,S,V;</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;font-weight:bold;"><span style="line-height:1.8;font-size:18px;">以下M行，line 1 代表货币1 到 货币2 的 汇率、佣金，<strong>货币2 到 货币1 的 汇率、佣金</strong></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:18px;"><strong>line 2 代表货币2 到 货币3 的 汇率、佣金，货币3 到 货币2 的 汇率、佣金</strong><br></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong><span style="line-height:1.8;font-size:18px;">打印SB-hypo是否能添加收入？YES/NO</span></strong></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:18px;">PS: &nbsp;没什么难度。就是贝尔曼的模板，敲上就差点儿相同A了，可是WA了两次，以为是精度的问题，可是看了一下DISCUSS之后，发现dis[]的初始化不正确，应该为0，而不INF。由于这个题是逆向使用贝尔曼算法，找的不是负环。且没有负环。并代表就有正欢，仅仅能说明可能存在最短路，而是能够使之钱数无限添加的正环。</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:18px;"></span></p> 
   <pre><code class="language-html">#include &lt;iostream&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;algorithm&gt;
const int INF = 1&lt;&lt;20;
const int N = 110;
const int Size = 9999;
using namespace std;
double mapp[N][N];
double dis[N],ANS;
int n,m,s,l;
double num;
struct node{
    int u,v;
    double hui,yong;
}edge[Size];
void init()
{
    l = 0;//若是找负环，dis[]应该初始化INF
    for(int i = 0;i&lt;N;i++) //这里须要注意。由于找的是正环，初始化应该为0，可是不明确为什么不能为负
        dis[i] = 0;
}
int Bellamn()
{
    int flag = 0;
    for(int i = 0;i&lt;n;i++)
    {
        flag = 0;
        for(int j = 0;j&lt;l;j++)
        {     //曾经是 dis[edge[j].v] &gt; dis[edge[j].u] + edge[j].w; 更新最短路 
            if(dis[edge[j].v] &lt; (dis[edge[j].u] - edge[j].yong)* edge[j].hui) // 更新相对最长路
                {
                    dis[edge[j].v] = (dis[edge[j].u] - edge[j].yong)* edge[j].hui;
                    flag = 1;
                }
        }
        if(flag==0)//更新完成跳出
            break;
    }
    for(int j = 0;j&lt;l;j++)
        {
            if(dis[edge[j].v] &lt; (dis[edge[j].u] - edge[j].yong)* edge[j].hui)//推断正环
                {
                   return 1;
                }
        }
        return 0;
}
int main()
{
    int a,b;
    double c,d,cc,dd;
    while(~scanf("%d%d%d%lf",&amp;n,&amp;m,&amp;s,&amp;num))
    {
        init();
        dis[s] = num;
        for(int i = 0;i&lt;m;i++)
        {
            scanf("%d%d%lf%lf%lf%lf",&amp;a,&amp;b,&amp;c,&amp;d,&amp;cc,&amp;dd);
            edge[l].u = a; edge[l].v = b; edge[l].hui = c; edge[l++].yong = d;
            edge[l].u = b; edge[l].v = a; edge[l].hui = cc; edge[l++].yong = dd;
        }
        int st = Bellamn();
        (st==1)?puts("YES"):puts("NO");
    }
    return 0;
}
</code></pre> 
   <br style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
   <br style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.8;font-size:18px;"><br></span></p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:18pt;font-weight:bold;color:#0000FF;"><br></p> 
   <div> 
    <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:12px;">版权声明：本文博客原创文章，博客，未经同意，不得转载。</p> 
    <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:12px;"><br></p> 
    <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:12px;"><br></p> 
    <p><font color="#333333"><span style="font-size:12px;">本文转自mfrbuaa博客园博客，原文链接：http://www.cnblogs.com/mfrbuaa/p/4630268.html，如需转载请自行联系原作者</span></font></p> 
    <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
     <br>
    </div> 
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
