<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Oracle错误——ORA-03113:在通信信道文件的末尾 解决方案 « NotBeCN</title>
  <meta name="description" content="             起源    &nbsp;    今天跟往常一样，登陆PL/SQL，确登陆失败，出现一个错误“ORA-01034”和“ORA-27101”如图：        然后就就通过命令提示符去登陆Oracle，去查看怎么回事，然后问题进一步出现。错误“ORA-03113:通信通道的文件结尾进程&n...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/15/weixin_33979203_90118751.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">Oracle错误——ORA-03113:在通信信道文件的末尾 解决方案</h1>
    <p class="post-meta">Nov 15, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <h1 style="line-height:1.5;font-size:28px;font-family:verdana, Arial, Helvetica, sans-serif;">起源</h1> 
   <p style="color:rgb(51,51,51);font-family:SimSun;font-size:16pt;">&nbsp;</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:16pt;"><span style="line-height:1.8;font-family:SimSun;">今天跟往常一样，登陆</span><span style="line-height:1.8;font-family:Calibri;">PL/SQL</span><span style="line-height:1.8;font-family:SimSun;">，确登陆失败，出现一个错误“</span><span style="line-height:1.8;font-family:Calibri;">ORA-01034</span><span style="line-height:1.8;font-family:SimSun;">”和“</span><span style="line-height:1.8;font-family:Calibri;">ORA-27101</span><span style="line-height:1.8;font-family:SimSun;">”如图：</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;text-align:center;"><img src="https://uzshare.com/_p?https://img-blog.csdn.net/20140929121620508?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvendrNjI2NTQyNDE3/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" style="border:0px;"><br></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:16pt;"><span style="line-height:1.8;font-family:SimSun;">然后就就通过命令提示符去登陆</span><span style="line-height:1.8;font-family:Calibri;">Oracle</span><span style="line-height:1.8;font-family:SimSun;">，去查看怎么回事，然后问题进一步出现。错误“</span><span style="line-height:1.8;font-family:Calibri;">ORA-03113:</span><span style="line-height:1.8;font-family:SimSun;">通信通道的文件结尾</span><span style="line-height:1.8;font-family:Calibri;"></span><span style="line-height:1.8;font-family:SimSun;">进程</span><span style="line-height:1.8;font-family:Calibri;">&nbsp;ID:6320&nbsp;</span><span style="line-height:1.8;font-family:SimSun;">回话</span><span style="line-height:1.8;font-family:Calibri;">&nbsp;ID :191&nbsp;</span><span style="line-height:1.8;font-family:SimSun;">序列号：</span><span style="line-height:1.8;font-family:Calibri;">3</span><span style="line-height:1.8;font-family:SimSun;">”。</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;text-align:center;"><img src="https://uzshare.com/_p?https://img-blog.csdn.net/20140929121627950?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvendrNjI2NTQyNDE3/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" style="border:0px;"><br></p> 
   <p style="color:rgb(51,51,51);font-family:Calibri;font-size:16pt;">&nbsp;</p> 
   <h1 style="line-height:1.5;font-size:28px;font-family:verdana, Arial, Helvetica, sans-serif;">问题根源</h1> 
   <p style="color:rgb(51,51,51);font-family:SimSun;font-size:16pt;">&nbsp;</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:16pt;"><span style="line-height:1.8;font-family:Calibri;">Oracle</span><span style="line-height:1.8;font-family:SimSun;">出现错误。于是去错误日志里去找问题根源：在</span><span style="line-height:1.8;font-family:Calibri;">&nbsp;</span><span style="line-height:1.8;font-family:Calibri;">e:\app\kang\diag\rdbms\oracle\oracle\trace\</span><span style="line-height:1.8;font-family:SimSun;">目录下找到</span><span style="line-height:1.8;font-family:Calibri;">oracle_ora_6320.trc</span><span style="line-height:1.8;font-family:SimSun;">文件。打开显示错误日志：</span></p> 
   <p style="color:rgb(51,51,51);font-family:SimSun;font-size:16pt;">&nbsp;</p> 
   <p style="color:rgb(51,51,51);font-family:SimSun;font-size:16pt;"></p> 
   <pre><code class="language-plain">Trace filee:\app\kang\diag\rdbms\oracle\oracle\trace\oracle_ora_6320.trc
Oracle Database 11gEnterprise Edition Release 11.2.0.1.0 - 64bit Production
With thePartitioning, OLAP, Data Mining and Real Application Testing options
Windows NT VersionV6.1 Service Pack 1
CPU                 : 4 - type 8664, 2 PhysicalCores
Process Affinity    : 0x0x0000000000000000
Memory (Avail/Total):Ph:2805M/6087M, Ph+PgF:6761M/12173M
Instance name: oracle
Redo thread mountedby this instance: 1
Oracle processnumber: 19
Windows thread id:6320, image: ORACLE.EXE (SHAD)
 
 
*** 2014-08-1608:18:55.461
*** SESSIONID:(191.3) 2014-08-16 08:18:55.461
*** CLIENT ID:()2014-08-16 08:18:55.461
*** SERVICE NAME:()2014-08-16 08:18:55.461
*** MODULENAME:(sqlplus.exe) 2014-08-16 08:18:55.461
*** ACTION NAME:()2014-08-16 08:18:55.461
 
ORA-19815: 警告:db_recovery_file_dest_size 字节 (共 4102029312 字节) 已使用 100.00%, 尚有 0 字节可用。
************************************************************************
You have followingchoices to free up space from recovery area:
1. Consider changingRMAN RETENTION POLICY. If you are using Data Guard,
   then consider changing RMAN ARCHIVELOGDELETION POLICY.
2. Back up files totertiary device such as tape using RMAN
   BACKUP RECOVERY AREA command.
3. Add disk space andincrease db_recovery_file_dest_size parameter to
   reflect the new space.
4. Delete unnecessaryfiles using RMAN DELETE command. If an operating
   system command was used to delete files,then use RMAN CROSSCHECK and
   DELETE EXPIRED commands.
************************************************************************
ORA-19809:超出了恢复文件数的限制
ORA-19804: 无法回收33961984 字节磁盘空间 (从 4102029312 限制中)
*** 2014-08-1608:18:55.502 4132 krsh.c
ARCH: Error 19809Creating archive log file to'E:\APP\KANG\FLASH_RECOVERY_AREA\ORACLE\ARCHIVELOG\2014_08_16\O1_MF_1_159_%U_.ARC'
*** 2014-08-1608:18:55.502 2747 krsi.c
krsi_dst_fail: dest:1err:19809 force:0 blast:1
DDE: Problem Key 'ORA312' was flood controlled (0x1) (no incident)
ORA-00312: 联机日志 3 线程1: 'E:\APP\KANG\ORADATA\ORACLE\REDO03.LOG'
ORA-16038: 日志 3sequence# 159 无法归档
ORA-19809:超出了恢复文件数的限制
ORA-00312: 联机日志 3 线程1: 'E:\APP\KANG\ORADATA\ORACLE\REDO03.LOG'
 
*** 2014-08-1608:18:55.565
USER (ospid: 6320):terminating the instance due to error 16038</code></pre> 
   <br style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
   <br style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"></p> 
   <p style="color:rgb(51,51,51);font-family:SimSun;font-size:16pt;">&nbsp;</p> 
   <p style="color:rgb(51,51,51);font-family:SimSun;font-size:16pt;">&nbsp;</p> 
   <p style="color:rgb(51,51,51);font-family:SimSun;font-size:16pt;">从这里我们发现了问题的根源：“</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:16pt;"><span style="line-height:1.8;color:rgb(255,102,102);"><span style="line-height:1.8;font-family:Calibri;">ORA-19815: 警告: db_recovery_file_dest_size 字节 (共 4102029312 字节) 已使用100.00%, 尚有 0 字节可用。</span><span style="line-height:1.8;font-family:SimSun;">”</span></span><span style="line-height:1.8;font-family:Calibri;">&nbsp;</span><span style="line-height:1.8;font-family:SimSun;">是</span><span style="line-height:1.8;font-family:Calibri;">db_recovery_file_dest_size</span><span style="line-height:1.8;font-family:SimSun;">也叫归档日志空间不足导致的。既然找到问题的根源，那解决起来也就easy了。</span></p> 
   <p style="color:rgb(51,51,51);font-family:SimSun;font-size:16pt;">&nbsp;</p> 
   <h1 style="line-height:1.5;font-size:28px;font-family:verdana, Arial, Helvetica, sans-serif;">解决途径</h1> 
   <p style="color:rgb(51,51,51);font-family:SimSun;font-size:16pt;">&nbsp;</p> 
   <p style="color:rgb(51,51,51);font-family:SimSun;font-size:16pt;">空间小，那摆在我们面前办法就是，一个是将空间设置大点，还有一个就是将多余的文件删除掉就可以。那么我们就将这两个办法都使用一下。</p> 
   <p style="color:rgb(51,51,51);font-family:SimSun;font-size:16pt;">&nbsp;</p> 
   <p style="color:rgb(51,51,51);font-family:SimSun;font-size:16pt;">通过命令窗体：</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:16pt;"><span style="line-height:1.8;font-family:Calibri;">--------</span><span style="line-height:1.8;font-family:SimSun;">设置归档日志空间的大小</span></p> 
   <p style="color:rgb(51,51,51);font-family:Calibri;font-size:16pt;"></p> 
   <pre><code class="language-sql">sqlplus / as sysdba
shutdown abort     ----关闭进程
startup mount       ---- 装载数据库
select * from v$recovery_file_dest; ---查询归档日志
db_recovery_file_dest_size=10737418240; --设置归档日志空间为10G
Exit ---到这里空间大小已经设置完毕</code></pre> 
   <br style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
   <br style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"></p> 
   <p style="color:rgb(51,51,51);font-family:SimSun;font-size:16pt;">&nbsp;</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:16pt;"><span style="line-height:1.8;font-family:Calibri;">--------</span><span style="line-height:1.8;font-family:SimSun;">删除归档日志</span></p> 
   <p style="color:rgb(51,51,51);font-family:Calibri;font-size:16pt;"></p> 
   <pre><code class="language-sql">rmantarget /   -----进入rman工具窗体
RMAN&gt;crosscheckarchivelog all;  --执行这个命令能够把无效的expired的archivelog标出来。
RMAN&gt;deletenoprompt archivelog until time "sysdate -3";  -- -即删除3天前的归档日志
 </code></pre> 
   <br style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
   <br style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"></p> 
   <p style="color:rgb(51,51,51);font-family:Calibri;font-size:16pt;"><span style="line-height:1.8;font-size:16pt;font-family:SimSun;">到这里就彻底</span><span style="line-height:1.8;font-size:16pt;">ok</span><span style="line-height:1.8;font-size:16pt;font-family:SimSun;">了。</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">接下来<span style="line-height:1.8;font-size:16pt;">又一次打开数据库：正常使用</span><span style="line-height:1.8;font-size:16pt;font-family:SimSun;">。</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"></p> 
   <p style="color:rgb(51,51,51);font-family:Calibri;font-size:16pt;">&nbsp;</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:16pt;"><span style="line-height:1.8;font-family:SimSun;">在删除归档文件里有一点要注意，通过命令窗体显示显示归档文件都在</span><span style="line-height:1.8;font-family:Calibri;">E:\app\kang\flash_recovery_area\oracle\ARCHIVELOG</span><span style="line-height:1.8;font-family:Calibri;">&nbsp;&nbsp;</span><span style="line-height:1.8;font-family:SimSun;">下。可是我们不能手工在操作系统中直接把这些文件删除掉，这是由于在controlfile中记录着每个archivelog的相关信息，当我们在OS中删除这些文件后。我们的controlfile中仍然记录着这些archivelog的信息，因此在Oracle的OEM管理器中还会存在这些日志。</span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">由于当我们手工清除archive文件夹下的文件后，这些记录并没有被我们从controlfile中清除掉。也就是oracle并不知道这些文件已经不存在了。</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">所以还是要通过命令窗体去运行删除这些文件的命令。</p> 
   <p style="color:rgb(51,51,51);font-family:SimSun;font-size:16pt;">&nbsp;</p> 
   <h1 style="line-height:1.5;font-size:28px;font-family:verdana, Arial, Helvetica, sans-serif;">后记</h1> 
   <p style="color:rgb(51,51,51);font-family:SimSun;font-size:16pt;">&nbsp;</p> 
   <p style="color:rgb(51,51,51);font-family:SimSun;font-size:16pt;">归档日志事实上是为了方便我们在恢复数据库当使用。但有时这些归档日志有时确实给我们的小问题一点点，因此，这些存档日志，或者需要我们注意。</p> 
   <p style="color:rgb(51,51,51);font-family:SimSun;font-size:16pt;"><br></p> 
   <p style="color:rgb(51,51,51);font-family:SimSun;font-size:16pt;"><br></p> 
   <p style="color:rgb(51,51,51);font-family:SimSun;font-size:16pt;"><br></p> 
   <p style="color:rgb(51,51,51);font-family:SimSun;font-size:16pt;"><br></p> 
   <p style="color:rgb(51,51,51);font-family:SimSun;font-size:16pt;"><br></p> 
   <p style="color:rgb(51,51,51);font-family:SimSun;font-size:16pt;"><br></p> 
   <p><font color="#333333"><span style="font-size:21.3333px;">本文转自mfrbuaa博客园博客，原文链接：http://www.cnblogs.com/mfrbuaa/p/5045972.html，如需转载请自行联系原作者</span></font></p> 
   <div>
    <br>
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
