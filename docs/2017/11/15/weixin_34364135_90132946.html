<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>初步认识Hive « NotBeCN</title>
  <meta name="description" content="             Hive是构建在hadoop之上的数据仓库。不是用来增删改查的那种数据库，那是数据库。    　　1）数据计算是MapReduce    　　2）数据存储是HDFS&nbsp;    &nbsp;    &nbsp;    认识 Hive    &nbsp; &nbsp; &nbsp;&...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/15/weixin_34364135_90132946.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">初步认识Hive</h1>
    <p class="post-meta">Nov 15, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong><span style="color:rgb(0,0,255);">Hive</span></strong>是构建在hadoop之上的数据仓库。<strong><span style="color:rgb(255,0,0);">不是用来增删改查的那种数据库，那是数据库。</span></strong></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　1）<span style="color:rgb(0,0,255);">数据计算是MapReduce</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　2）<span style="color:rgb(0,0,255);">数据存储是HDFS&nbsp;</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-size:18pt;"><strong>认识 Hive</strong></span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>&nbsp; &nbsp; &nbsp;</strong>&nbsp;&nbsp;Hive 是基于 Hadoop 构建的一套数据仓库分析系统，它提供了丰富的 SQL 查询方式来分析存储在 Hadoop &nbsp;分布式文件系统中的数据， 可以<strong>将结构化的数据文件映射为一张数据库表</strong>，并提供完整的 SQL 查询功能，可以<span style="color:rgb(0,0,255);">将 SQL 语句转换为 MapReduce 任务进行运行</span>，通过自己的 SQL 去 查询分析需要的内容，这套 SQL 简称 Hive SQL，使不熟悉 MapReduce 的用户很方便地利用 SQL 语言查询、汇总、分析。<strong><span style="color:rgb(255,0,0);">核心仍然是mapreduce作业</span>。</strong></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201607/855959-20160711112513279-2050534867.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-size:18pt;"><strong>Hive常见的应用场景</strong></span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>　　1、日志分析</strong></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>&nbsp;&nbsp;</strong>&nbsp;　　 1）统计网站一个时间段内的pv、uv</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp; &nbsp;　　 2）从不同维度进行数据分析</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>　　2、海量结构化数据离线分析</strong></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-size:18pt;"><strong>Hive的优点</strong></span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　1、简单容易入手</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　2、它是为超大数据集而设计的计算和扩展能力</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　3、提供统一的元数据管理</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-size:18pt;"><strong>Hive的缺点</strong></span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>　　1、Hive的HQL的表达能力有限</strong></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>&nbsp;　　 &nbsp;&nbsp;</strong>1）迭代式算法无法表达，比如pagerank。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp; &nbsp;　　 2）数据挖掘方面，比如kmeans。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>　　2、Hive的效率比较低</strong></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>&nbsp;</strong>&nbsp;　　&nbsp; 1）hive自动生成的MapReduce作业，通常情况下不够智能化。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp; &nbsp; 　　2）hive调优比较困难</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp; &nbsp;　　 3）hive可控性比较差</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-size:18pt;"><strong>Hive的基本框架</strong></span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>　　<img src="https://images2015.cnblogs.com/blog/855959/201607/855959-20160711113153217-1362111501.png" alt="" style="border:0px;"></strong></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　<img src="https://images2015.cnblogs.com/blog/855959/201607/855959-20160711113211295-576074889.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　<img src="https://images2015.cnblogs.com/blog/855959/201607/855959-20160711143141904-1840712697.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-size:18pt;"><strong>Hive的组成部分</strong></span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　1、<span style="color:rgb(255,0,0);">用户接口</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp; &nbsp;　　 &nbsp;CLI、JDBC/ODBC、WebUI</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　2、<span style="color:rgb(255,0,0);">元数据存储（MetaStore）</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp; &nbsp; 　　&nbsp;默认derby数据库，真实环境一般使用mysql数据库</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　3、<span style="color:rgb(255,0,0);">驱动器（Driver）</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp; &nbsp; 　　&nbsp;解释器、编译器、优化器、执行器</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　4、<span style="color:rgb(255,0,0);">hadoop分布式集群</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp; 　　&nbsp; 利用MapReducer分布式计算，利用HDFS分布式存储</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-size:18pt;"><strong>Hive工作原理</strong></span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　<img src="https://images2015.cnblogs.com/blog/855959/201607/855959-20160711113434061-384136449.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　MapReduce 开发人员可以把自己写的 Mapper 和 Reducer 作为插件支持 Hive 做更复杂的数据分析。 它与关系型数据库的 SQL 略有不同，但支持了绝大多数的语句（如 DDL、DML）以及常见的聚合函数、连接查询、条件查询等操作。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　具体见</p> 
   <h1 style="font-size:28px;line-height:1.5;font-family:Verdana, Arial, Helvetica, sans-serif;"><a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/zlslch/p/5660205.html" rel="nofollow" style="color:#000000;">Hive 文件格式 &amp; Hive操作（外部表、内部表、区、桶、视图、索引、join用法、内置操作符与函数、复合类型、用户自定义函数UDF、查询优化和权限控制）（非常好）</a></h1> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　Hive 不适合用于联机(online) 事务处理，也不提供实时查询功能。它最适合应用在基于大量不可变数据的批处理作业。Hive 的特点是可 伸缩（在Hadoop 的集群上动态的添加设备），可扩展、容错、输入格式的松散耦合。Hive 的入口是DRIVER ，执行的 SQL 语句首先提交到 DRIVER 驱动，然后调用 COMPILER 解释驱动， 最终解释成 MapReduce 任务执行，最后将结果返回。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-size:18pt;"><strong>Hive&nbsp;</strong><strong>数据类型</strong></span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　Hive 提供了基本数据类型和复杂数据类型，<strong><span style="color:rgb(255,0,0);">复杂数据类型是 Java 语言所不具有的</span></strong>。下面介绍 Hive 的两种数据类型以及数据类型之间的转换。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201607/855959-20160711113511357-242131676.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　由上表<strong><span style="color:rgb(255,0,0);">我们看到Hive不支持日期类型，在Hive里日期都是用字符串来表示的</span></strong>，而常用的日期格式转化操作则是通过自定义函数进行操作。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　<span style="color:rgb(0,0,255);">Hive是用java开发的</span>，Hive里的基本数据类型和java的基本数据类型也是一一对应的，除了string类型。有符号的整数类型：TINYINT、SMALLINT、INT和BIGINT分别等价于java的byte、short、int和long原子类型，它们分别为1字节、2字节、4字节和8字节有符号整数。Hive的浮点数据类型FLOAT和DOUBLE,对应于java的基本类型float和double类型。而Hive的BOOLEAN类型相当于java的基本数据类型boolean。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　对于Hive的String类型相当于数据库的varchar类型，该类型是一个可变的字符串，不过它不能声明其中最多能存储多少个字符，理论上它可以存储2GB的字符数。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="color:rgb(0,0,255);"><strong>复杂数据类型</strong></span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>　　<img src="https://images2015.cnblogs.com/blog/855959/201607/855959-20160711113528467-73427553.png" alt="" style="border:0px;"></strong></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　<span style="color:rgb(0,0,255);">Hive 有三种复杂数据类型 ARRAY、MAP 和 STRUCT</span>。ARRAY 和 MAP 与 Java 中的 Array 和 Map 类似，而STRUCT 与 C语言中的 Struct 类似，它封装了一个命名字段集合，复杂数据类型允许任意层次的嵌套。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　复杂数据类型的声明必须使用尖括号指明其中数据字段的类型。定义三列，每列对应一种复杂的数据类型，如下所示。</p> 
   <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"> 
    <p align="left">CREATE TABLE complex(</p> 
    <p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; col1 ARRAY&lt; INT&gt;,</p> 
    <p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; col2 MAP&lt; STRING,INT&gt;,</p> 
    <p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; col3 STRUCT&lt; a:STRING,b:INT,c:DOUBLE&gt;</p> 
    <p align="left">)</p> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-size:18pt;"><strong>类型转化</strong></span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　Hive 的原子数据类型是可以进行隐式转换的，类似于 Java 的类型转换，例如某表达式使用 INT 类型，TINYINT 会自动转换为 INT 类型， 但是 Hive 不会进行反向转化，例如，某表达式使用 TINYINT 类型，INT 不会自动转换为 TINYINT 类型，它会返回错误，除非使用 CAST 操作。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">隐式类型转换规则如下。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp; 1、任何整数类型都可以隐式地转换为一个范围更广的类型，如 TINYINT 可以转换成 INT，INT 可以转换成 BIGINT。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp; 2、所有整数类型、FLOAT 和 String 类型都可以隐式地转换成 DOUBLE。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp; 3、TINYINT、SMALLINT、INT 都可以转换为 FLOAT。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp; 4、BOOLEAN 类型不可以转换为任何其它的类型。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp; 可以使用 CAST 操作显示进行数据类型转换，例如 CAST('1' AS INT) 将把字符串'1' 转换成整数 1；如果强制类型转换失败，如执行 CAST('X' AS INT)，表达式返回空值 NULL。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-size:18pt;"><strong>Hve安装部署-实验环境</strong></span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　<img src="https://images2015.cnblogs.com/blog/855959/201607/855959-20160711113623201-1276470730.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　Hive其实很简单，它只有一个server，并不是分布式系统。就是单节点，我们部署在一个节点上就可以了。上述的是在测试环境中。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-size:18pt;"><strong>Hve安装部署-真实环境</strong></span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　&nbsp;<img src="https://images2015.cnblogs.com/blog/855959/201607/855959-20160711113654498-1279451874.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-size:18pt;"><strong>用户接口</strong></span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　Hive 对外提供了三种服务模式，即&nbsp;<strong>Hive&nbsp;</strong><strong>命令行模式（CLI</strong><strong>）</strong>，<strong>Hive&nbsp;</strong><strong>的 Web&nbsp;</strong><strong>模式（WUI</strong><strong>）</strong>，<strong>Hive&nbsp;</strong><strong>的远程服务（Client</strong><strong>）</strong>。下面介绍这些服务的用法。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>　　1</strong><strong>、 Hive&nbsp;</strong><strong>命令行模式</strong></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　Hive 命令行模式启动有两种方式。执行这条命令的前提是要配置 Hive 的环境变量。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　1)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 进入 /home/hadoop/app/Hive 目录，执行如下命令。</p> 
   <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
     <pre>　./Hive</pre>
    </div> 
    <p>&nbsp;</p> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 直接执行命令。</p> 
   <div> 
    <div class="cnblogs_code" style="font-family:'Courier New';font-size:12px;border:1px solid rgb(204,204,204);">
     <pre>Hive --service cli</pre>
    </div> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　Hive 命令行模式用于 Linux 平台命令行查询，查询语句基本跟 MySQL 查询语句类似，运行结果如下所示。</p> 
    <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"> 
     <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
      <div class="cnblogs_code_toolbar">
       <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
      </div> 
      <pre><span style="font-size:12px;line-height:1.5;">　[hadoop@zhouls Hive]$ Hive
　　Hive</span>&gt;<span style="font-size:12px;line-height:1.5;"> show tables;
　　OK
　　stock
　　stock_partition
　　tst
　　Time taken: </span>1.088 seconds, Fetched: 3<span style="font-size:12px;line-height:1.5;"> row(s)
　　Hive</span>&gt; select *<span style="font-size:12px;line-height:1.5;"> from tst;
　　OK
　　Time taken: </span>0.934<span style="font-size:12px;line-height:1.5;"> seconds
　　Hive</span>&gt;<span style="font-size:12px;line-height:1.5;"> exit;
　　[hadoop@zhouls Hive]$</span></pre> 
      <div class="cnblogs_code_toolbar">
       <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
      </div> 
     </div> 
     <p>&nbsp;</p> 
    </div> 
    <pre><br><br></pre> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>　　2</strong><strong>、Hive Web&nbsp;</strong><strong>模式</strong></p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　Hive Web 界面的启动命令如下。</p> 
    <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"> 
     <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
      <pre>Hive --service hwi</pre>
     </div> 
    </div> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　通过浏览器访问 Hive，默认端口为 9999。</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>　　3</strong><strong>、 Hive&nbsp;</strong><strong>的远程服务</strong></p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　远程服务（默认端口号 10000）启动方式命令如下，<span style="color:rgb(0,0,255);">“nohup...&amp;” 是 Linux 命令，表示命令在后台运行。</span></p> 
    <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"> 
     <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
      <pre>　　nohup Hive --service Hiveserver &amp;  <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">在Hive 0.11.0版本之前，只有HiveServer服务可用</span>
　　nohup Hive --service Hiveserver2 &amp; <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">在Hive 0.11.0版本之后，提供了HiveServer2服务</span></pre>
     </div> 
     <p>&nbsp;</p> 
     <p>&nbsp;</p> 
    </div> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="color:rgb(0,0,255);">　　Hive 远程服务通过 JDBC 等访问来连接 Hive ，这是程序员最需要的方式。</span></p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　这里，我是安装的是Hive1.0版本，所以启动 Hive service 命令如下。</p> 
    <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"> 
     <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
      <pre>　　Hive  --service Hiveserver2 &amp;      <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">默认端口10000</span>
　　Hive --service Hiveserver2 --Hiveconf Hive.server2.thrift.port 10002 &amp; <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">可以通过命令行直接将端口号改为10002</span></pre>
     </div> 
     <p>&nbsp;</p> 
    </div> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　Hive的远程服务端口号也可以在Hive-default.xml文件中配置，修改<span style="color:rgb(0,0,255);">Hive.server2.thrift.port</span>对应的值即可。</p> 
    <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"> 
     <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
      <pre>&lt; property&gt;
    &lt; name&gt;Hive.server2.thrift.port&lt; /name&gt;
    &lt; value&gt;10000&lt; /value&gt;
    &lt; description&gt;Port number of HiveServer2 Thrift <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">interface</span> when Hive.server2.transport.mode is 'binary'.&lt; /description&gt;
&lt; /property&gt;</pre>
     </div> 
     <p>&nbsp;</p> 
     <pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br><br><br></pre> 
    </div> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-size:18pt;"><strong>Hive 的 JDBC 连接和 MySQL 类似，如下所示。</strong></span></p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <div class="cnblogs_code" style="font-family:'Courier New';font-size:12px;border:1px solid rgb(204,204,204);"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
     <pre><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">import</span><span style="font-size:12px;line-height:1.5;"> java.sql.Connection;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">import</span><span style="font-size:12px;line-height:1.5;"> java.sql.DriverManager;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">import</span><span style="font-size:12px;line-height:1.5;"> java.sql.SQLException;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">class</span><span style="font-size:12px;line-height:1.5;"> HiveJdbcClient {
         </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">private</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">static</span> String driverName = "org.apache.Hive.jdbc.HiveDriver";<span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">Hive驱动名称  Hive0.11.0之后的版本
         </span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">private static String driverName = "org.apache.hadoop.Hive.jdbc.HiveDriver";</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">Hive驱动名称  Hive0.11.0之前的版本</span>
         <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">static</span>  <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">void</span> main(String[] args) <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">throws</span><span style="font-size:12px;line-height:1.5;"> SQLException {
                 </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">try</span><span style="font-size:12px;line-height:1.5;">{
                          Class.forName(driverName);
                 }</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">catch</span><span style="font-size:12px;line-height:1.5;">(ClassNotFoundException e){
                          e.printStackTrace();
                          System.exit(</span>1<span style="font-size:12px;line-height:1.5;">);
                 }
                 </span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">第一个参数：jdbc:Hive:</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">zhouls:10000/default  连接Hive2服务的连接地址
                 </span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">第二个参数：hadoop  对HDFS有操作权限的用户
                 </span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">第三个参数：Hive  用户密码  在非安全模式下，指定一个用户运行查询，忽略密码</span>
                 Connection con = DriverManager.getConnection("jdbc:Hive://zhouls:10000/default", "hadoop", ""<span style="font-size:12px;line-height:1.5;">);
                 System.out.print(con.getClientInfo());
         }
}</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
    </div> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
     &nbsp;
    </div> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-size:18pt;"><strong>解释器、编译器、优化器</strong></span></p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　Driver 调用<span style="color:rgb(255,0,0);">解释器</span>（Compiler）处理 HiveQL 字串，这些字串可能是一条 DDL、DML或查询语句。<span style="color:rgb(255,0,0);">编译器</span>将字符串转化为策略（plan）。策略仅由元数据操作 和 HDFS 操作组成，元数据操作只包含 DDL 语句，HDFS 操作只包含 LOAD 语句。对插入和查询而言，策略由 MapReduce 任务中的具有方向的非循环图（directedacyclic graph，DAG）组成，具体流程如下。</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　1)解析器（parser）：将查询字符串转化为解析树表达式。</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　2)语义分析器（semantic analyzer）：将解析树表达式转换为基于块（block-based）的内部查询表达式，将输入表的模式（schema）信息从 metastore 中进行恢复。用这些信息验证列名， 展开 SELECT * 以及类型检查（固定类型转换也包含在此检查中）。</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　3)逻辑策略生成器（logical plan generator）：将内部查询表达式转换为逻辑策略，这些策略由逻辑操作树组成。</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　4)优化器（optimizer）：通过逻辑策略构造多途径并以不同方式重写。</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="color:rgb(255,0,0);">优化器的功能如下：</span></p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　将多 multiple join 合并为一个 multi-way join；</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　对join、group-by 和自定义的 map-reduce 操作重新进行划分；</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　消减不必要的列；</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　在表扫描操作中推行使用断言（predicate）；</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　对于已分区的表，消减不必要的分区；</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　在抽样（sampling）查询中，消减不必要的桶。此外，优化器还能增加局部聚合操作用于处理大分组聚合（grouped aggregations）和 增加再分区操作用于处理不对称（skew）的分组聚合。</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-size:18pt;"><strong>Hive的数据库与目录对应关系</strong></span></p> 
    <div class="cnblogs_code" style="font-family:'Courier New';font-size:12px;border:1px solid rgb(204,204,204);">
     <pre>hive&gt;<span style="font-size:12px;line-height:1.5;"> show databases;
OK
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">default</span></pre>
    </div> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　对应hdfd目录上是，/user/hive/metastore</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">若是自己新建一个数据库，如lesson1</p> 
    <div class="cnblogs_code" style="font-family:'Courier New';font-size:12px;border:1px solid rgb(204,204,204);">
     <pre>hive&gt;<span style="font-size:12px;line-height:1.5;"> create  database lesson1;

hive</span>&gt; describe  database extended lesson1;</pre>
    </div> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　对应hdfd目录上是，/user/hive/metastore/lesson1.db/</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　然后在这个数据库下，新建表。这里不多赘述啦</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;<span style="font-size:18pt;"><strong>Hive中的数据组织形式</strong></span></p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;<img src="https://images2015.cnblogs.com/blog/855959/201611/855959-20161125093933503-1048699250.png" alt="" style="border:0px;"></p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-size:18pt;"><strong>Hive的Metastore</strong></span></p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201611/855959-20161125094034643-1271176988.png" alt="" style="border:0px;"></p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <h1 style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:28px;line-height:1.5;">Hive点滴 – 数据类型</h1> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><a href="http://debugo.com/hive-datatype/" rel="nofollow" style="color:#000000;">http://debugo.com/hive-datatype/</a>&nbsp;&nbsp;</p> 
    <h3 style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:16px;line-height:1.5;">7. 复合类型</h3> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　复合类型在关系数据库中不曾提供，因为这些类型破坏了关系数据库的范式规则。<br><strong><span style="color:rgb(0,0,255);">　　arrays</span>:&nbsp;ARRAY&lt;data_type&gt;</strong>&nbsp;定义数组需要指定数组的类型，数组中每一个元素都有相同的类型。访问数组中的元素使用下标访问。<br><strong><span style="color:rgb(0,0,255);">　　maps</span>:&nbsp;MAP&lt;primitive_type, data_type&gt;</strong>&nbsp;一组键值对组成的元组，其中的值可以通过[‘KEY’]来访问。例如name的内容是map(‘first’, ‘John’,&nbsp;‘last’, ‘Doe’) ，那么第一个元组是name[‘first’]。<br><strong><span style="color:rgb(0,0,255);">　　structs</span>:&nbsp;STRUCT&lt;col_name : data_type [COMMENT col_comment], …&gt;</strong>&nbsp;类似于C语言的struct。struct内的元素可以通过”.”来访问。例如STRUCT {first STRING; last STRING}， first则可以用name.frist来访问。<br><strong><span style="color:rgb(0,0,255);">　　union</span>:&nbsp;UNIONTYPE&lt;data_type, data_type, …&gt;</strong>&nbsp;从0.7.0开始提供。UNION类型可以如下定义，可以包含若干个任意其他类型：<br> CREATE TABLE union_test(foo UNIONTYPE&lt;int, double, array&lt;string&gt;, struct&lt;a:int,b:string&gt;&gt;);</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <h3 style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:16px;line-height:1.5;">8. 表的文本编码分割符</h3> 
    <div class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"> 
     <div class="crayon-main"> 
      <table class="crayon-table" style="border-collapse:collapse;border-spacing:0px;border:1px solid #C0C0C0;">
       <tbody>
        <tr>
         <td class="crayon-nums" style="border:1px solid #C0C0C0;border-collapse:collapse;"> 
          <div class="crayon-nums-content"> 
           <div class="crayon-num">
            1
           </div> 
           <div class="crayon-num crayon-striped-num">
            2
           </div> 
           <div class="crayon-num">
            3
           </div> 
           <div class="crayon-num crayon-striped-num">
            4
           </div> 
           <div class="crayon-num">
            5
           </div> 
           <div class="crayon-num crayon-striped-num">
            6
           </div> 
           <div class="crayon-num">
            7
           </div> 
           <div class="crayon-num crayon-striped-num">
            8
           </div> 
           <div class="crayon-num">
            9
           </div> 
           <div class="crayon-num crayon-striped-num">
            10
           </div> 
           <div class="crayon-num">
            11
           </div> 
           <div class="crayon-num crayon-striped-num">
            12
           </div> 
           <div class="crayon-num">
            13
           </div> 
          </div> </td> 
         <td class="crayon-code" style="border:1px solid #C0C0C0;border-collapse:collapse;"> 
          <div class="crayon-pre"> 
           <div class="crayon-line">
            <span class="crayon-st">CREATE<span class="crayon-h">&nbsp;<span class="crayon-r">TABLE<span class="crayon-h">&nbsp;employees<span class="crayon-h">&nbsp;(</span></span></span></span></span>
           </div> 
           <div class="crayon-line crayon-striped-line">
            <span class="crayon-r">name<span class="crayon-h">&nbsp;&nbsp;STRING,</span></span>
           </div> 
           <div class="crayon-line">
            salary
            <span class="crayon-h">&nbsp;&nbsp;<span class="crayon-t">FLOAT,</span></span> 
           </div> 
           <div class="crayon-line crayon-striped-line">
            subordinates
            <span class="crayon-h">&nbsp;<span class="crayon-t">ARRAY<span class="crayon-o">&amp;lt;STRING<span class="crayon-o">&amp;gt;,</span></span></span></span> 
           </div> 
           <div class="crayon-line">
            deductions
            <span class="crayon-h">&nbsp;&nbsp;MAP<span class="crayon-o">&amp;lt;STRING,<span class="crayon-h">&nbsp;<span class="crayon-t">FLOAT<span class="crayon-o">&amp;gt;,</span></span></span></span></span> 
           </div> 
           <div class="crayon-line crayon-striped-line">
            address
            <span class="crayon-h">&nbsp;&nbsp;STRUCT<span class="crayon-o">&amp;lt;street:STRING,<span class="crayon-h">&nbsp;city:STRING,<span class="crayon-h">&nbsp;state:STRING,<span class="crayon-h">&nbsp;zip:<span class="crayon-t">INT<span class="crayon-o">&amp;gt;</span></span></span></span></span></span></span> 
           </div> 
           <div class="crayon-line">
            )
           </div> 
           <div class="crayon-line crayon-striped-line">
            ​
            <span class="crayon-r">ROW<span class="crayon-h">&nbsp;FORMAT<span class="crayon-h">&nbsp;DELIMITED</span></span></span> 
           </div> 
           <div class="crayon-line">
            FIELDS
            <span class="crayon-h">&nbsp;TERMINATED<span class="crayon-h">&nbsp;<span class="crayon-r">BY<span class="crayon-h">&nbsp;<span class="crayon-s">'01'</span></span></span></span></span> 
           </div> 
           <div class="crayon-line crayon-striped-line">
            COLLECTION
            <span class="crayon-h">&nbsp;ITEMS<span class="crayon-h">&nbsp;TERMINATED<span class="crayon-h">&nbsp;<span class="crayon-r">BY<span class="crayon-h">&nbsp;<span class="crayon-s">'02'</span></span></span></span></span></span> 
           </div> 
           <div class="crayon-line">
            MAP
            <span class="crayon-h">&nbsp;KEYS<span class="crayon-h">&nbsp;TERMINATED<span class="crayon-h">&nbsp;<span class="crayon-r">BY<span class="crayon-h">&nbsp;<span class="crayon-s">'03'</span></span></span></span></span></span> 
           </div> 
           <div class="crayon-line crayon-striped-line">
            LINES
            <span class="crayon-h">&nbsp;TERMINATED<span class="crayon-h">&nbsp;<span class="crayon-r">BY<span class="crayon-h">&nbsp;<span class="crayon-s">'n'</span></span></span></span></span> 
           </div> 
           <div class="crayon-line">
            STORED
            <span class="crayon-h">&nbsp;<span class="crayon-r">AS<span class="crayon-h">&nbsp;TEXTFILE;</span></span></span> 
           </div> 
          </div> </td> 
        </tr>
       </tbody>
      </table>
     </div> 
    </div> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-size:18pt;"><strong>Hive数据类型的文本编码：</strong></span><br> hive的数据文件使用几种<span style="color:rgb(0,0,255);">默认分割符</span>来分割：<br><span style="color:rgb(0,0,255);">　　　　记录分割符“n”</span>&nbsp;&nbsp;&nbsp;&nbsp;分割记录，即每一行就是一个记录<br><span style="color:rgb(0,0,255);">　　　　域分割符&nbsp;“^A”</span>或八进制01&nbsp;&nbsp;&nbsp;&nbsp;分割各个字段<br><span style="color:rgb(0,0,255);">　　　　集合元素类型分割符 “^B”</span>或八进制02&nbsp;&nbsp;&nbsp;&nbsp;分割struct、分割array和map中的key-value pairs<br><span style="color:rgb(0,0,255);">　　　　map键值分割符 “^C”</span>或八进制03&nbsp;&nbsp;&nbsp;&nbsp;分割map中的键和值</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><br> 例如上面的表中的数据可能是：</p> 
    <div class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"> 
     <div class="crayon-main"> 
      <table class="crayon-table" style="border-collapse:collapse;border-spacing:0px;border:1px solid #C0C0C0;">
       <tbody>
        <tr>
         <td class="crayon-nums" style="border:1px solid #C0C0C0;border-collapse:collapse;"> 
          <div class="crayon-nums-content"> 
           <div class="crayon-num">
            1
           </div> 
          </div> </td> 
         <td class="crayon-code" style="border:1px solid #C0C0C0;border-collapse:collapse;"> 
          <div class="crayon-pre"> 
           <div class="crayon-line">
            Bill
            <span class="crayon-h">&nbsp;&nbsp;King<span class="crayon-o">^A60000.0<span class="crayon-o">^AFederal<span class="crayon-h">&nbsp;&nbsp;Taxes<span class="crayon-o">^C.15<span class="crayon-o">^BState<span class="crayon-h">&nbsp;&nbsp;Taxes<span class="crayon-o">^C.03<span class="crayon-o">^BInsurance<span class="crayon-o">^C.1<span class="crayon-o">^A300<span class="crayon-h">&nbsp;Obscure<span class="crayon-h">&nbsp;Dr.^BObscuria<span class="crayon-o">^BIL<span class="crayon-o">^B60100</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span> 
           </div> 
          </div> </td> 
        </tr>
       </tbody>
      </table>
     </div> 
    </div> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　所以CSV文件的外部表定义可以是:ROW FORMAT DELIMITED FIELDS TERMINATED BY ‘,';</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-size:18pt;"><strong>Hive服务</strong></span></p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201611/855959-20161125100037268-518478961.png" alt="" style="border:0px;"></p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">Hive Server和Hive server2都是一种远程服务。</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;　　前3项已经属于老的用法了，现在都用后2项。即，<span style="color:rgb(0,0,255);">Hive Server2和Hive Metastore Server 。</span></p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;　　更详细，见<a href="http://debugo.com/hive-cmd/" rel="nofollow" style="color:#000000;">http://debugo.com/hive-cmd/</a>&nbsp; 。</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;<span style="font-size:18pt;"><strong>Hive QL之DDL和DML</strong></span></p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201611/855959-20161125103020409-436662779.png" alt="" style="border:0px;"></p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201611/855959-20161125103104018-1359479458.png" alt="" style="border:0px;"></p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201611/855959-20161125103202534-1346248077.png" alt="" style="border:0px;"></p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-size:18pt;"><strong>内部表和外部表</strong></span></p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;<img src="https://images2015.cnblogs.com/blog/855959/201611/855959-20161125105647487-887280373.png" alt="" style="border:0px;"></p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201611/855959-20161125105736815-1541236740.png" alt="" style="border:0px;"></p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">　　注意，指定多个分区时，hdfs上存储目录按照分区创建顺序形成树形结构。</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;<img src="https://images2015.cnblogs.com/blog/855959/201611/855959-20161125105955737-1046182278.png" alt="" style="border:0px;"></p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201611/855959-20161125110028893-1586836289.png" alt="" style="border:0px;"></p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201611/855959-20161125110221315-1383362174.png" alt="" style="border:0px;"></p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201611/855959-20161125110230159-442507660.png" alt="" style="border:0px;"></p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201611/855959-20161125110256300-1909535152.png" alt="" style="border:0px;"></p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201611/855959-20161125110343065-780453771.png" alt="" style="border:0px;"></p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;<img src="https://images2015.cnblogs.com/blog/855959/201611/855959-20161125110430143-32861396.png" alt="" style="border:0px;"></p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-size:18pt;"><strong>文件数据导入表LOAD</strong></span></p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201611/855959-20161125111431503-1459899315.png" alt="" style="border:0px;"></p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201611/855959-20161125111601300-801954236.png" alt="" style="border:0px;"></p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><img src="https://images2015.cnblogs.com/blog/855959/201611/855959-20161125112211315-877000569.png" alt="" style="border:0px;"></p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><br></p> 
    <p><font><span style="font-size:14px;">本文转自大数据躺过的坑博客园博客，原文链接：http://www.cnblogs.com/zlslch/p/5659714.html，如需转载请自行联系原作者</span></font><br></p> 
    <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
