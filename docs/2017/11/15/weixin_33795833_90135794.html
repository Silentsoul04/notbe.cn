<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>事件引入和本质 « NotBeCN</title>
  <meta name="description" content="             前言    继上一篇委托后，我们继续来探讨事件，因为委托和事件有着不可分割的关系。通过本文，相信你会对事件有更深刻的认识和理解，不信，你看！    概念    用event&nbsp;关键字使您可以声明事件。&nbsp;事件是类在相关事情发生时发出通知的方法。【简述】事件就是类在发生其关...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/15/weixin_33795833_90135794.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">事件引入和本质</h1>
    <p class="post-meta">Nov 15, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <h1 style="font-size:28px;line-height:1.5;font-family:'Helvetica Neue', Arial;">前言</h1> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">继上一篇委托后，我们继续来探讨事件，因为委托和事件有着不可分割的关系。通过本文，相信你会对事件有更深刻的认识和理解，不信，你看！</p> 
   <h1 style="font-size:28px;line-height:1.5;font-family:'Helvetica Neue', Arial;">概念</h1> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">用<span class="sentence"><span><span class="input">event&nbsp;关键字使您可以声明事件。</span></span>&nbsp;<span class="sentence">事件是类在相关事情发生时发出通知的方法。【简述】事件就是类在发生其关注的事情的时候用来提供通知的一种方式。</span></span></p> 
   <h1 style="font-size:28px;line-height:1.5;font-family:'Helvetica Neue', Arial;"><span class="sentence">引入</span></h1> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><span class="sentence">要理解事件必须要先知道一下两个角色：</span></p> 
   <h2 style="color:rgb(255,255,255);line-height:1.5;font-size:21px;font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(111,168,51);"><span class="sentence">发行者（Publisher）</span></h2> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><span class="sentence">事件发行者，也称为发送者（sender），说白了就是一个对象，这个对象会自身维护本身的状态信息。当自身状态信息发生变动时，就触发一个事件，并通知所有事件的订阅者</span></p> 
   <h2 style="color:rgb(255,255,255);line-height:1.5;font-size:21px;font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(111,168,51);"><span class="sentence">订阅者（Subscriber）</span></h2> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><span class="sentence">对事件感兴趣的对象，也成为接受者（recevier），可以注册你感兴趣的事件，通常会其提供一个事件处理程序，在事件发行者触发一个事件后，会自动触发其代码内容。</span></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><span class="sentence">最经典的例子莫过于用户向报社订阅杂志，下面就用一张图来说明事件的流程。</span></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><span class="sentence"><img src="https://images0.cnblogs.com/blog2015/589642/201508/111952033011486.png" alt="" style="border:0px;"></span></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">&nbsp;报社有各种各样的杂志，当用户想要查看所需杂志时，则必须首先得&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(153,204,0);font-family:'Courier New';font-size:18px;">订阅</span>&nbsp;<span style="color:rgb(0,0,0);">该杂志，当报社&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(153,204,0);font-family:'Courier New';font-size:18px;">发行</span>&nbsp;</span>了该杂志时，则订阅了杂志的用户就能收到该杂志！所以这个例子中事件就是报社发行的杂志事件，同时将该杂志分发给已经订阅该杂志的用户手中，从而形成了一个完备的事件机制。下面我们就此例用代码来进行实现。</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,128,128);line-height:1.5;"> 1</span>     <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> Publisher <span style="color:rgb(153,204,0);line-height:1.5;">/*发行者*/ </span></span><span style="color:rgb(0,128,128);line-height:1.5;"> 2</span> <span style="line-height:1.5;">    {
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 3</span>         <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">delegate</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> Publish();<span style="color:rgb(153,204,0);line-height:1.5;"> /*事件代理*/ </span></span><span style="color:rgb(0,128,128);line-height:1.5;"> 4</span>         <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">event</span><span style="line-height:1.5;"> Publish OnPublish; <span style="color:rgb(153,204,0);line-height:1.5;">/*事件*/ </span></span><span style="color:rgb(0,128,128);line-height:1.5;"> 5</span>         <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> Issue()          <span style="color:rgb(153,204,0);line-height:1.5;"> /*触发事件方法*/ </span></span><span style="color:rgb(0,128,128);line-height:1.5;"> 6</span> <span style="line-height:1.5;">        {
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 7</span>             <span style="color:rgb(0,0,255);line-height:1.5;">if</span> (OnPublish != <span style="color:rgb(0,0,255);line-height:1.5;">null</span><span style="line-height:1.5;">)
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 8</span> <span style="line-height:1.5;">            {
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 9</span>                 Console.WriteLine(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">发行刊物</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">);
</span><span style="color:rgb(0,128,128);line-height:1.5;">10</span> <span style="line-height:1.5;">                OnPublish();
</span><span style="color:rgb(0,128,128);line-height:1.5;">11</span> <span style="line-height:1.5;">            }
</span><span style="color:rgb(0,128,128);line-height:1.5;">12</span> <span style="line-height:1.5;">        }
</span><span style="color:rgb(0,128,128);line-height:1.5;">13</span> <span style="line-height:1.5;">    }
</span><span style="color:rgb(0,128,128);line-height:1.5;">14</span>     <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> Subscriber<span style="color:rgb(153,204,0);line-height:1.5;"> /*订阅者*/ </span></span><span style="color:rgb(0,128,128);line-height:1.5;">15</span> <span style="line-height:1.5;">    {
</span><span style="color:rgb(0,128,128);line-height:1.5;">16</span>         <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> Recieve() <span style="color:rgb(153,204,0);line-height:1.5;">/*订阅者事件处理程序*/ </span></span><span style="color:rgb(0,128,128);line-height:1.5;">17</span> <span style="line-height:1.5;">        {
</span><span style="color:rgb(0,128,128);line-height:1.5;">18</span>             Console.WriteLine(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">接受刊物</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">);
</span><span style="color:rgb(0,128,128);line-height:1.5;">19</span> <span style="line-height:1.5;">        }
</span><span style="color:rgb(0,128,128);line-height:1.5;">20</span> <span style="line-height:1.5;">    }
</span><span style="color:rgb(0,128,128);line-height:1.5;">21</span>     <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> Program
</span><span style="color:rgb(0,128,128);line-height:1.5;">22</span> <span style="line-height:1.5;">    {
</span><span style="color:rgb(0,128,128);line-height:1.5;">23</span>         <span style="color:rgb(0,0,255);line-height:1.5;">static</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span> Main(<span style="color:rgb(0,0,255);line-height:1.5;">string</span><span style="line-height:1.5;">[] args)
</span><span style="color:rgb(0,128,128);line-height:1.5;">24</span> <span style="line-height:1.5;">        {
</span><span style="color:rgb(0,128,128);line-height:1.5;">25</span>             Publisher pub = <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> Publisher();
</span><span style="color:rgb(0,128,128);line-height:1.5;">26</span>             Subscriber user = <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> Subscriber();
</span><span style="color:rgb(0,128,128);line-height:1.5;">27</span>             pub.OnPublish += <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> Publisher.Publish(user.Recieve);  <span style="color:rgb(153,204,0);line-height:1.5;">/*向事件发行者订阅一个事件*/ </span></span><span style="color:rgb(0,128,128);line-height:1.5;">28</span> <span style="line-height:1.5;">            pub.Issue();
</span><span style="color:rgb(0,128,128);line-height:1.5;">29</span> <span style="line-height:1.5;">            Console.ReadKey();
</span><span style="color:rgb(0,128,128);line-height:1.5;">30</span> <span style="line-height:1.5;">        }
</span><span style="color:rgb(0,128,128);line-height:1.5;">31</span>     }</pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;"><span style="color:rgb(0,0,255);line-height:1.5;">public</span>&nbsp;<span style="color:rgb(0,0,255);line-height:1.5;">delegate</span>&nbsp;<span style="color:rgb(0,0,255);line-height:1.5;">void</span>&nbsp;Publish();</span>&nbsp;事件的代理。&nbsp;&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">Issue()</span>&nbsp;触发事件的方法。&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">Recieve()</span>&nbsp;订阅者事件处理程序。控制台输出入下：</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><img src="https://images0.cnblogs.com/blog2015/589642/201508/112018534425245.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">通过这一个例子想必我们对事件机制有了初步的认识。接下来为了更真实的理解事件机制，我们假设有如下情景：由于该报社混的不错，在一小段时间内取得了不错的业绩，开始发行两种杂志，一种是博客园杂志，另一种是博问杂志，鉴于此现将代码进行改写如下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,128,128);line-height:1.5;"> 1</span>     <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> Publisher
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 2</span> <span style="line-height:1.5;">    {
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 3</span>         <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">delegate</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span> PubCnblogs(<span style="color:rgb(0,0,255);line-height:1.5;">string</span><span style="line-height:1.5;"> magezineName);
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 4</span>         <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">delegate</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span> PubCnblogsQuestion(<span style="color:rgb(0,0,255);line-height:1.5;">string</span><span style="line-height:1.5;"> magezineName);
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 5</span>         <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">event</span><span style="line-height:1.5;"> PubCnblogs OnPubCnblogs;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 6</span>         <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">event</span><span style="line-height:1.5;"> PubCnblogsQuestion OnPubCnblogsQuestion;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 7</span>         <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> IssueCnblogs()
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 8</span> <span style="line-height:1.5;">        {
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 9</span>             <span style="color:rgb(0,0,255);line-height:1.5;">if</span> (OnPubCnblogs != <span style="color:rgb(0,0,255);line-height:1.5;">null</span><span style="line-height:1.5;">)
</span><span style="color:rgb(0,128,128);line-height:1.5;">10</span> <span style="line-height:1.5;">            {
</span><span style="color:rgb(0,128,128);line-height:1.5;">11</span>                 Console.WriteLine(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">报社发行博客园杂志</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">);
</span><span style="color:rgb(0,128,128);line-height:1.5;">12</span>                 OnPubCnblogs(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">博客园</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">);
</span><span style="color:rgb(0,128,128);line-height:1.5;">13</span> <span style="line-height:1.5;">            }
</span><span style="color:rgb(0,128,128);line-height:1.5;">14</span> <span style="line-height:1.5;">        }
</span><span style="color:rgb(0,128,128);line-height:1.5;">15</span>         <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> IssueCnblogsQuestion()
</span><span style="color:rgb(0,128,128);line-height:1.5;">16</span> <span style="line-height:1.5;">        {
</span><span style="color:rgb(0,128,128);line-height:1.5;">17</span>             <span style="color:rgb(0,0,255);line-height:1.5;">if</span> (OnPubCnblogsQuestion != <span style="color:rgb(0,0,255);line-height:1.5;">null</span><span style="line-height:1.5;">)
</span><span style="color:rgb(0,128,128);line-height:1.5;">18</span> <span style="line-height:1.5;">            {
</span><span style="color:rgb(0,128,128);line-height:1.5;">19</span>                 Console.WriteLine(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">报社发行博问杂志</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">);
</span><span style="color:rgb(0,128,128);line-height:1.5;">20</span>                 OnPubCnblogsQuestion(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">博文</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">);
</span><span style="color:rgb(0,128,128);line-height:1.5;">21</span> <span style="line-height:1.5;">            }
</span><span style="color:rgb(0,128,128);line-height:1.5;">22</span> <span style="line-height:1.5;">        }
</span><span style="color:rgb(0,128,128);line-height:1.5;">23</span> <span style="line-height:1.5;">    }
</span><span style="color:rgb(0,128,128);line-height:1.5;">24</span>     <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> Subscriber
</span><span style="color:rgb(0,128,128);line-height:1.5;">25</span> <span style="line-height:1.5;">    {
</span><span style="color:rgb(0,128,128);line-height:1.5;">26</span>         <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">string</span> Name { <span style="color:rgb(0,0,255);line-height:1.5;">get</span>; <span style="color:rgb(0,0,255);line-height:1.5;">set</span><span style="line-height:1.5;">; }
</span><span style="color:rgb(0,128,128);line-height:1.5;">27</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">28</span>         <span style="color:rgb(0,0,255);line-height:1.5;">public</span> Subscriber(<span style="color:rgb(0,0,255);line-height:1.5;">string</span><span style="line-height:1.5;"> name)
</span><span style="color:rgb(0,128,128);line-height:1.5;">29</span> <span style="line-height:1.5;">        {
</span><span style="color:rgb(0,128,128);line-height:1.5;">30</span>             <span style="color:rgb(0,0,255);line-height:1.5;">this</span>.Name =<span style="line-height:1.5;"> name;
</span><span style="color:rgb(0,128,128);line-height:1.5;">31</span> <span style="line-height:1.5;">        }
</span><span style="color:rgb(0,128,128);line-height:1.5;">32</span>         <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span> Recieve(<span style="color:rgb(0,0,255);line-height:1.5;">string</span><span style="line-height:1.5;"> magezineName)
</span><span style="color:rgb(0,128,128);line-height:1.5;">33</span> <span style="line-height:1.5;">        {
</span><span style="color:rgb(0,128,128);line-height:1.5;">34</span>             Console.WriteLine(<span style="color:rgb(0,0,255);line-height:1.5;">this</span>.Name + <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">接受</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span> + magezineName + <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">杂志</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">);
</span><span style="color:rgb(0,128,128);line-height:1.5;">35</span> <span style="line-height:1.5;">        }
</span><span style="color:rgb(0,128,128);line-height:1.5;">36</span> <span style="line-height:1.5;">    }
</span><span style="color:rgb(0,128,128);line-height:1.5;">37</span>     <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> Program
</span><span style="color:rgb(0,128,128);line-height:1.5;">38</span> <span style="line-height:1.5;">    {
</span><span style="color:rgb(0,128,128);line-height:1.5;">39</span>         <span style="color:rgb(0,0,255);line-height:1.5;">static</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span> Main(<span style="color:rgb(0,0,255);line-height:1.5;">string</span><span style="line-height:1.5;">[] args)
</span><span style="color:rgb(0,128,128);line-height:1.5;">40</span> <span style="line-height:1.5;">        {
</span><span style="color:rgb(0,128,128);line-height:1.5;">41</span>             Publisher pub = <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> Publisher();
</span><span style="color:rgb(0,128,128);line-height:1.5;">42</span>             Subscriber xh = <span style="color:rgb(0,0,255);line-height:1.5;">new</span> Subscriber(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">小红</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">);
</span><span style="color:rgb(0,128,128);line-height:1.5;">43</span>             pub.OnPubCnblogs += <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> Publisher.PubCnblogs(xh.Recieve);
</span><span style="color:rgb(0,128,128);line-height:1.5;">44</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">45</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">46</span>             Subscriber xm = <span style="color:rgb(0,0,255);line-height:1.5;">new</span> Subscriber(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">小明</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">);
</span><span style="color:rgb(0,128,128);line-height:1.5;">47</span>             pub.OnPubCnblogs += <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> Publisher.PubCnblogs(xm.Recieve);
</span><span style="color:rgb(0,128,128);line-height:1.5;">48</span>             pub.OnPubCnblogsQuestion += <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> Publisher.PubCnblogsQuestion(xm.Recieve);
</span><span style="color:rgb(0,128,128);line-height:1.5;">49</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">50</span> <span style="line-height:1.5;">            pub.IssueCnblogs();
</span><span style="color:rgb(0,128,128);line-height:1.5;">51</span> <span style="line-height:1.5;">            pub.IssueCnblogsQuestion();
</span><span style="color:rgb(0,128,128);line-height:1.5;">52</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">53</span> <span style="line-height:1.5;">            Console.WriteLine();
</span><span style="color:rgb(0,128,128);line-height:1.5;">54</span>             Console.WriteLine(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">过了一段时间</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">);
</span><span style="color:rgb(0,128,128);line-height:1.5;">55</span>             pub.OnPubCnblogsQuestion -= <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> Publisher.PubCnblogsQuestion(xm.Recieve);
</span><span style="color:rgb(0,128,128);line-height:1.5;">56</span> <span style="line-height:1.5;">            pub.IssueCnblogs();
</span><span style="color:rgb(0,128,128);line-height:1.5;">57</span> <span style="line-height:1.5;">            pub.IssueCnblogsQuestion();
</span><span style="color:rgb(0,128,128);line-height:1.5;">58</span> <span style="line-height:1.5;">            Console.ReadKey();
</span><span style="color:rgb(0,128,128);line-height:1.5;">59</span> <span style="line-height:1.5;">        }
</span><span style="color:rgb(0,128,128);line-height:1.5;">60</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">61</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">62</span>     }</pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">看上述代码报社发行了博客园杂志和博问杂志，小红只订阅博客园杂志，小明订阅了博客园杂志和博问杂志，并通过&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">IssueCnblogs</span>&nbsp;&nbsp;和&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">IssueCnblogsQuestion</span>&nbsp;方法来进行触发发行这两种杂志，经过一段时间后，小明取消订阅博问杂志，最后小红和小明收到的都是订阅的博客园杂志。打印如下：</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><img src="https://images0.cnblogs.com/blog2015/589642/201508/112056538017649.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">综上所述我们得出定义一个完整事件有四个步骤：</p> 
   <h3 style="color:rgb(111,168,51);font-size:16px;line-height:1.5;border-left-width:13px;border-left-style:solid;border-left-color:rgb(111,168,51);font-family:'Helvetica Neue', Arial;">在事件发行者中定义事件</h3> 
   <h3 style="color:rgb(111,168,51);font-size:16px;line-height:1.5;border-left-width:13px;border-left-style:solid;border-left-color:rgb(111,168,51);font-family:'Helvetica Neue', Arial;">在事件发行者中触发事件</h3> 
   <h3 style="color:rgb(111,168,51);font-size:16px;line-height:1.5;border-left-width:13px;border-left-style:solid;border-left-color:rgb(111,168,51);font-family:'Helvetica Neue', Arial;">在事件订阅者中定于事件处理程序</h3> 
   <h3 style="color:rgb(111,168,51);font-size:16px;line-height:1.5;border-left-width:13px;border-left-style:solid;border-left-color:rgb(111,168,51);font-family:'Helvetica Neue', Arial;">事件订阅者向事件发行者订阅事件</h3> 
   <h1 style="font-size:28px;line-height:1.5;font-family:'Helvetica Neue', Arial;">事件设计准则&nbsp;</h1> 
   <h2 style="color:rgb(255,255,255);line-height:1.5;font-size:21px;font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(111,168,51);">事件的命名准则应使用PascalCasing的命名方式。</h2> 
   <h2 style="color:rgb(255,255,255);line-height:1.5;font-size:21px;font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(111,168,51);">声明delegate时，使用void类型作为返回值，EventName事件的事件委托是EventNameHandler，事件接受传入两个参数，一律命名为sender和e。</h2> 
   <h2 style="color:rgb(255,255,255);line-height:1.5;font-size:21px;font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(111,168,51);">定义一个提供事件数据的类，对类以EventNameEventArgs进行命名，从System.EventArgs派生该类，然后添加所有事件的特定成员。</h2> 
   <h2 style="color:rgb(255,255,255);line-height:1.5;font-size:21px;font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(111,168,51);"><span>&nbsp;如果事件不需要传递任何参数，也要声明两个参数，e参数可以直接使用系统提供的System.EventArgs类，如果需要传递数据，则要从System.EventArgs继承一个类，并把数据放在里面。如：</span></h2> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">delegate</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span> EventNameHandler (<span style="color:rgb(0,0,255);line-height:1.5;">object</span><span style="line-height:1.5;"> sender, EventArgs e)

</span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">event</span> EventNameHandler EventName;</pre>
   </div> 
   <h2 style="color:rgb(255,255,255);line-height:1.5;font-size:21px;font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(111,168,51);"><span>在触发事件的类中提供一个受保护的方法。以EventName进行命名，在该方法中触发该事件。例如：</span></h2> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,0,255);line-height:1.5;">protected</span> <span style="color:rgb(0,0,255);line-height:1.5;">virtual</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> OnEventName (EventArgs e)
{
      </span><span style="color:rgb(0,0,255);line-height:1.5;">if</span> (EventName != <span style="color:rgb(0,0,255);line-height:1.5;">null</span><span style="line-height:1.5;">)
      {
             EventName (</span><span style="color:rgb(0,0,255);line-height:1.5;">this</span><span style="line-height:1.5;">,e);
      }
}</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">&nbsp;下面就此规范对报社发行杂志和订阅者订阅杂志进行改造，如下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,128,128);line-height:1.5;"> 1</span>     <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> PubEventArgs : EventArgs <span style="color:rgb(153,204,0);line-height:1.5;"> /*触发事件的类PubEventArgs*/ </span></span><span style="color:rgb(0,128,128);line-height:1.5;"> 2</span> <span style="line-height:1.5;">    {
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 3</span>         <span style="color:rgb(0,0,255);line-height:1.5;">private</span> <span style="color:rgb(0,0,255);line-height:1.5;">readonly</span> <span style="color:rgb(0,0,255);line-height:1.5;">string</span><span style="line-height:1.5;"> magezine_name;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 4</span>         <span style="color:rgb(0,0,255);line-height:1.5;">private</span> <span style="color:rgb(0,0,255);line-height:1.5;">readonly</span><span style="line-height:1.5;"> DateTime magezine_time;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 5</span>         <span style="color:rgb(0,0,255);line-height:1.5;">public</span> PubEventArgs(<span style="color:rgb(0,0,255);line-height:1.5;">string</span><span style="line-height:1.5;"> magezineName, DateTime magezineTime)
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 6</span> <span style="line-height:1.5;">        {
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 7</span>             magezine_name =<span style="line-height:1.5;"> magezineName;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 8</span>             magezine_time =<span style="line-height:1.5;"> magezineTime;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 9</span> <span style="line-height:1.5;">        }
</span><span style="color:rgb(0,128,128);line-height:1.5;">10</span>         <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">string</span><span style="line-height:1.5;"> magezineName
</span><span style="color:rgb(0,128,128);line-height:1.5;">11</span> <span style="line-height:1.5;">        {
</span><span style="color:rgb(0,128,128);line-height:1.5;">12</span>             <span style="color:rgb(0,0,255);line-height:1.5;">get</span> { <span style="color:rgb(0,0,255);line-height:1.5;">return</span><span style="line-height:1.5;"> magezine_name; }
</span><span style="color:rgb(0,128,128);line-height:1.5;">13</span> <span style="line-height:1.5;">        }
</span><span style="color:rgb(0,128,128);line-height:1.5;">14</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">15</span>         <span style="color:rgb(0,0,255);line-height:1.5;">public</span><span style="line-height:1.5;"> DateTime magezineTime
</span><span style="color:rgb(0,128,128);line-height:1.5;">16</span> <span style="line-height:1.5;">        {
</span><span style="color:rgb(0,128,128);line-height:1.5;">17</span>             <span style="color:rgb(0,0,255);line-height:1.5;">get</span> { <span style="color:rgb(0,0,255);line-height:1.5;">return</span><span style="line-height:1.5;"> magezine_time; }
</span><span style="color:rgb(0,128,128);line-height:1.5;">18</span> <span style="line-height:1.5;">        }
</span><span style="color:rgb(0,128,128);line-height:1.5;">19</span> <span style="line-height:1.5;">    }
</span><span style="color:rgb(0,128,128);line-height:1.5;">20</span>     <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> Publisher  <span style="color:rgb(153,204,0);line-height:1.5;">/*发行者（报社即事件的发行者）*/ </span></span><span style="color:rgb(0,128,128);line-height:1.5;">21</span> <span style="line-height:1.5;">    {
</span><span style="color:rgb(0,128,128);line-height:1.5;">22</span>         <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">delegate</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span> PubCnblogsEventHandler(<span style="color:rgb(0,0,255);line-height:1.5;">object</span><span style="line-height:1.5;"> sender, PubEventArgs e);  <span style="color:rgb(153,204,0);line-height:1.5;">/*发行博客园杂志的委托事件代理*/ </span></span><span style="color:rgb(0,128,128);line-height:1.5;">23</span>         <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">delegate</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span> PubCnblogsQuestionEventHandler(<span style="color:rgb(0,0,255);line-height:1.5;">object</span><span style="line-height:1.5;"> sender, PubEventArgs e); <span style="color:rgb(153,204,0);line-height:1.5;">/*发行博问杂志的委托事件代理*/ </span></span><span style="color:rgb(0,128,128);line-height:1.5;">24</span>         <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">event</span><span style="line-height:1.5;"> PubCnblogsEventHandler PubCnblogs; <span style="color:rgb(153,204,0);line-height:1.5;">/*发行博客园杂志事件*/ </span></span><span style="color:rgb(0,128,128);line-height:1.5;">25</span>         <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">event</span><span style="line-height:1.5;"> PubCnblogsQuestionEventHandler PubCnblogsQuestion; <span style="color:rgb(153,204,0);line-height:1.5;">/*发行博问杂志事件*/ </span></span><span style="color:rgb(0,128,128);line-height:1.5;">26</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">27</span>         <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">virtual</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> OnPubCnblogs(PubEventArgs e)   <span style="color:rgb(153,204,0);line-height:1.5;">/*提供一个触发发行博客园杂志事件的受保护的方法*/ </span></span><span style="color:rgb(0,128,128);line-height:1.5;">28</span> <span style="line-height:1.5;">        {
</span><span style="color:rgb(0,128,128);line-height:1.5;">29</span>             PubCnblogsEventHandler cnblogs =<span style="line-height:1.5;"> PubCnblogs;
</span><span style="color:rgb(0,128,128);line-height:1.5;">30</span>             <span style="color:rgb(0,0,255);line-height:1.5;">if</span> (cnblogs != <span style="color:rgb(0,0,255);line-height:1.5;">null</span><span style="line-height:1.5;">)
</span><span style="color:rgb(0,128,128);line-height:1.5;">31</span> <span style="line-height:1.5;">            {
</span><span style="color:rgb(0,128,128);line-height:1.5;">32</span>                 cnblogs(<span style="color:rgb(0,0,255);line-height:1.5;">this</span><span style="line-height:1.5;">, e);
</span><span style="color:rgb(0,128,128);line-height:1.5;">33</span> <span style="line-height:1.5;">            }
</span><span style="color:rgb(0,128,128);line-height:1.5;">34</span> <span style="line-height:1.5;">        }
</span><span style="color:rgb(0,128,128);line-height:1.5;">35</span>         <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">virtual</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> OnPubCnblogsQuestion(PubEventArgs e)  <span style="color:rgb(153,204,0);line-height:1.5;">/*提供一个触发发行博问杂志事件的受保护的方法*/ </span></span><span style="color:rgb(0,128,128);line-height:1.5;">36</span> <span style="line-height:1.5;">        {
</span><span style="color:rgb(0,128,128);line-height:1.5;">37</span>             PubCnblogsQuestionEventHandler question =<span style="line-height:1.5;"> PubCnblogsQuestion;
</span><span style="color:rgb(0,128,128);line-height:1.5;">38</span>             <span style="color:rgb(0,0,255);line-height:1.5;">if</span> (question != <span style="color:rgb(0,0,255);line-height:1.5;">null</span><span style="line-height:1.5;">)
</span><span style="color:rgb(0,128,128);line-height:1.5;">39</span> <span style="line-height:1.5;">            {
</span><span style="color:rgb(0,128,128);line-height:1.5;">40</span>                 question(<span style="color:rgb(0,0,255);line-height:1.5;">this</span><span style="line-height:1.5;">, e);
</span><span style="color:rgb(0,128,128);line-height:1.5;">41</span> <span style="line-height:1.5;">            }
</span><span style="color:rgb(0,128,128);line-height:1.5;">42</span> <span style="line-height:1.5;">        }
</span><span style="color:rgb(0,128,128);line-height:1.5;">43</span>         <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span> IssueCnblogs(<span style="color:rgb(0,0,255);line-height:1.5;">string</span><span style="line-height:1.5;"> magezine_name, DateTime magezine_time) <span style="color:rgb(153,204,0);line-height:1.5;">/*触发发行博客园杂志的方法*/ </span></span><span style="color:rgb(0,128,128);line-height:1.5;">44</span> <span style="line-height:1.5;">        {
</span><span style="color:rgb(0,128,128);line-height:1.5;">45</span>             Console.WriteLine(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">发行</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span> +<span style="line-height:1.5;"> magezine_name);
</span><span style="color:rgb(0,128,128);line-height:1.5;">46</span>             OnPubCnblogs(<span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> PubEventArgs(magezine_name, magezine_time));
</span><span style="color:rgb(0,128,128);line-height:1.5;">47</span> <span style="line-height:1.5;">        }
</span><span style="color:rgb(0,128,128);line-height:1.5;">48</span>         <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span> IssueCnblogsQuestion(<span style="color:rgb(0,0,255);line-height:1.5;">string</span><span style="line-height:1.5;"> magezine_name, DateTime magezine_time) <span style="color:rgb(153,204,0);line-height:1.5;">/*触发发行博问杂志的方法*/ </span></span><span style="color:rgb(0,128,128);line-height:1.5;">49</span> <span style="line-height:1.5;">        {
</span><span style="color:rgb(0,128,128);line-height:1.5;">50</span>             Console.WriteLine(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">发行</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span> +<span style="line-height:1.5;"> magezine_name);
</span><span style="color:rgb(0,128,128);line-height:1.5;">51</span>             OnPubCnblogsQuestion(<span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> PubEventArgs(magezine_name, magezine_time));
</span><span style="color:rgb(0,128,128);line-height:1.5;">52</span> <span style="line-height:1.5;">        }
</span><span style="color:rgb(0,128,128);line-height:1.5;">53</span> <span style="line-height:1.5;">    }
</span><span style="color:rgb(0,128,128);line-height:1.5;">54</span>     <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> Subscriber <span style="color:rgb(153,204,0);line-height:1.5;"> /*订阅者（用户即事件的接受者）*/ </span></span><span style="color:rgb(0,128,128);line-height:1.5;">55</span> <span style="line-height:1.5;">    {
</span><span style="color:rgb(0,128,128);line-height:1.5;">56</span>         <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">string</span> Name { <span style="color:rgb(0,0,255);line-height:1.5;">get</span>; <span style="color:rgb(0,0,255);line-height:1.5;">set</span><span style="line-height:1.5;">; }
</span><span style="color:rgb(0,128,128);line-height:1.5;">57</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">58</span>         <span style="color:rgb(0,0,255);line-height:1.5;">public</span> Subscriber(<span style="color:rgb(0,0,255);line-height:1.5;">string</span><span style="line-height:1.5;"> name)
</span><span style="color:rgb(0,128,128);line-height:1.5;">59</span> <span style="line-height:1.5;">        {
</span><span style="color:rgb(0,128,128);line-height:1.5;">60</span>             <span style="color:rgb(0,0,255);line-height:1.5;">this</span>.Name =<span style="line-height:1.5;"> name;
</span><span style="color:rgb(0,128,128);line-height:1.5;">61</span> <span style="line-height:1.5;">        }
</span><span style="color:rgb(0,128,128);line-height:1.5;">62</span>         <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span> Recieve(<span style="color:rgb(0,0,255);line-height:1.5;">object</span><span style="line-height:1.5;"> sender, PubEventArgs e) <span style="color:rgb(153,204,0);line-height:1.5;">/*订阅者订阅事件处理程序*/ </span></span><span style="color:rgb(0,128,128);line-height:1.5;">63</span> <span style="line-height:1.5;">        {
</span><span style="color:rgb(0,128,128);line-height:1.5;">64</span>             Console.WriteLine(e.magezineTime + <span style="color:rgb(128,0,0);line-height:1.5;">"</span> <span style="color:rgb(128,0,0);line-height:1.5;">"</span> + Name + <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">接受到</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span> +<span style="line-height:1.5;"> e.magezineName);
</span><span style="color:rgb(0,128,128);line-height:1.5;">65</span> <span style="line-height:1.5;">        }
</span><span style="color:rgb(0,128,128);line-height:1.5;">66</span> <span style="line-height:1.5;">    }
</span><span style="color:rgb(0,128,128);line-height:1.5;">67</span>     <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> Program
</span><span style="color:rgb(0,128,128);line-height:1.5;">68</span> <span style="line-height:1.5;">    {
</span><span style="color:rgb(0,128,128);line-height:1.5;">69</span>         <span style="color:rgb(0,0,255);line-height:1.5;">static</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span> Main(<span style="color:rgb(0,0,255);line-height:1.5;">string</span><span style="line-height:1.5;">[] args)
</span><span style="color:rgb(0,128,128);line-height:1.5;">70</span> <span style="line-height:1.5;">        {
</span><span style="color:rgb(0,128,128);line-height:1.5;">71</span>             Publisher pub = <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> Publisher();   <span style="color:rgb(153,204,0);line-height:1.5;">/*实例化发行者*/ </span></span><span style="color:rgb(0,128,128);line-height:1.5;">72</span>             Subscriber xh = <span style="color:rgb(0,0,255);line-height:1.5;">new</span> Subscriber(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">小红</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">);<span style="color:rgb(153,204,0);line-height:1.5;"> /*实例化订阅者小红*/ </span></span><span style="color:rgb(0,128,128);line-height:1.5;">73</span>             pub.PubCnblogs += <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> Publisher.PubCnblogsEventHandler(xh.Recieve); <span style="color:rgb(153,204,0);line-height:1.5;">/*小红订阅博客园杂志*/ </span></span><span style="color:rgb(0,128,128);line-height:1.5;">74</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">75</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">76</span>             Subscriber xm = <span style="color:rgb(0,0,255);line-height:1.5;">new</span> Subscriber(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">小明</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">);  <span style="color:rgb(153,204,0);line-height:1.5;">/*实例化订阅者小明*/ </span></span><span style="color:rgb(0,128,128);line-height:1.5;">77</span>             pub.PubCnblogs += <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> Publisher.PubCnblogsEventHandler(xm.Recieve); <span style="color:rgb(153,204,0);line-height:1.5;">/*小明订阅博客园杂志*/ </span></span><span style="color:rgb(0,128,128);line-height:1.5;">78</span>             pub.PubCnblogsQuestion += <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> Publisher.PubCnblogsQuestionEventHandler(xm.Recieve);<span style="color:rgb(153,204,0);line-height:1.5;"> /*小明订阅博问杂志*/ </span></span><span style="color:rgb(0,128,128);line-height:1.5;">79</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">80</span>             pub.IssueCnblogs(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">博客园杂志</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">, DateTime.Now); <span style="color:rgb(153,204,0);line-height:1.5;">/*报社发行博客园杂志（触发博客园杂志事件）*/ </span></span><span style="color:rgb(0,128,128);line-height:1.5;">81</span>             pub.IssueCnblogsQuestion(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">博问杂志</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">, DateTime.Now);<span style="color:rgb(153,204,0);line-height:1.5;"> /*报社发行博问杂志（触发博问杂志事件）*/ </span></span><span style="color:rgb(0,128,128);line-height:1.5;">82</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">83</span> <span style="line-height:1.5;">            Console.WriteLine();
</span><span style="color:rgb(0,128,128);line-height:1.5;">84</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">85</span>             Console.WriteLine(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">过了一段时间</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">);
</span><span style="color:rgb(0,128,128);line-height:1.5;">86</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">87</span>             pub.PubCnblogsQuestion += <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> Publisher.PubCnblogsQuestionEventHandler(xh.Recieve); <span style="color:rgb(153,204,0);line-height:1.5;">/*小红觉得博客园杂志不错，继续订阅博问杂志*/ </span></span><span style="color:rgb(0,128,128);line-height:1.5;">88</span>             pub.PubCnblogsQuestion -= <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> Publisher.PubCnblogsQuestionEventHandler(xm.Recieve); <span style="color:rgb(153,204,0);line-height:1.5;">/*小明觉得有点太多，看不过来，于是取消订阅博问杂志*/ </span></span><span style="color:rgb(0,128,128);line-height:1.5;">89</span>             pub.IssueCnblogs(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">博客园杂志</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">, DateTime.Now); <span style="color:rgb(153,204,0);line-height:1.5;">/*报社发行博客园杂志（触发博客园杂志事件）*/ </span></span><span style="color:rgb(0,128,128);line-height:1.5;">90</span>             pub.IssueCnblogsQuestion(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">博问杂志</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">, DateTime.Now); <span style="color:rgb(153,204,0);line-height:1.5;">/*报社发行博问杂志（触发博问杂志事件）*/ </span></span><span style="color:rgb(0,128,128);line-height:1.5;">91</span> <span style="line-height:1.5;">            Console.ReadKey();
</span><span style="color:rgb(0,128,128);line-height:1.5;">92</span> <span style="line-height:1.5;">        }
</span><span style="color:rgb(0,128,128);line-height:1.5;">93</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">94</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">95</span>     }</pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">根据上述代码打印出：</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><img src="https://images0.cnblogs.com/blog2015/589642/201508/112244305821934.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">通过上述学习我们知道了事件和基本用法以及相关命名规范，下面我们一起来探讨事件本质。</p> 
   <h1 style="font-size:28px;line-height:1.5;font-family:'Helvetica Neue', Arial;">事件本质&nbsp;</h1> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">通过上述我们写的&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">Publisher</span>&nbsp;发行者类，我们通过反编译工具查看其IL代码入下：</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><img src="https://images0.cnblogs.com/blog2015/589642/201508/112325544266071.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">我们单拿发行者中的博问委托来看即可，我们上述在代码中定义的委托变量是&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">&nbsp;<span style="color:rgb(0,0,255);line-height:1.5;">public</span>&nbsp;<span style="color:rgb(0,0,255);line-height:1.5;">event</span>PubCnblogsQuestionEventHandler PubCnblogsQuestion;</span>&nbsp;但此时我们发现变量的访问权限变成了&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;"><span style="color:rgb(0,0,255);line-height:1.5;">private</span></span>&nbsp;私有的，同时该私有委托变量中添加了两个方法&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">add</span>&nbsp;和&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">remove</span>&nbsp;，所以此时我们就得出这样两个结论，通过添加&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;"><span style="color:rgb(0,0,255);line-height:1.5;">event</span></span>&nbsp;关键字：（1）自动将委托变量变成了私有的（2）同时生成了add()和remove()两个方法，也就说明事件中+=和-=是通过add()和remove()方法来实现的。</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">&nbsp;鉴于此我们看看add()方法到底是什么东西？</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><img src="https://images0.cnblogs.com/blog2015/589642/201508/120014248012235.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">add()内部实现最终是调用了委托的最终的父类的Delegate中的Combine方法来实现的，同时我们也能看到&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;"><span style="color:rgb(0,0,255);line-height:1.5;">this</span>.PubCnblogsQuestion</span>&nbsp;，通过上述我们知道用event关键字声明的委托变量是私有的，那这个调用的PubCnblogsQuestion变量是哪来的呢？不难看出通过event关键字声明中其实就自动生成了委托变量同名的变量。还不信的话，请看下图中的操作，会让你深信不疑。&nbsp;&nbsp;</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><img src="https://images0.cnblogs.com/blog2015/589642/201508/120024307395385.png" alt="" style="border:0px;">&nbsp;</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">当实例化发行者类后再对其委托变量PubCnblogsQuestion进行赋值再编译生成会通不过，上面也有说，此时你操作的是event关键字会自动生成与声明的委托变量同名的一个变量只能对其进行+=或者-=操作，而你声明的委托变量是私有的，你是无法访问的。通过这也验证了这一观点。</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">&nbsp;同理我们查看其remove()方法的实现，想必你也能猜到，肯定也是操作委托中的最终父类Delegate中的Remove()方法对其进行-=操作。眼见为实:</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><img src="https://images0.cnblogs.com/blog2015/589642/201508/120032080206916.png" alt="" style="border:0px;"></p> 
   <h1 style="font-size:28px;line-height:1.5;font-family:'Helvetica Neue', Arial;">&nbsp;总结</h1> 
   <h2 style="color:rgb(255,255,255);line-height:1.5;font-size:21px;font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(111,168,51);">事件的本质即用event关键字声明的本质</h2> 
   <h3 style="color:rgb(111,168,51);font-size:16px;line-height:1.5;border-left-width:13px;border-left-style:solid;border-left-color:rgb(111,168,51);font-family:'Helvetica Neue', Arial;">用event关键字修饰委托变量时，会将其委托变量私有化，同时自动生成一个与该委托变量同名的变量</h3> 
   <h3 style="color:rgb(111,168,51);font-size:16px;line-height:1.5;border-left-width:13px;border-left-style:solid;border-left-color:rgb(111,168,51);font-family:'Helvetica Neue', Arial;">用event关键字修饰委托变量时，此时会自动生成add()和remove()两个方法即事件中的+=或者-=都是通过这两个方法来实现，同时最终的实现都是操作该私有化的委托对象的最终父类Delegate中的Combine()和Reomve()方法</h3> 
   <h1 style="font-size:28px;line-height:1.5;font-family:'Helvetica Neue', Arial;">&nbsp;作用（好处）</h1> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">&nbsp;委托依赖事件，何以见得呢？那么 想想如果没有事件会怎样，想想当在实际项目中，上一个程序员用到了委托，当该程序员卷铺盖走人，等到下一个程序员来时不知道里面到底实现了什么或者说对其写的委托实现进行了remove，那可怎么办！如果有了事件的话，你根本无法去操作委托对象，只能通过+=和-=来操作，这样就避免了委托的滥用！</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><br></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><br></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><br></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><br></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><br></p> 
   <p><font color="#111111"><span style="font-size:13px;line-height:23.4px;">本文转自Jeffcky博客园博客，原文链接：http://www.cnblogs.com/CreateMyself/p/4722119.html，如需转载请自行联系原作者</span></font></p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
