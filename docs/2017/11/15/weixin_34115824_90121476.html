<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>mtk硬件项目开始关闭蓝牙功能：mtk 硬件ScanCode和keycode应用演示示例 « NotBeCN</title>
  <meta name="description" content="             项目要求：该项目因为没有使用android5.0,导致启动bluetooth的蓝牙audio slave功能必须使用第三方模组，该第三方模组，启动是通过android主板通过GPIO控制。UI界面是通过图形选择或者一个kpd组合按键来打开关闭或者是启动蓝牙搜索功能。        1，用...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/15/weixin_34115824_90121476.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">mtk硬件项目开始关闭蓝牙功能：mtk 硬件ScanCode和keycode应用演示示例</h1>
    <p class="post-meta">Nov 15, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">项目要求：该项目因为没有使用</span></span></span>android5.0,<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">导致启动</span></span></span>bluetooth<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">的蓝牙</span></span></span>audio slave<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">功能必须使用第三方模组，该第三方模组，启动是通过</span></span></span>android<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">主板通过</span></span></span>GPIO<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">控制。</span></span></span>UI<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">界面是通过图形选择或者一个</span></span></span>kpd<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">组合按键来打开关闭或者是启动蓝牙搜索功能。</span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">1<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">，用户按键的侦測：</span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">标准的行为，用户的组合按键，</span></span></span>kernel<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">里面向上层发送</span></span></span>scancode<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">，然后</span></span></span>framework<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">把</span></span></span>scancode<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">转换成</span></span></span>keycode<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">的</span></span></span>keyevent,<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">该</span></span></span>keyevent<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">会被</span></span></span>PhoneWindows<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">接受并处理。</span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">对于</span></span></span>mtk,<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">从按键到</span></span></span>keycode<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">，已经被封装起来。这个封装的工具就是</span></span></span>dct.</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">比如。我们的项目组合按键是</span></span></span>:KCOL2+KROW1<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">，我们能够在图形工具中如选择我们的配置</span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">在样例中，我们设置该案件的</span></span></span>keycode<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">是</span></span></span>SYM</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">当然，也能够自定义新的</span></span></span>keycode<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">。我嫌麻烦，就直接使用现成的，怎样定义新的按键，请看附录：</span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;"><img src="http://www.cnblogs.com/mfrbuaa/p/4873785.html" align="left" width="643" height="418" alt="" style="border:0px;font-size:13.3333px;line-height:12px;"><br></span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;"><br></span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;"><br></span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;"><br></span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;"><br></span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;"><br></span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;"><br></span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;"><br></span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;"><br></span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;"><br></span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;"><br></span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;"><br></span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;"><br></span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;"><br></span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;"><br></span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;"><br></span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;"><br></span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;"><br></span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;"><br></span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;"><br></span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;"><br></span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">2<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">，侦測用户按键行为，发送对应的</span></span></span>intent</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">上面的</span></span></span>keycode<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">在发送到各个</span></span></span>window<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">之前。是被</span></span></span>PhoneWindowManager.java<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">接收到的，在当中有一个方法：</span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:12px;">@Override</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:12px;">public intinterceptKeyBeforeQueueing(KeyEvent event, int policyFlags, booleanisScreenOn) {</p> 
   <br style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">望文生义。看名字我们就知道这个函数的作用。</span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">我们在代码中例如以下拦截：</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">if (keyCode== KeyEvent.KEYCODE_SYM) {</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">Log.e("zcfdebug","nowwe catch the bluetooth button action !");</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">if (down){</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">Log.e("zcfdebug","nowwe catch the bluetooth button down !");</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">}</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><br></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">if (up){</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">Log.e("zcfdebug","nowwe catch the bluetooth button up !");</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">}</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">return 1;</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">}</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">当然，</span></span></span>KEYCODE_SYM<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">是原来系统中已经定义的</span></span></span>keycode<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">，事实上就是输入法的选择，我们须要屏蔽这个功能。在</span></span></span>alps/frameworks/base/core/java/android/view/inputmethod/InputMethodManager.java:</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">/**</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">* @hide</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">*/</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">public voiddispatchKeyEvent(Context context, int seq, KeyEvent key,</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">FinishedEventCallback callback) {</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">booleanhandled = false;</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">/*zcfdebug--&lt;&lt;</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">synchronized(mH) {</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">if(DEBUG) Log.d(TAG, "dispatchKeyEvent");</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><br></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">if(mCurMethod != null) {</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">if(key.getAction() == KeyEvent.ACTION_DOWN</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">&amp;&amp; key.getKeyCode() == KeyEvent.KEYCODE_SYM) {</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">showInputMethodPickerLocked();</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">handled = true;</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">}else {</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">try {</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">if (DEBUG) Log.v(TAG, "DISPATCH KEY: " + mCurMethod);</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">final long startTime = SystemClock.uptimeMillis();</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">enqueuePendingEventLocked(startTime, seq, mCurId, callback);</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">mCurMethod.dispatchKeyEvent(seq, key, mInputMethodCallback);</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">return;</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">} catch (RemoteException e) {</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">Log.w(TAG, "IME died: " + mCurId + " dropping: "+ key, e);</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">}</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">}</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">}</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">}</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><br></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">zcfdebug--&gt;&gt;*/</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">callback.finishedEvent(seq, handled);</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">}</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">凝视掉原有功能就好了。</span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><br></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">依照我们的项目定义，按键</span></span></span>3-5<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">秒为蓝牙状态电源打开搜索功能，长按</span></span></span>8<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">秒以上为关闭。</span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">关闭的时候，长按8<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">秒没有不论什么动作。</span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><br></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">if (keyCode== KeyEvent.KEYCODE_SYM) {</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">Log.e("zcfdebug","nowwe catch the bluetooth button action !");</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">if (down){</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">Log.e("zcfdebug","nowwe catch the bluetooth button down !");</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">//lastSymKeyDownTime=System.currentTimeMillis();</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">lastSymKeyDownTime=event.getEventTime();</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">}</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><br></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">if (up){</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">Log.e("zcfdebug","nowwe catch the bluetooth button up !");</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">SymKeyPressTime=event.getEventTime()-lastSymKeyDownTime;</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">//SymKeyPressTime=System.currentTimeMillis()-lastSymKeyDownTime;</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">Log.e("zcfdebug","theSymKeyPressTime is "+SymKeyPressTime);</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">if(SymKeyPressTime&gt;2000&amp;&amp; SymKeyPressTime&lt;5000){</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">Log.e("zcfdebug","nowwe catch the bluetooth press 3 second!");</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><br></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">}</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">if(SymKeyPressTime&gt;7000){</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">Log.e("zcfdebug","nowwe catch the bluetooth press 8 second!");</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">}</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">}</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">return 1;</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">}</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><br></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">蓝牙开关等动作，我们在外边的</span></span></span>apk<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">程序中实现。我们仅仅要发送</span></span></span>intent<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">实现就</span></span></span>OK<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">了，代码例如以下：</span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">if (keyCode== KeyEvent.KEYCODE_SYM) {</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">Log.e("zcfdebug","nowwe catch the bluetooth button action !");</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">if (down){</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">Log.e("zcfdebug","nowwe catch the bluetooth button down !");</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">//lastSymKeyDownTime=System.currentTimeMillis();</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">lastSymKeyDownTime=event.getEventTime();</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">}</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><br></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">if (up){</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">Log.e("zcfdebug","nowwe catch the bluetooth button up !");</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">SymKeyPressTime=event.getEventTime()-lastSymKeyDownTime;</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">//SymKeyPressTime=System.currentTimeMillis()-lastSymKeyDownTime;</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">Log.e("zcfdebug","theSymKeyPressTime is "+SymKeyPressTime);</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">if(SymKeyPressTime&gt;2000&amp;&amp; SymKeyPressTime&lt;5000){</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">Log.e("zcfdebug","nowwe catch the bluetooth press 3 second!");</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">Intent btStartStopIntent = new Intent(BT_STARTSTOP);</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">mContext.sendBroadcast(btStartStopIntent);</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><br></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">}</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">if(SymKeyPressTime&gt;7000){</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">Log.e("zcfdebug","nowwe catch the bluetooth press 8 second!");</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">Intent btPairIntent = new Intent(BT_PAIR);</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">mContext.sendBroadcast(btPairIntent);</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">}</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">}</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">return 1;</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">}</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><br></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><br></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">应用程序怎样接收处理</span></span></span>intent,<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">将在下一篇文章描写叙述</span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><br></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">附录：</span></span></span>Howto add a new key on android ICS\ICS2:</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">[Description]</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">How to add a new keyon android ICS/ICS2</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">[Solution]</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">1.<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">在</span></span></span>DCTtool keypad list&nbsp;<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">文件添加新按键的选项</span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">alps\mediatek\source\dct\Keypad_YuSu.cmp<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">中加入新键</span></span></span>,<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">如</span></span></span>SMS<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">快捷键</span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">KEY_SYM</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">KEY_SMS</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">KEY_0</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">2.<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">打开</span></span></span>DCTtool&nbsp;<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">在</span></span></span>keypad<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">矩阵中在对应定义的按键位中加入新按键</span></span></span>,<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">如</span></span></span>SMS,<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">然后</span></span></span>Save</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><br></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">3.<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">改动</span></span></span>linux<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">键盘码文件</span></span></span>input.h</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">因为</span></span></span>preloader\uboot\kernel\factory<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">等情况分开使用</span></span></span>,<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">对应的文件路径下的</span></span></span>input.h<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">都应该改动</span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">为新按键添加键码值</span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">kernel\include\linux\input.h</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">bionic\libc\kernel\common\linux\input.h</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">external\kernel-headers\original\linux\input.h</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">external\qemu\linux_keycodes.h</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">mediatek\plaform\mt6575\preloader\src\drivers\inc\linux\input.h</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">Mediatek\plaform\mt6575\uboot\inc\linux\input.h</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">如</span></span></span>KEY_SMS</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">#define KEY_SMS 252</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">4.<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">添加</span></span></span>keypadlayout<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">文件键盘映射</span></span></span>,linux<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">和</span></span></span>androidkey<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">映射</span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">mediatek\config\&lt;projectname&gt;\mt6575-kpd.kl</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">如</span></span></span>:</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">key 252 SMS</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">当中</span></span></span>252<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">是</span></span></span>linux<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">键码</span></span></span>,SMS<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">是</span></span></span>android<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">识别</span></span></span>key<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">值假设是须要唤醒系统</span></span></span>,<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">还须要添加</span></span></span>WAKE</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">假设新按键是全键盘的一些生僻字符</span></span></span>,<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">改动</span></span></span>:mediatek\config\&lt;project name&gt;\mt6575-kpd.kcm</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">5.<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">改动</span></span></span>Java<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">识别</span></span></span>keycode</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">framework/base/include/ui/KeyCodelabels.h</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">KEYCODES<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">数据结构后面添加</span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">{"SMS",220}</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">framework/base/native/include/android/KeyCodes.h</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">在按键定义项添加</span></span></span>AKEYCODE_SMS = 220;</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">6.<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">改动</span></span></span>Java<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">键盘事件</span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">framework/base/core/java/android/view/keyevent.java</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">/**</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">*@hide</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">*/</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">public static finalint KEYCODE_SMS =220;</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">最后的按键为新增的</span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">private static finalint LAST_KEYCODE ==KEYCODE_SMS;</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">以上</span></span></span>/**/<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">凝视的</span></span></span>code<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">是</span></span></span>android<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">非开放</span></span></span>API<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">或变量定义的时候</span></span></span>,<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">须要加入</span></span></span>JavaDoc<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">的识别</span></span></span>,<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">否则要运</span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">行</span></span></span>makeupdate-api<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">才干</span></span></span>build<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">通过</span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">假设是系统按键</span></span></span>,<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">改动</span></span></span>framework/base/libs/ui/input.cpp</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">isSystemKey()<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">添加</span></span></span>caseAKEYCODE_SMS:</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">7.<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">改动</span></span></span>XML<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">文件描写叙述符</span></span></span>framework/base/core/res/res/values/attr.xml</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">&lt;enumname="KEYCODE_SMS" value="220" /&gt;</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">8.<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">添加測试验证</span></span></span>log<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">在</span></span></span>android</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">framework\base\policy\src\com\android\internal\polidy\impl\phoneWindowManager.java</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;"><span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">在</span></span></span>interceptKeyBeforeDispatching()<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">添加</span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">if(keycode==KeyEvent.KEYCODE_SMS){</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">log.d(TAG,"interceptKeyTi KEYCODE_SMS keyCode="+ keyCode + "down=" + down + "</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">repeatCount=" +repeatCount + “ keyguardOn=” + keyguardOn + “ mHomePressed=”+</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">9.<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">能够抓</span></span></span>log<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">确认</span></span></span>,<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">或者添加測试</span></span></span>APK<span style="line-height:1.8;font-family:'Droid Sans Fallback';"><span style="line-height:1.8;font-size:10pt;"><span style="line-height:1.8;">检測</span></span></span></p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">Kernal log:</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">&lt;4&gt;[253.828234]kpd:register = fffe ffff ffff ffff ff</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">&lt;4&gt;[253.828825]kpd:(pressed) HW keycode = 0</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">&lt;4&gt;[253.829348]kpd:report Linux keycode = 252</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">&lt;4&gt;[253.829857]kpd:save new keymap state</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">&lt;4&gt;[254.030814]kpd:register = ffff ffff ffff ffff ff</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">&lt;4&gt;[254.031405]kpd:(released) HW keycode = 0</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">&lt;4&gt;[254.031936]kpd:report Linux keycode = 252</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">&lt;4&gt;[254.032445]kpd:save new keymap state</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">Android log:</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">WindowManager:interceptKeyTq keycode=220 screenIsOn=true keyguardActive=false</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">policyFlags =#2000000 down =false canceled = false</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">D WindowManager:interceptKeyTi keyCode=220 down=false repeatCount=0 keyguardOn=false</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">mHomePressed=falsecanceled=false</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">D WindowManager:interceptKeyTi KEYCODE_SMS keyCode=220 down=false repeatCount=0</p> 
   <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:14px;">keyguardOn=falsemHomePressed=false canceled=false</p> 
   <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <br>
   </div> 
   <div> 
    <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:12px;">版权声明：本文博主原创文章。博客，未经同意不得转载。</p> 
    <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:12px;"><br></p> 
    <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:12px;"><br></p> 
    <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:12px;"><br></p> 
    <p style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:12px;"><br></p> 
    <p><font color="#333333"><span style="font-size:12px;">本文转自mfrbuaa博客园博客，原文链接：http://www.cnblogs.com/mfrbuaa/p/4873785.html，如需转载请自行联系原作者</span></font></p> 
    <div style="color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
     <br>
    </div> 
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
