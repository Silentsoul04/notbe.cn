<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>MyBatis简单使用和入门理解 « NotBeCN</title>
  <meta name="description" content="             本文记录第一次使用Mybatis时碰到的一些错误和简单理解，采用的示例是Eclipse中的JAVA工程，采用XML文件定义数据库连接。    &nbsp;    可以使用Java JDBC API直接操作数据库，但使用框架会更便捷、高效而且还可以利用框架提供的某些强大的功能（比如事务管理...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/25/weixin_34026484_90130331.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">MyBatis简单使用和入门理解</h1>
    <p class="post-meta">Nov 25, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">本文记录第一次使用Mybatis时碰到的一些错误和简单理解，采用的示例是Eclipse中的JAVA工程，采用XML文件定义数据库连接。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">可以使用Java JDBC API直接操作数据库，但使用框架会更便捷、高效而且还可以利用框架提供的某些强大的功能（比如事务管理），而Mybatis就是这样的一个框架。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">Mybatis主要由四大部分组成：</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">①SqlSessionFactoryBuilder</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">②SqlSessionFactory</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">③SqlSession</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">④SQL Mapper</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">要想访问（操作）数据库：要建立数据库连接，要定义数据库操作方法（insert/update/delete...），要有具体的操作数据库中的表 的SQL语句，而SqlSessionFactoryBuilder、SqlSessionFactory、SqlSession就是用来负责底层建立数据库连接、管理连接、释放连接等。对于业务层而言，关心的是：定义一个SQL语句，让Mybatis方便地把SQL语句执行后的结果 呈现给使用者，而这可以通过SQL Mapper来完成。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">SQL Mapper由两部分组成，一是：JAVA 接口，该接口中定义了 业务层 要对数据库进行何种操作；另一部分是：XML配置文件，定义了具体的数据库操作语句和映射规则。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">假设要操作数据库test中的表 t_role，t_role有三个字段：id ，role_name，和 note</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">+-----------+-------------+------+-----+---------+----------------+<br> | Field | Type | Null | Key | Default | Extra |<br> +-----------+-------------+------+-----+---------+----------------+<br><strong>| id | bigint(20) | NO | PRI | NULL | auto_increment |</strong><br> | role_name | varchar(20) | YES | | NULL | |<br> | note | varchar(20) | YES | | NULL | |<br> +-----------+-------------+------+-----+---------+----------------+</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">该表对应的POJO类如下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.5;">View Code</span> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">JAVA接口中定义的一些操作如下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,0,255);line-height:1.5;">package chapter2.mapper;<br>
import</span><span style="line-height:1.5;"> java.util.List;
</span><span style="color:rgb(0,0,255);line-height:1.5;">import</span><span style="line-height:1.5;"> java.util.Map;
</span><span style="color:rgb(0,0,255);line-height:1.5;">import</span><span style="line-height:1.5;"> chapter2.pojo.Role;

</span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">interface</span><span style="line-height:1.5;"> RoleMapper {
    </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span><span style="line-height:1.5;"> Role getRole(Long id);
    </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> deleteRole(Long id);
    </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> insertRole(Role role);
    </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> List&lt;Role&gt; findRoleByMap(Map&lt;String, String&gt;<span style="line-height:1.5;"> params);
}</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">与该接口对应，定义的具体操作数据库的配置文件RoleMapper.xml 如下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,0,255);line-height:1.5;">&lt;?</span><span style="color:rgb(255,0,255);line-height:1.5;">xml version="1.0" encoding="UTF-8"</span><span style="color:rgb(0,0,255);line-height:1.5;">?&gt;</span>
<span style="color:rgb(0,0,255);line-height:1.5;">&lt;!</span><span style="color:rgb(255,0,255);line-height:1.5;">DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>

<span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">mapper </span><span style="color:rgb(255,0,0);line-height:1.5;">namespace</span><span style="color:rgb(0,0,255);line-height:1.5;">="chapter2.mapper.RoleMapper"</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>

<span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">resultMap </span><span style="color:rgb(255,0,0);line-height:1.5;">type</span><span style="color:rgb(0,0,255);line-height:1.5;">="chapter2.pojo.Role"</span><span style="color:rgb(255,0,0);line-height:1.5;"> id</span><span style="color:rgb(0,0,255);line-height:1.5;">="roleMap"</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
<span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">id </span><span style="color:rgb(255,0,0);line-height:1.5;">property</span><span style="color:rgb(0,0,255);line-height:1.5;">="id"</span><span style="color:rgb(255,0,0);line-height:1.5;"> column</span><span style="color:rgb(0,0,255);line-height:1.5;">="id"</span><span style="color:rgb(0,0,255);line-height:1.5;">/&gt;</span><span style="color:rgb(0,128,0);line-height:1.5;">&lt;!--</span><span style="color:rgb(0,128,0);line-height:1.5;"> primary key </span><span style="color:rgb(0,128,0);line-height:1.5;">--&gt;</span>
<span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">result </span><span style="color:rgb(255,0,0);line-height:1.5;">property</span><span style="color:rgb(0,0,255);line-height:1.5;">="roleName"</span><span style="color:rgb(255,0,0);line-height:1.5;"> column</span><span style="color:rgb(0,0,255);line-height:1.5;">="role_name"</span><span style="color:rgb(0,0,255);line-height:1.5;">/&gt;</span><span style="color:rgb(0,128,0);line-height:1.5;">&lt;!--</span><span style="color:rgb(0,128,0);line-height:1.5;"> 普通列的映射关系 </span><span style="color:rgb(0,128,0);line-height:1.5;">--&gt;</span>
<span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">result </span><span style="color:rgb(255,0,0);line-height:1.5;">property</span><span style="color:rgb(0,0,255);line-height:1.5;">="note"</span><span style="color:rgb(255,0,0);line-height:1.5;"> column</span><span style="color:rgb(0,0,255);line-height:1.5;">="note"</span><span style="color:rgb(0,0,255);line-height:1.5;">/&gt;</span>
<span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">resultMap</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>


    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">select </span><span style="color:rgb(255,0,0);line-height:1.5;">id</span><span style="color:rgb(0,0,255);line-height:1.5;">="getRole"</span><span style="color:rgb(255,0,0);line-height:1.5;"> parameterType</span><span style="color:rgb(0,0,255);line-height:1.5;">="long"</span><span style="color:rgb(255,0,0);line-height:1.5;"> resultType</span><span style="color:rgb(0,0,255);line-height:1.5;">="Role"</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span><span style="line-height:1.5;">
        select id, role_name as roleName, note from t_role where id = #{id}
    </span><span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">select</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">insert </span><span style="color:rgb(255,0,0);line-height:1.5;">id</span><span style="color:rgb(0,0,255);line-height:1.5;">="insertRole"</span><span style="color:rgb(255,0,0);line-height:1.5;"> parameterType</span><span style="color:rgb(0,0,255);line-height:1.5;">="Role"</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span><span style="line-height:1.5;">
        insert into t_role(role_name,note) values(#{roleName},#{note})
    </span><span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">insert</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">delete </span><span style="color:rgb(255,0,0);line-height:1.5;">id</span><span style="color:rgb(0,0,255);line-height:1.5;">="deleteRole"</span><span style="color:rgb(255,0,0);line-height:1.5;"> parameterType</span><span style="color:rgb(0,0,255);line-height:1.5;">="long"</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span><span style="line-height:1.5;">
        delete from t_role where id = #{id}
    </span><span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">delete</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
    
    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">select </span><span style="color:rgb(255,0,0);line-height:1.5;">id</span><span style="color:rgb(0,0,255);line-height:1.5;">="findRoleByMap"</span><span style="color:rgb(255,0,0);line-height:1.5;"> parameterType</span><span style="color:rgb(0,0,255);line-height:1.5;">="map"</span><span style="color:rgb(255,0,0);line-height:1.5;"> resultMap</span><span style="color:rgb(0,0,255);line-height:1.5;">="roleMap"</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span><span style="line-height:1.5;">
        select id,role_name,note from t_role
        where role_name like concat('%', #{roleName},'%')
        and note like concat('%',#{note},'%')
    </span><span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">select</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
<span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">mapper</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">然后，就可以用SqlSessionFactory创建SqlSession，SqlSession获取相应的RoleMapper实例，再使用RoleMapper实例调用RoleMapper接口中定义的方法，最终由Mybatis根据 RoleMapper.xml配置文件将 方法 与 映射成具体的数据库操作语句，最终访问数据库。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">使用SqlSessionFactoryBuilder&nbsp;<strong>根据&nbsp;<span style="color:rgb(255,0,0);">mybatisConfig.xml</span>中配置的 dataSource创建SqlSessionFactory，再使用SqlSessionFactory创建SqlSession</strong>，代码如下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.5;">View Code</span> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">报错：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>Caused by: org.springframework.beans.factory.BeanCreationException: <span style="color:rgb(255,0,0);line-height:1.5;"><strong>Error creating bean with name 'sqlSessionFactory'</strong></span> defined in <br>
class path resource [detect/xx/xx/applicationContext.xml]: Invocation of init method failed; nested exception is org.springframework.core.NestedIOException:<br><span style="color:rgb(255,0,0);line-height:1.5;">Failed to parse config resource: class path resource [detect/xx/xx/<strong>mybatisConfig.xml</strong>]</span>; nested exception is org.apache.ibatis.builder.BuilderException:<br>
Error parsing <strong><span style="color:rgb(255,0,0);line-height:1.5;">SQL Mapper Configuration.</span></strong> Cause: org.apache.ibatis.builder.BuilderException: Error creating document instance.  <br>
Cause: org.xml.sax.SAXParseException; lineNumber: 18; columnNumber: 142; 元素内容必须由格式正确的字符数据或标记组成。</pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">从上面错误可看出，若不能正确地创建sqlSessionFactory，<strong>有可能是 mybatisConfig.xml配置有错</strong>，而 mybatisConfig.xml里面 通过 &lt;mapper&gt;标签指定了 xxxMapper.xml SQL Mapper Configuration。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">因此，<strong>也要检查&nbsp;xxxMapper.xml 中写的 SQL 语句 是否正确</strong>。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">用户程序根据SqlSession来获取RoleMapper（第20行），然后调用里面定义的方法操作数据库，从这里也可以看出，<strong>我们只需要定义好接口，在XML配置文件中定义SQL操作语句，就可以访问数据库了</strong>：代码如下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <img class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" style="border:0px;vertical-align:middle;">&nbsp;
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.5;">View Code</span> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">Mybatis配置数据库连接: mybatisConfig.xml</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,128,128);line-height:1.5;"> 1</span> <span style="color:rgb(0,0,255);line-height:1.5;">&lt;?</span><span style="color:rgb(255,0,255);line-height:1.5;">xml version="1.0" encoding="UTF-8"</span><span style="color:rgb(0,0,255);line-height:1.5;">?&gt;</span>
<span style="color:rgb(0,128,128);line-height:1.5;"> 2</span> <span style="color:rgb(0,0,255);line-height:1.5;">&lt;!</span><span style="color:rgb(255,0,255);line-height:1.5;">DOCTYPE configuration PUBLIC "-//mybatis.org//DTD Config 3.0//EN"    
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 3</span> <span style="color:rgb(255,0,255);line-height:1.5;">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
<span style="color:rgb(0,128,128);line-height:1.5;"> 4</span> <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">configuration</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
<span style="color:rgb(0,128,128);line-height:1.5;"> 5</span>     <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">properties </span><span style="color:rgb(255,0,0);line-height:1.5;">resource</span><span style="color:rgb(0,0,255);line-height:1.5;">="jdbc.properties"</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
<span style="color:rgb(0,128,128);line-height:1.5;"> 6</span>     <span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">properties</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
<span style="color:rgb(0,128,128);line-height:1.5;"> 7</span>     <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">typeAliases</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
<span style="color:rgb(0,128,128);line-height:1.5;"> 8</span>         <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">typeAlias </span><span style="color:rgb(255,0,0);line-height:1.5;">alias</span><span style="color:rgb(0,0,255);line-height:1.5;">="Role"</span><span style="color:rgb(255,0,0);line-height:1.5;"> type</span><span style="color:rgb(0,0,255);line-height:1.5;">="chapter2.pojo.Role"</span> <span style="color:rgb(0,0,255);line-height:1.5;">/&gt;</span>
<span style="color:rgb(0,128,128);line-height:1.5;"> 9</span>     <span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">typeAliases</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
<span style="color:rgb(0,128,128);line-height:1.5;">10</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">11</span>     <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">environments </span><span style="color:rgb(255,0,0);line-height:1.5;">default</span><span style="color:rgb(0,0,255);line-height:1.5;">="development"</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
<span style="color:rgb(0,128,128);line-height:1.5;">12</span>         <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">environment </span><span style="color:rgb(255,0,0);line-height:1.5;">id</span><span style="color:rgb(0,0,255);line-height:1.5;">="development"</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
<span style="color:rgb(0,128,128);line-height:1.5;">13</span>             <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">transactionManager </span><span style="color:rgb(255,0,0);line-height:1.5;">type</span><span style="color:rgb(0,0,255);line-height:1.5;">="JDBC"</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
<span style="color:rgb(0,128,128);line-height:1.5;">14</span>                 <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">property </span><span style="color:rgb(255,0,0);line-height:1.5;">name</span><span style="color:rgb(0,0,255);line-height:1.5;">="autoCommit"</span><span style="color:rgb(255,0,0);line-height:1.5;"> value</span><span style="color:rgb(0,0,255);line-height:1.5;">="false"</span> <span style="color:rgb(0,0,255);line-height:1.5;">/&gt;</span>
<span style="color:rgb(0,128,128);line-height:1.5;">15</span>             <span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">transactionManager</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
<span style="color:rgb(0,128,128);line-height:1.5;">16</span>             <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">dataSource </span><span style="color:rgb(255,0,0);line-height:1.5;">type</span><span style="color:rgb(0,0,255);line-height:1.5;">="POOLED"</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
<span style="color:rgb(0,128,128);line-height:1.5;">17</span>                 <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">property </span><span style="color:rgb(255,0,0);line-height:1.5;">name</span><span style="color:rgb(0,0,255);line-height:1.5;">="driver"</span><span style="color:rgb(255,0,0);line-height:1.5;"> value</span><span style="color:rgb(0,0,255);line-height:1.5;">="${driver}"</span> <span style="color:rgb(0,0,255);line-height:1.5;">/&gt;</span>
<span style="color:rgb(0,128,128);line-height:1.5;">18</span>                 <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">property </span><span style="color:rgb(255,0,0);line-height:1.5;">name</span><span style="color:rgb(0,0,255);line-height:1.5;">="url"</span><span style="color:rgb(255,0,0);line-height:1.5;"> value</span><span style="color:rgb(0,0,255);line-height:1.5;">="${url}"</span> <span style="color:rgb(0,0,255);line-height:1.5;">/&gt;</span>
<span style="color:rgb(0,128,128);line-height:1.5;">19</span>                 <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">property </span><span style="color:rgb(255,0,0);line-height:1.5;">name</span><span style="color:rgb(0,0,255);line-height:1.5;">="username"</span><span style="color:rgb(255,0,0);line-height:1.5;"> value</span><span style="color:rgb(0,0,255);line-height:1.5;">="${username}"</span> <span style="color:rgb(0,0,255);line-height:1.5;">/&gt;</span>
<span style="color:rgb(0,128,128);line-height:1.5;">20</span>                 <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">property </span><span style="color:rgb(255,0,0);line-height:1.5;">name</span><span style="color:rgb(0,0,255);line-height:1.5;">="password"</span><span style="color:rgb(255,0,0);line-height:1.5;"> value</span><span style="color:rgb(0,0,255);line-height:1.5;">="${password}"</span> <span style="color:rgb(0,0,255);line-height:1.5;">/&gt;</span>
<span style="color:rgb(0,128,128);line-height:1.5;">21</span>             <span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">dataSource</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
<span style="color:rgb(0,128,128);line-height:1.5;">22</span>         <span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">environment</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
<span style="color:rgb(0,128,128);line-height:1.5;">23</span>     <span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">environments</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
<span style="color:rgb(0,128,128);line-height:1.5;">24</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">25</span>     <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">mappers</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
<span style="color:rgb(0,128,128);line-height:1.5;">26</span>         <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">mapper </span><span style="color:rgb(255,0,0);line-height:1.5;">resource</span><span style="color:rgb(0,0,255);line-height:1.5;">="chapter2\mapper\RoleMapper.xml"</span> <span style="color:rgb(0,0,255);line-height:1.5;">/&gt;</span>
<span style="color:rgb(0,128,128);line-height:1.5;">27</span>     <span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">mappers</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
<span style="color:rgb(0,128,128);line-height:1.5;">28</span> <span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">configuration</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">Mybatis的XML配置文件定义了许多配置标签：比如 &lt;configuration&gt; &lt;properties&gt; &lt;settings&gt; &lt;typeAliases&gt; ....等标签。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="color:rgb(255,0,0);"><strong>这些标签是有层次结构的，顺序不能乱。比如，&lt;properties&gt;标签应该放在&nbsp;&lt;typeAliases&gt; 标签前面。</strong></span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">上面的第5行&lt;properties&gt;标签 通过<strong>&nbsp;&nbsp;resource 指定一个外部jdbc配置文件</strong>，这样在16-21行配置 数据源 的时候，就可以使用 变量 来引用 外部jdbc配置文件中定义的值了，从而方便切换数据库配置。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">外部jdbc配置文件如下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre><span style="line-height:1.5;">driver=com.mysql.jdbc.Driver
url=jdbc:mysql://localhost:3306/test
username=root
password=xxxx</span></pre>
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">下面来重点解释：操作数据库的XML配置文件RoleMapper.xml 和 接口RoleMapper 以及POJO类RoleMapper之间的一些关系：</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">RoleMapper&nbsp;接口中定义的getRole方法：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre><span style="color:rgb(0,0,255);line-height:1.5;">public</span> Role getRole(Long id);</pre>
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">RoleMapper.xml配置文件中与该方法对应的SQL语句：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre>    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">select </span><span style="color:rgb(255,0,0);line-height:1.5;">id</span><span style="color:rgb(0,0,255);line-height:1.5;">="getRole"</span><span style="color:rgb(255,0,0);line-height:1.5;"> parameterType</span><span style="color:rgb(0,0,255);line-height:1.5;">="long"</span><span style="color:rgb(255,0,0);line-height:1.5;"> resultType</span><span style="color:rgb(0,0,255);line-height:1.5;">="Role"</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span><span style="line-height:1.5;">
        select id, role_name as roleName, note from t_role where id = #{id}
    </span><span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">select</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span></pre>
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">id 用来唯一标明这条 select 语句。它与RoleMapper.xml中 &lt;mapper namespace&gt;标签内容组合在一起，唯一标识了 这条 select 操作语句。<em>这里的resultType="Role"，"Role"是在mybatisConfig.xml中定义的别名。</em></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">mapper </span><span style="color:rgb(255,0,0);line-height:1.5;">namespace</span><span style="color:rgb(0,0,255);line-height:1.5;">="chapter2.mapper.RoleMapper"</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span><span style="line-height:1.5;">

public Role getRole(Long id);

</span><span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">select </span><span style="color:rgb(255,0,0);line-height:1.5;">id</span><span style="color:rgb(0,0,255);line-height:1.5;">="getRole"</span><span style="color:rgb(255,0,0);line-height:1.5;"> parameterType</span><span style="color:rgb(0,0,255);line-height:1.5;">="long"</span><span style="color:rgb(255,0,0);line-height:1.5;"> resultType</span><span style="color:rgb(0,0,255);line-height:1.5;">="Role"</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span><span style="line-height:1.5;">


id 的值getRole 就是接口RoleMapper中 定义的 getRole方法名
parameterType 就是getRole方法的参数类型
resultType 就是执行SQL语句后返回的结果，把结果 封装 成POJO类 Role 类型---这也是getRole方法的返回类型。而方法的参数 会传递给#{id}</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="color:rgb(255,0,0);font-size:16px;"><strong>几种传 多个参数 给SQL语句的方法：</strong></span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>一，通过Map对象传参数</strong></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">RoleMapper中定义的findRoleByMap方法</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre>    <span style="color:rgb(0,0,255);line-height:1.5;">public</span> List&lt;Role&gt; findRoleByMap(Map&lt;String, String&gt; params);</pre>
   </div> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre>    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">select </span><span style="color:rgb(255,0,0);line-height:1.5;">id</span><span style="color:rgb(0,0,255);line-height:1.5;">="findRoleByMap"</span><span style="color:rgb(255,0,0);line-height:1.5;"> parameterType</span><span style="color:rgb(0,0,255);line-height:1.5;">="map"</span><span style="color:rgb(255,0,0);line-height:1.5;"> resultMap</span><span style="color:rgb(0,0,255);line-height:1.5;">="roleMap"</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span><span style="line-height:1.5;">
        select id,role_name,note from t_role
        where role_name like concat('%', #{roleName},'%')
        and note like concat('%',#{note},'%')
    </span><span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">select</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span></pre>
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">当我们需要根据多个 参数 查找数据库时，且查找的结果也可能返回多条记录时，就使用上面的配置。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">paramterType="map"，传入一个map对象作为select语句的参数，其中map中的每个元素的key 对应 while子句中的<span style="text-decoration:underline;"><span style="color:rgb(0,0,255);">#{roleName}</span></span>，<span style="text-decoration:underline;"><span style="color:rgb(0,0,255);">#{note}</span></span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">由于这里的while子句 只根据 两个参数 来查询，<strong>因此map的长度为2</strong>. 而map的value，则是 查询的条件的值。</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre>            Map&lt;String, String&gt; paramsMap = <span style="color:rgb(0,0,255);line-height:1.5;">new</span> HashMap&lt;&gt;<span style="line-height:1.5;">();
            paramsMap.put(</span>"<span style="color:rgb(0,0,255);line-height:1.5;">roleName</span>", "<span style="color:rgb(255,0,0);line-height:1.5;">me</span>");<span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">value是要满足的条件值   while note = "me"</span>
            paramsMap.put("<span style="color:rgb(0,0,255);line-height:1.5;">note</span>", "<span style="color:rgb(255,0,0);line-height:1.5;">no</span>");<span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">Key与sql语句中的 #{note} #{roleName}一致</span>
            List&lt;Role&gt; result = roleMapper.findRoleByMap(paramsMap);</pre>
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">select id,role_name,note from t_role &nbsp; where role_name like concat('%', ?,'%') &nbsp; and note like concat('%',?,'%')</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">比如：select id,role_name,note from t_role &nbsp; where&nbsp;<span style="text-decoration:underline;"><span style="color:rgb(0,0,255);">role_name</span></span>&nbsp;like concat("<span style="color:rgb(255,0,0);">me</span>") &nbsp; and&nbsp;<span style="text-decoration:underline;"><span style="color:rgb(0,0,255);">note</span>&nbsp;</span>like concat("<span style="color:rgb(255,0,0);">no</span>")</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">resultMap指明了返回的“结果”的形式：resultMap=<span style="color:rgb(255,0,0);"><strong>roleMap</strong></span>。resultMap的定义如下:(可理解为：resultMap的key是 属性名或者字段名，而value则是 相应的 结果值)</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre><span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">resultMap </span><span style="color:rgb(255,0,0);line-height:1.5;">type</span><span style="color:rgb(0,0,255);line-height:1.5;">="chapter2.pojo.Role"</span><span style="color:rgb(255,0,0);line-height:1.5;"> id</span><span style="color:rgb(0,0,255);line-height:1.5;">="roleMap"</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
<span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">id </span><span style="color:rgb(255,0,0);line-height:1.5;">property</span><span style="color:rgb(0,0,255);line-height:1.5;">="id"</span><span style="color:rgb(255,0,0);line-height:1.5;"> column</span><span style="color:rgb(0,0,255);line-height:1.5;">="id"</span><span style="color:rgb(0,0,255);line-height:1.5;">/&gt;</span><span style="color:rgb(0,128,0);line-height:1.5;">&lt;!--</span><span style="color:rgb(0,128,0);line-height:1.5;"> primary key </span><span style="color:rgb(0,128,0);line-height:1.5;">--&gt;</span>
<span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">result </span><span style="color:rgb(255,0,0);line-height:1.5;">property</span><span style="color:rgb(0,0,255);line-height:1.5;">="roleName"</span><span style="color:rgb(255,0,0);line-height:1.5;"> column</span><span style="color:rgb(0,0,255);line-height:1.5;">="role_name"</span><span style="color:rgb(0,0,255);line-height:1.5;">/&gt;</span><span style="color:rgb(0,128,0);line-height:1.5;">&lt;!--</span><span style="color:rgb(0,128,0);line-height:1.5;"> 普通列的映射关系 </span><span style="color:rgb(0,128,0);line-height:1.5;">--&gt;</span>
<span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">result </span><span style="color:rgb(255,0,0);line-height:1.5;">property</span><span style="color:rgb(0,0,255);line-height:1.5;">="note"</span><span style="color:rgb(255,0,0);line-height:1.5;"> column</span><span style="color:rgb(0,0,255);line-height:1.5;">="note"</span><span style="color:rgb(0,0,255);line-height:1.5;">/&gt;</span>
<span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">resultMap</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span></pre>
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;id property="id" column="id" 表明&nbsp;<span style="color:rgb(255,0,0);"><strong>id 是 t_role表的主键</strong></span>，主键的列名是 "id"</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&lt;result property="roleName" colum="role_name"/&gt; 表明：roleName是POJO类的属性名，"role_name"是数据库表t_role的列名，将二者对应起来。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>二，使用参数注解的方式传递多个参数</strong></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">或者使用更“易懂“的映射方法：----参数注解</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">RoleMapper接口里面定义的方法：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre>    <span style="color:rgb(0,0,255);line-height:1.5;">public</span> List&lt;Role&gt; findRoleByAnnotation(@Param("roleName")String roleName, @Param("note")String note);</pre>
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">RoleMapper.xml配置文件里面的定义的SQL语句：<span style="color:rgb(255,102,0);">这里就没有 paramterType 来定义查询的参数了</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre>        <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">select </span><span style="color:rgb(255,0,0);line-height:1.5;">id</span><span style="color:rgb(0,0,255);line-height:1.5;">="findRoleByAnnotation"</span><span style="color:rgb(255,0,0);line-height:1.5;">resultMap</span><span style="color:rgb(0,0,255);line-height:1.5;">="roleMap"</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span><span style="line-height:1.5;">
        select id,role_name,note from t_role
        where role_name like concat('%', #{roleName},'%')
        and note like concat('%',#{note},'%')
    </span><span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">select</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span></pre>
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">客户端 调用方法：这里，<span style="color:rgb(255,102,0);">就可以不用HashMap封装多个待查询的参数了。</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre>List&lt;Role&gt; res = roleMapper.findRoleByAnnotation("me", "no"<span style="line-height:1.5;">);
</span><span style="color:rgb(0,0,255);line-height:1.5;">for</span><span style="line-height:1.5;"> (Role role2 : res) {
    System.out.println(role2);
    }</span></pre>
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>三，使用JAVA Bean对象传递参数：</strong></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">RoleMapper.xml配置文件里面的定义的SQL语句:</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">select </span><span style="color:rgb(255,0,0);line-height:1.5;">id</span><span style="color:rgb(0,0,255);line-height:1.5;">="findRoleByParam"</span><span style="color:rgb(255,0,0);line-height:1.5;"> parameterType</span><span style="color:rgb(0,0,255);line-height:1.5;">="chapter2.pojo.RoleParam"</span><span style="color:rgb(255,0,0);line-height:1.5;">
        resultMap</span><span style="color:rgb(0,0,255);line-height:1.5;">="roleMap"</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span><span style="line-height:1.5;">
        select id,role_name,note from t_role
        where role_name like
        concat('%', #{roleName},'%')
        and note like concat('%',#{note},'%')
    </span><span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">select</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">RoleMapper.java接口方法：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre>    <span style="color:rgb(0,0,255);line-height:1.5;">public</span> List&lt;Role&gt; findRoleByParam(RoleParam role);</pre>
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">客户端调用执行：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre>            RoleParam rp = <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> RoleParam();
            rp.setNote(</span>"note"<span style="line-height:1.5;">);
            rp.setRoleName(</span>"test"<span style="line-height:1.5;">);
            List</span>&lt;Role&gt; roles = roleMapper.findRoleByParam(rp);</pre>
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="color:rgb(255,0,0);font-size:16px;"><strong>批量插入操作：</strong></span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">RoleMapper.xml配置文件里面的定义的SQL语句:</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">insert </span><span style="color:rgb(255,0,0);line-height:1.5;">id</span><span style="color:rgb(0,0,255);line-height:1.5;">="insertBatch"</span><span style="color:rgb(255,0,0);line-height:1.5;">  useGeneratedKeys</span><span style="color:rgb(0,0,255);line-height:1.5;">="true"</span><span style="color:rgb(255,0,0);line-height:1.5;"> parameterType</span><span style="color:rgb(0,0,255);line-height:1.5;">="java.util.List"</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span><span style="line-height:1.5;">
        insert into t_role(role_name, note)
        values
        </span><span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">foreach </span><span style="color:rgb(255,0,0);line-height:1.5;">collection</span><span style="color:rgb(0,0,255);line-height:1.5;">="list"</span><span style="color:rgb(255,0,0);line-height:1.5;"> item</span><span style="color:rgb(0,0,255);line-height:1.5;">="item"</span><span style="color:rgb(255,0,0);line-height:1.5;"> index</span><span style="color:rgb(0,0,255);line-height:1.5;">="index"</span><span style="color:rgb(255,0,0);line-height:1.5;">
            separator</span><span style="color:rgb(0,0,255);line-height:1.5;">=","</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span><span style="line-height:1.5;">
            (#{item.roleName},#{item.note})
        </span><span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">foreach</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
    <span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">insert</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">useGeneratedKeys="true" 表明使用数据库表中自带的主键自增策略。在文章所述的t_role表的结构中， id 是自增的主键，但是这里的批量插入操作，并不需要显示的插入 id 的值。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">待插入的每条记录值 放在 java.util.List 对象中保存，通过 foreach 循环遍历，"item"代表遍历到的每条记录---即每个Role对象， 通过 #{item.roleName} 和 #{item.note} 取出Role对象属性值---即每个表的字段值。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><br> RoleMapper.java接口方法：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre>    <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span> insertBatch(List&lt;Role&gt; roleList);</pre>
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">客户端调用执行：（记得最终 调用 commit() 方法进行提交）</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);"> 
    <div class="cnblogs_code_toolbar" style="font-family:'Courier New';font-size:12px;">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>            sqlSession =<span style="line-height:1.5;"> SqlSessionFactoryUtil.openSqlSession();
            RoleMapper roleMapper </span>= sqlSession.getMapper(RoleMapper.<span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;">);
            
            Role role </span>= <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> Role();
            role.setRoleName(</span>"testName"<span style="line-height:1.5;">);
            role.setNote(</span>"testNote"<span style="line-height:1.5;">);
            
            Role role2 </span>= <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> Role();
            role2.setRoleName(</span>"xx"<span style="line-height:1.5;">);
            role2.setNote(</span>"notexx"<span style="line-height:1.5;">);
            
            List</span>&lt;Role&gt; roleList = <span style="color:rgb(0,0,255);line-height:1.5;">new</span> ArrayList&lt;&gt;<span style="line-height:1.5;">();
            roleList.add(role2);
            roleList.add(role2);
            
           <span style="color:rgb(255,0,0);line-height:1.5;"> roleMapper.insertBatch(roleList);</span>
            System.out.println(</span>"insert finished"<span style="line-height:1.5;">);
          <span style="color:rgb(255,0,0);line-height:1.5;"> sqlSession.commit();</span></span></pre> 
    <pre><span style="line-height:1.5;"><span style="line-height:1.5;"></span></span></pre> 
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
