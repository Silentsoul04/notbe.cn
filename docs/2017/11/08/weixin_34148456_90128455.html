<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>GMap.Net开发之在WinForm和WPF中使用GMap.Net地图插件 « NotBeCN</title>
  <meta name="description" content="                 GMap.NET是什么？    来看看它的官方说明：GMap.NET is great and Powerful, Free, cross platform, open source .NET control. Enable use routing, geocoding, dir...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/08/weixin_34148456_90128455.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">GMap.Net开发之在WinForm和WPF中使用GMap.Net地图插件</h1>
    <p class="post-meta">Nov 8, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><span style="font-size:14px;"><strong><br></strong></span></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><span style="font-size:14px;"><strong>GMap.NET是什么？</strong></span></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><span style="font-size:14px;">来看看它的官方说明：GMap.NET is great and Powerful, Free, cross platform, open source .NET control. Enable use routing, geocoding, directions and maps from Coogle, Yahoo!, Bing, OpenStreetMap, ArcGIS, Pergo, SigPac, Yendux, Mapy.cz, Maps.lt, iKarte.lv, NearMap, OviMap, CloudMade, WikiMapia, MapQuest in Windows Forms &amp; Presentation, supports caching and runs on windows mobile!</span></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><span style="font-size:14px;">GMap.NET是一个强大、免费、跨平台、开源的.NET控件，它在Windows Forms 和WPF环境中能够使用来自Google, Yahoo!, Bing, OpenStreetMap, ArcGIS, Pergo, SigPac等地图，并可以实现寻找路径、地理编码以及地图展示功能，并支持缓存和运行在Mobile环境中。</span></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><span style="font-size:14px;">项目主页：<a href="https://greatmaps.codeplex.com/" rel="nofollow" style="color:rgb(0,0,0);">https://greatmaps.codeplex.com/</a></span></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><span style="font-size:14px;"><strong>如何在WinForm中使用GMap.Net</strong></span></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><span style="font-size:14px;">下载GMap.Net，我下载的版本：greatmaps_81b71bf30091，编译三个核心项目：</span></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><span style="font-size:14px;">GMap.Net.Core：核心DLL</span></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><span style="font-size:14px;">GMap.Net.WindowsForms：WinForm中使用的DLL</span></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><span style="font-size:14px;">GMap.NET.WindowsPresentation：WPF中使用的DLL</span></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><span style="font-size:14px;">在WinForm项目中使用GMap：</span></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><span style="font-size:14px;">1、新建一个Visual C# 的Windows窗口程序。添加对GMap.Net.Core.DLL和GMap.Net.WindowsForms.DLL的引用。</span></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><span style="font-size:14px;">2、在项目中添加一个UserControl，这里取名为MapControl，修改这个UserControl，使其继承于GMapControl，这就是展示地图的控件。修改如下：</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System.Collections.Generic;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System.ComponentModel;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System.Drawing;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System.Data;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System.Linq;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System.Text;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System.Windows.Forms;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> GMap.NET.WindowsForms;

</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">namespace</span><span style="font-size:12px;line-height:1.5;"> GMapWinFormDemo
{
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">partial</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">class</span><span style="font-size:12px;line-height:1.5;"> MapControl : GMapControl
    {
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span><span style="font-size:12px;line-height:1.5;"> MapControl()
        {
            InitializeComponent();
        }
    }
}</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><span style="font-size:14px;">3、编译项目，在我们的Form设计窗口下，在工具箱中（tool box）里就可以看到这个MapControl，将这个MapControl加到Form中。</span></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><span style="font-size:14px;">4、在主Form中添加相关的代码如下</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System.Collections.Generic;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System.ComponentModel;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System.Data;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System.Drawing;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System.Linq;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System.Text;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System.Windows.Forms;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> GMap.NET;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> GMap.NET.WindowsForms;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> GMap.NET.MapProviders;<br>
using GMap.NET.WindowsForms.Markers;

</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">namespace</span><span style="font-size:12px;line-height:1.5;"> GMapDemo
{
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">partial</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">class</span><span style="font-size:12px;line-height:1.5;"> MapForm : Form
    {
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">private</span> GMapOverlay markersOverlay = <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">new</span> GMapOverlay(<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">markers</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span>); <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">放置marker的图层</span>

        <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span><span style="font-size:12px;line-height:1.5;"> MapForm()
        {
            InitializeComponent();

            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">try</span><span style="font-size:12px;line-height:1.5;">
            {
                System.Net.IPHostEntry e </span>= System.Net.Dns.GetHostEntry(<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"ditu</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">.google.cn</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">);
            }
            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">catch</span><span style="font-size:12px;line-height:1.5;">
            {
                mapControl.Manager.Mode </span>=<span style="font-size:12px;line-height:1.5;"> AccessMode.CacheOnly;
                MessageBox.Show(</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">No internet connection avaible, going to CacheOnly mode.</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">, </span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">GMap.NET Demo</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">, MessageBoxButtons.OK, MessageBoxIcon.Warning);
            }

            mapControl.CacheLocation </span>= Environment.CurrentDirectory + <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">\\GMapCache\\</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span>; <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">缓存位置</span>
            mapControl.MapProvider = GMapProviders.GoogleChinaMap; <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">google china 地图</span>
            mapControl.MinZoom = <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">2</span>;  <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">最小比例</span>
            mapControl.MaxZoom = <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">24</span>; <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">最大比例</span>
            mapControl.Zoom = <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">10</span>;     <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">当前比例</span>
            mapControl.ShowCenter = <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">false</span>; <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">不显示中心十字点</span>
            mapControl.DragButton = System.Windows.Forms.MouseButtons.Left; <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">左键拖拽地图</span>
            mapControl.Position = <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">new</span> PointLatLng(<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">32.064</span>,<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">118.704</span>); <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">地图中心位置：南京</span>
<span style="font-size:12px;line-height:1.5;">
            mapControl.Overlays.Add(markersOverlay);
            
            mapControl.MouseClick </span>+= <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">new</span><span style="font-size:12px;line-height:1.5;"> MouseEventHandler(mapControl_MouseClick);
        }
        
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">void</span> mapControl_MouseClick(<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">object</span><span style="font-size:12px;line-height:1.5;"> sender, MouseEventArgs e)
        {
            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">if</span> (e.Button ==<span style="font-size:12px;line-height:1.5;"> System.Windows.Forms.MouseButtons.Right)
            {
                PointLatLng point </span>=<span style="font-size:12px;line-height:1.5;"> mapControl.FromLocalToLatLng(e.X, e.Y);
                GMapMarker marker </span>= <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">new</span><span style="font-size:12px;line-height:1.5;"> GMarkerGoogle(point, GMarkerGoogleType.green);
                markersOverlay.Markers.Add(marker);
            }
        }
    }</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">5、编译、运行项目就可以看到地图，这里使用的是在线的Google中国的地图，地图控件的几个主要属性：</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><span style="font-size:14px;">MapProvider：地图服务的提供者。</span></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><span style="font-size:14px;">MinZoom：最小缩放，最小可为1。</span></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><span style="font-size:14px;">MaxZoom：最大缩放，最大为24.</span></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><span style="font-size:14px;">Zoom：当前缩放。</span></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><span style="font-size:14px;">ShowCenter：是否显示中心点（最好为false，否则地图中间会有一个红色的十字）。</span></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><span style="font-size:14px;">DragButton：哪个键拖动地图。</span></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><span style="font-size:14px;">Position：地图中心点位置。</span></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><span style="font-size:14px;">地图显示如下，支持左键拖动，放大缩小，可以显示左键的点击经纬度。</span></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><img src="https://images0.cnblogs.com/blog/434101/201312/07211055-97bc37170bd049cc8446502294aedda5.x-png" alt="" style="border:none;"></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><strong><span style="font-size:14px;">如何在WPF中使用GMap.Net</span></strong></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><span style="font-size:14px;">1、新建一个Visual C# 的WPF程序。添加对GMap.Net.Core.DLL和GMap.NET.WindowsPresentation.DLL的引用。</span></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><span style="font-size:14px;">2、由于WPF的UserControl不能修改继承的基类，所以添加一个新的类，为MapControl.cs，代码如下：</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System.Collections.Generic;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System.Linq;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System.Text;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> GMap.NET.WindowsPresentation;

</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">namespace</span><span style="font-size:12px;line-height:1.5;"> GMapWPFDemo
{
    </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">class</span><span style="font-size:12px;line-height:1.5;"> MapControl : GMapControl
    {
    }
}</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><span style="font-size:14px;">只需要继承GMapControl就行了，基本功能都可以由GMapControl提供。</span></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><span style="font-size:14px;">3、在我们的MainWindow.xaml中，添加项目的namespace：xmlns:src="clr-namespace:GMapWPFDemo"，在XML代码中添加对MapControl.cs的使用：</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">Window </span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">x:Class</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="GMapWPFDemo.MainWindow"</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">
        xmlns</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">
        xmlns:x</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="http://schemas.microsoft.com/winfx/2006/xaml"</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">
        xmlns:src</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="clr-namespace:GMapWPFDemo"</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">
        Title</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="MainWindow"</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;"> Height</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="410"</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;"> Width</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="618"</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;</span>
    <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">Grid</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;</span>
            <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">GroupBox </span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">Name</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="mapgroup"</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;"> VerticalContentAlignment</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="Stretch"</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;"> HorizontalContentAlignment</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="Stretch"</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;</span>
            <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">src:MapControl </span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;">x:Name</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="mapControl"</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;"> Zoom</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="13"</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;"> MaxZoom</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="24"</span><span style="color:rgb(255,0,0);font-size:12px;line-height:1.5;"> MinZoom</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">="1"</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">/&gt;</span>
            <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">GroupBox</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;</span>
    <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">Grid</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;</span>
<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">Window</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">&gt;</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><span style="font-size:14px;">4、在MainWindow中添加相关的代码如下：</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System.Collections.Generic;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System.Linq;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System.Text;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System.Windows;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System.Windows.Controls;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System.Windows.Data;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System.Windows.Documents;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System.Windows.Input;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System.Windows.Media;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System.Windows.Media.Imaging;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System.Windows.Navigation;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> System.Windows.Shapes;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> GMap.NET;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> GMap.NET.MapProviders;
</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">using</span><span style="font-size:12px;line-height:1.5;"> GMap.NET.WindowsPresentation;

</span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">namespace</span><span style="font-size:12px;line-height:1.5;"> GMapWPFDemo
{
    </span><span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">///</span> <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">&lt;summary&gt;</span>
    <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">///</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;"> MainWindow.xaml 的交互逻辑
    </span><span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">///</span> <span style="color:rgb(128,128,128);font-size:12px;line-height:1.5;">&lt;/summary&gt;</span>
    <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">partial</span> <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">class</span><span style="font-size:12px;line-height:1.5;"> MainWindow : Window
    {
        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">public</span><span style="font-size:12px;line-height:1.5;"> MainWindow()
        {
            InitializeComponent();

            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">try</span><span style="font-size:12px;line-height:1.5;">
            {
                System.Net.IPHostEntry e </span>= System.Net.Dns.GetHostEntry(<span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"ditu</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">.google.cn</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">);
            }
            </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">catch</span><span style="font-size:12px;line-height:1.5;">
            {
                mapControl.Manager.Mode </span>=<span style="font-size:12px;line-height:1.5;"> AccessMode.CacheOnly;
                MessageBox.Show(</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">No internet connection avaible, going to CacheOnly mode.</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span>, <span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">GMap.NET Demo</span><span style="color:rgb(128,0,0);font-size:12px;line-height:1.5;">"</span><span style="font-size:12px;line-height:1.5;">, MessageBoxButton.OK, MessageBoxImage.Warning);
            }

            mapControl.MapProvider </span>= GMapProviders.GoogleChinaMap; <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">google china 地图</span>
            mapControl.MinZoom = <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">2</span>;  <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">最小缩放</span>
            mapControl.MaxZoom = <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">17</span>; <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">最大缩放</span>
            mapControl.Zoom = <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">5</span>;     <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">当前缩放</span>
            mapControl.ShowCenter = <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">false</span>; <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">不显示中心十字点</span>
            mapControl.DragButton = MouseButton.Left; <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">左键拖拽地图</span>
            mapControl.Position = <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">new</span> PointLatLng(<span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">32.064</span>, <span style="color:rgb(128,0,128);font-size:12px;line-height:1.5;">118.704</span>); <span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">//</span><span style="color:rgb(0,128,0);font-size:12px;line-height:1.5;">地图中心位置：南京</span>
<span style="font-size:12px;line-height:1.5;">
            mapControl.MouseLeftButtonDown </span>+= <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">new</span><span style="font-size:12px;line-height:1.5;"> MouseButtonEventHandler(mapControl_MouseLeftButtonDown);
        }

        </span><span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">void</span> mapControl_MouseLeftButtonDown(<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">object</span><span style="font-size:12px;line-height:1.5;"> sender, MouseButtonEventArgs e)
        {
            Point clickPoint </span>=<span style="font-size:12px;line-height:1.5;"> e.GetPosition(mapControl);
            PointLatLng point </span>= mapControl.FromLocalToLatLng((<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span>)clickPoint.X, (<span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">int</span><span style="font-size:12px;line-height:1.5;">)clickPoint.Y);
            GMapMarker marker </span>= <span style="color:rgb(0,0,255);font-size:12px;line-height:1.5;">new</span><span style="font-size:12px;line-height:1.5;"> GMapMarker(point);
            mapControl.Markers.Add(marker);
        }</span><span style="font-size:12px;line-height:1.5;">
    }
}</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="text-decoration:underline;border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><span style="font-size:14px;">效果图如下：</span></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><img src="https://images0.cnblogs.com/blog/434101/201312/07211245-57fff1b29b1340f5b8b8116f8b948c4e.x-png" alt="" style="border:none;"></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><span style="font-size:14px;">和Winform代码差不多，一些响应事件不同，WPF的GMap中没有GMapOverlay这个“图层”的概念，所以没法加多个GMapOverlay，在GMapOverlay上再加GMapMarker（可以理解为图标标注），GMapMarker只能直接加在mapControl上面。</span></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><span style="font-size:14px;">WPF的GMapMarker可以直接实例化（WinForm中的不行），但是貌似没有默认提供的效果，而要做出一些效果，需要自己设计实现，官方Demo中已经有了一些实现，WinForm中的GMapMarker可以用GMarkerGoogle去实例化（提供的有可选的效果，也可以自己传入bitmap作为自定义的图标）。</span></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><span style="font-size:14px;">做过一段时间ArcGIS开发，由于ArcGIS的授权费用，为了节省成本，开始搞GMap.Net。。。刚开始研究，待续。。。</span></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;</p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><br></p> 
   <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><br></p> 
   <p><font color="#333333"><span style="font-size:15px;">&nbsp; &nbsp; 本文转自阿凡卢博客园博客，原文链接：http://www.cnblogs.com/luxiaoxun/p/3463250.html</span></font><span style="font-size:15px;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;">，如需转载请自行联系原作者</span></p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
