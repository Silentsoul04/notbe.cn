<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>[RHEL5企业级Linux服务攻略]--第2季 Samba服务全攻略 « NotBeCN</title>
  <meta name="description" content="                 1 Samba原理&nbsp; 1.1 Samba概述           接触Linux我们听的最多的就是Samba服务，为什么Samba应用这么广泛哈~，原因是Samba最先在Linux和Windows两个平台之间架起了一座桥梁哈，正是由于Samba的出现，我们可以在Linu...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/11/1557728836619.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">[RHEL5企业级Linux服务攻略]--第2季 Samba服务全攻略</h1>
    <p class="post-meta">Nov 11, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong>1 Samba原理&nbsp;<br> 1.1 Samba概述</strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    接触Linux我们听的最多的就是Samba服务，为什么Samba应用这么广泛哈~，原因是Samba最先在Linux和Windows两个平台之间架起了一座桥梁哈，正是由于Samba的出现，我们可以在Linux系统和Windows系统之间互相通信，比如拷贝文件、实现不同操作系统之间的资源共享等等，我们可以将其架设成一个功能非常强大的文件服务器，也可以将其架设成打印服务器提供本地和远程联机打印，甚至我们可以使用samba Server完全取代NT/2K/2K3中的域控制器，做域管理工作，使用也非常方便滴哈~既然samba这样滴强大哈，我们还不赶快来把玩一下哈~~~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong>1.2 Samba应用环境</strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <strong><font color="#ff00ff">文件和打印机共享：</font></strong>文件和打印机共享是Samba的主要功能，SMB进程实现资源共享，将文件和打印机发布到网络之中，以供用户可以访问哈。&nbsp;
    <br>
    <strong><font color="#ff00ff">身份验证和权限设置：</font></strong>smbd服务支持user mode和domain mode等身份验证和权限设置模式，通过加密方式可以保护共享的文件和打印机。&nbsp;
    <br>
    <strong><font color="#ff00ff">名称解析：</font></strong>Samba通过nmbd服务可以搭建NBNS(NetBIOS Name Service)服务器，提供名称解析，将计算机的NetBIOS名解析为IP地址。&nbsp;
    <br>
    <font color="#ff00ff"><strong>浏览服务：</strong></font>局域网中，Samba服务器可以成为本地主浏览服务器（LMB），保存可用资源列表，当使用客户端访问Windows网上邻居时，会提供浏览列表，显示共享目录、打印机等资源。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong>1.3 Samba工作原理</strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    Samba服务功能强大，这与其通信基于SMB协议有关。SMB不仅提供目录和打印机共享，还支持认证、权限设置。在早期哈，SMB运行于NBT协议（NetBIOS over TCP/IP）上，使用UDP协议的137、138及TCP协议的139端口，后期SMB经过开发，可以直接运行于TCP/IP协议上，没有额外的NBT层，使用TCP协议的445端口。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#800080">（1）Samba工作流程</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    当客户端访问服务器时，信息通过SMB协议进行传输，其工作过程可以分成四个步骤哈：
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#0080ff">步骤1：协议协商</font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    客户端在访问Samba服务器时，发送negprot指令数据包，告知目标计算机其支持的SMB类型。Samba服务器根据客户端的情况，选择最优的SMB类型，并做出回应。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --------negprot请求-------&gt;
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    客户端&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; 服务器
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --------negprot响应-------&gt;
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#0080ff">步骤2：建立连接</font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#000000">当SMB类型确认后，客户端会发送session setup指令数据包，提交帐号和密码，请求与Samba服务器建立连接，如果客户端通过身份验证，Samba服务器会对session setup报文作出回应，并为用户分配唯一的UID，在客户端与其通信时使用。</font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; --------session setup &amp;X请求-------&gt;
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    客户端&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 服务器
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; --------session setup &amp;X响应-------&gt;
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#0080ff">步骤3：访问共享资源</font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#000000">客户端访问Samba共享资源时，发送tree connect指令数据包，通知服务器需要访问的共享资源名，如果设置允许，Samba服务器会为每个客户端与共享资源连接分配TID,客户端即可访问需要的共享资源哈。</font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --------tree connect &amp;X请求-------&gt;
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    客户端&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 服务器
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --------tree connect &amp;X响应-------&gt;
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#0080ff">步骤4：断开连接</font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    共享使用完毕，客户端向服务器发送tree disconnect报文关闭共享，与服务器断开连接。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; --------tree disconnect请求-------&gt;
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    客户端 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 服务器
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;--------tree disconnect响应-------&gt;
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#800080"><strong>（2）Samba相关进程</strong></font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    Samba服务是由两个进程组成，分别是nmbd和smbd。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <strong><font color="#0000ff">nmbd：</font></strong>其功能是进行NetBIOS名解析，并提供浏览服务显示网络上的共享资源列表。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <strong><font color="#0000ff">smbd：</font></strong>其主要功能就是用来管理Samba服务器上的共享目录、打印机等，主要是针对网络上的共享资源进行管理的服务。当要访问服务器时，要查找共享文件，这时我们就要依靠smbd这个进程来管理数据传输哈~~~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong>2 安装Samba服务&nbsp;<br> 2.1 Samba所需软件</strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    在我们安装Samba服务之前哈，我们先来了解一下其所需要的软件包以及它们的用途哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <strong><font color="#0000ff">samba-3.0.25b-0.el5.4.i386.rpm：</font></strong>该包为Samba服务的主程序包。服务器必须安装该软件包，后面的数字为版本号（我们安装时使用的是RHEL5.1DVD版，如果是RHEL5.1CD版则该软件包位于第二张RHEL5安装光盘上）。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <font color="#0000ff"><strong>samba-client-3.0.25b-0.el5.4.i386.rpm：</strong></font>该包为Samba的客户端工具，是连接服务器和连接网上邻居的客户端工具并包含其测试工具（该软件包位于第一张RHEL5安装光盘哈~）
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <strong><font color="#0000ff">samba-common-3.0.25b-0.el5.4.i386.rpm：</font></strong>该包存放的是通用的工具和库文件，无论是服务器还是客户端都需要安装该软件包（这个软件包也位于第一张RHEL5安装光盘哈~）
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <font color="#0000ff"><strong>samba-swat-3.0.25b-0.el5.4.i386.rpm：</strong></font>当安装了这个包以后，就可以通过浏览器（比如IE等哈）来对Samba服务器进行图形化管理（这个软件包位于第三张RHEL5安装光盘哈）。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <a href="http://redking.blog.51cto.com/attachment/200812/18/27212_1229588587JIlI.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="144" alt="image" src="http://redking.blog.51cto.com/attachment/200812/18/27212_1229588591yhds.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>&nbsp;
    <br>
    <strong>2.2 Samba的安装</strong> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    建议在安装Samba服务之前，使用rpm -qa命令检测系统是否安装了Samba相关性软件包：
    <font color="#0000ff">rpm -qa |grep samba</font> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/18/27212_1229588594RQHZ.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="75" alt="image" src="http://redking.blog.51cto.com/attachment/200812/18/27212_12295885978vvT.png" width="365" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    如果系统还没有安装Samba软件包，我们可以使用rpm命令安装所需软件包。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    安装Samba主程序包：
    <font color="#0000ff">rpm -ivh samba-3.0.25b-0.el5.4.i386.rpm</font> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/18/27212_122958859743N2.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="54" alt="image" src="http://redking.blog.51cto.com/attachment/200812/18/27212_1229588598OoPt.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    其他软件包的安装方法也一样哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    安装Samba客户端工具：
    <font color="#0000ff">rpm -ivh samba-client-3.0.25b-0.el5.4.i386.rpm</font> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    提示已经安装过了哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/18/27212_1229588614AhdG.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="54" alt="image" src="http://redking.blog.51cto.com/attachment/200812/18/27212_1229588617wzdF.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    安装Samba通用工具和库文件：
    <font color="#0000ff">rpm -ivh samba-common-3.0.25b-0.el5.4.i386.rpm</font> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/18/27212_1229588620vtXD.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="54" alt="image" src="http://redking.blog.51cto.com/attachment/200812/18/27212_1229588620ZYy5.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    其实我们一开始rpm qa |grep samba命令查询时已经发现客户端工具和通用工具及库文件已经安装了哈，我们上面两步安装就可以不要执行了哈，偶主要是演示一下哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    最后我们安装Samba图形化管理工具：
    <font color="#0000ff">rpm -ivh samba-swat-3.0.25b-0.el5.4.i386.rpm</font> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/18/27212_1229588621yE0i.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="64" alt="image" src="http://redking.blog.51cto.com/attachment/200812/18/27212_1229588621kig6.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    我们发现缺少xinetd，OK,那我们安装一下哈~：
    <font color="#0000ff">rpm -ivh xinetd-2.3.14-10.el5.i386.rpm</font> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/18/27212_12295886238k61.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="54" alt="image" src="http://redking.blog.51cto.com/attachment/200812/18/27212_1229588624rSHf.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    现在我们再来安装Samba图形化管理工具：
    <font color="#0000ff">rpm -ivh samba-swat-3.0.25b-0.el5.4.i386.rpm</font> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/18/27212_1229588624vnvK.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="54" alt="image" src="http://redking.blog.51cto.com/attachment/200812/18/27212_12295886246ows.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    现在我们看到Samba图形化管理工具安装成功了哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    所有软件包安装完毕之后，我们可以使用rpm命令进行查询哈：
    <font color="#0000ff">rpm -qa | grep samba</font> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/18/27212_1229588627qd1V.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="108" alt="image" src="http://redking.blog.51cto.com/attachment/200812/18/27212_1229588627At4p.png" width="401" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong>3 Samba常规服务器配置&nbsp;&nbsp;<br></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    在Samba服务安装完毕之后，并不是直接可以使用Windows或Linux的客户端访问Samba服务器哈，我们还必须对服务器进行设置，下面需要做的操作就是说我们要告诉Samba服务器将哪些目录共享出来给客户端进行访问，并根据需要设置其他选项哈，比如添加对共享目录内容的简单描述信息和访问权限等具体设置。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    作为我们Linux系统工程师了解及熟悉Samba服务器的搭建流程是至关重要滴。 基本的Samba服务器的搭建流程主要分为四个步骤：
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    [1]、编辑主配置文件smb.conf,指定需要共享的目录，并为共享目录设置共享权限。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    [2]、在smb.conf文件中指定日志文件名称和存放路径。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    [3]、设置共享目录的本地系统权限。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    [4]、重新加载配置文件或重新启动smb服务，使用配置生效哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    为了更好地理解设定流程中每一步的作用，下面通过一个图例进行讲解哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#0000ff"><strong>Samba工作流程：</strong></font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------(1)---------&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ----------(2)----------&gt;smb.conf主配置文件
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    [客户端]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [Samba服务器]
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -------- (4)----------&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ----------(3)----------&gt;日志文件
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    (1)客户端请求访问Samba服务器上的Share共享目录。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    (2) Samba服务器接收到请求后，会查询主配置文件smb.conf，看是否共享了Share目录，如果共享了这个目录则查看客户端是否有权限访问。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    (3)Samba服务器会将本次访问信息记录在日志文件之中，日志文件的名称和路径都是需要我们设置。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    (4)如果客户端满足访问权限设置，则允许客户端进行访问。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    实际上，Samba服务器和我们的图书馆有点相似之处哈，图书馆为读者共享了图书资源，而Samba服务器共享了我们的文件数据哈。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    图书馆会有图书分类，比如科普类、文学类等，并且图书馆会对借阅的图书做限制，拥有资格的读者，才可以借阅相应的图书，当然读者访问图书馆时，图书管理员会对他们的浏览、借阅信息进行记录。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    对于Samba服务器来说，其主配置文件smb.conf记录了共享的目录列表。比如share目录，temp目录等。对于每个共享目录，需要配置相应权限，服务器会根据smb.conf文件中的设置，判断客户端是否有权限访问，只有拥有权限才可以访问服务器的资源。Samba服务器同样会对用户的行为进行记录，每一次访问的信息都会记录在日志文件中，以便我们Linux管理员查询哪些客户端访问过Samba服务器。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    我们大致讲了Samba工作流程后，下面我们将对Samba具体配置过程中遇到的重要概念进行详细讲解哈~~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong>3.1 主要配置文件smb.conf</strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    我们先从最重要的配置文件开始哦，Samba的配置文件一般就放在/etc/samba目录中，主配置文件名为smb.conf。如果把Samba服务器比喻成一个公共图书馆，那么/etc/samba目录中，那么主配置文件/etc/samba/smb.conf文件，就相当于这个图书馆的图书总目录，记录着大量的共享信息和规则，所以该文件是samba服务非常重要的核心配置文件哈，几乎绝大部分的配置文件都在该文件中进行滴。此外，在smb.conf这个配置文档中本身就含有非常丰富的说明哈，所以在我们配置之前可以先看一下这样说明性的文字。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    我们先看一下smb.conf这个文件哈：
    <font color="#0000ff">vim /etc/samba/smb.conf</font> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/18/27212_1229588627HNGe.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="161" alt="image" src="http://redking.blog.51cto.com/attachment/200812/18/27212_1229588642iXgL.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;
    <a href="http://redking.blog.51cto.com/attachment/200812/18/27212_1229588643QU3H.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="340" alt="image" src="http://redking.blog.51cto.com/attachment/200812/18/27212_1229588644uyRP.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    smb.conf配置文件有288行内容，配置也相对比较复杂哈，不过我们不用担心，Samba开发组按照功能不同，对smb.conf文件进行了分段划分，条理非常地清楚哈。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    下面我们来具体看下smb.conf的内容哈，smb.conf大致分为三个部分，我们来了解一下，其中我们经常要使用到的字段，我们将以实例解释，其他字段我们整理到字段汇总，有兴趣的可以去看下哈~~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong>1、samba配置简介</strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    smb.conf文件的开头部分为samba配置简介，告诉我们smb.conf文件的作用及相关信息。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/18/27212_1229588646Zd9P.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="340" alt="image" src="http://redking.blog.51cto.com/attachment/200812/18/27212_1229588649ZRhA.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    smb.conf中以“#”开头的为注释，为用户提供相关的配置解释信息，方便用户参考，不用修改它哈。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    smb.conf中还有以“;”开头滴，这些都是samba配置的格式范例，默认是不生效滴，可以通过去掉前面的“;”并加以修改来设置想使用的功能。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;
    <strong>2、Global Settings</strong> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    Global Settings设置为全局变量区域。那什么是全局变量哈？全局变量就是说我们只要在global时进行设置，那么该设置项目就是针对所有共享资源生效滴。这与以后我们学习的很多服务器配置文件相似哈。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    该部分以[global]开始:
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/18/27212_1229588653ADsf.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="328" alt="image" src="http://redking.blog.51cto.com/attachment/200812/18/27212_1229588661xci7.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    smb.conf配置通用格式，对相应功能进行设置：
    <strong><font color="#0000ff">字段=设定值</font></strong>&nbsp;
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    下面我们说下[global]常用字段及设置方法：
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong>1）设置工作组或域名称</strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    工作组是网络中地位平等的一组计算机，可以通过设置workgroup字段来对samba服务器所在工作组或域名进行设置。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    我们设置samba服务器的工作组为RHEL5
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/18/27212_1229588666KvIA.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="88" alt="image" src="http://redking.blog.51cto.com/attachment/200812/18/27212_1229588671LXKd.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong>2）服务器描述</strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    服务器描述实际上类似于备注信息哈，在一个工作组中，可能存在多台服务器，为了方便用户浏览，我们可以在server string配置相应描述信息，这样用户就可以通过描述信息知道自己要登录哪台服务器了啊~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    我们设置samba描述信息为“RHEL5 File Server”。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/18/27212_1229588678cRR7.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="89" alt="image" src="http://redking.blog.51cto.com/attachment/200812/18/27212_1229588682O5VU.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong>3）设置samba服务器安全模式</strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    samba服务器有share、user、server、domain和ads 五种安全模式，用来适应不同的企业服务器需求。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/18/27212_1229588685Gikr.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="196" alt="image" src="http://redking.blog.51cto.com/attachment/200812/18/27212_12295886862BYl.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong>（1）share安全级别模式</strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    客户端登录samba服务器，不需要输入用户名和密码就可以浏览samba服务器的资源，适用于公共的共享资源，安全性差，需要配合其他权限设置，保证samba服务器的安全性。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong>（2）user安全级别模式</strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    客户端登录samba服务器，需要提交合法帐号和密码，经过服务器验证才可以访问共享资源，服务器默认为此级别模式。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong>（3）server安全级别模式</strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    客户端需要将用户名和密码，提交到指定的一台samba服务器上进行验证，如果验证出现错误，客户端会用user级别访问。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong>（4）domain安全级别模式</strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    如果samba服务器加入windows域环境中，验证工作服将由windows域控制器负责，domain级别的samba服务器只是成为域的成员客户端，并不具备服务器的特性，samba早期的版本就是使用此级别登录windows域滴。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong>（5）ads安全级别模式</strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    当samba服务器使用ads安全级别加入到windows域环境中，其就具备了domain安全级别模式中所有的功能并可以具备域控制器的功能。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong>3、Share Definitions共享服务的定义</strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    Share Definitions设置对象为共享目录和打印机，如果我们想发布共享资源，需要对Share Definitions部分进行配置。Share Definitions字段非常丰富，设置灵活。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366319AMTs.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="339" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366320lIs0.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    我们先来讲下几个最常用的字段哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#ff00ff"><strong>1）设置共享名</strong></font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    共享资源发布后，必须为每个共享目录或打印机设置不同的共享名，给网络用户访问时使用，并且共享名可以与原目录名不同。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    共享名设置非常简单：
    <font color="#0000ff"><strong>[共享名]</strong></font> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    我们来看个例子，Samba服务器中有个目录为/share，需要发布该目录成为共享目录，定义共享名为public
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366320NsVl.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="206" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366321jDsH.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#ff00ff"><strong>2）共享资源描述</strong></font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    网络中存在各种共享资源，为了方便用户识别，可以为其添加备注信息，以方便用户查看时知道共享资源的内容是什么哈。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    格式：
    <font color="#0000ff"><strong>comment = 备注信息</strong></font> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    举个例子哈,samba服务器上有个/sales目录存放公司销售部的数据，为了对公司部门员工进行区分，可以添加备注信息。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366321Yord.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="100" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366321VdQg.png" width="400" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#ff00ff">3）共享路径</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    共享资源的原始完整路径，可以使用path字段进行发布，务必正确指定。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    格式：
    <strong><font color="#0000ff">path =&nbsp; 绝对地址路径</font></strong> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    samba服务器上/share/tools目录存放常用工具软件，需要发布该目录为共享，我们可以这样做。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366322MK9z.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="101" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366322RNpu.png" width="334" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#ff00ff">4）设置匿名访问</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    共享资源如果对匿名访问进行设置，可以更改public字段。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    格式：
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#0000ff">public = yes&nbsp;&nbsp;&nbsp;&nbsp; #允许匿名访问</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#0000ff">public = no&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #禁止匿名访问</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#000000">samba服务器/share共享目录允许匿名用户访问，可以这样设置。</font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366322KprP.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="100" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366323l68v.png" width="382" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#ff00ff">5）设置访问用户</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    如果共享资源存在重要数据的话，需要对访问用户审核，我们可以使用valid users字段进行设置哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    格式：
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#0000ff"><strong>valid users = 用户名</strong></font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#0000ff"><strong>valid users = @组名</strong></font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    我们来看下面一个例子哈，samba服务器/share/tech目录存放了公司技术部数据，只允许技术部员工和经理访问，技术部组为tech,经理帐号为gm
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366323oaRd.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="93" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366323g9h3.png" width="333" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#ff00ff">6）设置目录只读</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    共享目录如果限制用户的读写操作，我们可以通过readonly实现哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    格式：
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#0000ff">readonly = yes&nbsp;&nbsp;&nbsp; #只读</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#0000ff">readonly = no&nbsp;&nbsp;&nbsp;&nbsp; #读写</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    samba服务器公共目录/public存放大量共享数据，为保证目录安全我们只允许读取，禁止写入哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366323yYaa.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="111" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366324Frl7.png" width="289" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#ff00ff"><strong>7）设置目录可写</strong></font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    如果共享目录允许用户写操作，可以使用writable或write list两个字段进行设置哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    writable格式：
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#0000ff">writable = yes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #读写</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#0000ff">writable = no&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #只读</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    write list格式：
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#0000ff">write list = 用户名</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#0000ff">write list = @组名</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366324LmAt.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="340" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366324bSsh.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong>注意：</strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#ff0000"><strong>[homes]为特殊共享目录，表示用户主目录。</strong></font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#ff0000"><strong>[printers]表示共享打印机。</strong></font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong>3.2 Samba服务日志文件</strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    日志文件对于samba非常滴重要哈，它存储着客户端访问samba服务器的信息，以及samba服务的错误提示信息等，可以通过分析日志，帮助解决客户端访问和服务器维护等问题。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    在/etc/samba/smb.conf文件中，log file为设置samba日志的字段。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366325TVET.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="148" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366325FwTT.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    samba服务的日志文件默认存放在/var/log/samba/中，其中samba会为每个连接到samba服务器的计算机分别建立日志文件。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    我们启动smb服务：
    <font color="#0000ff"><strong>/etc/rc.d/init.d/smb start</strong></font> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    使用
    <font color="#0000ff"><strong>ls -a</strong></font>命令可以查看日志的所有文件。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_12303663253otV.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="151" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366326NZAp.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    其中，当samba服务器刚刚建立好后，只有两个文件，分别是
    <font color="#ff0000">nmbd.log</font>和
    <font color="#ff0000">smbd.log</font>，它们分别记录nmbd和smbd进程的运行日志。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#0000ff">nmbd.log记录nmbd进程的解析信息。&nbsp;<br> smbd.log记录用户访问samba服务器的问题，以及服务器本身的错误信息，可以通过该文件获得大部分的samba维护信息。</font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    当客户端通过网络访问samba服务器后，会自动添加客户端的相关日志。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    所以哈，我们Linux管理员可以根据这些文件来查看用户的访问情况和服务器的运行情况。另外当samba服务器工作异常时，也可以通过/var/log/samba/下的日志进行分析哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong>3.3 Samba服务密码文件</strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    samba服务器发布共享资源后，客户端访问samba服务器，需要提交用户名和密码进行身份验证，验证合格后才可以登录。samba服务为了实现客户身份验证功能，将用户名和密码信息存放在/etc/samba/smbpasswd中，在客户端访问时，将用户提交资料与smbpasswd存放的信息进行比对，如果相同，并且samba服务器其他安全设置允许，客户端与samba服务器连接才能建立成功哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    那如何建立samba帐号呢？
    <font color="#ff0000">偶在说之前先强调一点哈，samba帐号并不能直接建立滴，需要先建立Linux同名的系统帐号。</font>比如如果我们要建立一个名为michael的samba帐号，那Linux系统中必须提前存在一个同名的michael系统帐号。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    samba中添加帐号命令为smbpasswd，命令格式:
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#0000ff">smbpasswd -a 用户名</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    我们来测试下，在samba服务器中添加samba帐号redking,我们建立samba帐号之前必须先添加相对应的系统帐号，使用useradd命令建立帐号redking，然后执行passwd命令为帐号redking设置密码哈~最后我们添加redking用户的samba帐号，执行smbpasswd添加帐号redking到samba配置文件中。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366326thZJ.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="147" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366329Y8j0.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    OK，Samba帐号添加完毕哈，如果我们在添加samba帐号时输入完两次密码出错：
    <font color="#ff00ff">Failed to modify password entry for user amy</font>，就像下面这样
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366329XBXl.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="86" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366330EDdy.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    这是因为Linux本地用户里没有amy这个用户，我们在系统里面添加一下就OK了哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366330Naeg.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="195" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366331eROC.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    呵，所以哈，务必要注意在建立samba帐号之前，一定要先建立一个与samba帐号同名的系统帐号。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    我们经过上面的设置，再次访问samba共享文件时就可以使用redking或amy帐号访问了。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#ff00ff">注意：解决/etc/samba目录下没有smbpasswd文件</font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_12303663319Pv5.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="57" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366331QLay.png" width="401" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    原因：samba启用了tdbsam验证。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366331Hkj5.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="249" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366332drpg.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    解决：smb.conf文件中注释掉
    <font color="#ff0000">passdb backend = tdbsam</font>&nbsp;一行，加上
    <font color="#ff0000">smb passwd file = /etc/samba/smbpasswd</font>
    <font color="#000000">，然后保存退出。</font> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366333d0Rm.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="328" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366334Qqak.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#000000">这样再建立用户就产生了/etc/samba/smbpasswd文件了。</font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_12303663341ltQ.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="204" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366335aidq.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>&nbsp;
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    使用cat命令查看smbpasswd文件滴内容哈~：
    <strong><font color="#0000ff">cat /etc/samba/smbpasswd</font></strong> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366335jB0v.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="45" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366337VaWC.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong>3.4 Samba的启动与停止</strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#ff00ff">1）samba服务的启动</font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <font color="#0000ff"><strong>service smb start</strong></font>&nbsp;或&nbsp;
    <font color="#0000ff"><strong>/etc/rc.d/init.d/smb start</strong></font> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366337WfPE.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="104" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366338pooN.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#ff00ff">2）samba服务的停止</font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <font color="#0000ff"><strong>service smb stop</strong></font>&nbsp;或&nbsp;
    <font color="#0000ff"><strong>/etc/rc.d/init.d/smb stop</strong></font> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_12303663385dEf.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="98" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366339tLNe.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#ff00ff">3）samba服务的重启</font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <strong><font color="#0000ff">service smb restart</font></strong>&nbsp;或&nbsp;
    <strong><font color="#0000ff">/etc/rc.d/init.d/smb restart</font></strong> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366339w7iw.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="148" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366339ouEw.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#ff00ff">4）samba服务配置重新加载</font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <strong><font color="#0000ff">service smb reload</font></strong>&nbsp;或&nbsp;
    <font color="#0000ff"><strong>/etc/rc.d/init.d/smb reload</strong></font> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366340cx6n.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="72" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366340Sire.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#ff0000">注意：Linux服务中，当我们更改配置文件后，一定要记得重启服务哈，让服务重新加载配置文件，这样新的配置才可以生效哈~</font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#ff00ff">5）自动加载samba服务</font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#8000ff">chkconfig</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    我们可以使用chkconfig命令自动加载smb服务:&nbsp;
    <br>
    <strong><font color="#0000ff">chkconfig --level 3 smb&nbsp;on</font></strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <font color="#00ff40">#运行级别3自动加载</font>&nbsp;
    <br>
    <strong><font color="#0000ff">chkconfig --level 3 smb off</font></strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <font color="#00ff40">#运行级别3不自动加载</font> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366341kykx.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="122" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366341Zw7X.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#8000ff">ntsysv</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    我们还可以使用ntsysv命令利用文本图形界面对smb自动加载进行配置，如果要自动加载smb可以在其前面选中“*”，否则取消掉就不自动加载了哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366342DfcO.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="337" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366342rBGh.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong>3.5 share服务器实例及详解</strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    ok,上面已经对samba的相关性配置文件讲了个大概哈，现在我们通过实例来掌握一下samba具体使用流程来搭建samba服务器。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    如果公司现在用一个工作组Workgroup需要添加samba服务器作为文件服务器哈，并发布共享目录/share，共享名为public,这个共享目录允许所有公司员工访问。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    我们分析下哈，这个案例属于samba的基本配置，我们可以实用share安全级别模式，既然允许所有员工访问，则需要为每个用户建立一个samba帐号，那么如果公司拥有大量用户呢？1000个用户，100000个用户，一个个设置会非常滴麻烦哈，我们可以通过配置security = share来让所有用户登录时采用匿名帐户nobody访问，这样实现起来非常简单哈~~~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#ff00ff"><strong>1） 修改samba主配置文件smb.conf</strong></font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#0000ff"><strong>vim /etc/samba/smb.conf</strong></font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#ff0000"><font color="#00ff00">(1).设置samba服务器工作组名为Workgroup</font></font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#00ff00">(2).添加samba服务器注释信息为"File Server"</font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <font color="#ff0000"><font color="#00ff00">(3).设置samba安全级别为share模式，允许用户匿名访问</font></font>&nbsp;
    <br>
   </div> 
   <table border="0" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;border-collapse:collapse;color:rgb(51,51,51);">
    <tbody>
     <tr>
      <td valign="top" style="border:1px solid rgb(221,221,221);"> 
       <div>
        #================= Global Settings =======================
       </div> 
       <div>
        [global]
       </div> 
       <div>
        # ----------------------- Netwrok Related Options -------------------------&nbsp;
        <br> #&nbsp;
        <br> # workgroup = NT-Domain-Name or Workgroup-Name, eg: MIDEARTH&nbsp;
        <br> #&nbsp;
        <br> # server string is the equivalent of the NT De.ion field&nbsp;
        <br> #&nbsp;
        <br> # netbios name can be used to specify a server name not tied to the hostname&nbsp;
        <br> #&nbsp;
        <br> # Interfaces lets you configure Samba to use multiple interfaces&nbsp;
        <br> # If you have multiple network interfaces then you can list the .es&nbsp;
        <br> # you want to listen . (never omit localhost)&nbsp;
        <br> #&nbsp;
        <br> # Hosts Allow/Hosts Deny lets you restrict who can connect, and you can&nbsp;
        <br> # specifiy it as a per share option as well&nbsp;
        <br> #&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <font color="#ff0000"><strong>workgroup = Workgroup&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#00ff00">#设置samba服务器工作组名为Workgroup</font>&nbsp;<br></strong></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <font color="#ff0000"><strong>server string = File Server</strong></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <strong><font color="#00ff00">#添加samba服务器注释信息为"File Server"</font></strong> 
       </div> 
       <div>
        ;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; netbios name = MYSERVER
       </div> 
       <div>
        ;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; interfaces = lo eth0 192.168.12.2/24 192.168.13.2/24&nbsp;
        <br> ;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; hosts allow = 127. 192.168.12. 192.168.13.
       </div> 
       <div>
        # --------------------------- Logging Options -----------------------------&nbsp;
        <br> #&nbsp;
        <br> # Log File let you specify where to put logs and how to split them up.&nbsp;
        <br> #&nbsp;
        <br> # Max Log Size let you specify the max size log files should reach
       </div> 
       <div>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # logs split per machine&nbsp;
        <br> ;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; log file = /var/log/samba/%m.log&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # max 50KB per log file, then rotate&nbsp;
        <br> ;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; max log size = 50
       </div> 
       <div>
        # ----------------------- Standalone Server Options ------------------------&nbsp;
        <br> #&nbsp;
        <br> # Scurity can be set to user, share(deprecated) or server(deprecated)&nbsp;
        <br> #&nbsp;
        <br> # Backend to store user information in. New installations should&nbsp;
        <br> # use either tdbsam or ldapsam. smbpasswd is available for backwards&nbsp;
        <br> # compatibility. tdbsam requires no further configuration.
       </div> 
       <div>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <font color="#ff0000"><strong>security = share&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#00ff00">#设置samba安全级别为share模式，允许用户匿名访问</font></strong></font>&nbsp;
        <br> ;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; passdb backend = tdbsam&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; smb passwd file = /etc/samba/smbpasswd
       </div> 
       <div>
        # ----------------------- Domain Members Options ------------------------&nbsp;
        <br> #&nbsp;
        <br> # Security must be set to domain or ads&nbsp;
        <br> #&nbsp;
        <br> # Use the realm option .ly with security = ads&nbsp;
        <br> # Specifies the Active Directory realm the host is part of&nbsp;
        <br> #&nbsp;
        <br> # Backend to store user information in. New installations should&nbsp;
        <br> # use either tdbsam or ldapsam. smbpasswd is available for backwards&nbsp;
        <br> # compatibility. tdbsam requires no further configuration.&nbsp;
        <br> #
       </div> </td>
     </tr>
    </tbody>
   </table>
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#00ff00">(4).设置共享目录的共享名为public</font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#00ff00">(5).设置共享目录的绝对路径为/share</font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#00ff00">(6).最后我们设置允许匿名访问哈~</font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366343JdZP.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="241" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366343rIkL.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    设置完smb.conf后保存退出哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#ff00ff"><strong>2）重新加载配置</strong></font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    上面我们说过哈，Linux为了使新配置生效，需要重新加载配置，可以使用restart重新启动服务或者使用reload重新加载配置哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366344SMQl.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="121" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_12303663448wha.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <strong><font color="#ff0000">注意哈：&nbsp;<br></font></strong>
    <strong><font color="#ff0000">偶这里强调一下细节，重启samba服务，虽然可以让配置生效，但是restart是先关闭samba服务，再开启服务哈，这样如果在公司网络运营中肯定会对客户端员工的访问造成影响，建议使用reload命令重新加载配置文件使其生效，这样不需要中断服务就可以重新加载配置哈~</font></strong> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    samba服务器通过以上设置，现在用户就可以不需要输入帐号和密码就可以直接登录samba服务器并访问public共享目录哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    我们测试下，在/share目录下建个文件试下：
    <font color="#0000ff"><strong>touch /share/test_sharemode_samba.tar</strong></font> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366345y6bn.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="71" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366345ONC9.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    我们看下效果哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366346xd9V.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="252" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366348Cpbp.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong>3.6 user服务器实例及详解</strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    上面的案例我们讲了share安全级别模式的samba服务器哈，可以实现用户方便滴通过匿名方式访问，但是如果在我们samba服务器上存在重要文件的目录，为了保证系统安全性及资料保密性哈，我们就必须对用户进行筛选，允许或禁止相应的用户访问指定滴目录哈，这里share安全级别模式就不能满足我们这样的实际要求了。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    实现用户身份验证的方法很多，我们可以将安全级别模式配置为user、server、domain和ads，但是最常用的还是user安全级别模式哈，下面偶就来看下user这个安全级别模式的配置哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    如果公司有多个部门，因工作需要，我们就会分门别类的建立相应部门的目录，并将销售部的资料存放在samba服务器的/companydata/sales/目录下,集中管理，以便销售人员浏览，并且该目录只允许销售部员工访问。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    我们分析下，在/companydata/sales/目录中存放有销售部的重要数据，为了保证其他部门无法查看其内容，我们需要将全局配置中security设置为user安全级别，这样就启用了samba服务器的身份验证机制，然后在共享目录/companydata/sales下设置valid users字段，配置只允许销售部员工能够访问这个共享目录。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    1）添加销售部用户和组并添加相应samba帐号
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    使用groupadd命令添加sales组，然后执行useradd命令和passwd命令添加销售部员工的帐号及密码哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366349NZpk.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="230" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366349MATb.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    接下来为销售部成员添加相应samba帐号
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366349dJVn.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="152" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366350Xu6A.png" width="402" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#ff00ff">2）修改samba主配置文件smb.conf</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#00ff00">(1).设置user安全级别模式</font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366350BQkf.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="339" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_12303663519grh.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#00ff00">(2).设置销售部共享目录为sales</font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#00ff00">(3).指定共享目录为绝对路径为/companydata/sales</font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#00ff00">(4).设置可以访问的用户为sales组成员</font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366352M7uC.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="342" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366353QfoW.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#ff00ff">3）重新加载配置</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    上个案例讲过了哈，要让修改后的Linux配置文件生效，我们就要重新加载配置。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#0000ff">#service smb reload</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_12303663539qlN.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="50" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366354aCoc.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    现在我们测试下
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366354J4IW.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="70" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366354wBop.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    输入销售部的帐号及密码进行登录
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_12303663557e3J.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="293" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366355Gfk7.png" width="330" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    打开sales共享目录
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366356FqjM.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="306" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366357UuJx.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    这样销售部成员就可以进行访问sales共享目录下的数据了
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366359TW6I.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="265" alt="image" src="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366359XCuZ.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong>4 Samba高级服务器配置</strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    上面偶说了下samba滴常规配置哈，这些已经可以使用企业内部滴资料通过网络共享并分配适当滴共享权限来管理共享目录，但这仅仅对于很多大型企业或安全要求高滴来说还是不能满足其需求哈，所以偶下面就来讲下samba滴高级服务器配置让我们搭建滴samba服务器功能更强大，管理更灵活，我们滴数据也更安全哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong>4.1 用户账号映射</strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    前面已经说过，samba的用户帐号信息是保存在smbpasswd文件中滴，而且可以访问samba服务器的帐号也必须对应一个同名的系统帐号。基于这一点，所以哈，对于一些hacker来说，只要知道samba服务器滴samba帐号，就等于是知道了Linux系统帐号，只要crack其samba帐号密码加以利用就可以攻击samba服务器哈。所以我们要使用用户帐号映射这个功能来解决这个问题哈~~~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    用户帐号映射这个功能需要建立一个帐号映射关系表，里面记录了samba帐号和虚拟帐号的对应关系，客户端访问samba服务器时就使用虚拟来登录哈。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#800080"><strong>1）编辑主配置文件/etc/samba/smb.conf</strong></font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    在global下添加一行字段
    <font color="#0000ff"><strong>username map = /etc/samba/smbusers</strong></font>开启用户帐号映射功能。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293915l1GK.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="340" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293916m4cO.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#800080">2）编辑/etc/samba/smbusers</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    smbusers文件保存帐号映射关系，其有固定滴格式：
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#0000ff"><strong>samba帐号 = 虚拟帐号（映射帐号）</strong></font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293916qOLP.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="170" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_12312939162G0J.png" width="394" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    帐号redking就是我们上面建立的samba帐号（同时也是Linux系统帐号），51cto及51blog就是映射滴帐号名（虚拟帐号），帐号redking在我们访问共享目录时只要输入51cto或51blog就可以成功访问了，但是实际上访问samba服务器的还是我们滴redking帐号，这样一来就解决了安全问题哈~我们继续。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#800080">3）重启samba服务：service smb restart</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293916Ved1.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="83" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293917g6WK.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#800080">4）验证效果哈~</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    输入我们定义的映射帐号51cto，注意我们没有输入帐号redking哈~，映射帐号51cto滴密码和redking帐号一样哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293917tEo5.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="293" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_12312939172n8K.png" width="330" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    现在就可以通过映射帐号浏览共享目录了哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293917kHZY.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="172" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293918fvP9.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#ff0000"><strong>注意：强烈建议不要将samba用户的密码与本地系统用户的密码设置成一样哈，可以避免非法用户使用samba帐号登录系统非法破坏哈~~~</strong></font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong>4.2 客户端访问控制</strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    对于samba服务器的安全性，我们已经说过可以使用valid users字段去实现用户访问控制，但是如果企业庞大，存在大量用户的话，这种方法操作起来就显得比较麻烦哈~比如samba服务器共享出一个目录来访问，但是要禁止某个IP子网或某个域的客户端访问此资源，这样滴情况使用valid users字段就无法实现客户端访问控制。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    下面我们就讲下使用hosts allow和hosts deny两个字段来实现该功能。而用好这两个字段滴关键在于熟悉和清楚它们的使用方法和作用范围哈
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#800000">hosts allow 和 hosts deny 的使用方法</font>&nbsp;</strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;
    <font color="#ff00ff"><strong>1）hosts allow 和 hosts deny 字段的使用</strong></font> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <strong><font color="#0000ff">hosts allow</font></strong>&nbsp;字段定义允许访问的客户端
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <strong><font color="#0000ff">hosts deny</font></strong>&nbsp;字段定义禁止访问的客户端
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#ff00ff"><strong>2）使用IP地址进行限制</strong></font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    比如公司内部samba服务器上共享了一个目录sales，这个目录是存放销售部的共享目录，公司规定192.168.0.0/24这个网段的IP地址禁止访问此sales共享目录，但是其中192.168.0.24这个IP地址可以访问。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    先将安全级别模式由user改为share
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293918oB23.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="174" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293919zALn.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    这里我们添加hosts deny和hosts allow字段
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <font color="#0000ff"><strong>hosts deny = 192.168.0.</strong></font>&nbsp;表示禁止所有来自192.168.0.0/24网段的IP地址访问
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <strong><font color="#0000ff">hosts allow = 192.168.0.24</font></strong>&nbsp;表示允许192.168.0.24这个IP地址访问
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    当host deny和hosts allow字段同时出现并定义滴内容相互冲突时，hosts allow优先。现在设置的意思就是禁止C类地址192.168.0.0/24网段主机访问，但是允许192.168.0.24主机访问。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_12312939195hRJ.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="115" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293919wF9L.png" width="355" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    测试下效果，如果是192.168.0.24的客户端就可以正常访问
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293919w8Bz.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="254" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293920Br4L.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    如果是其他客户端滴话就是这样的效果
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293921FpvM.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="300" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293921IEDC.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    如果想同时禁止多个网段滴IP地址访问此服务器可以这样设置
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;
    <strong><font color="#0000ff">hosts deny = 192.168.1. 172.16.</font></strong>&nbsp;表示拒绝所有192.168.1.0网段和172.16.0.0网段的IP地址访问sales这个共享目录。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <strong><font color="#0000ff">hosts allow = 10.</font></strong>&nbsp;表示允许10.0.0.0网段的IP地址访问sales这个共享目录。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#ff0000"><strong>注意：当需要输入多个网段IP地址的时候，需要使用“空格”符号隔开。</strong></font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_12312939218223.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="103" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293922txfw.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#ff00ff">3）使用域名进行限制</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    我们来看这样一个例子哈，公司samba服务器上共享了一个目录public，公司规定.sale.com域和.net域的客户端不能访问，并且主机名为free的客户端也不能访问。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <font color="#0000ff"><strong>hosts deny = .sale.com .net free</strong></font>&nbsp;表示禁止.sale.com域和.net域及主机名为free的客户端访问public这个共享目录。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#ff0000"><strong>注意：域名和域名之间或域名和主机名之间需要使用“空格”符号隔开。</strong></font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293922wwDv.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="103" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_12312939226QeX.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#ff00ff">4）使用通配符进行访问控制</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    samba服务器共享了一个目录security，规定所有人不允许访问，只有主机名为boss的客户端才可以访问。对于这样一个实例哈，我们就可以通过使用通配符的方式来简化配置。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <font color="#0000ff"><strong>hosts deny = All</strong></font>&nbsp;表示所有客户端，并不是说允许主机名为ALL的客户端可以访问哈~~~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    常用的通配符还有“*”，“？”，“LOCAL”等。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293922XVz1.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="113" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293923BedY.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    还有一种比较有意思的情况，如果我们规定所有人不能访问security目录，只允许192.168.0.0网段的IP地址可以访问，但是192.168.0.100及192.168.0.78的主机是要禁止访问滴。我们可以使用hosts deny禁止所有用户访问，再设置hosts allow允许192.168.0.0网段主机，但当hosts deny和hosts allow同时出现而且冲突滴时候，hosts allow生效，如果这样滴话，那么允许192.168.0.0网段的IP地址可以访问，但是192.168.0.100及192.168.0.78的主机禁止访问就无法生效了哈~我们可以使用EXCEPT进行设置。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <strong><font color="#0000ff">hosts allow = 192.168.0. EXCEPT 192.168.0.100 192.168.0.78</font></strong>&nbsp;表示允许192.168.0.0网段IP地址访问，但是192.168.0.100和192.168.0.78除外哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293923yUU0.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="131" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293923340a.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#800000">hosts allow 和 hosts deny 的作用范围</font>&nbsp;</strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    hosts allow和hosts deny设置在不同的位置上，它们的作用范围是不一样滴。如果设置在[global]里面，表示对samba服务器全局生效哈，如果设置在目录下面，则表只对这个目录生效。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293923fogM.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="143" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_12312939248qzc.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    这样设置表示只有192.168.0.88才可以访问samba服务器，全局生效哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_12312939241p9w.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="101" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293924EYHY.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    这样设置就表示只对单一目录security生效，只有192.168.0.88才可以访问security目录里面的资料。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong>4.3 设置Samba的权限</strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    到这里我们已经可以对客户端访问进行有效的控制，但是对于能访问的客户端来说，我们还是不能灵活方便滴控制他们访问共享资源的权限，比如boss或gm这样的帐号可以对某个共享目录具有完全控制权限，其他帐号只有只读权限哈，这样的情况我们就可以使用write list字段来实现哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    例如公司samba服务器上有个共享目录tech，公司规定只有boss帐号和tech组的帐号可以完全控制，其他人只有只读权限。如果只用writable字段则无法满足这个实例的要求，因为当writable = yes时，表示所有人都可以写入了哈，而当writable = no时表示所有人都不可以写入。这时我们就需要用到write list字段哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_12312939247CFc.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="105" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293924K3Gv.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    write list = boss,@tech 就表示只有boss帐号和tech组成员才可以对tech共享目录有写入权限哈（其中@tech就表示tech组）。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    我们来看下writable和write list之间的区别：
   </div> 
   <table border="1" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;border-collapse:collapse;color:rgb(51,51,51);">
    <tbody>
     <tr>
      <td valign="top" style="border:1px solid rgb(221,221,221);"><strong>字段</strong></td> 
      <td valign="top" style="border:1px solid rgb(221,221,221);"><strong>值</strong></td> 
      <td valign="top" style="border:1px solid rgb(221,221,221);"><strong>描述</strong></td> 
     </tr>
     <tr>
      <td valign="top" style="border:1px solid rgb(221,221,221);"><strong>writable</strong></td> 
      <td valign="top" style="border:1px solid rgb(221,221,221);">yes</td> 
      <td valign="top" style="border:1px solid rgb(221,221,221);">所有帐号都允许写入</td> 
     </tr>
     <tr>
      <td valign="top" style="border:1px solid rgb(221,221,221);"><strong>writable</strong></td> 
      <td valign="top" style="border:1px solid rgb(221,221,221);">no</td> 
      <td valign="top" style="border:1px solid rgb(221,221,221);">所有帐号都禁止写入</td> 
     </tr>
     <tr>
      <td valign="top" style="border:1px solid rgb(221,221,221);"><strong>write list</strong></td> 
      <td valign="top" style="border:1px solid rgb(221,221,221);">写入权限帐号列表</td> 
      <td valign="top" style="border:1px solid rgb(221,221,221);">列表中的帐号允许写入</td> 
     </tr>
    </tbody>
   </table>
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong>4.4 Samba的隐藏共享</strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    我们还可以使用browseable字段实现隐藏共享的功能哈~~~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    比如我们要把samba上的技术部共享目录隐藏，我们可以这样设置。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <strong><font color="#0000ff">browseable = no</font></strong>表示隐藏该目录
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293925hz2A.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="106" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293925XwDa.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    现在就看不到tech共享目录了哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293925maqG.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="300" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293926gK8m.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    如果我们直接输入
    <a style="text-decoration:none;color:rgb(66,133,244);">\\192.168.0.188\tech</a>就可以访问了哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293927x2h6.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="210" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293927Tsj0.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    在有些特殊的情况下，browseable也无法满足企业的需求，比如，samba服务器上有个security目录，此目录只有boss用户可以浏览访问，其他人都不可以访问。因为samba的主配置文件只有一个，所有帐号访问都要遵守该配置文件的规则，如果隐藏了该目录，那么所有人就都看不到该目录了，就像上面演示的一样，要知道共享目录名称后输入
    <a style="text-decoration:none;color:rgb(66,133,244);">\\192.168.0.188\tech</a>才可以访问技术部资料。如果这样滴目录一多滴话，不可以叫boss去记那么多目录名称哈，那样还不被boss骂死哈~~~^_^问题出在samba服务的主配置文件只有一个，而smb.conf没有提供字段允许部分人可以浏览隐藏目录的功能。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    那我们可以换个角度哈，既然单一滴配置文件无法实现要求，那么我们可以为不同需求的用户或组分别建立相应的配置文件并单独配置后实现其隐藏目录的功能哈，现在我们为boss帐号建立一个配置文件，并且让其访问的时候能够读取这个单独的配置文件。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#ff00ff"><strong>（1）建立独立滴配置文件哈~</strong></font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    先为boss帐号创建一个单独的配置文件，我们可以直接复制/etc/samba/smb.conf这个文件并改名就可以了，如果为单个用户建立配置文件，命名时一定要包含用户名哈。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    我们使用cp命令复制主配置文件，为boss帐号建立独立的配置文件。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293927EMlv.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="94" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_12312939278zTw.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#ff00ff">（2）编辑smb.conf主配置文件哈~</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    在[global]中加入
    <strong><font color="#0000ff">config file = /etc/samba/smb.conf.%U</font></strong>，表示samba服务器读取/etc/samba/smb.conf.%U文件，其中%U代表当前登录用户。命名规范与独立配置文件匹配哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293928dWBX.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="124" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293928Ztz7.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#ff00ff"><strong>（3）编辑smb.conf.boss独立配置文件</strong></font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    编辑boss帐号的独立配置文件smb.conf.boss，将tech目录里面的browseable = no删除，这样当boss帐号访问samba时，tech共享目录对boss帐号访问就是可见滴，这样主配置文件smb.conf和boss帐号的独立配置文件相搭配就有实现其他用户访问时tech共享目录是隐藏滴，而boss帐号访问时就是可见滴。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293928DiHE.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="102" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_12312939289TRJ.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#ff00ff">（4）重新启动samba服务：service smb restart</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293928NOS6.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="87" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_12312939299oKJ.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#ff00ff">（5）测试效果哈~</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    现在我们以普通用户redking帐号登录samba服务器哈~~~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293929QY9v.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="293" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293929AfXa.png" width="330" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    发现以redking帐号登录samba看不到tech共享目录哈~~证明tech共享目录对除boss帐号以外的人是隐藏共享滴。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293930ewgj.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="190" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293930X74G.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    现在我们以boss帐号登录来看看哈~~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_12312939309y2r.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="288" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293930Mv78.png" width="332" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    我们发现以boss帐号登录之后，tech共享目录自动显示了哈~~~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293931zqKE.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="210" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293931d5g7.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    这样以独立配置文件的方法来实现隐藏共享对不同帐号的可见性非常方便哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <strong><font color="#ff0000">注意：目录隐藏了并不是说不共享了，只要知道共享名，并且有相应权限，还是可以访问滴，就像上面演示的一样，可以输入“</font></strong>
    <strong><font color="#ff0000">\\IP</font></strong>
    <strong><font color="#ff0000">地址\共享名”的方法就可以访问隐藏共享了。</font></strong> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong>5 Samba客户端配置&nbsp;<br> 5.1 Linux客户端访问Samba共享</strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    linux客户端访问服务器主要有两种方法
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#ff00ff">1）使用smbclient命令</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    在Linux中，samba客户端使用smbclint这个程序来访问samba服务器时，先要确保客户端已经安装了samba-client这个rpm包。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_12312939311YNN.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="102" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293932HccQ.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    smbclient可以列出目标主机共享目录列表
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    smbclient命令格式：
    <strong><font color="#0000ff">smbclient -L 目标IP地址或主机名 -U 登录用户名%密码</font></strong> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    当我们查看rhel5(192.168.0.188)主机的共享目录列表时，提示输入密码，这时候可以不输入密码哈，我们直接按回车，这样表示匿名登录，然后就会显示匿名用户可以看到的共享目录列表了哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <strong><font color="#0000ff">smbclient -L rhel5</font></strong>或者
    <strong><font color="#0000ff">smbclient -L 192.168.0.188</font></strong> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293932dVaC.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="267" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293932RSrU.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    如果想使用samba帐号相看samba服务器端共享了什么目录，我们可以加上-U参数哈~，后面跟上用户名%密码。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#0000ff">smbclient -L 192.168.0.188 -U boss%boss</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    这样就显示了只有boss帐号才显示的tech技术部共享目录。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293933axTM.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="255" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293933oUb4.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    注意：不同用户使用smblient浏览的结果可能是不一样滴，这要根据服务器设置的访问控制权限而定哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    我们还可以在使用smbclient命令行共享访问模式浏览共享的资料哈
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    smbclient命令行共享访问模式命令格式：
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#0000ff">smbclient //目标IP地址或主机名/共享目录 -U 用户名%密码</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    上面已经显示了服务器上有一个tech共享目录，我们来查看一下里面的内容哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293933OzHh.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="120" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293933HV2b.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    另外smbclient登录samba服务器后，我们可以使用help查询所支持的命令。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293934upvi.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="325" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_123129393489zi.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#ff00ff">2）使用mount命令挂载共享目录</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    mount命令挂载共享目录格式：
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#0000ff">mount -t cifs //目标IP地址或主机名/共享目录名称 挂载点 -o username=用户名</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#0000ff"><strong>[root@client ~]# mount -t cifs //192.168.0.188/tech /mnt/sambadata/ -o username=boss%boss</strong></font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    这表示挂载192.168.0.188主机上的共享目录tech到/mnt/sambadata目录下，cifs就是samba所使用的文件系统哈
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293935wgQF.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="123" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293935HK7c.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;
    <strong>5.2 Windows客户端访问Samba共享</strong> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    这个就比较简单了哈，我们也一直用这个访问微软的共享目录哈，上面其他也已经讲过了哈，方法就是在开始运行里面使用UNC路径直接进行访问哈~~也可以到网上邻居里面找，但是偶不太喜欢用这个方法，因为速度太慢哈。还是觉得在开始--运行或是直接在资源管理器或IE的地址栏里面输入UNC路径比较快哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#ff00ff">1）在开始--运行里面使用UNC路径直接进行访问</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293935dDFb.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="179" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293935gH9f.png" width="351" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293936QRKv.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="218" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293936zEAL.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#ff00ff"><strong>2）映射网络驱动器访问samba服务器共享目录</strong></font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293937v2rl.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="129" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293937fu4W.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    输入tech共享目录的地址
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293937jUFe.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="304" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293938TebJ.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    输入可以访问tech共享目录的samba帐号和密码
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293938CNm0.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="259" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293939TdaA.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    这时在我的电脑的网络驱动器中就可以看到映射的Z盘了哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293939FwdK.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="131" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293939FBNU.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    打开Z盘就可以访问tech共享目录里面的资源。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293940Eok8.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="250" alt="image" src="http://redking.blog.51cto.com/attachment/200901/7/27212_1231293940mVOE.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong>6 Samba的打印共享</strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    默认情况下，samba的打印服务是开放滴~所以我们只要把打印机安装好后客户端的用户就可以使用打印机了。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#ff00ff">1）设置global配置项</font>&nbsp;</strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    修改smb.conf全局配置，开启打印共享功能
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/8/27212_1231382219tmJ7.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="339" alt="image" src="http://redking.blog.51cto.com/attachment/200901/8/27212_1231382220OQcn.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#ff00ff">2）设置printers配置项</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/8/27212_1231382220hfv6.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="126" alt="image" src="http://redking.blog.51cto.com/attachment/200901/8/27212_1231382220CUzM.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    使用默认设置就可以让客户端正常使用权打印机了哈，需要注意的就是printable一定要设置成yes哈，如果不设置成yes那还打什么哈~~~path字段定义打印机队列，可以根据需要自己定制哈，另外共享打印和共享目录不一样哈，安装完打印机后必须重新启动samba服务，否则客户端可能无法看到共享的打印机。如果设置只允许部分员工使用打印机，我们可以使用valid users、hosts allow或hosts deny字段来实现哈，这些在讲共享目录时已经说过了，不清楚可以再翻翻看哈~~下面进入samba企业实战与应用。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <strong>7 Samba企业实战与应用&nbsp;</strong>
    <strong><br> 7.1 企业环境及需求</strong> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    samba服务器目录：
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    企业数据目录：
    <strong><font color="#ff8000">/companydata</font></strong> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    公共目录：
    <strong><font color="#ff8000">/companydata/share</font></strong> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    销售部目录：
    <strong><font color="#ff8000">/companydata/sales</font></strong> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    技术部：
    <strong><font color="#ff8000">/companydata/tech</font></strong> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    企业员工情况：
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    总经理：gm
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    销售部：销售部经理 redking、员工 sky、员工 jane
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    技术部：技术部经理 michael、员工 bill、员工 joy
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    搭建samba文件服务器，建立公共共享目录，允许所有人访问，权限为只读，为销售部和技术部分别建立单独的目录，只可以总经理和相应部门员工访问，并且公司员工禁止访问非本部门的共享目录。这是个典型的企业文件服务器案例哈。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    总经理-----------------------&nbsp;
    <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;
    <br> 销售部-------------------交换机--------------------samba服务器&nbsp;
    <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;
    <br> 技术部-----------------------
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong>7.2 需求分析</strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    对于建立公共目录public字段就可以实现匿名访问，员工只能访问本部门的共享目录，禁止访问非本部门的共享目录，我们可以通过设置目录共享字段“browseable = no”及字段“valid users”来实现其隐藏功能和相应的访问权限。这样设置不能很好得解决同一目录多种需求的权限设置，所以我们需要建立独立配置文件，为每个部门建立一个组后并为每个组建立配置文件来实现隔离用户权限会比较灵活哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong>7.3 解决方案</strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#ff00ff">1）建立各部门专用共享目录</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    使用mkdir建立需求的共享目录以便分门别类的存储相应资料。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/8/27212_12313822206F6H.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="217" alt="image" src="http://redking.blog.51cto.com/attachment/200901/8/27212_1231382221Z719.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    同时设置/companydata共享目录的用户权限
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/8/27212_1231403031AhZs.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="143" alt="image" src="http://redking.blog.51cto.com/attachment/200901/8/27212_1231403032TqXj.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#ff00ff">2）添加samba服务器描述及设置smbpasswd文件</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/8/27212_1231382221a1TQ.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="339" alt="image" src="http://redking.blog.51cto.com/attachment/200901/8/27212_12313822227lg4.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    默认/etc/samba/目录下没有smbpasswd文件,我们要先关闭samba的tdbsam验证。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    解决方法：在smb.conf文件中注释掉
    <font color="#ff0000">passdb backend = tdbsam</font>&nbsp;一行，为了指定samba用户的验证我们加上这一条
    <font color="#ff0000">smb passwd file = /etc/samba/smbpasswd</font>
    <font color="#000000">，然后保存退出。</font> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/8/27212_1231382222lMsj.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="341" alt="image" src="http://redking.blog.51cto.com/attachment/200901/8/27212_1231382223sLTv.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"></div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200812/27/27212_1230366335jB0v.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"></a>
   </div> 
   <strong style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><font color="#ff00ff">3)添加用户和组</font></strong>
   <span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;"></span> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"></div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    先建立销售部组sales，技术部组tech，然后使用useradd命令添加总经理帐号gm及各个员工的帐号并加入相应的用户组。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <a href="http://redking.blog.51cto.com/attachment/200901/8/27212_1231382223YhrT.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="130" alt="image" src="http://redking.blog.51cto.com/attachment/200901/8/27212_12313822232AML.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>&nbsp;
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    接着使用smbpasswd命令添加samba用户
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/8/27212_1231382224P9Xu.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="356" alt="image" src="http://redking.blog.51cto.com/attachment/200901/8/27212_1231382224L94M.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    呃~~~不好意思哈~~~帐号gm的samba用户忘记添加了，现在补上哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/8/27212_1231382224Ffdn.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="69" alt="image" src="http://redking.blog.51cto.com/attachment/200901/8/27212_1231382225TBZX.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#ff00ff">4）配置smb.conf文件</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#00ff00">（1）建立单独配置文件</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    用户配置文件使用用户名命令哈，组配置文件使用组名命令。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/8/27212_12313822256Rvq.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="120" alt="image" src="http://redking.blog.51cto.com/attachment/200901/8/27212_1231382225XDbf.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#00ff00"><strong>（2）设置主配置文件smb.conf</strong></font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    这里我们配置smb.conf主配置文件，在global中添加相应字段哈，确保samba服务器的主配置文件可以调用独立的用户配置文件和组配置文件。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <strong><font color="#0000ff">include = /etc/samba/%U.smb.conf</font></strong>表示使samba服务器加载/etc/samba目录下格式为“用户名.smb.conf”的配置文件。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <strong><font color="#0000ff">include = /etc/samba/%G.smb.conf</font></strong>表示使samba服务器加载/etc/samba目录下格式为“组名.smb.conf”的配置文件。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/8/27212_1231382225RfPC.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="341" alt="image" src="http://redking.blog.51cto.com/attachment/200901/8/27212_1231382226snEN.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    设置共享目录/companydata/share
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/8/27212_1231382226TXxr.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="342" alt="image" src="http://redking.blog.51cto.com/attachment/200901/8/27212_1231382227Yo6F.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#ff00ff">（5）设置总经理gm配置文件</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#0000ff">vim /etc/samba/gm.smb.conf</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/8/27212_1231403032MdFQ.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="339" alt="image" src="http://redking.blog.51cto.com/attachment/200901/8/27212_1231403033tetV.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#ff00ff">（6）设置销售部组sales配置文件</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#0000ff">vim /etc/samba/sales.smb.conf</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/8/27212_12313822289MuX.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="339" alt="image" src="http://redking.blog.51cto.com/attachment/200901/8/27212_1231382229cicl.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#ff00ff">（7）设置技术部组tech配置文件</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#0000ff">vim /etc/samba/tech.smb.conf</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/8/27212_1231382229SYL9.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="342" alt="image" src="http://redking.blog.51cto.com/attachment/200901/8/27212_1231382230Wlo4.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#ff00ff">（8）开启samba服务</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#0000ff">service smb start</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/8/27212_1231382230ICtQ.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="61" alt="image" src="http://redking.blog.51cto.com/attachment/200901/8/27212_12313822305Ylm.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#ff00ff">（9）测试</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    我们先用gm帐号登录测试
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/8/27212_1231382230yGkI.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="293" alt="image" src="http://redking.blog.51cto.com/attachment/200901/8/27212_12313822308Doy.png" width="330" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    可以全部看到共享目录。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/8/27212_12313822311vR4.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="308" alt="image" src="http://redking.blog.51cto.com/attachment/200901/8/27212_1231382232bM08.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    /companydata/share目录只读
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/8/27212_1231382232OTci.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="238" alt="image" src="http://redking.blog.51cto.com/attachment/200901/8/27212_1231382233yOhr.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#ff0000"><strong>注意：</strong></font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#ff0000"><strong>最好禁用RHEL5中的selinux功能，否则会出现些莫名其妙滴问题，比如下面的帐号gm明明对共享目录sales和tech是777的权限，但就是只能创建文件却不能创建文件夹哈~</strong></font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/8/27212_1231403034nciw.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="235" alt="image" src="http://redking.blog.51cto.com/attachment/200901/8/27212_1231403034KfZ8.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    关闭selinux，打开selinux配置文件/etc/selinux/config设置selinux = disabled后保存退出并重启系统。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <a href="http://redking.blog.51cto.com/attachment/200901/8/27212_1231403035N59f.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="188" alt="image" src="http://redking.blog.51cto.com/attachment/200901/8/27212_1231403035CtWg.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>&nbsp;
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    查看selinux当前状态
    <font color="#0000ff"><strong>sestatus -v</strong></font> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/8/27212_1231403036t6oH.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="108" alt="image" src="http://redking.blog.51cto.com/attachment/200901/8/27212_1231403036oWkO.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    现在我们就可以创建文件夹了
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/8/27212_1231403038NhY0.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="229" alt="image" src="http://redking.blog.51cto.com/attachment/200901/8/27212_123140303835l4.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    现在我们以其他帐号测试，就用技术部joy吧
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/8/27212_1231382233zxNK.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="291" alt="image" src="http://redking.blog.51cto.com/attachment/200901/8/27212_12313822335GYn.png" width="329" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    在这里技术部的员工就看不到销售部的共享目录。同时对public目录只读权限，对tech目录有读写权限。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/8/27212_1231382234vGin.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="149" alt="image" src="http://redking.blog.51cto.com/attachment/200901/8/27212_12313822347jV7.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    因为禁止对共享目录sales访问，就算知道了
    <a style="text-decoration:none;color:rgb(66,133,244);">\\rhel5\sales</a>路径也是不能访问滴
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/8/27212_1231403039oomt.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="255" alt="image" src="http://redking.blog.51cto.com/attachment/200901/8/27212_12314030405OKr.png" width="454" style="border-top:none;border-right:0px none;border-bottom:0px none;border-left:0px none;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong>8 Samba排错</strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#ff00ff"><strong>1）Linux服务一般滴排错方法</strong></font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#800000"><strong>（1）错误信息</strong></font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    一般仔细看下显示的错误信息，根据错误提示一般滴问题就可以判断问题出在什么地方了。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#800000">（2）配置文件</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    第2个我们可以查配置文件，有时可能误操作导致配置失误，服务无法正常运行，我们可以通过检查配置文件来确认问题。现在很多服务的软件包有自带配置文件检查工具，我们可以通过这些工具对配置文件进行检查哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#800000">（3）日志文件</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    如果服务出现问题，我们还可以使用tail命令来动态监控日志文件（在CLI状态下可以使用Ctrl+Alt+F1~F6切换到另一个CLI文字终端下查看）。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#0000ff">tail -F /var/log/messages</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#ff00ff"><strong>2）samba服务故障排错</strong></font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#ff8000">（1）使用testparm命令检查</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    上面偶提到软件包有自带的配置文件检查工具，我们可以使用testparm命令检测smb.conf文件的语法，如果报错，说明smb.conf文件设置有错误哈，这样我们可以根据提示信息来修改主配置文件和独立配置文件。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    testparm /etc/samba/smb.conf
   </div> 
   <table border="1" style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;border-collapse:collapse;color:rgb(51,51,51);">
    <tbody>
     <tr>
      <td valign="top" style="border:1px solid rgb(221,221,221);"> 
       <div>
        [root@rhel5 ~]#&nbsp;
        <font color="#0000ff">testparm /etc/samba/smb.conf&nbsp;<br></font>Load smb config files from /etc/samba/smb.conf&nbsp;
        <br> Can't find include file /etc/samba/.smb.conf&nbsp;
        <br> Can't find include file /etc/samba/%G.smb.conf&nbsp;
        <br> Processing section "[homes]"&nbsp;
        <br> Processing section "[printers]"&nbsp;
        <br> Processing section "[public]"&nbsp;
        <br> Loaded services file OK.&nbsp;
        <br> Server role: ROLE_STANDALONE&nbsp;
        <br> Press enter to see a dump of your service definitions
       </div> 
       <div>
        [global]&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; workgroup = COMPANYDOMAIN&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; server string = Company Samba File Server&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cups options = raw&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; include = /etc/samba/%G.smb.conf
       </div> 
       <div>
        [homes]&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; comment = Home Directories&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; read .ly = No&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; browseable = No
       </div> 
       <div>
        [printers]&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; comment = All Printers&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; path = /var/spool/samba&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printable = Yes&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; browseable = No
       </div> 
       <div>
        [public]&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; comment = public data&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; path = /companydata/share&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; guest ok = Yes&nbsp;
        <br> [root@rhel5 ~]#&nbsp;
        <font color="#0000ff">testparm /etc/samba/gm.smb.conf&nbsp;<br></font>Load smb config files from /etc/samba/gm.smb.conf&nbsp;
        <br> Processing section "[homes]"&nbsp;
        <br> Processing section "[printers]"&nbsp;
        <br> Processing section "[sales]"&nbsp;
        <br> Processing section "[tech]"&nbsp;
        <br> Loaded services file OK.&nbsp;
        <br> Server role: ROLE_STANDALONE&nbsp;
        <br> Press enter to see a dump of your service definitions
       </div> 
       <div>
        [global]&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; workgroup = COMPANYDOMAIN&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; server string = Company Samba File Server&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cups options = raw
       </div> 
       <div>
        [homes]&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; comment = Home Directories&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; read .ly = No&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; browseable = No
       </div> 
       <div>
        [printers]&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; comment = All Printers&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; path = /var/spool/samba&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printable = Yes&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; browseable = No
       </div> 
       <div>
        [sales]&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; comment = sales data&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; path = /companydata/sales&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; valid users = gm&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; read .ly = No
       </div> 
       <div>
        [tech]&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; comment = tech data&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; path = /companydata/tech&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; valid users = gm&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; read .ly = No&nbsp;
        <br> [root@rhel5 ~]#&nbsp;
        <font color="#0000ff">testparm /etc/samba/sales.smb.conf</font>&nbsp;
        <br> Load smb config files from /etc/samba/sales.smb.conf&nbsp;
        <br> Processing section "[homes]"&nbsp;
        <br> Processing section "[printers]"&nbsp;
        <br> Processing section "[sales]"&nbsp;
        <br> Loaded services file OK.&nbsp;
        <br> Server role: ROLE_STANDALONE&nbsp;
        <br> Press enter to see a dump of your service definitions
       </div> 
       <div>
        [global]&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; workgroup = COMPANYDOMAIN&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; server string = Company Samba File Server&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cups options = raw
       </div> 
       <div>
        [homes]&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; comment = Home Directories&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; read .ly = No&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; browseable = No
       </div> 
       <div>
        [printers]&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; comment = All Printers&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; path = /var/spool/samba&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printable = Yes&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; browseable = No
       </div> 
       <div>
        [sales]&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; comment = sales data&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; path = /companydata/sales&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; valid users = @sales, gm&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; read .ly = No&nbsp;
        <br> [root@rhel5 ~]#&nbsp;
        <font color="#0000ff">testparm /etc/samba/tech.smb.conf</font>&nbsp;
        <br> Load smb config files from /etc/samba/tech.smb.conf&nbsp;
        <br> Processing section "[homes]"&nbsp;
        <br> Processing section "[printers]"&nbsp;
        <br> Processing section "[tech]"&nbsp;
        <br> Loaded services file OK.&nbsp;
        <br> Server role: ROLE_STANDALONE&nbsp;
        <br> Press enter to see a dump of your service definitions
       </div> 
       <div>
        [global]&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; workgroup = COMPANYDOMAIN&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; server string = Company Samba File Server&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cups options = raw
       </div> 
       <div>
        [homes]&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; comment = Home Directories&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; read .ly = No&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; browseable = No
       </div> 
       <div>
        [printers]&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; comment = All Printers&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; path = /var/spool/samba&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printable = Yes&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; browseable = No
       </div> 
       <div>
        [tech]&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; comment = tech data&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; path = /companydata/tech&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; valid users = @tech, gm&nbsp;
        <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; read .ly = No&nbsp;
        <br> [root@rhel5 ~]#
       </div> </td>
     </tr>
    </tbody>
   </table>
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#ff8000">2）使用ping命令测试</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    samba服务器主配置文件排除错误后重启smb服务，如果客户端仍然无法连接samba服务器，我们在客户端可以使用ping命令进行测试,这个我们微软的系统中排障一样哈，根据出现的不同情况可以进行分析哈。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#8000ff">（1）如果没有收到任何提示，说明客户端TCP/IP协议安装有问题，需要重新安装客户端TCP/IP协议，然后重新测试。</font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#8000ff">（2）如果提示“host not found”则检查客户端DNS或者/etc/hosts文件有没正确设置，确保客户端能够使用名称访问samba服务器。</font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#8000ff">（3）无法ping通还可能是防火墙设置滴问题，需要重新设置防火墙的规则，开启samba与外界联系的端口。</font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#8000ff">（4）当然还有一种低级的情况，那就是由于主机名输入错误导致不能ping通，请更正后重试哈~~~O(^_^)O</font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#ff8000">3）使用smbclient命令进行测试</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    如果客户端与samba服务器可以ping通，说明客户端与服务器间的连接没有问题哈，如果还是不能访问samba共享资源，可以执行smbclient命令进一步测试服务器端的配置。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    如果测试samba服务器正常，并且输入了正确的帐号和密码，那么执行smbclient命令就可以获得共享列表。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <strong><font color="#0000ff">smbclient -L 192.168.0.188 -U joy%123</font></strong>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;
    <a href="http://redking.blog.51cto.com/attachment/200901/9/27212_1231481459PH0t.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="329" alt="image" src="http://redking.blog.51cto.com/attachment/200901/9/27212_1231481460KugH.png" style="border:0px;"></a> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    如果我们看到了错误信息提示“tree connect failed”则说明可以在smb.conf文件中设置了host deny字段拒绝了客户端的IP地址或域名，我们可以修改smb.conf配置文件允许客户端访问就可以了哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/9/27212_1231481460yxel.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="71" alt="image" src="http://redking.blog.51cto.com/attachment/200901/9/27212_1231481460wQ7G.png" style="border:0px;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    如果返回信息是“connection refused”提示拒绝连接则说明是samba服务器smbd进程可以没有被开启哈~我们必须确保smbd和nmbd进程处于开启状态，并使用netstat -a检查netbios使用的139端口是否处于监听状态哈。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/9/27212_1231481460z6jB.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="59" alt="image" src="http://redking.blog.51cto.com/attachment/200901/9/27212_1231481460TfTn.png" style="border:0px;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    检查samba服务
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <a href="http://redking.blog.51cto.com/attachment/200901/9/27212_123148146137ka.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="297" alt="image" src="http://redking.blog.51cto.com/attachment/200901/9/27212_12314814629jtf.png" style="border:0px;"></a>&nbsp;
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    开启smb服务
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <font color="#8000ff"><strong>netbios-ssn 会话管理&nbsp;<br> netbios-ns 名字解析&nbsp;<br> netbios-dgm 数据报</strong></font>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/9/27212_1231481462taCY.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="312" alt="image" src="http://redking.blog.51cto.com/attachment/200901/9/27212_1231481463CxiH.png" style="border:0px;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    如果提示“session setup failed”连接建立失败则说明服务器拒绝了连接请求，这是因为输入的用户名和密码错误引起滴，我们输入正确的帐号和密码就ok了哈~
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <a href="http://redking.blog.51cto.com/attachment/200901/9/27212_1231481463uh7t.png" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img height="268" alt="image" src="http://redking.blog.51cto.com/attachment/200901/9/27212_1231481464IF4B.png" style="border:0px;"></a>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    有时也会收到比如“Your server software is being unfriendly”错误信息，提示服务器软件存在问题，这个故障一般是因为配置smbd时使用了错误的参数或者启用smbd时遇到的类似严重破坏错误，我们可以使用testparm来检查相应的配置文件并同时检查相关日志文件哈。
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    ###########################################################
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <br>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <br>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <br>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <br>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <br>
   </div> 
   <div> 
    <font color="#333333">本文转自redking51CTO博客，原文链接：http://blog.51cto.com/redking/120934</font>
    <span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;">，如需转载请自行联系原作者</span> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <br>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <br>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <br>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <br>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    <br>
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
