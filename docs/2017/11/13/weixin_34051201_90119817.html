<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>C#进阶系列——DDD领域驱动设计初探（五）：AutoMapper使用 « NotBeCN</title>
  <meta name="description" content="             前言：前篇搭建了下WCF的代码，就提到了DTO的概念，对于为什么要有这么一个DTO的对象，上章可能对于这点不太详尽，在此不厌其烦再来提提它的作用：        从安全上面考虑，领域Model都带有领域业务，让Client端引用Domain Model就意味着Client端可以绕过应用层...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/13/weixin_34051201_90119817.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">C#进阶系列——DDD领域驱动设计初探（五）：AutoMapper使用</h1>
    <p class="post-meta">Nov 13, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">前言：前篇搭建了下WCF的代码，就提到了DTO的概念，对于为什么要有这么一个DTO的对象，上章可能对于这点不太详尽，在此不厌其烦再来提提它的作用：</p> 
   <ul style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">
    <li><span style="color:rgb(176,25,229);">从安全上面考虑，领域Model都带有领域业务，让Client端引用Domain Model就意味着Client端可以绕过应用层直接完成业务逻辑的调用，这样是一种不安全的机制。</span></li> 
    <li><span style="color:rgb(176,25,229);">从对象传递效率上面考虑，领域Model带有业务，而这些业务一般对于UI层是没有意义的，所以带有业务的model传递起来会加重网络负担。</span></li> 
    <li><span style="color:rgb(176,25,229);">网上还说了DTOmodel最大的意义在于跨平台，Domain Model都是与特定的语言的数据类型有关，而这些数据类型是不能跨平台的，比如Java的类型就不能被C#使用。但在分布式模式下，Client端与Server端的平台不同是很正常的，如果Service直接返回Domain Model，Client端根本无法解析，这就要求Service返回的结果必须是标准的格式字节流。让Domain Model只使用简单类型（字符和数值）？让数据类型约束Domain Model显然不是一个好想法，所以DTO似乎是必不可少的了。</span></li> 
   </ul>
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">既然我们要使用DTO，那么有一件事我们就非做不可了，我们从领域层得到的是领域Model，如何把领域Model转换成只带有数据属性的DTO传递到前台呢？又或者我们从前台提交一个DTO对象，如何将DTO转换成领域Model而提交到后台呢？这个时候就需要我们的对象映射工具，目前市面上对象映射工具较多，但博主最熟悉的还是Automapper，这章就来分享下Automapper的使用。</p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">DDD领域驱动设计初探系列文章：</p> 
   <ul style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">
    <li><a id="homepage1_HomePageDays_DaysList_ctl04_DayList_TitleUrl_0" class="postTitle2" href="http://www.cnblogs.com/landeanfen/p/4816706.html" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">C#进阶系列——DDD领域驱动设计初探（一）：聚合</a></li> 
    <li><a id="homepage1_HomePageDays_DaysList_ctl03_DayList_TitleUrl_0" class="postTitle2" href="http://www.cnblogs.com/landeanfen/p/4834730.html" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">C#进阶系列——DDD领域驱动设计初探（二）：仓储Repository（上）</a></li> 
    <li><a id="homepage1_HomePageDays_DaysList_ctl02_DayList_TitleUrl_0" class="postTitle2" href="http://www.cnblogs.com/landeanfen/p/4837520.html" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">C#进阶系列——DDD领域驱动设计初探（三）：仓储Repository（下）</a></li> 
    <li><a id="homepage1_HomePageDays_DaysList_ctl01_DayList_TitleUrl_0" class="postTitle2" href="http://www.cnblogs.com/landeanfen/p/4841211.html" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">C#进阶系列——DDD领域驱动设计初探（四）：WCF搭建</a></li> 
    <li><a id="homepage1_HomePageDays_DaysList_ctl00_DayList_TitleUrl_0" class="postTitle2" href="http://www.cnblogs.com/landeanfen/p/4842015.html" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">C#进阶系列——DDD领域驱动设计初探（五）：AutoMapper使用</a></li> 
    <li><a href="http://www.cnblogs.com/landeanfen/p/4844344.html" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">C#进阶系列——DDD领域驱动设计初探（六）：领域服务</a></li> 
    <li><a href="http://www.cnblogs.com/landeanfen/p/4920577.html" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">C#进阶系列——DDD领域驱动设计初探（七）：Web层的搭建</a></li> 
   </ul>
   <h2 style="font-size:15px;line-height:23px;color:rgb(255,255,255);font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(43,102,149);">一、AutoMapper</h2> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">Automapper是一个object-object mapping（对象映射）工具，一般主要用于两个对象之间数据映射和交换。当然你也可以自己通过反射去写对象的映射，对于简单的两个属性间的数据转换，肯定没什么问题。但是如果遇到某些复杂的数据转换，比如指定某一个对象的某个属性映射到另一个对象的某一个属性，这种情况如果我们自己手动映射，恐怕就有点麻烦了吧。既然我们有现成的工具，为什么不用呢？</p> 
   <h2 style="font-size:15px;line-height:23px;color:rgb(255,255,255);font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(43,102,149);">二、AutoMapper引用到项目中</h2> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">向项目中添加AutoMapper的引用有两种方式：</p> 
   <h3 style="font-size:16px;line-height:24px;font-family:'微软雅黑', PTSans, Arial, sans-serif;">1、Nuget方式</h3> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">在需要使用AutoMapper的项目文件上面右键→管理Nuget程序包，打开Nuget界面，搜索Automapper，然后安装第一个即可。如下图：</p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><img src="https://images2015.cnblogs.com/blog/459756/201509/459756-20150927114624147-1985759796.png" alt="" style="border:0px;"></p> 
   <h3 style="font-size:16px;line-height:24px;font-family:'微软雅黑', PTSans, Arial, sans-serif;">2、程序包管理控制台方式</h3> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">点击Visual Studio的工具菜单→程序包管理控制台，然后选择需要安装Automapper的项目（下图中的默认项目），最后在控制台里面输入命令“Install-Package AutoMapper”命令即可按照Automapper包：</p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;"><img src="https://images2015.cnblogs.com/blog/459756/201509/459756-20150927114856662-592199656.png" alt="" style="border:0px;"></p> 
   <h2 style="font-size:15px;line-height:23px;color:rgb(255,255,255);font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(43,102,149);">&nbsp;三、AutoMapper使用代码示例</h2> 
   <h3 style="font-size:16px;line-height:24px;font-family:'微软雅黑', PTSans, Arial, sans-serif;">1、最简单的对象映射</h3> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">AutoMapper使用起来还是比较简单的，最简单的用法你只需要两句话：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;">
    <pre><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> oMenu = <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">new</span> TB_MENU() { MENU_NAME=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">权限管理</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span>, MENU_LEVEL=<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">1</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,0,0);">"</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> };<br>
Mapper.CreateMap</span>&lt;TB_MENU, DTO_TB_MENU&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">();
</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> oDto = Mapper.Map&lt;DTO_TB_MENU&gt;(oMenu);</pre>
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">首先创建映射，然后传入需要映射的对象执行映射。相信在项目中使用过AutoMapper的原因肯定也写过类似这样的AutoMapperHelper&nbsp;</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,128,128);">///</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,128,128);">&lt;summary&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,128,128);">///</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);"> AutoMapper帮助类
    </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,128,128);">///</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,128,128);">&lt;/summary&gt;</span>
    <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">static</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> AutoMapperHelper
    {
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,128,128);">///</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,128,128);">&lt;summary&gt;</span>
        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,128,128);">///</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">  单个对象映射
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,128,128);">///</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,128,128);">&lt;/summary&gt;</span>
        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">static</span> T MapTo&lt;T&gt;(<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">this</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">object</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> obj)
        {
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">if</span> (obj == <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">null</span>) <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">default</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">(T);
            Mapper.CreateMap(obj.GetType(), </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">typeof</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">(T));
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span> Mapper.Map&lt;T&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">(obj);
        }

        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,128,128);">///</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,128,128);">&lt;summary&gt;</span>
        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,128,128);">///</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);"> 集合列表类型映射
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,128,128);">///</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(128,128,128);">&lt;/summary&gt;</span>
        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">static</span> List&lt;TDestination&gt; MapToList&lt;TSource, TDestination&gt;(<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">this</span> IEnumerable&lt;TSource&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> source)
        {
            Mapper.CreateMap</span>&lt;TSource, TDestination&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">();
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span> Mapper.Map&lt;List&lt;TDestination&gt;&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">(source);
        }
    }</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">当然，这是最简单的用法，稍微复杂点的用法我们在后面慢慢介绍。</p> 
   <h3 style="font-size:16px;line-height:24px;font-family:'微软雅黑', PTSans, Arial, sans-serif;">2、指定字段的对象映射</h3> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">前面说了，对于指定某一个对象的某个属性映射到另一个对象的某一个属性，这种场景，我们先来看看下面代码：<span style="line-height:1.5;">&nbsp;</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">　　 public</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">partial</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> TB_USERS : BaseEntity
    {
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">string</span> USER_ID { <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">get</span>; <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">set</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">; }
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">string</span> USER_NAME { <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">get</span>; <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">set</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">; }
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">string</span> USER_PASSWORD { <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">get</span>; <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">set</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">; }
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">string</span> FULLNAME { <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">get</span>; <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">set</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">; }
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">string</span> DEPARTMENT_ID { <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">get</span>; <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">set</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">; }

　　  　 </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">virtual</span> TB_DEPARTMENT TB_DEPARTMENT { <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">get</span>; <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">set</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">; }
　　　　 </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">...后面肯定还有其他领域行为</span>
    }</pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">&nbsp;</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;">
    <pre><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">　　 public</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">partial</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> TB_DEPARTMENT : BaseEntity
    {
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">string</span> DEPARTMENT_ID { <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">get</span>; <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">set</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">; }
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">string</span> NAME { <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">get</span>; <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">set</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">; }
    }</span></pre>
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">&nbsp;领域层有这两个实体model，然后我们需要得到下面的DTO_TB_USERS这一个对象</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">　　 public</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> DTO_TB_USERS
    {
        [DataMember]
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">string</span> USER_ID { <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">get</span>; <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">set</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">; }
        
        [DataMember]
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">string</span> USER_NAME { <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">get</span>; <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">set</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">; }
        
        [DataMember]
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">string</span> USER_PASSWORD { <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">get</span>; <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">set</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">; }
        
        [DataMember]
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">string</span> FULLNAME { <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">get</span>; <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">set</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">; }
        
        [DataMember]
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">string</span> DEPARTMENT_ID { <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">get</span>; <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">set</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">; }<br><br>
[DataMember]<br>
public string DEPARTMENT_NAME { get; set; }<br>
}</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">&nbsp;这个时候DTO_TB_USERS这个对象的属性分布在其他两个领域实体里面，我们看看AutoMapper如何解决：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;">
    <pre><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> oDomainUser =<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> userRepository.Entities.FirstOrDefault();
</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> map = Mapper.CreateMap&lt;TB_USERS, DTO_TB_USERS&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">();
map.ForMember(d </span>=&gt; d.DEPARTMENT_NAME, opt =&gt; opt.MapFrom(x =&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> x.TB_DEPARTMENT.NAME));
</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> oDto = Mapper.Map&lt;TB_USERS, DTO_TB_USERS&gt;(oDomainUser);  </pre>
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">通过上面的代码，ForMember()方法会指定哪个字段转换为哪个字段，这样就完美的将对象的层级结构由二级变成了一级（即将TB_USERS下面TB_DEPARTMENT对象的NAME值转换成了DTO_TB_USERS的DEPARTMENT_NAME值）。除此之外，Automapper里面还可以通过ForMember帮我们做其他很多我们想不到的事情，比如可以设置某个属性值保留初始值，只需要通过</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;">
    <pre>map.ForMember(d =&gt; d.DEPARTMENT_NAME, opt =&gt; opt.Ignore());</pre>
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">这一句就帮我们搞定。&nbsp;</p> 
   <h3 style="font-size:16px;line-height:24px;font-family:'微软雅黑', PTSans, Arial, sans-serif;">3、传递lamada的表达式映射</h3> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">还记得我们在仓储里面封装了传递lamada表达式的查询方法么？试想，如果我们在Web层里面也希望传递lamada表达式去后台查询，那么这个时候就有点问题了，因为我们Web里面只能访问DTO的Model，所以只能传入DTO Model的lamada，而我们仓储里面需要传入的是领域Model的lamada，那么问题就来了，这两个lamada表达式之间必须存在一个转换关系，试想，这些东西如果让我们手动去处理，还是有难度的吧！还好，我们神奇的Automapper替我们想到了。它能够帮我们将DTO的lamada转换成领域Model的lamada，来看看代码吧：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">　　　　 [Import]
　　　　 </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> IUserRepository userRepository { <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">get</span>; <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">set</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">; }

　　　　 </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">virtual</span> IList&lt;DTO&gt; Find(Expression&lt;Func&lt;DTO, <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">bool</span>&gt;&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> selector)
        {
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">得到从Web传过来和DTOModel相关的lamaba表达式的委托</span>
            Func&lt;DTO, <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">bool</span>&gt; match =<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> selector.Compile();
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">创建映射Expression的委托</span>
            Func&lt;T, DTO&gt; mapper = AutoMapper.QueryableExtensions.Extensions.CreateMapExpression&lt;T, DTO&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">(Mapper.Engine).Compile();
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">得到领域Model相关的lamada</span>
            Expression&lt;Func&lt;T, <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">bool</span>&gt;&gt; lamada = ef_t =&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> match(mapper(ef_t));</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">
            List</span>&lt;T&gt; list =<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> userRepository.Find(lamada).ToList();
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span> Mapper.Map&lt;List&lt;T&gt;, List&lt;DTO&gt;&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">(list);
        }</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">上面方法完美实现了两种lamada之间的转换，但根据博主的使用经历，这种转换对属性的类型有很严格的要求，必须保证领域model和DTO的Model同一个属性的类型完全相同，否则容易报异常。使用的时候需要注意。实际使用的方法：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> List&lt;DtoModel&gt; GetDtoByLamada&lt;DtoModel,DomainModel&gt;(IRepository&lt;DomainModel&gt; oRepository,  Expression&lt;Func&lt;DtoModel, <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">bool</span>&gt;&gt; selector = <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">null</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">)
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">where</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> DomainModel : AggregateRoot
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">where</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> DtoModel : DTO_BASEMODEL
        {
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">if</span> (selector == <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">null</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">)
            {
                </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">var</span> lstDomainModel =<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> oRepository.Entities.ToList();
                </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span> Mapper.Map&lt;List&lt;DomainModel&gt;, List&lt;DtoModel&gt;&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">(lstDomainModel);
            }
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">得到从Web传过来和DTOModel相关的lamaba表达式的委托</span>
            Mapper.CreateMap&lt;DtoModel, DomainModel&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">();
            Mapper.CreateMap</span>&lt;DomainModel, DtoModel&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">();
            Func</span>&lt;DtoModel, <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">bool</span>&gt; match =<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> selector.Compile();
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">创建映射Expression的委托</span>
            Func&lt;DomainModel, DtoModel&gt; mapper = AutoMapper.QueryableExtensions.Extensions.CreateMapExpression&lt;DomainModel, DtoModel&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">(Mapper.Engine).Compile();
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">得到领域Model相关的lamada</span>
            Expression&lt;Func&lt;DomainModel, <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">bool</span>&gt;&gt; lamada = ef_t =&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> match(mapper(ef_t));
            List</span>&lt;DomainModel&gt; list =<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> oRepository.Find(lamada).ToList();
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span> Mapper.Map&lt;List&lt;DomainModel&gt;, List&lt;DtoModel&gt;&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">(list);
        }</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">调用</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">class</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> PowerManageWCFService :BaseService, IPowerManageWCFService
    {
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">#region</span> Fields<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">
        [Import]
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">private</span> IUserRepository userRepository { <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">get</span>; <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">set</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">; }

        [Import]
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">private</span> IDepartmentRepository departmentRepository { <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">get</span>; <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">set</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">; }

        [Import]
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">private</span> IRoleRepository roleRepository { <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">get</span>; <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">set</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">; }

        [Import]
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">private</span> IMenuRepository menuRepository { <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">get</span>; <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">set</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">; } 
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">#endregion</span>

        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">#region</span> Constust
        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> PowerManageWCFService()
        {
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">//</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,128,0);">注册MEF</span>
            Regisgter.regisgter().ComposeParts(<span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">this</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">);
        }
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">#endregion</span>

        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">#region</span> WCF服务接口实现
        <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> List&lt;DTO_TB_USERS&gt; GetUsers(Expression&lt;Func&lt;DTO_TB_USERS, <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">bool</span>&gt;&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> selector)
        {</span>
            <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">base</span>.GetDtoByLamada&lt;DTO_TB_USERS, TB_USERS&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">(userRepository, selector);
        }

        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> List&lt;DTO_TB_DEPARTMENT&gt; GetDepartments(Expression&lt;Func&lt;DTO_TB_DEPARTMENT, <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">bool</span>&gt;&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> selector)
        {
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">base</span>.GetDtoByLamada&lt;DTO_TB_DEPARTMENT, TB_DEPARTMENT&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">(departmentRepository, selector);
        }

        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> List&lt;DTO_TB_ROLE&gt; GetRoles(Expression&lt;Func&lt;DTO_TB_ROLE, <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">bool</span>&gt;&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> selector)
        {
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">base</span>.GetDtoByLamada&lt;DTO_TB_ROLE, TB_ROLE&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">(roleRepository, selector);
        }

        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">public</span> List&lt;DTO_TB_MENU&gt; GetMenus(Expression&lt;Func&lt;DTO_TB_MENU, <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">bool</span>&gt;&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> selector)
        {
            </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span> <span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">base</span>.GetDtoByLamada&lt;DTO_TB_MENU, TB_MENU&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">(menuRepository, selector);
        } 
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">#endregion</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;">
}</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">&nbsp;</p> 
   <h3 style="font-size:16px;line-height:24px;font-family:'微软雅黑', PTSans, Arial, sans-serif;">4、Automapper的其他应用</h3> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">除了上面介绍的Automapper的几个简单使用，其他还有其他的一些用法。</p> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">网上很多介绍DataReader对象和实体类之间的映射：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);line-height:24px;font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">using</span> (IDataReader reader =<span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> db.ExecuteReader(command))
{
    </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">if</span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;"> (reader.Read())
    {
        </span><span style="font-family:'Courier New';font-size:12px;line-height:1.5;color:rgb(0,0,255);">return</span> AutoMapper.Mapper.DynamicMap&lt;Product&gt;<span style="font-family:'Courier New';font-size:12px;line-height:1.5;">(reader);
    }
}</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(39,105,192);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:'微软雅黑', PTSans, Arial, sans-serif;font-size:16px;line-height:24px;">&nbsp;至此，AutoMapper的常见用法基本分享完了，至于更高级的用法，有兴趣可以看看蟋蟀兄的<a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/xishuai/p/3700052.html" rel="nofollow" style="color:rgb(39,105,192);text-decoration:none;">【AutoMapper官方文档】DTO与Domin Model相互转换（上）</a>。虽然很多高级用法在实际项目中很难用上，但多了解一点似乎也并没有坏处。</p> 
   <div>
    <br>
   </div> 
   <div>
    <br>
   </div> 
   <div>
    <br>
   </div> 
   <div>
    <br>
   </div> 
   <div>
    <br>
   </div> 
   <div>
    <br>
   </div> 
   <div>
    本文转自懒得安分博客园博客，原文链接：http://www.cnblogs.com/landeanfen/p/4842015.html，如需转载请自行联系原作者
    <br>
   </div> 
   <div>
    <br>
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
