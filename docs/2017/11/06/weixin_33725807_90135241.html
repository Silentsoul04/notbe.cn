<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>“一切都是消息”--MSF（消息服务框架）之【发布-订阅】模式 « NotBeCN</title>
  <meta name="description" content="             在上一篇，“一切都是消息”--MSF（消息服务框架）之【请求-响应】模式&nbsp;，我们演示了MSF实现简单的请求-响应模式的示例，今天来看看如何实现【发布-订阅】模式。简单来说，该模式的工作过程是：    客户端发起订阅--》服务器接受订阅--》服务器处理被订阅的服务方法--》 服务...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/06/weixin_33725807_90135241.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">“一切都是消息”--MSF（消息服务框架）之【发布-订阅】模式</h1>
    <p class="post-meta">Nov 6, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">在上一篇，<a id="cb_post_title_url" href="http://www.cnblogs.com/bluedoctor/p/7632887.html" rel="nofollow" style="color:rgb(29,88,209);text-decoration:none;">“一切都是消息”--MSF（消息服务框架）之【请求-响应】模式</a>&nbsp;，我们演示了MSF实现简单的请求-响应模式的示例，今天来看看如何实现【发布-订阅】模式。简单来说，该模式的工作过程是：</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><span style="color:rgb(0,0,255);">客户端发起订阅--》服务器接受订阅--》服务器处理被订阅的服务方法--》 服务器将处理结果推送给客户端--》客户端收到消息--》客户端关闭订阅连接</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;<img src="https://images2017.cnblogs.com/blog/114517/201710/114517-20171014164714637-445381142.gif" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">MSF的【发布-订阅】通信模式，支持2种模式，分别是：</p> 
   <h1 style="font-size:28px;line-height:1.5;font-family:Verdana, Arial, Helvetica, sans-serif;">一、定时推送模式</h1> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">这是最普通最常见的推送模式，只要客户端订阅了MSF的服务，服务器会每隔一秒向客户端推送一次服务处理结果。在下面的示例中，我们先来演示一个简单的“服务器时间服务”的功能。</p> 
   <h2 style="font-size:21px;line-height:1.5;font-family:Verdana, Arial, Helvetica, sans-serif;">1.1，编写“时间服务”</h2> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">在TestService项目添加一个类文件 TimeService.cs ，其代码如下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(29,88,209);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,0,255);line-height:1.5;">using</span><span style="line-height:1.5;"> System;
</span><span style="color:rgb(0,0,255);line-height:1.5;">using</span><span style="line-height:1.5;"> System.Collections.Generic;
</span><span style="color:rgb(0,0,255);line-height:1.5;">using</span><span style="line-height:1.5;"> System.Linq;
</span><span style="color:rgb(0,0,255);line-height:1.5;">using</span><span style="line-height:1.5;"> System.Text;

</span><span style="color:rgb(0,0,255);line-height:1.5;">namespace</span><span style="line-height:1.5;"> TestService
{
    </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> TimeService:ServiceBase
    {
        </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span><span style="line-height:1.5;"> DateTime ServerTime()
        {
            </span><span style="color:rgb(0,0,255);line-height:1.5;">return</span><span style="line-height:1.5;"> DateTime.Now;
        }
    }
}</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(29,88,209);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">注意：今天我们这个MSF服务类TimeService 集成的不是前一篇说的IService接口，而是 ServiceBase 抽象类，实际上它也是实现了IService接口的类，这样可以让我们的服务类代码更简单。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">别忘了，在IOC配置文件 IOCConfig.xml 注册我们新添加的服务：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';">
    <pre><span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">IOC </span><span style="color:rgb(255,0,0);line-height:1.5;">Name</span><span style="color:rgb(0,0,255);line-height:1.5;">="TestService"</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
     <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">Add </span><span style="color:rgb(255,0,0);line-height:1.5;">Key</span><span style="color:rgb(0,0,255);line-height:1.5;">="TestTimeService"</span><span style="color:rgb(255,0,0);line-height:1.5;"> InterfaceName</span><span style="color:rgb(0,0,255);line-height:1.5;">="IService"</span><span style="color:rgb(255,0,0);line-height:1.5;"> FullClassName</span><span style="color:rgb(0,0,255);line-height:1.5;">="TestService.TimeService"</span><span style="color:rgb(255,0,0);line-height:1.5;"> Assembly</span><span style="color:rgb(0,0,255);line-height:1.5;">="TestService"</span> <span style="color:rgb(0,0,255);line-height:1.5;">/&gt;</span>
     <span style="color:rgb(0,128,0);line-height:1.5;">&lt;!--</span><span style="color:rgb(0,128,0);line-height:1.5;"> 其它略 </span><span style="color:rgb(0,128,0);line-height:1.5;">--&gt;</span> 
<span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">IOC</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span></pre>
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">该配置需要注意3点：</p> 
   <ol style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">
    <li style="list-style-type:decimal;">虽然TimeService 继承的是ServiceBase 对象，但在这里配置 InterfaceName的时候，仍然使用 IService</li> 
    <li style="list-style-type:decimal;">Key="TestTimeService" 而不是 Key="TimeService" ，实际上这里配置的Key 可以是任意名字，只要跟配置文件中其它Key的值不重复即可</li> 
    <li style="list-style-type:decimal;">调用服务的时候，ServiceRequest 对象的 ServiceName 属性指定的服务名称，是这里配置的Key的值，而不是MSF服务类的类名</li> 
   </ol>
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;</p> 
   <h2 style="font-size:21px;line-height:1.5;font-family:Verdana, Arial, Helvetica, sans-serif;">1.2，在TestClient 项目添加订阅服务的代码：</h2> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">在订阅前，我们可以直接请求下上面的【服务器时间】服务，测试下服务是否可行：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';">
    <pre>DateTime serverTime = client.RequestServiceAsync&lt;DateTime&gt;(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">Service://TestTimeService/ServerTime/</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">, 
                PWMIS.EnterpriseFramework.Common.DataType.DateTime).Result;
Console.WriteLine(</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">MSF Get Server Time:{0}</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>, serverTime);</pre>
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;测试成功，下面继续编写订阅模式的代码：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(29,88,209);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>            ServiceRequest request3 = <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> ServiceRequest();
            request3.ServiceName </span>= <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">TestTimeService</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">;
            request3.MethodName </span>= <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">ServerTime</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">;
            </span><span style="color:rgb(0,0,255);line-height:1.5;">int</span> count = <span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;">;
            client.Subscribe</span>&lt;DateTime&gt;<span style="line-height:1.5;">(request3, 
                PWMIS.EnterpriseFramework.Common.DataType.DateTime, 
                s </span>=&gt;<span style="line-height:1.5;"> 
                {
                    </span><span style="color:rgb(0,0,255);line-height:1.5;">if</span><span style="line-height:1.5;"> (s.Succeed)
                    {
                        Console.WriteLine(</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">MSF Server Time:{0}</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">, s.Result);
                      
                    }
                    </span><span style="color:rgb(0,0,255);line-height:1.5;">else</span><span style="line-height:1.5;">
                    {
                        Console.WriteLine(</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">MSF Server Error:{0}</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">, s.ErrorMessage);
                    }
                    count</span>++<span style="line-height:1.5;">;
                    </span><span style="color:rgb(0,0,255);line-height:1.5;">if</span> (count &gt; <span style="color:rgb(128,0,128);line-height:1.5;">10</span><span style="line-height:1.5;">)
                    {
                        client.Close();
                        Console.WriteLine(</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">订阅【服务器时钟服务】结束。按回车键继续。</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">);
                    }
                });</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(29,88,209);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">与请求模式不同，客户端要使用订阅模式，只需要将服务代理类的 RequestService 方法替换成 Subscribe 方法，该方法的第一个泛型参数类型表示订阅的结果的类型。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">由于是订阅模式， Subscribe 不提供Async的同名方法，因为服务器会多次向客户端推送订阅的结果，何时订阅结束，可以由客户端来决定，在客户端提供的服务端回调方法内来关闭订阅的连接即可。所以Subscribe 方法的下一行代码会立即执行，无法实现RequestServiceAsync 这种“同步”效果。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">在当前示例中，服务端会向客户端推送10次服务器时间，然后客户端会关闭订阅连接。假如客户端不关闭订阅连接，服务器会一直向客户端推送订阅结果，每秒推送一次。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">下面是这个示例的运行结果：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(29,88,209);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>MSF Server Time:2017-10-11 10:33:48
MSF Server Time:2017-10-11 10:33:49
MSF Server Time:2017-10-11 10:33:50
MSF Server Time:2017-10-11 10:33:51
MSF Server Time:2017-10-11 10:33:52
MSF Server Time:2017-10-11 10:33:53
MSF Server Time:2017-10-11 10:33:54
MSF Server Time:2017-10-11 10:33:55
MSF Server Time:2017-10-11 10:33:56
MSF Server Time:2017-10-11 10:33:58
MSF Server Time:2017-10-11 10:33:59
订阅【服务器时钟服务】结束。按回车键继续。</pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(29,88,209);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <h2 style="font-size:21px;line-height:1.5;font-family:Verdana, Arial, Helvetica, sans-serif;">&nbsp;1.3，改变推送频率</h2> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">默认情况下，定时推送模式是每秒推送一次，你可以在定义方法中调用基类的方法来修改它，具体代码略。</p> 
   <h1 style="font-size:28px;line-height:1.5;font-family:Verdana, Arial, Helvetica, sans-serif;">二、事件推送模式</h1> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">有时候我们并不需要固定间隔时间（例如每秒）调用服务方法然后将处理结果推送给客户端，而是在某个特定的时间才向客户端推送订阅的服务结果，这个需求可以在服务端实现一个定时器，在时间到了后才推送，或者，进行某项业务处理过程，满足某项业务条件后，触发一个业务事件，在这个业务事件中，将订阅的结果推送给客户端。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">定时器处理的是它触发的事件，业务处理过程也可以触发某种业务操作事件，所以这种推送模式，就是“<strong>事件推送模式</strong>”，跟前面的“<strong>定时推送模式</strong>”是完全不同的模式，在事件推送模式中，看起来是将服务端的事件，推送到客户端订阅的方法里面去了，事件的实际处理，到了客户端，因此，事件推送模式，也是一种“<strong>分布式事件</strong>”处理模式。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">下面我们来实现一个“闹铃服务”，客户端订阅此闹铃服务，指定响铃的时间和响铃的次数，服务端的闹铃到了指定时间，就会向客户端推送“闹铃服务”：“闹铃响了”，一直推送到客户端指定的次数为止。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">与定时推送不同的是，事件推送模式，要求被订阅的方法，返回&nbsp;<strong>ServiceEventSource</strong>&nbsp;类型，它表示一个事件源对象，请看下面的闹钟服务示例。</p> 
   <h2 style="font-size:21px;line-height:1.5;font-family:Verdana, Arial, Helvetica, sans-serif;">2.1,编写闹钟服务</h2> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">在TestService项目添加闹钟服务类文件&nbsp;AlarmClockService.cs，其代码如下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(29,88,209);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre> <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> AlarmClockService:ServiceBase
    {
        System.Timers.Timer timer;
        DateTime AlarmTime;
        </span><span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> AlarmCount;
        </span><span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> MaxAlarmCount;

        </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">event</span><span style="line-height:1.5;"> EventHandler Alarming;

        </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span><span style="line-height:1.5;"> AlarmClockService()
        {
            timer </span>= <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> System.Timers.Timer();
            timer.Interval </span>= <span style="color:rgb(128,0,128);line-height:1.5;">10000</span><span style="line-height:1.5;">;
            timer.Elapsed </span>+=<span style="line-height:1.5;"> timer_Elapsed;
        }

        </span><span style="color:rgb(0,0,255);line-height:1.5;">void</span> timer_Elapsed(<span style="color:rgb(0,0,255);line-height:1.5;">object</span><span style="line-height:1.5;"> sender, System.Timers.ElapsedEventArgs e)
        {
            </span><span style="color:rgb(0,0,255);line-height:1.5;">if</span> (e.SignalTime &gt;= <span style="color:rgb(0,0,255);line-height:1.5;">this</span><span style="line-height:1.5;">.AlarmTime)
            {
                </span><span style="color:rgb(0,0,255);line-height:1.5;">if</span> (Alarming != <span style="color:rgb(0,0,255);line-height:1.5;">null</span><span style="line-height:1.5;">)
                    Alarming(</span><span style="color:rgb(0,0,255);line-height:1.5;">this</span>, <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> EventArgs());

                </span><span style="color:rgb(0,0,255);line-height:1.5;">base</span>.CurrentContext.PublishData(DateTime.Now); <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">e.SignalTime</span>
                AlarmCount++<span style="line-height:1.5;">;
                Console.WriteLine(</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">AlarmClockService Publish Count:{0}</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">, AlarmCount);
            }
            </span><span style="color:rgb(0,0,255);line-height:1.5;">else</span><span style="line-height:1.5;">
            {
                Console.WriteLine(</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">Alarm Time:{0},AlarmClock waiting...</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>,<span style="color:rgb(0,0,255);line-height:1.5;">this</span><span style="line-height:1.5;">.AlarmTime);
            }
            </span><span style="color:rgb(0,0,255);line-height:1.5;">if</span> (AlarmCount &gt;<span style="line-height:1.5;"> MaxAlarmCount)
            {
                timer.Stop();
                </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">推送一个结束标记值：1900-1-1</span>
                <span style="color:rgb(0,0,255);line-height:1.5;">base</span>.CurrentContext.PublishData(<span style="color:rgb(0,0,255);line-height:1.5;">new</span> DateTime(<span style="color:rgb(128,0,128);line-height:1.5;">1900</span>, <span style="color:rgb(128,0,128);line-height:1.5;">1</span>, <span style="color:rgb(128,0,128);line-height:1.5;">1</span><span style="line-height:1.5;">));
                Console.WriteLine(</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">[{0}] AlarmClockService Timer Stoped. </span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>, <span style="color:rgb(0,0,255);line-height:1.5;">new</span> DateTime(<span style="color:rgb(128,0,128);line-height:1.5;">1900</span>,<span style="color:rgb(128,0,128);line-height:1.5;">1</span>,<span style="color:rgb(128,0,128);line-height:1.5;">1</span><span style="line-height:1.5;">));
                </span><span style="color:rgb(0,0,255);line-height:1.5;">base</span><span style="line-height:1.5;">.CurrentContext.PublishEventSource.DeActive();
            }
        }


        </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span><span style="line-height:1.5;"> ServiceEventSource SetAlarmTime(AlarmClockParameter para)
        {
            </span><span style="color:rgb(0,0,255);line-height:1.5;">this</span>.MaxAlarmCount =<span style="line-height:1.5;"> para.AlarmCount;
            </span><span style="color:rgb(0,0,255);line-height:1.5;">this</span>.AlarmTime =<span style="line-height:1.5;"> para.AlarmTime;
            </span><span style="color:rgb(0,0,255);line-height:1.5;">return</span> <span style="color:rgb(0,0,255);line-height:1.5;">new</span> ServiceEventSource(timer, <span style="color:rgb(128,0,128);line-height:1.5;">2</span>, () =&gt;<span style="line-height:1.5;">
            {
                </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">要初始化执行的代码或者方法</span>
                AlarmCount = <span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;">;
                timer.Start();
                </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">如果上面的代码是一个执行时间比较长的方法，但又不知道何时执行完成，
                </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">并且不想等待超时回收服务对象，而是在执行完成后立即回收服务对象，可以调用下面的代码：
                </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">CurrentContext.PublishEventSource.DeActive();
                </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">注意：调用DeActive 方法后将会停止事件推送，所以请注意此方法调用的时机。

                </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">下面代码仅做测试，查看服务事件源对象的活动生命周期
                </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">在 ActiveLife 时间之后，一直没有事件推送，则事件源对象被视为非活动状态，发布工作线程会被回收。
                </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">在本例中，ActiveLife 为ServiceEventSource 构造函数的第二个参数，值为 2分钟，可以通过下面一行代码证实：</span>
                <span style="color:rgb(0,0,255);line-height:1.5;">int</span> life = <span style="color:rgb(0,0,255);line-height:1.5;">base</span><span style="line-height:1.5;">.CurrentContext.PublishEventSource.ActiveLife;

                </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">如果上面执行的是一个执行时间比较长的方法，并且有返回值，想将返回值也推送给订阅端，可以再次执行CurrentContext.PublishData
                </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">CurrentContext.PublishData(DateTime.Now);

                </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">如果事件推送结束，需要设置事件源为非活动状态，否则，需要等待 ActiveLife 时间之后自然过期成为非活动状态。
                </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">如果你无法确定事件推送何时结束，请不要调用下面的方法
                </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">CurrentContext.PublishEventSource.DeActive();</span>
<span style="line-height:1.5;">            });
        }
    }</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(29,88,209);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">注意：</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">跟上面一样，不要忘记了在IOCConfig.xml文件注册此闹钟服务。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><br> 闹钟服务的类中有一个定时器对象，当订阅闹钟服务的 SetAlarmTime 方法的时候，会给闹钟服务传入必要的参数以便闹钟工作，参数类AlarmClockParameter 定义在 TestDto项目中，其代码如下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(29,88,209);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,0,255);line-height:1.5;">using</span><span style="line-height:1.5;"> System;
</span><span style="color:rgb(0,0,255);line-height:1.5;">using</span><span style="line-height:1.5;"> System.Collections.Generic;
</span><span style="color:rgb(0,0,255);line-height:1.5;">using</span><span style="line-height:1.5;"> System.Linq;
</span><span style="color:rgb(0,0,255);line-height:1.5;">using</span><span style="line-height:1.5;"> System.Text;

</span><span style="color:rgb(0,0,255);line-height:1.5;">namespace</span><span style="line-height:1.5;"> TestDto
{
    </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> AlarmClockParameter
    {
        </span><span style="color:rgb(128,128,128);line-height:1.5;">///</span> <span style="color:rgb(128,128,128);line-height:1.5;">&lt;summary&gt;</span>
        <span style="color:rgb(128,128,128);line-height:1.5;">///</span><span style="color:rgb(0,128,0);line-height:1.5;"> 响铃时间
        </span><span style="color:rgb(128,128,128);line-height:1.5;">///</span> <span style="color:rgb(128,128,128);line-height:1.5;">&lt;/summary&gt;</span>
        <span style="color:rgb(0,0,255);line-height:1.5;">public</span> DateTime AlarmTime { <span style="color:rgb(0,0,255);line-height:1.5;">get</span>; <span style="color:rgb(0,0,255);line-height:1.5;">set</span><span style="line-height:1.5;">; }
        </span><span style="color:rgb(128,128,128);line-height:1.5;">///</span> <span style="color:rgb(128,128,128);line-height:1.5;">&lt;summary&gt;</span>
        <span style="color:rgb(128,128,128);line-height:1.5;">///</span><span style="color:rgb(0,128,0);line-height:1.5;"> 响铃次数
        </span><span style="color:rgb(128,128,128);line-height:1.5;">///</span> <span style="color:rgb(128,128,128);line-height:1.5;">&lt;/summary&gt;</span>
        <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">int</span> AlarmCount { <span style="color:rgb(0,0,255);line-height:1.5;">get</span>; <span style="color:rgb(0,0,255);line-height:1.5;">set</span><span style="line-height:1.5;">; }
    }
}</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(29,88,209);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <h2 style="font-size:21px;line-height:1.5;font-family:Verdana, Arial, Helvetica, sans-serif;">2.2，编写闹铃服务订阅客户端</h2> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(29,88,209);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>            AlarmClockParameter acp = <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> AlarmClockParameter();
            acp.AlarmCount </span>= <span style="color:rgb(128,0,128);line-height:1.5;">10</span><span style="line-height:1.5;">;
            acp.AlarmTime </span>=<span style="line-height:1.5;"> alarmTime;

            ServiceRequest request4 </span>= <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> ServiceRequest();
            request4.ServiceName </span>= <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">AlarmClockService</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">;
            request4.MethodName </span>= <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">SetAlarmTime</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">;
            request4.Parameters </span>= <span style="color:rgb(0,0,255);line-height:1.5;">new</span> <span style="color:rgb(0,0,255);line-height:1.5;">object</span><span style="line-height:1.5;">[] { acp };

            client.Subscribe</span>&lt;DateTime&gt;<span style="line-height:1.5;">(request4,
                  PWMIS.EnterpriseFramework.Common.DataType.DateTime, 
                  s </span>=&gt;<span style="line-height:1.5;">
                  {
                      </span><span style="color:rgb(0,0,255);line-height:1.5;">if</span><span style="line-height:1.5;"> (s.Succeed)
                      {
                          Console.WriteLine(</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">闹钟响了，现在时间:{0}</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">, s.Result);
                          </span><span style="color:rgb(0,0,255);line-height:1.5;">if</span> (s.Result == <span style="color:rgb(0,0,255);line-height:1.5;">new</span> DateTime(<span style="color:rgb(128,0,128);line-height:1.5;">1900</span>, <span style="color:rgb(128,0,128);line-height:1.5;">1</span>, <span style="color:rgb(128,0,128);line-height:1.5;">1</span><span style="line-height:1.5;">))
                          {
                              client.Close();
                              Console.WriteLine(</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">闹铃服务结束，按回车键继续。</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">);
                          }
                      }
                      </span><span style="color:rgb(0,0,255);line-height:1.5;">else</span><span style="line-height:1.5;">
                      {
                          Console.WriteLine(</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">MSF Server Error:{0}</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">, s.ErrorMessage);
                          client.Close();
                      }
              });</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(29,88,209);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">这个订阅客户端，像前面订阅服务器时间一样，没有区别，这里不多解释。</p> 
   <h2 style="font-size:21px;line-height:1.5;font-family:Verdana, Arial, Helvetica, sans-serif;">2.3，注册MSF服务方法的参数类</h2> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">运行此服务端和客户端，发现客户端输出了下面的异常信息：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';">
    <pre>---处理服务时错误：系统不能处理当前类型的参数：TestDto.AlarmClockParameter</pre>
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">这个消息是前面服务代理类的错误处理事件输出的结果：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(29,88,209);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>  Proxy client = <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> Proxy();
   client.ErrorMessage </span>+=<span style="line-height:1.5;"> client_ErrorMessage;

   </span><span style="color:rgb(0,0,255);line-height:1.5;">static</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span> client_ErrorMessage(<span style="color:rgb(0,0,255);line-height:1.5;">object</span><span style="line-height:1.5;"> sender, MessageSubscriber.MessageEventArgs e)
        {
            Console.WriteLine(</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">---处理服务时错误：{0}</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">,e.MessageText);
        }</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(29,88,209);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">现在我们去看MSF Host控制台输出的相信错误信息：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(29,88,209);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>[2017-10-11 09:12:23.736]订阅消息-- From: 127.0.0.1:57822
[2017-10-11 09:12:23.752]正在处理服务请求--From: 127.0.0.1:57822,Identity:WMI2114256838
&gt;&gt;[PMID:1]Publish://AlarmClockService/SetAlarmTime/TestDto.AlarmClockParameter=TestDto.AlarmClockParameter
[2017-10-11 09:12:23]处理服务的时候发生异常：执行服务方法错误：
源错误信息：系统不能处理当前类型的参数：TestDto.AlarmClockParameter，
请求的Uri:
Publish://AlarmClockService/SetAlarmTime/TestDto.AlarmClockParameter=TestDto.AlarmClockParameter，
127.0.0.1:57822,WMI2114256838

错误发生时的异常对象调用堆栈：
System.ArgumentException: 系统不能处理当前类型的参数：TestDto.AlarmClockParameter
[2017-10-11 09:12:23.767]请求处理完毕(15.6339ms)--To: 127.0.0.1:57822,Identity:WMI2114256838
&gt;&gt;[PMID:1]消息长度：63字节 -------
result:Service_Execute_Error:系统不能处理当前类型的参数：TestDto.AlarmClockParameter
Publish Message OK.</pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(29,88,209);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">这说明MSF服务端不识别当前调用的服务方法上的参数类型 TestDto.AlarmClockParameter ，这里需要将这个自定义的参数类型注册到MSF的IOC配置文件上：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';">
    <pre> <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">IOC </span><span style="color:rgb(255,0,0);line-height:1.5;">Name</span><span style="color:rgb(0,0,255);line-height:1.5;">="ServiceModel"</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span>
      <span style="color:rgb(0,0,255);line-height:1.5;">&lt;</span><span style="color:rgb(128,0,0);line-height:1.5;">Add </span><span style="color:rgb(255,0,0);line-height:1.5;">Key</span><span style="color:rgb(0,0,255);line-height:1.5;">="AlarmClockParameter"</span><span style="color:rgb(255,0,0);line-height:1.5;">  InterfaceName</span><span style="color:rgb(0,0,255);line-height:1.5;">=""</span><span style="color:rgb(255,0,0);line-height:1.5;">  FullClassName</span><span style="color:rgb(0,0,255);line-height:1.5;">="TestDto.AlarmClockParameter"</span><span style="color:rgb(255,0,0);line-height:1.5;"> Assembly</span><span style="color:rgb(0,0,255);line-height:1.5;">="TestDto"</span> <span style="color:rgb(0,0,255);line-height:1.5;">/&gt;</span>
      <span style="color:rgb(0,128,0);line-height:1.5;">&lt;!--</span><span style="color:rgb(0,128,0);line-height:1.5;"> 其它略</span><span style="color:rgb(0,128,0);line-height:1.5;">--&gt;</span>
 <span style="color:rgb(0,0,255);line-height:1.5;">&lt;/</span><span style="color:rgb(128,0,0);line-height:1.5;">IOC</span><span style="color:rgb(0,0,255);line-height:1.5;">&gt;</span></pre>
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;注意：服务访问需要的自定义参数类型，必须注册在 ServiceModel 节点下。</p> 
   <h2 style="font-size:21px;line-height:1.5;font-family:Verdana, Arial, Helvetica, sans-serif;">2.4，运行订阅服务</h2> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">如果前面的配置都正确了，我们重新生成项目，启动MS Host 和TestClient，就可以看到客户端输出的结果了：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(29,88,209);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>请输入闹铃响铃时间(示例输入格式 11:54) &gt;&gt;11:55
订阅闹钟服务，闹钟将在 11:55 响铃...
闹钟响了，现在时间:2017-10-11 11:55:09
闹钟响了，现在时间:2017-10-11 11:55:19
闹钟响了，现在时间:2017-10-11 11:55:29
闹钟响了，现在时间:2017-10-11 11:55:39
闹钟响了，现在时间:2017-10-11 11:55:49
闹钟响了，现在时间:2017-10-11 11:55:59
闹钟响了，现在时间:2017-10-11 11:56:09
闹钟响了，现在时间:2017-10-11 11:56:19
闹钟响了，现在时间:2017-10-11 11:56:29
闹钟响了，现在时间:2017-10-11 11:56:39
闹钟响了，现在时间:2017-10-11 11:56:49
闹钟响了，现在时间:1900-1-1 0:00:00
闹铃服务结束，按回车键继续。</pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="font-size:12px;line-height:1.5;"><a title="复制代码" style="color:rgb(29,88,209);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">在客户端控制台输入闹铃时间，我们看到在时间到了后，服务器才向客户端推送了“响铃通知”消息，客户端处理这个事件将结果打印在屏幕上。</p> 
   <h1 style="font-size:28px;line-height:1.5;font-family:Verdana, Arial, Helvetica, sans-serif;">三、MSF的Actor模式</h1> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">在MSF的入门篇介绍中，我们说MSF具有实现Actor编程模型的能力，在MSF中，每一个被订阅的服务，它本质上都是一个<strong>分布式的Actor对象</strong>，这<span style="text-decoration:underline;">些Actor对象在第一次被订阅的时候激活，一直到没有任何客户端订阅它们为止。</span></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">对于同一个MSF服务类下的服务方法，当我们以订阅的方式激活此Actor的时候，是以被订阅的服务方法的参数来区分的，简单说，就是订阅的服务方法参数一样，那么多个客户端订阅的都是同一个MSF的服务对象实例。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">这个现象，可以通过本篇的“闹钟服务”订阅过程来验证，在第一个客户端订阅闹钟服务后，启动第二个TestClient程序，也来订阅闹钟服务，注意，2个进程订阅的闹钟服务，它的闹铃时间设置为一样。订阅后，我们发现，即使第一个订阅客户端已经开始收到服务器的“闹铃消息”推送，第二个订阅客户端加入进来后，可以马上收到同样的消息推送，这说明，两个客户端订阅的是同一个MSF的服务对象，也就是同一个Actor对象。我们注意观察 MSF Host的屏幕输出，也能验证这个结果，它会提示消息发送给了2个客户端，具体过程，大家可以去仔细看看，本篇不再说明。下面是效果图：</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><img src="https://images2017.cnblogs.com/blog/114517/201710/114517-20171011125041918-880680698.png" alt="" style="border:0px;"></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">---------------------------分界线------------------------------------------------------------------------</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">欢迎加入我们的QQ群讨论MSF框架的使用，群号：敏思（PWMIS） .NET 18215717，加群请注明：PDF.NET技术交流，否则可能被拒。</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;</p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><br></p> 
   <p><font><span style="font-size:15px;">&nbsp; &nbsp; 本文转自深蓝医生博客园博客，原文链接：http://www.cnblogs.com/bluedoctor/p/7649169.html</span></font><span style="font-size:15px;font-family:Verdana, Arial, Helvetica, sans-serif;">，如需转载请自行联系原作者</span></p> 
   <div>
    <br>
   </div> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><br></p> 
   <p style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:15px;"><br></p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
