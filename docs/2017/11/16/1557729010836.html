<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>面向云管理工具puppet的部署和文件传输测试 « NotBeCN</title>
  <meta name="description" content="             面向云管理工具puppet的部署和测试        &nbsp;系统环境：                    [root@rhel6u3-102&nbsp;puppet]#&nbsp;uname&nbsp;-r&nbsp;       2.6.32-279.el6.x86_64&n...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/16/1557729010836.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">面向云管理工具puppet的部署和文件传输测试</h1>
    <p class="post-meta">Nov 16, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);text-align:center;"><strong>面向云管理工具puppet的部署和测试</strong></p> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    &nbsp;系统环境：
   </div> 
   <p style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"><a href="http://blog.51cto.com/attachment/201304/210309284.jpg" rel="nofollow" style="text-decoration:none;color:rgb(66,133,244);"><img src="http://blog.51cto.com/attachment/201304/210309284.jpg" style="border:none;" alt="210309284.jpg"></a></p> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>[root@rhel6u3-102&nbsp;puppet]#&nbsp;uname&nbsp;-r&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p>2.6.32-279.el6.x86_64&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>[root@rhel6u3-102&nbsp;puppet]#&nbsp;cat&nbsp;/etc/redhat-release&nbsp;&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p>Red&nbsp;Hat&nbsp;Enterprise&nbsp;Linux&nbsp;Server&nbsp;release&nbsp;6.3&nbsp;(Santiago)&nbsp;</p> </li> 
   </ol>
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    一、前期准备工作
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    1、主机名能够互相解析（DNS上或者hosts文件中能够相互解析）
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    puppet&nbsp;master(rhel6u3-102.rsyslog.org&nbsp;192.168.100.102)
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    puppet&nbsp;agent节点（rhel6u3-207.rsyslog.org&nbsp;192.168.100.207）
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    2、系统时间必须一致
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"></div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    注意：本地已经下载好了安装包，并且配置好了yum源
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    二、安装puppet
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    服务器端master
   </div> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>yum&nbsp;install&nbsp;ruby&nbsp;ruby-libs&nbsp;ruby-shadow&nbsp;compat-readline5&nbsp;libselinux-ruby&nbsp;augeas-libs&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p>rpm&nbsp;-ivh&nbsp;facter-1.6.6-1.el6.x86_64.rpm&nbsp;puppet-2.6.18-3.el6.noarch.rpm&nbsp;puppet-server-2.6.18-3.el6.noarch.rpm&nbsp;ruby-augeas-0.4.1-1.el6.x86_64.rpm&nbsp;ruby-mysql-2.8.2-1.el6.x86_64.rpm&nbsp;ruby-shadow-1.4.1-13.el6.x86_64.rpm&nbsp;</p> </li> 
   </ol>
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    客户端节点slave（无需puttet-master）
   </div> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>yum&nbsp;install&nbsp;ruby&nbsp;ruby-libs&nbsp;ruby-shadow&nbsp;compat-readline5&nbsp;libselinux-ruby&nbsp;augeas-libs&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p>rpm&nbsp;-ivh&nbsp;facter-1.6.6-1.el6.x86_64.rpm&nbsp;puppet-2.6.18-3.el6.noarch.rpm&nbsp;&nbsp;ruby-augeas-0.4.1-1.el6.x86_64.rpm&nbsp;ruby-mysql-2.8.2-1.el6.x86_64.rpm&nbsp;ruby-shadow-1.4.1-13.el6.x86_64.rpm&nbsp;</p> </li> 
   </ol>
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <div>
     三、初始化puppet&nbsp;master(rhel6u3-102.rsyslog.org)
    </div> 
    <div>
     配置文件路径/etc/puppet/
    </div> 
    <div>
     查看配置文件方法：
    </div> 
    <pre>
</pre> 
    <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>sed&nbsp;-e&nbsp;'/#/d'&nbsp;-e&nbsp;'/^$/d'&nbsp;puppet.conf&nbsp;</p> </li>
    </ol>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <div>
     可通过以下命令生成一个更为详细的配置文件
    </div> 
   </div> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>#puppetmasterd&nbsp;--genconfig&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span>puppet.conf.out&nbsp;&nbsp;</p> </li>
   </ol>
   <br style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;">
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>[root@rhel6u3-102&nbsp;puppet]#&nbsp;sed&nbsp;-e&nbsp;'/#/d'&nbsp;-e&nbsp;'/^$/d'&nbsp;puppet.conf.out&nbsp;&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p>[master]&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">ssldir</span>&nbsp;=&nbsp;/var/lib/puppet/ssl&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">factdest</span>&nbsp;=&nbsp;/var/lib/puppet/facts/&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">privatekeydir</span>&nbsp;=&nbsp;/var/lib/puppet/ssl/private_keys&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">rundir</span>&nbsp;=&nbsp;/var/run/puppet&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">hostcsr</span>&nbsp;=&nbsp;/var/lib/puppet/ssl/csr_rhel6u3-102.rsyslog.org.pem&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">hostpubkey</span>&nbsp;=&nbsp;/var/lib/puppet/ssl/public_keys/rhel6u3-102.rsyslog.org.pem&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">plugindest</span>&nbsp;=&nbsp;/var/lib/puppet/lib&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">inventory_terminus</span>&nbsp;=&nbsp;<span class="attribute-value" style="border:none;color:#0000FF;">yaml</span></p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">publickeydir</span>&nbsp;=&nbsp;/var/lib/puppet/ssl/public_keys&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">factsource</span>&nbsp;=&nbsp;<span class="attribute-value" style="border:none;color:#0000FF;">puppet</span>://puppet/facts/&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">privatedir</span>&nbsp;=&nbsp;/var/lib/puppet/ssl/private&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">logdir</span>&nbsp;=&nbsp;/var/log/puppet&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">libdir</span>&nbsp;=&nbsp;/var/lib/puppet/lib&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">statedir</span>&nbsp;=&nbsp;/var/lib/puppet/state&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">hostcert</span>&nbsp;=&nbsp;/var/lib/puppet/ssl/certs/rhel6u3-102.rsyslog.org.pem&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">localcacert</span>&nbsp;=&nbsp;/var/lib/puppet/ssl/certs/ca.pem&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">pluginsource</span>&nbsp;=&nbsp;<span class="attribute-value" style="border:none;color:#0000FF;">puppet</span>://puppet/plugins&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">certdir</span>&nbsp;=&nbsp;/var/lib/puppet/ssl/certs&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">factpath</span>&nbsp;=&nbsp;/var/lib/puppet/lib/facter:/var/lib/puppet/facts&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">httplog</span>&nbsp;=&nbsp;/var/log/puppet/http.log&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">requestdir</span>&nbsp;=&nbsp;/var/lib/puppet/ssl/certificate_requests&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">passfile</span>&nbsp;=&nbsp;/var/lib/puppet/ssl/private/password&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">hostprivkey</span>&nbsp;=&nbsp;/var/lib/puppet/ssl/private_keys/rhel6u3-102.rsyslog.org.pem&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">hostcrl</span>&nbsp;=&nbsp;/var/lib/puppet/ssl/crl.pem&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">authconfig</span>&nbsp;=&nbsp;/etc/puppet/namespaceauth.conf&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">localconfig</span>&nbsp;=&nbsp;/var/lib/puppet/state/localconfig&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">client_datadir</span>&nbsp;=&nbsp;/var/lib/puppet/client_data&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">reportserver</span>&nbsp;=&nbsp;<span class="attribute-value" style="border:none;color:#0000FF;">puppet</span></p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">inventory_server</span>&nbsp;=&nbsp;<span class="attribute-value" style="border:none;color:#0000FF;">puppet</span></p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">ca_server</span>&nbsp;=&nbsp;<span class="attribute-value" style="border:none;color:#0000FF;">puppet</span></p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">lastrunreport</span>&nbsp;=&nbsp;/var/lib/puppet/state/last_run_report.yaml&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">node_name_value</span>&nbsp;=&nbsp;<span class="attribute-value" style="border:none;color:#0000FF;">rhel6u3</span>-102.rsyslog.org&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">statefile</span>&nbsp;=&nbsp;/var/lib/puppet/state/state.yaml&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">clientbucketdir</span>&nbsp;=&nbsp;/var/lib/puppet/clientbucket&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">classfile</span>&nbsp;=&nbsp;/var/lib/puppet/state/classes.txt&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">report_server</span>&nbsp;=&nbsp;<span class="attribute-value" style="border:none;color:#0000FF;">puppet</span></p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">inventory_port</span>&nbsp;=&nbsp;<span class="attribute-value" style="border:none;color:#0000FF;">8140</span></p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">ca_port</span>&nbsp;=&nbsp;<span class="attribute-value" style="border:none;color:#0000FF;">8140</span></p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">puppetdlockfile</span>&nbsp;=&nbsp;/var/lib/puppet/state/puppetdlock&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">splaylimit</span>&nbsp;=&nbsp;<span class="attribute-value" style="border:none;color:#0000FF;">1800</span></p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">clientyamldir</span>&nbsp;=&nbsp;/var/lib/puppet/client_yaml&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">puppetdlog</span>&nbsp;=&nbsp;/var/log/puppet/puppetd.log&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">report_port</span>&nbsp;=&nbsp;<span class="attribute-value" style="border:none;color:#0000FF;">8140</span></p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">lastrunfile</span>&nbsp;=&nbsp;/var/lib/puppet/state/last_run_summary.yaml&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">graphdir</span>&nbsp;=&nbsp;/var/lib/puppet/state/graphs&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">capub</span>&nbsp;=&nbsp;/var/lib/puppet/ssl/ca/ca_pub.pem&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">csrdir</span>&nbsp;=&nbsp;/var/lib/puppet/ssl/ca/requests&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">autosign</span>&nbsp;=&nbsp;/etc/puppet/autosign.conf&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">cert_inventory</span>&nbsp;=&nbsp;/var/lib/puppet/ssl/ca/inventory.txt&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">cacert</span>&nbsp;=&nbsp;/var/lib/puppet/ssl/ca/ca_crt.pem&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">cacrl</span>&nbsp;=&nbsp;/var/lib/puppet/ssl/ca/ca_crl.pem&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">signeddir</span>&nbsp;=&nbsp;/var/lib/puppet/ssl/ca/signed&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">serial</span>&nbsp;=&nbsp;/var/lib/puppet/ssl/ca/serial&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">ca_name</span>&nbsp;=&nbsp;<span class="attribute-value" style="border:none;color:#0000FF;">Puppet</span>&nbsp;CA:&nbsp;rhel6u3-102.rsyslog.org&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">cakey</span>&nbsp;=&nbsp;/var/lib/puppet/ssl/ca/ca_key.pem&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">caprivatedir</span>&nbsp;=&nbsp;/var/lib/puppet/ssl/ca/private&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">capass</span>&nbsp;=&nbsp;/var/lib/puppet/ssl/ca/private/ca.pass&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">cadir</span>&nbsp;=&nbsp;/var/lib/puppet/ssl/ca&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">railslog</span>&nbsp;=&nbsp;/var/log/puppet/rails.log&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">dblocation</span>&nbsp;=&nbsp;/var/lib/puppet/state/clientconfigs.sqlite3&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">rest_authconfig</span>&nbsp;=&nbsp;/etc/puppet/auth.conf&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">modulepath</span>&nbsp;=&nbsp;/etc/puppet/modules:/usr/share/puppet/modules&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">yamldir</span>&nbsp;=&nbsp;/var/lib/puppet/yaml&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">reportdir</span>&nbsp;=&nbsp;/var/lib/puppet/reports&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">masterlog</span>&nbsp;=&nbsp;/var/log/puppet/puppetmaster.log&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">server_datadir</span>&nbsp;=&nbsp;/var/lib/puppet/server_data&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">config</span>&nbsp;=&nbsp;/etc/puppet/puppet.conf&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">pidfile</span>&nbsp;=&nbsp;/var/run/puppet/master.pid&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">manifestdir</span>&nbsp;=&nbsp;/etc/puppet/manifests&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">masterhttplog</span>&nbsp;=&nbsp;/var/log/puppet/masterhttp.log&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">bucketdir</span>&nbsp;=&nbsp;/var/lib/puppet/bucket&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">fileserverconfig</span>&nbsp;=&nbsp;/etc/puppet/fileserver.conf&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">manifest</span>&nbsp;=&nbsp;/etc/puppet/manifests/site.pp&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">templatedir</span>&nbsp;=&nbsp;/var/lib/puppet/templates&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">tagmap</span>&nbsp;=&nbsp;/etc/puppet/tagmail.conf&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">archive_file_server</span>&nbsp;=&nbsp;<span class="attribute-value" style="border:none;color:#0000FF;">puppet</span></p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">rrddir</span>&nbsp;=&nbsp;/var/lib/puppet/rrd&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">rrdinterval</span>&nbsp;=&nbsp;<span class="attribute-value" style="border:none;color:#0000FF;">1800</span></p> </li> 
   </ol>
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <div>
     1、修改主配置文件&nbsp;puppet.conf&nbsp;插入master字段
    </div> 
   </div> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>vim&nbsp;/etc/puppet/puppet.conf&nbsp;&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p>[master]&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">certname</span>=<span class="attribute-value" style="border:none;color:#0000FF;">rhel6u3</span>-102.rsyslog.org&nbsp;\\设置puppet认证服务器主机名&nbsp;</p> </li> 
   </ol>
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <div>
     2、创建节点全局配置文件site.pp，文件存在，服务才能够启动
    </div> 
   </div> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>#&nbsp;touch&nbsp;/etc/puppet/manifests/site.pp&nbsp;</p> </li>
   </ol>
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <div>
     3、启动puppetmaster服务
    </div> 
   </div> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>#&nbsp;/etc/rc.d/init.d/puppetmaster&nbsp;start&nbsp;</p> </li>
   </ol>
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    第一次测试或者调试的时候可以考虑以下方法
   </div> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>#puppet&nbsp;master&nbsp;--verbose&nbsp;--no-daemonize&nbsp;--debug&nbsp;&nbsp;</p> </li>
   </ol>
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <div>
     四、配置agent节点（rhel6u3-207.rsyslog.org）
    </div> 
    <div>
     1、配置第一个agent节点,在main标签中添加master的主机名
    </div> 
   </div> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>vim&nbsp;/etc/puppet/puppet.conf&nbsp;&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p>[main]&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">server</span>=<span class="attribute-value" style="border:none;color:#0000FF;">rhel6u3</span>-102.rsyslog.org&nbsp;</p> </li> 
   </ol>
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <div>
     2、启动agent服务
    </div> 
   </div> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>#&nbsp;/etc/rc.d/init.d/puppet&nbsp;start&nbsp;</p> </li>
   </ol>
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <div>
     第一次测试或者调试的时候可以考虑以下方法
    </div> 
   </div> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>#&nbsp;puppet&nbsp;agent&nbsp;--verbose&nbsp;–no-daemonize&nbsp;</p> </li>
   </ol>
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <div>
     五、配置puppet&nbsp;master&nbsp;将搜索到的新节点进行注册
    </div> 
   </div> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>#puppet&nbsp;cert&nbsp;--list&nbsp;\\查看等待注册的节点&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p>#puppet&nbsp;cert&nbsp;--sign&nbsp;rhel6u3-207.rsyslog.org&nbsp;\\注册指定节点&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>#&nbsp;puppet&nbsp;cert&nbsp;--sign&nbsp;all&nbsp;\\注册所有等待注册的节点&nbsp;</p> </li> 
   </ol>
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <div>
     六、在puppet&nbsp;master创建一个puppet配置
    </div> 
    <div>
     1、创建第一个puppet配置
    </div> 
    <div>
     1）定义全局配置&nbsp;site.pp文件,并创建import的目录
    </div> 
   </div> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>#&nbsp;vim&nbsp;/etc/puppet/manifests/site.pp&nbsp;&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p>$<span class="attribute" style="border:none;color:#FF0000;">puppetserver</span>&nbsp;=&nbsp;<span class="attribute-value" style="border:none;color:#0000FF;">'rhel6u3-102.rsyslog.org'</span></p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>import&nbsp;'nodes/*'&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>#mkdir&nbsp;/etc/puppet/manifests/nodes&nbsp;-p&nbsp;</p> </li> 
   </ol>
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <div>
     2）配置节点nodes.pp
    </div> 
   </div> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>#&nbsp;vim&nbsp;/etc/puppet/manifests/nodes/nodes.pp&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p>node&nbsp;'rhel6u3-207.rsyslog.org'{&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;include&nbsp;myfile&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;package&nbsp;{&nbsp;'vim-enhanced':&nbsp;<span class="attribute" style="border:none;color:#FF0000;">ensure</span>&nbsp;=<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span>&nbsp;present&nbsp;}&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>}&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>#node&nbsp;/^rhel6u3-\d+\.rsyslog.org'{&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;include&nbsp;myfile&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>#}&nbsp;</p> </li> 
   </ol>
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <div>
     2、创建第一个puppet模块
    </div> 
    <div>
     1）创建模块搜索路径
    </div> 
   </div> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>vim&nbsp;/etc/puppet/puppet.conf&nbsp;&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p>[main]&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">modulepath</span>=/etc/puppet/modules:/var/lib/puppet/modules:/usr/local/lib/puppet/modules&nbsp;</p> </li> 
   </ol>
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <div>
     2）创建模块目录结构
    </div> 
   </div> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>#&nbsp;mkdir&nbsp;/etc/puppet/modules&nbsp;-p&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p>#mkdir&nbsp;-vp&nbsp;/etc/puppet/modules/myfile/{files,templates,manifests}&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>manifests目录存放模块配置文件，files目录存放模块包含的文件，templates目录存&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p>放模块中的模板&nbsp;</p> </li> 
   </ol>
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    3）创建模块核心配置文件init.pp
   </div> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>vim&nbsp;/etc/puppet/modules/myfile/manifests/init.pp&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p>class&nbsp;myfile&nbsp;{&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;package{&nbsp;setup:&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">ensure</span>&nbsp;=<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span>&nbsp;present,&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file{&nbsp;"/etc/myfile":&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">owner</span>&nbsp;=<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span>&nbsp;"root",&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">group</span>&nbsp;=<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span>&nbsp;"root",&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">mode</span>&nbsp;=<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span>&nbsp;644,&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">source</span>&nbsp;=<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span>&nbsp;"puppet://$puppetserver/modules/myfile/files/etc/myfile",&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">require</span>&nbsp;=<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span>&nbsp;Package["setup"],&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p>}&nbsp;</p> </li> 
   </ol>
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <div>
     配置基本结束，实现的结果如下：
    </div> 
    <div>
     1.&nbsp;检查setup软件包是否安装，如未安装将安装它
    </div> 
    <div>
     2.&nbsp;下载“Puppet&nbsp;Master”上的myfile文件放置到/etc目录下
    </div> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);">
    4）创建同步的测试文件
   </div> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>#&nbsp;mkdir&nbsp;/etc/puppet/modules/myfile/files/etc&nbsp;-p&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p>#echo&nbsp;"Hello&nbsp;Puppet"&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span>/etc/puppet/modules/myfile/files/etc/myfile&nbsp;</p> </li> 
   </ol>
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <div>
     5）客户端测试
    </div> 
    <pre>
</pre> 
    <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
     <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>[root@rhel6u3-207&nbsp;puppet]#&nbsp;cat&nbsp;/etc/myfile&nbsp;&nbsp;</p> </li> 
     <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p>Hello&nbsp;Puppet&nbsp;</p> </li> 
    </ol>
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <div>
     **客户端通过以下方式启动，然后我们使用前台方式运行并监控它，我们在里使用一个puppet参数—noop,&nbsp;它代表我们只测试，并不真的运行并修改节点上的文件，--onetime参数是只执行一次然后退出的意思。
    </div> 
   </div> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>#puppet&nbsp;agent&nbsp;<span class="attribute" style="border:none;color:#FF0000;">--server</span>=<span class="attribute-value" style="border:none;color:#0000FF;">rhel6u3</span>-102.rsyslog.org&nbsp;&nbsp;--no-daemonize&nbsp;--verbose&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p>--noop&nbsp;--onetime&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>#&nbsp;puppet&nbsp;agent&nbsp;<span class="attribute" style="border:none;color:#FF0000;">--server</span>=<span class="attribute-value" style="border:none;color:#0000FF;">rhel6u3</span>-102.rsyslog.org&nbsp;--no-daemonize&nbsp;--verbose&nbsp;--noop&nbsp;--onetime&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p>info:&nbsp;Caching&nbsp;catalog&nbsp;for&nbsp;rhel6u3-207.rsyslog.org&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>info:&nbsp;Applying&nbsp;configuration&nbsp;version&nbsp;'1366705990'&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p>notice:&nbsp;Finished&nbsp;catalog&nbsp;run&nbsp;in&nbsp;0.20&nbsp;seconds&nbsp;</p> </li> 
   </ol>
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <div>
     6）默认客户端同步时间为30分钟，可以设置为5秒测试效果
    </div> 
   </div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"></div> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>vim&nbsp;/etc/puppet/puppet.conf&nbsp;&nbsp;添加以下字段&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p>[agent]&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p><span class="attribute" style="border:none;color:#FF0000;">runinterval</span>=<span class="attribute-value" style="border:none;color:#0000FF;">5</span></p> </li> 
   </ol>
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <div>
     测试方法：
    </div> 
    <div>
     服务器端&nbsp;
    </div> 
   </div> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>#&nbsp;date&nbsp;<span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span><span class="tag" style="border:none;color:rgb(0,102,153);font-weight:bold;">&gt;</span>/etc/puppet/modules/myfile/files/etc/myfile&nbsp;&nbsp;</p> </li>
   </ol>
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <div>
     客户端
    </div> 
   </div> 
   <pre>
</pre> 
   <ol style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(20,107,0);color:rgb(92,92,92);">
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>cat&nbsp;/etc/myfile&nbsp;&nbsp;</p> </li> 
    <li style="border:none;line-height:1.3em;list-style-position:outside;"> <p>Hello&nbsp;Puppet&nbsp;</p> </li> 
    <li class="alt" style="border:none;color:inherit;line-height:1.3em;list-style-position:outside;"> <p>2013年&nbsp;04月&nbsp;23日&nbsp;星期二&nbsp;16:52:58&nbsp;CST&nbsp;</p> </li> 
   </ol>
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"></div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"></div> 
   <div style="font-family:'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;font-size:16px;color:rgb(51,51,51);"> 
    <div>
     本文转自凌激冰51CTO博客，原文链接：http://blog.51cto.com/dreamfire/1184796，如需转载请自行联系原作者
    </div> 
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
