<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>【改】IOS-百度地图API用点生成线路、导航、自定义标注 2013年11月更新 « NotBeCN</title>
  <meta name="description" content="             IOS百度地图API开发自定义气泡，点击气泡自动生成路线，以及拖拽IOS百度地图开发POISearch搜索附近停车场，附近加油站IOS百度地图视角跳到用户当前位置IOS百度地图开发实时路况IOS开发百度地图自动导航IOS开发百度地图在大头钉上加文字和图片，点击这个整体再弹出气泡IOS开发...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/16/weixin_34310127_90131504.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">【改】IOS-百度地图API用点生成线路、导航、自定义标注 2013年11月更新</h1>
    <p class="post-meta">Nov 16, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span>IOS百度地图API开发自定义气泡，点击气泡自动生成路线，以及拖拽</span><br><span>IOS百度地图开发POISearch搜索附近停车场，附近加油站</span><br><span>IOS百度地图视角跳到用户当前位置</span><br><span>IOS百度地图开发实时路况</span><br><span>IOS开发百度地图自动导航</span><br><span>IOS开发百度地图在大头钉上加文字和图片，点击这个整体再弹出气泡</span><br><span>IOS开发百度地图实现经纬度导航，无需地名。</span><br><br></p> 
   <div style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">
    &nbsp;
    <span><strong>第一部分－－牛刀小试</strong></span> 
   </div> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span>百度地图零基础到各种效果界面。上面的几行不用看，那是为了SEO，就是为了让我这篇博客让更多的人搜索到，上面的问题我都已经解决，都在文章里面。下面是步骤：</span><br><span>1.</span><span style="color:rgb(255,0,0);"><strong>申请百度地图key。2013年10月之后的2.1.0版本开始启用新的key！</strong></span><span>要想使用百度地图，你需要申请key，这个key是安桌苹果通用，但是你的项目名必须跟你的key吻合，至于什么是项目名，不多说，到网址http://lbsyun.baidu.com/apiconsole/key</span><span>申请，</span></p> 
   <div style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">
    <span>我的应用</span>
   </div> 
   <div style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"> 
    <table style="border-collapse:collapse;border-spacing:0px;border:1px solid #C0C0C0;">
     <tbody>
      <tr>
       <th style="border:1px solid #C0C0C0;border-collapse:collapse;">应用Id</th> 
       <th style="border:1px solid #C0C0C0;border-collapse:collapse;">应用名称</th> 
       <th style="border:1px solid #C0C0C0;border-collapse:collapse;">访问应用(ak)</th> 
       <th style="border:1px solid #C0C0C0;border-collapse:collapse;">应用类别</th> 
       <th style="border:1px solid #C0C0C0;border-collapse:collapse;">备注信息(双击更改)</th> 
       <th style="border:1px solid #C0C0C0;border-collapse:collapse;">应用配置</th> 
      </tr>
      <tr>
       <td style="border:1px solid #C0C0C0;border-collapse:collapse;">系统默认AK</td> 
       <td style="border:1px solid #C0C0C0;border-collapse:collapse;">系统默认AK</td> 
       <td style="border:1px solid #C0C0C0;border-collapse:collapse;"> 
        <div style="line-height:1.5;">
         AA1********28e
        </div> </td> 
       <td style="border:1px solid #C0C0C0;border-collapse:collapse;">未配置</td> 
       <td style="border:1px solid #C0C0C0;border-collapse:collapse;">当前系统所用AK</td> 
       <td style="border:1px solid #C0C0C0;border-collapse:collapse;">当前系统所用AK</td> 
      </tr>
      <tr>
       <td style="border:1px solid #C0C0C0;border-collapse:collapse;">17673</td> 
       <td style="border:1px solid #C0C0C0;border-collapse:collapse;">IphoneMapSdkDemo</td> 
       <td style="border:1px solid #C0C0C0;border-collapse:collapse;">pytxh1exmzkAneO5Vf4K</td> 
       <td style="border:1px solid #C0C0C0;border-collapse:collapse;">移动端</td> 
       <td style="border:1px solid #C0C0C0;border-collapse:collapse;">&nbsp;</td> 
       <td style="border:1px solid #C0C0C0;border-collapse:collapse;"> <a href="http://www.cnblogs.com/wengzilin/admin/" rel="nofollow" style="color:rgb(68,68,68);">设置</a>&nbsp;<a class="setdelete" href="http://www.cnblogs.com/wengzilin/admin/" rel="nofollow" style="color:rgb(68,68,68);">删除</a> </td> 
      </tr>
      <tr>
       <td style="border:1px solid #C0C0C0;border-collapse:collapse;">17721</td> 
       <td style="border:1px solid #C0C0C0;border-collapse:collapse;">MapTest</td> 
       <td style="border:1px solid #C0C0C0;border-collapse:collapse;">LqwUseZROjwxwb2zZ4e</td> 
       <td style="border:1px solid #C0C0C0;border-collapse:collapse;">移动端</td> 
       <td style="border:1px solid #C0C0C0;border-collapse:collapse;">&nbsp;</td> 
       <td style="border:1px solid #C0C0C0;border-collapse:collapse;"> <a href="http://www.cnblogs.com/wengzilin/admin/" rel="nofollow" style="color:rgb(68,68,68);">设置</a>&nbsp;<a class="setdelete" href="http://www.cnblogs.com/wengzilin/admin/" rel="nofollow" style="color:rgb(68,68,68);">删除</a> </td> 
      </tr>
     </tbody>
    </table>
   </div> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><br><br><span>2.</span><span style="color:rgb(237,28,36);"><strong><span>下载百度开发包</span>，</strong></span><a href="http://api.map.baidu.com/lbsapi/cloud/sdkiosdev-download.htm" rel="nofollow" style="color:rgb(68,68,68);">http://api.map.baidu.com/lbsapi/cloud/sdkiosdev-download.htm</a><span>，</span><br><span>3.建项目。这部分设计添加lib以及资源文件，参考百度的IOS api开发指南做就行，那些内容已经在2013年10月份更新过了，别去看网上乱七八糟的帖子，照着里面做就能顺利通过编译。有帖子说那些方法过时，错！</span><br><span>4.</span><span style="color:rgb(237,28,36);"><strong><span style="color:rgb(255,0,0);">将ViewController的.m改成.mm</span><br></strong><span><span style="color:rgb(0,0,0);">5.<span><strong><span style="color:rgb(255,0,0);">在委托中.h文件中</span></strong>中加入#import "BMapKit.h"，<span>并声明变量BMKMapManager* _mapManager;<span>在.m委托中加入<br><span>_&nbsp;&nbsp;&nbsp;mapManager = [[BMKMapManager alloc]init];<br> &nbsp;&nbsp;&nbsp;&nbsp;// 如果要关注网络及授权验证事件,请设定 generalDelegate 参数<br> &nbsp;&nbsp;&nbsp;&nbsp;BOOL ret = [_mapManager start:@"3102732B30E0D66EF51415C9E6CE055EC78FF07E" generalDelegate:nil];<br> &nbsp;&nbsp;&nbsp;&nbsp;if (!ret) {<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NSLog(@"manager start failed!");<br> &nbsp;&nbsp;&nbsp;&nbsp;}<br><span>6.<span style="color:rgb(237,28,36);"><strong>注意：</strong></span>在这里就开始运行程序的话，我在我的iphone上运行这个百度地图，会出现-[UIDevice uniqueGlobalDeviceIdentifier]: unrecognized selector sent to instance 0x1ed19370<br><span>这么一个bug，解决办法很多，但是我感觉<span>最爽的一种办法就是加入4个文件NSString+MD5Addition，UIDevice+IdentifierAddition，直接加入到项目里面就可以，无需<span>引入头文件，</span>下载地址</span></span></span></span></span></span></span></span></span></span><a href="http://www.kuaipan.cn/file/id_30491149655344975.htm" rel="nofollow" style="color:rgb(68,68,68);">http://www.kuaipan.cn/file/id_30491149655344975.htm</a><br><span>7.</span><span style="color:rgb(237,28,36);"><strong>在viewController.mm中</strong></span><span>的viewDidLoad改为如下代码</span><br><span>- (void)viewDidLoad</span><br><span>{</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;[super viewDidLoad];</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;BMKMapView* mapView = [[BMKMapView alloc]initWithFrame:CGRectMake(0, 0, 320, 548)];</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;self.view = mapView;</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;// Do any additional setup after loading the view, typically from a nib.</span><br><span>}</span><br><span>保存后运行，一个最简单的百度地图API应用就完成了</span><br><span>源代码下载</span><a href="http://www.kuaipan.cn/file/id_30491149655344976.htm" rel="nofollow" style="color:rgb(68,68,68);">http://www.kuaipan.cn/file/id_30491149655344976.htm</a><br><br><span>百度地图的功能很强大，上面只是牛刀小试</span><br><br><br></p> 
   <div style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">
    <strong>第二部分</strong>
   </div> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span style="color:rgb(237,28,36);"><span style="color:rgb(0,0,0);"><span><span><span><span><span><span><span><span style="color:rgb(237,28,36);"><strong>功能</strong></span><span><span style="color:rgb(237,28,36);"><strong>五，搜索，<span>用的很广泛</span></strong></span>，这个功能很强大，你可以搜索某一坐标点附近的加油站，停车场，宾馆，酒店，餐厅，甚至厕所都能搜索到，比如说你想查找5000米<span>内的加油站，以及1000米内的停车场。<br><span>flag = [_search&nbsp;&nbsp;poiSearchNearBy:@"加油站" center:coor1 radius:5000 pageIndex:0];<br><span>flag = [_search&nbsp;&nbsp;poiSearchNearBy:@"停车场" center:coor1 radius:1000 pageIndex:0];<br><span>然后用委托- (void)onGetPoiResult:(NSArray*)poiResultList searchType:(int)type errorCode:(int)error<br><span>输出结果<strong>。</strong><span style="color:rgb(237,28,36);"><span style="color:rgb(0,0,0);"><span><span><span><br></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><strong><span style="color:rgb(237,28,36);">将百度地图视角切换到某一坐标点</span></strong><br><span>-(void)Region{</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;CLLocationCoordinate2D coor;</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;coor.latitude = self._latitude;</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;coor.longitude = self._longitude;</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;NSDictionary *tip =&nbsp;</span><span>&nbsp;BMKBaiduCoorForWgs84(coor);</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;CLLocationCoordinate2D coor1=&nbsp;</span><span>&nbsp;BMKCoorDictionaryDecode(tip);</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;BMKCoordinateRegion viewRegion = BMKCoordinateRegionMake(coor1, BMKCoordinateSpanMake(0.05,0.05));</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;BMKCoordinateRegion adjustedRegion = [_mapView regionThatFits:viewRegion];</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;[_mapView setRegion:adjustedRegion animated:YES];</span><br><span>}</span><br><span style="color:rgb(237,28,36);"><strong>清除地图上所有痕迹和路线</strong></span><br><span>-(void)clereOldYJDH{</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;NSArray* array = [NSArray arrayWithArray:_mapView.annotations];</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;[_mapView removeAnnotations:array];</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;array = [NSArray arrayWithArray:_mapView.overlays];</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;[_mapView removeOverlays:array];</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;[self Region];</span><br><span>}</span><br><span>//</span><span style="color:rgb(237,28,36);"><strong>当选中一个annotation views时，调用此接口</strong></span><br><span>- (void)mapView:(BMKMapView *)mapView didSelectAnnotationView:(BMKAnnotationView *)view</span><br><span>{</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;NSLog(@"选中一个annotation views:%f,%f",view.annotation.coordinate.latitude,view.annotation.coordinate.longitude);</span><br><span>}</span><br><span>//</span><span style="color:rgb(237,28,36);"><strong>当取消选中一个annotation views时，调用此接口</strong></span><br><span>- (void)mapView:(BMKMapView *)mapView didDeselectAnnotationVie</span><span>w:(BMKAnnotationView *)view{</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;NSLog(@"取消选中一个annotation views");</span><br><span>}</span><br><span>//</span><strong><span style="color:rgb(252,9,31);">当mapView新添加annotation views时，调用此接口</span></strong><br><span>- (void)mapView:(BMKMapView *)mapView didAddAnnotationViews:(NSArray *)views</span><br><span>{</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;NSLog(@"mapView新添加annotation views");</span><br><span>}</span><br><span>//</span><strong><span style="color:rgb(237,28,36);">当点击annotation view弹出的泡泡时，调用此接口</span></strong><br><span>- (void)mapView:(BMKMapView *)mapView annotationViewForBubble:(BMKAnnotationView *)view</span><br><span>{</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;NSLog(@"点击annotation view弹出的泡泡");</span><br><span>}</span><br><span>//</span><strong><span style="color:rgb(248,7,14);">拖动annotation view时view的状态变化</span></strong><br><span>- (void)mapView:(BMKMapView *)mapView annotationView:(BMKAnnotationView *)view didChangeDragState:(BMKAnnotationViewDragSta</span><span>te)newStatefromOldState:(BMKAnnotationViewDragSta</span><span>te)oldState</span><br><span>{</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;NSLog(@"动annotation view时view的状态变化");</span><br><span>}</span><br><span>//</span><strong><span style="color:rgb(237,28,36);">标注呈绿色样式大头钉</span></strong><br><span>((BMKPinAnnotationView *)annotationView).pinColor = BMKPinAnnotationColorGre</span><span>en;</span><br><span>//</span><strong><span style="color:rgb(237,28,36);">允许用户拖动</span></strong><br><span>[annotationView setDraggable:YES];</span><br><span>//</span><span style="color:rgb(237,28,36);"><strong>气泡框左侧显示的View,可自定义</strong></span><br><span>annotationView.leftCalloutAccessoryView</span><span>&nbsp;= [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"icon_location.png"]];</span><br><span>//</span><span style="color:rgb(237,28,36);"><strong>气泡框右侧显示的View 可自定义</strong></span><br><span>annotationView.rightCalloutAccessoryVie</span><span>w =selectButton;</span><br><span>//</span><span style="color:rgb(237,28,36);"><strong>让标注在进入界面时就处于弹出气泡框的状态</strong></span><br><span>[annotationView setSelected:YES animated:YES];</span><br><span>//</span><span style="color:rgb(237,28,36);">整个标注的偏移量</span><br><span>annotationView.centerOffset = CGPointMake(0, -(annotationView.frame.size.height * 0.5));</span><br><span>annotationView.annotation = annotation;//绑定对应的标点经纬度</span><br><span>annotationView.canShowCallout = TRUE;//允许点击弹出气泡框</span><br><br><br><strong><span style="color:rgb(252,9,31);">在地图上定制标注替代大头钉，可以将文字图片所有能加到view中的，都可以以大头钉的形式显示出来</span></strong><span>，需要将view转换为image主要代码，最重要的是知道这个原理，然后实现起来就很简单：</span><br><span>- (BMKAnnotationView *)mapView:(BMKMapView *)view viewForAnnotation:(id &lt;BMKAnnotation&gt;)annotation</span><br><span>在这个委托中实现如下代码</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;UIView *viewForImage=[[UIView alloc]initWithFrame:CGRectMake(0, 0, 132, 64)];</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;UIImageView *imageview=[[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 32, 64)];</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;[imageview setImage:[UIImage imageNamed:@"车位置.png"]];</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;[viewForImage addSubview:imageview];</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;UILabel *label=[[UILabel alloc]initWithFrame:CGRectMake(32, 0, 100, 64)];</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;label.text=@"陈双超";</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;label.backgroundColor=[UIColor clearColor];</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;[viewForImage addSubview:label];</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;annotationView.image=[self getImageFromView:viewForImage];</span><br><br><br><span>-(UIImage *)getImageFromView:(UIView *)view{</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;UIGraphicsBeginImageCont</span><span>ext(view.bounds.size);</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;[view.layer renderInContext:UIGraphicsGetCurrentCont</span><span>ext()];</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;UIImage *image = UIGraphicsGetImageFromCu</span><span>rrentImageContext();</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;UIGraphicsEndImageContex</span><span>t();</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;return image;</span><br><span>}</span><br><br><span>在网上发现别人专门建立view来定制气泡和专门建立文件来定制大头钉，觉得那方法对代码管理起来更简单，可读性强。值得学习</span><a href="http://www.kuaipan.cn/file/id_30491149655345085.htm" rel="nofollow" style="color:rgb(68,68,68);">http://www.kuaipan.cn/file/id_30491149655345085.htm</a><br><span>@interface KYBubbleView : UIScrollView {&nbsp;</span><span>&nbsp;</span><span>&nbsp;//UIView是气泡view的本质</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;NSDictionary *_infoDict;</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;UILabel&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;*titleLabel;//标题label</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;UILabel&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;*detailLabel;//副标题label</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;UILabel&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;*contactLabel;&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;//联系人</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;UILabel&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;*homeAddresslabel;&nbsp;</span><span>&nbsp;</span><span>&nbsp;//家庭地址</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;UIButton&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;*rightButton;</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;NSUInteger&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;index;</span><br><span>}</span><br><span>#import "BMKPointAnnotation.h"</span><br><br><span>@interface KYPointAnnotation : BMKPointAnnotation {</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;NSUInteger _tag;</span><br><span>}</span><br><br><span>@property NSUInteger tag;</span><br><br><span>@end</span><br><span>&nbsp;</span><br><br><span>部分效果图</span><a href="http://photo.blog.sina.com.cn/showpic.html#blogid=68501a5e0101h29i&amp;url=http://s5.sinaimg.cn/orignal/68661bd8tdab12d52e204" rel="nofollow" style="color:rgb(68,68,68);"><img title="[转载]IOS开发百度地图API－用点生成路线，导航，气泡响应" src="http://s5.sinaimg.cn/mw690/68661bd8tdab12d52e204&amp;690" alt="[转载]IOS开发百度地图API－用点生成路线，导航，气泡响应" width="476" height="336" style="border:0px;"></a><br><br><a href="http://photo.blog.sina.com.cn/showpic.html#blogid=68501a5e0101h29i&amp;url=http://s10.sinaimg.cn/orignal/68661bd8tdab12d98e8e9" rel="nofollow" style="color:rgb(68,68,68);"><img title="[转载]IOS开发百度地图API－用点生成路线，导航，气泡响应" src="http://s10.sinaimg.cn/mw690/68661bd8tdab12d98e8e9&amp;690" alt="[转载]IOS开发百度地图API－用点生成路线，导航，气泡响应" width="408" height="408" style="border:0px;"></a><br><br><a href="http://photo.blog.sina.com.cn/showpic.html#blogid=68501a5e0101h29i&amp;url=http://s15.sinaimg.cn/orignal/68661bd8tdab13ae3ac8e" rel="nofollow" style="color:rgb(68,68,68);"><img title="[转载]IOS开发百度地图API－用点生成路线，导航，气泡响应" src="http://s15.sinaimg.cn/mw690/68661bd8tdab13ae3ac8e&amp;690" alt="[转载]IOS开发百度地图API－用点生成路线，导航，气泡响应" width="517" height="195" style="border:0px;"></a><br><br><br><br><br></p> 
   <div style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;">
    <span><strong><span style="color:rgb(13,1,2);">第三部分</span></strong></span>
   </div> 
   <p style="color:rgb(68,68,68);font-family:tahoma, arial, sans-serif;font-size:12px;line-height:1.5;"><span>1.有一个朋友问我他做导航时，传参数遇到问题，就是输入汉字部分没有，</span><span style="color:rgb(255,17,46);"><strong>仅靠两点的经纬度怎么实现路线导航</strong></span><span>，他试了很久没弄出来。然后我把解决这个问题的源码贴出来。我做的是</span><span>驾车路线，如果需要步行或者公交则需要作调整。主要涉及的方法如下，实现这个的代码，我直接从我的项目中弄出来的</span><a href="http://www.kuaipan.cn/file/id_30491149655345069.htm" rel="nofollow" style="color:rgb(68,68,68);">http://www.kuaipan.cn/file/id_30491149655345069.htm</a><br><span>-(void)onClickDriveSearch</span><br><span>{</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>NSLog(@"%f,%f,%f,%f",_startCoordainateXText,_startCoordainateYText,_endCoordainateXText,_endCoordainateYText);</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;count = 0;</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;isLoadingMap=2;</span><br><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;if(!_endCoordainateXText ||!_endCoordainateYText )isLoadingMap=1;</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;NSArray* array = [NSArray arrayWithArray:_mapView.annotations];</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;[_mapView removeAnnotations:array];</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;array = [NSArray arrayWithArray:_mapView.overlays];</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;[_mapView removeOverlays:array];</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;CLLocationCoordinate2D startPt = (CLLocationCoordinate2D){0, 0};</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;CLLocationCoordinate2D endPt = (CLLocationCoordinate2D){0, 0};</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;if (_startCoordainateXText &amp;&amp; _startCoordainateYText ) {</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;startPt = (CLLocationCoordinate2D){_startCoordainateYText ,_startCoordainateXText };</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;}</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;if (_endCoordainateYText&nbsp;</span><span>&nbsp;&amp;&amp; _endCoordainateXText ) {</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;endPt = (CLLocationCoordinate2D){ _endCoordainateYText ,_endCoordainateXText};</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;}</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;BMKPlanNode* start = [[BMKPlanNode alloc]init];</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;start.pt = startPt;</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;start.name = nil;</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;BMKPlanNode* end = [[BMKPlanNode alloc]init];</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;end.pt = endPt;</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;end.name = nil;</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;BOOL flag = [_search drivingSearch:nil startNode:start endCity:nil endNode:end];</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;if (!flag) {</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;NSLog(@"search failed");</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;}</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;[start release];</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;[end release];</span><br><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;[self Region];</span><br><span>}</span></p> 
   <p style="line-height:1.5;"><span><font color="#444444"><span style="font-size:12px;">本文转自编程小翁博客园博客，原文链接：http://www.cnblogs.com/wengzilin/p/3444471.html，如需转载请自行联系原作者</span></font><br></span></p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
