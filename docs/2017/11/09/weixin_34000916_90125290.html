<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>理解 OpenStack Swift （3）：监控和一些影响性能的因素 [Monitoring and Performance] « NotBeCN</title>
  <meta name="description" content="             本系列文章着重学习和研究OpenStack Swift，包括环境搭建、原理、架构、监控和性能等。    （1）OpenStack + 三节点Swift 集群+ HAProxy + UCARP 安装和配置&nbsp;    （2）原理、架构和性能    （3）监控    &nbsp;   ...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/09/weixin_34000916_90125290.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">理解 OpenStack Swift （3）：监控和一些影响性能的因素 [Monitoring and Performance]</h1>
    <p class="post-meta">Nov 9, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">本系列文章着重学习和研究OpenStack Swift，包括环境搭建、原理、架构、监控和性能等。</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">（1）<a href="http://www.cnblogs.com/sammyliu/p/4923432.html%20" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;">OpenStack + 三节点Swift 集群+ HAProxy + UCARP 安装和配置</a>&nbsp;</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">（2）<a href="http://www.cnblogs.com/sammyliu/p/4955241.html" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;">原理、架构和性能</a></p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">（3）<a href="http://www.cnblogs.com/sammyliu/p/4964528.html%20" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;">监控</a></p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">对 Swift 集群的监控是必要的，特别是集群规模很大的时候。</p> 
   <h2 style="font-size:21px;line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;">1. 监控目标&nbsp;</h2> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">主要的监控目标包括：</p> 
   <div style="color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;"> 
    <ul style="list-style:none;font-size:12px;">
     <li style="list-style-type:disc;">硬件故障</li> 
     <li style="list-style-type:disc;">操作系统故障</li> 
     <li style="list-style-type:disc;">Swift&nbsp;集群健康状态</li> 
     <li style="list-style-type:disc;">Swift 集群状态</li> 
    </ul>
    <h2 style="font-size:21px;line-height:1.5;">2. Swift 提供的工具</h2> 
    <h3 style="font-size:16px;color:rgb(102,102,102);background-image:none;background-repeat:no-repeat;font-family:Verdana;line-height:1.5;">2.1 Swift 自带的各种 Audit 工具</h3> 
    <h4 style="font-size:14px;">2.1.1 磁盘监控工具&nbsp;swift-drive-audit&nbsp;</h4> 
    <p style="line-height:1.5;">&nbsp; &nbsp; 该工具分析&nbsp;/var/log/kern.log 文件，根据预定义的 regexp 来探测 kernel 报告的磁盘错误。通常地它会被 cron 周期性地运行。它使用一个配置文件，比如&nbsp;/etc/swift/drive-audit.conf。如果该脚本发现了某个磁盘存在问题，它会自动 unmount 它，而且会在&nbsp;/etc/fstab 中将它注释掉。然后后端 replication 进程就会从其它 replica 中拷贝出一个新的 replica。 这是<a href="https://github.com/openstack/swift/blob/master/etc/drive-audit.conf-sample" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;">示例配置文件</a>。</p> 
    <p style="line-height:1.5;"><span style="line-height:1.5;font-size:14px;">&nbsp; &nbsp; 要使用它，必须首先创建一个配置文件 driver-audit.conf：</span></p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
     <pre>[drive-<span style="line-height:1.5;">audit] 
device_dir </span>= /srv/<span style="line-height:1.5;">node 
log_facility </span>=<span style="line-height:1.5;"> LOG_LOCAL0 
log_level </span>=<span style="line-height:1.5;"> INFO 
minutes </span>= <span style="color:rgb(128,0,128);line-height:1.5;">60</span><span style="line-height:1.5;"> 
error_limit </span>= <span style="color:rgb(128,0,128);line-height:1.5;">1</span><span style="line-height:1.5;"> 
log_file_pattern </span>= /<span style="color:rgb(136,136,136);line-height:1.5;">var</span>/log/kern*<span style="line-height:1.5;"> 
regex_pattern_1 </span>= \berror\b.*\b(dm-[<span style="color:rgb(128,0,128);line-height:1.5;">0</span>-<span style="color:rgb(128,0,128);line-height:1.5;">9</span>]{<span style="color:rgb(128,0,128);line-height:1.5;">1</span>,<span style="color:rgb(128,0,128);line-height:1.5;">2</span>}\d?)\b </pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
    </div> 
    <p style="line-height:1.5;">然后运行该工具：swift-drive-audit&nbsp;driver-audit.conf，然后上面描述的各种 action 就会有了。</p> 
    <h4 style="font-size:14px;">2.1.2 account，container 和 object auditor</h4> 
    <p style="line-height:1.5;">功能：</p> 
    <ul style="list-style:none;font-size:12px;">
     <li style="list-style-type:disc;">swift-account-auditor 会打开 account server 的 sqlite db，运行 SQL 查询，确保 db 是有效的，并报告一个account 是否有 replica 缺失或者错误的对象。</li> 
     <li style="list-style-type:disc;">swift-container-auditor 会对 containers 做同样的事情.</li> 
     <li style="list-style-type:disc;">swift-object-auditor 会打开一个对象服务器上的所有对象，确保它们的元数据是正确的，而且有有合适的大小和 MD5</li> 
    </ul>
    <p style="line-height:1.5;">它们都必须在各自对应的服务的配置文件中的 [account/object/container-auditor] 部分做相应配置，然后它们就会定期运行，并输出日志。</p> 
    <h3 style="font-size:16px;color:rgb(102,102,102);background-image:none;background-repeat:no-repeat;font-family:Verdana;line-height:1.5;">2.2 集群监控状态获取工具&nbsp;swift-dispersion-populate 和 swift-dispersion-report</h3> 
    <p style="line-height:1.5;">&nbsp;这两个工具用于获取和报告集群的总体健康状态。它需要访问Swift 集群以及 Ring 文件。它需要一个自己的配置文件，往往把该配置文件放在 proxy server 上的 /etc/swift 目录下。</p> 
    <p style="line-height:1.5;">（1）创建配置文件 /etc/swift/dispersion.conf ：</p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
     <p style="line-height:1.5;">[dispersion]</p> 
     <p style="line-height:1.5;">auth_url = http://controller:35357/v3<br> auth_user = service:swift<br> auth_version = 3<br> auth_key = 1111<br> swift_dir = /etc/swift<br> concurrency = 25<br> retries = 5</p> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
    </div> 
    <p style="line-height:1.5;">该配置文件的详细说明可以参见&nbsp;<a href="http://manpages.ubuntu.com/manpages/quantal/en/man5/dispersion.conf.5.html" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;">Ubuntu 文档</a>。注意 Kilo 版本的 Swift 环境中需要添加配置项 auth_version。</p> 
    <p style="line-height:1.5;">（2）运行&nbsp;swift-dispersion-populate 去获取系统的健康状况，它和 swift-dispersion-report&nbsp;使用同一个配置文件。<span style="line-height:1.5;">详细说明可以参见&nbsp;</span><a href="http://manpages.ubuntu.com/manpages/quantal/en/man1/swift-dispersion-populate.1.html" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;line-height:1.5;">Ubuntu 文档</a><span style="line-height:1.5;">。</span></p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
     <pre>root@swift1:/etc/swift# swift-dispersion-<span style="line-height:1.5;">populate dispersion.conf
Created </span><span style="color:rgb(128,0,128);line-height:1.5;">10</span> containers <span style="color:rgb(0,0,255);line-height:1.5;">for</span> dispersion reporting, 0s, <span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;"> retries
Created </span><span style="color:rgb(128,0,128);line-height:1.5;">10</span> objects <span style="color:rgb(0,0,255);line-height:1.5;">for</span> dispersion reporting, 0s, <span style="color:rgb(128,0,128);line-height:1.5;">0</span> retries</pre>
    </div> 
    <p style="line-height:1.5;">（3）运行&nbsp;&nbsp;swift-dispersion-report 获取监控报告。详细说明请参加&nbsp;<a href="http://manpages.ubuntu.com/manpages/quantal/en/man1/swift-dispersion-report.1.html" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;">Ubuntu 文档</a>。</p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
     <pre>root@swift1:/etc/swift# swift-dispersion-<span style="line-height:1.5;">report
</span><span style="line-height:1.5;">Queried 11 containers for dispersion reporting, 0s, 0 retries
100.00% of container copies found (33 of 33)
Sample represents 1.07% of the container partition space
Queried 10 objects for dispersion reporting, 0s, 0 retries
There were 10 partitions missing 0 copy.
100.00% of object copies found (30 of 30)
Sample represents 0.98% of the object partition space</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
    </div> 
    <h3 style="font-size:16px;color:rgb(102,102,102);background-image:none;background-repeat:no-repeat;font-family:Verdana;line-height:1.5;">2.3 性能获取工具&nbsp;swift-recon 中间件</h3> 
    <h4 style="font-size:14px;">2.3.1 它是什么（what）</h4> 
    <p style="line-height:1.5;"><span style="line-height:1.5;font-size:12px;">Swift Recon是一个安装在对象服务器的pipeline上的中间件，它有一个必填选项：一个本地缓存目录。<span style="line-height:1.5;font-family:verdana, Arial, Helvetica, sans-serif;">它可以获取：</span></span></p> 
    <ol>
     <li style="list-style-type:decimal;">How many unmounted (failed) drives there are in the cluster, and on which servers those are located</li> 
     <li style="list-style-type:decimal;">How many async pendings are present</li> 
     <li style="list-style-type:decimal;">Drive usage and balance</li> 
     <li style="list-style-type:decimal;">Load Average (for easy access later on*)</li> 
     <li style="list-style-type:decimal;">Memory Usage (for easy access later on*)</li> 
     <li style="list-style-type:decimal;">Checking ring md5sum’s</li> 
     <li style="list-style-type:decimal;">Logged replication stats</li> 
     <li style="list-style-type:decimal;">Connection stats (tbd)</li> 
     <li style="list-style-type:decimal;">Quarantine Statistics (a new pending addition)</li> 
    </ol>
    <p style="line-height:1.5;"><span style="line-height:1.5;font-size:14px;">要使用它，需要首先修改 object-server 的配置文件，添加该中间件：</span></p> 
    <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
     <pre><span style="line-height:1.5;">[pipeline:main]
pipeline = healthcheck <span style="color:rgb(0,0,255);line-height:1.5;">recon</span> object-server

[filter:<span style="color:rgb(0,0,255);line-height:1.5;">recon</span>]
use = egg:swift#recon
recon_cache_path = /var/cache/swift
recon_lock_path = /var/lock</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
     </div> 
    </div> 
    <h4 style="font-size:14px;">2.3.2 使用命令行工具（How）</h4> 
    <div> 
     <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">
      <pre>swift-recon   &lt;server_type&gt;  [-v] [--suppress] [-a] [-r] [-u] [-d] [-l]  [--md5] [--auditor] [--updater] [--expirer] [--sockstat]</pre>
     </div> 
     <p style="line-height:1.5;"><span style="line-height:1.5;">参数：</span></p> 
    </div> 
   </div> 
   <ul style="list-style:none;font-size:15px;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;">
    <li style="list-style-type:disc;">-a, --async: Get async stats</li> 
    <li style="list-style-type:disc;">--auditor: Get auditor stats</li> 
    <li style="list-style-type:disc;">--updater: Get updater stats</li> 
    <li style="list-style-type:disc;">--expirer: Get expirer stats</li> 
    <li style="list-style-type:disc;">-r, --replication: Get replication stats</li> 
    <li style="list-style-type:disc;">-u, --unmounted: Check cluster for unmounted devices</li> 
    <li style="list-style-type:disc;">-d, --diskusage: Get disk usage stats</li> 
    <li style="list-style-type:disc;">-l, --loadstats: Get cluster load average stats</li> 
    <li style="list-style-type:disc;">-q, --quarantined: Get cluster quarantine stats</li> 
    <li style="list-style-type:disc;">--md5 Get md5sum of servers ring and compare to local cop</li> 
    <li style="list-style-type:disc;">--all Perform all checks. Equivalent to -arudlq --md5</li> 
    <li style="list-style-type:disc;">-z ZONE, --zone=ZONE: Only query servers in specified zone</li> 
    <li style="list-style-type:disc;">--swiftdir=PATH Default = /etc/swift</li> 
   </ul>
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">（1）获取全部zone 上 updater，auditor 和 expier 的状态</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;font-size:12px;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>root@swift1:/etc/swift# swift-recon --auditor --updater --<span style="line-height:1.5;">expirer
</span>===============================================================================
--&gt; Starting reconnaissance on <span style="color:rgb(128,0,128);line-height:1.5;">3</span><span style="line-height:1.5;"> hosts
</span>===============================================================================<span style="line-height:1.5;">
[</span><span style="color:rgb(128,0,128);line-height:1.5;">2015</span>-<span style="color:rgb(128,0,128);line-height:1.5;">11</span>-<span style="color:rgb(128,0,128);line-height:1.5;">14</span> <span style="color:rgb(128,0,128);line-height:1.5;">16</span>:<span style="color:rgb(128,0,128);line-height:1.5;">52</span>:<span style="color:rgb(128,0,128);line-height:1.5;">00</span><span style="line-height:1.5;">] Checking auditor stats
[ALL_audit_time_last_path] low: </span><span style="color:rgb(128,0,128);line-height:1.5;">0</span>, high: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, avg: <span style="color:rgb(128,0,128);line-height:1.5;">0.0</span>, total: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, Failed: <span style="color:rgb(128,0,128);line-height:1.5;">0.0</span>%, no_result: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, reported: <span style="color:rgb(128,0,128);line-height:1.5;">3</span><span style="line-height:1.5;">
[ALL_quarantined_last_path] low: </span><span style="color:rgb(128,0,128);line-height:1.5;">0</span>, high: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, avg: <span style="color:rgb(128,0,128);line-height:1.5;">0.0</span>, total: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, Failed: <span style="color:rgb(128,0,128);line-height:1.5;">0.0</span>%, no_result: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, reported: <span style="color:rgb(128,0,128);line-height:1.5;">3</span><span style="line-height:1.5;">
[ALL_errors_last_path] low: </span><span style="color:rgb(128,0,128);line-height:1.5;">0</span>, high: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, avg: <span style="color:rgb(128,0,128);line-height:1.5;">0.0</span>, total: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, Failed: <span style="color:rgb(128,0,128);line-height:1.5;">0.0</span>%, no_result: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, reported: <span style="color:rgb(128,0,128);line-height:1.5;">3</span><span style="line-height:1.5;">
[ALL_passes_last_path] low: </span><span style="color:rgb(128,0,128);line-height:1.5;">1</span>, high: <span style="color:rgb(128,0,128);line-height:1.5;">1</span>, avg: <span style="color:rgb(128,0,128);line-height:1.5;">1.0</span>, total: <span style="color:rgb(128,0,128);line-height:1.5;">3</span>, Failed: <span style="color:rgb(128,0,128);line-height:1.5;">0.0</span>%, no_result: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, reported: <span style="color:rgb(128,0,128);line-height:1.5;">3</span><span style="line-height:1.5;">
[ALL_bytes_processed_last_path] low: </span><span style="color:rgb(128,0,128);line-height:1.5;">5</span>, high: <span style="color:rgb(128,0,128);line-height:1.5;">5</span>, avg: <span style="color:rgb(128,0,128);line-height:1.5;">5.0</span>, total: <span style="color:rgb(128,0,128);line-height:1.5;">15</span>, Failed: <span style="color:rgb(128,0,128);line-height:1.5;">0.0</span>%, no_result: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, reported: <span style="color:rgb(128,0,128);line-height:1.5;">3</span><span style="line-height:1.5;">
[ZBF_audit_time_last_path] low: </span><span style="color:rgb(128,0,128);line-height:1.5;">0</span>, high: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, avg: <span style="color:rgb(128,0,128);line-height:1.5;">0.0</span>, total: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, Failed: <span style="color:rgb(128,0,128);line-height:1.5;">0.0</span>%, no_result: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, reported: <span style="color:rgb(128,0,128);line-height:1.5;">3</span><span style="line-height:1.5;">
[ZBF_quarantined_last_path] low: </span><span style="color:rgb(128,0,128);line-height:1.5;">0</span>, high: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, avg: <span style="color:rgb(128,0,128);line-height:1.5;">0.0</span>, total: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, Failed: <span style="color:rgb(128,0,128);line-height:1.5;">0.0</span>%, no_result: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, reported: <span style="color:rgb(128,0,128);line-height:1.5;">3</span><span style="line-height:1.5;">
[ZBF_errors_last_path] low: </span><span style="color:rgb(128,0,128);line-height:1.5;">0</span>, high: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, avg: <span style="color:rgb(128,0,128);line-height:1.5;">0.0</span>, total: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, Failed: <span style="color:rgb(128,0,128);line-height:1.5;">0.0</span>%, no_result: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, reported: <span style="color:rgb(128,0,128);line-height:1.5;">3</span><span style="line-height:1.5;">
[ZBF_bytes_processed_last_path] low: </span><span style="color:rgb(128,0,128);line-height:1.5;">0</span>, high: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, avg: <span style="color:rgb(128,0,128);line-height:1.5;">0.0</span>, total: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, Failed: <span style="color:rgb(128,0,128);line-height:1.5;">0.0</span>%, no_result: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, reported: <span style="color:rgb(128,0,128);line-height:1.5;">3</span>
===============================================================================<span style="line-height:1.5;">
[</span><span style="color:rgb(128,0,128);line-height:1.5;">2015</span>-<span style="color:rgb(128,0,128);line-height:1.5;">11</span>-<span style="color:rgb(128,0,128);line-height:1.5;">14</span> <span style="color:rgb(128,0,128);line-height:1.5;">16</span>:<span style="color:rgb(128,0,128);line-height:1.5;">52</span>:<span style="color:rgb(128,0,128);line-height:1.5;">00</span><span style="line-height:1.5;">] Checking updater times
[updater_last_sweep] low: </span><span style="color:rgb(128,0,128);line-height:1.5;">0</span>, high: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, avg: <span style="color:rgb(128,0,128);line-height:1.5;">0.1</span>, total: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, Failed: <span style="color:rgb(128,0,128);line-height:1.5;">0.0</span>%, no_result: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, reported: <span style="color:rgb(128,0,128);line-height:1.5;">3</span>
===============================================================================<span style="line-height:1.5;">
[</span><span style="color:rgb(128,0,128);line-height:1.5;">2015</span>-<span style="color:rgb(128,0,128);line-height:1.5;">11</span>-<span style="color:rgb(128,0,128);line-height:1.5;">14</span> <span style="color:rgb(128,0,128);line-height:1.5;">16</span>:<span style="color:rgb(128,0,128);line-height:1.5;">52</span>:<span style="color:rgb(128,0,128);line-height:1.5;">00</span><span style="line-height:1.5;">] Checking on expirers
[object_expiration_pass] </span>-<span style="line-height:1.5;"> No hosts returned valid data.
[expired_last_pass] </span>-<span style="line-height:1.5;"> No hosts returned valid data.
</span>===============================================================================</pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;font-size:12px;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">（2）磁盘使用情况</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;font-size:12px;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>root@swift1:/etc/swift# swift-recon -<span style="line-height:1.5;">d
</span>===============================================================================
--&gt; Starting reconnaissance on <span style="color:rgb(128,0,128);line-height:1.5;">3</span><span style="line-height:1.5;"> hosts
</span>===============================================================================<span style="line-height:1.5;">
[</span><span style="color:rgb(128,0,128);line-height:1.5;">2015</span>-<span style="color:rgb(128,0,128);line-height:1.5;">11</span>-<span style="color:rgb(128,0,128);line-height:1.5;">14</span> <span style="color:rgb(128,0,128);line-height:1.5;">16</span>:<span style="color:rgb(128,0,128);line-height:1.5;">53</span>:<span style="color:rgb(128,0,128);line-height:1.5;">38</span><span style="line-height:1.5;">] Checking disk usage now
Distribution Graph:
  </span><span style="color:rgb(128,0,128);line-height:1.5;">2</span>%    <span style="color:rgb(128,0,128);line-height:1.5;">2</span> **********************************************
  <span style="color:rgb(128,0,128);line-height:1.5;">3</span>%    <span style="color:rgb(128,0,128);line-height:1.5;">3</span> *********************************************************************
  <span style="color:rgb(128,0,128);line-height:1.5;">4</span>%    <span style="color:rgb(128,0,128);line-height:1.5;">1</span> ***********************<span style="line-height:1.5;">
Disk usage: space used: </span><span style="color:rgb(128,0,128);line-height:1.5;">5343854592</span> of <span style="color:rgb(128,0,128);line-height:1.5;">160982630400</span><span style="line-height:1.5;">
Disk usage: space free: </span><span style="color:rgb(128,0,128);line-height:1.5;">155638775808</span> of <span style="color:rgb(128,0,128);line-height:1.5;">160982630400</span><span style="line-height:1.5;">
Disk usage: lowest: </span><span style="color:rgb(128,0,128);line-height:1.5;">2.59</span>%, highest: <span style="color:rgb(128,0,128);line-height:1.5;">4.56</span>%, avg: <span style="color:rgb(128,0,128);line-height:1.5;">3.31952247191</span>%</pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;font-size:12px;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">（3）系统负载</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;font-size:12px;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>root@swift1:/etc/swift# swift-recon -<span style="line-height:1.5;">l
</span>===============================================================================
--&gt; Starting reconnaissance on <span style="color:rgb(128,0,128);line-height:1.5;">3</span><span style="line-height:1.5;"> hosts
</span>===============================================================================<span style="line-height:1.5;">
[</span><span style="color:rgb(128,0,128);line-height:1.5;">2015</span>-<span style="color:rgb(128,0,128);line-height:1.5;">11</span>-<span style="color:rgb(128,0,128);line-height:1.5;">14</span> <span style="color:rgb(128,0,128);line-height:1.5;">16</span>:<span style="color:rgb(128,0,128);line-height:1.5;">54</span>:<span style="color:rgb(128,0,128);line-height:1.5;">32</span><span style="line-height:1.5;">] Checking load averages
[5m_load_avg] low: </span><span style="color:rgb(128,0,128);line-height:1.5;">0</span>, high: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, avg: <span style="color:rgb(128,0,128);line-height:1.5;">0.1</span>, total: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, Failed: <span style="color:rgb(128,0,128);line-height:1.5;">0.0</span>%, no_result: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, reported: <span style="color:rgb(128,0,128);line-height:1.5;">3</span><span style="line-height:1.5;">
[15m_load_avg] low: </span><span style="color:rgb(128,0,128);line-height:1.5;">0</span>, high: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, avg: <span style="color:rgb(128,0,128);line-height:1.5;">0.1</span>, total: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, Failed: <span style="color:rgb(128,0,128);line-height:1.5;">0.0</span>%, no_result: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, reported: <span style="color:rgb(128,0,128);line-height:1.5;">3</span><span style="line-height:1.5;">
[1m_load_avg] low: </span><span style="color:rgb(128,0,128);line-height:1.5;">0</span>, high: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, avg: <span style="color:rgb(128,0,128);line-height:1.5;">0.1</span>, total: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, Failed: <span style="color:rgb(128,0,128);line-height:1.5;">0.0</span>%, no_result: <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, reported: <span style="color:rgb(128,0,128);line-height:1.5;">3</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;font-size:12px;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">（4）检查所有节点上的 ring 文件和 swift.conf 是不是完全一致</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-size:15px;font-family:'Courier New';"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;font-size:12px;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>root@swift1:/etc/swift# swift-recon --<span style="line-height:1.5;">md5
</span>===============================================================================
--&gt; Starting reconnaissance on <span style="color:rgb(128,0,128);line-height:1.5;">3</span><span style="line-height:1.5;"> hosts
</span>===============================================================================<span style="line-height:1.5;">
[</span><span style="color:rgb(128,0,128);line-height:1.5;">2015</span>-<span style="color:rgb(128,0,128);line-height:1.5;">11</span>-<span style="color:rgb(128,0,128);line-height:1.5;">14</span> <span style="color:rgb(128,0,128);line-height:1.5;">17</span>:<span style="color:rgb(128,0,128);line-height:1.5;">08</span>:<span style="color:rgb(128,0,128);line-height:1.5;">38</span><span style="line-height:1.5;">] Checking ring md5sums
</span><span style="color:rgb(128,0,128);line-height:1.5;">3</span>/<span style="color:rgb(128,0,128);line-height:1.5;">3</span> hosts matched, <span style="color:rgb(128,0,128);line-height:1.5;">0</span> error[s] <span style="color:rgb(136,136,136);line-height:1.5;">while</span><span style="line-height:1.5;"> checking hosts.
</span>===============================================================================<span style="line-height:1.5;">
[</span><span style="color:rgb(128,0,128);line-height:1.5;">2015</span>-<span style="color:rgb(128,0,128);line-height:1.5;">11</span>-<span style="color:rgb(128,0,128);line-height:1.5;">14</span> <span style="color:rgb(128,0,128);line-height:1.5;">17</span>:<span style="color:rgb(128,0,128);line-height:1.5;">08</span>:<span style="color:rgb(128,0,128);line-height:1.5;">38</span><span style="line-height:1.5;">] Checking swift.conf md5sum
</span><span style="color:rgb(128,0,128);line-height:1.5;">3</span>/<span style="color:rgb(128,0,128);line-height:1.5;">3</span> hosts matched, <span style="color:rgb(128,0,128);line-height:1.5;">0</span> error[s] <span style="color:rgb(136,136,136);line-height:1.5;">while</span> checking hosts</pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;font-size:12px;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <h4 style="font-size:15px;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;">2.3.2 通过 REST API 使用</h4> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">URL 及功能列表：</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;"><img src="https://images2015.cnblogs.com/blog/697113/201511/697113-20151114163607259-738908190.jpg" alt="" style="border:0px;"></p> 
   <h2 style="font-size:21px;line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;">&nbsp;3. 其它监控工具</h2> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp; &nbsp; Swift 自身带的监控工具能提供比较丰富的功能，但是使用起来还不是很方便，因此，业界已经出现了很多商业的或者开源的监控工具。这些监控工具，要么向 swift-recon 一样实现了一个新的中间件，要么调用 Swift 自身的工具提供的接口。&nbsp;以下（1 - 4 部分）文字引用自&nbsp;<a href="http://www.cnblogs.com/Clisa/p/3461701.html" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;">OpenStack Object Storage Monitoring</a>&nbsp;一文：</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">（1）Swift-Informant</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp; &nbsp; Florian Hines 开发的 Swift-Informant 中间件可以获得 OS 客户请求的实时结果。它位于proxy server的 pipeline，在每一个请求到达Proxy server之后，它发送3类统计数据到StatsD server.</p> 
   <ul style="list-style:none;font-size:15px;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;">
    <li style="list-style-type:disc;">一个类似obj.GET.200 or cont.PUT.404的增量计数器。</li> 
    <li style="list-style-type:disc;">请求处理的时间长度</li> 
    <li style="list-style-type:disc;">传输数据数量</li> 
   </ul>
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">　　这有利于了解客户正体验的服务品质，也可以了解各种服务类型，命令以及响应码的不同排列的数量。Swift-Informant也要求no change to core Swift code因为它是用中间件实现的。然而，也因为如此，它不能让人看到代理服务器后面的工作情景。如果一个存储节点的响应降低，你也可能看到你的请求变差－要么是高延迟，要么返回错误状态码。你不会知道具体是为什么，或者请求是要去哪里。或许你所考虚的container服务器是在一个好的节点的，而对象服务器是在另一个性能差的节点。<br> 因此我们需要深入视觉到proxy server的后面，集群的操作里去。</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">（2）Statsdlog<br> Florian 的 statsdlog 工程增加了 StatsD 基于日志事件的计数器。正如Swift-Informant，它也是非侵入式的。但是statsdlog可以从Swift后台进程中追踪事件，而不仅仅是代理服务器。后台进程监听syslog信息的UDP流，当一条日志匹配于一个正则表达式时，StatsD计数器递增。Metric名字映射到JSON文件中的正则pattern。JSON文件允许灵活配置以能从日志流中抽取出想要的metrics。</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">（3）Swift StatsD Logging<br> StatsD 使用程序代码来作深入分析。Metrics被有针对性的代码实时发送。发送一个metric的开销相当低：一个sendto UDP包。如果你认为这样的开销还算高的话，StatsD client library可以只发送样本的随机比率部分，flushing metrics upstream时StatsD将估算实际数据。要避免基于中间件的监控与事后日志处理所带来的弊端，我们把StatsD metrics发送过种整合到Swift本身。我们当前所提交的更改报告了遍布15个swift后台进程的124个metrics以及tempauth中间件。metrics细节可参考https://review.openstack.org/#patch,sidebyside,6058,2,doc/source/admin_guide.rst</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">（4）总结</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp; &nbsp; 我们认为 Swift 集群动作最好的监控方法是综合了一个通用服务器监控系统，一个Swift特定统计指标收集（polling Swift-specific gauge metrics）机制，一个Swift内部counter与timing metrics深度StatsD日志手段的结合体。对于polling Swift-specific gauge metrics，最好使用一个通用的收集插件。这个插件即可以从swift-recon读数据，也可以自己直接收集信息。在 SwiftStack，我们使用 collectd 加上一些服务器监控用 python 插件代码。我们也在collectd中嵌入StatsD服务器，这样每个节点都有一个进程将stats数据“倒”给Graphite"(http://graphite.wikidot.com/)集群。有了这个装置，我们拥有前述所有问题的全覆盖解决方案：general purpose monitoring, Swift-specific gauge monitoring, and real-time counter and timing data directly from Swift。除了图形化，你也可以实现异常检测，触发警告，维护一个实时的实体健康状态视图，避免各种突发问题。</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">（5）SwiftStack 监控工具的部分截图：</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;"><img src="https://images2015.cnblogs.com/blog/697113/201511/697113-20151114170541697-788902261.jpg" alt="" style="border:0px;"></p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;"><img src="https://images2015.cnblogs.com/blog/697113/201511/697113-20151114170615025-106618313.jpg" alt="" style="border:0px;"></p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">&nbsp;</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;"><img src="https://images2015.cnblogs.com/blog/697113/201511/697113-20151114170653915-528531455.jpg" alt="" style="border:0px;"></p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">（6）另外一个监控环境示例</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;"><img src="https://images2015.cnblogs.com/blog/697113/201511/697113-20151115082416931-864980338.jpg" alt="" style="border:0px;"></p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">（7）Benchmarking 工具</p> 
   <div style="color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;"> 
    <p style="line-height:1.5;">Intel 开源了对象存储的 Benchmarking 工具 COSBench，<a href="https://github.com/intel-cloud/cosbench" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;font-size:14px;line-height:1.5;">https://</a><a href="https://github.com/intel-cloud/cosbench" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;font-size:14px;line-height:1.5;">github.com/intel-cloud/cosbench</a></p> 
    <h2 style="font-size:21px;line-height:1.5;">4. 一些影响性能的因素</h2> 
    <p style="line-height:1.5;">注：以下内容引用自 "Leveraging open source tools to gain insight into OpenStack Swift“ ，by&nbsp;Michael Factor,Dmitry Sotnikov, dmitrys@il.ibm.com。他们使用的测试环境：</p> 
    <p style="line-height:1.5;"><img src="https://images2015.cnblogs.com/blog/697113/201511/697113-20151115084914056-1983086671.jpg" alt="" style="border:0px;"></p> 
    <h3 style="font-size:16px;color:rgb(102,102,102);background-image:none;background-repeat:no-repeat;font-family:Verdana;line-height:1.5;">4.1 Container 数量和 Swift 版本</h3> 
    <p style="line-height:1.5;"><img src="https://images2015.cnblogs.com/blog/697113/201511/697113-20151115082904197-451430556.jpg" alt="" style="border:0px;">（PUT 操作）</p> 
    <p style="line-height:1.5;">版本和 container 数目带来的性能差异还是非常大的。建议使用 Swift 2.2 版本以上，以及多个 container。</p> 
    <h3 style="font-size:16px;color:rgb(102,102,102);background-image:none;background-repeat:no-repeat;font-family:Verdana;line-height:1.5;">4.2 客户端 worker 数目</h3> 
    <p style="line-height:1.5;"><img src="https://images2015.cnblogs.com/blog/697113/201511/697113-20151115083122634-343984212.jpg" alt="" style="border:0px;"></p> 
    <p style="line-height:1.5;">可见客户端 worker 数目不是越多性能就会线性增加。</p> 
    <h3 style="font-size:16px;color:rgb(102,102,102);background-image:none;background-repeat:no-repeat;font-family:Verdana;line-height:1.5;">4.3 Container 中的对象数目</h3> 
    <p style="line-height:1.5;"><img src="https://images2015.cnblogs.com/blog/697113/201511/697113-20151115083409290-2032222802.jpg" alt="" style="border:0px;"></p> 
    <h3 style="font-size:16px;color:rgb(102,102,102);background-image:none;background-repeat:no-repeat;font-family:Verdana;line-height:1.5;">4.4 前端和后端网络带宽</h3> 
    <p style="line-height:1.5;"><img src="https://images2015.cnblogs.com/blog/697113/201511/697113-20151115083831025-143482330.jpg" alt="" style="border:0px;"></p> 
    <p style="line-height:1.5;">说明后端网络的带宽压力是前端的至少3倍。</p> 
    <h3 style="font-size:16px;color:rgb(102,102,102);background-image:none;background-repeat:no-repeat;font-family:Verdana;line-height:1.5;">4.5 存储节点的磁盘I/O 和前端网络 I/O 的关系（12倍）</h3> 
    <p style="line-height:1.5;"><img src="https://images2015.cnblogs.com/blog/697113/201511/697113-20151115084216744-782039834.jpg" alt="" style="border:0px;"></p> 
    <h3 style="font-size:16px;color:rgb(102,102,102);background-image:none;background-repeat:no-repeat;font-family:Verdana;line-height:1.5;">4.6 对象大小</h3> 
    <p style="line-height:1.5;"><img src="https://images2015.cnblogs.com/blog/697113/201511/697113-20151115084510947-2019007328.jpg" alt="" style="border:0px;"></p> 
    <p style="line-height:1.5;">这说明 Swift 不合适处理大量的小文件。</p> 
    <h3 style="font-size:16px;color:rgb(102,102,102);background-image:none;background-repeat:no-repeat;font-family:Verdana;line-height:1.5;">4.7 IOPS 性能不是随着存储节点数目线性扩展的</h3> 
    <p style="line-height:1.5;"><img src="https://images2015.cnblogs.com/blog/697113/201511/697113-20151115085521931-136505862.jpg" alt="" style="border:0px;"></p> 
    <p style="line-height:1.5;">也就是说这个环境中，存储节点数目为7的话，它们就不是 IOPS 性能瓶颈了。</p> 
    <p style="line-height:1.5;">&nbsp;</p> 
   </div> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:15px;">参考文档：</p> 
   <div> 
    <pre><a href="http://www.cnblogs.com/Clisa/p/3461701.html" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;">http://www.cnblogs.com/Clisa/p/3461701.html<br></a><a href="https://swiftstack.com/blog/2012/04/11/swift-monitoring-with-statsd/" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;">https://swiftstack.com/blog/2012/04/11/swift-monitoring-with-statsd/<br></a><a href="https://swiftstack.com/blog/2012/04/11/swift-monitoring-with-statsd/" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;">https://platform.swiftstack.com/docs/admin/monitoring/cluster-monitoring.html<br>
http://blog.chmouel.com/2012/02/01/audit-a-swift-cluster/<br></a></pre> 
    <pre><a href="https://swiftstack.com/blog/2012/04/11/swift-monitoring-with-statsd/" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;">&nbsp;</a></pre> 
    <pre><br></pre> 
    <pre></pre> 
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
