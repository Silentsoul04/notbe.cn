<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>关于大小型项目如何最大限度提高WebAPi性能 « NotBeCN</title>
  <meta name="description" content="             前言    WebAPi作为接口请求的一种服务，当我们请求该服务时我们目标是需要快速获取该服务的数据响应，这种情况在大型项目中尤为常见，此时迫切需要提高WebAPi的响应机制，当然也少不了前端需要作出的努力，这里我们只讲述在大小型项目中如何利用后台逻辑尽可能最大限度提高WebAPi性能，...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/11/28/weixin_34148508_90127884.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">关于大小型项目如何最大限度提高WebAPi性能</h1>
    <p class="post-meta">Nov 28, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <h1 style="font-size:28px;line-height:1.5;font-family:'Helvetica Neue', Arial;">前言</h1> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">WebAPi作为接口请求的一种服务，当我们请求该服务时我们目标是需要快速获取该服务的数据响应，这种情况在大型项目中尤为常见，此时迫切需要提高WebAPi的响应机制，当然也少不了前端需要作出的努力，这里我们只讲述在大小型项目中如何利用后台逻辑尽可能最大限度提高WebAPi性能，我们从以下几个方面来进行阐述。</p> 
   <h2 style="color:rgb(255,255,255);line-height:1.5;font-size:21px;font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(111,168,51);">性能提升一：JSON序列化器（Jil）</h2> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">在.NET里面默认的序列化器是JavaScriptSrializer，都懂的，性能实在是差，后来出现了Json.NET，以至于在目前创建项目时默认用的序列化器是Json.NET，它被.NET开发者所广泛使用，它的强大和性能毋庸置疑，以至于现在Json.NET版本已经更新到9.0版本，但是在大型项目中一旦数据量巨大时，此时用Json.NET来序列化数据会略慢，这时我们就可以尝试用Jil，它里面的APi也足够我们用，我们讲述几个常用的APi并一起对比Json.NET来看看：</p> 
   <h3 style="color:rgb(111,168,51);font-size:16px;line-height:1.5;border-left-width:13px;border-left-style:solid;border-left-color:rgb(111,168,51);font-family:'Helvetica Neue', Arial;">序列化对比</h3> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">在Json.NET中是这样序列化的</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre>JsonConvert.SerializeObject(obj)</pre>
   </div> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">而在Jil中序列化数据是这样的</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre>JSON.Serialize(obj)</pre>
   </div> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">此时对于Jil序列化数据返回的字符串形式有两种</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><span style="color:rgb(128,128,0);">（1）直接接收</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre> <span style="color:rgb(0,0,255);line-height:1.5;">object</span> obj = <span style="color:rgb(0,0,255);line-height:1.5;">new</span> { Foo = <span style="color:rgb(128,0,128);line-height:1.5;">123</span>, Bar = <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">abc</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;"> };
 </span><span style="color:rgb(0,0,255);line-height:1.5;">string</span> s = Jil.JSON.Serialize(obj)</pre>
   </div> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><span style="color:rgb(128,128,0);">（2）传递给StringWriter来接收</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre><span style="color:rgb(0,0,255);line-height:1.5;">var</span> obj = <span style="color:rgb(0,0,255);line-height:1.5;">new</span> { Foo = <span style="color:rgb(128,0,128);line-height:1.5;">123</span>, Bar = <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">abc</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;"> };
</span><span style="color:rgb(0,0,255);line-height:1.5;">var</span> t = <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> StringWriter();
JSON.SerializeDynamic(obj, t);</span></pre>
   </div> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">上述说到对于数据量巨大时用Jil其效率高于Json.NET，下来我们来验证序列化10000条数据</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">序列化类：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre>    <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> Person
    {
        </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">int</span> Id { <span style="color:rgb(0,0,255);line-height:1.5;">get</span>; <span style="color:rgb(0,0,255);line-height:1.5;">set</span><span style="line-height:1.5;">; }
        </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">string</span> Name { <span style="color:rgb(0,0,255);line-height:1.5;">get</span>; <span style="color:rgb(0,0,255);line-height:1.5;">set</span><span style="line-height:1.5;">; }
    }</span></pre>
   </div> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">测试数据：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>            <span style="color:rgb(0,0,255);line-height:1.5;">var</span> list = <span style="color:rgb(0,0,255);line-height:1.5;">new</span> List&lt;Person&gt;<span style="line-height:1.5;">();
            </span><span style="color:rgb(0,0,255);line-height:1.5;">for</span> (<span style="color:rgb(0,0,255);line-height:1.5;">int</span> i = <span style="color:rgb(128,0,128);line-height:1.5;">0</span>; i &lt; <span style="color:rgb(128,0,128);line-height:1.5;">10000</span>; i++<span style="line-height:1.5;">)
            {
                list.Add(new Person(){ Id = i });
            }
            </span><span style="color:rgb(0,0,255);line-height:1.5;">var</span> stop = <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> Stopwatch();
            stop.Start();
            </span><span style="color:rgb(0,0,255);line-height:1.5;">var</span> jil =<span style="line-height:1.5;"> SerializeList(list);
            Console.WriteLine(stop.ElapsedMilliseconds);
            stop.Stop();<br></span><span style="color:rgb(0,0,255);line-height:1.5;">var</span> stop1 = <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> Stopwatch();
            stop1.Start();
            </span><span style="color:rgb(0,0,255);line-height:1.5;">var</span> json =<span style="line-height:1.5;"> JsonConvert.SerializeObject(list);
            Console.WriteLine(stop1.ElapsedMilliseconds);
            stop1.Stop();</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">Jil序列化封装：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>        <span style="color:rgb(0,0,255);line-height:1.5;">private</span> <span style="color:rgb(0,0,255);line-height:1.5;">static</span> <span style="color:rgb(0,0,255);line-height:1.5;">string</span> SerializeList(List&lt;Person&gt;<span style="line-height:1.5;"> list)
        {
            </span><span style="color:rgb(0,0,255);line-height:1.5;">using</span> (<span style="color:rgb(0,0,255);line-height:1.5;">var</span> output = <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> StringWriter())
            {
                JSON.Serialize(
                    list,
                    output
                );
                </span><span style="color:rgb(0,0,255);line-height:1.5;">return</span><span style="line-height:1.5;"> output.ToString();
            }
        }</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">我们来看看测试用例：</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><img src="https://images2015.cnblogs.com/blog/589642/201610/589642-20161028214729781-655535043.gif" alt="" style="border:0px;">此时利用Json.NET序列化数据明显优于Jil，但序列化数据为10万条数，Jil所耗时间会接近于Json.NET，当数据高于100万条数时这个时候就可以看出明显的效果，如下：</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><img src="https://images2015.cnblogs.com/blog/589642/201610/589642-20161028215121984-759829481.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">此时Jil序列化数据不到1秒，而利用Json.NET则需要足足接近3秒。</p> 
   <h3 style="color:rgb(111,168,51);font-size:16px;line-height:1.5;border-left-width:13px;border-left-style:solid;border-left-color:rgb(111,168,51);font-family:'Helvetica Neue', Arial;">测试用例更新：</h3> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">当将代码进行如下修改时，少量数据也是优于Json.NET，数据量越大性能越明显，感谢园友【<a href="https://home.cnblogs.com/u/calvinK/" rel="nofollow" style="text-decoration:none;color:rgb(45,161,45);">calvinK</a>】提醒：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>            <span style="color:rgb(0,0,255);line-height:1.5;">var</span> list = <span style="color:rgb(0,0,255);line-height:1.5;">new</span> List&lt;<span style="color:rgb(0,0,255);line-height:1.5;">int</span>&gt;<span style="line-height:1.5;">();
            </span><span style="color:rgb(0,0,255);line-height:1.5;">for</span> (<span style="color:rgb(0,0,255);line-height:1.5;">int</span> i = <span style="color:rgb(128,0,128);line-height:1.5;">0</span>; i &lt; <span style="color:rgb(128,0,128);line-height:1.5;">10000</span>; i++<span style="line-height:1.5;">)
            {
                list.Add(i);
            }

            </span><span style="color:rgb(0,0,255);line-height:1.5;">var</span> stop = <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> Stopwatch();
            stop.Start();
            </span><span style="color:rgb(0,0,255);line-height:1.5;">for</span> (<span style="color:rgb(0,0,255);line-height:1.5;">var</span> i = <span style="color:rgb(128,0,128);line-height:1.5;">0</span>; i &lt; <span style="color:rgb(128,0,128);line-height:1.5;">1000</span>; i++<span style="line-height:1.5;">)
            {
                </span><span style="color:rgb(0,0,255);line-height:1.5;">var</span> jil =<span style="line-height:1.5;"> SerializeList(list);

            }

            Console.WriteLine(stop.ElapsedMilliseconds);
            stop.Stop();
            </span><span style="color:rgb(0,0,255);line-height:1.5;">var</span> stop1 = <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> Stopwatch();
            stop1.Start();
            </span><span style="color:rgb(0,0,255);line-height:1.5;">for</span> (<span style="color:rgb(0,0,255);line-height:1.5;">var</span> i = <span style="color:rgb(128,0,128);line-height:1.5;">0</span>; i &lt; <span style="color:rgb(128,0,128);line-height:1.5;">1000</span>; i++<span style="line-height:1.5;">)
            {
                </span><span style="color:rgb(0,0,255);line-height:1.5;">var</span> json =<span style="line-height:1.5;"> JsonConvert.SerializeObject(list);

            }
            Console.WriteLine(stop1.ElapsedMilliseconds);
            stop1.Stop();</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">结果如下：</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><img src="https://images2015.cnblogs.com/blog/589642/201610/589642-20161031215938252-1656272913.png" alt="" style="border:0px;"></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre><span style="color:rgb(128,128,0);line-height:1.5;"> 关于Jil的序列化还有一种则是利用JSON.SerializeDynamic来序列化那些在编译时期无法预测的类型。 至于反序列化也是和其序列化一一对应。</span></pre>
   </div> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">下面我们继续来看看Jil的其他特性。若在视图上渲染那些我们需要的数据，而对于实体中不必要用到的字段我们就需要进行过滤，此时我们用到Jil中的忽略属性。</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre><span style="color:rgb(128,128,0);line-height:1.5;"> [JilDirective(Ignore = true)]</span></pre>
   </div> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">我们来看看：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>    <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> Person
    {
        [JilDirective(Ignore </span>= <span style="color:rgb(0,0,255);line-height:1.5;">true</span><span style="line-height:1.5;">)]
        </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">int</span> Id { <span style="color:rgb(0,0,255);line-height:1.5;">get</span>; <span style="color:rgb(0,0,255);line-height:1.5;">set</span><span style="line-height:1.5;">; }
        </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">int</span> Name { <span style="color:rgb(0,0,255);line-height:1.5;">get</span>; <span style="color:rgb(0,0,255);line-height:1.5;">set</span><span style="line-height:1.5;">; }
    }</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre>            <span style="color:rgb(0,0,255);line-height:1.5;">var</span> jil = SerializeList(<span style="color:rgb(0,0,255);line-height:1.5;">new</span> Person() { Id = <span style="color:rgb(128,0,128);line-height:1.5;">1</span>, Name = <span style="color:rgb(128,0,128);line-height:1.5;">123</span><span style="line-height:1.5;"> } );
            Console.WriteLine(jil);</span></pre>
   </div> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><img src="https://images2015.cnblogs.com/blog/589642/201610/589642-20161031135152752-919432597.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">另外在Jil中最重要的属性则是Options，该属性用来配置返回的日期格式以及其他配置，若未用其属性默认利用Json.NET返回如【\/Date(143546676)\/】，我们来看下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre><span style="color:rgb(0,0,255);line-height:1.5;">var</span> jil = SerializeList(<span style="color:rgb(0,0,255);line-height:1.5;">new</span> Person() { Id = <span style="color:rgb(128,0,128);line-height:1.5;">1</span>, Name = <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">123</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>, Time = DateTime.Now });</pre>
   </div> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">进行如下设置：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre><span style="line-height:1.5;">               JSON.Serialize(
                    p,
                    output,
                    </span><span style="color:rgb(128,128,0);line-height:1.5;">new</span><span style="line-height:1.5;"><span style="color:rgb(128,128,0);line-height:1.5;"> Options(dateFormat: DateTimeFormat.ISO8601)</span>
                );</span></pre>
   </div> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><img src="https://images2015.cnblogs.com/blog/589642/201610/589642-20161031151113455-1078546748.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">有关序列化继承类时我们同样需要进行如下设置，否则无法进行序列化</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre><span style="color:rgb(0,0,255);line-height:1.5;">new</span> Options(dateFormat: DateTimeFormat.ISO8601, <span style="color:rgb(128,128,0);line-height:1.5;">includeInherited: true</span>)</pre>
   </div> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">Jil的性能绝对优于Json.NET，Jil一直在追求序列化的速度所以在更多可用的APi可能少于Json.NET或者说没有Json.NET灵活，但是足以满足我们的要求。&nbsp;</p> 
   <h2 style="color:rgb(255,255,255);line-height:1.5;font-size:21px;font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(111,168,51);">性能提升二：压缩（Compress）&nbsp;</h2> 
   <h3 style="color:rgb(111,168,51);font-size:16px;line-height:1.5;border-left-width:13px;border-left-style:solid;border-left-color:rgb(111,168,51);font-family:'Helvetica Neue', Arial;">压缩方式（1） 【IIS设置】</h3> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">启动IIS动态内容压缩</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><img src="https://images2015.cnblogs.com/blog/589642/201610/589642-20161031153258205-2005351515.png" alt="" style="border:0px;"></p> 
   <h3 style="color:rgb(111,168,51);font-size:16px;line-height:1.5;border-left-width:13px;border-left-style:solid;border-left-color:rgb(111,168,51);font-family:'Helvetica Neue', Arial;"><span>压缩方式（2）【DotNetZip】&nbsp;</span></h3> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">利用现成的轮子，下载程序包【DotNetZip】即可，此时我们则需要在执行方法完毕后来进行内容的压缩即可，所以我们需要重写【&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">ActionFilterAttribute</span>&nbsp;】过滤器，在此基础上进行我们的压缩操作。如下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>    <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> DeflateCompressionAttribute : ActionFilterAttribute
    {
        </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">override</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> OnActionExecuted(HttpActionExecutedContext actionContext)
        {
            </span><span style="color:rgb(0,0,255);line-height:1.5;">var</span> content =<span style="line-height:1.5;"> actionContext.Response.Content;
            </span><span style="color:rgb(0,0,255);line-height:1.5;">var</span> bytes = content == <span style="color:rgb(0,0,255);line-height:1.5;">null</span> ? <span style="color:rgb(0,0,255);line-height:1.5;">null</span><span style="line-height:1.5;"> : content.ReadAsByteArrayAsync().Result;
            </span><span style="color:rgb(0,0,255);line-height:1.5;">var</span> compressContent = bytes == <span style="color:rgb(0,0,255);line-height:1.5;">null</span> ? <span style="color:rgb(0,0,255);line-height:1.5;">new</span> <span style="color:rgb(0,0,255);line-height:1.5;">byte</span>[<span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;">] : CompressionHelper.DeflateByte(bytes);
            actionContext.Response.Content </span>= <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> ByteArrayContent(compressContent);
            actionContext.Response.Content.Headers.Remove(</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">Content-Type</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">);
            </span><span style="color:rgb(0,0,255);line-height:1.5;">if</span> (<span style="color:rgb(0,0,255);line-height:1.5;">string</span>.Equals(actionContext.Request.Headers.AcceptEncoding.First().Value, <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">deflate</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">))
                actionContext.Response.Content.Headers.Add(</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">Content-encoding</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>, <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">deflate</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">);
            </span><span style="color:rgb(0,0,255);line-height:1.5;">else</span><span style="line-height:1.5;">
                actionContext.Response.Content.Headers.Add(</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">Content-encoding</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>, <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">gzip</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">);
            actionContext.Response.Content.Headers.Add(</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">Content-Type</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>, <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">application/json;charset=utf-8</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">);
            </span><span style="color:rgb(0,0,255);line-height:1.5;">base</span><span style="line-height:1.5;">.OnActionExecuted(actionContext);
        }

    }</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">利用DotNetZip进行快速压缩：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>    <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> CompressionHelper
    {
        </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">static</span> <span style="color:rgb(0,0,255);line-height:1.5;">byte</span>[] DeflateByte(<span style="color:rgb(0,0,255);line-height:1.5;">byte</span><span style="line-height:1.5;">[] str)
        {
            </span><span style="color:rgb(0,0,255);line-height:1.5;">if</span> (str == <span style="color:rgb(0,0,255);line-height:1.5;">null</span><span style="line-height:1.5;">)
            {

                </span><span style="color:rgb(0,0,255);line-height:1.5;">return</span> <span style="color:rgb(0,0,255);line-height:1.5;">null</span><span style="line-height:1.5;">;

            }
            </span><span style="color:rgb(0,0,255);line-height:1.5;">using</span> (<span style="color:rgb(0,0,255);line-height:1.5;">var</span> output = <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> MemoryStream())
            {

                </span><span style="color:rgb(0,0,255);line-height:1.5;">using</span> (<span style="color:rgb(0,0,255);line-height:1.5;">var</span> compressor = <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> Ionic.Zlib.GZipStream(

                output, Ionic.Zlib.CompressionMode.Compress,

                Ionic.Zlib.CompressionLevel.BestSpeed))
                {

                    compressor.Write(str, </span><span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;">, str.Length);

                }

                </span><span style="color:rgb(0,0,255);line-height:1.5;">return</span><span style="line-height:1.5;"> output.ToArray();

            }

        }

    }</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">我们来对比看一下未进行内容压缩前后结果响应的时间以及内容长度，给出如下测试类：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="line-height:1.5;">        [HttpGet]
        [DeflateCompression]
        </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">async</span> Task&lt;IHttpActionResult&gt;<span style="line-height:1.5;"> GetZipData()
        {</span><span style="line-height:1.5;">
            Dictionary</span>&lt;<span style="color:rgb(0,0,255);line-height:1.5;">object</span>, <span style="color:rgb(0,0,255);line-height:1.5;">object</span>&gt; dict = <span style="color:rgb(0,0,255);line-height:1.5;">new</span> Dictionary&lt;<span style="color:rgb(0,0,255);line-height:1.5;">object</span>, <span style="color:rgb(0,0,255);line-height:1.5;">object</span>&gt;<span style="line-height:1.5;">();
            List</span>&lt;Employee&gt; li = <span style="color:rgb(0,0,255);line-height:1.5;">new</span> List&lt;Employee&gt;<span style="line-height:1.5;">();
            li.Add(</span><span style="color:rgb(0,0,255);line-height:1.5;">new</span> Employee { Id = <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">2</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>, Name = <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">xpy0928</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>, Email = <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">a@gmail.com</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;"> });
            li.Add(</span><span style="color:rgb(0,0,255);line-height:1.5;">new</span> Employee { Id = <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">3</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>, Name = <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">tom</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>, Email = <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">b@mail.com</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;"> });
            li.Add(</span><span style="color:rgb(0,0,255);line-height:1.5;">new</span> Employee { Id = <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">4</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>, Name = <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">jim</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>, Email = <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">c@mail.com</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;"> });
            li.Add(</span><span style="color:rgb(0,0,255);line-height:1.5;">new</span> Employee { Id = <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">5</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>, Name = <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">tony</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>,Email = <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">d@mail.com</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;"> });<br>
dict.Add(</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">Details</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">, li);</span><span style="color:rgb(0,0,255);line-height:1.5;">return</span><span style="line-height:1.5;"> Ok(dict);

        }  </span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">结果运行错误：</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><img src="https://images2015.cnblogs.com/blog/589642/201610/589642-20161031160955893-1504938457.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">这里应该是序列化出现问题，在有些浏览器返回的XML数据，我用的是搜狗浏览器，之前学习WebAPi时其返回的就是XML数据，我们试着将其返回为Json数据看看。</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>            <span style="color:rgb(0,0,255);line-height:1.5;">var</span> formatters = config.Formatters.Where(formatter =&gt;<span style="line-height:1.5;">
                 formatter.SupportedMediaTypes.Where(media </span>=&gt;<span style="line-height:1.5;">
                 media.MediaType.ToString() </span>== <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">application/xml</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span> || media.MediaType.ToString() == <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">text/html</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>).Count() &gt; <span style="color:rgb(128,0,128);line-height:1.5;">0</span>) <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">找到请求头信息中的介质类型</span>
<span style="line-height:1.5;">                 .ToList();

            </span><span style="color:rgb(0,0,255);line-height:1.5;">foreach</span> (<span style="color:rgb(0,0,255);line-height:1.5;">var</span> match <span style="color:rgb(0,0,255);line-height:1.5;">in</span><span style="line-height:1.5;"> formatters)
            {
                config.Formatters.Remove(match);
            }</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">我们未将其压缩后响应的长度如下所示：</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><img src="https://images2015.cnblogs.com/blog/589642/201610/589642-20161031161316268-183415390.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">压缩后结果明显得到提升</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><img src="https://images2015.cnblogs.com/blog/589642/201610/589642-20161031161514830-813788360.png" alt="" style="border:0px;"></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">接下来我们自定义用.NET内置的压缩模式来实现看看</p> 
   <h3 style="color:rgb(111,168,51);font-size:16px;line-height:1.5;border-left-width:13px;border-left-style:solid;border-left-color:rgb(111,168,51);font-family:'Helvetica Neue', Arial;">压缩方式（3）【自定义实现】</h3> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">既然响应的内容是通过HttpContent，我们则需要在重写过滤器ActionFilterAttribute的基础上来实现重写HttpContent，最终根据获取到浏览器支持的压缩格式对数据进行压缩并写入到响应流中即可。</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>    <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> CompressContent : HttpContent
    {
        </span><span style="color:rgb(0,0,255);line-height:1.5;">private</span> <span style="color:rgb(0,0,255);line-height:1.5;">readonly</span> <span style="color:rgb(0,0,255);line-height:1.5;">string</span><span style="line-height:1.5;"> _encodingType;
        </span><span style="color:rgb(0,0,255);line-height:1.5;">private</span> <span style="color:rgb(0,0,255);line-height:1.5;">readonly</span><span style="line-height:1.5;"> HttpContent _originalContent;
        </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> CompressContent(HttpContent content, <span style="color:rgb(0,0,255);line-height:1.5;">string</span> encodingType = <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">gzip</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">)
        {
            _originalContent </span>=<span style="line-height:1.5;"> content;
            _encodingType </span>=<span style="line-height:1.5;"> encodingType.ToLowerInvariant();
            Headers.ContentEncoding.Add(encodingType);
        }
        </span><span style="color:rgb(0,0,255);line-height:1.5;">protected</span> <span style="color:rgb(0,0,255);line-height:1.5;">override</span> <span style="color:rgb(0,0,255);line-height:1.5;">bool</span> TryComputeLength(<span style="color:rgb(0,0,255);line-height:1.5;">out</span> <span style="color:rgb(0,0,255);line-height:1.5;">long</span><span style="line-height:1.5;"> length)
        {
            length </span>= -<span style="color:rgb(128,0,128);line-height:1.5;">1</span><span style="line-height:1.5;">;
            </span><span style="color:rgb(0,0,255);line-height:1.5;">return</span> <span style="color:rgb(0,0,255);line-height:1.5;">false</span><span style="line-height:1.5;">;
        }
        </span><span style="color:rgb(0,0,255);line-height:1.5;">protected</span> <span style="color:rgb(0,0,255);line-height:1.5;">override</span><span style="line-height:1.5;"> Task SerializeToStreamAsync(Stream stream, TransportContext context)
        {
            Stream compressStream </span>= <span style="color:rgb(0,0,255);line-height:1.5;">null</span><span style="line-height:1.5;">;
            </span><span style="color:rgb(0,0,255);line-height:1.5;">switch</span><span style="line-height:1.5;"> (_encodingType)
            {
                </span><span style="color:rgb(0,0,255);line-height:1.5;">case</span> <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">gzip</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">:
                    compressStream </span>= <span style="color:rgb(0,0,255);line-height:1.5;">new</span> GZipStream(stream, CompressionMode.Compress, <span style="color:rgb(0,0,255);line-height:1.5;">true</span><span style="line-height:1.5;">);
                    </span><span style="color:rgb(0,0,255);line-height:1.5;">break</span><span style="line-height:1.5;">;
                </span><span style="color:rgb(0,0,255);line-height:1.5;">case</span> <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">deflate</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">:
                    compressStream </span>= <span style="color:rgb(0,0,255);line-height:1.5;">new</span> DeflateStream(stream, CompressionMode.Compress, <span style="color:rgb(0,0,255);line-height:1.5;">true</span><span style="line-height:1.5;">);
                    </span><span style="color:rgb(0,0,255);line-height:1.5;">break</span><span style="line-height:1.5;">;
                </span><span style="color:rgb(0,0,255);line-height:1.5;">default</span><span style="line-height:1.5;">:
                    compressStream </span>=<span style="line-height:1.5;"> stream;
                    </span><span style="color:rgb(0,0,255);line-height:1.5;">break</span><span style="line-height:1.5;">;
            }
            </span><span style="color:rgb(0,0,255);line-height:1.5;">return</span> _originalContent.CopyToAsync(compressStream).ContinueWith(tsk =&gt;<span style="line-height:1.5;">
            {
                </span><span style="color:rgb(0,0,255);line-height:1.5;">if</span> (compressStream != <span style="color:rgb(0,0,255);line-height:1.5;">null</span><span style="line-height:1.5;">)
                {
                    compressStream.Dispose();
                }
            });
        }
    }  </span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">重写过滤器特性</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>    <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> CompressContentAttribute : ActionFilterAttribute
    {
        </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">override</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> OnActionExecuted(HttpActionExecutedContext context)
        {
            </span><span style="color:rgb(0,0,255);line-height:1.5;">var</span> acceptedEncoding =<span style="line-height:1.5;"> context.Response.RequestMessage.Headers.AcceptEncoding.First().Value;
            </span><span style="color:rgb(0,0,255);line-height:1.5;">if</span> (!acceptedEncoding.Equals(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">gzip</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">, StringComparison.InvariantCultureIgnoreCase)
            </span>&amp;&amp; !acceptedEncoding.Equals(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">deflate</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">, StringComparison.InvariantCultureIgnoreCase))
            {
                </span><span style="color:rgb(0,0,255);line-height:1.5;">return</span><span style="line-height:1.5;">;
            }
            context.Response.Content </span>= <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> CompressContent(context.Response.Content, acceptedEncoding);
        }  

    }</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">关于其响应结果对比则不再叙述，和上述利用DotNetZip结果一致。&nbsp;</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">当写压缩内容时，我发现一个问题，产生了疑问，&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">context.Response.Content.Headers</span>&nbsp;和&nbsp;<span class="cnblogs_code" style="border:1px solid rgb(204,204,204);color:rgb(0,0,0);font-family:'Courier New';font-size:12px;">context.Response.Headers</span>&nbsp;为何响应中有两个头Headers呢？，没有去细究这个问题，大概说说个人想法。</p> 
   <h3 style="color:rgb(111,168,51);font-size:16px;line-height:1.5;border-left-width:13px;border-left-style:solid;border-left-color:rgb(111,168,51);font-family:'Helvetica Neue', Arial;">context.Response.Content.Headers和context.Response.Headers有什么不同呢？</h3> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">我们看看context.Response.Headers中的定义，其摘要如下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>        <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> 摘要: 
        </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">     Gets a value that indicates if the HTTP response was successful.
        </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span>
        <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> 返回结果: 
        </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">     Returns System.Boolean.A value that indicates if the HTTP response was successful.
        </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">     true if System.Net.Http.HttpResponseMessage.StatusCode was in the range 200-299;
        </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">     otherwise false.</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">而context.Response.Content.Headers中的定义，其摘要如下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>        <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> 摘要: 
        </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">     Gets the HTTP content headers as defined in RFC 2616.
        </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span>
        <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;"> 返回结果: 
        </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">     Returns System.Net.Http.Headers.HttpContentHeaders.The content headers as
        </span><span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">     defined in RFC 2616.</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">对于Content.Headers中的Headers的定义是基于RFC 2616即Http规范，想必这么做的目的是将Http规范隔离开来，我们能够方便我们实现自定义代码或者设置有关响应头信息最终直接写入到Http的响应流中。我们更多的是操作Content.Headers所以将其区别开来，或许是出于此目的吧，有知道的园友可以给出合理的解释，这里只是我的个人揣测。</p> 
   <h2 style="color:rgb(255,255,255);line-height:1.5;font-size:21px;font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(111,168,51);">性能提升三：缓存（Cache:粒度比较大）</h2> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">缓存大概是谈的最多的话题，当然也有大量的缓存组件供我们使用，这里只是就比较大的粒度来谈论这个问题，对于一些小的项目还是有一点作用，大的则另当别论。</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">当我们进行请求可以查看响应头中会有这样一个字段【Cache-Control】，如果我们未做任何处理当然则是其值为【no-cache】。在任何时期都不会进行缓存，都会重新进行请求数据。这个属性里面对应的值还有private/public、must-revalidate，当我们未指定max-age的值时且设置值为private、no-cache、must-revalidate此时的请求都会去服务器获取数据。这里我们首先了解下关于Http协议的基本知识。</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><span style="color:rgb(128,128,0);">【1】若设置为private，则其不能共享缓存意思则是不会在本地缓存页面即对于代理服务器而言不会复制一份，而如果对于用户而言其缓存更加是私有的，只是对于个人而言，用户之间的缓存相互独立，互不共享。若为public则说明每个用户都可以共享这一块缓存。对于这二者打个比方对于博客园的推送的新闻是公开的，则可以设置为public共享缓存，充分利用缓存。</span></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><span style="color:rgb(128,128,0);">【2】max-age则是缓存的过期时间，在某一段时间内不会去重新请求从服务器获取数据，直接在本地浏览器缓存中获取。</span></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><span style="color:rgb(128,128,0);">【3】must-revalidate从字面意思来看则是必须重新验证，也就是对于过期的数据进行重新获取新的数据，那么它到底什么时候用呢？归根结底一句话：must-revalidate主要与max-age有关，当设置了max-age时，同时也设置了must-revalidate，等缓存过期后，此时must-revalidate则会告诉服务器来获取最新的数据。也就是说当设置max-age = 0，must-revalidate = true时可以说是与no-cache = true等同。</span></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><span style="color:rgb(0,0,0);">下面我们来进行缓存控制：</span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre>    <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">class</span><span style="line-height:1.5;"> CacheFilterAttribute : ActionFilterAttribute
    {
        </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">int</span> CacheTimeDuration { <span style="color:rgb(0,0,255);line-height:1.5;">get</span>; <span style="color:rgb(0,0,255);line-height:1.5;">set</span><span style="line-height:1.5;">; }
        </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">override</span> <span style="color:rgb(0,0,255);line-height:1.5;">void</span><span style="line-height:1.5;"> OnActionExecuted(HttpActionExecutedContext actionExecutedContext)
        {
            actionExecutedContext.Response.Headers.CacheControl </span>= <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> CacheControlHeaderValue
            {
                MaxAge </span>=<span style="line-height:1.5;"> TimeSpan.FromSeconds(CacheTimeDuration),
                MustRevalidate </span>= <span style="color:rgb(0,0,255);line-height:1.5;">true</span><span style="line-height:1.5;">,
                Public </span>= <span style="color:rgb(0,0,255);line-height:1.5;">true</span><span style="line-height:1.5;">
            };
        }
    }</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">添加缓存过滤特性：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <pre><span style="line-height:1.5;">        [HttpGet]
        [CompressContent]
       <span style="color:rgb(128,128,0);line-height:1.5;"> [CacheFilter(CacheTimeDuration </span></span><span style="color:rgb(128,128,0);line-height:1.5;">= 100)]
        </span><span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">async</span> Task&lt;IHttpActionResult&gt;<span style="line-height:1.5;"> GetZipData()
        {
            </span><span style="color:rgb(0,0,255);line-height:1.5;">var</span> sw = <span style="color:rgb(0,0,255);line-height:1.5;">new</span><span style="line-height:1.5;"> Stopwatch();
            sw.Start();
            Dictionary</span>&lt;<span style="color:rgb(0,0,255);line-height:1.5;">object</span>, <span style="color:rgb(0,0,255);line-height:1.5;">object</span>&gt; dict = <span style="color:rgb(0,0,255);line-height:1.5;">new</span> Dictionary&lt;<span style="color:rgb(0,0,255);line-height:1.5;">object</span>, <span style="color:rgb(0,0,255);line-height:1.5;">object</span>&gt;<span style="line-height:1.5;">();
            List</span>&lt;Employee&gt; li = <span style="color:rgb(0,0,255);line-height:1.5;">new</span> List&lt;Employee&gt;<span style="line-height:1.5;">();
            li.Add(</span><span style="color:rgb(0,0,255);line-height:1.5;">new</span> Employee { Id = <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">2</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>, Name = <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">xpy0928</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>, Email = <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">a@gmail.com</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;"> });
            li.Add(</span><span style="color:rgb(0,0,255);line-height:1.5;">new</span> Employee { Id = <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">3</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>, Name = <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">tom</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>, Email = <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">b@mail.com</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;"> });
            li.Add(</span><span style="color:rgb(0,0,255);line-height:1.5;">new</span> Employee { Id = <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">4</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>, Name = <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">jim</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>, Email = <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">c@mail.com</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;"> });
            li.Add(</span><span style="color:rgb(0,0,255);line-height:1.5;">new</span> Employee { Id = <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">5</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>, Name = <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">tony</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>, Email = <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">d@mail.com</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;"> });

            sw.Stop();

            dict.Add(</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">Details</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">, li);
            dict.Add(</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">Time</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">, sw.Elapsed.Milliseconds);

            </span><span style="color:rgb(0,0,255);line-height:1.5;">return</span><span style="line-height:1.5;"> Ok(dict);

        }</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(45,161,45);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">结果如下：</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><img src="https://images2015.cnblogs.com/blog/589642/201610/589642-20161031183552127-1907705365.png" alt="" style="border:0px;"></p> 
   <h2 style="color:rgb(255,255,255);line-height:1.5;font-size:21px;font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(111,168,51);">性能提升四：async/await（异步方法）</h2> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">当在大型项目中会出现并发现象，常见的情况例如注册，此时有若干个用户同时在注册时，则会导致当前请求阻塞并且页面一直无响应最终导致服务器崩溃，为了解决这样的问题我们需要用到异步方法，让多个请求过来时，线程池分配足够的线程来处理多个请求，提高线程池的利用率 ！如下：</p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre>         <span style="color:rgb(0,0,255);line-height:1.5;">public</span> <span style="color:rgb(0,0,255);line-height:1.5;">async</span> Task&lt;IHttpActionResult&gt;<span style="line-height:1.5;"> Register(Employee model)
         {
            </span><span style="color:rgb(0,0,255);line-height:1.5;">var</span> result = <span style="color:rgb(0,0,255);line-height:1.5;">await</span><span style="line-height:1.5;"> UserManager.CreateAsync(model);
            </span><span style="color:rgb(0,0,255);line-height:1.5;">return</span><span style="line-height:1.5;"> Ok(result);
         }</span></pre>
   </div> 
   <h2 style="color:rgb(255,255,255);line-height:1.5;font-size:21px;font-family:'微软雅黑', '宋体', '黑体', Arial;background:rgb(111,168,51);">总结&nbsp;</h2> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;">本节我们从以上几方面讲述了在大小项目中如何尽可能最大限度来提高WebAPi的性能，使数据响应更加迅速，或许还有其他更好的解决方案，至少以上所述也可以作为一种参考，WebAPi一个很轻量的框架，你值得拥有，see u。</p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><br></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><br></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><br></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><br></p> 
   <p style="color:rgb(17,17,17);font-family:'Helvetica Neue', Arial;font-size:13px;line-height:23.4px;"><br></p> 
   <p><font color="#111111"><span style="font-size:13px;line-height:23.4px;">本文转自Jeffcky博客园博客，原文链接：http://www.cnblogs.com/CreateMyself/p/5994804.html，如需转载请自行联系原作者</span></font><br></p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
