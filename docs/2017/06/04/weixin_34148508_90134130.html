<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Oracle SQL性能优化技巧大总结 « NotBeCN</title>
  <meta name="description" content="                  （1）选择最有效率的表名顺序(只在基于规则的优化器中有效)：     ORACLE的解析器按照从右到左的顺序处理FROM子句中的表名，FROM子句中写在最后的表(基础表&nbsp;driving table)将被最先处理，在FROM子句中包含多个表的情况下,你必须选择记录条数最...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/06/04/weixin_34148508_90134130.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">Oracle SQL性能优化技巧大总结</h1>
    <p class="post-meta">Jun 4, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <div class="blogpost-body" style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13px;"> 
    <p style="line-height:1.5;"><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">（</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">1</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">）</span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">选择最有效率的表名顺序</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">(</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">只在基于规则的优化器中有效</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">)</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">：</span></p> 
    <p style="line-height:1.5;"><span style="line-height:1.5;"><a href="http://www.qqread.com/oracle/tech/index.html" rel="nofollow" style="color:rgb(7,93,179);"><span style="line-height:1.5;font-size:9.5pt;color:#0000FF;font-family:'ˎ̥', serif;">ORACLE</span></a></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">的解析器按照从右到左的顺序处理</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">FROM</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">子句中的表名，</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">FROM</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">子句中写在最后的表</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">(</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">基础表</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;driving table)</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">将被最先处理，在</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">FROM</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">子句中包含多个表的情况下</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">你必须选择记录条数最少的表作为基础表。如果有</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">3</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">个以上的表连接查询</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">那就需要选择交叉表</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">(intersection table)</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">作为基础表</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">交叉表是指那个被其他表所引用的表</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;<br> &nbsp;&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">（</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">2</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">）</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;WHERE</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">子句中的连接顺序．：</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;<br> &nbsp;&nbsp;&nbsp; ORACLE</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">采用自下而上的顺序解析</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">WHERE</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">子句</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">根据这个原理</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">表之间的连接必须写在其他</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">WHERE</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">条件之前</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">那些可以过滤掉最大数量记录的条件必须写在</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">WHERE</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">子句的末尾</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;<br> &nbsp;&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">（</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">3</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">）</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;SELECT</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">子句中避免使用</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;‘ * ‘</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">：</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;<br> &nbsp;&nbsp;&nbsp; ORACLE</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">在解析的过程中</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">会将</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">'*'&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">依次转换成所有的列名</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">这个工作是通过查询数据字典完成的</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">这意味着将耗费更多的时间</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;<br> &nbsp;&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">（</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">4</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">）</span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">减少访问</span><span style="line-height:1.5;"><a href="http://www.qqread.com/database/" rel="nofollow" style="color:rgb(7,93,179);"><span style="line-height:1.5;font-size:9.5pt;color:#0000FF;font-family:'宋体';"><span style="line-height:1.5;">数据库</span></span></a></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">的次数：</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;<br> &nbsp;&nbsp;&nbsp; ORACLE</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">在内部执行了许多工作</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">:&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">解析</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">SQL</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">语句</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">估算索引的利用率</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">绑定变量</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;,&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">读数据块等；</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;<br> &nbsp;&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">（</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">5</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">）</span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">在</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">SQL*Plus , SQL*Forms</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">和</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">Pro*C</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">中重新设置</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">ARRAYSIZE</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">参数</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">可以增加每次数据库访问的检索数据量</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;,</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">建议值为</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">200&nbsp;<br> &nbsp;&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">（</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">6</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">）</span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">使用</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">DECODE</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">函数来减少处理时间：</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">使用</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">DECODE</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">函数可以避免重复扫描相同记录或重复连接相同的表</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;<br> &nbsp;&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">（</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">7</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">）</span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">整合简单</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">无关联的数据库访问：</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">如果你有几个简单的数据库查询语句</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">你可以把它们整合到一个查询中</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">(</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">即使它们之间没有关系</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">)&nbsp;<br> &nbsp;&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">（</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">8</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">）</span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">删除重复记录：</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">最高效的删除重复记录方法</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;(&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">因为使用了</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">ROWID)</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">例子：</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;<br> DELETE FROM EMP E WHERE E.ROWID &gt; (SELECT MIN(X.ROWID)&nbsp;<br> FROM EMP X WHERE X.EMP_NO = E.EMP_NO);&nbsp;<br> &nbsp;&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">（</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">9</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">）</span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">用</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">TRUNCATE</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">替代</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">DELETE</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">：</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">当删除表中的记录时</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">在通常情况下</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">回滚段</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">(rollback segments )&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">用来存放可以被恢复的信息</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">如果你没有</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">COMMIT</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">事务</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,ORACLE</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">会将</span><span style="line-height:1.5;"><a href="http://www.qqread.com/z/hardware/yp/g.html" rel="nofollow" style="color:rgb(7,93,179);"><span style="line-height:1.5;font-size:9.5pt;color:#0000FF;font-family:'宋体';"><span style="line-height:1.5;">数据恢复</span></span></a></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">到删除之前的状态</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">(</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">准确地说是恢复到执行删除命令之前的状况</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">)&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">而当运用</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">TRUNCATE</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">时</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">回滚段不再存放任何可被恢复的信息</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">当命令运行后</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">数据不能被恢复</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">因此很少的资源被调用</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">执行时间也会很短</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">. (</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">译者按</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">: TRUNCATE</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">只在删除全表适用</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,TRUNCATE</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">是</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">DDL</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">不是</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">DML)&nbsp;<br> &nbsp;&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">（</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">10</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">）</span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">尽量多使用</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">COMMIT</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">：</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">只要有可能</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">在程序中尽量多使用</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">COMMIT,&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">这样程序的性能得到提高</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">需求也会因为</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">COMMIT</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">所释放的资源而减少</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">:&nbsp;<br> COMMIT</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">所释放的资源</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">:&nbsp;<br> a.&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">回滚段上用于恢复数据的信息</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;<br> b.&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">被程序语句获得的锁</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;<br> c. redo log buffer&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">中的空间</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;<br> d. ORACLE</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">为管理上述</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">3</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">种资源中的内部花费</span></p> 
    <p align="left" style="line-height:22.1px;background:rgb(249,252,254);"><span style="line-height:21.5333px;font-size:9.5pt;font-family:'宋体';">（<span style="line-height:1.5;">11</span>）用<span style="line-height:1.5;">Where</span>子句替换<span style="line-height:1.5;">HAVING</span>子句：</span></p> 
    <table class="MsoNormalTable" border="0" style="border:1px solid #C0C0C0;border-collapse:collapse;width:23.2px;">
     <tbody>
      <tr>
       <td style="border:rgb(212,208,200);border-collapse:collapse;background:rgb(239,245,255);"> <p align="left" style="line-height:1.5;"><span style="line-height:1.5;font-size:8pt;font-family:'宋体';">。</span></p> </td>
      </tr>
      <tr>
       <td style="border:rgb(212,208,200);border-collapse:collapse;background:rgb(239,245,255);">&nbsp;</td> 
       <td style="border:1pt solid rgb(203,223,255);border-collapse:collapse;background:rgb(239,245,255);">&nbsp;</td> 
       <td style="border:rgb(212,208,200);border-collapse:collapse;background:rgb(239,245,255);">&nbsp;</td> 
      </tr>
     </tbody>
    </table>
    <p style="line-height:1.5;text-indent:19.5pt;"><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">避免使用<span style="line-height:1.5;">HAVING</span>子句<span style="line-height:1.5;">, HAVING&nbsp;</span>只会在检索出所有记录之后才对结果集进行过滤<span style="line-height:1.5;">.&nbsp;</span>这个处理需要排序<span style="line-height:1.5;">,</span>总计等操作<span style="line-height:1.5;">.&nbsp;</span>如果能通过<span style="line-height:1.5;">WHERE</span>子句限制记录的数目<span style="line-height:1.5;">,</span>那就能减少这方面的开销<span style="line-height:1.5;">. (</span>非</span><span style="line-height:1.5;"><a href="http://www.qqread.com/oracle/tech/index.html" rel="nofollow" style="color:rgb(7,93,179);"><span style="line-height:1.5;font-size:9.5pt;color:#0000FF;font-family:'ˎ̥', serif;">oracle</span></a></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">中<span style="line-height:1.5;">)on</span>、<span style="line-height:1.5;">where</span>、<span style="line-height:1.5;">having</span>这三个都可以加条件的子句中，<span style="line-height:1.5;">on</span>是最先执行，<span style="line-height:1.5;">where</span>次之，<span style="line-height:1.5;">having</span>最后，因为<span style="line-height:1.5;">on</span>是先把不符合条件的记录过滤后才进行统计，它就可以减少中间运算要处理的数据，按理说应该速度是最快的，<span style="line-height:1.5;">where</span>也应该比<span style="line-height:1.5;">having</span>快点的，因为它过滤数据后才进行<span style="line-height:1.5;">sum</span>，在两个表联接时才用<span style="line-height:1.5;">on</span>的，所以在一个表的时候，就剩下<span style="line-height:1.5;">where</span>跟<span style="line-height:1.5;">having</span>比较了。在这单表查询统计的情况下，如果要过滤的条件没有涉及到要计算字段，那它们的结果是一样的，只是<span style="line-height:1.5;">where</span>可以使用<span style="line-height:1.5;">rushmore</span>技术，而<span style="line-height:1.5;">having</span>就不能，在速度上后者要慢如果要涉及到计算的字段，就表示在没计算之前，这个字段的值是不确定的，根据上篇写的工作流程，<span style="line-height:1.5;">where</span>的作用时间是在计算之前就完成的，而<span style="line-height:1.5;">having</span>就是在计算后才起作用的，所以在这种情况下，两者的结果会不同。在多表联接查询时，<span style="line-height:1.5;">on</span>比<span style="line-height:1.5;">where</span>更早起作用。系统首先根据各个表之间的联接条件，把多个表合成一个临时表后，再由<span style="line-height:1.5;">where</span>进行过滤，然后再计算，计算完后再由<span style="line-height:1.5;">having</span>进行过滤。由此可见，要想过滤条件起到正确的作用，首先要明白这个条件应该在什么时候起作用，然后再决定放在那里<span style="line-height:1.5;">&nbsp;<br> &nbsp;&nbsp;</span>（<span style="line-height:1.5;">12</span>） 减少对表的查询：<span style="line-height:1.5;">&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;</span>在含有子查询的<span style="line-height:1.5;">SQL</span>语句中<span style="line-height:1.5;">,</span>要特别注意减少对表的查询<span style="line-height:1.5;">.</span>例子：<span style="line-height:1.5;">&nbsp;<br> SELECT TAB_NAME FROM TABLES WHERE (TAB_NAME,DB_VER) = ( SELECT&nbsp;<br> TAB_NAME,DB_VER FROM TAB_COLUMNS WHERE VERSION = 604)&nbsp;<br> &nbsp;&nbsp;</span>（<span style="line-height:1.5;">13</span>） 通过内部函数提高<span style="line-height:1.5;">SQL</span>效率<span style="line-height:1.5;">.</span>：<span style="line-height:1.5;">&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;</span>复杂的<span style="line-height:1.5;">SQL</span>往往牺牲了执行效率<span style="line-height:1.5;">.&nbsp;</span>能够掌握上面的运用函数解决问题的方法在实际工作中是非常有意义的<span style="line-height:1.5;">&nbsp;<br> &nbsp;&nbsp;</span>（<span style="line-height:1.5;">14</span>） 使用表的别名<span style="line-height:1.5;">(Alias)</span>：<span style="line-height:1.5;">&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;</span>当在<span style="line-height:1.5;">SQL</span>语句中连接多个表时<span style="line-height:1.5;">,&nbsp;</span>请使用表的别名并把别名前缀于每个<span style="line-height:1.5;">Column</span>上<span style="line-height:1.5;">.</span>这样一来<span style="line-height:1.5;">,</span>就可以减少解析的时间并减少那些由<span style="line-height:1.5;">Column</span>歧义引起的语法错误<span style="line-height:1.5;">.&nbsp;<br> &nbsp;&nbsp;</span>（<span style="line-height:1.5;">15</span>） 用<span style="line-height:1.5;">EXISTS</span>替代<span style="line-height:1.5;">IN</span>、用<span style="line-height:1.5;">NOT EXISTS</span>替代<span style="line-height:1.5;">NOT IN</span>：<span style="line-height:1.5;">&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;</span>在许多基于基础表的查询中<span style="line-height:1.5;">,</span>为了满足一个条件<span style="line-height:1.5;">,</span>往往需要对另一个表进行联接<span style="line-height:1.5;">.</span>在这种情况下<span style="line-height:1.5;">,&nbsp;</span>使用<span style="line-height:1.5;">EXISTS(</span>或<span style="line-height:1.5;">NOT EXISTS)</span>通常将提高查询的效率<span style="line-height:1.5;">.&nbsp;</span>在子查询中<span style="line-height:1.5;">,NOT IN</span>子句将执行一个内部的排序和合并<span style="line-height:1.5;">.&nbsp;</span>无论在哪种情况下<span style="line-height:1.5;">,NOT IN</span>都是最低效的<span style="line-height:1.5;">&nbsp;(</span>因为它对子查询中的表执行了一个全表遍历<span style="line-height:1.5;">).&nbsp;</span>为了避免使用<span style="line-height:1.5;">NOT IN ,</span>我们可以把它改写成外连接<span style="line-height:1.5;">(Outer Joins)</span>或<span style="line-height:1.5;">NOT EXISTS.&nbsp;<br></span>例子：<span style="line-height:1.5;">&nbsp;<br></span>（高效）<span style="line-height:1.5;">SELECT * FROM EMP (</span>基础表<span style="line-height:1.5;">) WHERE EMPNO &gt; 0 AND EXISTS (SELECT ‘X' FROM DEPT WHERE DEPT.DEPTNO = EMP.DEPTNO AND LOC = ‘MELB')&nbsp;<br> (</span>低效<span style="line-height:1.5;">)SELECT * FROM EMP (</span>基础表<span style="line-height:1.5;">) WHERE EMPNO &gt; 0 AND DEPTNO IN(SELECT DEPTNO FROM DEPT WHERE LOC = ‘MELB')&nbsp;<br> &nbsp;&nbsp;</span>（<span style="line-height:1.5;">16</span>） 识别<span style="line-height:1.5;">'</span>低效执行<span style="line-height:1.5;">'</span>的<span style="line-height:1.5;">SQL</span>语句：<span style="line-height:1.5;">&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;</span>虽然目前各种关于<span style="line-height:1.5;">SQL</span>优化的图形化工具层出不穷<span style="line-height:1.5;">,</span>但是写出自己的<span style="line-height:1.5;">SQL</span>工具来解决问题始终是一个最好的方法：<span style="line-height:1.5;">&nbsp;<br> SELECT EXECUTIONS , DISK_READS, BUFFER_GETS, ROUND((BUFFER_GETS-DISK_READS)/BUFFER_GETS,2) Hit_radio, ROUND(DISK_READS/EXECUTIONS,2) Reads_per_run,&nbsp;<br> SQL_TEXT FROM V$SQLAREA WHERE EXECUTIONS&gt;0 AND BUFFER_GETS &gt; 0 AND (BUFFER_GETS-DISK_READS)/BUFFER_GETS &lt; 0.8 ORDER BY 4 DESC;&nbsp;<br> &nbsp;&nbsp;</span>（<span style="line-height:1.5;">17</span>） 用索引提高效率：<span style="line-height:1.5;">&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;</span>索引是表的一个概念部分<span style="line-height:1.5;">,</span>用来提高检索数据的效率，<span style="line-height:1.5;">ORACLE</span>使用了一个复杂的自平衡<span style="line-height:1.5;">B-tree</span>结构<span style="line-height:1.5;">.&nbsp;</span>通常<span style="line-height:1.5;">,</span>通过索引查询数据比全表扫描要快<span style="line-height:1.5;">.&nbsp;</span>当<span style="line-height:1.5;">ORACLE</span>找出执行查询和<span style="line-height:1.5;">Update</span>语句的最佳路径时<span style="line-height:1.5;">, ORACLE</span>优化器将使用索引<span style="line-height:1.5;">.&nbsp;</span>同样在联结多个表时使用索引也可以提高效率<span style="line-height:1.5;">.&nbsp;</span>另一个使用索引的好处是<span style="line-height:1.5;">,</span>它提供了主键<span style="line-height:1.5;">(primary key)</span>的唯一性验证<span style="line-height:1.5;">.</span>。那些<span style="line-height:1.5;">LONG</span>或<span style="line-height:1.5;">LONG RAW</span>数据类型<span style="line-height:1.5;">,&nbsp;</span>你可以索引几乎所有的列<span style="line-height:1.5;">.&nbsp;</span>通常<span style="line-height:1.5;">,&nbsp;</span>在大型表中使用索引特别有效<span style="line-height:1.5;">.&nbsp;</span>当然<span style="line-height:1.5;">,</span>你也会发现<span style="line-height:1.5;">,&nbsp;</span>在扫描小表时<span style="line-height:1.5;">,</span>使用索引同样能提高效率<span style="line-height:1.5;">.&nbsp;</span>虽然使用索引能得到查询效率的提高<span style="line-height:1.5;">,</span>但是我们也必须注意到它的代价<span style="line-height:1.5;">.&nbsp;</span>索引需要空间来存储<span style="line-height:1.5;">,</span>也需要定期维护<span style="line-height:1.5;">,&nbsp;</span>每当有记录在表中增减或索引列被修改时<span style="line-height:1.5;">,&nbsp;</span>索引本身也会被修改<span style="line-height:1.5;">.&nbsp;</span>这意味着每条记录的<span style="line-height:1.5;">INSERT , DELETE , UPDATE</span>将为此多付出<span style="line-height:1.5;">4 , 5&nbsp;</span>次的磁盘<span style="line-height:1.5;">I/O .&nbsp;</span>因为索引需要额外的存储空间和处理<span style="line-height:1.5;">,</span>那些不必要的索引反而会使查询反应时间变慢<span style="line-height:1.5;">.</span>。定期的重构索引是有必要的<span style="line-height:1.5;">.</span>：<span style="line-height:1.5;">&nbsp;<br> ALTER INDEX &lt;INDEXNAME&gt; REBUILD &lt;TABLESPACENAME&gt;&nbsp;<br> &nbsp;&nbsp;</span>（<span style="line-height:1.5;">18</span>） 用<span style="line-height:1.5;">EXISTS</span>替换<span style="line-height:1.5;">DISTINCT</span>：<span style="line-height:1.5;">&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;</span>当提交一个包含一对多表信息<span style="line-height:1.5;">(</span>比如部门表和雇员表<span style="line-height:1.5;">)</span>的查询时<span style="line-height:1.5;">,</span>避免在<span style="line-height:1.5;">SELECT</span>子句中使用<span style="line-height:1.5;">DISTINCT.&nbsp;</span>一般可以考虑用<span style="line-height:1.5;">EXIST</span>替换<span style="line-height:1.5;">, EXISTS&nbsp;</span>使查询更为迅速<span style="line-height:1.5;">,</span>因为<span style="line-height:1.5;">RDBMS</span>核心模块将在子查询的条件一旦满足后<span style="line-height:1.5;">,</span>立刻返回结果<span style="line-height:1.5;">.&nbsp;</span>例子：<span style="line-height:1.5;"><br> (</span>低效<span style="line-height:1.5;">): SELECT DISTINCT DEPT_NO,DEPT_NAME FROM DEPT D , EMP E&nbsp;<br> WHERE D.DEPT_NO = E.DEPT_NO (</span>高效<span style="line-height:1.5;">): SELECT DEPT_NO,DEPT_NAME FROM DEPT D WHERE EXISTS ( SELECT ‘X' FROM EMP E WHERE E.DEPT_NO = D.DEPT_NO);&nbsp;<br> &nbsp;&nbsp;</span>（<span style="line-height:1.5;">19</span>）<span style="line-height:1.5;">&nbsp;sql</span>语句用大写的；因为<span style="line-height:1.5;">oracle</span>总是先解析<span style="line-height:1.5;">sql</span>语句，把小写的字母转换成大写的再执行<span style="line-height:1.5;">&nbsp;<br> &nbsp;&nbsp;</span>（<span style="line-height:1.5;">20</span>） 在</span><span style="line-height:1.5;"><a href="http://www.qqread.com/keywords/java.html" rel="nofollow" style="color:rgb(7,93,179);"><span style="line-height:1.5;font-size:9.5pt;color:#0000FF;font-family:'ˎ̥', serif;">java</span></a></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">代码中尽量少用连接符<span style="line-height:1.5;">“</span>＋<span style="line-height:1.5;">”</span>连接字符串！</span></p> 
    <p style="line-height:1.5;"><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">（</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">21</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">）</span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">避免在索引列上使用</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">NOT&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">通常，　</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">我们要避免在索引列上使用</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">NOT, NOT</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">会产生在和在索引列上使用函数相同的影响</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">当</span><span style="line-height:1.5;"><a href="http://www.qqread.com/oracle/tech/index.html" rel="nofollow" style="color:rgb(7,93,179);"><span style="line-height:1.5;font-size:9.5pt;color:#0000FF;font-family:'ˎ̥', serif;">ORACLE</span></a></span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">”</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">遇到</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">”NOT,</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">他就会停止使用索引转而执行全表扫描</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;<br><br> &nbsp;&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">（</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">22</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">）</span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">避免在索引列上使用计算．</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">WHERE</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">子句中，如果索引列是函数的一部分．优化器将不使用索引而使用全表扫描．</span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">举例</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">:&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">低效：</span></p> 
    <p style="line-height:1.5;"><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">SELECT&nbsp;</span></span><span style="line-height:1.5;font-family:'宋体';">…</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;FROM DEPT WHERE SAL * 12 &gt; 25000;&nbsp;</span></span><span style="line-height:1.5;font-family:'宋体';">高效</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">:</span></span></p> 
    <p style="line-height:1.5;"><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">SELECT … FROM DEPT WHERE SAL &gt; 25000/12;</span></span></p> 
    <p style="line-height:1.5;"><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">（</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">23</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">）</span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">用</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">&gt;=</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">替代</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">&gt;&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">高效</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">:&nbsp;<br> SELECT * FROM EMP WHERE DEPTNO &gt;=4&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">低效</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">:&nbsp;<br> SELECT * FROM EMP WHERE DEPTNO &gt;3&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">两者的区别在于</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">前者</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">DBMS</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">将直接跳到第一个</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">DEPT</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">等于</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">4</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">的记录而后者将首先定位到</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">DEPTNO=3</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">的记录并且向前扫描到第一个</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">DEPT</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">大于</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">3</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">的记录</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;<br><br> &nbsp;&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">（</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">24</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">）</span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">用</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">UNION</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">替换</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">OR (</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">适用于索引列</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">)&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">通常情况下</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">用</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">UNION</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">替换</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">WHERE</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">子句中的</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">OR</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">将会起到较好的效果</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">对索引列使用</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">OR</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">将造成全表扫描</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">注意</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">以上规则只针对多个索引列有效</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">如果有</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">column</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">没有被索引</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">查询效率可能会因为你没有选择</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">OR</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">而降低</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">在下面的例子中</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">, LOC_ID</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">和</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">REGION</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">上都建有索引</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">高效</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">: SELECT LOC_ID , LOC_DESC , REGION FROM LOCATION WHERE LOC_ID = 10 UNION SELECT LOC_ID , LOC_DESC , REGION FROM LOCATION WHERE REGION = “MELBOURNE”&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">低效</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">: SELECT LOC_ID , LOC_DESC , REGION FROM LOCATION WHERE LOC_ID = 10 OR REGION = “MELBOURNE”&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">如果你坚持要用</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">OR,&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">那就需要返回记录最少的索引列写在最前面</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;<br><br> &nbsp;&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">（</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">25</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">）</span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">用</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">IN</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">来替换</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">OR&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">这是一条简单易记的规则，但是实际的执行效果还须检验，在</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">ORACLE8i</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">下，两者的执行路径似乎是相同的．　</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;<br></span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">低效</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">: SELECT…. FROM LOCATION WHERE LOC_ID = 10 OR LOC_ID = 20 OR LOC_ID = 30&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">高效</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;SELECT… FROM LOCATION WHERE LOC_IN IN (10,20,30);&nbsp;<br><br> &nbsp;&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">（</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">26</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">）</span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">避免在索引列上使用</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">IS NULL</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">和</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">IS NOT NULL&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">避免在索引中使用任何可以为空的列，</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">ORACLE</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">将无法使用该索引．对于单列索引，如果列包含空值，索引中将不存在此记录</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">对于复合索引，如果每个列都为空，索引中同样不存在此记录</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">　如果至少有一个列不为空，则记录存在于索引中．举例</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">:&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">如果唯一性索引建立在表的</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">A</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">列和</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">B</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">列上</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">并且表中存在一条记录的</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">A,B</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">值为</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">(123,null) , ORACLE</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">将不接受下一条具有相同</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">A,B</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">值（</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">123,null</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">）的记录</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">(</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">插入</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">).&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">然而如果所有的索引列都为空，</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">ORACLE</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">将认为整个键值为空而空不等于空</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">因此你可以插入</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">1000&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">条具有相同键值的记录</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">当然它们都是空</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">!&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">因为空值不存在于索引列中</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">所以</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">WHERE</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">子句中对索引列进行空值比较将使</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">ORACLE</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">停用该索引</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;<br></span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">低效</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">: (</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">索引失效</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">) SELECT … FROM DEPARTMENT WHERE DEPT_CODE IS NOT NULL;&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">高效</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">: (</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">索引有效</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">) SELECT … FROM DEPARTMENT WHERE DEPT_CODE &gt;=0;&nbsp;<br><br> &nbsp;&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">（</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">27</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">）</span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">总是使用索引的第一个列：</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">如果索引是建立在多个列上</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">只有在它的第一个列</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">(leading column)</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">被</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">where</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">子句引用时</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">优化器才会选择使用该索引</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">这也是一条简单而重要的规则，当仅引用索引的第二个列时</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">优化器使用了全表扫描而忽略了索引</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;<br><br> &nbsp;&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">（</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">28</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">）</span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">用</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">UNION-ALL&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">替换</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">UNION (&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">如果有可能的话</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">)</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">：</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">当</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">SQL</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">语句需要</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">UNION</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">两个查询结果集合时</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">这两个结果集合会以</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">UNION-ALL</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">的方式被合并</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">然后在输出最终结果前进行排序</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">如果用</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">UNION ALL</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">替代</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">UNION,&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">这样排序就不是必要了</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">效率就会因此得到提高</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">需要注意的是，</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">UNION ALL&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">将重复输出两个结果集合中相同记录</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">因此各位还是要从业务需求分析使用</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">UNION ALL</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">的可行性</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">. UNION&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">将对结果集合排序</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">这个操作会使用到</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">SORT_AREA_SIZE</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">这块内存</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">对于这块内存的优化也是相当重要的</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">下面的</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">SQL</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">可以用来查询排序的消耗量</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;<br></span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">低效：</span></p> 
    <p style="line-height:1.5;"><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">SELECT ACCT_NUM, BALANCE_AMT FROM DEBIT_TRANSACTIONS WHERE TRAN_DATE = '31-DEC-95' UNION SELECT ACCT_NUM, BALANCE_AMT FROM DEBIT_TRANSACTIONS WHERE TRAN_DATE = '31-DEC-95'&nbsp;</span></span><span style="line-height:1.5;font-family:'宋体';">高效</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">: SELECT ACCT_NUM, BALANCE_AMT FROM DEBIT_TRANSACTIONS</span></span></p> 
    <p style="line-height:1.5;"><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">WHERE TRAN_DATE = '31-DEC-95' UNION ALL SELECT ACCT_NUM, BALANCE_AMT FROM DEBIT_TRANSACTIONS WHERE TRAN_DATE = '31-DEC-95'</span></span></p> 
    <p style="line-height:1.5;"><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">（</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">29</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">）</span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">用</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">WHERE</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">替代</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">ORDER BY</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">：</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;<br> ORDER BY&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">子句只在两种严格的条件下使用索引</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;<br> ORDER BY</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">中所有的列必须包含在相同的索引中并保持在索引中的排列顺序</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;<br> ORDER BY</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">中所有的列必须定义为非空</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;<br> WHERE</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">子句使用的索引和</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">ORDER BY</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">子句中所使用的索引不能并列</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;<br></span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">例如</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">:&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">表</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">DEPT</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">包含以下列</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">:&nbsp;<br> DEPT_CODE PK NOT NULL&nbsp;<br> DEPT_DESC NOT NULL&nbsp;<br> DEPT_TYPE NULL&nbsp;<br></span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">低效</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">: (</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">索引不被使用</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">) SELECT DEPT_CODE FROM DEPT ORDER BY DEPT_TYPE&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">高效</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">: (</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">使用索引</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">) SELECT DEPT_CODE FROM DEPT WHERE DEPT_TYPE &gt; 0&nbsp;<br><br> &nbsp;&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">（</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">30</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">）</span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">避免改变索引列的类型</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.:&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">当比较不同数据类型的数据时</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">, ORACLE</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">自动对列进行简单的类型转换</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;<br></span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">假设</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;EMPNO</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">是一个数值类型的索引列</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">. SELECT … FROM EMP WHERE EMPNO = ‘123'&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">实际上</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">经过</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">ORACLE</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">类型转换</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">语句转化为</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">: SELECT … FROM EMP WHERE EMPNO = TO_NUMBER(‘123')&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">幸运的是</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">类型转换没有发生在索引列上</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">索引的用途没有被改变</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">现在</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">假设</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">EMP_TYPE</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">是一个字符类型的索引列</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">. SELECT … FROM EMP WHERE EMP_TYPE = 123&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">这个语句被</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">ORACLE</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">转换为</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">: SELECT … FROM EMP WHERETO_NUMBER(EMP_TYPE)=123&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">因为内部发生的类型转换</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">这个索引将不会被用到</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">!&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">为了避免</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">ORACLE</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">对你的</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">SQL</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">进行隐式的类型转换</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">,&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">最好把类型转换用显式表现出来</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">注意当字符和数值比较时</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">, ORACLE</span></span><span style="line-height:1.5;font-size:9.5pt;font-family:'宋体';">会优先转换数值类型到字符类型</span><span style="line-height:1.5;font-size:9.5pt;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;</span></span></p> 
    <p style="line-height:1.5;"><span style="line-height:1.5;font-family:'宋体';">（</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">31</span></span><span style="line-height:1.5;font-family:'宋体';">）</span><span style="line-height:1.5;font-family:'宋体';">需要当心的</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">WHERE</span></span><span style="line-height:1.5;font-family:'宋体';">子句</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">:</span></span></p> 
    <p style="line-height:1.5;"><span style="line-height:1.5;"><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><span style="line-height:1.5;font-family:'宋体';">某些</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">SELECT&nbsp;</span></span><span style="line-height:1.5;font-family:'宋体';">语句中的</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">WHERE</span></span><span style="line-height:1.5;font-family:'宋体';">子句不使用索引</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;</span></span><span style="line-height:1.5;font-family:'宋体';">这里有一些例子</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;</span></span><span style="line-height:1.5;font-family:'宋体';">在下面的例子里</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">, (1)</span></span><span style="line-height:1.5;font-family:'宋体';">‘</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">!='&nbsp;</span></span><span style="line-height:1.5;font-family:'宋体';">将不使用索引</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;</span></span><span style="line-height:1.5;font-family:'宋体';">记住</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">,&nbsp;</span></span><span style="line-height:1.5;font-family:'宋体';">索引只能告诉你什么存在于表中</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">,&nbsp;</span></span><span style="line-height:1.5;font-family:'宋体';">而不能告诉你什么不存在于表中</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">. (2)&nbsp;</span></span><span style="line-height:1.5;font-family:'宋体';">‘</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">||'</span></span><span style="line-height:1.5;font-family:'宋体';">是字符连接函数</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;</span></span><span style="line-height:1.5;font-family:'宋体';">就象其他函数那样</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">,&nbsp;</span></span><span style="line-height:1.5;font-family:'宋体';">停用了索引</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">. (3)&nbsp;</span></span><span style="line-height:1.5;font-family:'宋体';">‘</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">+'</span></span><span style="line-height:1.5;font-family:'宋体';">是数学函数</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;</span></span><span style="line-height:1.5;font-family:'宋体';">就象其他数学函数那样</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">,&nbsp;</span></span><span style="line-height:1.5;font-family:'宋体';">停用了索引</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">. (4)</span></span><span style="line-height:1.5;font-family:'宋体';">相同的索引列不能互相比较</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">,</span></span><span style="line-height:1.5;font-family:'宋体';">这将会启用全表扫描</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">.</span></span></p> 
    <p style="line-height:1.5;"><span style="line-height:1.5;"><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;&nbsp;</span></span></span><span style="line-height:1.5;font-family:'宋体';">（</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">32</span></span><span style="line-height:1.5;font-family:'宋体';">）</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;a.&nbsp;</span></span><span style="line-height:1.5;font-family:'宋体';">如果检索数据量超过</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">30%</span></span><span style="line-height:1.5;font-family:'宋体';">的表中记录数</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">.</span></span><span style="line-height:1.5;font-family:'宋体';">使用索引将没有显著的效率提高</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">.</span></span></p> 
    <p style="line-height:1.5;"><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">b.&nbsp;</span></span><span style="line-height:1.5;font-family:'宋体';">在特定情况下</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">,&nbsp;</span></span><span style="line-height:1.5;font-family:'宋体';">使用索引也许会比全表扫描慢</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">,&nbsp;</span></span><span style="line-height:1.5;font-family:'宋体';">但这是同一个数量级上的区别</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;</span></span><span style="line-height:1.5;font-family:'宋体';">而通常情况下</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">,</span></span><span style="line-height:1.5;font-family:'宋体';">使用索引比全表扫描要块几倍乃至几千倍</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">!</span></span></p> 
    <p style="line-height:1.5;"><span style="line-height:1.5;"><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;&nbsp;</span></span></span><span style="line-height:1.5;font-family:'宋体';">（</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">33</span></span><span style="line-height:1.5;font-family:'宋体';">）</span><span style="line-height:1.5;font-family:'宋体';">避免使用耗费资源的操作</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">:</span></span></p> 
    <p style="line-height:1.5;"><span style="line-height:1.5;"><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><span style="line-height:1.5;font-family:'宋体';">带有</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">DISTINCT,UNION,MINUS,INTERSECT,ORDER BY</span></span><span style="line-height:1.5;font-family:'宋体';">的</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">SQL</span></span><span style="line-height:1.5;font-family:'宋体';">语句会启动</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">SQL</span></span><span style="line-height:1.5;font-family:'宋体';">引擎</span><span style="line-height:1.5;font-family:'宋体';">执行耗费资源的排序</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">(SORT)</span></span><span style="line-height:1.5;font-family:'宋体';">功能</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">. DISTINCT</span></span><span style="line-height:1.5;font-family:'宋体';">需要一次排序操作</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">,&nbsp;</span></span><span style="line-height:1.5;font-family:'宋体';">而其他的至少需要执行两次排序</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;</span></span><span style="line-height:1.5;font-family:'宋体';">通常</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">,&nbsp;</span></span><span style="line-height:1.5;font-family:'宋体';">带有</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">UNION, MINUS , INTERSECT</span></span><span style="line-height:1.5;font-family:'宋体';">的</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">SQL</span></span><span style="line-height:1.5;font-family:'宋体';">语句都可以用其他方式重写</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">.&nbsp;</span></span><span style="line-height:1.5;font-family:'宋体';">如果你的数据库的</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">SORT_AREA_SIZE</span></span><span style="line-height:1.5;font-family:'宋体';">调配得好</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">,&nbsp;</span></span><span style="line-height:1.5;font-family:'宋体';">使用</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">UNION , MINUS, INTERSECT</span></span><span style="line-height:1.5;font-family:'宋体';">也是可以考虑的</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">,&nbsp;</span></span><span style="line-height:1.5;font-family:'宋体';">毕竟它们的可读性很强</span></p> 
    <p style="line-height:1.5;"><span style="line-height:1.5;"><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;&nbsp;</span></span></span><span style="line-height:1.5;font-family:'宋体';">（</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">34</span></span><span style="line-height:1.5;font-family:'宋体';">）</span><span style="line-height:1.5;font-family:'宋体';">优化</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">GROUP BY:</span></span></p> 
    <p style="line-height:1.5;"><span style="line-height:1.5;"><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><span style="line-height:1.5;font-family:'宋体';">提高</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">GROUP BY&nbsp;</span></span><span style="line-height:1.5;font-family:'宋体';">语句的效率</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">,&nbsp;</span></span><span style="line-height:1.5;font-family:'宋体';">可以通过将不需要的记录在</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">GROUP BY&nbsp;</span></span><span style="line-height:1.5;font-family:'宋体';">之前过滤掉</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">.</span></span><span style="line-height:1.5;font-family:'宋体';">下面两个查询返回相同结果但第二个明显就快了许多</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">.</span></span></p> 
    <p style="line-height:1.5;"><span style="line-height:1.5;font-family:'宋体';">低效</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">:</span></span></p> 
    <p style="line-height:1.5;"><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;</span></span></p> 
    <p style="line-height:1.5;"><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">&nbsp;</span></span></p> 
    <p style="line-height:1.5;"><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">SELECT JOB , AVG(SAL)</span></span></p> 
    <p style="line-height:1.5;"><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">FROM EMP GROUP JOB HAVING JOB =&nbsp;</span></span><span style="line-height:1.5;font-family:'宋体';">‘</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">PRESIDENT' OR JOB =&nbsp;</span></span><span style="line-height:1.5;font-family:'宋体';">‘</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">MANAGER'&nbsp;</span></span><span style="line-height:1.5;font-family:'宋体';">高效</span><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">:</span></span></p> 
    <p style="line-height:1.5;"><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">SELECT JOB , AVG(SAL)</span></span></p> 
    <p style="line-height:1.5;"><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">FROM EMP</span></span></p> 
    <p style="line-height:1.5;"><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">WHERE JOB = ‘PRESIDENT'</span></span></p> 
    <p style="line-height:1.5;"><span style="line-height:1.5;"><span style="line-height:1.5;font-family:Calibri;">OR JOB = ‘MANAGER' GROUP JOB</span></span></p> 
    <p style="line-height:1.5;">&nbsp;</p> 
   </div> 
   <div class="clear" style="clear:both;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13px;"></div> 
   <div> 
    <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13px;">
     分类:&nbsp;
     <a href="http://www.cnblogs.com/happyday56/category/98595.html" rel="nofollow" style="color:rgb(170,122,83);">Oracle</a> 
    </div> 
    <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13px;">
     <br>
    </div> 
    <div> 
     <font><span style="font-size:13px;">本文转自快乐就好博客园博客，原文链接：http://www.cnblogs.com/happyday56/archive/2007/06/26/795876.html，如需转载请自行联系原作者</span></font>
     <br>
    </div> 
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
