<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>测试驱动开发(TDD) « NotBeCN</title>
  <meta name="description" content="                 测试驱动开发(TDD)是极限编程的重要特点，它以不断的测试推动代码的开发，既简化了代码，又保证了软件质量。本文从开发人员使用的角度，介绍了 TDD 优势、原理、过程、原则、测试技术、Tips 等方面。       &nbsp;    背景    一个高效的软件开发过程对软件开发人...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/08/31/weixin_33910434_90127986.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">测试驱动开发(TDD)</h1>
    <p class="post-meta">Aug 31, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <blockquote style="background-image:none;border:2px solid rgb(239,239,239);font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    测试驱动开发(TDD)是极限编程的重要特点，它以不断的测试推动代码的开发，既简化了代码，又保证了软件质量。本文从开发人员使用的角度，介绍了 TDD 优势、原理、过程、原则、测试技术、Tips 等方面。
   </blockquote> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>&nbsp;</strong></p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>背景</strong></p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">一个高效的软件开发过程对软件开发人员来说是至关重要的，决定着开发是痛苦的挣扎，还是不断进步的喜悦。国人对软件蓝领的不屑，对繁琐冗长的传统开发过程的不耐，使大多数开发人员无所适从。最近兴起的一些软件开发过程相关的技术，提供一些比较高效、实用的软件过程开发方法。其中比较基础、关键的一个技术就是测试驱动开发（Test-Driven Development）。虽然TDD光大于极限编程，但测试驱动开发完全可以单独应用。下面就从开发人员使用的角度进行介绍，使开发人员用最少的代价尽快理解、掌握、应用这种技术。下面分优势，原理，过程，原则，测试技术，Tips等方面进行讨论。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>&nbsp;</strong></p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>1.优势</strong></p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">TDD的基本思路就是通过测试来推动整个开发的进行。而测试驱动开发技术并不只是单纯的测试工作。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">需求向来就是软件开发过程中感觉最不好明确描述、易变的东西。这里说的需求不只是指用户的需求，还包括对代码的使用需求。很多开发人员最害怕的就是后期还要修改某个类或者函数的接口进行修改或者扩展，为什么会发生这样的事情就是因为这部分代码的使用需求没有很好的描述。测试驱动开发就是通过编写测试用例，先考虑代码的使用需求（包括功能、过程、接口等），而且这个描述是无二义的，可执行验证的。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">通过编写这部分代码的测试用例，对其功能的分解、使用过程、接口都进行了设计。而且这种从使用角度对代码的设计通常更符合后期开发的需求。可测试的要求，对代码的内聚性的提高和复用都非常有益。因此测试驱动开发也是一种代码设计的过程。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">开发人员通常对编写文档非常厌烦，但要使用、理解别人的代码时通常又希望能有文档进行指导。而测试驱动开发过程中产生的测试用例代码就是对代码的最好的解释。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">快乐工作的基础就是对自己有信心，对自己的工作成果有信心。当前很多开发人员却经常在担心：“代码是否正确？”“辛苦编写的代码还有没有严重bug？”“修改的新代码对其他部分有没有影响？”。这种担心甚至导致某些代码应该修改却不敢修改的地步。测试驱动开发提供的测试集就可以作为你信心的来源。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">当然测试驱动开发最重要的功能还在于保障代码的正确性，能够迅速发现、定位bug。而迅速发现、定位bug是很多开发人员的梦想。针对关键代码的测试集，以及不断完善的测试用例，为迅速发现、定位bug提供了条件。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">我的一段功能非常复杂的代码使用TDD开发完成，真实环境应用中只发现几个bug，而且很快被定位解决。您在应用后，也一定会为那种自信的开发过程，功能不断增加、完善的感觉，迅速发现、定位bug的能力所感染，喜欢这个技术的。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">那么是什么样的原理、方法提供上面说的这些好处哪？下面我们就看看TDD的原理。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>&nbsp;</strong></p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>2.原理</strong></p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">测试驱动开发的基本思想就是在开发功能代码之前，先编写测试代码。也就是说在明确要开发某个功能后，首先思考如何对这个功能进行测试，并完成测试代码的编写，然后编写相关的代码满足这些测试用例。然后循环进行添加其他功能，直到完全部功能的开发。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">我们这里把这个技术的应用领域从代码编写扩展到整个开发过程。应该对整个开发过程的各个阶段进行测试驱动，首先思考如何对这个阶段进行测试、验证、考核，并编写相关的测试文档，然后开始下一步工作，最后再验证相关的工作。下图是一个比较流行的测试模型：V测试模型。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><br><strong>【图V 测试模型】</strong><br><img width="400" src="http://www.ibm.com/developerworks/cn/linux/l-tdd/images/V.jpg" alt="【图 V测试模型】" height="281" style="border:0px;">&nbsp;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">在开发的各个阶段，包括需求分析、概要设计、详细设计、编码过程中都应该考虑相对应的测试工作，完成相关的测试用例的设计、测试方案、测试计划的编写。这里提到的开发阶段只是举例，根据实际的开发活动进行调整。相关的测试文档也不一定是非常详细复杂的文档，或者什么形式，但应该养成测试驱动的习惯。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">关于测试模型，还有X测试模型。这个测试模型，我认为，是对详细阶段和编码阶段进行建模，应该说更详细的描述了详细设计和编码阶段的开发行为。及针对某个功能进行对应的测试驱动开发。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><br><strong>【图x测试模型】</strong><br><img width="400" src="http://www.ibm.com/developerworks/cn/linux/l-tdd/images/X.jpg" alt="【图 X测试模型】" height="283" style="border:0px;"></p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">基本原理应该说非常简单，那么如何进行实际操作哪，下面对开发过程进行详细的介绍。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>3.过程</strong></p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">软件开发其他阶段的测试驱动开发，根据测试驱动开发的思想完成对应的测试文档即可。下面针对详细设计和编码阶段进行介绍。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">测试驱动开发的基本过程如下：</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">1） 明确当前要完成的功能。可以记录成一个 TODO 列表。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">2） 快速完成针对此功能的测试用例编写。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">3） 测试代码编译不通过。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">4） 编写对应的功能代码。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">5） 测试通过。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">6） 对代码进行重构，并保证测试通过。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">7） 循环完成所有功能的开发。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">为了保证整个测试过程比较快捷、方便，通常可以使用测试框架组织所有的测试用例。一个免费的、优秀的测试框架是 Xunit 系列，几乎所有的语言都有对应的测试框架。我曾经写过一篇文章介绍CppUnit的文章（&nbsp;<a href="http://www.ibm.com/developerworks/cn/linux/l-cppunit/index.html" rel="nofollow" style="color:rgb(255,51,102);text-decoration:none;">http://www.ibm.com/developerworks/cn/linux/l-cppunit/index.html</a>）。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">开发过程中，通常把测试代码和功能代码分开存放，这里提供一个简单的测试框架使用例子，您可以通过它了解测试框架的使用。下面是文件列表。</p> 
   <pre>project/项目主目录</pre> 
   <pre>project/test测试项目主目录</pre> 
   <pre>project/test/testSeq.cpp测试seq_t 的测试文件，对其他功能文件的测试文件复制后修改即可</pre> 
   <pre>project/test/testSeq.h</pre> 
   <pre>project/test/Makefile测试项目的 Makefile </pre> 
   <pre>project/test/main.cpp测试项目的主文件，不需要修改</pre> 
   <pre>project/main.cpp 项目的主文件</pre> 
   <pre>project/seq_t.h功能代码，被测试文件</pre> 
   <pre>project/Makefile 项目的 Makefile</pre> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">主要流程基本如此，但要让你的代码很容易的进行测试，全面又不繁琐的进行测试，还是有很多测试原则和技术需要考虑。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>&nbsp;</strong></p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>4.原则</strong></p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">测试隔离。不同代码的测试应该相互隔离。对一块代码的测试只考虑此代码的测试，不要考虑其实现细节（比如它使用了其他类的边界条件）。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">一顶帽子。开发人员开发过程中要做不同的工作，比如：编写测试代码、开发功能代码、对代码重构等。做不同的事，承担不同的角色。开发人员完成对应的工作时应该保持注意力集中在当前工作上，而不要过多的考虑其他方面的细节，保证头上只有一顶帽子。避免考虑无关细节过多，无谓地增加复杂度。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">测试列表。需要测试的功能点很多。应该在任何阶段想添加功能需求问题时，把相关功能点加到测试列表中，然后继续手头工作。然后不断的完成对应的测试用例、功能代码、重构。一是避免疏漏，也避免干扰当前进行的工作。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">测试驱动。这个比较核心。完成某个功能，某个类，首先编写测试代码，考虑其如何使用、如何测试。然后在对其进行设计、编码。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">先写断言。测试代码编写时，应该首先编写对功能代码的判断用的断言语句，然后编写相应的辅助语句。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">可测试性。功能代码设计、开发时应该具有较强的可测试性。其实遵循比较好的设计原则的代码都具备较好的测试性。比如比较高的内聚性，尽量依赖于接口等。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">及时重构。无论是功能代码还是测试代码，对结构不合理，重复的代码等情况，在测试通过后，及时进行重构。关于重构，我会另撰文详细分析。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">小步前进。软件开发是个复杂性非常高的工作，开发过程中要考虑很多东西，包括代码的正确性、可扩展性、性能等等，很多问题都是因为复杂性太大导致的。极限编程提出了一个非常好的思路就是小步前进。把所有的规模大、复杂性高的工作，分解成小的任务来完成。对于一个类来说，一个功能一个功能的完成，如果太困难就再分解。每个功能的完成就走测试代码－功能代码－测试－重构的循环。通过分解降低整个系统开发的复杂性。这样的效果非常明显。几个小的功能代码完成后，大的功能代码几乎是不用调试就可以通过。一个个类方法的实现，很快就看到整个类很快就完成啦。本来感觉很多特性需要增加，很快就会看到没有几个啦。你甚至会为这个速度感到震惊。（我理解，是大幅度减少调试、出错的时间产生的这种速度感）</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>&nbsp;</strong></p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>5.测试技术</strong></p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>5.1测试范围、粒度</strong></p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">对哪些功能进行测试？会不会太繁琐？什么时候可以停止测试？这些问题比较常见。按大师 Kent Benk 的话，对那些你认为应该测试的代码进行测试。就是说，要相信自己的感觉，自己的经验。那些重要的功能、核心的代码就应该重点测试。感到疲劳就应该停下来休息一下。感觉没有必要更详细的测试，就停止本轮测试。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">测试驱动开发强调测试并不应该是负担，而应该是帮助我们减轻工作量的方法。而对于何时停止编写测试用例，也是应该根据你的经验，功能复杂、核心功能的代码就应该编写更全面、细致的测试用例，否则测试流程即可。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">测试范围没有静态的标准，同时也应该可以随着时间改变。对于开始没有编写足够的测试的功能代码，随着bug的出现，根据bug补齐相关的测试用例即可。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">小步前进的原则，要求我们对大的功能块测试时，应该先分拆成更小的功能块进行测试，比如一个类A使用了类B、C，就应该编写到A使用B、C功能的测试代码前，完成对B、C的测试和开发。那么是不是每个小类或者小函数都应该测试哪？我认为没有必要。你应该运用你的经验，对那些可能出问题的地方重点测试，感觉不可能出问题的地方就等它真正出问题的时候再补测试吧。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">5.2怎么写测试用例</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">测试用例的编写就用上了传统的测试技术。</p> 
   <ul style="margin-left:30px;font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">
    <li style="list-style-type:disc;">操作过程尽量模拟正常使用的过程。</li> 
    <li style="list-style-type:disc;">全面的测试用例应该尽量做到分支覆盖，核心代码尽量做到路径覆盖。</li> 
    <li style="list-style-type:disc;">测试数据尽量包括：真实数据、边界数据。</li> 
    <li style="list-style-type:disc;">测试语句和测试数据应该尽量简单，容易理解。</li> 
    <li style="list-style-type:disc;">为了避免对其他代码过多的依赖，可以实现简单的桩函数或桩类（Mock Object）。</li> 
    <li style="list-style-type:disc;">如果内部状态非常复杂或者应该判断流程而不是状态，可以通过记录日志字符串的方式进</li> 
   </ul>
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>&nbsp;</strong></p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><strong>6.TIPS</strong></p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">很多朋友有疑问，“测试代码的正确性如何保障？是写测试代码还是写测试文档？”这样是不是会陷入“鸡生蛋，蛋生鸡”的循环。其实是不会的。通常测试代码通常是非常简单的，通常围绕着某个情况的正确性判断的几个语句，如果太复杂，就应该继续分解啦。而传统的开发过程通常强调测试文档。但随着开发节奏的加快，用户需求的不断变化，维护高层（需求、概要设计）的测试文档可以，更低层的测试文档的成本的确太大了。而且可实时验证功能正确性的测试代码就是对代码最好的文档。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">软件开发过程中，除了遵守上面提到的测试驱动开发的几个原则外，一个需要注意的问题就是，谨防过度设计。编写功能代码时应该关注于完成当前功能点，通过测试，使用最简单、直接的方式来编码。过多的考虑后期的扩展，其他功能的添加，无疑增加了过多的复杂性，容易产生问题。应该等到要添加这些特性时在进行详细的测试驱动开发。到时候，有整套测试用例做基础，通过不断重构很容易添加相关特性。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">//以上摘自&nbsp;<a href="http://www.ibm.com/developerworks/cn/linux/l-tdd/index.html" rel="nofollow" style="color:rgb(255,51,102);text-decoration:none;">http://www.ibm.com/developerworks/cn/linux/l-tdd/index.html</a></p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">作为一个有理想、有追求的程序员，你成天被各种名词包围着，你对其中一个叫做敏捷的东西特别感兴趣，因为它特别强调人的作用，这听着都让做程序员的你感到舒服。为了让自己早日敏捷起来，你从众多的敏捷实践中选择了一个叫做测试驱动开发（Test Driven Development，TDD）的作为你的起始点。因为它对你周遭的环境要求是最低的：它不像结对那样，要求其他人和你一起合作；也不像采用Story那样改变你所在团队的做事方式……你所需要做的，只是在你编写业务代码之前，把测试先写好。这完全是一种润物细无声的做法，根本无需告诉你之外的任何人。就在别人忙碌的找bug时，你便开始享受敏捷带给你的快乐了。顺便带来的好处是，下次在那里和别人争论敏捷的时候，你可以以一个实践者的姿态出现，而不是在那里信口开河。<br><br> 你不会打无准备之仗，于是，你通读了Kent Beck的那本薄册子。通读之下，你对TDD更是充满了信心。因为“红——绿——重构”的步骤实在是简单得令人发指。好吧！总而言之，你已经信心十足的准备开始TDD，步入敏捷的康庄大道了。<br><br> 理想很美好，现实很残酷。<br><br> 当你着手在实际项目中体验TDD的时候，一切变得并不像最初看起来的那样美好。虽然你努力的坚持着TDD的原则，但你经常就会发现某些东西不好测，比如你遇到了数据库，比如你遇到了GUI，比如你遇到了计时器（Timer）。敏捷并非教条，当某些事不可为的时候，你完全可以不那么坚持。于是，你告诉自己，不好测的东西可以不测，这样，至少从心理上来说，你觉得舒服多了。随着工作的继续，你发现，你不能测的东西越来越多，单元测试的覆盖率随着开发的进行正在逐渐降低，一丝恐惧涌上心头。回过头来，再去看Kent Beck的书，你突然觉得，你似乎被骗了，因为Kent Beck的例子貌似全都是逻辑，如果只是逻辑，当然好测了，但现实从来就不是这样。<br><br> 难道TDD只是看上去很美？<br><br> 显然，你不愿意就这样放弃，放弃你苦心学来的软件开发秘籍，那些传说中的高手极力推崇的TDD必然有一定道理，TDD确实能够让你感觉很好：能测试的那部分代码确实极大的增强了你对软件质量的信心，而且出错了也确实好找，每次修改代码之后运行测试出现的绿条也确实让你身心愉悦。<br><br> 那问题到底出在哪呢？你陷入了沉思。<br><br> 信马由缰，你翻开了自己写过的代码。看着自己写的这些代码，你忽然意识到一个问题，自己遇到的问题并不属于TDD，而是属于单元测试。正如你之前所想到的那样，TDD做法本身的结果是让你感到快乐的。对，一定是单元测试本身出了问题。那单元测试出了什么问题，很显然，一大堆不能测试的部分让单元测试变得很难写，降低了单元测试的覆盖度。那是不是这会是一个无解的问题呢？你显然不愿意就此放弃，所以，顺着这个思路继续向前。<br><br> TDD之所以让你安心，主要是每次编写代码之后，运行测试会出现一个绿条，告诉你测试通过。这样，你可以放心大胆的向前继续，因为你的代码并没有破坏任何东西。究竟是什么让你感到不安，显然是那些测试没有覆盖到的代码。你又仔细翻看了一下那些没有测试覆盖的代码，你的思路一下子清晰起来。之所以这部分让你不安，因为里面除了那些确实不好测试的部分之外，里面还有一些逻辑。如果只是那些真正不好测试的部分没有被测试覆盖到，你会觉得心里还有一些安慰。你确定了，真正使你不安的就是与不好测试的代码共存亡的这些逻辑部分。<br><br> 如果测试可以覆盖到这些逻辑的部分，至少从感情上来说，就可以接受了。那怎么才能让这些部分被测试覆盖到呢？你仔细观察着那些没有测试的代码，如果这样做，这个部分就可以测试了，如果那样做，那个部分也可以测试了，一来二去，这些貌似不可测试的代码可以分解出许多可以测试的部分。<br><br> 你的心情一下子好了许多，因为这么做终于可以让测试的覆盖度达到让你心理上可以接受的范围。不过，新的问题也随之而来。我在做什么？拆来分去，这不就是设计吗？怎么走到这里来了。我不是在分析单元测试的问题吗？对了，我最初的问题是TDD，怎么一路跑到设计上来了？<br><br> TDD？设计？<br><br> 你突然发觉自己对TDD的理解有一些偏差。TDD，并不代表不需要设计。读过很多书的你突然想起了Robert Martin那本著名的《敏捷软件开发》，上面有一个关于数据库访问的例子。那个例子里面，前后两个版本的差异正好就是考虑设计的结果。通常，在设计中考虑测试，会很容易找到设计中僵硬的部分，让程序更加灵活。再进一步，如果在开始动手之前，稍微进行一些设计，这些问题还是可能注意得到的。你突然觉得，正是因为TDD本身过于强调测试的价值所在，让你忽略软件开发中很重要的部分：设计。<br><br> 思路一下子清楚起来，TDD其实不只是“红——绿——重构”，它还是与设计相关的：在动手之前，还是要有一定的设计，而且，在设计中要考虑测试的问题。终于解开了心中的困惑，现在的你，对于TDD有了一个新的认识，虽然这个认识不见得是什么终极真理，但至少是通过自己的思考得来的，这让你更加相信实践出真知的道理。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">理清思路后，你更加坚信TDD本身的价值所在，也坚定了在日后开发中继续使用TDD的念头，当然，目光远大的你已经盯上了其它的敏捷实践。</p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">//以上出处<a href="http://dreamhead.blogbus.com/logs/14189175.html" rel="nofollow" style="color:rgb(255,51,102);text-decoration:none;">http://dreamhead.blogbus.com/logs/14189175.html</a></p> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;">&nbsp;</p> 
   <p><font><span style="font-size:14px;">本文转自茄子_2008博客园博客，原文链接：http://www.cnblogs.com/xd502djj/archive/2010/07/22/1783042.html</span></font><span style="font-size:14px;font-family:verdana, Arial, Helvetica, sans-serif;">，如需转载请自行联系原作者。</span></p> 
   <div>
    <br>
   </div> 
   <p style="font-family:verdana, Arial, Helvetica, sans-serif;font-size:14px;"><br></p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
