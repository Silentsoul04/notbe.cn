<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>使用鼠标 « NotBeCN</title>
  <meta name="description" content="             C语言Windows程序设计 -&gt; 第十一天 -&gt; 使用鼠标    &nbsp;     鼠标的使用同样是通过获取Windows鼠标消息来获取用户当前的鼠标状态的。一、鼠标的介绍 &nbsp;&nbsp; &nbsp;鼠标是计算机的输入设备之一, 在图形化的操作系统上, 鼠标...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/08/09/weixin_34417183_90125279.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">使用鼠标</h1>
    <p class="post-meta">Aug 9, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <h1 style="font-size:28px;line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;text-align:center;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:15px;"><span style="line-height:1.5;font-size:18pt;">C语言Windows程序设计 -&gt; 第十一天 -&gt; 使用鼠标</span><br></span></h1> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">&nbsp;</span></p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;"><br> 鼠标的使用同样是通过获取Windows鼠标消息来获取用户当前的鼠标状态的。<br><br><span style="line-height:1.5;font-size:18pt;"><strong>一、鼠标的介绍</strong></span><br> &nbsp;&nbsp; &nbsp;鼠标是计算机的输入设备之一, 在图形化的操作系统上, 鼠标的使用使一些复杂的操作变得简单, 随着科技的进步, 鼠标的种类也越来越多, 按接口类型可分为串行鼠标、PS/2鼠标、总线鼠标、USB鼠标（多为光电鼠标）四种。按其工作原理及其内部结构的不同可以分为机械式，光机式和光电式。<br> &nbsp;&nbsp; &nbsp;<br> &nbsp;&nbsp; &nbsp;这里我们不讨论鼠标的硬件构造, 更多关于鼠标的硬件知识请自行查阅相关资料。<br> &nbsp;&nbsp; &nbsp;<br> &nbsp;&nbsp; &nbsp;<strong>1&gt;. 鼠标所在的位置</strong><br> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;在Windows系统下, 用户移动鼠标时, 在屏幕上一般会以一个斜式的箭头来表示鼠标当前的位置, 这个箭头实际上是一个位图格式的小图标, 称为"鼠标指针", 鼠标指针具有一个单像素精度的"热点"(hot spot), 当鼠标样式为箭头时, 这个"热点"就是鼠标箭头的顶点, 还有一些样式是"十"字样式, 这样的指针"热点"位于"十"字的中心位置, 热点在显示设备上指示了一个精确的位置。 当我们去捕获鼠标指针的位置时, 实际上是指鼠标指针的这个"热点"所在的像素单元的位置。<br> &nbsp;&nbsp; &nbsp;<br> &nbsp;&nbsp; &nbsp;<strong>2&gt;. 鼠标的术语</strong><br> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;①. 单击 : 按下鼠标按键, 然后松开;<br> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;②. 双击 : 连续快速的按下鼠标同一个按键然后松开;<br> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;③. 拖动 : 保持按键按下状态, 并移动鼠标。<br> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;现在我们常见的三键鼠标, 三个按键分布称为左键、中键和右键, 其中左键的标识符简写为LBUTTON, 中键的标识符为MBUTTON, 右键的标识符为RBUTTON。 双键鼠标只有左键和右键, 单键鼠标只有左键。<br> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br> &nbsp;&nbsp; &nbsp;<strong>3&gt;. 鼠标的样式</strong><br> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Windows系统为鼠标提供了几种默认的鼠标样式, 如: 箭头、沙漏、十字瞄准等, 在以前学习的过程中实际上我们已经接触了使用默认的鼠标样式, 回忆这行代码:<br></span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre>        wndclass.hCursor = LoadCursor( NULL, <span style="color:rgb(128,0,128);line-height:1.5;">IDC_ARROW</span> ) ;</pre>
   </div> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; 这样就是使用一个默认的斜式箭头作为鼠标的指针样式, 斜式箭头样式的标识符为&nbsp;<span style="line-height:1.5;color:rgb(128,0,128);"><strong>IDC_ARROW</strong></span>, 这些标识符定义在&nbsp;<span style="line-height:1.5;color:rgb(128,0,128);"><strong>WINUSER.H</strong></span>&nbsp;头文件中, 此外还有以下标识符及其对应的样式:<br></span></p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><img src="https://pic002.cnblogs.com/images/2012/453818/2012113009255944.png" alt="" style="border:0px;"></p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;"><br><br><span style="line-height:1.5;font-size:18pt;"><strong>二、使用鼠标的简单示例</strong></span><br> &nbsp;&nbsp; &nbsp;<strong>1&gt;. 示例一: 获取鼠标指针位置</strong><br> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;在这个示例中演示如何获取鼠标的位置, 先说下相关的消息标识符以及函数。<br> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;消息标识符: WM_MOUSEMOVE 当鼠标指针在客户区内移动或鼠标指针经过客户区窗口时会得到这个消息。<br> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;获取鼠标位置的函数: GetCursorPos 该函数的原型: BOOL GetCursorPos(LPPOINT lpPoint) ;<br> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;代码片段:<br></span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:0px;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,128,128);line-height:1.5;"> 1</span>     <span style="color:rgb(0,0,255);line-height:1.5;">switch</span><span style="line-height:1.5;">(message)
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 2</span> <span style="line-height:1.5;">    {
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 3</span>     <span style="color:rgb(0,0,255);line-height:1.5;">case</span> WM_PAINT:        <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">处理重绘消息</span>
<span style="color:rgb(0,128,128);line-height:1.5;"> 4</span>         hdc = BeginPaint( hwnd, &amp;<span style="line-height:1.5;">ps ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 5</span>         wsprintf( szBuffer,  <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">屏幕坐标:(%i, %i)</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">, pt.x, pt.y );
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 6</span>         TextOut( hdc, <span style="color:rgb(128,0,128);line-height:1.5;">10</span>, <span style="color:rgb(128,0,128);line-height:1.5;">10</span><span style="line-height:1.5;">, szBuffer, lstrlen(szBuffer) ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 7</span>         ScreenToClient( hwnd, &amp;pt ) ;        <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">将相对于屏幕的坐标转换为相对于窗口客户区的坐标</span>
<span style="color:rgb(0,128,128);line-height:1.5;"> 8</span>         wsprintf( szBuffer,  <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">客户区坐标:(%i, %i)</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">, pt.x, pt.y );
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 9</span>         TextOut( hdc, <span style="color:rgb(128,0,128);line-height:1.5;">10</span>, <span style="color:rgb(128,0,128);line-height:1.5;">30</span><span style="line-height:1.5;">, szBuffer, lstrlen(szBuffer) ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">10</span>         EndPaint( hwnd, &amp;<span style="line-height:1.5;">ps ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">11</span>         <span style="color:rgb(0,0,255);line-height:1.5;">return</span> <span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;"> ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">12</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">13</span>     <span style="color:rgb(0,0,255);line-height:1.5;">case</span> WM_MOUSEMOVE:        <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">处理鼠标移动时发来的消息</span>
<span style="color:rgb(0,128,128);line-height:1.5;">14</span>         GetCursorPos(&amp;<span style="line-height:1.5;">pt) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">15</span> <span style="line-height:1.5;">        InvalidateRect( hwnd, NULL, TRUE ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">16</span>         <span style="color:rgb(0,0,255);line-height:1.5;">return</span> <span style="color:rgb(128,0,128);line-height:1.5;">0</span> ;</pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:0px;"></a></span>
    </div> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">&nbsp;&nbsp;&nbsp; 完整的示例代码:<br></span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <img class="code_img_opened" src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" style="border:0px;vertical-align:middle;">
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.5;">View Code - GetCursorPosition</span> 
    <div class="cnblogs_code_hide"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:0px;"></a></span>
     </div> 
     <pre><span style="color:rgb(0,128,128);line-height:1.5;"> 1</span> #include&lt;windows.h&gt;
<span style="color:rgb(0,128,128);line-height:1.5;"> 2</span> 
<span style="color:rgb(0,128,128);line-height:1.5;"> 3</span> <span style="line-height:1.5;">LRESULT CALLBACK WndProc( HWND, UINT, WPARAM, LPARAM ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 4</span> 
<span style="color:rgb(0,128,128);line-height:1.5;"> 5</span> <span style="color:rgb(0,0,255);line-height:1.5;">int</span> WINAPI WinMain( HINSTANCE hInstance, HINSTANCE hPrevInstance, PSTR szCmdLine, <span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> iCmdShow )
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 6</span> <span style="line-height:1.5;">{
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 7</span>     <span style="color:rgb(0,0,255);line-height:1.5;">static</span> TCHAR szAppName[] = TEXT( <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">UseMouse_Demo</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;"> ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 8</span> <span style="line-height:1.5;">    HWND hwnd ;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 9</span> <span style="line-height:1.5;">    MSG msg ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">10</span> <span style="line-height:1.5;">    WNDCLASS wndclass ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">11</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">12</span>     wndclass.hInstance        =<span style="line-height:1.5;"> hInstance ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">13</span>     wndclass.lpfnWndProc    =<span style="line-height:1.5;"> WndProc ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">14</span>     wndclass.lpszClassName    =<span style="line-height:1.5;"> szAppName ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">15</span>     wndclass.style            = CS_HREDRAW | CS_VREDRAW |<span style="line-height:1.5;"> CS_DBLCLKS ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">16</span>     wndclass.hbrBackground    =<span style="line-height:1.5;"> (HBRUSH) GetStockObject( WHITE_BRUSH ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">17</span>     wndclass.hCursor        =<span style="line-height:1.5;"> LoadCursor( NULL, IDC_ARROW ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">18</span>     wndclass.hIcon            =<span style="line-height:1.5;"> LoadIcon( NULL, IDI_APPLICATION ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">19</span>     wndclass.cbClsExtra        = <span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;"> ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">20</span>     wndclass.cbWndExtra        = <span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;"> ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">21</span>     wndclass.lpszMenuName    = <span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;"> ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">22</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">23</span>     <span style="color:rgb(0,0,255);line-height:1.5;">if</span>( !RegisterClass(&amp;<span style="line-height:1.5;">wndclass) )
</span><span style="color:rgb(0,128,128);line-height:1.5;">24</span> <span style="line-height:1.5;">    {
</span><span style="color:rgb(0,128,128);line-height:1.5;">25</span>         MessageBox( NULL, TEXT(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">错误, 无法注册窗口类.</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>), TEXT(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">错误</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">), MB_OK ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">26</span>         <span style="color:rgb(0,0,255);line-height:1.5;">return</span> <span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;"> ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">27</span> <span style="line-height:1.5;">    }
</span><span style="color:rgb(0,128,128);line-height:1.5;">28</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">29</span>     hwnd = CreateWindow( szAppName, TEXT(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">获取鼠标指针位置 - Demo</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">),
</span><span style="color:rgb(0,128,128);line-height:1.5;">30</span> <span style="line-height:1.5;">        WS_OVERLAPPEDWINDOW, CW_USEDEFAULT, CW_USEDEFAULT,
</span><span style="color:rgb(0,128,128);line-height:1.5;">31</span> <span style="line-height:1.5;">        CW_USEDEFAULT, CW_USEDEFAULT,
</span><span style="color:rgb(0,128,128);line-height:1.5;">32</span> <span style="line-height:1.5;">        NULL, NULL, hInstance, NULL ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">33</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">34</span> <span style="line-height:1.5;">    ShowWindow( hwnd, iCmdShow ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">35</span> <span style="line-height:1.5;">    UpdateWindow( hwnd ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">36</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">37</span>     <span style="color:rgb(0,0,255);line-height:1.5;">while</span>( GetMessage(&amp;msg, NULL, <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, <span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;">) )
</span><span style="color:rgb(0,128,128);line-height:1.5;">38</span> <span style="line-height:1.5;">    {
</span><span style="color:rgb(0,128,128);line-height:1.5;">39</span>         TranslateMessage( &amp;<span style="line-height:1.5;">msg ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">40</span>         DispatchMessage( &amp;<span style="line-height:1.5;">msg ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">41</span> <span style="line-height:1.5;">    }
</span><span style="color:rgb(0,128,128);line-height:1.5;">42</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">43</span>     <span style="color:rgb(0,0,255);line-height:1.5;">return</span><span style="line-height:1.5;"> msg.wParam ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">44</span> <span style="line-height:1.5;">}
</span><span style="color:rgb(0,128,128);line-height:1.5;">45</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">46</span> <span style="line-height:1.5;">LRESULT CALLBACK WndProc( HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam )
</span><span style="color:rgb(0,128,128);line-height:1.5;">47</span> <span style="line-height:1.5;">{
</span><span style="color:rgb(0,128,128);line-height:1.5;">48</span> <span style="line-height:1.5;">    HDC hdc ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">49</span> <span style="line-height:1.5;">    PAINTSTRUCT ps ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">50</span>     <span style="color:rgb(0,0,255);line-height:1.5;">static</span><span style="line-height:1.5;"> POINT pt ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">51</span>     TCHAR szBuffer[<span style="color:rgb(128,0,128);line-height:1.5;">128</span><span style="line-height:1.5;">] ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">52</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">53</span>     <span style="color:rgb(0,0,255);line-height:1.5;">switch</span><span style="line-height:1.5;">(message)
</span><span style="color:rgb(0,128,128);line-height:1.5;">54</span> <span style="line-height:1.5;">    {
</span><span style="color:rgb(0,128,128);line-height:1.5;">55</span>     <span style="color:rgb(0,0,255);line-height:1.5;">case</span><span style="line-height:1.5;"> WM_PAINT:
</span><span style="color:rgb(0,128,128);line-height:1.5;">56</span>         hdc = BeginPaint( hwnd, &amp;<span style="line-height:1.5;">ps ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">57</span>         wsprintf( szBuffer,  <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">屏幕坐标:(%i, %i)</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">, pt.x, pt.y );
</span><span style="color:rgb(0,128,128);line-height:1.5;">58</span>         TextOut( hdc, <span style="color:rgb(128,0,128);line-height:1.5;">10</span>, <span style="color:rgb(128,0,128);line-height:1.5;">10</span><span style="line-height:1.5;">, szBuffer, lstrlen(szBuffer) ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">59</span>         ScreenToClient( hwnd, &amp;<span style="line-height:1.5;">pt ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">60</span>         wsprintf( szBuffer,  <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">客户区坐标:(%i, %i)</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">, pt.x, pt.y );
</span><span style="color:rgb(0,128,128);line-height:1.5;">61</span>         TextOut( hdc, <span style="color:rgb(128,0,128);line-height:1.5;">10</span>, <span style="color:rgb(128,0,128);line-height:1.5;">30</span><span style="line-height:1.5;">, szBuffer, lstrlen(szBuffer) ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">62</span>         EndPaint( hwnd, &amp;<span style="line-height:1.5;">ps ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">63</span>         <span style="color:rgb(0,0,255);line-height:1.5;">return</span> <span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;"> ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">64</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">65</span>     <span style="color:rgb(0,0,255);line-height:1.5;">case</span><span style="line-height:1.5;"> WM_MOUSEMOVE:
</span><span style="color:rgb(0,128,128);line-height:1.5;">66</span>         GetCursorPos(&amp;<span style="line-height:1.5;">pt) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">67</span> <span style="line-height:1.5;">        InvalidateRect( hwnd, NULL, TRUE ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">68</span>         <span style="color:rgb(0,0,255);line-height:1.5;">return</span> <span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;"> ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">69</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">70</span>     <span style="color:rgb(0,0,255);line-height:1.5;">case</span><span style="line-height:1.5;"> WM_DESTROY:
</span><span style="color:rgb(0,128,128);line-height:1.5;">71</span>         PostQuitMessage(<span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;">) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">72</span>         <span style="color:rgb(0,0,255);line-height:1.5;">return</span> <span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;"> ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">73</span> <span style="line-height:1.5;">    }
</span><span style="color:rgb(0,128,128);line-height:1.5;">74</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">75</span>     <span style="color:rgb(0,0,255);line-height:1.5;">return</span><span style="line-height:1.5;"> DefWindowProc( hwnd, message, wParam, lParam ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">76</span> }</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:0px;"></a></span>
     </div> 
    </div> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; 说一下整体的思路, 要即时跟踪获取鼠标在屏幕中的坐标, 首先要捕获鼠标的移动消息&nbsp;<span style="line-height:1.5;color:rgb(128,0,128);"><strong>WM_MOUSEMOVE</strong></span>, 当Windows向我们发来这个消息时就代码鼠标在进行移动, 随后我们对这个鼠标移动消息进行处理, 调用&nbsp;<span style="line-height:1.5;color:rgb(128,0,128);"><strong>GetCursorPos(&amp;pt) ;</strong></span>&nbsp;这个函数获取鼠标现在的位置, 获取到鼠标位置后为了能够立即在窗口中显示出来, 再调用<strong><span style="line-height:1.5;color:rgb(128,0,128);">InvalidateRect( hwnd, NULL, TRUE ) ;</span></strong>&nbsp;使整个客户区变成无效状态, 从而引发 WM_PAINT 需要重绘客户区内容的消息, 在处理重绘消息时输出刚刚获得的鼠标指针坐标位置。<br> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;关于&nbsp;<span style="line-height:1.5;color:rgb(128,0,128);"><strong>ScreenToClient( hwnd, &amp;pt ) ;</strong></span>&nbsp;:<br> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;这个函数的功能是将屏幕坐标(相对于整个屏幕左上角的坐标)转换成相对于窗口客户区的坐标, 屏幕坐标与窗口客户区坐标的含义如图所示:<br></span></p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><img src="https://pic002.cnblogs.com/images/2012/453818/2012113009295040.png" alt="" style="border:0px;"></p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;"><br> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; GetCursorPos获得的鼠标位置是屏幕坐标, 如果想知道他在窗口客户区内的相对位置就需要调用ScreenToClient函数将其转化为客户区坐标。<br> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;　　此外还有一个WIndows函数是将窗口客户区坐标转成屏幕坐标的, 函数为:&nbsp;<span style="line-height:1.5;color:rgb(128,0,128);"><strong>ClientToScreen( hwnd, &amp;pt ) ;</strong>&nbsp;</span><br> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;　　获取鼠标指针的位置还有其他的方法, 这里只是其中的一种。<br> &nbsp;&nbsp; &nbsp;<br> &nbsp;&nbsp; &nbsp;<br><strong>&nbsp;&nbsp; &nbsp;2&gt;. 示例二: 处理鼠标左键单击事件</strong><br> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;鼠标左键在客户区被单击时发来的消息:&nbsp;<span style="line-height:1.5;color:rgb(128,0,128);"><strong>WM_LBUTTONDOWN</strong></span><br></span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:0px;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,128,128);line-height:1.5;"> 1</span>     <span style="color:rgb(0,0,255);line-height:1.5;">switch</span><span style="line-height:1.5;">(message)
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 2</span> <span style="line-height:1.5;">    {
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 3</span>     <span style="color:rgb(0,0,255);line-height:1.5;">case</span><span style="line-height:1.5;"> WM_PAINT:
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 4</span>         hdc = BeginPaint( hwnd, &amp;<span style="line-height:1.5;">ps ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 5</span>         EndPaint( hwnd, &amp;<span style="line-height:1.5;">ps ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 6</span>         <span style="color:rgb(0,0,255);line-height:1.5;">return</span> <span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;"> ;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 7</span> 
<span style="color:rgb(0,128,128);line-height:1.5;"> 8</span>     <span style="color:rgb(0,0,255);line-height:1.5;">case</span> WM_LBUTTONDOWN:    <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">处理鼠标左键单击被按下时产生的消息</span>
<span style="color:rgb(0,128,128);line-height:1.5;"> 9</span>         x = LOWORD( lParam ) ;    <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">获取鼠标位置x坐标信息</span>
<span style="color:rgb(0,128,128);line-height:1.5;">10</span>         y = HIWORD( lParam ) ;    <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">获取鼠标位置y坐标信息</span>
<span style="color:rgb(0,128,128);line-height:1.5;">11</span>         wsprintf( szBuffer,  <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">鼠标左键被单击, 击中位置: (%i, %i)</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">, x, y );
</span><span style="color:rgb(0,128,128);line-height:1.5;">12</span>         MessageBox( hwnd, szBuffer, TEXT(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">鼠标动作</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">), MB_OK ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">13</span>         <span style="color:rgb(0,0,255);line-height:1.5;">return</span> <span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;"> ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">14</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">15</span>     <span style="color:rgb(0,0,255);line-height:1.5;">case</span><span style="line-height:1.5;"> WM_DESTROY:
</span><span style="color:rgb(0,128,128);line-height:1.5;">16</span>         PostQuitMessage(<span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;">) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">17</span>         <span style="color:rgb(0,0,255);line-height:1.5;">return</span> <span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;"> ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">18</span>     }</pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:0px;"></a></span>
    </div> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">&nbsp;&nbsp;&nbsp; 完整的示例代码:<br></span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <img class="code_img_opened" src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" style="border:0px;vertical-align:middle;">
    <span class="cnblogs_code_collapse" style="border-width:1px;border-style:solid;border-color:#808080;line-height:1.5;">View Code - WM_LBUTTONDOWN</span> 
    <div class="cnblogs_code_hide"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:0px;"></a></span>
     </div> 
     <pre><span style="color:rgb(0,128,128);line-height:1.5;"> 1</span> #include&lt;windows.h&gt;
<span style="color:rgb(0,128,128);line-height:1.5;"> 2</span> 
<span style="color:rgb(0,128,128);line-height:1.5;"> 3</span> <span style="line-height:1.5;">LRESULT CALLBACK WndProc( HWND, UINT, WPARAM, LPARAM ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 4</span> 
<span style="color:rgb(0,128,128);line-height:1.5;"> 5</span> <span style="color:rgb(0,0,255);line-height:1.5;">int</span> WINAPI WinMain( HINSTANCE hInstance, HINSTANCE hPrevInstance, PSTR szCmdLine, <span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> iCmdShow )
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 6</span> <span style="line-height:1.5;">{
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 7</span>     <span style="color:rgb(0,0,255);line-height:1.5;">static</span> TCHAR szAppName[] = TEXT( <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">UseMouse_Demo</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;"> ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 8</span> <span style="line-height:1.5;">    HWND hwnd ;
</span><span style="color:rgb(0,128,128);line-height:1.5;"> 9</span> <span style="line-height:1.5;">    MSG msg ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">10</span> <span style="line-height:1.5;">    WNDCLASS wndclass ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">11</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">12</span>     wndclass.hInstance        =<span style="line-height:1.5;"> hInstance ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">13</span>     wndclass.lpfnWndProc    =<span style="line-height:1.5;"> WndProc ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">14</span>     wndclass.lpszClassName    =<span style="line-height:1.5;"> szAppName ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">15</span>     wndclass.style            = CS_HREDRAW | CS_VREDRAW |<span style="line-height:1.5;"> CS_DBLCLKS ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">16</span>     wndclass.hbrBackground    =<span style="line-height:1.5;"> (HBRUSH) GetStockObject( WHITE_BRUSH ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">17</span>     wndclass.hCursor        =<span style="line-height:1.5;"> LoadCursor( NULL, IDC_ARROW ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">18</span>     wndclass.hIcon            =<span style="line-height:1.5;"> LoadIcon( NULL, IDI_APPLICATION ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">19</span>     wndclass.cbClsExtra        = <span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;"> ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">20</span>     wndclass.cbWndExtra        = <span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;"> ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">21</span>     wndclass.lpszMenuName    = <span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;"> ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">22</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">23</span>     <span style="color:rgb(0,0,255);line-height:1.5;">if</span>( !RegisterClass(&amp;<span style="line-height:1.5;">wndclass) )
</span><span style="color:rgb(0,128,128);line-height:1.5;">24</span> <span style="line-height:1.5;">    {
</span><span style="color:rgb(0,128,128);line-height:1.5;">25</span>         MessageBox( NULL, TEXT(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">错误, 无法注册窗口类.</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>), TEXT(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">错误</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">), MB_OK ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">26</span>         <span style="color:rgb(0,0,255);line-height:1.5;">return</span> <span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;"> ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">27</span> <span style="line-height:1.5;">    }
</span><span style="color:rgb(0,128,128);line-height:1.5;">28</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">29</span>     hwnd = CreateWindow( szAppName, TEXT(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">处理鼠标单击事件 - Demo</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">),
</span><span style="color:rgb(0,128,128);line-height:1.5;">30</span> <span style="line-height:1.5;">        WS_OVERLAPPEDWINDOW, CW_USEDEFAULT, CW_USEDEFAULT,
</span><span style="color:rgb(0,128,128);line-height:1.5;">31</span> <span style="line-height:1.5;">        CW_USEDEFAULT, CW_USEDEFAULT,
</span><span style="color:rgb(0,128,128);line-height:1.5;">32</span> <span style="line-height:1.5;">        NULL, NULL, hInstance, NULL ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">33</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">34</span> <span style="line-height:1.5;">    ShowWindow( hwnd, iCmdShow ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">35</span> <span style="line-height:1.5;">    UpdateWindow( hwnd ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">36</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">37</span>     <span style="color:rgb(0,0,255);line-height:1.5;">while</span>( GetMessage(&amp;msg, NULL, <span style="color:rgb(128,0,128);line-height:1.5;">0</span>, <span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;">) )
</span><span style="color:rgb(0,128,128);line-height:1.5;">38</span> <span style="line-height:1.5;">    {
</span><span style="color:rgb(0,128,128);line-height:1.5;">39</span>         TranslateMessage( &amp;<span style="line-height:1.5;">msg ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">40</span>         DispatchMessage( &amp;<span style="line-height:1.5;">msg ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">41</span> <span style="line-height:1.5;">    }
</span><span style="color:rgb(0,128,128);line-height:1.5;">42</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">43</span>     <span style="color:rgb(0,0,255);line-height:1.5;">return</span><span style="line-height:1.5;"> msg.wParam ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">44</span> <span style="line-height:1.5;">}
</span><span style="color:rgb(0,128,128);line-height:1.5;">45</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">46</span> <span style="line-height:1.5;">LRESULT CALLBACK WndProc( HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam )
</span><span style="color:rgb(0,128,128);line-height:1.5;">47</span> <span style="line-height:1.5;">{
</span><span style="color:rgb(0,128,128);line-height:1.5;">48</span> <span style="line-height:1.5;">    HDC hdc ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">49</span> <span style="line-height:1.5;">    PAINTSTRUCT ps ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">50</span>     <span style="color:rgb(0,0,255);line-height:1.5;">static</span><span style="line-height:1.5;"> POINT pt ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">51</span>     TCHAR szBuffer[<span style="color:rgb(128,0,128);line-height:1.5;">128</span><span style="line-height:1.5;">] ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">52</span>     <span style="color:rgb(0,0,255);line-height:1.5;">static</span> <span style="color:rgb(0,0,255);line-height:1.5;">int</span><span style="line-height:1.5;"> x, y ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">53</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">54</span>     <span style="color:rgb(0,0,255);line-height:1.5;">switch</span><span style="line-height:1.5;">(message)
</span><span style="color:rgb(0,128,128);line-height:1.5;">55</span> <span style="line-height:1.5;">    {
</span><span style="color:rgb(0,128,128);line-height:1.5;">56</span>     <span style="color:rgb(0,0,255);line-height:1.5;">case</span><span style="line-height:1.5;"> WM_PAINT:
</span><span style="color:rgb(0,128,128);line-height:1.5;">57</span>         hdc = BeginPaint( hwnd, &amp;<span style="line-height:1.5;">ps ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">58</span>         EndPaint( hwnd, &amp;<span style="line-height:1.5;">ps ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">59</span>         <span style="color:rgb(0,0,255);line-height:1.5;">return</span> <span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;"> ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">60</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">61</span>     <span style="color:rgb(0,0,255);line-height:1.5;">case</span><span style="line-height:1.5;"> WM_LBUTTONDOWN:
</span><span style="color:rgb(0,128,128);line-height:1.5;">62</span>         x =<span style="line-height:1.5;"> LOWORD( lParam ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">63</span>         y =<span style="line-height:1.5;"> HIWORD( lParam ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">64</span>         wsprintf( szBuffer,  <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">鼠标左键被单击, 击中位置: (%i, %i)</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">, x, y );
</span><span style="color:rgb(0,128,128);line-height:1.5;">65</span>         MessageBox( hwnd, szBuffer, TEXT(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">鼠标动作</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">), MB_OK ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">66</span>         <span style="color:rgb(0,0,255);line-height:1.5;">return</span> <span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;"> ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">67</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">68</span>     <span style="color:rgb(0,0,255);line-height:1.5;">case</span><span style="line-height:1.5;"> WM_DESTROY:
</span><span style="color:rgb(0,128,128);line-height:1.5;">69</span>         PostQuitMessage(<span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;">) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">70</span>         <span style="color:rgb(0,0,255);line-height:1.5;">return</span> <span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;"> ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">71</span> <span style="line-height:1.5;">    }
</span><span style="color:rgb(0,128,128);line-height:1.5;">72</span> 
<span style="color:rgb(0,128,128);line-height:1.5;">73</span>     <span style="color:rgb(0,0,255);line-height:1.5;">return</span><span style="line-height:1.5;"> DefWindowProc( hwnd, message, wParam, lParam ) ;
</span><span style="color:rgb(0,128,128);line-height:1.5;">74</span> }</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:0px;"></a></span>
     </div> 
    </div> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">&nbsp;&nbsp;&nbsp; 这个示例演示的是当鼠标在客户区按下时弹出一个对话框, 对话框的内容是鼠标被按下时鼠标指针的位置信息, 可以看到, 这里我们没有使用 GetCursorPos 函数来获取鼠标指针的位置, 而是通过<br></span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre>        x = LOWORD( lParam ) ;    <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">获取鼠标位置x坐标信息</span>
        y = HIWORD( lParam ) ;    <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">获取鼠标位置y坐标信息</span></pre>
   </div> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">&nbsp;&nbsp;&nbsp; 来获取的, 参数<span style="line-height:1.5;color:rgb(128,0,128);"><strong>lParam</strong></span>包含了鼠标指针的位置信息, 其中低位字节表示x坐标, 高位字节表示y坐标, 利用<span style="line-height:1.5;color:rgb(128,0,128);"><strong>LOWORD</strong></span>和<span style="line-height:1.5;color:rgb(128,0,128);"><strong>HIWORD</strong></span>宏可以取得这些坐标值, 这里获取的坐标指的是相对于窗口客户区的坐标。<br></span></p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">&nbsp;</span></p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;"><br><span style="line-height:1.5;font-size:18pt;"><strong>三、客户区鼠标消息</strong></span><br> &nbsp;&nbsp; &nbsp;与键盘消息不同, 在键盘消息中, Windows只把键盘消息发送到当前具有输入焦点的窗口, 而鼠标消息无论窗口是否获取焦点, 只要鼠标经过客户区, 或者在客户区内被单击窗口过程都会收到鼠标消息, 被点击(包括双击/单击/拖动)的窗口将变成活动窗口。与客户区消息相对应的称为非客户区消息, 非客户区消息是指鼠标指针在窗口内并在在客户区外的移动或单击/双击等, 非客户区包括窗口的标题栏、菜单栏、滚动条、窗口的边框, 这些将在后面进行讨论, 这里先说客户区鼠标消息。<br> &nbsp;&nbsp; &nbsp;<br> &nbsp;&nbsp;&nbsp;<strong>&nbsp;1&gt;. 鼠标单击</strong><br> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;鼠标在客户区单击时各个鼠标按键所产生的消息如下:<br></span></p> 
   <table border="2" style="border:1px solid #C0C0C0;border-collapse:collapse;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;width:412px;">
    <tbody>
     <tr>
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;text-align:center;"><strong><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">鼠标按键</span></strong></td> 
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;text-align:center;"><strong><span style="line-height:1.5;font-size:16px;"><span style="line-height:1.5;font-family:'courier new', courier;">按下</span>时产生的消息</span></strong></td> 
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;text-align:center;"><strong><span style="line-height:1.5;font-size:16px;"><span style="line-height:1.5;font-family:'courier new', courier;">释放</span>时产生的消息</span></strong></td> 
     </tr>
     <tr>
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;text-align:center;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">左键</span></td> 
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;text-align:center;"><span style="line-height:1.5;color:rgb(128,0,128);"><strong><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">WM_LBUTTONDOWN</span></strong></span></td> 
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;text-align:center;"><span style="line-height:1.5;color:rgb(128,0,128);"><strong><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">WM_LBUTTONUP</span></strong></span></td> 
     </tr>
     <tr>
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;text-align:center;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">中键</span></td> 
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;text-align:center;"><span style="line-height:1.5;color:rgb(128,0,128);"><strong><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">WM_MBUTTONDOWN</span></strong></span></td> 
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;text-align:center;"><span style="line-height:1.5;color:rgb(128,0,128);"><strong><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">WM_MBUTTONUP</span></strong></span></td> 
     </tr>
     <tr>
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;text-align:center;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">右键</span></td> 
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;text-align:center;"><span style="line-height:1.5;color:rgb(128,0,128);"><strong><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">WM_RBUTTONDOWN</span></strong></span></td> 
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;text-align:center;"><span style="line-height:1.5;color:rgb(128,0,128);"><strong><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">WM_RBUTTONUP</span></strong></span></td> 
     </tr>
    </tbody>
   </table>
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;"><br><br> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;</span></p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">&nbsp;</span></p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">&nbsp;</span></p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">　　　　示例2中已经演示了一个处理鼠标左键单击的示例, 对于中键和右键处理的方法是相同的, 只要等待Windows发来消息然后处理这些消息就行了。<br> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br> &nbsp;&nbsp; &nbsp;<strong>2&gt;. wParam参数中的内容</strong><br> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;参数wParam中的值表示了鼠标按钮、Shift键和Ctrl键的状态。 将wParam与"鼠标键"标识符进行按位与(<strong><span style="line-height:1.5;color:rgb(128,0,128);">&amp;</span></strong>)运算可以得到鼠标按键与鼠标键的状态, 以前缀<span style="line-height:1.5;color:rgb(128,0,128);"><strong>MK_</strong></span>为开头的标识符称为"鼠标键", 有如下鼠标键:<br></span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre>            <span style="color:rgb(0,0,255);line-height:1.5;">#define</span> MK_LBUTTON          0x0001            <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">按下左键</span>
            <span style="color:rgb(0,0,255);line-height:1.5;">#define</span> MK_RBUTTON          0x0002            <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">按下右键<br></span>            <span style="color:rgb(0,0,255);line-height:1.5;">#define</span> MK_MBUTTON          0x0010            <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">按下中键</span>
            <span style="color:rgb(0,0,255);line-height:1.5;">#define</span> MK_SHIFT            0x0004            <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">按下Shift键</span>
            <span style="color:rgb(0,0,255);line-height:1.5;">#define</span> MK_CONTROL          0x0008            <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">按下Ctrl键</span>
</pre>
   </div> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; 例如, 当接收到 WM_LBUTTONDOWN 消息时, 若<br></span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre>            wParam &amp; MK_SHIFT </pre>
   </div> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; 的值为TRUE(非零), 则表示按下左键的同时也按下了Shift键。<br> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;例如:<br></span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:0px;"></a></span>
    </div> 
    <pre>        <span style="color:rgb(0,0,255);line-height:1.5;">case</span><span style="line-height:1.5;"> WM_LBUTTONDOWN:
            </span><span style="color:rgb(0,0,255);line-height:1.5;">if</span>( wParam &amp;<span style="line-height:1.5;"> MK_CONTROL )
            {
                MessageBox( hwnd, TEXT(</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">Ctrl键与鼠标左键同时被按下!</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>), TEXT(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">鼠标动作</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">), MB_OK ) ;
                </span><span style="color:rgb(0,0,255);line-height:1.5;">return</span> <span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;"> ;
            }
            </span><span style="color:rgb(0,0,255);line-height:1.5;">return</span> <span style="color:rgb(128,0,128);line-height:1.5;">0</span> ;</pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:0px;"></a></span>
    </div> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; 只有当鼠标左键与键盘的Ctrl键同时被按下时我们弹出个对话框说明"Ctrl键与鼠标左键同时被按下!", 否则什么也不做。<br> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br><strong>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;3&gt;. 鼠标双击</strong><br> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;双击对两次击中的位置以及时间间隔都有一定要求, 只有当两次快速的单击在物理位置上靠的很近并且时间间隔很短的情况下才算双击。<br> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;如果想让窗口过程接收鼠标双击消息, 需要在注册窗口类(RegisterClass)时, 初始化wndclass中的<span style="line-height:1.5;color:rgb(128,0,128);"><strong>style成员</strong></span>的属性中再加上<span style="line-height:1.5;color:rgb(128,0,128);">CS_DBLCLKS</span>标识符:<br></span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre>                wndclass.style = CS_HREDRAW | CS_VREDRAW | CS_DBLCLKS ;</pre>
   </div> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; 如果在窗口类的style成员中没有包含 CS_DBLCLKS 标识符, 那么即使当用户双击时不会产生双击消息, 而是产生一串如下的消息:<br></span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre><span style="line-height:1.5;">                WM_LBUTTONDOWN
                WM_LBUTTONUP
               <span style="color:rgb(0,0,255);line-height:1.5;"> WM_LBUTTONDOWN</span>
                WM_LBUTTONUP</span></pre>
   </div> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; 由于用户在连续两次按下鼠标左键时需要一定时间, 即使这个时间比较短暂, 但是在这个过程中程序还是有可能收到其他消息的, 比如用户在快速的两次单击中手的微微抖动就会在其中插入一个WM_MOUSEMOVE的消息, 这里暂时忽略其中插入的消息, 假设消息就是连续的这些。<br> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;当窗口类的style成员只中包含<span style="line-height:1.5;color:rgb(128,0,128);"><strong>CS_DBLCLKS</strong></span>标识符后, 用户再次双击就会产生这样的一串消息:<br></span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre><span style="line-height:1.5;">                WM_LBUTTONDOWN
                WM_LBUTTONUP
                <span style="color:rgb(0,0,255);line-height:1.5;">WM_LBUTTONDBLCLK</span>
                WM_LBUTTONUP</span></pre>
   </div> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; 可以看到, 在加入&nbsp;<span style="line-height:1.5;color:rgb(128,0,128);"><strong>CS_DBLCLKS</strong></span>&nbsp;标识符后, 第三个消息&nbsp;<strong><span style="line-height:1.5;color:rgb(128,0,128);">WM_LBUTTONDOWN</span></strong>&nbsp;只是被简单的替换成了&nbsp;<span style="line-height:1.5;color:rgb(128,0,128);"><strong>WM_LBUTTONDBLCLK</strong></span>&nbsp;消息。<br> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;鼠标各个按键双击时第三个消息所对应替换的消息如下:<br></span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre>            <span style="color:rgb(0,0,255);line-height:1.5;">#define</span> WM_LBUTTONDBLCLK                0x0203            <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">左键</span>
            <span style="color:rgb(0,0,255);line-height:1.5;">#define</span> WM_MBUTTONDBLCLK                0x0209            <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">中键</span>
            <span style="color:rgb(0,0,255);line-height:1.5;">#define</span> WM_RBUTTONDBLCLK                0x0206            <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">右键</span></pre>
   </div> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;">&nbsp;</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;"><br><strong><span style="line-height:1.5;font-size:18pt;">四、非客户区鼠标消息</span></strong><br> &nbsp;&nbsp; &nbsp;非客户区消息几乎与客户区消息完全对应, 只是在标识符中多了一个"<span style="line-height:1.5;color:rgb(128,0,128);"><strong>NC</strong></span>"字符(noclient), 当鼠标指针在窗口的非客户区移动时(比如标题栏), 窗口过程就会接收到<span style="line-height:1.5;color:rgb(128,0,128);"><strong>WM_NCMOUSEMOVE</strong></span>&nbsp;消息, 在客户区外鼠标按下产生的消息如下:<br></span></p> 
   <table border="2" style="border:1px solid #C0C0C0;border-collapse:collapse;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;">
    <tbody>
     <tr>
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;text-align:center;"><strong><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">鼠标按键</span></strong></td> 
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;text-align:center;"><strong><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">按下</span></strong></td> 
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;text-align:center;"><strong><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">释放</span></strong></td> 
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;text-align:center;"><strong><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">第二次按下(双击)</span></strong></td> 
     </tr>
     <tr>
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;text-align:center;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">左键</span></td> 
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;text-align:center;"><span style="line-height:1.5;color:rgb(128,0,128);"><strong><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">WM_NCLBUTTONDWON</span></strong></span></td> 
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;text-align:center;"><span style="line-height:1.5;color:rgb(128,0,128);"><strong><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">WM_NCLBUTTONUP</span></strong></span></td> 
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;text-align:center;"><span style="line-height:1.5;color:rgb(128,0,128);"><strong><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">WM_NCLBUTTONDBLCLK</span></strong></span></td> 
     </tr>
     <tr>
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;text-align:center;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">中键</span></td> 
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;text-align:center;"><span style="line-height:1.5;color:rgb(128,0,128);"><strong><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">WM_NCMBUTTONDOWN</span></strong></span></td> 
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;text-align:center;"><span style="line-height:1.5;color:rgb(128,0,128);"><strong><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">WM_NCMBUTTONUP</span></strong></span></td> 
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;text-align:center;"><span style="line-height:1.5;color:rgb(128,0,128);"><strong><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">WM_NCMBUTTONDBLCLK</span></strong></span></td> 
     </tr>
     <tr>
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;text-align:center;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">右键</span></td> 
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;text-align:center;"><span style="line-height:1.5;color:rgb(128,0,128);"><strong><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">WM_NCRBUTTONDOWN</span></strong></span></td> 
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;text-align:center;"><span style="line-height:1.5;color:rgb(128,0,128);"><strong><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">WM_NCRBUTTONUP</span></strong></span></td> 
      <td style="font-size:12px;color:rgb(69,69,69);border:1px solid #C0C0C0;border-collapse:collapse;text-align:center;"><span style="line-height:1.5;color:rgb(128,0,128);"><strong><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">WM_NCRBUTTONDBLCLK</span></strong></span></td> 
     </tr>
    </tbody>
   </table>
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">&nbsp;</span></p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">&nbsp;</span></p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;"><br><br></span></p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">&nbsp;</span></p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">　　另外与客户区消息不同的是, 这里的&nbsp;<span style="line-height:1.5;color:rgb(128,0,128);"><strong>wParam</strong></span>&nbsp;参数中的值与客户区中的含义有所不同, 这里的 wParam 表示非客户区鼠标移动或单击的位置, 他的值被设定成一些以&nbsp;<span style="line-height:1.5;color:rgb(128,0,128);"><strong>HT</strong></span>开头的标识符中, 表示 "<strong>击中测试</strong>"(Hit Test), 关于击中测试与以HT开头的标识符将在下面讲到。<br> &nbsp;&nbsp; &nbsp;<br> &nbsp;&nbsp; &nbsp;参数 lParam 中的值依然是鼠标指针的位置信息, 但此时的信息正好与客户区中的 lParam 的坐标信息相反, 客户区中的 lParam 的值是相对于窗口客户区的坐标, 而这里的(非客户区) lParam 中所包含的坐标信息是屏幕坐标, 在上面已经提到过, 使用<span style="line-height:1.5;color:rgb(128,0,128);"><strong>ScreenToClient</strong></span>和<span style="line-height:1.5;color:rgb(128,0,128);"><strong>ClientToScreen</strong></span>可以实现屏幕坐标与客户区坐标之间的转化。<br> &nbsp;&nbsp; &nbsp;<br> &nbsp;&nbsp; &nbsp;处理非客户区左键单击示例:<br></span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:0px;"></a></span>
    </div> 
    <pre>    <span style="color:rgb(0,0,255);line-height:1.5;">switch</span><span style="line-height:1.5;">(message)
    {
    </span><span style="color:rgb(0,0,255);line-height:1.5;">case</span><span style="line-height:1.5;"> WM_PAINT:
        hdc </span>= BeginPaint( hwnd, &amp;<span style="line-height:1.5;">ps ) ;
        EndPaint( hwnd, </span>&amp;<span style="line-height:1.5;">ps ) ;
        </span><span style="color:rgb(0,0,255);line-height:1.5;">return</span> <span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;"> ;

    </span><span style="color:rgb(0,0,255);line-height:1.5;">case</span> WM_NCLBUTTONDOWN:        <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">处理非客户区鼠标左键单击事件</span>
        MessageBox( hwnd, TEXT(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">非客户区鼠标左键被单击</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span>), TEXT(<span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">鼠标动作</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">), MB_OK ) ;
        </span><span style="color:rgb(0,0,255);line-height:1.5;">return</span> <span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;"> ;

    </span><span style="color:rgb(0,0,255);line-height:1.5;">case</span><span style="line-height:1.5;"> WM_DESTROY:
        PostQuitMessage(</span><span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;">) ;
        </span><span style="color:rgb(0,0,255);line-height:1.5;">return</span> <span style="color:rgb(128,0,128);line-height:1.5;">0</span><span style="line-height:1.5;"> ;
    }</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:0px;"></a></span>
    </div> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;">&nbsp;</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;"><br><br><span style="line-height:1.5;font-size:18pt;"><strong>五、关于"击中测试"消息 WM_NCHITTEST</strong></span><br> &nbsp;&nbsp; &nbsp;<strong><span style="line-height:1.5;color:rgb(128,0,128);">WM_NCHITTEST</span></strong>表示"非客户区击中测试", 所谓的击中测试就是测试鼠标当前所在的位置, 这个消息的优先级高于其他所有的客户区和非客户区消息, 参数 lParam 中包含相对于屏幕坐标的x值与y值, wParam 参数另有用途。<br> &nbsp;&nbsp; &nbsp;<br> &nbsp;&nbsp; &nbsp;一般来说,&nbsp;<strong>WM_NCHITTEST</strong>&nbsp;消息是交给&nbsp;<strong>DefWindowProc</strong>&nbsp;默认的消息处理函数进行处理的, 对于客户区中, Windows会利用 WM_NCHITTEST 消息来产生所有和其他鼠标位置相关的鼠标消息。对于非客户区消息来说, DefWindowProc 处理 WM_NCHITTEST 消息后返回一个 wParam 值, 这个值可以是任意一个非客户区鼠标消息的 wParam 参数的值, 这个 wParam 值用来判断鼠标的所在的位置。<br> &nbsp;&nbsp; &nbsp;<br> &nbsp;&nbsp; &nbsp;举例来说, 如果 DefWindowProc 函数在处理 WM_NCHITTEST 消息后返回一个&nbsp;<span style="line-height:1.5;color:rgb(128,0,128);"><strong>HTCLIENT</strong></span>&nbsp;, HTCLIENT 表示鼠标在客户区, 这时Windows会将屏幕坐标转换成客户区坐标,并产生一个相关的客户区的鼠标消息;<br> &nbsp;&nbsp; &nbsp;当返回值为&nbsp;<span style="line-height:1.5;color:rgb(128,0,128);"><strong>HTCAPTION</strong></span>&nbsp;表示鼠标此时在一个标题栏中, 所以Windows会将此时鼠标的坐标位置转成屏幕坐标并发送相关的非客户区消息。<br> &nbsp;&nbsp; &nbsp;<br> &nbsp;&nbsp; &nbsp;这些返回的标识符定义在<span style="line-height:1.5;color:rgb(128,0,128);"><strong>WINUSER.H</strong></span>头文件中, 相关的定义如下:<br></span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:0px;"></a></span>
    </div> 
    <pre><span style="color:rgb(0,0,255);line-height:1.5;">#define</span> HTERROR             (-2)                    <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">在屏幕的后面或在窗体之间的线上(使函数DefWindowProc产生一个警示音)</span>
<span style="color:rgb(0,0,255);line-height:1.5;">#define</span> HTTRANSPARENT       (-1)                    <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">在一个被其它窗口覆盖的窗口中</span>
<span style="color:rgb(0,0,255);line-height:1.5;">#define</span> HTNOWHERE           0                        <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">在屏幕背景或窗口之间的分界线</span>
<span style="color:rgb(0,0,255);line-height:1.5;">#define</span> HTCLIENT            1                        <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">在客户区中</span>
<span style="color:rgb(0,0,255);line-height:1.5;">#define</span> HTCAPTION           2                        <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">在标题栏中</span>
<span style="color:rgb(0,0,255);line-height:1.5;">#define</span> HTSYSMENU           3                        <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">在一个窗口菜单栏或子窗口的关闭按钮上</span>
<span style="color:rgb(0,0,255);line-height:1.5;">#define</span> HTGROWBOX           4                        <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">在尺寸框中</span>
<span style="color:rgb(0,0,255);line-height:1.5;">#define</span> HTSIZE              HTGROWBOX                <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">同HTGROWBOX</span>
<span style="color:rgb(0,0,255);line-height:1.5;">#define</span> HTMENU              5                        <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">在菜单区域</span>
<span style="color:rgb(0,0,255);line-height:1.5;">#define</span> HTHSCROLL           6                        <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">在水平滚动条上</span>
<span style="color:rgb(0,0,255);line-height:1.5;">#define</span> HTVSCROLL           7                        <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">在垂直滚动条上</span>
<span style="color:rgb(0,0,255);line-height:1.5;">#define</span> HTMINBUTTON         8                        <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">在最小化按钮上</span>
<span style="color:rgb(0,0,255);line-height:1.5;">#define</span> HTMAXBUTTON         9                        <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">在最大化按钮上</span>
<span style="color:rgb(0,0,255);line-height:1.5;">#define</span> HTLEFT              10                        <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">在窗口的左边框上</span>
<span style="color:rgb(0,0,255);line-height:1.5;">#define</span> HTRIGHT             11                        <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">在窗口的右边框上</span>
<span style="color:rgb(0,0,255);line-height:1.5;">#define</span> HTTOP               12                        <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">在窗口水平边框的上方</span>
<span style="color:rgb(0,0,255);line-height:1.5;">#define</span> HTTOPLEFT           13                        <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">在窗口边框的左上角</span>
<span style="color:rgb(0,0,255);line-height:1.5;">#define</span> HTTOPRIGHT          14                        <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">在窗口边框的右上角</span>
<span style="color:rgb(0,0,255);line-height:1.5;">#define</span> HTBOTTOM            15                        <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">在窗口的水平边框的底部</span>
<span style="color:rgb(0,0,255);line-height:1.5;">#define</span> HTBOTTOMLEFT        16                        <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">在窗口边框的左下角</span>
<span style="color:rgb(0,0,255);line-height:1.5;">#define</span> HTBOTTOMRIGHT       17                        <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">在窗口边框的右下角</span>
<span style="color:rgb(0,0,255);line-height:1.5;">#define</span> HTBORDER            18                        <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">在不具有可变大小边框的窗口的边框上</span>
<span style="color:rgb(0,0,255);line-height:1.5;">#define</span> HTREDUCE            HTMINBUTTON                <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">同HTMINBUTTON</span>
<span style="color:rgb(0,0,255);line-height:1.5;">#define</span> HTZOOM              HTMAXBUTTON                <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">同HTMAXBUTTON</span>
<span style="color:rgb(0,0,255);line-height:1.5;">#define</span> HTSIZEFIRST         HTLEFT                    <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">同HTLEFT</span>
<span style="color:rgb(0,0,255);line-height:1.5;">#define</span> HTSIZELAST          HTBOTTOMRIGHT             <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">同HTBOTTOMRIGHT</span>
<span style="color:rgb(0,0,255);line-height:1.5;">#define</span> HTOBJECT            19                        <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">忽略该标识符, 已废弃</span>
<span style="color:rgb(0,0,255);line-height:1.5;">#define</span> HTCLOSE             20                        <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">在关闭按钮上</span>
<span style="color:rgb(0,0,255);line-height:1.5;">#define</span> HTHELP              21                        <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">在帮助按钮上</span></pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:0px;"></a></span>
    </div> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">&nbsp;&nbsp;&nbsp; 这样在获取非客户区消息时我们就可以根据 wParam 中的值判断鼠标在窗口的位置了, 像这样:<br></span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;"> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:0px;"></a></span>
    </div> 
    <pre>    <span style="color:rgb(0,0,255);line-height:1.5;">case</span> WM_NCLBUTTONDOWN:        <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">处理非客户区的鼠标左键单击事件</span>
        x = LOWORD( lParam ) ;    <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">通过lParam获取鼠标位置</span>
        y =<span style="line-height:1.5;"> HIWORD( lParam ) ;
        </span><span style="color:rgb(0,0,255);line-height:1.5;">switch</span>(wParam)            <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">通过wParam判断鼠标在窗口的位置</span>
<span style="line-height:1.5;">        {
        </span><span style="color:rgb(0,0,255);line-height:1.5;">case</span> HTCAPTION:        <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">在标题上</span>
            wsprintf( szBuffer,  <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">鼠标左键在标题栏中被单击, 击中位置: (%i, %i)</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">, x, y ) ;
            MessageBox( hwnd, szBuffer, TEXT(</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">鼠标动作</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">), MB_OK ) ;
            </span><span style="color:rgb(0,0,255);line-height:1.5;">break</span><span style="line-height:1.5;"> ;
        </span><span style="color:rgb(0,0,255);line-height:1.5;">case</span> HTMINBUTTON:    <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">在最小化按钮上</span>
            wsprintf( szBuffer,  <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">鼠标左键在最小化按钮上被单击, 击中位置: (%i, %i)</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">, x, y ) ;
            MessageBox( hwnd, szBuffer, TEXT(</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">鼠标动作</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">), MB_OK ) ;
            </span><span style="color:rgb(0,0,255);line-height:1.5;">break</span><span style="line-height:1.5;"> ;
        </span><span style="color:rgb(0,0,255);line-height:1.5;">case</span> HTMAXBUTTON:    <span style="color:rgb(0,128,0);line-height:1.5;">//</span><span style="color:rgb(0,128,0);line-height:1.5;">在最大化按钮上</span>
            wsprintf( szBuffer,  <span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">鼠标左键在最大化按钮上被单击, 击中位置: (%i, %i)</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">, x, y ) ;
            MessageBox( hwnd, szBuffer, TEXT(</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="color:rgb(128,0,0);line-height:1.5;">鼠标动作</span><span style="color:rgb(128,0,0);line-height:1.5;">"</span><span style="line-height:1.5;">), MB_OK ) ;
            </span><span style="color:rgb(0,0,255);line-height:1.5;">break</span><span style="line-height:1.5;"> ;
        }
        </span><span style="color:rgb(0,0,255);line-height:1.5;">return</span> <span style="color:rgb(128,0,128);line-height:1.5;">0</span> ;</pre> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:0px;"></a></span>
    </div> 
    <div class="cnblogs_code_toolbar">
     <span class="cnblogs_code_copy" style="line-height:1.5;"><a title="复制代码" style="color:rgb(26,139,200);border:none;"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none;"></a></span>
    </div> 
   </div> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">&nbsp;&nbsp;&nbsp; 首先捕获 鼠标左键在非客户区的单击事件, 然后再通过 wParam 判断鼠标在窗口的位置, 这里获取鼠标位置是通过 LOWORD 和 HIWORD 宏完成的, 还有两个功能相同的宏也可以用来获取lParam中的鼠标信息, 他们是&nbsp;<span style="line-height:1.5;color:rgb(128,0,128);"><strong>GET_X_LPARAM</strong></span>&nbsp;宏和&nbsp;<span style="line-height:1.5;color:rgb(128,0,128);"><strong>GET_Y_LPARAM</strong></span>, 不过这两个宏是定义在&nbsp;<span style="line-height:1.5;color:rgb(128,0,128);"><strong>WINDOWSX.H</strong></span>&nbsp;头文件中的, 如果要使用这两个宏需要将 WINDOWSX.H 包含进来。<br> &nbsp;&nbsp; &nbsp;举例:<br></span></p> 
   <div class="cnblogs_code" style="border:1px solid rgb(204,204,204);font-family:'Courier New';font-size:12px;">
    <pre>    xPos =<span style="line-height:1.5;"> GET_X_LPARAM(lParam) ;
    yPos </span>= GET_Y_LPARAM(lParam) ;</pre>
   </div> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;">&nbsp;</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;">&nbsp;<span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;"><br><span style="line-height:1.5;font-size:18pt;"><strong>--------------------</strong></span></span></p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;">&nbsp;</p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><span style="line-height:1.5;font-family:'courier new', courier;font-size:16px;">转自：<a href="http://www.cnblogs.com/mr-wid/archive/2012/11/30/2795739.html" rel="nofollow" style="color:rgb(26,139,200);text-decoration:none;">http://www.cnblogs.com/mr-wid/archive/2012/11/30/2795739.html</a></span></p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><br></p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><br></p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><br></p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><br></p> 
   <p style="line-height:1.5;color:rgb(75,75,75);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13px;"><br></p> 
   <p style="line-height:1.5;"><font color="#4b4b4b"><span style="font-size:13px;">本文转自夏雪冬日博客园博客，原文链接：http://www.cnblogs.com/heyonggang/archive/2012/12/14/2818007.html，如需转载请自行联系原作者</span></font><br></p> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
