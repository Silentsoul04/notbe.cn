<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>zabbix监控-基本原理介绍 « NotBeCN</title>
  <meta name="description" content="                                   一、Linux下开源监控系统简单介绍 1）cacti：存储数据能力强，报警性能差 2）nagios：报警性能差，存储数据仅有简单的一段可以判断是否在合理范围内的数据长度，储存在内存中。比如，连续采样数据存储，有连续三次不在合理范围内的数据就报警...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/09/13/weixin_33853794_90134119.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">zabbix监控-基本原理介绍</h1>
    <p class="post-meta">Sep 13, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <div>
    <br>
   </div> 
   <div> 
    <div class="blogpost-body" style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13px;line-height:19.5px;"> 
     <p style="line-height:1.5;"><span style="line-height:1.5;color:rgb(255,0,0);"><strong>一、Linux下开源监控系统简单介绍</strong></span><br> 1）cacti：存储数据能力强，报警性能差<br> 2）nagios：报警性能差，存储数据仅有简单的一段可以判断是否在合理范围内的数据长度，储存在内存中。比如，连续采样数据存储，有连续三次不在合理范围内的数据就报警<br> 3）zabbix：结合上面两种工具的优点，又可以存储数据，又可以报警。</p> 
     <p style="line-height:1.5;"><span style="line-height:1.5;color:rgb(255,0,0);"><strong>二、什么是Zabbix及其优缺点（对比Cacti和Nagios）</strong></span></p> 
     <p style="line-height:1.5;">Zabbix是一个基于Web界面提供分布式系统监视及网络监视功能的企业级开源解决方案。它能监视各种网络参数，保证服务器系统的安全运营，并提供灵活的通知机制以让系统管理员快速定位/解决存在的各种问题；借助Zabbix可很轻松地减轻运维人员们繁重的服务器管理任务，实现业务系统持续运行。<br> agent端：主机通过安装agent方式采集数据。<br> server端：通过收集agent发送的数据，写入数据库（MySQL，ORACLE等），再通过php+apache在web前端展示.<br> zabbix = cacti + nagios</p> 
     <ul>
      <li style="list-style:disc;">优点：基于两款工具优点于一身并更强大，实现企业级分布式监控。</li> 
      <li style="list-style:disc;">缺点：2.2版本带宽占用大但是升级到2.4版本后更节省了带宽资源，其它再无发现。</li> 
     </ul>
     <p style="line-height:1.5;"><span style="line-height:1.5;color:rgb(255,0,0);"><strong>三、Zabbix特性</strong></span></p> 
     <p style="line-height:1.5;">1）数据采样：通过snmp、ssh、telnet、agent、ipmi、jmx等通道采集被监控主机的数据。可以自定义检测机制和自定义时间间隔<br> 2）实时绘图：展示，读取数据绘图，支持graph，map，screen，幻灯片（slide show）<br> 3）告警：（升级告警，规定时间内内解决不了的事情往上传）<br> 4）数据存储：数据库有mysql，pgsql，时间序列数据库等等</p> 
     <p style="line-height:1.5;"><span style="line-height:1.5;color:rgb(255,0,0);"><strong>四、Zabbix监控功能</strong></span></p> 
     <p style="line-height:1.5;">主机的性能监控、网络设备性能监控、数据库性能监控、多种告警方式、详细的报表图表绘制<br> 监控主机zabbix有专用的agent，可以监控Linux，Windows，FreeBSD等 。<br> 监控网络设备zabbix通过SNMP，ssh(不多用)<br> 可监控对象</p> 
     <ul>
      <li style="list-style:disc;">设备：服务器，路由器，交换机</li> 
      <li style="list-style:disc;">软件：OS，网络，应用程序</li> 
      <li style="list-style:disc;">主机性能指标监控</li> 
      <li style="list-style:disc;">故障监控： down机，服务不可用，主机不可达</li> 
     </ul>
     <p style="line-height:1.5;"><span style="line-height:1.5;color:rgb(255,0,0);"><strong>五、Zabbix工作原理</strong></span></p> 
     <p style="line-height:1.5;">zabbix监控系统运行大概流程：<br> zabbix agent需要安装到被监控的主机上，它负责定期收集各项数据，并发送到zabbix server端；<br> zabbix server将数据存储到数据库中，zabbix web根据数据在前端进行展现和绘图。这里agent收集数据分为主动和被动两种模式：</p> 
     <ul>
      <li style="list-style:disc;">主动：agent请求server获取主动的监控项列表，并主动将监控项内需要检测的数据提交给server/proxy</li> 
      <li style="list-style:disc;">被动：server向agent请求获取监控项的数据，agent返回数据。</li> 
     </ul>
     <p style="line-height:1.5;"><span style="line-height:1.5;color:rgb(255,0,0);"><strong>六、zabbix的组件及进程</strong></span></p> 
     <p style="line-height:1.5;">zabbix由以下几个组件部分构成：</p> 
     <ul>
      <li style="list-style:disc;">Zabbix Server：负责接收agent发送的报告信息的核心组件，所有配置，统计数据及操作数据均由其组织进行；</li> 
      <li style="list-style:disc;">Database Storage：专用于存储所有配置信息，以及由zabbix收集的数据；</li> 
      <li style="list-style:disc;">Web interface：zabbix的GUI接口，通常与Server运行在同一台主机上；</li> 
      <li style="list-style:disc;">Proxy：可选组件，常用于分布监控环境中，代理Server收集部分被监控端的监控数据并统一发往Server端；</li> 
      <li style="list-style:disc;">Agent：部署在被监控主机上，负责收集本地数据并发往Server端或Proxy端；</li> 
     </ul>
     <p style="line-height:1.5;">默认情况下zabbix包含5个程序：zabbix_agentd、zabbix_get、zabbix_proxy、zabbix_sender、zabbix_server，另外一个zabbix_java_gateway是可选，这个需要另外安装。下面来分别介绍下他们各自的作用。</p> 
     <p style="line-height:1.5;">1）zabbix_agentd：<br> 客户端守护进程，此进程收集客户端数据，例如cpu负载、内存、硬盘使用情况等。<br> 2）zabbix_get<br> zabbix工具，单独使用的命令，通常在server或者proxy端执行获取远程客户端信息的命令。通常用户排错。例如在server端获取不到客户端的内存数据，我们可以使用zabbix_get获取客户端的内容的方式来做故障排查。<br> 3）zabbix_sender<br> zabbix工具，用于发送数据给server或者proxy，通常用于耗时比较长的检查。很多检查非常耗时间，导致zabbix超时。于是我们在脚本执行完毕之后，使用sender主动提交数据。<br> 4）zabbix_server<br> zabbix服务端守护进程。zabbix_agentd、zabbix_get、zabbix_sender、zabbix_proxy、zabbix_java_gateway的数据最终都是提交到server<br> 备注：当然不是数据都是主动提交给zabbix_server,也有的是server主动去取数据。<br> 5）zabbix_proxy<br> zabbix代理守护进程。功能类似server，唯一不同的是它只是一个中转站，它需要把收集到的数据提交/被提交到server里。为什么要用代理？代理是做什么的？卖个关子，请继续关注运维生存时间zabbix教程系列。<br> 6）zabbix_java_gateway<br> zabbix2.0之后引入的一个功能。顾名思义：Java网关，类似agentd，但是只用于Java方面。需要特别注意的是，它只能主动去获取数据，而不能被动获取数据。它的数据最终会给到server或者proxy。</p> 
     <p style="line-height:1.5;">zabbix的工作流程拓扑图如下</p> 
     <p style="line-height:1.5;"><span class="confluence-embedded-file-wrapper" style="line-height:1.5;"><img class="confluence-embedded-image" src="http://172.29.20.21:8090/download/attachments/13468551/image2017-8-22_10-15-30.png?version=1&amp;modificationDate=1503368128989&amp;api=v2" alt="" style="border:0px;"></span></p> 
     <p style="line-height:1.5;"><span style="line-height:1.5;color:rgb(255,0,0);"><strong>七、zabbix监控环境中基本概念</strong></span></p> 
     <p style="line-height:1.5;">主机（host）：要监控的网络设备，可由IP或DNS名称指定；<br> 主机组（host group）：主机的逻辑容器，可以包含主机和模板，但同一个组织内的主机和模板不能互相链接；主机组通常在给用户或用户组指派监控权限时使用；<br> 监控项（item）：一个特定监控指标的相关的数据；这些数据来自于被监控对象；item是zabbix进行数据收集的核心，相对某个监控对象，每个item都由"key"标识；<br> 触发器（trigger）：一个表达式，用于评估某监控对象的特定item内接收到的数据是否在合理范围内，也就是阈值；接收的数据量大于阈值时，触发器状态将从"OK"转变为"Problem"，当数据再次恢复到合理范围，又转变为"OK"；<br> 事件（event）：触发一个值得关注的事情，比如触发器状态转变，新的agent或重新上线的agent的自动注册等；<br> 动作（action）：指对于特定事件事先定义的处理方法，如发送通知，何时执行操作；<br> 报警升级（escalation）：发送警报或者执行远程命令的自定义方案，如每隔5分钟发送一次警报，共发送5次等；<br> 媒介（media）：发送通知的手段或者通道，如Email、Jabber或者SMS等；<br> 通知（notification）：通过选定的媒介向用户发送的有关某事件的信息；<br> 远程命令（remote command）：预定义的命令，可在被监控主机处于某特定条件下时自动执行；<br> 模板（template）：用于快速定义被监控主机的预设条目集合，通常包含了item、trigger、graph、screen、application以及low-level discovery rule；模板可以直接链接至某个主机；<br> 应用（application）：一组item的集合；<br> web场景（web scennario）：用于检测web站点可用性的一个活多个HTTP请求；<br> 前端（frontend）：Zabbix的web接口；</p> 
     <p style="line-height:1.5;"><span style="line-height:1.5;color:rgb(255,0,0);"><strong>八、zabbix的监控架构</strong></span></p> 
     <p style="line-height:1.5;">在实际监控架构中，zabbix根据网络环境、监控规模等 分了三种架构： server-client 、master-node-client、server-proxy-client三种 。<br> 1）server-client架构<br> 也是zabbix的最简单的架构，监控机和被监控机之间不经过任何代理 ，直接由zabbix server和zabbix agentd之间进行数据交互。适用于网络比较简单，设备比较少的监控环境 。<br> 2）server-proxy-client架构<br> 其中proxy是server、client之间沟通的一个桥梁，proxy本身没有前端，而且其本身并不存放数据，只是将agentd发来的数据暂时存放，而后再提交给server 。该架构经常是和master-node-client架构做比较的架构 ，一般适用于跨机房、跨网络的中型网络架构的监控。<br> 3、master-node-client架构<br> 该架构是zabbix最复杂的监控架构，适用于跨网络、跨机房、设备较多的大型环境 。每个node同时也是一个server端，node下面可以接proxy，也可以直接接client 。node有自已的配置文件和数据库，其要做的是将配置信息和监控数据向master同步，master的故障或损坏对node其下架构的完整性。</p> 
     <p style="line-height:1.5;"><img src="https://images2017.cnblogs.com/blog/907596/201708/907596-20170822102020527-82414049.png" alt="" style="border:0px;"></p> 
    </div> 
    <div style="font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13px;line-height:19.5px;">
     ***************当你发现自己的才华撑不起野心时，就请安静下来学习吧***************
    </div> 
    <div class="clear" style="clear:both;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13px;line-height:19.5px;"></div> 
    <div> 
     <div> 
      <font><span style="font-size:13px;line-height:19.5px;">本文转自散尽浮华博客园博客，原文链接：http://www.cnblogs.com/kevingrace/p/5737139.html</span></font>
      <span style="font-size:13px;line-height:19.5px;font-family:Verdana, Arial, Helvetica, sans-serif;">，如需转载请自行联系原作者</span> 
     </div> 
    </div> 
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
