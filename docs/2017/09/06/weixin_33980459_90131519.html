<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Java-FileUtil工具类 « NotBeCN</title>
  <meta name="description" content="                 import java.io.BufferedReader;import java.io.File;import java.io.FileInputStream;import java.io.FileOutputStream;import java.io.FileReader;i...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/09/06/weixin_33980459_90131519.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">Java-FileUtil工具类</h1>
    <p class="post-meta">Sep 6, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <div class="markdown_views">
    <pre class="prettyprint"><code class="hljs java"><span class="hljs-keyword">import</span> java.io.BufferedReader;
<span class="hljs-keyword">import</span> java.io.File;
<span class="hljs-keyword">import</span> java.io.FileInputStream;
<span class="hljs-keyword">import</span> java.io.FileOutputStream;
<span class="hljs-keyword">import</span> java.io.FileReader;
<span class="hljs-keyword">import</span> java.io.FileWriter;
<span class="hljs-keyword">import</span> java.io.FilenameFilter;
<span class="hljs-keyword">import</span> java.io.IOException;
<span class="hljs-keyword">import</span> java.net.MalformedURLException;
<span class="hljs-keyword">import</span> java.net.URL;
<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.Enumeration;
<span class="hljs-keyword">import</span> java.util.Hashtable;

<span class="hljs-keyword">import</span> javax.swing.filechooser.FileFilter;

<span class="hljs-javadoc">/** * 此类中封装一些常用的文件操作。 * 所有方法都是静态方法，不需要生成此类的实例， * 为避免生成此类的实例，构造方法被申明为private类型的。 */</span>

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FileUtil</span> {</span>
  <span class="hljs-javadoc">/** * 私有构造方法，防止类的实例化，因为工具类不需要实例化。 */</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title">FileUtil</span>() {

  }

  <span class="hljs-javadoc">/** * 修改文件的最后访问时间。 * 如果文件不存在则创建该文件。 * &lt;b&gt;目前这个方法的行为方式还不稳定，主要是方法有些信息输出，这些信息输出是否保留还在考虑中。&lt;/b&gt; *<span class="hljs-javadoctag"> @param</span> file 需要修改最后访问时间的文件。 *<span class="hljs-javadoctag"> @since</span> 1.0 */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">touch</span>(File file) {
    <span class="hljs-keyword">long</span> currentTime = System.currentTimeMillis();
    <span class="hljs-keyword">if</span> (!file.exists()) {
      System.err.println(<span class="hljs-string">"file not found:"</span> + file.getName());
      System.err.println(<span class="hljs-string">"Create a new file:"</span> + file.getName());
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">if</span> (file.createNewFile()) {
          System.out.println(<span class="hljs-string">"Succeeded!"</span>);
        }
        <span class="hljs-keyword">else</span> {
          System.err.println(<span class="hljs-string">"Create file failed!"</span>);
        }
      }
      <span class="hljs-keyword">catch</span> (IOException e) {
        System.err.println(<span class="hljs-string">"Create file failed!"</span>);
        e.printStackTrace();
      }
    }
    <span class="hljs-keyword">boolean</span> result = file.setLastModified(currentTime);
    <span class="hljs-keyword">if</span> (!result) {
      System.err.println(<span class="hljs-string">"touch failed: "</span> + file.getName());
    }
  }

  <span class="hljs-javadoc">/** * 修改文件的最后访问时间。 * 如果文件不存在则创建该文件。 * &lt;b&gt;目前这个方法的行为方式还不稳定，主要是方法有些信息输出，这些信息输出是否保留还在考虑中。&lt;/b&gt; *<span class="hljs-javadoctag"> @param</span> fileName 需要修改最后访问时间的文件的文件名。 *<span class="hljs-javadoctag"> @since</span> 1.0 */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">touch</span>(String fileName) {
    File file = <span class="hljs-keyword">new</span> File(fileName);
    touch(file);
  }

  <span class="hljs-javadoc">/** * 修改文件的最后访问时间。 * 如果文件不存在则创建该文件。 * &lt;b&gt;目前这个方法的行为方式还不稳定，主要是方法有些信息输出，这些信息输出是否保留还在考虑中。&lt;/b&gt; *<span class="hljs-javadoctag"> @param</span> files 需要修改最后访问时间的文件数组。 *<span class="hljs-javadoctag"> @since</span> 1.0 */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">touch</span>(File[] files) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; files.length; i++) {
      touch(files[i]);
    }
  }

  <span class="hljs-javadoc">/** * 修改文件的最后访问时间。 * 如果文件不存在则创建该文件。 * &lt;b&gt;目前这个方法的行为方式还不稳定，主要是方法有些信息输出，这些信息输出是否保留还在考虑中。&lt;/b&gt; *<span class="hljs-javadoctag"> @param</span> fileNames 需要修改最后访问时间的文件名数组。 *<span class="hljs-javadoctag"> @since</span> 1.0 */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">touch</span>(String[] fileNames) {
    File[] files = <span class="hljs-keyword">new</span> File[fileNames.length];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; fileNames.length; i++) {
      files[i] = <span class="hljs-keyword">new</span> File(fileNames[i]);
    }
    touch(files);
  }

  <span class="hljs-javadoc">/** * 判断指定的文件是否存在。 *<span class="hljs-javadoctag"> @param</span> fileName 要判断的文件的文件名 *<span class="hljs-javadoctag"> @return</span> 存在时返回true，否则返回false。 *<span class="hljs-javadoctag"> @since</span> 1.0 */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isFileExist</span>(String fileName) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> File(fileName).isFile();
  }

  <span class="hljs-javadoc">/** * 创建指定的目录。 * 如果指定的目录的父目录不存在则创建其目录书上所有需要的父目录。 * &lt;b&gt;注意：可能会在返回false的时候创建部分父目录。&lt;/b&gt; *<span class="hljs-javadoctag"> @param</span> file 要创建的目录 *<span class="hljs-javadoctag"> @return</span> 完全创建成功时返回true，否则返回false。 *<span class="hljs-javadoctag"> @since</span> 1.0 */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">makeDirectory</span>(File file) {
    File parent = file.getParentFile();
    <span class="hljs-keyword">if</span> (parent != <span class="hljs-keyword">null</span>) {
      <span class="hljs-keyword">return</span> parent.mkdirs();
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
  }

  <span class="hljs-javadoc">/** * 创建指定的目录。 * 如果指定的目录的父目录不存在则创建其目录书上所有需要的父目录。 * &lt;b&gt;注意：可能会在返回false的时候创建部分父目录。&lt;/b&gt; *<span class="hljs-javadoctag"> @param</span> fileName 要创建的目录的目录名 *<span class="hljs-javadoctag"> @return</span> 完全创建成功时返回true，否则返回false。 *<span class="hljs-javadoctag"> @since</span> 1.0 */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">makeDirectory</span>(String fileName) {
    File file = <span class="hljs-keyword">new</span> File(fileName);
    <span class="hljs-keyword">return</span> makeDirectory(file);
  }

  <span class="hljs-javadoc">/** * 清空指定目录中的文件。 * 这个方法将尽可能删除所有的文件，但是只要有一个文件没有被删除都会返回false。 * 另外这个方法不会迭代删除，即不会删除子目录及其内容。 *<span class="hljs-javadoctag"> @param</span> directory 要清空的目录 *<span class="hljs-javadoctag"> @return</span> 目录下的所有文件都被成功删除时返回true，否则返回false. *<span class="hljs-javadoctag"> @since</span> 1.0 */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">emptyDirectory</span>(File directory) {
    <span class="hljs-keyword">boolean</span> result = <span class="hljs-keyword">true</span>;
    File[] entries = directory.listFiles();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; entries.length; i++) {
      <span class="hljs-keyword">if</span> (!entries[i].delete()) {
        result = <span class="hljs-keyword">false</span>;
      }
    }
    <span class="hljs-keyword">return</span> result;
  }

  <span class="hljs-javadoc">/** * 清空指定目录中的文件。 * 这个方法将尽可能删除所有的文件，但是只要有一个文件没有被删除都会返回false。 * 另外这个方法不会迭代删除，即不会删除子目录及其内容。 *<span class="hljs-javadoctag"> @param</span> directoryName 要清空的目录的目录名 *<span class="hljs-javadoctag"> @return</span> 目录下的所有文件都被成功删除时返回true，否则返回false。 *<span class="hljs-javadoctag"> @since</span> 1.0 */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">emptyDirectory</span>(String directoryName) {
    File dir = <span class="hljs-keyword">new</span> File(directoryName);
    <span class="hljs-keyword">return</span> emptyDirectory(dir);
  }

  <span class="hljs-javadoc">/** * 删除指定目录及其中的所有内容。 *<span class="hljs-javadoctag"> @param</span> dirName 要删除的目录的目录名 *<span class="hljs-javadoctag"> @return</span> 删除成功时返回true，否则返回false。 *<span class="hljs-javadoctag"> @since</span> 1.0 */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">deleteDirectory</span>(String dirName) {
    <span class="hljs-keyword">return</span> deleteDirectory(<span class="hljs-keyword">new</span> File(dirName));
  }

  <span class="hljs-javadoc">/** * 删除指定目录及其中的所有内容。 *<span class="hljs-javadoctag"> @param</span> dir 要删除的目录 *<span class="hljs-javadoctag"> @return</span> 删除成功时返回true，否则返回false。 *<span class="hljs-javadoctag"> @since</span> 1.0 */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">deleteDirectory</span>(File dir) {
    <span class="hljs-keyword">if</span> ( (dir == <span class="hljs-keyword">null</span>) || !dir.isDirectory()) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalArgumentException(<span class="hljs-string">"Argument "</span> + dir +
                                         <span class="hljs-string">" is not a directory. "</span>);
    }

    File[] entries = dir.listFiles();
    <span class="hljs-keyword">int</span> sz = entries.length;

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; sz; i++) {
      <span class="hljs-keyword">if</span> (entries[i].isDirectory()) {
        <span class="hljs-keyword">if</span> (!deleteDirectory(entries[i])) {
          <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
        }
      }
      <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">if</span> (!entries[i].delete()) {
          <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
        }
      }
    }

    <span class="hljs-keyword">if</span> (!dir.delete()) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
  }

  <span class="hljs-javadoc">/** * 列出目录中的所有内容，包括其子目录中的内容。 *<span class="hljs-javadoctag"> @param</span> fileName 要列出的目录的目录名 *<span class="hljs-javadoctag"> @return</span> 目录内容的文件数组。 *<span class="hljs-javadoctag"> @since</span> 1.0 */</span>
  <span class="hljs-comment">/*public static File[] listAll(String fileName) { return listAll(new File(fileName)); }*/</span>

  <span class="hljs-javadoc">/** * 列出目录中的所有内容，包括其子目录中的内容。 *<span class="hljs-javadoctag"> @param</span> file 要列出的目录 *<span class="hljs-javadoctag"> @return</span> 目录内容的文件数组。 *<span class="hljs-javadoctag"> @since</span> 1.0 */</span>
  <span class="hljs-comment">/*public static File[] listAll(File file) { ArrayList list = new ArrayList(); File[] files; if (!file.exists() || file.isFile()) { return null; } list(list, file, new AllFileFilter()); list.remove(file); files = new File[list.size()]; list.toArray(files); return files; }*/</span>

  <span class="hljs-javadoc">/** * 列出目录中的所有内容，包括其子目录中的内容。 *<span class="hljs-javadoctag"> @param</span> file 要列出的目录 *<span class="hljs-javadoctag"> @param</span> filter 过滤器 *<span class="hljs-javadoctag"> @return</span> 目录内容的文件数组。 *<span class="hljs-javadoctag"> @since</span> 1.0 */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> File[] <span class="hljs-title">listAll</span>(File file,
                               javax.swing.filechooser.FileFilter filter) {
    ArrayList list = <span class="hljs-keyword">new</span> ArrayList();
    File[] files;
    <span class="hljs-keyword">if</span> (!file.exists() || file.isFile()) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;
    }
    list(list, file, filter);
    files = <span class="hljs-keyword">new</span> File[list.size()];
    list.toArray(files);
    <span class="hljs-keyword">return</span> files;
  }

  <span class="hljs-javadoc">/** * 将目录中的内容添加到列表。 *<span class="hljs-javadoctag"> @param</span> list 文件列表 *<span class="hljs-javadoctag"> @param</span> filter 过滤器 *<span class="hljs-javadoctag"> @param</span> file 目录 */</span>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">list</span>(ArrayList list, File file,
                           javax.swing.filechooser.FileFilter filter) {
    <span class="hljs-keyword">if</span> (filter.accept(file)) {
      list.add(file);
      <span class="hljs-keyword">if</span> (file.isFile()) {
        <span class="hljs-keyword">return</span>;
      }
    }
    <span class="hljs-keyword">if</span> (file.isDirectory()) {
      File files[] = file.listFiles();
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; files.length; i++) {
        list(list, files[i], filter);
      }
    }

  }

  <span class="hljs-javadoc">/** * 返回文件的URL地址。 *<span class="hljs-javadoctag"> @param</span> file 文件 *<span class="hljs-javadoctag"> @return</span> 文件对应的的URL地址 *<span class="hljs-javadoctag"> @throws</span> MalformedURLException *<span class="hljs-javadoctag"> @since</span> 1.0 *<span class="hljs-javadoctag"> @deprecated</span> 在实现的时候没有注意到File类本身带一个toURL方法将文件路径转换为URL。 * 请使用File.toURL方法。 */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> URL <span class="hljs-title">getURL</span>(File file) <span class="hljs-keyword">throws</span> MalformedURLException {
    String fileURL = <span class="hljs-string">"file:/"</span> + file.getAbsolutePath();
    URL url = <span class="hljs-keyword">new</span> URL(fileURL);
    <span class="hljs-keyword">return</span> url;
  }

  <span class="hljs-javadoc">/** * 从文件路径得到文件名。 *<span class="hljs-javadoctag"> @param</span> filePath 文件的路径，可以是相对路径也可以是绝对路径 *<span class="hljs-javadoctag"> @return</span> 对应的文件名 *<span class="hljs-javadoctag"> @since</span> 1.0 */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">getFileName</span>(String filePath) {
    File file = <span class="hljs-keyword">new</span> File(filePath);
    <span class="hljs-keyword">return</span> file.getName();
  }

  <span class="hljs-javadoc">/** * 从文件名得到文件绝对路径。 *<span class="hljs-javadoctag"> @param</span> fileName 文件名 *<span class="hljs-javadoctag"> @return</span> 对应的文件路径 *<span class="hljs-javadoctag"> @since</span> 1.0 */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">getFilePath</span>(String fileName) {
    File file = <span class="hljs-keyword">new</span> File(fileName);
    <span class="hljs-keyword">return</span> file.getAbsolutePath();
  }

  <span class="hljs-javadoc">/** * 将DOS/Windows格式的路径转换为UNIX/Linux格式的路径。 * 其实就是将路径中的"\"全部换为"/"，因为在某些情况下我们转换为这种方式比较方便， * 某中程度上说"/"比"\"更适合作为路径分隔符，而且DOS/Windows也将它当作路径分隔符。 *<span class="hljs-javadoctag"> @param</span> filePath 转换前的路径 *<span class="hljs-javadoctag"> @return</span> 转换后的路径 *<span class="hljs-javadoctag"> @since</span> 1.0 */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">toUNIXpath</span>(String filePath) {
    <span class="hljs-keyword">return</span> filePath.replace(<span class="hljs-string">'\\'</span>, <span class="hljs-string">'/'</span>);
  }

  <span class="hljs-javadoc">/** * 从文件名得到UNIX风格的文件绝对路径。 *<span class="hljs-javadoctag"> @param</span> fileName 文件名 *<span class="hljs-javadoctag"> @return</span> 对应的UNIX风格的文件路径 *<span class="hljs-javadoctag"> @since</span> 1.0 *<span class="hljs-javadoctag"> @see</span> #toUNIXpath(String filePath) toUNIXpath */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">getUNIXfilePath</span>(String fileName) {
    File file = <span class="hljs-keyword">new</span> File(fileName);
    <span class="hljs-keyword">return</span> toUNIXpath(file.getAbsolutePath());
  }

  <span class="hljs-javadoc">/** * 得到文件的类型。 * 实际上就是得到文件名中最后一个“.”后面的部分。 *<span class="hljs-javadoctag"> @param</span> fileName 文件名 *<span class="hljs-javadoctag"> @return</span> 文件名中的类型部分 *<span class="hljs-javadoctag"> @since</span> 1.0 */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">getTypePart</span>(String fileName) {
    <span class="hljs-keyword">int</span> point = fileName.lastIndexOf(<span class="hljs-string">'.'</span>);
    <span class="hljs-keyword">int</span> length = fileName.length();
    <span class="hljs-keyword">if</span> (point == -<span class="hljs-number">1</span> || point == length - <span class="hljs-number">1</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
    }
    <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> fileName.substring(point + <span class="hljs-number">1</span>, length);
    }
  }

  <span class="hljs-javadoc">/** * 得到文件的类型。 * 实际上就是得到文件名中最后一个“.”后面的部分。 *<span class="hljs-javadoctag"> @param</span> file 文件 *<span class="hljs-javadoctag"> @return</span> 文件名中的类型部分 *<span class="hljs-javadoctag"> @since</span> 1.0 */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">getFileType</span>(File file) {
    <span class="hljs-keyword">return</span> getTypePart(file.getName());
  }

  <span class="hljs-javadoc">/** * 得到文件的名字部分。 * 实际上就是路径中的最后一个路径分隔符后的部分。 *<span class="hljs-javadoctag"> @param</span> fileName 文件名 *<span class="hljs-javadoctag"> @return</span> 文件名中的名字部分 *<span class="hljs-javadoctag"> @since</span> 1.0 */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">getNamePart</span>(String fileName) {
    <span class="hljs-keyword">int</span> point = getPathLsatIndex(fileName);
    <span class="hljs-keyword">int</span> length = fileName.length();
    <span class="hljs-keyword">if</span> (point == -<span class="hljs-number">1</span>) {
      <span class="hljs-keyword">return</span> fileName;
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (point == length - <span class="hljs-number">1</span>) {
      <span class="hljs-keyword">int</span> secondPoint = getPathLsatIndex(fileName, point - <span class="hljs-number">1</span>);
      <span class="hljs-keyword">if</span> (secondPoint == -<span class="hljs-number">1</span>) {
        <span class="hljs-keyword">if</span> (length == <span class="hljs-number">1</span>) {
          <span class="hljs-keyword">return</span> fileName;
        }
        <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">return</span> fileName.substring(<span class="hljs-number">0</span>, point);
        }
      }
      <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> fileName.substring(secondPoint + <span class="hljs-number">1</span>, point);
      }
    }
    <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> fileName.substring(point + <span class="hljs-number">1</span>);
    }
  }

  <span class="hljs-javadoc">/** * 得到文件名中的父路径部分。 * 对两种路径分隔符都有效。 * 不存在时返回""。 * 如果文件名是以路径分隔符结尾的则不考虑该分隔符，例如"/path/"返回""。 *<span class="hljs-javadoctag"> @param</span> fileName 文件名 *<span class="hljs-javadoctag"> @return</span> 父路径，不存在或者已经是父目录时返回"" *<span class="hljs-javadoctag"> @since</span> 1.0 */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">getPathPart</span>(String fileName) {
    <span class="hljs-keyword">int</span> point = getPathLsatIndex(fileName);
    <span class="hljs-keyword">int</span> length = fileName.length();
    <span class="hljs-keyword">if</span> (point == -<span class="hljs-number">1</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (point == length - <span class="hljs-number">1</span>) {
      <span class="hljs-keyword">int</span> secondPoint = getPathLsatIndex(fileName, point - <span class="hljs-number">1</span>);
      <span class="hljs-keyword">if</span> (secondPoint == -<span class="hljs-number">1</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
      }
      <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> fileName.substring(<span class="hljs-number">0</span>, secondPoint);
      }
    }
    <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> fileName.substring(<span class="hljs-number">0</span>, point);
    }
  }

  <span class="hljs-javadoc">/** * 得到路径分隔符在文件路径中首次出现的位置。 * 对于DOS或者UNIX风格的分隔符都可以。 *<span class="hljs-javadoctag"> @param</span> fileName 文件路径 *<span class="hljs-javadoctag"> @return</span> 路径分隔符在路径中首次出现的位置，没有出现时返回-1。 *<span class="hljs-javadoctag"> @since</span> 1.0 */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getPathIndex</span>(String fileName) {
    <span class="hljs-keyword">int</span> point = fileName.indexOf(<span class="hljs-string">'/'</span>);
    <span class="hljs-keyword">if</span> (point == -<span class="hljs-number">1</span>) {
      point = fileName.indexOf(<span class="hljs-string">'\\'</span>);
    }
    <span class="hljs-keyword">return</span> point;
  }

  <span class="hljs-javadoc">/** * 得到路径分隔符在文件路径中指定位置后首次出现的位置。 * 对于DOS或者UNIX风格的分隔符都可以。 *<span class="hljs-javadoctag"> @param</span> fileName 文件路径 *<span class="hljs-javadoctag"> @param</span> fromIndex 开始查找的位置 *<span class="hljs-javadoctag"> @return</span> 路径分隔符在路径中指定位置后首次出现的位置，没有出现时返回-1。 *<span class="hljs-javadoctag"> @since</span> 1.0 */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getPathIndex</span>(String fileName, <span class="hljs-keyword">int</span> fromIndex) {
    <span class="hljs-keyword">int</span> point = fileName.indexOf(<span class="hljs-string">'/'</span>, fromIndex);
    <span class="hljs-keyword">if</span> (point == -<span class="hljs-number">1</span>) {
      point = fileName.indexOf(<span class="hljs-string">'\\'</span>, fromIndex);
    }
    <span class="hljs-keyword">return</span> point;
  }

  <span class="hljs-javadoc">/** * 得到路径分隔符在文件路径中最后出现的位置。 * 对于DOS或者UNIX风格的分隔符都可以。 *<span class="hljs-javadoctag"> @param</span> fileName 文件路径 *<span class="hljs-javadoctag"> @return</span> 路径分隔符在路径中最后出现的位置，没有出现时返回-1。 *<span class="hljs-javadoctag"> @since</span> 1.0 */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getPathLsatIndex</span>(String fileName) {
    <span class="hljs-keyword">int</span> point = fileName.lastIndexOf(<span class="hljs-string">'/'</span>);
    <span class="hljs-keyword">if</span> (point == -<span class="hljs-number">1</span>) {
      point = fileName.lastIndexOf(<span class="hljs-string">'\\'</span>);
    }
    <span class="hljs-keyword">return</span> point;
  }

  <span class="hljs-javadoc">/** * 得到路径分隔符在文件路径中指定位置前最后出现的位置。 * 对于DOS或者UNIX风格的分隔符都可以。 *<span class="hljs-javadoctag"> @param</span> fileName 文件路径 *<span class="hljs-javadoctag"> @param</span> fromIndex 开始查找的位置 *<span class="hljs-javadoctag"> @return</span> 路径分隔符在路径中指定位置前最后出现的位置，没有出现时返回-1。 *<span class="hljs-javadoctag"> @since</span> 1.0 */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getPathLsatIndex</span>(String fileName, <span class="hljs-keyword">int</span> fromIndex) {
    <span class="hljs-keyword">int</span> point = fileName.lastIndexOf(<span class="hljs-string">'/'</span>, fromIndex);
    <span class="hljs-keyword">if</span> (point == -<span class="hljs-number">1</span>) {
      point = fileName.lastIndexOf(<span class="hljs-string">'\\'</span>, fromIndex);
    }
    <span class="hljs-keyword">return</span> point;
  }

  <span class="hljs-javadoc">/** * 将文件名中的类型部分去掉。 *<span class="hljs-javadoctag"> @param</span> filename 文件名 *<span class="hljs-javadoctag"> @return</span> 去掉类型部分的结果 *<span class="hljs-javadoctag"> @since</span> 1.0 */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">trimType</span>(String filename) {
    <span class="hljs-keyword">int</span> index = filename.lastIndexOf(<span class="hljs-string">"."</span>);
    <span class="hljs-keyword">if</span> (index != -<span class="hljs-number">1</span>) {
      <span class="hljs-keyword">return</span> filename.substring(<span class="hljs-number">0</span>, index);
    }
    <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> filename;
    }
  }
  <span class="hljs-javadoc">/** * 得到相对路径。 * 文件名不是目录名的子节点时返回文件名。 *<span class="hljs-javadoctag"> @param</span> pathName 目录名 *<span class="hljs-javadoctag"> @param</span> fileName 文件名 *<span class="hljs-javadoctag"> @return</span> 得到文件名相对于目录名的相对路径，目录下不存在该文件时返回文件名 *<span class="hljs-javadoctag"> @since</span> 1.0 */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">getSubpath</span>(String pathName,String fileName) {
    <span class="hljs-keyword">int</span> index = fileName.indexOf(pathName);
    <span class="hljs-keyword">if</span> (index != -<span class="hljs-number">1</span>) {
      <span class="hljs-keyword">return</span> fileName.substring(index + pathName.length() + <span class="hljs-number">1</span>);
    }
    <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> fileName;
    }
  }

  <span class="hljs-javadoc">/** * 检查给定目录的存在性 * 保证指定的路径可用，如果指定的路径不存在，那么建立该路径，可以为多级路径 *<span class="hljs-javadoctag"> @param</span> path *<span class="hljs-javadoctag"> @return</span> 真假值 *<span class="hljs-javadoctag"> @since</span> 1.0 */</span>
   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">pathValidate</span>(String path)
   {
     <span class="hljs-comment">//String path="d:/web/www/sub";</span>
     <span class="hljs-comment">//System.out.println(path);</span>
     <span class="hljs-comment">//path = getUNIXfilePath(path);</span>

     <span class="hljs-comment">//path = ereg_replace("^\\/+", "", path);</span>
     <span class="hljs-comment">//path = ereg_replace("\\/+$", "", path);</span>
     String[] arraypath = path.split(<span class="hljs-string">"/"</span>);
     String tmppath = <span class="hljs-string">""</span>;
     <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; arraypath.length; i++)
     {
       tmppath += <span class="hljs-string">"/"</span> + arraypath[i];
       File d = <span class="hljs-keyword">new</span> File(tmppath.substring(<span class="hljs-number">1</span>));
       <span class="hljs-keyword">if</span> (!d.exists()) { <span class="hljs-comment">//检查Sub目录是否存在</span>
           System.out.println(tmppath.substring(<span class="hljs-number">1</span>));
         <span class="hljs-keyword">if</span> (!d.mkdir())
         {
           <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
         }
       }
     }
     <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
   }

   <span class="hljs-javadoc">/** * 读取文件的内容 * 读取指定文件的内容 *<span class="hljs-javadoctag"> @param</span> path 为要读取文件的绝对路径 *<span class="hljs-javadoctag"> @return</span> 以行读取文件后的内容。 *<span class="hljs-javadoctag"> @since</span> 1.0 */</span>
   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String <span class="hljs-title">getFileContent</span>(String path) <span class="hljs-keyword">throws</span> IOException
   {
     String filecontent = <span class="hljs-string">""</span>;
     <span class="hljs-keyword">try</span> {
       File f = <span class="hljs-keyword">new</span> File(path);
       <span class="hljs-keyword">if</span> (f.exists()) {
         FileReader fr = <span class="hljs-keyword">new</span> FileReader(path);
         BufferedReader br = <span class="hljs-keyword">new</span> BufferedReader(fr); <span class="hljs-comment">//建立BufferedReader对象，并实例化为br</span>
         String line = br.readLine(); <span class="hljs-comment">//从文件读取一行字符串</span>
         <span class="hljs-comment">//判断读取到的字符串是否不为空</span>
         <span class="hljs-keyword">while</span> (line != <span class="hljs-keyword">null</span>) {
           filecontent += line + <span class="hljs-string">"\n"</span>;
           line = br.readLine(); <span class="hljs-comment">//从文件中继续读取一行数据</span>
         }
         br.close(); <span class="hljs-comment">//关闭BufferedReader对象</span>
         fr.close(); <span class="hljs-comment">//关闭文件</span>
       }

     }
     <span class="hljs-keyword">catch</span> (IOException e) {
       <span class="hljs-keyword">throw</span> e;
     }
     <span class="hljs-keyword">return</span> filecontent;
   }

   <span class="hljs-javadoc">/** * 根据内容生成文件 *<span class="hljs-javadoctag"> @param</span> path要生成文件的绝对路径， *<span class="hljs-javadoctag"> @param</span> 文件的内容。 *<span class="hljs-javadoctag"> @return</span> 真假值 *<span class="hljs-javadoctag"> @since</span> 1.0 */</span>
   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">genModuleTpl</span>(String path, String modulecontent)  <span class="hljs-keyword">throws</span> IOException
   {

     path = getUNIXfilePath(path);
     String[] patharray = path.split(<span class="hljs-string">"\\/"</span>);
     String modulepath = <span class="hljs-string">""</span>;
     <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; patharray.length - <span class="hljs-number">1</span>; i++) {
       modulepath += <span class="hljs-string">"/"</span> + patharray[i];
     }
     File d = <span class="hljs-keyword">new</span> File(modulepath.substring(<span class="hljs-number">1</span>));
     <span class="hljs-keyword">if</span> (!d.exists()) {
       <span class="hljs-keyword">if</span> (!pathValidate(modulepath.substring(<span class="hljs-number">1</span>))) {
         <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
       }
     }
     <span class="hljs-keyword">try</span> {
       FileWriter fw = <span class="hljs-keyword">new</span> FileWriter(path); <span class="hljs-comment">//建立FileWriter对象，并实例化fw</span>
       <span class="hljs-comment">//将字符串写入文件</span>
       fw.write(modulecontent);
       fw.close();
     }
     <span class="hljs-keyword">catch</span> (IOException e) {
       <span class="hljs-keyword">throw</span> e;
     }
     <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
   }

   <span class="hljs-javadoc">/** * 获取图片文件的扩展名（发布系统专用） *<span class="hljs-javadoctag"> @param</span> picname 为图片名称加上前面的路径不包括扩展名 *<span class="hljs-javadoctag"> @return</span> 图片的扩展名 *<span class="hljs-javadoctag"> @since</span> 1.0 */</span>
   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String <span class="hljs-title">getPicExtendName</span>(String pic_path)
   {
     pic_path = getUNIXfilePath(pic_path);
     String pic_extend = <span class="hljs-string">""</span>;
     <span class="hljs-keyword">if</span> (isFileExist(pic_path + <span class="hljs-string">".gif"</span>))
     {
       pic_extend = <span class="hljs-string">".gif"</span>;
     }
     <span class="hljs-keyword">if</span> (isFileExist(pic_path + <span class="hljs-string">".jpeg"</span>))
     {
       pic_extend = <span class="hljs-string">".jpeg"</span>;
     }
     <span class="hljs-keyword">if</span> (isFileExist(pic_path + <span class="hljs-string">".jpg"</span>))
     {
       pic_extend = <span class="hljs-string">".jpg"</span>;
     }
     <span class="hljs-keyword">if</span> (isFileExist(pic_path + <span class="hljs-string">".png"</span>))
     {
       pic_extend = <span class="hljs-string">".png"</span>;
     }
     <span class="hljs-keyword">return</span> pic_extend; <span class="hljs-comment">//返回图片扩展名</span>
   }
   <span class="hljs-comment">//拷贝文件</span>
   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">CopyFile</span>(File in, File out) <span class="hljs-keyword">throws</span> Exception {
       <span class="hljs-keyword">try</span> {
           FileInputStream fis = <span class="hljs-keyword">new</span> FileInputStream(in);
           FileOutputStream fos = <span class="hljs-keyword">new</span> FileOutputStream(out);
           <span class="hljs-keyword">byte</span>[] buf = <span class="hljs-keyword">new</span> <span class="hljs-keyword">byte</span>[<span class="hljs-number">1024</span>];
           <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;
           <span class="hljs-keyword">while</span> ((i = fis.read(buf)) != -<span class="hljs-number">1</span>) {
               fos.write(buf, <span class="hljs-number">0</span>, i);
           }
           fis.close();
           fos.close();
           <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
       } <span class="hljs-keyword">catch</span> (IOException ie) {
           ie.printStackTrace();
           <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
       }
   }
   <span class="hljs-comment">//拷贝文件</span>
   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">CopyFile</span>(String infile, String outfile) <span class="hljs-keyword">throws</span> Exception {
       <span class="hljs-keyword">try</span> {
           File in = <span class="hljs-keyword">new</span> File(infile);
           File out = <span class="hljs-keyword">new</span> File(outfile);
           <span class="hljs-keyword">return</span> CopyFile(in, out);
       } <span class="hljs-keyword">catch</span> (IOException ie) {
           ie.printStackTrace();
           <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
       }

   }
   <span class="hljs-javadoc">/** * 计算图片数量 *<span class="hljs-javadoctag"> @param</span> id *<span class="hljs-javadoctag"> @param</span> dtime *<span class="hljs-javadoctag"> @return</span> */</span>
   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> <span class="hljs-title">countPics</span>(String id,String dtime,String extensions){
       <span class="hljs-keyword">int</span> counts = <span class="hljs-number">0</span>; 

       MyFileFilter mfilter = <span class="hljs-keyword">new</span> MyFileFilter(extensions.split(<span class="hljs-string">","</span>));
       PropsUtil pu = <span class="hljs-keyword">new</span> PropsUtil();
       String PICROOT = pu.readSingleProps(<span class="hljs-string">"DestinationsPICROOT"</span>).trim();
       String path = PICROOT + <span class="hljs-string">"/"</span>+dtime.substring(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>) + <span class="hljs-string">"/"</span>;
       File lfile = <span class="hljs-keyword">new</span> File(path);
       String filename;
       <span class="hljs-keyword">if</span>(lfile.isDirectory()){
           File[] files = lfile.listFiles(mfilter);
           <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;files.length;i++){
               filename = files[i].getName();
               <span class="hljs-keyword">if</span>((filename.indexOf(id + <span class="hljs-string">"_"</span>)==<span class="hljs-number">0</span>)&amp;&amp;(filename.indexOf(<span class="hljs-string">"_small"</span>)&gt;-<span class="hljs-number">1</span>))
                   counts ++;
           }
           files = <span class="hljs-keyword">null</span>;
       }
       filename = <span class="hljs-keyword">null</span>;
       lfile = <span class="hljs-keyword">null</span>;
       pu = <span class="hljs-keyword">null</span>;
       mfilter = <span class="hljs-keyword">null</span>;

       <span class="hljs-keyword">return</span> counts;
   }

}
</code></pre>
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
