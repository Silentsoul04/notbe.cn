<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>.NET插件系统之二——不实例化获取插件信息和可视化方法 « NotBeCN</title>
  <meta name="description" content="                        &nbsp;面临的问题         &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;在开发插件系统中，我们通常会面临这样的问题：          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 一些功能并不是在开启时就要...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/01/30/weixin_34082177_90131539.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">.NET插件系统之二——不实例化获取插件信息和可视化方法</h1>
    <p class="post-meta">Jan 30, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <div class="blogpost-body"> 
    <ol>
     <li> <p><span style="font-size:14px;">&nbsp;面临的问题</span></p> </li>
    </ol>
    <p><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;在开发插件系统中，我们通常会面临这样的问题：</span></p> 
    <ul>
     <li><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 一些功能并不是在开启时就要被使用的，例如VS中的大量功能对一个大部分程序员来说用不着，但框架本身却应该向用户提供该插件的相应信息？</span></li> 
     <li><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在可视化的插件功能列表中，我们不仅希望提供简单的插件名称信息，更希望能以图片，或动画等形式展示其功能特性，便于用户选择。</span></li> 
     <li><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 插入辅助类来解决上一个问题？&nbsp;想法虽好，但破坏了“插件”的精髓，它应该是独立可插拔的，如果存在其之外的辅助类，那真是得不偿失。</span></li> 
    </ul>
    <p><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 据我所知，.NET的MEF插件系统提供了完整的插件系统框架，但可定制化程度不高。 一些插件功能是不需要每次都调用的，如果实例化所有的插件会带来很大的资源开销，而且不方便管理。因此本文将通过一些技巧，实现本文标题的目标：不实例化获取插件信息和可视化方法。我的项目本身是基于WPF的，但基本不影响整个文章的通用性。</span></p> 
    <p><span style="font-size:14px;">&nbsp;&nbsp;&nbsp; 如果想了解更多关于作者对本问题早期的思考，请看&nbsp; 我<a href="http://www.cnblogs.com/buptzym/archive/2011/12/09/2282746.html" rel="nofollow">上一篇关于.NET插件系统的文章。</a></span></p> 
    <p><span style="font-size:14px;">&nbsp;&nbsp; 2.&nbsp; 改造attribute,提供类信息的方法</span></p> 
    <p><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="http://msdn.microsoft.com/zh-cn/library/system.attribute(v=VS.80).aspx" rel="nofollow">attribute</a>&nbsp;即可以应用于编程元素（如类型、字段、方法和属性 (Property)）的描述性声明。属性与 .NET Framework 文件的元数据一起保存，并且可用于向公共语言运行时描述代码或影响应用程序的运行时行为。</span></p> 
    <p><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过继承atrribute，扩展我们想要获得的使用方法，我们可以通过<strong>自定义两类attribute:</strong></span></p> 
    <p><span style="font-size:14px;"><strong>&nbsp;　　&nbsp;一类是针对插件接口名称的定义，</strong>用于定义插件接口的名称，搜索方法等&nbsp;&nbsp;</span></p> 
    <p><span style="font-size:14px;">　　</span></p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy"><img alt="复制代码" src="http://common.cnblogs.com/images/copycode.gif"></span>
     </div> 
     <pre><span style="color:#008080;"> 1</span>  <span style="color:#808080;">///</span> <span style="color:#808080;">&lt;summary&gt;</span>
<span style="color:#008080;"> 2</span>     <span style="color:#808080;">///</span><span style="color:#008000;"> 执行搜索策略
</span><span style="color:#008080;"> 3</span>     <span style="color:#808080;">///</span> <span style="color:#808080;">&lt;/summary&gt;</span>
<span style="color:#008080;"> 4</span>     <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">enum</span> SearchStrategy
<span style="color:#008080;"> 5</span>     {
<span style="color:#008080;"> 6</span>        
<span style="color:#008080;"> 7</span>         <span style="color:#808080;">///</span> <span style="color:#808080;">&lt;summary&gt;</span>
<span style="color:#008080;"> 8</span>         <span style="color:#808080;">///</span><span style="color:#008000;"> 目录内搜索
</span><span style="color:#008080;"> 9</span>         <span style="color:#808080;">///</span> <span style="color:#808080;">&lt;/summary&gt;</span>
<span style="color:#008080;">10</span>         FolderSearch,
<span style="color:#008080;">11</span>         <span style="color:#808080;">///</span> <span style="color:#808080;">&lt;summary&gt;</span>
<span style="color:#008080;">12</span>         <span style="color:#808080;">///</span><span style="color:#008000;"> 目录内递归搜索
</span><span style="color:#008080;">13</span>         <span style="color:#808080;">///</span> <span style="color:#808080;">&lt;/summary&gt;</span>
<span style="color:#008080;">14</span>         RecursiveFolderSearch,
<span style="color:#008080;">15</span>     }
<span style="color:#008080;">16</span>     <span style="color:#808080;">///</span> <span style="color:#808080;">&lt;summary&gt;</span>
<span style="color:#008080;">17</span>     <span style="color:#808080;">///</span><span style="color:#008000;"> 该类定义了插件系统的接口契约记录
</span><span style="color:#008080;">18</span>     <span style="color:#808080;">///</span> <span style="color:#808080;">&lt;/summary&gt;</span>
<span style="color:#008080;">19</span> 
<span style="color:#008080;">20</span>     <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">class</span> InterfaceAttribute : Attribute     
<span style="color:#008080;">21</span>     {
<span style="color:#008080;">22</span>         <span style="color:#808080;">///</span> <span style="color:#808080;">&lt;summary&gt;</span>
<span style="color:#008080;">23</span>         <span style="color:#808080;">///</span><span style="color:#008000;"> 该插件接口的名称
</span><span style="color:#008080;">24</span>         <span style="color:#808080;">///</span> <span style="color:#808080;">&lt;/summary&gt;</span>
<span style="color:#008080;">25</span>         <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">string</span> myName { <span style="color:#0000ff;">get</span>; <span style="color:#0000ff;">set</span>; }
<span style="color:#008080;">26</span> 
<span style="color:#008080;">27</span>         <span style="color:#808080;">///</span> <span style="color:#808080;">&lt;summary&gt;</span>
<span style="color:#008080;">28</span>         <span style="color:#808080;">///</span><span style="color:#008000;"> 搜索策略
</span><span style="color:#008080;">29</span>         <span style="color:#808080;">///</span> <span style="color:#808080;">&lt;/summary&gt;</span>
<span style="color:#008080;">30</span>         <span style="color:#0000ff;">public</span> SearchStrategy mySearchStrategy { <span style="color:#0000ff;">get</span>; <span style="color:#0000ff;">set</span>; }
<span style="color:#008080;">31</span> 
<span style="color:#008080;">32</span> 
<span style="color:#008080;">33</span>         <span style="color:#808080;">///</span> <span style="color:#808080;">&lt;summary&gt;</span>
<span style="color:#008080;">34</span>         <span style="color:#808080;">///</span><span style="color:#008000;"> 相关信息
</span><span style="color:#008080;">35</span>         <span style="color:#808080;">///</span> <span style="color:#808080;">&lt;/summary&gt;</span>
<span style="color:#008080;">36</span>         <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">string</span> DetailInfo { <span style="color:#0000ff;">get</span>; <span style="color:#0000ff;">set</span>; }
<span style="color:#008080;">37</span> 
<span style="color:#008080;">38</span>        
<span style="color:#008080;">39</span>         <span style="color:#0000ff;">public</span> InterfaceAttribute(<span style="color:#0000ff;">string</span> thisName, <span style="color:#0000ff;">string</span> thisDetailInfo, SearchStrategy thisSearchStrategy)
<span style="color:#008080;">40</span>         <span style="color:#008000;">//</span><span style="color:#008000;"> 定位参数</span>
<span style="color:#008080;">41</span>         {
<span style="color:#008080;">42</span>            
<span style="color:#008080;">43</span>             <span style="color:#0000ff;">this</span>.myName = thisName;
<span style="color:#008080;">44</span>             <span style="color:#0000ff;">this</span>.DetailInfo = thisDetailInfo;
<span style="color:#008080;">45</span>             <span style="color:#0000ff;">this</span>.mySearchStrategy = thisSearchStrategy;
<span style="color:#008080;">46</span>         
<span style="color:#008080;">47</span> 
<span style="color:#008080;">48</span>         }
<span style="color:#008080;">49</span>     }</pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy"><img alt="复制代码" src="http://common.cnblogs.com/images/copycode.gif"></span>
     </div> 
    </div> 
    <p>&nbsp;</p> 
    <p>&nbsp;</p> 
    <p><span style="font-size:14px;">&nbsp;<strong>&nbsp;</strong>&nbsp;&nbsp;&nbsp;<strong>&nbsp; 另一类是定义实现接口的插件的规约</strong>，定义插件的名称，信息和接口约束</span></p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy"><img alt="复制代码" src="http://common.cnblogs.com/images/copycode.gif"></span>
     </div> 
     <pre><span style="font-size:14px;">   <span style="color:#808080;">///</span> <span style="color:#808080;">&lt;summary&gt;</span><span style="color:#008000;"><br></span><span style="color:#808080;">///</span><span style="color:#008000;"> 自定义的Attribute,可在框架中提供程序集名称等信息<br></span><span style="color:#808080;">///</span> <span style="color:#808080;">&lt;/summary&gt;</span><span style="color:#808080;"><br></span>    <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">class</span> XFrmWorkAttribute : Attribute                   <span style="color:#008000;">//</span><span style="color:#008000;"> 必需以System.Attribute类为基类</span><span style="color:#008000;"><br></span>    {</span><br><br><span style="font-size:14px;">        <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">string</span> DetailInfo     <span style="color:#008000;">//</span><span style="color:#008000;">提供该类的详细文字性说明</span><span style="color:#008000;"><br></span>        {</span><br><span style="font-size:14px;">            <span style="color:#0000ff;">get</span>;</span><br><span style="font-size:14px;">            <span style="color:#0000ff;">set</span>;</span><br><span style="font-size:14px;">        }</span><br><br><span style="font-size:14px;">        <span style="color:#0000ff;">private</span> <span style="color:#0000ff;">string</span> mainKind;</span><br><span style="font-size:14px;">        <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">string</span> MainKind    <span style="color:#008000;">//</span><span style="color:#008000;">该类类别</span><span style="color:#008000;"><br></span>        {</span><br><span style="font-size:14px;">            <span style="color:#0000ff;">get</span> { <span style="color:#0000ff;">return</span> mainKind; }</span><br><span style="font-size:14px;">            <span style="color:#0000ff;">set</span> { mainKind = value; }</span><br><span style="font-size:14px;">        }</span><br><br><br><span style="font-size:14px;">        <span style="color:#0000ff;">private</span> <span style="color:#0000ff;">string</span> name;   </span><br><span style="font-size:14px;">        <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">string</span> Name  <span style="color:#008000;">//</span><span style="color:#008000;">提供类名称</span><span style="color:#008000;"><br></span>        {</span><br><span style="font-size:14px;">            <span style="color:#0000ff;">get</span> { <span style="color:#0000ff;">return</span> name; }</span><br><span style="font-size:14px;">            <span style="color:#0000ff;">set</span> { name = value; }</span><br><span style="font-size:14px;">        }</span><br><span style="font-size:14px;">        <span style="color:#0000ff;">private</span> <span style="color:#0000ff;">string</span> myresource;</span><br><span style="font-size:14px;">        <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">string</span> myResource   <span style="color:#008000;">//</span><span style="color:#008000;">提供资源名称</span><span style="color:#008000;"><br></span>        {</span><br><span style="font-size:14px;">            <span style="color:#0000ff;">get</span> { <span style="color:#0000ff;">return</span> myresource; }</span><br><span style="font-size:14px;">            <span style="color:#0000ff;">set</span> { myresource = value; }</span><br><span style="font-size:14px;">        }</span><br><br><span style="font-size:14px;">        <span style="color:#008000;">//</span><span style="color:#008000;"> 值为null的string是危险的，所以必需在构造函数中赋值</span><span style="color:#008000;"><br></span>        <span style="color:#0000ff;">public</span> XFrmWorkAttribute(<span style="color:#0000ff;">string</span> thisName, <span style="color:#0000ff;">string</span> thisKind, <span style="color:#0000ff;">string</span> thisDetailType)</span><br><span style="font-size:14px;">        <span style="color:#008000;">//</span><span style="color:#008000;"> 定位参数</span><span style="color:#008000;"><br></span>        {</span><br><span style="font-size:14px;">            <span style="color:#0000ff;">this</span>.MainKind = thisKind;</span><br><span style="font-size:14px;">            <span style="color:#0000ff;">this</span>.Name = thisName;</span><br><span style="font-size:14px;">            <span style="color:#0000ff;">this</span>.DetailInfo = thisDetailType;</span><br><span style="font-size:14px;">        }</span><br><span style="font-size:14px;">        <span style="color:#008000;">//</span><span style="color:#008000;"> 值为null的string是危险的，所以必需在构造函数中赋值</span><span style="color:#008000;"><br></span>        <span style="color:#0000ff;">public</span> XFrmWorkAttribute(<span style="color:#0000ff;">string</span> thisName, <span style="color:#0000ff;">string</span> thisKind, <span style="color:#0000ff;">string</span> thisDetailType, <span style="color:#0000ff;">string</span> thisResource)</span><br><span style="font-size:14px;">        <span style="color:#008000;">//</span><span style="color:#008000;"> 定位参数</span><span style="color:#008000;"><br></span>        {</span><br><span style="font-size:14px;">            <span style="color:#0000ff;">this</span>.MainKind = thisKind;</span><br><span style="font-size:14px;">            <span style="color:#0000ff;">this</span>.Name = thisName;</span><br><span style="font-size:14px;">            <span style="color:#0000ff;">this</span>.DetailInfo = thisDetailType;</span><br><span style="font-size:14px;">            <span style="color:#0000ff;">this</span>.myresource = thisResource;</span><br><span style="font-size:14px;">        }</span><br><span style="font-size:14px;">    }</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy"><img alt="复制代码" src="http://common.cnblogs.com/images/copycode.gif"></span>
     </div> 
    </div> 
    <p><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;自定义可由项目需求进行，具体请参考相关文档，此处并不打算具体说明。本定义中，MainKind字段用于存储该插件类型，这在一些搜索方法中是必要的。&nbsp; 而myResource字段可保存当前类的资源URI。这在WPF程序中尤为有效，在程序集中可嵌入图形，音乐甚至视频资源，可提供更好的用户体验。&nbsp;而DetailInfo字段可保存对该插件的一些文字性描述。</span><br><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;下面展示该attribute的使用方法</span></p> 
    <p>&nbsp;</p> 
    <div class="cnblogs_code"> 
     <span style="font-size:14px;"><img class="code_img_closed" alt="" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif"><img class="code_img_opened" alt="" src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif"><span class="cnblogs_code_collapse">类attribute使用实例</span></span> 
     <div class="cnblogs_code_hide">
      <pre><span style="font-size:14px;"><span style="color:#008080;">1</span>   [XFrmWorkAttribute(<span style="color:#800000;">"</span><span style="color:#800000;">Unity3D控制器</span><span style="color:#800000;">"</span>, <span style="color:#800000;">"</span><span style="color:#800000;">IProgramWPF</span><span style="color:#800000;">"</span>, <span style="color:#800000;">"</span><span style="color:#800000;">针对Unity3D的游戏编程接口</span><span style="color:#800000;">"</span>, <span style="color:#800000;">"</span><span style="color:#800000;">/XFrmWork.XMove.Program;component/Images/Unity3D控制器.jpg</span><span style="color:#800000;">"</span>)]</span><br><span style="font-size:14px;"><span style="color:#008080;">2</span>     <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">partial</span> <span style="color:#0000ff;">class</span> Unity3DController : UserControl,IProgramWPF,IProgramUI</span><br><span style="font-size:14px;"><span style="color:#008080;">3</span> {</span><br><span style="font-size:14px;"><span style="color:#008080;">4</span>    <span style="color:#008000;">//</span><span style="color:#008000;">类方法代码</span><span style="color:#008000;"><br></span><span style="color:#008080;">5</span> } </span></pre>
     </div> 
    </div> 
    <p><span style="font-size:14px;">&nbsp;</span></p> 
    <p><span style="font-size:14px;">&nbsp;&nbsp;&nbsp; 其四个构造函数的参数分别是：名称，类型（一般是实现的接口），类说明，资源名称。</span></p> 
    <p><span style="font-size:14px;">&nbsp;&nbsp; 3.&nbsp; 主程序框架动态查找可用插件的方法&nbsp;&nbsp;</span></p> 
    <p><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp; 主程序框架如何获知当前插件的定制信息，并在需要的时候实例化呢？&nbsp;我们将保存插件实现的atrribute标识，需要特别注意的是Type:&nbsp; 我们在此处存储了该类的Type,使得能在需要的时候实例化之。&nbsp;&nbsp;&nbsp;</span></p> 
    <p><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 那么，如何执行插件搜索呢？&nbsp; 网上已经有大量的说明和介绍。&nbsp; 不外乎是搜索某一程序集，获取所有类型Type，并查询其是否实现了某类接口。&nbsp;&nbsp;但当工程中有不止一种插件类型时，我们就该考虑实现代码复用：</span></p> 
    <p><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;可以定义一个特殊的类SingletonProvider，考虑到该类功能较为固定，采用单例模式实现。&nbsp;&nbsp; 在内部，给出了一个静态字典和两个静态方法：</span></p> 
    <ul>
     <li><span style="font-size:14px;">&nbsp;<span style="color:#0000ff;">static</span> Dictionary&lt;<span style="color:#0000ff;">string</span>, ObservableCollection&lt;ObjectBasicInfo&gt;&gt; myObjectBasicInfoDictionary： 插件字典：使用可通知集合ObservableCollection作为字典值，字典Key是接口名称（再次声明，此接口非一般意义上的接口，而是某种对插件分类的某种定义或约束，当然，可以使用C#的接口实现） 使用ObservableCollection仅仅是因为它在集合项目更改时可提供通知，方便WPF的数据绑定，如果不需要此项，你完全可以修改成你想要的集合类型如List</span></li> 
     <li><span style="font-size:14px;"><span style="color:#0000ff;">public</span> <span style="color:#0000ff;">static</span> ObservableCollection&lt;ObjectBasicInfo&gt; GetInstance(<span style="color:#0000ff;">string</span> interfaceName) ：&nbsp; 查询被某种接口约束的所有插件方法：</span></li> 
    </ul>
    <p><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 具体信息可以查看具体代码， 当字典中已经存在该接口插件集合，则直接返回结果，否则执行查询。需要注意：Assembly assembly = Assembly.GetCallingAssembly(); 可获得当前被调用的程序集，<strong>这就保证了查找不同接口时是在保存当前插件程序集的dll上动态执行的，这点非常重要，就可不用提供程序集名称。</strong>&nbsp;&nbsp; 另外，当找到某一满足需求的Type时，就可以查找当前type所有的attribute，并获取信息所有保存至字典中。&nbsp; 在下次调用同样接口的插件列表时，就可以不用再次执行查找。</span></p> 
    <ul>
     <li><span style="font-size:14px;">&nbsp;<span style="color:#0000ff;">public</span> <span style="color:#0000ff;">static</span> Object GetObjectInstance(<span style="color:#0000ff;">string</span> interfaceName, <span style="color:#0000ff;">int</span> index)&nbsp;封装了的反射实例化方法。 类型参数是接口名称和在插件列表中的位置，为了简化， 类的构造函数必须是没有形参的。&nbsp;</span></li>
    </ul>
    <p><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;下面的代码做了详细的说明：&nbsp;&nbsp;&nbsp;</span></p> 
    <div class="cnblogs_code"> 
     <span style="font-size:14px;"><img class="code_img_closed" alt="" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif"><img class="code_img_opened" alt="" src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif"><span class="cnblogs_code_collapse">插件搜索器</span></span> 
     <div class="cnblogs_code_hide">
      <pre><span style="font-size:14px;"><span style="color:#008080;"> 1</span>   <span style="color:#808080;">///</span> <span style="color:#808080;">&lt;summary&gt;</span><span style="color:#008000;"><br></span><span style="color:#008080;"> 2</span> <span style="color:#808080;">///</span><span style="color:#008000;"> 该类定义了插件系统通过attribute记录的类基本信息<br></span><span style="color:#008080;"> 3</span> <span style="color:#808080;">///</span> <span style="color:#808080;">&lt;/summary&gt;</span><span style="color:#808080;"><br></span><span style="color:#008080;"> 4</span>     <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">class</span> ObjectBasicInfo</span><br><span style="font-size:14px;"><span style="color:#008080;"> 5</span>     {</span><br><span style="font-size:14px;"><span style="color:#008080;"> 6</span>         <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">string</span> myLogoURL { <span style="color:#0000ff;">get</span>; <span style="color:#0000ff;">set</span>; }</span><br><span style="font-size:14px;"><span style="color:#008080;"> 7</span>         <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">string</span> myName { <span style="color:#0000ff;">get</span>; <span style="color:#0000ff;">set</span>; }</span><br><span style="font-size:14px;"><span style="color:#008080;"> 8</span>         <span style="color:#0000ff;">public</span> Type myType { <span style="color:#0000ff;">get</span>; <span style="color:#0000ff;">set</span>; }</span><br><span style="font-size:14px;"><span style="color:#008080;"> 9</span>         <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">string</span> myDetail { <span style="color:#0000ff;">get</span>; <span style="color:#0000ff;">set</span>; }</span><br><span style="font-size:14px;"><span style="color:#008080;">10</span>     }</span><br><span style="font-size:14px;"><span style="color:#008080;">11</span>     <span style="color:#808080;">///</span> <span style="color:#808080;">&lt;summary&gt;</span><span style="color:#008000;"><br></span><span style="color:#008080;">12</span> <span style="color:#808080;">///</span><span style="color:#008000;"> 单例模式提供的插件搜索器<br></span><span style="color:#008080;">13</span> <span style="color:#808080;">///</span> <span style="color:#808080;">&lt;/summary&gt;</span><span style="color:#808080;"><br></span><span style="color:#008080;">14</span>     <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">class</span> SingletonProvider</span><br><span style="font-size:14px;"><span style="color:#008080;">15</span>     {</span><br><span style="font-size:14px;"><span style="color:#008080;">16</span>         SingletonProvider()</span><br><span style="font-size:14px;"><span style="color:#008080;">17</span>         {</span><br><span style="font-size:14px;"><span style="color:#008080;">18</span>         }</span><br><span style="font-size:14px;"><span style="color:#008080;">19</span>         <span style="color:#0000ff;">static</span> Dictionary&lt;<span style="color:#0000ff;">string</span>, ObservableCollection&lt;ObjectBasicInfo&gt;&gt; myObjectBasicInfoDictionary = <span style="color:#0000ff;">new</span> Dictionary&lt;<span style="color:#0000ff;">string</span>, ObservableCollection&lt;ObjectBasicInfo&gt;&gt;();</span><br><span style="color:#008080;font-size:14px;">20 </span><br><span style="font-size:14px;"><span style="color:#008080;">21</span>         <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">static</span> Object GetObjectInstance(<span style="color:#0000ff;">string</span> interfaceName, <span style="color:#0000ff;">int</span> index)</span><br><span style="font-size:14px;"><span style="color:#008080;">22</span>         {</span><br><span style="font-size:14px;"><span style="color:#008080;">23</span>             <span style="color:#0000ff;">return</span> Activator.CreateInstance(GetInstance(interfaceName)[index].myType);   </span><br><span style="font-size:14px;"><span style="color:#008080;">24</span>         }</span><br><span style="font-size:14px;"><span style="color:#008080;">25</span>         <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">static</span> ObservableCollection&lt;ObjectBasicInfo&gt; GetInstance(<span style="color:#0000ff;">string</span> interfaceName)</span><br><span style="font-size:14px;"><span style="color:#008080;">26</span>         {</span><br><span style="font-size:14px;"><span style="color:#008080;">27</span>             <span style="color:#0000ff;">if</span> (myObjectBasicInfoDictionary.ContainsKey(interfaceName))  //如果字典中存在该方法，则直接返回结果</span><br><span style="font-size:14px;"><span style="color:#008080;">28</span>                 <span style="color:#0000ff;">return</span> myObjectBasicInfoDictionary[interfaceName];</span><br><span style="font-size:14px;"><span style="color:#008080;">29</span>             <span style="color:#0000ff;">else</span></span><br><span style="font-size:14px;"><span style="color:#008080;">30</span>             {</span><br><span style="color:#008080;font-size:14px;">31 </span><br><span style="font-size:14px;"><span style="color:#008080;">32</span>                 ObservableCollection&lt;ObjectBasicInfo&gt; tc = <span style="color:#0000ff;">new</span> ObservableCollection&lt;ObjectBasicInfo&gt;();  //执行查找方法</span><br><span style="color:#008080;font-size:14px;">33 </span><br><span style="font-size:14px;"><span style="color:#008080;">34</span>                 Assembly assembly = Assembly.GetCallingAssembly();</span><br><span style="font-size:14px;"><span style="color:#008080;">35</span>                 Type[] types = assembly.GetTypes();</span><br><span style="font-size:14px;"><span style="color:#008080;">36</span>                 <span style="color:#0000ff;">foreach</span> (Type type <span style="color:#0000ff;">in</span> types)</span><br><span style="font-size:14px;"><span style="color:#008080;">37</span>                 {</span><br><span style="font-size:14px;"><span style="color:#008080;">38</span>                     <span style="color:#0000ff;">if</span> (type.GetInterface(interfaceName) != <span style="color:#0000ff;">null</span> &amp;&amp; !type.IsAbstract)</span><br><span style="font-size:14px;"><span style="color:#008080;">39</span>                     {</span><br><span style="color:#008080;font-size:14px;">40 </span><br><span style="color:#008080;font-size:14px;">41 </span><br><span style="font-size:14px;"><span style="color:#008080;">42</span>                         <span style="color:#008000;">//</span><span style="color:#008000;"> Iterate through all the Attributes for each method.</span><span style="color:#008000;"><br></span><span style="color:#008080;">43</span>                         <span style="color:#0000ff;">foreach</span> (Attribute attr <span style="color:#0000ff;">in</span></span><br><span style="font-size:14px;"><span style="color:#008080;">44</span>                             type.GetCustomAttributes(<span style="color:#0000ff;">typeof</span>(XFrmWorkAttribute), <span style="color:#0000ff;">false</span>))</span><br><span style="font-size:14px;"><span style="color:#008080;">45</span>                         {</span><br><span style="font-size:14px;"><span style="color:#008080;">46</span>                             XFrmWorkAttribute attr2 = attr <span style="color:#0000ff;">as</span> XFrmWorkAttribute;</span><br><span style="font-size:14px;"><span style="color:#008080;">47</span>                             tc.Add(<span style="color:#0000ff;">new</span> ObjectBasicInfo() { myLogoURL = attr2.myResource, myType = type, myDetail = attr2.DetailInfo, myName = attr2.Name });</span><br><span style="font-size:14px;"><span style="color:#008080;">48</span>                         }</span><br><span style="font-size:14px;"><span style="color:#008080;">49</span>                     }</span><br><span style="font-size:14px;"><span style="color:#008080;">50</span>                 }</span><br><span style="font-size:14px;"><span style="color:#008080;">51</span>                 myObjectBasicInfoDictionary.Add(interfaceName, tc);</span><br><span style="font-size:14px;"><span style="color:#008080;">52</span>                 <span style="color:#0000ff;">return</span> tc;</span><br><span style="font-size:14px;"><span style="color:#008080;">53</span>             }</span><br><span style="font-size:14px;"><span style="color:#008080;">54</span>         }</span><br><span style="color:#008080;font-size:14px;">55 </span><br><span style="color:#008080;font-size:14px;">56 </span><br><span style="font-size:14px;"><span style="color:#008080;">57</span>     }</span></pre>
     </div> 
    </div> 
    <p><span style="font-size:14px;">&nbsp;</span></p> 
    <p><span style="font-size:14px;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;使用时非常方便，下面我们会介绍如何使用他。</span></p> 
    <p><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4. 使用方法</span></p> 
    <p><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;下面我们以一个具体场景介绍这一方法的使用：&nbsp; 假设有一个通信系统，要求动态增减通信功能，如USB,串口，WIFI,蓝牙等。&nbsp; 我们将其公共方法为接口ICommMethod ，所有通信方法都必须实现这一接口，并增加自定义的XFrmworkAttribute.</span></p> 
    <p><span style="font-size:14px;">　　ICommMethod的接口规范标记如下：</span></p> 
    <p><span style="font-size:14px;">&nbsp;&nbsp;</span></p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy"><img alt="复制代码" src="http://common.cnblogs.com/images/copycode.gif"></span>
     </div> 
     <pre>   <span style="color:#808080;">///</span> <span style="color:#808080;">&lt;summary&gt;</span>
    <span style="color:#808080;">///</span><span style="color:#008000;"> 通信方法的基类接口
    </span><span style="color:#808080;">///</span> <span style="color:#808080;">&lt;remarks&gt;</span><span style="color:#008000;">继承于INotifyPropertyChanged接口实现通知外部世界的能力</span><span style="color:#808080;">&lt;/remarks&gt;</span>
    <span style="color:#808080;">///</span> <span style="color:#808080;">&lt;/summary&gt;</span>
    [InterfaceAttribute(<span style="color:#800000;">"</span><span style="color:#800000;">ICommMethod</span><span style="color:#800000;">"</span>, <span style="color:#800000;">""</span>, SearchStrategy.FolderSearch)]
    <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">interface</span> ICommMethod : IProcess,INotifyPropertyChanged
    {
  

        <span style="color:#808080;">///</span> <span style="color:#808080;">&lt;summary&gt;</span>
        <span style="color:#808080;">///</span><span style="color:#008000;"> 资源名称
        </span><span style="color:#808080;">///</span> <span style="color:#808080;">&lt;/summary&gt;</span>
        <span style="color:#0000ff;">string</span> ResourceName { <span style="color:#0000ff;">get</span>; }
   
        <span style="color:#808080;">///</span> <span style="color:#808080;">&lt;summary&gt;</span>
        <span style="color:#808080;">///</span><span style="color:#008000;"> 当前端口序号
        </span><span style="color:#808080;">///</span> <span style="color:#808080;">&lt;/summary&gt;</span>
        <span style="color:#0000ff;">int</span> CurrentPortIndex
        {
            <span style="color:#0000ff;">get</span>;
            <span style="color:#0000ff;">set</span>;
        }
  <span style="color:#008000;">//</span><span style="color:#008000;">其他成员变量。。。。</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy"><img alt="复制代码" src="http://common.cnblogs.com/images/copycode.gif"></span>
     </div> 
    </div> 
    <p>&nbsp;</p> 
    <p>&nbsp;</p> 
    <p>&nbsp;</p> 
    <p><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;</span></p> 
    <div class="cnblogs_code"> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy"><img alt="复制代码" src="http://common.cnblogs.com/images/copycode.gif"></span>
     </div> 
     <pre><span style="font-size:14px;"><span style="color:#008080;">1</span>    [XFrmWorkAttribute(<span style="color:#800000;">"</span><span style="color:#800000;">标准蓝牙通信</span><span style="color:#800000;">"</span>, <span style="color:#800000;">"</span><span style="color:#800000;">ICommMethod</span><span style="color:#800000;">"</span>, <span style="color:#800000;">"</span><span style="color:#800000;">提供支持绝大多数蓝牙设备的socket蓝牙通信</span><span style="color:#800000;">"</span>,<span style="color:#800000;">"</span><span style="color:#800000;">/XFrmWork.XMove.Comm;component/Images/标准蓝牙.jpg</span><span style="color:#800000;">"</span>)]</span><br><span style="font-size:14px;"><span style="color:#008080;">2</span>     <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">class</span> BluetoothAdvanced : AbstartComm</span><br><span style="font-size:14px;"><span style="color:#008080;">3</span>     {</span><br><span style="font-size:14px;"><span style="color:#008080;">4</span>          <span style="color:#0000ff;">public</span> BluetoothAdvanced():<span style="color:#0000ff;">base</span></span><br><span style="font-size:14px;"><span style="color:#008080;">5</span>              ()</span><br><span style="font-size:14px;"><span style="color:#008080;">6</span>          {</span><br><span style="color:#008080;font-size:14px;">7 </span><br><span style="font-size:14px;"><span style="color:#008080;">8</span>          }</span><br><span style="font-size:14px;"><span style="color:#008080;">9</span> }</span></pre> 
     <div class="cnblogs_code_toolbar">
      <span class="cnblogs_code_copy"><img alt="复制代码" src="http://common.cnblogs.com/images/copycode.gif"></span>
     </div> 
    </div> 
    <p><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 其他方法不一一列举。</span></p> 
    <p><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 我们在一个插件管理类中直接这样调用：&nbsp;&nbsp;</span></p> 
    <p><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; ComMethodList.DataContext = SingletonProvider.GetInstance("ICommMethod");</span></p> 
    <p><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ComMethodList是我的系统中一个可用通信方法列表的WPF的Listbox控件。&nbsp;&nbsp; 直接将&nbsp;ObservableCollection&lt;ObjectBasicInfo&gt;&gt; 集合绑定到该控件的数据上下文中，即可显示当前所有的通信列表。&nbsp; Listbox中的对应index即插件集合的index,通过上面描述的实例化方法，就能反射实例化之。&nbsp;&nbsp; 讨论WPF的数据绑定超过了本文的范畴，但可查询相关资料。读者可以自行设计和使用该集合提供的数据。显示效果如下图：</span></p> 
    <p><span style="font-size:14px;"><img style="margin-left:auto;" alt="" src="https://pic002.cnblogs.com/images/2012/287060/2012021218294480.jpg"></span></p> 
    <p><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp; 5. 在已实例化的对象中获取该类的attribute数据</span></p> 
    <p><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 还有一个遗留问题，即在实例化的对象中，我们依旧要获得类的名称，描述和其他相关信息，如何做呢？&nbsp; 我们定义如下的attribute方法实现之</span></p> 
    <p><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p> 
    <div class="cnblogs_code"> 
     <span style="font-size:14px;"><img class="code_img_closed" alt="" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif"><img class="code_img_opened" alt="" src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif"><span class="cnblogs_code_collapse">AttributeHelper</span></span> 
     <div class="cnblogs_code_hide">
      <pre><span style="font-size:14px;"><span style="color:#008080;"> 1</span>   <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">class</span> AttributeHelper</span><br><span style="font-size:14px;"><span style="color:#008080;"> 2</span>     {</span><br><span style="font-size:14px;"><span style="color:#008080;"> 3</span>         <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">static</span> XFrmWorkAttribute GetCustomAttribute(Type source) </span><br><span style="font-size:14px;"><span style="color:#008080;"> 4</span>         {</span><br><span style="color:#008080;font-size:14px;"> 5  </span><br><span style="font-size:14px;"><span style="color:#008080;"> 6</span>             <span style="color:#0000ff;">object</span>[] attributes = source.GetCustomAttributes(<span style="color:#0000ff;">typeof</span>(XFrmWorkAttribute), <span style="color:#0000ff;">false</span>);</span><br><span style="font-size:14px;"><span style="color:#008080;"> 7</span>             <span style="color:#0000ff;">foreach</span> (<span style="color:#0000ff;">object</span> attribute <span style="color:#0000ff;">in</span> attributes)</span><br><span style="font-size:14px;"><span style="color:#008080;"> 8</span>             {</span><br><span style="font-size:14px;"><span style="color:#008080;"> 9</span>                 <span style="color:#0000ff;">if</span> (attribute <span style="color:#0000ff;">is</span> XFrmWorkAttribute)</span><br><span style="font-size:14px;"><span style="color:#008080;">10</span>                     <span style="color:#0000ff;">return</span> (XFrmWorkAttribute)attribute;</span><br><span style="font-size:14px;"><span style="color:#008080;">11</span>             }</span><br><span style="color:#008080;font-size:14px;">12 </span><br><span style="font-size:14px;"><span style="color:#008080;">13</span>             <span style="color:#0000ff;">return</span> <span style="color:#0000ff;">new</span> XFrmWorkAttribute(<span style="color:#800000;">"</span><span style="color:#800000;">不存在定义</span><span style="color:#800000;">"</span>,<span style="color:#800000;">"</span><span style="color:#800000;">NULL</span><span style="color:#800000;">"</span>,<span style="color:#800000;">"</span><span style="color:#800000;">NULL</span><span style="color:#800000;">"</span>,<span style="color:#800000;">"</span><span style="color:#800000;">无定义资源</span><span style="color:#800000;">"</span>);</span><br><span style="font-size:14px;"><span style="color:#008080;">14</span>         }</span><br><span style="font-size:14px;"><span style="color:#008080;">15</span>     }</span></pre>
     </div> 
    </div> 
    <p><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; 若该类未实现自定义的attribute,返回一个“空”值，提醒设计者或开发人员。&nbsp;</span></p> 
    <p><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 使用起来也很简单，例如我们想获得该对象的“名称”：</span></p> 
    <p><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;</span></p> 
    <div class="cnblogs_code">
     <pre><span style="font-size:14px;">   <span style="color:#0000ff;">public</span>  <span style="color:#0000ff;">string</span> PublicName</span><br><span style="font-size:14px;">        {</span><br><span style="font-size:14px;">            <span style="color:#0000ff;">get</span> { <span style="color:#0000ff;">return</span> AttributeHelper.GetCustomAttribute(<span style="color:#0000ff;">this</span>.GetType()).Name; }</span><br><span style="font-size:14px;">        }</span></pre>
    </div> 
    <p><span style="font-size:14px;">&nbsp;</span></p> 
    <p><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 注意，属性访问器中，显然只应该实现get方法，它是运行时的不可修改对象。</span></p> 
    <p><span style="font-size:14px;">&nbsp;&nbsp; 6. 其他</span></p> 
    <p><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文的来源是作者项目中的实际需要，不实例化类而获得类的相关信息是一种很普遍的需求，attribute是一种做法，也可以通过xml实现，很多插件系统就是这么做的，但对于轻量级的系统来说，attribute可能更合适，而单例模式的引用给该方法带来了很大的方便。&nbsp;有任何问题欢迎随时留言交流。&nbsp;&nbsp;&nbsp;</span></p> 
    <p><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p> 
    <p><span style="font-size:14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p> 
    <p><span style="font-size:14px;">&nbsp;</span></p> 
   </div> 
   <div> 
    <div> 
     <p style="border-top:#e0e0e0 1px dashed;border-right:#e0e0e0 1px dashed;border-bottom:#e0e0e0 1px dashed;border-left:#e0e0e0 1px dashed;background:#e5f1f4 url(&quot;https://images.cnblogs.com/cnblogs_com/lloydsheng/239039/o_copyright.gif&quot;) no-repeat 1% 50%;font-family:'微软雅黑';font-size:11px;"><br> 作者：<a href="http://www.cnblogs.com/buptzym/" rel="nofollow">热情的沙漠</a> <br> 出处：<a href="http://www.cnblogs.com/buptzym/" rel="nofollow">http://www.cnblogs.com/buptzym/</a> <br> 本文版权归作者和博客园共有，欢迎转载，但未经作者同意必须保留此段声明，且在文章页面明显位置给出原文连接，否则保留追究法律责任的权利。 <br></p> 
    </div> 
   </div> 
   <div class="clear"></div> 
   <div> 
    <div></div> 
    <div>
     标签: 
     <a href="http://www.cnblogs.com/buptzym/tag/.NET/" rel="nofollow">.NET</a>, 
     <a href="http://www.cnblogs.com/buptzym/tag/%E6%8F%92%E4%BB%B6/" rel="nofollow">插件</a> 
    </div> 
    <div>
     <br>
    </div> 
    <div>
     本文转自FerventDesert博客园博客，原文链接：http://www.cnblogs.com/buptzym/archive/2012/02/12/2348168.html，如需转载请自行联系原作者
     <br>
    </div> 
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
