<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>     XMOVE3.0手持终端——软件介绍(五):在2KB内存的单片机上实现的T9中文输入法... « NotBeCN</title>
  <meta name="description" content="              XMOVE3.0手持终端——软件介绍(五):在2KB内存的单片机上实现的T9中文输入法                    &nbsp; &nbsp; &nbsp;&nbsp;            编者注： X-MOVE是作者在业余时间于2010年6月份启动的以运动传感开发，算法和...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://notbe.cn/2017/01/31/weixin_34062329_90133138.html">
  <link rel="alternate" type="application/rss+xml" title="NotBeCN" href="https://notbe.cn/feed.xml" />
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">NotBeCN</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/" target="_blank">关于</a>
      
        
        <a class="page-link" href="https://uzshare.com" target="_blank">社区</a>
      
        
        <a class="page-link" href="/donate/" target="_blank">Donate</a>
      
        
        <a class="page-link" href="/games/shejiyazi/" target="_blank">射个鸭子</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">     XMOVE3.0手持终端——软件介绍(五):在2KB内存的单片机上实现的T9中文输入法...</h1>
    <p class="post-meta">Jan 31, 2017</p>
  </header>

  <article class="post-content">
    <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="content-detail markdown-body"> 
   <h1> <a class="postTitle2" id="cb_post_title_url" href="http://www.cnblogs.com/buptzym/archive/2012/07/08/2559195.html" rel="nofollow">XMOVE3.0手持终端——软件介绍(五):在2KB内存的单片机上实现的T9中文输入法</a> </h1> 
   <div class="clear"></div> 
   <div class="postBody"> 
    <div class="blogpost-body"> 
     <p>&nbsp; &nbsp; &nbsp;&nbsp;</p> 
     <div class="cnblogs_code">
      <pre><span style="font-size:16px;color:#ff0000;">编者注： X-MOVE是作者在业余时间于2010年6月份启动的以运动传感开发，算法和应用的平台，目前已经发展了三个版本，第四版的开发接近尾声。发布在博客园仅为交流技术，不存在商业目的，作者保留一切权利。</span></pre>
     </div> 
     <p>&nbsp;</p> 
     <h2>一. 综述</h2> 
     <p>&nbsp; &nbsp;&nbsp;</p> 
     <p>　　所谓T9，指的是在手机上广为流传的九宫格输入法。中文输入法大家每天都在使用，那么多大的空间才能承载一个输入法呢？搜狗安装包已经20M了，手机版本的也有2M。但我会告诉你，实现中文输入法仅需要14KB的存储空间和不到100byte的内存。虽然没有联想，并只支持拼音，但已经足够surprising了~　</p> 
     <p>　　输入法的词组和数据结构定义是我大三时从某个不知名的网站上巴拉下来并移植到我的<a href="http://www.cnblogs.com/buptzym/archive/2012/06/15/2417040.html" rel="nofollow">XMOVE平台</a>下的嵌入式手持终端上的，现在实在想不起其真实来源了。我对它做了必要的改进，并优化了存储结构，想必算法的原作者也会乐于接受的吧。</p> 
     <p>　　以下是它的运行时实物截图：</p> 
     <p>&nbsp; &nbsp;</p> 
     <p><img alt="" src="https://pic002.cnblogs.com/images/2012/287060/2012070814135543.jpg"></p> 
     <p><img alt="" src="https://pic002.cnblogs.com/images/2012/287060/2012070814141243.jpg"></p> 
     <p>　　</p> 
     <p>它具有如下特点：</p> 
     <ul>
      <li>　　低内存和低CPU占用</li> 
      <li>支持摇动系统旋转输入字符（需陀螺仪支持）</li> 
      <li>支持中英文混合输入</li> 
      <li>由于物理按键不足，因此采用了屏幕虚拟键盘</li> 
     </ul>
     <p>&nbsp; &nbsp; 与XMOVE手持终端相关的介绍文章列表如下:</p> 
     <p>　　系统<a href="http://www.cnblogs.com/buptzym/archive/2012/06/29/2570546.html" rel="nofollow">综述: 自制的彩屏手持动作感应终端</a></p> 
     <p>　　<a href="http://www.cnblogs.com/buptzym/archive/2012/06/22/2557460.html" rel="nofollow">软件介绍(一):精简型嵌入式系统的菜单实现和任务切换</a>　　</p> 
     <p>　　<a href="http://www.cnblogs.com/buptzym/archive/2012/06/26/2564401.html" rel="nofollow">软件介绍(二):在2KB内存单片机上实现的彩屏GUI控件库</a></p> 
     <p>　　<a href="http://www.cnblogs.com/buptzym/archive/2012/06/20/2556918.html" rel="nofollow">软件介绍(三):在2KB内存单片机上实现的俄罗斯方块</a></p> 
     <p>　　<a href="http://www.cnblogs.com/buptzym/archive/2012/06/20/2556052.html" rel="nofollow">软件介绍(四):在2KB内存单片机上实现的超精简五子棋算法</a></p> 
     <p>　　<a href="http://www.cnblogs.com/buptzym/archive/2012/06/23/2559195.html" rel="nofollow">软件介绍(五):在2KB内存的单片机上实现的T9中文输入法</a></p> 
     <h2>二. 数据结构和数据</h2> 
     <p>　　</p> 
     <p>　　从直觉来说，实现输入法的必要条件是建立索引，因为中文常用词就已经两三千。同时，应该在没有完成拼音输入之前就能获得可能的结果，例如，输入zhua，那么系统会提供来自zhua,zhuang,zhuan的汉字显示，而并非仅仅提供zhua。</p> 
     <p>　　通常的手机输入功能是这样的：</p> 
     <p><img alt="" src="https://pic002.cnblogs.com/images/2012/287060/2012062620531924.jpg"></p> 
     <p>　　我们可以朴素的思考，我们建立一组拼音字符串（如"zhua"）与相应汉字列表（如“抓爪...”），那么每次更新拼音字符串后，就只需要搜索匹配的汉字列表了。但实际上问题并非这么简单，这个表可能有200多条（可能的拼音字符串就有200种，没有仔细统计过），每次都在这里搜索，无疑会很慢。为了提升速度，应该将该表进行分割，通常可以根据按下的第一个键分割成10个拼音索引表。这样每组表只有20多个，大大提升了搜索速度。</p> 
     <p>　　数字按键组合,组合成16进制，比如按键246则为0x246。</p> 
     <p>&nbsp; &nbsp;　通过这些基本思想，我们确定如下的数据结构。</p> 
     <p>　　1. 必要的结构体定义</p> 
     <p>　　相关信息都在注释上解释清楚了。</p> 
     <div class="cnblogs_code"> 
      <div class="cnblogs_code_toolbar">
       <span class="cnblogs_code_copy"><img alt="复制代码" src="http://common.cnblogs.com/images/copycode.gif"></span>
      </div> 
      <pre><span style="color:#0000ff;">struct</span> t9PY_index   <span style="color:#008000;">//</span><span style="color:#008000;">拼音索引结构</span>
{
    <span style="color:#0000ff;">const</span> unsigned <span style="color:#0000ff;">long</span>  t9PY;   <span style="color:#008000;">//</span><span style="color:#008000;">对应的索引号</span>
    <span style="color:#0000ff;">const</span> unsigned <span style="color:#0000ff;">char</span> *PY;  <span style="color:#008000;">//</span><span style="color:#008000;">显示的拼音字符串</span>
    <span style="color:#0000ff;">const</span> unsigned <span style="color:#0000ff;">char</span> *PY_mb;  <span style="color:#008000;">//</span><span style="color:#008000;">对应的汉字排列表</span>
};

<span style="color:#0000ff;">struct</span> t9py_struct   
{
    unsigned <span style="color:#0000ff;">char</span>  pysrf;       <span style="color:#008000;">//</span><span style="color:#008000;">输入法选项</span>
    unsigned <span style="color:#0000ff;">char</span>  firstno;     <span style="color:#008000;">//</span><span style="color:#008000;">输入的第一个数字按键</span>
    unsigned <span style="color:#0000ff;">char</span>  mblen;       <span style="color:#008000;">//</span><span style="color:#008000;">查出码表的长度</span>
    unsigned <span style="color:#0000ff;">char</span>  mbtimes;     <span style="color:#008000;">//</span><span style="color:#008000;">码表切换的次数</span>
    unsigned <span style="color:#0000ff;">long</span> t9py;        <span style="color:#008000;">//</span><span style="color:#008000;">数字按键组合,组合成16进制，比如按键246则为0x246</span>
    <span style="color:#0000ff;">const</span> <span style="color:#0000ff;">struct</span> t9PY_index  *t9PY_addr;
};</pre> 
      <div class="cnblogs_code_toolbar">
       <span class="cnblogs_code_copy"><img alt="复制代码" src="http://common.cnblogs.com/images/copycode.gif"></span>
      </div> 
     </div> 
     <p>　　2. 汉字排列表　</p> 
     <div class="cnblogs_code"> 
      <div class="cnblogs_code_toolbar">
       <span class="cnblogs_code_copy"><img alt="复制代码" src="http://common.cnblogs.com/images/copycode.gif"></span>
      </div> 
      <pre><span style="color:#0000ff;">const</span> unsigned <span style="color:#0000ff;">char</span> PY_mb_space []={<span style="color:#800000;">""</span>};
<span style="color:#0000ff;">const</span> unsigned <span style="color:#0000ff;">char</span> PY_mb_a     []={<span style="color:#800000;">"</span><span style="color:#800000;">啊阿呵吖嗄腌锕</span><span style="color:#800000;">"</span>};
<span style="color:#0000ff;">const</span> unsigned <span style="color:#0000ff;">char</span> PY_mb_ai    []={<span style="color:#800000;">"</span><span style="color:#800000;">爱矮挨哎碍癌艾唉哀蔼隘埃皑呆嗌嫒瑷暧捱砹嗳锿霭</span><span style="color:#800000;">"</span>};
<span style="color:#0000ff;">const</span> unsigned <span style="color:#0000ff;">char</span> PY_mb_an    []={<span style="color:#800000;">"</span><span style="color:#800000;">按安暗岸俺案鞍氨胺厂广庵揞犴铵桉谙鹌埯黯</span><span style="color:#800000;">"</span>};
<span style="color:#0000ff;">const</span> unsigned <span style="color:#0000ff;">char</span> PY_mb_ang   []={<span style="color:#800000;">"</span><span style="color:#800000;">昂肮盎仰</span><span style="color:#800000;">"</span>};
<span style="color:#0000ff;">const</span> unsigned <span style="color:#0000ff;">char</span> PY_mb_ao    []={<span style="color:#800000;">"</span><span style="color:#800000;">袄凹傲奥熬懊敖翱澳嚣拗媪廒骜嗷坳遨聱螯獒鏊鳌鏖</span><span style="color:#800000;">"</span>};
<span style="color:#0000ff;">const</span> unsigned <span style="color:#0000ff;">char</span> PY_mb_ba    []={<span style="color:#800000;">"</span><span style="color:#800000;">把八吧爸拔罢跋巴芭扒坝霸叭靶笆疤耙捌粑茇岜鲅钯魃</span><span style="color:#800000;">"</span>};
<span style="color:#0000ff;">const</span> unsigned <span style="color:#0000ff;">char</span> PY_mb_bai   []={<span style="color:#800000;">"</span><span style="color:#800000;">百白摆败柏拜佰伯稗捭呗掰</span><span style="color:#800000;">"</span>};
<span style="color:#0000ff;">const</span> unsigned <span style="color:#0000ff;">char</span> PY_mb_ban   []={<span style="color:#800000;">"</span><span style="color:#800000;">半办班般拌搬版斑板伴扳扮瓣颁绊癍坂钣舨阪</span><span style="color:#800000;">"</span>};
<span style="color:#808080;">///</span><span style="color:#008000;">省略....<br></span></pre> 
      <p>//下面是英文对应的排列表<br> const unsigned char PY_mb_abc []={"abc"};</p> 
      <div class="cnblogs_code_toolbar">
       <span class="cnblogs_code_copy"><img alt="复制代码" src="http://common.cnblogs.com/images/copycode.gif"></span>
      </div> 
     </div> 
     <p>&nbsp; &nbsp; 汉字排列表较容易理解，就是某拼音下对应的汉字数组，注意加上了const。在单片机环境中它会默认存储在flash中而不是内存，这样可以优化存储。</p> 
     <p>　　3. 拼音索引表</p> 
     <div class="cnblogs_code"> 
      <div class="cnblogs_code_toolbar">
       <span class="cnblogs_code_copy"><img alt="复制代码" src="http://common.cnblogs.com/images/copycode.gif"></span>
      </div> 
      <pre><span style="color:#0000ff;">const</span> <span style="color:#0000ff;">struct</span> t9PY_index  t9PY_index0[] ={<span style="color:#800080;">0x00</span>,<span style="color:#800000;">"</span> <span style="color:#800000;">"</span>,PY_mb_bd};        //1
<span style="color:#0000ff;">const</span> <span style="color:#0000ff;">struct</span> t9PY_index  t9PY_index1[] ={<span style="color:#800080;">0x20</span>,<span style="color:#800000;">"</span> <span style="color:#800000;">"</span>,PY_mb_space};    <span style="color:#008000;">//</span><span style="color:#008000;">1</span>
<span style="color:#0000ff;">const</span> <span style="color:#0000ff;">struct</span> t9PY_index  t9PY_index2[] ={{<span style="color:#800080;">0x2</span>,<span style="color:#800000;">"</span><span style="color:#800000;">a</span><span style="color:#800000;">"</span>,PY_mb_a},       <span style="color:#008000;">//</span><span style="color:#008000;">55</span>
{<span style="color:#800080;">0x22</span>,<span style="color:#800000;">"</span><span style="color:#800000;">ba</span><span style="color:#800000;">"</span>,PY_mb_ba},
{<span style="color:#800080;">0x22</span>,<span style="color:#800000;">"</span><span style="color:#800000;">ca</span><span style="color:#800000;">"</span>,PY_mb_ca},
{<span style="color:#800080;">0x224</span>,<span style="color:#800000;">"</span><span style="color:#800000;">bai</span><span style="color:#800000;">"</span>,PY_mb_bai},
{<span style="color:#800080;">0x224</span>,<span style="color:#800000;">"</span><span style="color:#800000;">cai</span><span style="color:#800000;">"</span>,PY_mb_cai},
{<span style="color:#800080;">0x226</span>,<span style="color:#800000;">"</span><span style="color:#800000;">ban</span><span style="color:#800000;">"</span>,PY_mb_ban},
{<span style="color:#800080;">0x226</span>,<span style="color:#800000;">"</span><span style="color:#800000;">bao</span><span style="color:#800000;">"</span>,PY_mb_bao},
{<span style="color:#800080;">0x226</span>,<span style="color:#800000;">"</span><span style="color:#800000;">can</span><span style="color:#800000;">"</span>,PY_mb_can},
{<span style="color:#800080;">0x226</span>,<span style="color:#800000;">"</span><span style="color:#800000;">cao</span><span style="color:#800000;">"</span>,PY_mb_cao},
{<span style="color:#800080;">0x226</span>,<span style="color:#800000;">"</span><span style="color:#800000;">cen</span><span style="color:#800000;">"</span>,PY_mb_cen},
{<span style="color:#800080;">0x2264</span>,<span style="color:#800000;">"</span><span style="color:#800000;">bang</span><span style="color:#800000;">"</span>,PY_mb_bang},
{<span style="color:#800080;">0x2264</span>,<span style="color:#800000;">"</span><span style="color:#800000;">cang</span><span style="color:#800000;">"</span>,PY_mb_cang},
{<span style="color:#800080;">0x23</span>,<span style="color:#800000;">"</span><span style="color:#800000;">ce</span><span style="color:#800000;">"</span>,PY_mb_ce},
{<span style="color:#800080;">0x234</span>,<span style="color:#800000;">"</span><span style="color:#800000;">bei</span><span style="color:#800000;">"</span>,PY_mb_bei},
{<span style="color:#800080;">0x236</span>,<span style="color:#800000;">"</span><span style="color:#800000;">ben</span><span style="color:#800000;">"</span>,PY_mb_ben},
{<span style="color:#800080;">0x2364</span>,<span style="color:#800000;">"</span><span style="color:#800000;">beng</span><span style="color:#800000;">"</span>,PY_mb_beng},
{<span style="color:#800080;">0x2364</span>,<span style="color:#800000;">"</span><span style="color:#800000;">ceng</span><span style="color:#800000;">"</span>,PY_mb_ceng},
{<span style="color:#800080;">0x24</span>,<span style="color:#800000;">"</span><span style="color:#800000;">ai</span><span style="color:#800000;">"</span>,PY_mb_ai},
{<span style="color:#800080;">0x24</span>,<span style="color:#800000;">"</span><span style="color:#800000;">bi</span><span style="color:#800000;">"</span>,PY_mb_bi},
{<span style="color:#800080;">0x24</span>,<span style="color:#800000;">"</span><span style="color:#800000;">ci</span><span style="color:#800000;">"</span>,PY_mb_ci},
{<span style="color:#800080;">0x242</span>,<span style="color:#800000;">"</span><span style="color:#800000;">cha</span><span style="color:#800000;">"</span>,PY_mb_cha},
{<span style="color:#800080;">0x2424</span>,<span style="color:#800000;">"</span><span style="color:#800000;">chai</span><span style="color:#800000;">"</span>,PY_mb_chai},
{<span style="color:#800080;">0x2426</span>,<span style="color:#800000;">"</span><span style="color:#800000;">bian</span><span style="color:#800000;">"</span>,PY_mb_bian},
{<span style="color:#800080;">0x2426</span>,<span style="color:#800000;">"</span><span style="color:#800000;">biao</span><span style="color:#800000;">"</span>,PY_mb_biao},
{<span style="color:#800080;">0x2426</span>,<span style="color:#800000;">"</span><span style="color:#800000;">chan</span><span style="color:#800000;">"</span>,PY_mb_chan},
{<span style="color:#800080;">0x2426</span>,<span style="color:#800000;">"</span><span style="color:#800000;">chao</span><span style="color:#800000;">"</span>,PY_mb_chao},
{<span style="color:#800080;">0x24264</span>,<span style="color:#800000;">"</span><span style="color:#800000;">chang</span><span style="color:#800000;">"</span>,PY_mb_chang},
{<span style="color:#800080;">0x243</span>,<span style="color:#800000;">"</span><span style="color:#800000;">bie</span><span style="color:#800000;">"</span>,PY_mb_bie},
{<span style="color:#800080;">0x243</span>,<span style="color:#800000;">"</span><span style="color:#800000;">che</span><span style="color:#800000;">"</span>,PY_mb_che},
{<span style="color:#800080;">0x2436</span>,<span style="color:#800000;">"</span><span style="color:#800000;">chen</span><span style="color:#800000;">"</span>,PY_mb_chen},
{<span style="color:#800080;">0x24364</span>,<span style="color:#800000;">"</span><span style="color:#800000;">cheng</span><span style="color:#800000;">"</span>,PY_mb_cheng},
{<span style="color:#800080;">0x244</span>,<span style="color:#800000;">"</span><span style="color:#800000;">chi</span><span style="color:#800000;">"</span>,PY_mb_chi},
{<span style="color:#800080;">0x246</span>,<span style="color:#800000;">"</span><span style="color:#800000;">bin</span><span style="color:#800000;">"</span>,PY_mb_bin},
{<span style="color:#800080;">0x2464</span>,<span style="color:#800000;">"</span><span style="color:#800000;">bing</span><span style="color:#800000;">"</span>,PY_mb_bing},
{<span style="color:#800080;">0x24664</span>,<span style="color:#800000;">"</span><span style="color:#800000;">chong</span><span style="color:#800000;">"</span>,PY_mb_chong},
{<span style="color:#800080;">0x2468</span>,<span style="color:#800000;">"</span><span style="color:#800000;">chou</span><span style="color:#800000;">"</span>,PY_mb_chou},
{<span style="color:#800080;">0x248</span>,<span style="color:#800000;">"</span><span style="color:#800000;">chu</span><span style="color:#800000;">"</span>,PY_mb_chu},
{<span style="color:#800080;">0x24824</span>,<span style="color:#800000;">"</span><span style="color:#800000;">chuai</span><span style="color:#800000;">"</span>,PY_mb_chuai},
{<span style="color:#800080;">0x24826</span>,<span style="color:#800000;">"</span><span style="color:#800000;">chuan</span><span style="color:#800000;">"</span>,PY_mb_chuan},
{<span style="color:#800080;">0x248264</span>,<span style="color:#800000;">"</span><span style="color:#800000;">chuang</span><span style="color:#800000;">"</span>,PY_mb_chuang},
{<span style="color:#800080;">0x2484</span>,<span style="color:#800000;">"</span><span style="color:#800000;">chui</span><span style="color:#800000;">"</span>,PY_mb_chui},
{<span style="color:#800080;">0x2484</span>,<span style="color:#800000;">"</span><span style="color:#800000;">chun</span><span style="color:#800000;">"</span>,PY_mb_chun},
{<span style="color:#800080;">0x2486</span>,<span style="color:#800000;">"</span><span style="color:#800000;">chuo</span><span style="color:#800000;">"</span>,PY_mb_chuo},                                        
{<span style="color:#800080;">0x26</span>,<span style="color:#800000;">"</span><span style="color:#800000;">an</span><span style="color:#800000;">"</span>,PY_mb_an},
{<span style="color:#800080;">0x26</span>,<span style="color:#800000;">"</span><span style="color:#800000;">ao</span><span style="color:#800000;">"</span>,PY_mb_ao},                       
{<span style="color:#800080;">0x26</span>,<span style="color:#800000;">"</span><span style="color:#800000;">bo</span><span style="color:#800000;">"</span>,PY_mb_bo},
{<span style="color:#800080;">0x264</span>,<span style="color:#800000;">"</span><span style="color:#800000;">ang</span><span style="color:#800000;">"</span>,PY_mb_ang},
{<span style="color:#800080;">0x2664</span>,<span style="color:#800000;">"</span><span style="color:#800000;">cong</span><span style="color:#800000;">"</span>,PY_mb_cong},
{<span style="color:#800080;">0x268</span>,<span style="color:#800000;">"</span><span style="color:#800000;">cou</span><span style="color:#800000;">"</span>,PY_mb_cou},
{<span style="color:#800080;">0x28</span>,<span style="color:#800000;">"</span><span style="color:#800000;">bu</span><span style="color:#800000;">"</span>,PY_mb_bu},
{<span style="color:#800080;">0x28</span>,<span style="color:#800000;">"</span><span style="color:#800000;">cu</span><span style="color:#800000;">"</span>,PY_mb_cu},
{<span style="color:#800080;">0x2826</span>,<span style="color:#800000;">"</span><span style="color:#800000;">cuan</span><span style="color:#800000;">"</span>,PY_mb_cuan},
{<span style="color:#800080;">0x284</span>,<span style="color:#800000;">"</span><span style="color:#800000;">cui</span><span style="color:#800000;">"</span>,PY_mb_cui},
{<span style="color:#800080;">0x286</span>,<span style="color:#800000;">"</span><span style="color:#800000;">cun</span><span style="color:#800000;">"</span>,PY_mb_cun},
{<span style="color:#800080;">0x286</span>,<span style="color:#800000;">"</span><span style="color:#800000;">cuo</span><span style="color:#800000;">"</span>,PY_mb_cuo}    
};   <br>
//还有大量省略  </pre> 
      <div class="cnblogs_code_toolbar">
       <span class="cnblogs_code_copy"><img alt="复制代码" src="http://common.cnblogs.com/images/copycode.gif"></span>
      </div> 
     </div> 
     <p>&nbsp; &nbsp; 所谓拼音索引表一共有10个，本节的第一部分就介绍了拼音索引表的用途。以及如下的表：</p> 
     <div class="cnblogs_code">
      <pre><span style="color:#0000ff;">const</span> unsigned <span style="color:#0000ff;">char</span> t9PY_indexlen[<span style="color:#800080;">10</span>] = {<span style="color:#800080;">1</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">55</span>,<span style="color:#800080;">33</span>,<span style="color:#800080;">38</span>,<span style="color:#800080;">57</span>,<span style="color:#800080;">44</span>,<span style="color:#800080;">79</span>,<span style="color:#800080;">19</span>,<span style="color:#800080;">74</span>};   <span style="color:#008000;">//</span><span style="color:#008000;">以每个数字键开始的拼音代码组合数量</span>　　</pre>
     </div> 
     <p>　　</p> 
     <h2>三. 主流程实现</h2> 
     <p>　　1. 输入法任务初始化</p> 
     <p>　　初始化主要设置为默认拼音，输入的拼音字符串和长度默认归零。</p> 
     <div class="cnblogs_code"> 
      <div class="cnblogs_code_toolbar">
       <span class="cnblogs_code_copy"><img alt="复制代码" src="http://common.cnblogs.com/images/copycode.gif"></span>
      </div> 
      <pre>  <span style="color:#0000ff;">struct</span> t9py_struct t9pyfun; 
<span style="color:#0000ff;">void</span> py_init()
{

    t9pyfun.pysrf=T9PY;
        t9pyfun.t9PY_addr=t9PY_index1;
        t9pyfun.t9py=<span style="color:#800080;">0</span>;  
    t9pyfun.firstno=<span style="color:#800000;">'</span> <span style="color:#800000;">'</span>;
    t9pyfun.mblen =<span style="color:#800080;">0</span>;

}</pre> 
      <div class="cnblogs_code_toolbar">
       <span class="cnblogs_code_copy"><img alt="复制代码" src="http://common.cnblogs.com/images/copycode.gif"></span>
      </div> 
     </div> 
     <p>　　2. 查找索引</p> 
     <div class="cnblogs_code"> 
      <div class="cnblogs_code_toolbar">
       <span class="cnblogs_code_copy"><img alt="复制代码" src="http://common.cnblogs.com/images/copycode.gif"></span>
      </div> 
      <pre><span style="color:#0000ff;">void</span> py_index_sub(<span style="color:#0000ff;">void</span>)
{
    uchar i;
    uchar flag = <span style="color:#800080;">0x55</span>;
    unsigned <span style="color:#0000ff;">long</span> temp;
    uchar mblentemp;
    mblentemp = t9pyfun.mblen;

    t9pyfun.mblen = <span style="color:#800080;">0x00</span>;
    <span style="color:#0000ff;">if</span> ((t9pyfun.pysrf == T9PY) &amp;&amp; (t9pyfun.firstno != <span style="color:#800000;">'</span> <span style="color:#800000;">'</span>))           <span style="color:#008000;">//</span><span style="color:#008000;">拼音输入法</span>
    {
        <span style="color:#0000ff;">for</span> (i=<span style="color:#800080;">0</span>;i&lt;t9PY_indexlen[t9pyfun.firstno];i++)  
        {
            <span style="color:#0000ff;">if</span> (t9pyfun.t9py == (*(t9PY_index_headno[t9pyfun.firstno]+i)).t9PY)
            {
                t9pyfun.mblen++;
                flag = <span style="color:#800080;">0xaa</span>;
                t9pyfun.t9PY_addr = (t9PY_index_headno[t9pyfun.firstno]+i);
                <span style="color:#0000ff;">for</span> (i++;i&lt;t9PY_indexlen[t9pyfun.firstno];i++)
                {
                    <span style="color:#0000ff;">if</span> (t9pyfun.t9py == (*(t9PY_index_headno[t9pyfun.firstno]+i)).t9PY)
                        t9pyfun.mblen++;
                    <span style="color:#0000ff;">else</span> 
                        <span style="color:#0000ff;">break</span>;
                }
                <span style="color:#0000ff;">break</span>;
            }
        }
        <span style="color:#0000ff;">if</span> (flag == <span style="color:#800080;">0x55</span>)           <span style="color:#008000;">//</span><span style="color:#008000;">没有查找完全对应的拼音组合，</span>
        {
            <span style="color:#0000ff;">for</span> (i=<span style="color:#800080;">0</span>;i&lt;t9PY_indexlen[t9pyfun.firstno];i++)
            {
                temp = (*(t9PY_index_headno[t9pyfun.firstno]+i)).t9PY;
                <span style="color:#0000ff;">while</span> (temp &gt; t9pyfun.t9py)
                {
                    temp &gt;&gt;= <span style="color:#800080;">4</span>;
                    <span style="color:#0000ff;">if</span> (temp == t9pyfun.t9py)
                 {
                     t9pyfun.t9PY_addr = t9PY_index_headno[t9pyfun.firstno]+i;
                     t9pyfun.mblen++;
                     i = t9PY_indexlen[t9pyfun.firstno];
                     flag = <span style="color:#800080;">0xaa</span>;
                     <span style="color:#0000ff;">break</span>;
                 }
                }             
            }
            <span style="color:#0000ff;">if</span> (flag == <span style="color:#800080;">0x55</span>)
            {
                t9pyfun.t9py &gt;&gt;= <span style="color:#800080;">4</span>;
                t9pyfun.mblen = mblentemp;
            }
        }

    }
    <span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span>(t9pyfun.pysrf == T9SZ)             <span style="color:#008000;">//</span><span style="color:#008000;">数字输入</span>
    {
        t9pyfun.mblen++;
        t9pyfun.t9PY_addr = &amp;t9PY_sz[t9pyfun.firstno];
    }
    <span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span>(t9pyfun.pysrf == T9BD)            <span style="color:#008000;">//</span><span style="color:#008000;">标点输入</span>
    {
        t9pyfun.mblen++;
        t9pyfun.t9PY_addr = t9PY_index0;
    } 
    <span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span>(t9pyfun.pysrf == T9DX)            <span style="color:#008000;">//</span><span style="color:#008000;">大写英文字母输入</span>
    {
        <span style="color:#0000ff;">if</span> ((t9pyfun.firstno&gt;<span style="color:#800080;">1</span>)&amp;&amp;(t9pyfun.firstno&lt;<span style="color:#800080;">10</span>))
        {
            t9pyfun.mblen++;
            t9pyfun.t9PY_addr = &amp;t9PY_ABC[t9pyfun.firstno];
        }
    } 
    <span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span>(t9pyfun.pysrf == T9XX)            <span style="color:#008000;">//</span><span style="color:#008000;">小写英文字母输入</span>
    {
        <span style="color:#0000ff;">if</span> ((t9pyfun.firstno&gt;<span style="color:#800080;">1</span>)&amp;&amp;(t9pyfun.firstno&lt;<span style="color:#800080;">10</span>))
        {
            t9pyfun.mblen++;
            t9pyfun.t9PY_addr = &amp;t9PY_abc[t9pyfun.firstno];
        }
    }
}</pre> 
      <div class="cnblogs_code_toolbar">
       <span class="cnblogs_code_copy"><img alt="复制代码" src="http://common.cnblogs.com/images/copycode.gif"></span>
      </div> 
     </div> 
     <p>　　3. 通过用户输入标识（input_data）实现判断和相关操作：</p> 
     <p>　　由于不同的平台，用户输入是完全不同的，因此本部分仅供参考。</p> 
     <div class="cnblogs_code"> 
      <img class="code_img_closed" alt="" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif">
      <img class="code_img_opened" alt="" src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif">
      <span class="cnblogs_code_collapse">实现判断和相关操作</span> 
     </div> 
     <div class="cnblogs_code"> 
      <div class="cnblogs_code_hide">
       <pre>u8 T9InputChoose(u8 x,u8 y,u8 input_data,u8 *buff,u8 *buffin,uchar bufflen)
{
    <span style="color:#0000ff;">if</span> (input_data==<span style="color:#800080;">0</span>)           <span style="color:#008000;">//</span><span style="color:#008000;"> 输入法切换</span>
    {
        <span style="color:#0000ff;">if</span> ((++t9pyfun.pysrf) &gt; T9SZ)
            t9pyfun.pysrf = T9DX; 
        dispsrf(x,y);
    }
    <span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span> (input_data==KEYLEFT_UP+<span style="color:#800080;">20</span>)       <span style="color:#008000;">//</span><span style="color:#008000;"> 输入标点符号，</span>
    {
        t9pyfun.mblen++;
        t9pyfun.t9PY_addr = t9PY_index0;

    }
    <span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span> ((input_data&gt;<span style="color:#800080;">0</span>&amp;&amp;input_data&lt;<span style="color:#800080;">9</span>)||input_data==<span style="color:#800080;">10</span>||input_data==KEYDOWN_UP+<span style="color:#800080;">20</span>)      <span style="color:#008000;">//</span><span style="color:#008000;">输入内容</span>
    {
        <span style="color:#0000ff;">if</span> (t9pyfun.pysrf == T9PY)
        {
            <span style="color:#0000ff;">if</span> (input_data&gt;<span style="color:#800080;">0</span>&amp;&amp;input_data&lt;<span style="color:#800080;">9</span>)      <span style="color:#008000;">//</span><span style="color:#008000;">输入内容</span>
            {
                t9pyfun.mbtimes = <span style="color:#800080;">0</span>;
                PY_index = <span style="color:#800080;">0</span>;
                <span style="color:#0000ff;">if</span> (t9pyfun.firstno == <span style="color:#800000;">'</span> <span style="color:#800000;">'</span>)
                    t9pyfun.firstno = input_data+<span style="color:#800080;">1</span>;
                t9pyfun.t9py = ((t9pyfun.t9py&lt;&lt;<span style="color:#800080;">4</span>) |  DecToHexFunc(input_data+<span style="color:#800080;">1</span>) );
                py_index_sub();

            }
            <span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span> (input_data== <span style="color:#800080;">10</span>||input_data==KEYDOWN_UP+<span style="color:#800080;">20</span>)                      <span style="color:#008000;">//</span><span style="color:#008000;">索引切换.</span>
            {
                t9pyfun.t9PY_addr++;
                t9pyfun.mbtimes++;
                PY_index = <span style="color:#800080;">0</span>;
                <span style="color:#0000ff;">if</span> (t9pyfun.firstno != <span style="color:#800000;">'</span> <span style="color:#800000;">'</span>)
                {
                    <span style="color:#0000ff;">if</span> (t9pyfun.mbtimes &gt;= t9pyfun.mblen)
                    {
                        t9pyfun.mbtimes = <span style="color:#800080;">0</span>;
                        t9pyfun.t9PY_addr -= t9pyfun.mblen;
                    }
                }
            }
        }
        <span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span> (t9pyfun.pysrf == T9SZ)                <span style="color:#008000;">//</span><span style="color:#008000;">输入数字</span>
        {
            
                buff[(*buffin)++] =<span style="color:#800080;">0x30</span>+input_data+<span style="color:#800080;">1</span>;
                clrindex(x,y,<span style="color:#800080;">0</span>);
        }
        <span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span> ((t9pyfun.pysrf == T9DX) || (t9pyfun.pysrf == T9XX)) <span style="color:#008000;">//</span><span style="color:#008000;">输入字母</span>
        {
            <span style="color:#0000ff;">if</span> (input_data&gt;<span style="color:#800080;">0</span>&amp;&amp;input_data&lt;<span style="color:#800080;">9</span>)      <span style="color:#008000;">//</span><span style="color:#008000;">输入内容</span>
            {
                <span style="color:#0000ff;">if</span> (t9pyfun.firstno == <span style="color:#800000;">'</span> <span style="color:#800000;">'</span>)
                {
                    t9pyfun.mbtimes = <span style="color:#800080;">0</span>;
                    PY_index = <span style="color:#800080;">0</span>;                        
                    t9pyfun.firstno = input_data;
                    t9pyfun.t9py = ((t9pyfun.t9py&lt;&lt;<span style="color:#800080;">4</span>) | DecToHexFunc(input_data+<span style="color:#800080;">1</span>));
                    py_index_sub();


                }                         
            }

        }                                            
    }
    <span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span> (input_data==<span style="color:#800080;">11</span>||input_data==KEYRIGHT_UP+<span style="color:#800080;">20</span>)    <span style="color:#008000;">//</span><span style="color:#008000;"> 删除键</span>
    {
        <span style="color:#0000ff;">if</span> (t9pyfun.mblen &gt; <span style="color:#800080;">0</span>)
        {                                         
            <span style="color:#0000ff;">if</span> (PY_index == <span style="color:#800080;">0</span>)            <span style="color:#008000;">//</span><span style="color:#008000;">删除索引拼音    </span>
            {
                <span style="color:#0000ff;">if</span> ((t9pyfun.t9py &gt; <span style="color:#800080;">0</span>) &amp;&amp; (t9pyfun.pysrf == T9PY))
                {
                    t9pyfun.t9py &gt;&gt;= <span style="color:#800080;">4</span>;
                    <span style="color:#0000ff;">if</span> (t9pyfun.t9py == <span style="color:#800080;">0</span>)
                        clrindex(x,y,<span style="color:#800080;">1</span>);
                    <span style="color:#0000ff;">else</span>
                    { 
                        py_index_sub();
                                                 clrindex(x,y,<span style="color:#800080;">0</span>);
                    };
                }
                <span style="color:#0000ff;">else</span> 
                {
                    clrindex(x,y,<span style="color:#800080;">1</span>);

                }    
                              
            }
                       
        }
        <span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span> (bufflen &gt; <span style="color:#800080;">2</span>)           <span style="color:#008000;">//</span><span style="color:#008000;">删除输入的汉字.</span>
        {
            buff[--(*buffin)] = <span style="color:#800080;">0</span>;
            buff[--(*buffin)] = <span style="color:#800080;">0</span>;

        }                
    }

    <span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span> (input_data==<span style="color:#800080;">9</span>||input_data==KEYUP_UP+<span style="color:#800080;">20</span>)   <span style="color:#008000;">//</span><span style="color:#008000;">确认键</span>
    {
        <span style="color:#0000ff;">if</span> (t9pyfun.mblen&gt;<span style="color:#800080;">0</span>)
        {
            <span style="color:#0000ff;">if</span> (*buffin &lt; bufflen)
            {       
                           
                select_data(x,y,buff, buffin, bufflen);
                               
            }
            <span style="color:#0000ff;">else</span> 
            {
                clrindex(x,y,<span style="color:#800080;">1</span>);
                                

            }                    
        }
    }
    <span style="color:#0000ff;">else</span> <span style="color:#0000ff;">if</span> (input_data==<span style="color:#800080;">10</span>)  <span style="color:#008000;">//</span><span style="color:#008000;">跳出</span>
    {
          <span style="color:#0000ff;">return</span> <span style="color:#800080;">0</span>;

    }
    <span style="color:#0000ff;">return</span> <span style="color:#800080;">1</span>;
}</pre>
      </div> 
     </div> 
     <p>&nbsp; &nbsp; &nbsp;4. 选择汉字函数</p> 
     <p>　　本部分是用户在输入拼音字符串后，在选取输入汉字时的函数。由于系统采用了虚拟键盘，因此必须读取外部的“旋转数据”，选择相应的输入字符。</p> 
     <p>　　系统有在汉字列表下有一红色光标，当左右旋转设备时，光标会随之移动，当您需要翻到上一页或下一页时，上下稍微用力摇晃设备即可。当然，这一切也可以通过物理的上下左右按键完成。</p> 
     <div class="cnblogs_code"> 
      <div class="cnblogs_code_toolbar">
       <span class="cnblogs_code_copy"><img alt="复制代码" src="http://common.cnblogs.com/images/copycode.gif"></span>
      </div> 
      <pre><span style="color:#0000ff;">void</span> select_data(u8 x,u8 y,uchar *buff,uchar *buffin,uchar bufflen)   <span style="color:#008000;">//</span><span style="color:#008000;">选择汉字函数</span>
{
    
    InnerFuncState=<span style="color:#800080;">1</span>;
    u8 FlagSet=<span style="color:#800080;">0</span>;
    u8 GyroKey;        
    <span style="color:#0000ff;">while</span>(InnerFuncState==<span style="color:#800080;">1</span>)
    {      key_data=KEYNULL;
                SetPaintMode(<span style="color:#800080;">0</span>,COLOR_Red);
                Circle(x+<span style="color:#800080;">108</span>+FlagSet*X_Witch_cn,y+<span style="color:#800080;">7</span>*Y_Witch_cn+<span style="color:#800080;">5</span>,<span style="color:#800080;">4</span>,<span style="color:#800080;">1</span>);        
               <span style="color:#0000ff;">if</span>(GyroControlEN==<span style="color:#800080;">1</span>)
        {
            ITG3200ReadData();
            ITG3200ShowData();
            delay_ms(<span style="color:#800080;">150</span>);
        }
        
        <span style="color:#0000ff;">else</span>
            
            InputControl();
        
        GyroKey=GyroKeyBoardInputMethod(<span style="color:#800080;">0</span>,<span style="color:#800080;">1</span>,<span style="color:#800080;">200</span>,<span style="color:#800080;">1000</span>);
         <span style="color:#0000ff;">if</span>(GyroKey!=KEYNULL)
                 key_data=GyroKey;
                GyroKey=KEYNULL;
                  SetPaintMode(<span style="color:#800080;">0</span>,COLOR_White);
                Circle(x+<span style="color:#800080;">108</span>+FlagSet*X_Witch_cn,y+<span style="color:#800080;">7</span>*Y_Witch_cn+<span style="color:#800080;">5</span>,<span style="color:#800080;">4</span>,<span style="color:#800080;">1</span>);
        <span style="color:#0000ff;">switch</span>(key_data)
        {
        <span style="color:#0000ff;">case</span> KEYUP_UP:
            <span style="color:#0000ff;">if</span>(PY_index&gt;<span style="color:#800080;">8</span>)
            PY_index-=<span style="color:#800080;">9</span>;
            
                dispsf(x,y,buff,*buffin);
            <span style="color:#0000ff;">break</span>;
        <span style="color:#0000ff;">case</span> KEYDOWN_UP:
            <span style="color:#0000ff;">if</span>((strlenExt(t9pyfun.t9PY_addr-&gt;PY_mb)-(<span style="color:#800080;">2</span>*(PY_index+<span style="color:#800080;">8</span>)))&gt;<span style="color:#800080;">0</span>)
            {
                          PY_index+=<span style="color:#800080;">9</span>;
            
                    dispsf(x,y,buff,*buffin);
            }
            <span style="color:#0000ff;">break</span>;
        <span style="color:#0000ff;">case</span> KEYCANCEL_UP:
            InnerFuncState=<span style="color:#800080;">0</span>;
            <span style="color:#0000ff;">break</span>;
        <span style="color:#0000ff;">case</span> KEYLEFT_UP:
            <span style="color:#0000ff;">if</span>(FlagSet&gt;<span style="color:#800080;">0</span>)
            FlagSet--;
            <span style="color:#0000ff;">break</span>;
        <span style="color:#0000ff;">case</span> KEYRIGHT_UP:
                      <span style="color:#0000ff;">if</span>(FlagSet&lt;<span style="color:#800080;">8</span>)
            FlagSet++;
             
                        
            <span style="color:#0000ff;">break</span>;
            <span style="color:#0000ff;">case</span> KEYENTER_UP:
            PY_index+=(FlagSet);
            <span style="color:#0000ff;">if</span> (*(*t9pyfun.t9PY_addr).PY_mb &gt; <span style="color:#800080;">0x80</span>)          <span style="color:#008000;">//</span><span style="color:#008000;">输入汉字</span>
            {
                
                
                buff[(*buffin)++] = *((*t9pyfun.t9PY_addr).PY_mb+PY_index*<span style="color:#800080;">2</span>);
                buff[(*buffin)++] = *((*t9pyfun.t9PY_addr).PY_mb+PY_index*<span style="color:#800080;">2</span>+<span style="color:#800080;">1</span>);
                InnerFuncState=<span style="color:#800080;">0</span>;
                clrindex(x,y,<span style="color:#800080;">1</span>);
                
            }
            <span style="color:#0000ff;">else</span>               <span style="color:#008000;">//</span><span style="color:#008000;">输入字符</span>
            {
                
                buff[(*buffin)++] = *((*t9pyfun.t9PY_addr).PY_mb+PY_index);
                <span style="color:#008000;">//</span><span style="color:#008000;">buff[(*buffin)++] = ' ';                </span>
                InnerFuncState=<span style="color:#800080;">0</span>;
                clrindex(x,y,<span style="color:#800080;">1</span>);
                
            }
            <span style="color:#0000ff;">break</span>;
            
        }
        

        
    }
    
}</pre> 
      <div class="cnblogs_code_toolbar">
       <span class="cnblogs_code_copy"><img alt="复制代码" src="http://common.cnblogs.com/images/copycode.gif"></span>
      </div> 
     </div> 
     <p>&nbsp; 5. 主函数流程</p> 
     <p>　　这是系统整个的输入流程，在主循环中，VirtualNumKeyBoardInput函数接收用户输入，用户输入的字符可通过形参的指针传递，返回值作为状态。但返回0时，表明用户选择放弃输入直接退出；返回1时，跳出循环保存，返回2时，继续输入，加20的偏移量，仅仅是为了前后的输入键值匹配。</p> 
     <div class="cnblogs_code"> 
      <div class="cnblogs_code_toolbar">
       <span class="cnblogs_code_copy"><img alt="复制代码" src="http://common.cnblogs.com/images/copycode.gif"></span>
      </div> 
      <pre>u8 T9InputTask(u8 x,u8 y, u8 *Buff,u8 *BuffFlag,u8 Max)
{
 
    u8 VnKbX=<span style="color:#800080;">1</span>,VnKbY=<span style="color:#800080;">1</span>,VnKey;
    TaskBoxGUI_P(x,y,x+<span style="color:#800080;">100</span>+<span style="color:#800080;">9</span>*Y_Witch_cn,y+Y_Witch_cn+<span style="color:#800080;">108</span>,<span style="color:#800000;">"</span><span style="color:#800000;">中文输入程序</span><span style="color:#800000;">"</span>,<span style="color:#800080;">0</span>);
    
        PutBitmap(x,y+Y_Witch_cn,VKNUM,<span style="color:#800080;">0</span>);
    FontMode(<span style="color:#800080;">1</span>,COLOR_White);
        py_init();
         dispsrf(x,y);
     OS_func_state=<span style="color:#800080;">1</span>;
     <span style="color:#0000ff;">while</span> (OS_func_state==<span style="color:#800080;">1</span>)
     {
                  dispsf(x,y,Buff,*BuffFlag);
         <span style="color:#0000ff;">switch</span>(VirtualNumKeyBoardInput(x,y-Y_Witch_cn,&amp;VnKbX,&amp;VnKbY,&amp;VnKey,<span style="color:#800080;">0</span>,<span style="color:#800080;">1</span>))
                 {
                 <span style="color:#0000ff;">case</span> <span style="color:#800080;">0</span>:
                      <span style="color:#0000ff;">return</span>  <span style="color:#800080;">0</span>;
                 <span style="color:#0000ff;">case</span> <span style="color:#800080;">1</span>:
                      <span style="color:#0000ff;">break</span>;
                 <span style="color:#0000ff;">case</span> <span style="color:#800080;">2</span>:
                       VnKey+=<span style="color:#800080;">20</span>;  <span style="color:#008000;">//</span><span style="color:#008000;">加20偏移量</span>
                       <span style="color:#0000ff;">break</span>;
                 }
        T9InputChoose(x,y,VnKey,Buff,BuffFlag,Max);
                
  
     }
    
         <span style="color:#0000ff;">return</span> <span style="color:#800080;">1</span>;
    
}</pre> 
      <div class="cnblogs_code_toolbar">
       <span class="cnblogs_code_copy"><img alt="复制代码" src="http://common.cnblogs.com/images/copycode.gif"></span>
      </div> 
     </div> 
     <h2>四. 总结</h2> 
     <p>　　这些代码也是我在大三时移植和完成的，因此存在大量的C语言印记。</p> 
     <p>　　我的最大感受，即使是嵌入式C语言，也应该尽可能的将功能模块化，输入函数仅处理用户输入，显示函数和搜索算法都应该分离。当然，由于C语言没有事件，只能通过返回值确定系统状态，在传递参数较多时，要么传递结构体，要么通过长长的形参表传递，这都是不利于程序维护，也是我的代码需要改进的地方。</p> 
     <p>　　整个输入法模块移植起来依旧是需要时间，精力和耐心的。我承认在一篇文章中完整的表述中文输入法算法有些困难，附件将提供完整的源代码供大家参考。</p> 
     <p>　　以下是完整<a href="http://files.cnblogs.com/buptzym/%E4%B8%AD%E6%96%87%E8%BE%93%E5%85%A5%E6%B3%95%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81.rar" rel="nofollow">源代码</a>。</p> 
    </div> 
    <div> 
     <div> 
      <p style="border-top:#e0e0e0 1px dashed;border-right:#e0e0e0 1px dashed;border-bottom:#e0e0e0 1px dashed;border-left:#e0e0e0 1px dashed;background:#e5f1f4 url(&quot;https://images.cnblogs.com/cnblogs_com/lloydsheng/239039/o_copyright.gif&quot;) no-repeat 1% 50%;font-family:'微软雅黑';font-size:11px;"><br> 作者：<a href="http://www.cnblogs.com/buptzym/" rel="nofollow">热情的沙漠</a> <br> 出处：<a href="http://www.cnblogs.com/buptzym/" rel="nofollow">http://www.cnblogs.com/buptzym/</a> <br> 本文版权归作者和博客园共有，欢迎转载，但未经作者同意必须保留此段声明，且在文章页面明显位置给出原文连接，否则保留追究法律责任的权利。 <br></p> 
     </div> 
    </div> 
    <div class="clear"></div> 
    <div> 
     <div></div> 
     <div>
      标签: 
      <a href="http://www.cnblogs.com/buptzym/tag/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%BC%80%E5%8F%91/" rel="nofollow">嵌入式开发</a>, 
      <a href="http://www.cnblogs.com/buptzym/tag/XMove/" rel="nofollow">XMove</a> 
     </div> 
     <div>
      <br>
     </div> 
     <div>
      本文转自FerventDesert博客园博客，原文链接：http://www.cnblogs.com/buptzym/archive/2012/07/08/2559195.html，如需转载请自行联系原作者
      <br>
     </div> 
    </div> 
   </div> 
  </div> 
 </div> 
</div>
  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="https://uzstatic-360cdn.belost.xyz/theme/default/images/logo.png" alt="柚子社区">
  <div class="col-box-title name">NotBeCN</div>
  <!-- <p>最新资讯</p> -->
  <p class="contact">
    
    <a href="mailto:fandyvon@163.com" target="_blank">邮箱</a>
    
    <a href="https://uzshare.com" target="_blank">柚子社区</a>
    
    <a href="https://uzzz.org" target="_blank">找组织</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">最新</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2019/05/14/zxh1220_90138586.html">[原创软件] [软件发布] 定时备份文件发送邮箱，不再怕数据丢失了</a></li>
    
      <li><a class="post-link" href="/2019/05/14/weixin_45037290_90140056.html">Get智能写作满月记 ——产品篇</a></li>
    
      <li><a class="post-link" href="/2019/05/14/nulio__90138386.html">《深度探索C++对象模型》..............</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_41248707_90140031.html">mysql 多表联查之连接查询</a></li>
    
      <li><a class="post-link" href="/2019/05/13/qq_21122683_90125902.html">golang基础(二)</a></li>
    
      <li><a class="post-link" href="/2019/05/13/1557726108256.html">今日份的PTA刷题</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90137366.html">Android之折线图</a></li>
    
      <li><a class="post-link" href="/2019/05/12/zzzfffei_90136638.html">Android之实现选中时改变样式</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">目录</div>
</div>

<div class="col-box">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- right_sidebar -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-8889449066804352"
       data-ad-slot="2081363239"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2019 
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123344652-5');
</script>


<script data-ad-client="ca-pub-8889449066804352" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = true;
  hm.src = "https://hm.baidu.com/hm.js?9b378145d7399199b371d067f4c8be96";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </body>

</html>
